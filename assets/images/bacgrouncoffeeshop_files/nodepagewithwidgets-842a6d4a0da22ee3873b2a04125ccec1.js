YUI.add("sm-add-ons-action-types",(function(e){SM.currentModule="sm-add-ons-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SET_OPTION=exports.SET_PAGE=void 0;exports.SET_PAGE="ADD_ONS_SET_PAGE";exports.SET_OPTION="ADD_ONS_SET_OPTION"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-add-ons-constants",(function(E){SM.currentModule="sm-add-ons-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.REQUEST_ID_SEARCH=exports.FRAME_STYLE_MAP=exports.COLOR_MAP=exports.ADD_ONS_OPTIONS=exports.TEXTURE_PAGES=exports.MOUNT_PAGES=exports.FRAME_PAGES=exports.ALL_PAGES=exports.TEXTURE_REVIEW_PAGE=exports.TEXTURE_SELECT_PAGE=exports.MOUNT_REVIEW_PAGE=exports.MOUNT_TEXTURE_PAGE=exports.MOUNT_SELECT_PAGE=exports.FRAME_REVIEW_PAGE=exports.FRAME_TEXTURE_PAGE=exports.FRAME_COLOR_PAGE=exports.FRAME_STYLE_PAGE=exports.FRAME_MAT_PAGE=exports.INDEX_PAGE=void 0;const E="ADD_ONS_INDEX_PAGE";exports.INDEX_PAGE=E;exports.FRAME_MAT_PAGE="ADD_ONS_FRAME_MAT_PAGE";exports.FRAME_STYLE_PAGE="ADD_ONS_FRAME_STYLE_PAGE";exports.FRAME_COLOR_PAGE="ADD_ONS_FRAME_COLOR_PAGE";exports.FRAME_TEXTURE_PAGE="ADD_ONS_FRAME_TEXTURE_PAGE";exports.FRAME_REVIEW_PAGE="ADD_ONS_FRAME_REVIEW_PAGE";exports.MOUNT_SELECT_PAGE="ADD_ONS_MOUNT_SELECT_PAGE";exports.MOUNT_TEXTURE_PAGE="ADD_ONS_MOUNT_TEXTURE_PAGE";exports.MOUNT_REVIEW_PAGE="ADD_ONS_REVIEW_PAGE";exports.TEXTURE_SELECT_PAGE="ADD_ONS_TEXTURE_SELECT_PAGE";exports.TEXTURE_REVIEW_PAGE="ADD_ONS_TEXTURE_REVIEW_PAGE";const _=[E,"ADD_ONS_FRAME_MAT_PAGE","ADD_ONS_FRAME_STYLE_PAGE","ADD_ONS_FRAME_COLOR_PAGE","ADD_ONS_FRAME_TEXTURE_PAGE","ADD_ONS_FRAME_REVIEW_PAGE","ADD_ONS_MOUNT_SELECT_PAGE","ADD_ONS_MOUNT_TEXTURE_PAGE","ADD_ONS_REVIEW_PAGE","ADD_ONS_TEXTURE_SELECT_PAGE","ADD_ONS_TEXTURE_REVIEW_PAGE"];exports.ALL_PAGES=_;const A={[E]:"Frames",ADD_ONS_FRAME_MAT_PAGE:"Matting",ADD_ONS_FRAME_STYLE_PAGE:"Frame Style",ADD_ONS_FRAME_COLOR_PAGE:"Frame Color",ADD_ONS_FRAME_TEXTURE_PAGE:"Paper Texture",ADD_ONS_FRAME_REVIEW_PAGE:"Review"};exports.FRAME_PAGES=A;const T={[E]:"Back Mounts",ADD_ONS_MOUNT_SELECT_PAGE:"Mount Style",ADD_ONS_MOUNT_TEXTURE_PAGE:"Paper Texture",ADD_ONS_REVIEW_PAGE:"Review"};exports.MOUNT_PAGES=T;const R={[E]:"Textures",ADD_ONS_TEXTURE_SELECT_PAGE:"Texture Style",ADD_ONS_TEXTURE_REVIEW_PAGE:"Review"};exports.TEXTURE_PAGES=R;const S={FRAME_MAT:"frameMat",FRAME_STYLE:"frameStyle",FRAME_COLOR:"frameColor",MOUNT:"mount",TEXTURE:"texture",COATING:"coating"};exports.ADD_ONS_OPTIONS=S;exports.COLOR_MAP={BLACK:"#302B32",WALNUT:"#723A38",MOCHA:"#5D3A41",CHERRY:"#8C393D",CHARCOAL:"#55474C",NATURAL:"#EDBD94",WHITE:"#F6F2EF"};exports.FRAME_STYLE_MAP={aluminum:{name:"Aluminum",description:"Tall height, medium bevel"},"box wood":{name:"Box Wood",description:"Tall height, narrow bevel"},"flat wood":{name:"Flat Wood",description:"Short height, wide bevel"}};exports.REQUEST_ID_SEARCH="ADDONS_FETCH_HERO_IMAGES"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-add-ons-reducers",(function(e){SM.currentModule="sm-add-ons-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.responseReducer=u,exports.UI=function(e={},r){return[s,u].reduce((e,n)=>({...e,addOns:n(e.addOns,r)}),e)};var e=r("sm-add-ons-action-types"),n=r("sm-add-ons-constants"),t=r("sm-api-redux-action-types");function s(r={},t){switch(t.type){case e.SET_PAGE:return t.page===n.INDEX_PAGE?{heroImageSearchUri:r.heroImageSearchUri||"",page:t.page}:{...r,page:t.page};case e.SET_OPTION:return{...r,[t.optionType]:t.uri};default:return r}}function u(e={},r){if(r.type!==t.RESPONSE)return e;switch(r.requestIdentifier){case n.REQUEST_ID_SEARCH:return{...e,heroImageSearchUri:r.lookupKey};default:return e}}}(),SM.currentModule=null}),"",{requires:["sm-add-ons-action-types","sm-add-ons-constants"]});
YUI.add("sm-album-picker-actions",(function(e){SM.currentModule="sm-album-picker-actions";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchAlbumsProductID=function(){return(0,e.fetchFromAPI)({uri:u.ALBUM_PRODUCT_ID_ENDPOINT})};var e=r("sm-api-redux-actions"),u=r("sm-album-picker-constants")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-actions","sm-album-picker-constants"]});
YUI.add("sm-album-picker-constants",(function(e){SM.currentModule="sm-album-picker-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MIN_IMAGES=exports.ALBUM_PRODUCT_ID_ENDPOINT=void 0;exports.ALBUM_PRODUCT_ID_ENDPOINT="/api/v2/cards!albumproducts";exports.MIN_IMAGES=10}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-album-picker-selectors",(function(e){SM.currentModule="sm-album-picker-selectors";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAlbumID=function(r){let u=(0,e.getEntity)(r,t.ALBUM_PRODUCT_ID_ENDPOINT)||{},s=Object.keys(u)[0],{ProductID:c}=u[s]||{};return c};var e=r("sm-api-redux-selectors"),t=r("sm-album-picker-constants")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-album-picker-constants"]});
YUI.add("sm-album-picker-skip-container",(function(e){SM.currentModule="sm-album-picker-skip-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=r("react-redux"),i=babelHelpers.interopRequireDefault(r("sm-folded-card-picker-skip")),n=r("sm-com-lb-image-picker-actions"),u=r("sm-api-redux-selectors");const a=(0,t.connect)((function(e,{albumUri:r}){let{ImageCount:t}=(0,u.getEntity)(e,r)||{};return{_albumImagesUri:(0,u.getExpansionUri)(e,r,"AlbumImages"),_expansions:(0,u.getPreviousExpansionsForParentExpansion)(e,r,"AlbumImages"),_imageCount:t}}),(function(e,{albumUri:r,whccProduct:t}){return{_fetchAllImagesForCardEditor:(i,u,a)=>e((0,n.fetchAllImagesForCardEditor)(r,i,u,a,t))}}),(function(e,r,t){let{_albumImagesUri:i,_expansions:n,_imageCount:u}=e,{_fetchAllImagesForCardEditor:a}=r,{onContinueClick:o,whccProduct:s}=t;return{whccProduct:s,onContinueClick:async()=>{let e=await a(i,n,u);return o(e)}}}))(i.default);a.propTypes={albumUri:e.default.string.isRequired,onContinueClick:e.default.func.isRequired};var o=a;exports.default=o}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-folded-card-picker-skip","sm-com-lb-image-picker-actions","sm-api-redux-selectors"]});
YUI.add("sm-card-picker-actions",(function(e){SM.currentModule="sm-card-picker-actions";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchCardDesigns=function(){return(0,e.fetchFromAPI)({uri:c.DESIGNS_ENDPOINT})};var e=r("sm-api-redux-actions"),c=r("sm-card-picker-constants")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-actions","sm-card-picker-constants","sm-album-image-picker-actions","sm-com-lb-selectors","sm-com-lb-constants"]});
YUI.add("sm-card-picker-constants",(function(e){SM.currentModule="sm-card-picker-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DESIGNS_ENDPOINT=void 0;exports.DESIGNS_ENDPOINT="/api/v2/cards!designs"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-card-picker-container",(function(e){SM.currentModule="sm-card-picker-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),a=r("react-redux"),c=babelHelpers.interopRequireDefault(r("sm-card-picker")),t=babelHelpers.interopRequireDefault(r("sm-card-picker-props")),s=r("sm-card-picker-actions"),i=r("sm-card-picker-selectors");const u=(0,a.connect)((function(e){return{allCards:(0,i.getCardDesigns)(e)||{}}}),(function(e){return{loadDesigns:()=>e((0,s.fetchCardDesigns)())}}))(c.default);u.propTypes={imageUri:e.default.string,allCards:e.default.shape(t.default)};var d=u;exports.default=d}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-card-picker","sm-card-picker-props","sm-card-picker-actions","sm-card-picker-selectors"]});
YUI.add("sm-card-picker-defs",(function(c){SM.currentModule="sm-card-picker-defs";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var c=babelHelpers.interopRequireDefault(e("react"));const t=()=>c.default.createElement(c.default.Fragment,null,c.default.createElement("svg",{viewBox:"0 0 2375 2375",height:"0",width:"0"},c.default.createElement("defs",null,c.default.createElement("linearGradient",{id:"shine-gradient",x1:"0%",y1:"30%",x2:"100%",y2:"70%"},c.default.createElement("stop",{offset:"20%",stopColor:"#fff",stopOpacity:"0"}),c.default.createElement("stop",{offset:"50%",stopColor:"#fff",stopOpacity:"1"}),c.default.createElement("stop",{offset:"80%",stopColor:"#fff",stopOpacity:"0"})),c.default.createElement("mask",{id:"shine-mask"},c.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#shine-gradient)"}))),c.default.createElement("defs",null,c.default.createElement("filter",{id:"foil-gold"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.71 0.85 1"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.55 0.72 0.98"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.24 0.44 0.85"}))),c.default.createElement("filter",{id:"foil-red"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.44 0.92 0.96"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.05 0.18 0.46"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.02 0.19 0.42"}))),c.default.createElement("filter",{id:"foil-silver"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.55 0.97"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.54 1"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.5 1"}))),c.default.createElement("filter",{id:"foil-rose_gold"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.65 0.88"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.38 0.67"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.16 0.49"}))),c.default.createElement("filter",{id:"foil-pink"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.69 0.96 0.96"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.02 0.42 0.18"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.31 0.64 0.51"}))),c.default.createElement("filter",{id:"foil-blue"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.11 0.11 0.11"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.25 0.45 0.2"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.65 0.96 0.96"}))),c.default.createElement("filter",{id:"foil-iridescent"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.55 0.94 0.93 0.73 0.75 0.82 0.94"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.54 0.94 0.83 0.97 0.86 0.88 0.94"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.5 0.94 1 0.92 1 0.96 0.94"}))),c.default.createElement("filter",{id:"foil-evergreen"},c.default.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},c.default.createElement("feFuncR",{type:"table",tableValues:"0.03 0.15 0.03"}),c.default.createElement("feFuncG",{type:"table",tableValues:"0.26 0.45 0.26"}),c.default.createElement("feFuncB",{type:"table",tableValues:"0.08 0.02 0.08"})))),c.default.createElement("defs",null,c.default.createElement("filter",{id:"foil-texture",x:"0",y:"0",width:"100%",height:"100%",filterUnits:"userSpaceOnUse"},c.default.createElement("feImage",{preserveAspectRatio:"none",width:"100%",height:"100%",xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"https://cdn-dev.dragdrop.design/editor/imgs/foil-texture.jpg",result:"texture"}),c.default.createElement("feComposite",{operator:"atop",in:"texture",in2:"SourceGraphic"})),c.default.createElement("filter",{id:"remove-bg-colorize-white"},c.default.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",colorInterpolationFilters:"sRGB",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 -1 -1 -1 1 0"})),c.default.createElement("filter",{id:"remove-bg"},c.default.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",colorInterpolationFilters:"sRGB",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -1 -1 -1 1 0"})))),c.default.createElement("svg",null,c.default.createElement("defs",null,c.default.createElement("filter",{id:"dropshadow",height:"130%"},c.default.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"40"}),c.default.createElement("feOffset",{dx:"0",dy:"20",result:"offsetblur"}),c.default.createElement("feComponentTransfer",null,c.default.createElement("feFuncA",{type:"linear",slope:"0.2"})),c.default.createElement("feMerge",null,c.default.createElement("feMergeNode",null),c.default.createElement("feMergeNode",{in:"SourceGraphic"}))),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-no-5x7"},c.default.createElement("path",{d:"M37.5,1537.5l0-1500l2100,0v1500H37.5z",id:"landscape-no-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a1-5x7"},c.default.createElement("path",{d:"M2137.5,787.5c0,414.2-470.1,750-1050,750 s-1050-335.8-1050-750c0-414.2,470.1-750,1050-750S2137.5,373.3,2137.5,787.5z",id:"landscape-a1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a2-5x7"},c.default.createElement("path",{d:"M2137.5,1312.5c0,124.3-100.7,225-225,225h-1650 c-124.3,0-225-100.7-225-225v-1050c0-124.3,100.7-225,225-225h1650c124.3,0,225,100.7,225,225V1312.5z",id:"landscape-a2-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a3-5x7"},c.default.createElement("path",{d:"M562.5,37.5c-290.2,0-525,234.8-525,525v975 h1575c290.2,0,525-234.8,525-525v-975H562.5L562.5,37.5z",id:"landscape-a3-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a4-5x7"},c.default.createElement("path",{d:"M2029.2,1460.2c-627.8,103.1-1255.6,103.1-1883.4,0 C1.4,1011.7,1.4,563.3,145.8,114.8c627.8-103.1,1255.6-103.1,1883.4,0C2173.6,563.3,2173.6,1011.7,2029.2,1460.2z",id:"landscape-a4-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a5-5x7"},c.default.createElement("path",{d:"M2137.5,787.1l-152.3,750.4H189.8L37.5,788L189.8,37.5h1795.4 L2137.5,787.1z",id:"landscape-a5-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a15-5x7"},c.default.createElement("path",{d:"M2137.5,37.5v1500H400L37.5,1264.6l0-950 L400,37.5L2137.5,37.5z"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a15_hole-5x7"},c.default.createElement("path",{d:"M2137.5,37.5v1500H400L37.5,1264.6l0-950 L400,37.5L2137.5,37.5z M124.9,787.5c0,15.6,12.6,28.2,28.2,28.2s28.2-12.6,28.2-28.2c0-15.6-12.6-28.2-28.2-28.2 S124.9,771.9,124.9,787.5z"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-a10-5x7"},c.default.createElement("path",{d:"M37.5,787.5c408.6,500,785.9,750,1131.9,750 c348.2,0,671-250,968.1-750c-297.2-500-619.9-750-968.1-750C823.4,37.5,446.1,287.5,37.5,787.5z",id:"landscape-a10-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-b1-5x7"},c.default.createElement("path",{d:"M1087.5,1537.5c-33.1,0-60-27.8-60-61.3c0-0.5,0,0.5,0,0 c-2.2,31.5-28.2,55.7-59.9,55.7c-33.1,0-60-27.1-60-60.6c0-2,0.1-3.9,0.3-5.8c-4.5,29-29.2,51.3-59.2,51.3c-33.1,0-60-27.1-60-60.6 c0-3.8,0.2-7.6,0.9-11.2c-6.5,26.4-30.2,46-58.4,46c-33.1,0-60-27.1-60-60.6c0-5.8,0.5-11.5,2-16.8c-8.4,23.2-30.7,39.7-56.6,39.7 c-33.1,0-60-27.1-60-60.6c0-7.7,1.4-15,4-21.8c-9.8,20-30.2,33.8-53.8,33.8c-33.1,0-60-27.1-60-60.6c0-9.8,2.3-18.9,6.4-27.1 c-10.8,16-29,26.5-49.6,26.5c-33.1,0-60-27.1-60-60.6c0-11.3,3.1-21.8,8.4-30.9c-10.9,11.1-25.9,17.9-42.6,17.9 c-33.1,0-60-27.1-60-60.6c0-15.2,5.2-29.4,14.3-40c-10.4,8.6-24,13.4-38.4,13.4c-33.1,0-60-27.1-60-60.6c0-19.2,8.5-36.7,22.3-47.8 c-8.6,4.8-18.8,7.1-29.3,7.1c-33.1,0-60-27.1-60-60.6c0-23.8,13.5-44.6,33.2-54.5c-5.2,1.5-10.8,2.1-16.5,2.1 c-33.1,0-60-27.1-60-60.6c0-28.7,19.8-53.1,46.3-59.3c-1.3,0.1-2.7-0.2-4.1-0.2c-33.1,0-60-27.1-60-60.6c0-33.5,26.9-60.6,60-60.6 c1.4,0,2.7-0.3,4.1-0.2c-26.5-6.3-46.3-30.6-46.3-59.3c0-33.5,26.9-60.6,60-60.6c5.7,0,11.3,0.6,16.5,2.1 c-19.7-9.9-33.2-30.7-33.2-54.5c0-33.5,26.9-60.6,60-60.6c10.5,0,20.7,2.3,29.3,7.1c-13.7-11.1-22.3-28.6-22.3-47.8 c0-33.5,26.9-60.6,60-60.6c14.5,0,28.1,4.8,38.4,13.4c-9.1-10.6-14.3-24.8-14.3-40c0-33.5,26.9-60.6,60-60.6 c16.6,0,31.7,6.9,42.6,17.9c-5.3-9.1-8.4-19.6-8.4-30.9c0-33.5,26.9-60.6,60-60.6c20.6,0,38.8,10.5,49.6,26.5 c-4.1-8.2-6.4-17.3-6.4-27.1c0-33.5,26.9-60.6,60-60.6c23.6,0,44,13.8,53.8,33.8c-2.6-6.8-4-14.1-4-21.8c0-33.5,26.9-60.6,60-60.6 c25.9,0,48.2,16.5,56.6,39.7c-1.5-5.3-2-11-2-16.8c0-33.5,26.9-60.6,60-60.6c28.1,0,51.6,15.8,58.1,42.2c-0.7-3.6,0,3.8,0,0 c0-33.5,26.3-68.1,59.4-68.1c30,0,54.8,22.2,59.2,51.3c-0.2-1.9-0.3-3.9-0.3-5.8c0-33.5,26.8-60.6,60-60.6 c31.7,0,57.7,24.9,59.9,56.4c0-0.5,0-0.9,0-1.4c0-33.5,26.9-60.6,60-60.6c33.1,0,60,27.1,60,60.6c0,0.5,0,0.9,0,1.4 c2.2-31.5,28.1-56.4,59.9-56.4c33.1,0,60,27.1,60,60.6c0,2-0.1,3.9-0.3,5.8c4.5-29,29.2-51.3,59.2-51.3c33.1,0,59.4,34.6,59.4,68.1 c0,3.8,0.7-3.6,0,0c6.5-26.4,29.9-42.2,58.1-42.2c33.1,0,60,27.1,60,60.6c0,5.8-0.5,11.5-2,16.8c8.4-23.2,30.7-39.7,56.6-39.7 c33.1,0,60,27.1,60,60.6c0,7.7-1.4,15-4,21.8c9.8-20,30.2-33.8,53.8-33.8c33.1,0,60,27.1,60,60.6c0,9.8-2.3,18.9-6.4,27.1 c10.8-16,29-26.5,49.6-26.5c33.1,0,60,27.1,60,60.6c0,11.3-3.1,21.8-8.4,30.9c10.9-11.1,25.9-17.9,42.6-17.9c33.1,0,60,27.1,60,60.6 c0,15.2-5.2,29.4-14.3,40c10.4-8.6,24-13.4,38.4-13.4c33.1,0,60,27.1,60,60.6c0,19.2-8.5,36.7-22.3,47.8c8.6-4.8,18.8-7.1,29.3-7.1 c33.1,0,60,27.1,60,60.6c0,23.8-13.5,44.6-33.3,54.5c5.2-1.5,10.8-2.1,16.5-2.1c33.1,0,60,27.1,60,60.6c0,28.7-19.8,53.1-46.3,59.3 c1.3-0.1,2.7,0.2,4.1,0.2c33.1,0,60,27.1,60,60.6c0,33.5-26.9,60.6-60,60.6c-1.4,0-2.7,0.2-4.1,0.2c26.6,6.2,46.3,30.6,46.3,59.3 c0,33.5-26.9,60.6-60,60.6c-5.7,0-11.3-0.6-16.5-2.1c19.7,9.9,33.3,30.7,33.3,54.5c0,33.5-26.9,60.6-60,60.6 c-10.5,0-20.7-2.3-29.3-7.1c13.7,11.1,22.3,28.6,22.3,47.8c0,33.5-26.9,60.6-60,60.6c-14.5,0-28.1-4.8-38.4-13.4 c9.1,10.6,14.3,24.9,14.3,40c0,33.5-26.9,60.6-60,60.6c-16.6,0-31.7-6.9-42.6-17.9c5.3,9,8.4,19.6,8.4,30.9 c0,33.5-26.9,60.6-60,60.6c-20.6,0-38.8-10.5-49.6-26.5c4.1,8.2,6.4,17.3,6.4,27.1c0,33.5-26.9,60.6-60,60.6 c-23.6,0-44-13.8-53.8-33.8c2.6,6.8,4,14.1,4,21.8c0,33.5-26.9,60.6-60,60.6c-25.9,0-48.2-16.5-56.6-39.7c1.5,5.3,2,11,2,16.8 c0,33.5-26.9,60.6-60,60.6c-28.1,0-51.9-19.6-58.4-46c0.7,3.6,0.9,7.4,0.9,11.2c0,33.5-26.9,60.6-60,60.6c-30,0-54.7-22.2-59.2-51.3 c0.2,1.9,0.3,3.9,0.3,5.8c0,33.5-26.9,60.6-60,60.6c-31.7,0-57.7-24.9-59.9-56.4c0,0.5,0,0.9,0,1.4 C1147.5,1510.4,1120.6,1537.5,1087.5,1537.5",id:"landscape-b1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-b2-5x7"},c.default.createElement("path",{d:"M2077,1412.4v-0.2c33.3-1,60.1-28.5,60.1-62.5 c0-33.7-26.4-61.1-59.4-62.4c33-1.3,59.4-28.7,59.4-62.4c0-33.9-26.7-61.5-60.1-62.5v-0.1c33.3-1,60.1-28.5,60.1-62.5 c0-33.7-26.4-61.1-59.4-62.4c33-1.3,59.4-28.7,59.4-62.4c0-33.9-26.7-61.5-60.1-62.5v-0.1c33.3-1,60.1-28.5,60.1-62.5 c0-33.7-26.4-61.1-59.4-62.4c33-1.3,59.4-28.7,59.4-62.4c0-33.9-26.7-61.5-60.1-62.5v-0.1c33.3-1,60.1-28.5,60.1-62.5 c0-33.7-26.4-61.1-59.4-62.4c33-1.3,59.4-28.7,59.4-62.4c0-33.9-26.7-61.5-60.1-62.5v-0.1c33.3-1,60.1-28.5,60.1-62.5 c0-33.7-26.4-61.1-59.3-62.4c33-1.3,59.3-28.7,59.3-62.4c0-33-25.3-60-57.4-62.3c32.3-2.1,57.9-29.2,57.9-62.4 c0-19.6-8.9-37.1-22.8-48.5c-10.7-9-24.5-14.4-39.5-14.4c-19.3,0-36.5,8.9-47.9,22.9c-6.9,8.4-11.6,18.6-13.4,29.8 c-4.8-29.7-30.2-52.4-61-52.4c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60.1 c-1.3-33.4-28.4-60.1-61.7-60.1c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60.1 c-1.3-33.4-28.4-60.1-61.7-60.1c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60 c-1.3-33.4-28.4-60-61.7-60c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60 c-1.3-33.4-28.4-60-61.7-60c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60 c-1.3-33.4-28.4-60-61.7-60c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60 c-1.3-33.4-28.4-60-61.7-60c-33.9,0-61.4,27.6-61.8,61.8c-0.4-34.2-27.9-61.8-61.8-61.8c-33.3,0-60.4,26.7-61.7,60 c-1.3-33.4-28.4-60-61.7-60c-32.9,0-59.7,26-61.7,58.7c-1.8-32.9-28.7-59.1-61.7-59.1c-19.3,0-36.5,8.9-47.9,22.9 c-8.9,10.8-14.3,24.8-14.3,40c0,33.2,25.5,60.2,57.8,62.4c-32.1,2.3-57.5,29.3-57.5,62.3c0,33.7,26.4,61.1,59.3,62.4 c-33,1.3-59.3,28.7-59.3,62.4c0,34.3,27.3,62.1,61.1,62.5c-33.8,0.4-61.1,28.2-61.1,62.5c0,33.7,26.4,61.1,59.4,62.4 c-33,1.3-59.4,28.7-59.4,62.4c0,34.3,27.3,62.1,61.1,62.5c-33.8,0.4-61.1,28.2-61.1,62.5c0,33.7,26.4,61.1,59.4,62.4 c-33,1.3-59.4,28.7-59.4,62.4c0,34.3,27.3,62.1,61.1,62.5c-33.8,0.4-61.1,28.2-61.1,62.5c0,33.7,26.4,61.1,59.4,62.4 c-33,1.3-59.4,28.7-59.4,62.4c0,34.3,27.3,62.1,61.1,62.5c-33.8,0.4-61.1,28.2-61.1,62.5c0,33.7,26.4,61.1,59.4,62.4 c-33,1.3-59.4,28.7-59.4,62.4c0,34.3,27.3,62.1,61.1,62.5c-10.4,0.1-20.2,2.8-28.8,7.5c-19.4,10.6-32.6,31.3-32.6,55.1 c0,34.5,27.7,62.6,61.9,62.6c10.7,0,20.7-2.7,29.5-7.6c18.4-10,31.1-29.1,32.5-51.4c1.9,32.9,28.7,59,61.7,59 c33.3,0,60.4-26.7,61.7-60c1.3,33.4,28.4,60,61.7,60c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c33.3,0,60.4-26.7,61.7-60c1.3,33.4,28.4,60,61.7,60c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c33.3,0,60.4-26.7,61.7-60c1.3,33.4,28.4,60,61.7,60c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c33.3,0,60.4-26.7,61.7-60c1.3,33.4,28.4,60,61.7,60c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c33.3,0,60.4-26.7,61.7-60c1.3,33.4,28.4,60,61.7,60c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c33.3,0,60.4-26.7,61.7-60.1c1.3,33.4,28.4,60.1,61.7,60.1c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c33.3,0,60.4-26.7,61.7-60.1c1.3,33.4,28.4,60.1,61.7,60.1c33.6,0,60.8-27.1,61.8-60.8h0.1c0.9,33.7,28.2,60.8,61.8,60.8 c31.6,0,57.6-23.9,61.3-54.8c3.8,30.9,29.8,54.8,61.3,54.8c34.2,0,61.9-28,61.9-62.6C2137.5,1440.8,2110.5,1413.2,2077,1412.4z",id:"landscape-b2-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c3-5x7"},c.default.createElement("path",{d:"M37.5,787.5c0,165.5,119.6,306.1,285.8,356.3 c71.5,224.5,386.4,393.7,764.2,393.7s692.7-169.1,764.2-393.7c166.2-50.2,285.8-190.8,285.8-356.3s-119.6-306.1-285.8-356.3 c-71.5-224.5-386.4-393.7-764.2-393.7S394.8,206.6,323.3,431.2C157.1,481.4,37.5,622,37.5,787.5z",id:"landscape-c3-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c4-5x7"},c.default.createElement("path",{d:"M1087.5,1537.5c-164,0-302.6-87.6-339.8-205.7 c-24.4,4-232.3,34.7-319.7-72.6c-46.7,21.2-103.4,12-141.7-27.5c-25.5-26.3-37.9-60.9-37.3-95.3c-28.1,3.5-198.1,17.1-183.1-160.6 C80,808.4,37.5,787.5,37.5,787.5S80,766.6,65.9,599.3C51,421.5,220.9,435.2,249,438.6c-0.6-34.4,11.8-69.1,37.3-95.3 c38.3-39.4,95-48.7,141.7-27.5c87.4-107.3,295.3-76.6,319.7-72.6c37.2-118,175.8-205.7,339.8-205.7c164,0,302.6,87.6,339.8,205.7 c24.4-4,232.3-34.7,319.7,72.6c46.7-21.2,103.4-12,141.7,27.5c25.5,26.3,37.9,60.9,37.3,95.3c28.1-3.5,198.1-17.1,183.1,160.6 c-14.1,167.4,28.4,188.2,28.4,188.2s-42.5,20.9-28.4,188.2c14.9,177.7-155,164.1-183.1,160.6c0.6,34.4-11.8,69.1-37.3,95.3 c-38.3,39.4-95,48.7-141.7,27.5c-87.4,107.3-295.3,76.6-319.7,72.6C1390.1,1449.9,1251.5,1537.5,1087.5,1537.5z",id:"landscape-c4-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c6-5x7"},c.default.createElement("path",{d:"M2137.5,787.5c0,306.8-128.1,562.1-297.6,617.9 c-25.8,77.9-83.1,132.2-149.7,132.2H484.8c-66.6,0-123.9-54.2-149.7-132.2c-169.5-55.7-297.6-311.1-297.6-617.9 c0-306.7,128.1-562.1,297.6-617.8c25.8-77.9,83.1-132.2,149.7-132.2h1205.4c66.6,0,123.9,54.2,149.7,132.2 C2009.4,225.4,2137.5,480.7,2137.5,787.5z",id:"landscape-c6-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c8-5x7"},c.default.createElement("path",{d:"M2137.5,1049c-56.8,11.5-98.3,39.4-117.8,91.6 c-49.9,0-122.3,0-209.8,0c-0.4,0.8-0.8,1.6-1.2,2.4c-19.3,33.6-58.2,51.4-96.9,47.9c17,32.3,12.3,72.2-15.2,100.6 c-27.4,28.4-69.7,37.1-106.4,25.1c8.1,35.1-6.7,72.8-40.7,94.3c-34,21.5-77.4,20.6-109.8,0.8c-1.2,35.9-25.4,69.2-64,82.6 c-38.5,13.3-80.4,2.9-106.9-23.5c-10.4,34.5-42.5,61.6-83.5,66c-40.9,4.4-78.9-15.1-97.7-46.5c-18.8,31.4-56.8,50.9-97.7,46.5 c-40.9-4.4-73-31.5-83.5-66c-26.4,26.3-68.3,36.8-106.9,23.5c-38.7-13.3-62.9-46.7-64-82.6c-32.4,19.7-75.8,20.7-109.8-0.8 c-34.1-21.5-48.9-59.2-40.7-94.3c-36.6,12-79,3.3-106.4-25.1c-27.5-28.4-32.2-68.3-15.2-100.6c-38.7,3.5-77.6-14.3-96.9-47.9 c-0.5-0.8-0.8-1.6-1.2-2.4c-87.5,0-159.9,0-209.8,0c-19.5-52.2-61-80.2-117.8-91.6V526c56.8-11.4,98.3-39.4,117.8-91.6 c49.9,0,122.3,0,209.8,0c0.4-0.8,0.8-1.6,1.2-2.4c19.3-33.6,58.2-51.4,96.9-47.9c-17-32.3-12.3-72.2,15.2-100.6 c27.4-28.4,69.7-37.1,106.4-25.1c-8.1-35.1,6.7-72.8,40.7-94.3c34-21.5,77.4-20.6,109.8-0.8c1.2-35.9,25.4-69.2,64-82.6 c38.5-13.3,80.4-2.9,106.9,23.5c10.4-34.5,42.5-61.6,83.5-66c40.9-4.4,78.9,15.1,97.7,46.5c18.8-31.4,56.8-50.9,97.7-46.5 c40.9,4.4,73,31.5,83.5,66c26.4-26.3,68.3-36.8,106.9-23.5c38.7,13.3,62.9,46.7,64,82.6c32.4-19.7,75.8-20.7,109.8,0.8 c34.1,21.5,48.9,59.2,40.7,94.3c36.6-12,79-3.3,106.4,25.1c27.6,28.4,32.2,68.3,15.2,100.6c38.7-3.5,77.6,14.3,96.9,47.9 c0.5,0.8,0.8,1.6,1.2,2.4c87.5,0,159.9,0,209.8,0c19.5,52.2,61,80.2,117.8,91.6V1049z",id:"landscape-c8-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c10-5x7"},c.default.createElement("path",{d:"M153.1,1047.5c42.5,79.5,66.1,183.6,141.1,247.1 c67.9,57.6,173.2,65.6,262,105.9c81.4,36.9,155.6,113.1,250.1,132.3c87.9,17.9,185.4-21.9,281.2-21.9c95.8,0,193.2,39.8,281.2,21.9 c94.5-19.2,168.7-95.4,250.1-132.3c88.8-40.3,194.1-48.3,262-105.9c75-63.6,98.6-167.7,141.1-247.2c45.1-84.3,115.7-164,115.7-260 c0-96-70.6-175.7-115.7-260c-42.5-79.5-66.1-183.6-141.1-247.2c-67.9-57.6-173.2-65.6-262-105.9c-81.4-36.9-155.6-113.1-250.1-132.3 C1280.7,24.2,1183.3,64,1087.5,64c-95.8,0-193.2-39.8-281.2-21.9c-94.5,19.2-168.7,95.4-250.1,132.3 c-88.8,40.3-194.1,48.3-262,105.9c-75,63.6-98.6,167.7-141.1,247.2c-45.1,84.3-115.7,164-115.7,260 C37.5,883.4,108.1,963.2,153.1,1047.5z",id:"landscape-c10-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c11-5x7"},c.default.createElement("path",{d:"M2137.5,787.5c-27.3,164.6-221.6,263.7-304.4,408.4 c-22.7,39.3-62.6,115.5-56.7,121.7l0,0c-6.8-5.7-104.1,16.1-154.8,29.1c-186.3,47.1-331.5,191.4-535,190.7 c-202.5,0.7-347.6-143.6-533.9-190.7c-50.6-13-148.1-34.8-154.8-29.1l0,0c5.9-6.3-33.9-82.4-56.5-121.7 C258.9,1051,64.7,953,37.5,787.5C64.7,622,258.9,524,341.5,379.1c22.6-39.4,62.4-115.4,56.5-121.7l0,0 c6.7,5.7,104.2-16.2,154.8-29.1C739,181.1,884.2,36.8,1086.7,37.5c203.5-0.7,348.7,143.6,535,190.7c50.7,12.9,148,34.8,154.8,29.1 l0,0c-5.9,6.2,34,82.4,56.7,121.7C1915.9,523.8,2110.2,622.9,2137.5,787.5z",id:"landscape-c11-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-c13-5x7"},c.default.createElement("path",{d:"M37.5,788l0,557.6c0,47.9,38.8,86.7,86.8,86.7 c3.8,0,7.6-0.3,11.3-0.8c-1.4,6.2-2.2,12.7-2.2,19.3c0,47.9,38.8,86.7,86.8,86.7h567.2h0.4h1167.2c47.9,0,86.8-38.8,86.8-86.7 c0-6.7-0.8-13.1-2.2-19.3c3.7,0.5,7.5,0.8,11.3,0.8c47.9,0,86.8-38.8,86.8-86.7V788V787l0-557.6c0-47.9-38.8-86.7-86.8-86.7 c-3.8,0-7.6,0.3-11.3,0.8c1.4-6.2,2.2-12.7,2.2-19.3c0-47.9-38.8-86.7-86.8-86.7l-1167.2,0h-0.4l-567.2,0 c-47.9,0-86.8,38.8-86.8,86.7c0,6.6,0.8,13.1,2.2,19.3c-3.7-0.5-7.5-0.8-11.3-0.8c-47.9,0-86.8,38.8-86.8,86.7l0,557.6",id:"landscape-c13-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-d1-5x7"},c.default.createElement("path",{d:"M1087.5,1537.5c202.7,0,392-41.1,552.5-112.1h340.5v-243.2 c99.5-114.6,157-249.8,157-394.6c0-144.8-57.5-280-157-394.6V149.6H1640c-160.5-71.1-349.8-112.1-552.5-112.1 c-202.7,0-392,41.1-552.5,112.1H194.5v243.2C95,507.5,37.5,642.7,37.5,787.5c0,144.8,57.5,280,157,394.6v243.2H535 C695.5,1496.4,884.8,1537.5,1087.5,1537.5z",id:"landscape-d1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-d2-5x7"},c.default.createElement("path",{d:"M205.2,1131.2v106.3c0,0,296.2-15.6,296.2,300h1172.3 c0-315.6,296.2-300,296.2-300v-106.3c0,0,377.2-309.4,0-687.5V337.5c0,0-296.2,15.6-296.2-300H501.4c0,315.6-296.2,300-296.2,300 v106.3C-172.1,821.9,205.2,1131.2,205.2,1131.2z",id:"landscape-d2-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-d3-5x7"},c.default.createElement("path",{d:"M2137.5,1383.6c-5.8-0.8-11.7-1.2-17.8-1.2 c-74.3,0-134.5,60.1-134.5,134.2c0,7.1,0.6,14.1,1.6,20.9H188.1c1.1-6.8,1.6-13.8,1.6-20.9c0-74.1-60.2-134.2-134.5-134.2 c-6,0-12,0.4-17.8,1.2V191.4c5.8,0.8,11.8,1.2,17.8,1.2c74.3,0,134.5-60.1,134.5-134.2c0-7.1-0.6-14.1-1.6-20.9h1798.8 c-1.1,6.8-1.6,13.8-1.6,20.9c0,74.1,60.2,134.2,134.5,134.2c6,0,11.9-0.4,17.8-1.2V1383.6z",id:"landscape-d3-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-d4-5x7"},c.default.createElement("path",{d:"M37.5,231c95.4,0,172.7-86.7,172.7-193.5 c0,15.3,392.7,82.1,877.3,82.1c484.6,0,877.4-66.7,877.4-82.1c0,106.8,77.2,193.5,172.6,193.5v1113c-95.4,0-172.6,86.7-172.6,193.5 c0-15.4-392.7-82.1-877.4-82.1c-484.7,0-877.3,66.7-877.3,82.1c0-106.8-77.2-193.5-172.7-193.5V231z",id:"landscape-d4-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-d5-5x7"},c.default.createElement("path",{d:"M2025.9,1537.5v-535.4c67.5-47.8,111.6-126.2,111.6-214.9 s-44.1-167.2-111.6-214.9V37.5H149.1v534.7C81.6,619.9,37.5,698.4,37.5,787.1s44.1,167.2,111.6,214.9v535.4H2025.9z",id:"landscape-d5-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-e1-5x7"},c.default.createElement("path",{d:"M2137.5,787.5 c-56.6,50.4-109.2,134-80.3,240.2c7.6,28.1,23.5,52.4,30.4,81.3c17.3,72.5-9.4,136.8-42.6,174.7c-36.1,41.2-89.2,61.6-148.4,76.4 c-29.3,69.5-69.1,127.2-136.3,156.5c-37.1,16.2-78.1,24.8-125.3,19.4c-126.1-14.4-220.7-79.8-344.3-94.6 c-49.3-5.9-93.1-0.1-125.3,17c-23.3,12.4-40.7,29.1-59.6,49.7c-2.6,2.9-16.9,18.1-18.3,18.2c-1.3-0.1-15.6-15.3-18.3-18.2 c-18.9-20.6-36.3-37.4-59.6-49.7c-32.2-17.1-76-22.9-125.3-17c-123.6,14.8-218.2,80.2-344.3,94.6c-47.2,5.4-88.2-3.2-125.3-19.4 c-67.2-29.3-107-87-136.3-156.5c-59.2-14.9-112.4-35.2-148.4-76.4c-33.2-37.9-59.9-102.2-42.6-174.7c6.9-28.9,22.8-53.2,30.4-81.3 c28.8-106.1-23.7-189.8-80.3-240.2c56.6-50.4,109.2-134,80.3-240.2c-7.6-28.1-23.5-52.4-30.4-81.3c-17.3-72.5,9.4-136.8,42.6-174.7 c36.1-41.2,89.2-61.6,148.4-76.4c29.3-69.5,69.1-127.2,136.3-156.5c37.2-16.2,78.1-24.8,125.3-19.4 c126.1,14.4,220.7,79.8,344.3,94.6c49.3,5.9,93.1,0.1,125.3-17c23.3-12.4,40.7-29.1,59.6-49.7c2.7-2.9,16.9-18.1,18.3-18.2 c1.3,0.1,15.6,15.3,18.3,18.2c19,20.6,36.3,37.4,59.6,49.7c32.2,17.1,76,22.9,125.3,17c123.6-14.8,218.2-80.2,344.3-94.6 c47.2-5.4,88.2,3.2,125.3,19.4c67.2,29.3,107,87,136.3,156.5c59.2,14.9,112.4,35.2,148.4,76.4c33.2,37.9,59.9,102.2,42.6,174.7 c-6.9,28.9-22.8,53.2-30.4,81.3C2028.3,653.5,2080.9,737.1,2137.5,787.5z",id:"landscape-e1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-e8-5x7"},c.default.createElement("path",{d:"M755.5,1537.5c-35.3-28.2-73.4-79.3-73.4-79.3 c-59.7-15.7-117.4-76-117.4-76l0,0c-144.1,20.8-230.4-65.9-230.4-65.9c-29.5,2.6-57.7,2-87-0.4c-1.7-34.3,0.2-70.2,3.4-105.4 c-14.4-20.4-37.4-83.1-30.5-140c-20.6-14-108.6-93.7-120.8-219.7c-22.2-19.9-42.9-41.1-62-63.3c19.1-22.2,39.8-43.4,62-63.3 c12.2-126,100.2-205.7,120.8-219.7c-6.9-56.9,16.2-119.6,30.5-140c-3.2-35.2-5.1-71.1-3.4-105.4c29.3-2.4,57.4-3,87-0.4 c0,0,86.3-86.7,230.4-65.9l0,0c0,0,57.6-60.3,117.4-76c0,0,38-51.1,73.4-79.3h663.9c35.3,28.2,73.4,79.3,73.4,79.3 c59.7,15.7,117.4,76,117.4,76l0,0c144.1-20.8,230.4,65.9,230.4,65.9c29.5-2.6,57.7-2,87,0.4c1.7,34.3-0.2,70.2-3.4,105.4 c14.4,20.4,37.4,83.1,30.5,140c20.6,14,108.6,93.7,120.8,219.7c22.2,19.9,42.9,41.1,62,63.3c-19.1,22.2-39.8,43.4-62,63.3 c-12.2,126-100.2,205.7-120.8,219.7c6.9,56.9-16.2,119.6-30.5,140c3.2,35.2,5.1,71.1,3.4,105.4c-29.3,2.4-57.4,3-87,0.4 c0,0-86.3,86.7-230.4,65.9l0,0c0,0-57.6,60.3-117.4,76c0,0-38,51.1-73.4,79.3H755.5z",id:"landscape-e8-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-e9-5x7"},c.default.createElement("path",{d:"M2137.5,787.5c-110.8,201.5-336.3,247.4-410.3,257.2 c-15.7,77.8-75.5,120-102.3,135.2c17.3,16.5,28,39.6,28,65.2c0,21.9-7.8,41.9-20.9,57.6v52.4c0,0,18,105.8-95.1,182 c0.6-4.1,1-8.1,1-12.3c0-46.9-40.4-89.8-107.3-122.9c-82.6-40.9-205.5-66.8-342.8-66.8c-138.8,0-262.9,26.5-345.4,68.1 c-65.3,32.9-104.7,75.3-104.7,121.6c0,4.3,0.4,8.5,1,12.7C524.9,1461.3,543,1355,543,1355v-52.4c-13.1-15.7-20.9-35.7-20.9-57.6 c0-25.6,10.7-48.7,28-65.2c-26.8-15.3-86.6-57.5-102.3-135.2c-74-9.8-299.6-55.7-410.3-257.2C148.3,586,373.8,540.1,447.8,530.3 c15.7-77.8,75.5-119.9,102.3-135.2c-17.3-16.5-28-39.6-28-65.2c0-21.9,7.8-41.9,20.9-57.6V220c0,0-18.1-106.2,95.7-182.5 c-0.7,4.2-1,8.4-1,12.7c0,46.3,39.3,88.7,104.7,121.6c82.6,41.6,206.7,68.1,345.4,68.1c137.3,0,260.3-25.9,342.8-66.8 c66.9-33.1,107.3-76,107.3-122.9c0-4.1-0.3-8.2-1-12.3c113,76.2,95.1,182,95.1,182v52.4c13.1,15.7,20.9,35.7,20.9,57.6 c0,25.6-10.7,48.7-28,65.2c26.8,15.3,86.6,57.5,102.3,135.2C1801.2,540.1,2026.7,586,2137.5,787.5z",id:"landscape-e9-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"landscape-e10-5x7"},c.default.createElement("path",{d:"M1087.5,1537.5l103.5-122.2l122,100.3 l78.6-154.1l143.6,136.6l35.2-161.4l246,134.1l-5.4-191.7l249.8,28.8l-137.2-219.7l183-92.7L1965.8,879l171.7-91.5L1965.8,696 l140.7-116.5l-183-92.7l137.2-219.7l-249.8,28.8l5.4-191.7l-246,134.1l-35.2-161.4l-143.6,136.6l-78.6-154.1l-122,100.3L1087.5,37.5 L984,159.7l-122-100.3l-78.6,154.1L639.9,76.8l-35.2,161.4l-246-134.1l5.4,191.7l-249.8-28.8l137.2,219.7l-183,92.7L209.2,696 L37.5,787.5L209.2,879L68.5,995.6l183,92.7l-137.2,219.7l249.8-28.8l-5.4,191.7l246-134.1l35.2,161.4l143.6-136.6l78.6,154.1 l122-100.3L1087.5,1537.5z",id:"landscape-e10-5x7-path"}))),c.default.createElement("defs",null,c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-no-5x7"},c.default.createElement("path",{d:"M1537.5,2137.5H37.5V37.5h1500V2137.5z",id:"portrait-no-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a1-5x7"},c.default.createElement("path",{d:"M787.5,2137.5c-414.2,0-750-470.1-750-1050 s335.8-1050,750-1050c414.2,0,750,470.1,750,1050S1201.7,2137.5,787.5,2137.5z",id:"portrait-a1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a2-5x7"},c.default.createElement("path",{d:"M262.5,2137.5c-124.3,0-225-100.7-225-225l0-1650 c0-124.3,100.7-225,225-225l1050,0c124.3,0,225,100.7,225,225v1650c0,124.3-100.7,225-225,225H262.5z",id:"portrait-a2-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a3-5x7"},c.default.createElement("path",{d:"M1537.5,562.5c0-290.2-234.8-525-525-525 l-975,0l0,1575c0,290.2,234.8,525,525,525h975V562.5L1537.5,562.5z",id:"portrait-a3-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a4-5x7"},c.default.createElement("path",{d:"M114.8,2029.2c-103.1-627.8-103.1-1255.6,0-1883.4 c448.4-144.4,896.9-144.4,1345.3,0c103.1,627.8,103.1,1255.6,0,1883.4C1011.7,2173.6,563.3,2173.6,114.8,2029.2z",id:"portrait-a4-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a5-5x7"},c.default.createElement("path",{d:"M787.9,2137.5L37.5,1985.2l0-1795.4L787,37.5l750.5,152.3v1795.4 L787.9,2137.5z",id:"portrait-a5-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a10-5x7"},c.default.createElement("path",{d:"M787.5,37.5c-500,408.6-750,785.9-750,1131.9 c0,348.2,250,671,750,968.1c500-297.2,750-619.9,750-968.1C1537.5,823.4,1287.5,446.1,787.5,37.5z",id:"portrait-a10-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a15-5x7"},c.default.createElement("path",{d:"M1537.5,2137.5H37.5V400L310.4,37.5h950  L1537.5,400V2137.5z",id:"portrait-a15-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-a15_hole-5x7"},c.default.createElement("path",{d:"M1537.5,2137.5H37.5V400L310.4,37.5h950  L1537.5,400V2137.5z M787.5,124.9c-15.6,0-28.2,12.6-28.2,28.2s12.6,28.2,28.2,28.2s28.2-12.6,28.2-28.2S803.1,124.9,787.5,124.9z",id:"portrait-a15_hole-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-b1-5x7"},c.default.createElement("path",{d:"M37.5,1087.5c0-33.1,27.8-60,61.3-60c0.5,0-0.5,0,0,0 c-31.5-2.2-55.7-28.2-55.7-59.9c0-33.1,27.1-60,60.6-60c2,0,3.9,0.1,5.8,0.3c-29-4.5-51.3-29.2-51.3-59.2c0-33.1,27.1-60,60.6-60 c3.8,0,7.6,0.2,11.2,0.9c-26.4-6.5-46-30.2-46-58.4c0-33.1,27.1-60,60.6-60c5.8,0,11.5,0.5,16.8,2c-23.2-8.4-39.7-30.7-39.7-56.6 c0-33.1,27.1-60,60.6-60c7.7,0,15,1.4,21.8,4c-20-9.8-33.8-30.2-33.8-53.8c0-33.1,27.1-60,60.6-60c9.8,0,18.9,2.3,27.1,6.4 c-16-10.8-26.5-29-26.5-49.6c0-33.1,27.1-60,60.6-60c11.3,0,21.8,3.1,30.9,8.4c-11.1-10.9-17.9-25.9-17.9-42.6 c0-33.1,27.1-60,60.6-60c15.2,0,29.4,5.2,40,14.3c-8.6-10.4-13.4-24-13.4-38.4c0-33.1,27.1-60,60.6-60c19.2,0,36.7,8.5,47.8,22.3 c-4.8-8.6-7.1-18.8-7.1-29.3c0-33.1,27.1-60,60.6-60c23.8,0,44.6,13.5,54.5,33.2c-1.5-5.2-2.1-10.8-2.1-16.5c0-33.1,27.1-60,60.6-60 c28.7,0,53.1,19.8,59.3,46.3c-0.1-1.3,0.2-2.7,0.2-4.1c0-33.1,27.1-60,60.6-60s60.6,26.9,60.6,60c0,1.4,0.3,2.7,0.2,4.1 c6.3-26.5,30.6-46.3,59.3-46.3c33.5,0,60.6,26.9,60.6,60c0,5.7-0.6,11.3-2.1,16.5c9.9-19.7,30.7-33.2,54.5-33.2 c33.5,0,60.6,26.9,60.6,60c0,10.5-2.3,20.7-7.1,29.3c11.1-13.7,28.6-22.3,47.8-22.3c33.5,0,60.6,26.9,60.6,60 c0,14.5-4.8,28.1-13.4,38.4c10.6-9.1,24.8-14.3,40-14.3c33.5,0,60.6,26.9,60.6,60c0,16.6-6.9,31.7-17.9,42.6 c9.1-5.3,19.6-8.4,30.9-8.4c33.5,0,60.6,26.9,60.6,60c0,20.6-10.5,38.8-26.5,49.6c8.2-4.1,17.3-6.4,27.1-6.4 c33.5,0,60.6,26.9,60.6,60c0,23.6-13.8,44-33.8,53.8c6.8-2.6,14.1-4,21.8-4c33.5,0,60.6,26.9,60.6,60c0,25.9-16.5,48.2-39.7,56.6 c5.3-1.5,11-2,16.8-2c33.5,0,60.6,26.9,60.6,60c0,28.1-15.8,51.6-42.2,58.1c3.6-0.7-3.8,0,0,0c33.5,0,68.1,26.3,68.1,59.4 c0,30-22.2,54.8-51.3,59.2c1.9-0.2,3.9-0.3,5.8-0.3c33.5,0,60.6,26.8,60.6,60c0,31.7-24.9,57.7-56.4,59.9c0.5,0,0.9,0,1.4,0 c33.5,0,60.6,26.9,60.6,60c0,33.1-27.1,60-60.6,60c-0.5,0-0.9,0-1.4,0c31.5,2.2,56.4,28.1,56.4,59.9c0,33.1-27.1,60-60.6,60 c-2,0-3.9-0.1-5.8-0.3c29,4.5,51.3,29.2,51.3,59.2c0,33.1-34.6,59.4-68.1,59.4c-3.8,0,3.6,0.7,0,0c26.4,6.5,42.2,29.9,42.2,58.1 c0,33.1-27.1,60-60.6,60c-5.8,0-11.5-0.5-16.8-2c23.2,8.4,39.7,30.7,39.7,56.6c0,33.1-27.1,60-60.6,60c-7.7,0-15-1.4-21.8-4 c20,9.8,33.8,30.2,33.8,53.8c0,33.1-27.1,60-60.6,60c-9.8,0-18.9-2.3-27.1-6.4c16,10.8,26.5,29,26.5,49.6c0,33.1-27.1,60-60.6,60 c-11.3,0-21.8-3.1-30.9-8.4c11.1,10.9,17.9,25.9,17.9,42.6c0,33.1-27.1,60-60.6,60c-15.2,0-29.4-5.2-40-14.3 c8.6,10.4,13.4,24,13.4,38.4c0,33.1-27.1,60-60.6,60c-19.2,0-36.7-8.5-47.8-22.3c4.8,8.6,7.1,18.8,7.1,29.3c0,33.1-27.1,60-60.6,60 c-23.8,0-44.6-13.5-54.5-33.3c1.5,5.2,2.1,10.8,2.1,16.5c0,33.1-27.1,60-60.6,60c-28.7,0-53.1-19.8-59.3-46.3 c0.1,1.3-0.2,2.7-0.2,4.1c0,33.1-27.1,60-60.6,60c-33.5,0-60.6-26.9-60.6-60c0-1.4-0.2-2.7-0.2-4.1c-6.2,26.6-30.6,46.3-59.3,46.3 c-33.5,0-60.6-26.9-60.6-60c0-5.7,0.6-11.3,2.1-16.5c-9.9,19.7-30.7,33.3-54.5,33.3c-33.5,0-60.6-26.9-60.6-60 c0-10.5,2.3-20.7,7.1-29.3c-11.1,13.7-28.6,22.3-47.8,22.3c-33.5,0-60.6-26.9-60.6-60c0-14.5,4.8-28.1,13.4-38.4 c-10.6,9.1-24.9,14.3-40,14.3c-33.5,0-60.6-26.9-60.6-60c0-16.6,6.9-31.7,17.9-42.6c-9,5.3-19.6,8.4-30.9,8.4 c-33.5,0-60.6-26.9-60.6-60c0-20.6,10.5-38.8,26.5-49.6c-8.2,4.1-17.4,6.4-27.1,6.4c-33.5,0-60.6-26.9-60.6-60 c0-23.6,13.8-44,33.8-53.8c-6.8,2.6-14.1,4-21.8,4c-33.5,0-60.6-26.9-60.6-60c0-25.9,16.5-48.2,39.7-56.6c-5.3,1.5-11,2-16.8,2 c-33.5,0-60.6-26.9-60.6-60c0-28.1,19.6-51.9,46-58.4c-3.6,0.7-7.4,0.9-11.2,0.9c-33.5,0-60.6-26.9-60.6-60 c0-30,22.2-54.7,51.3-59.2c-1.9,0.2-3.9,0.3-5.8,0.3c-33.5,0-60.6-26.9-60.6-60c0-31.7,24.9-57.7,56.4-59.9c-0.5,0-0.9,0-1.4,0 C64.6,1147.5,37.5,1120.6,37.5,1087.5",id:"portrait-b1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-b2-5x7"},c.default.createElement("path",{d:"M162.6,2077h0.2c1,33.3,28.5,60.1,62.5,60.1 c33.7,0,61.1-26.4,62.4-59.4c1.3,33,28.7,59.4,62.4,59.4c33.9,0,61.5-26.7,62.5-60.1h0.1c1,33.3,28.5,60.1,62.5,60.1 c33.7,0,61.1-26.4,62.4-59.4c1.3,33,28.7,59.4,62.4,59.4c33.9,0,61.5-26.7,62.5-60.1h0.1c1,33.3,28.5,60.1,62.5,60.1 c33.7,0,61.1-26.4,62.4-59.4c1.3,33,28.7,59.4,62.4,59.4c33.9,0,61.5-26.7,62.5-60.1h0.1c1,33.3,28.5,60.1,62.5,60.1 c33.7,0,61.1-26.4,62.4-59.4c1.3,33,28.7,59.4,62.4,59.4c33.9,0,61.5-26.7,62.5-60.1h0.1c1,33.3,28.5,60.1,62.5,60.1 c33.7,0,61.1-26.4,62.4-59.3c1.3,33,28.7,59.3,62.4,59.3c33,0,60-25.3,62.3-57.4c2.1,32.3,29.2,57.9,62.4,57.9 c19.6,0,37.1-8.9,48.5-22.8c9-10.7,14.4-24.5,14.4-39.5c0-19.3-8.9-36.5-22.9-47.9c-8.4-6.9-18.6-11.6-29.8-13.4 c29.7-4.8,52.4-30.2,52.4-61c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60.1-61.7 c33.4-1.3,60.1-28.4,60.1-61.7c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60.1-61.7 c33.4-1.3,60.1-28.4,60.1-61.7c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60-61.7 c33.4-1.3,60-28.4,60-61.7c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60-61.7 c33.4-1.3,60-28.4,60-61.7c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60-61.7 c33.4-1.3,60-28.4,60-61.7c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60-61.7 c33.4-1.3,60-28.4,60-61.7c0-33.9-27.6-61.4-61.8-61.8c34.2-0.4,61.8-27.9,61.8-61.8c0-33.3-26.7-60.4-60-61.7 c33.4-1.3,60-28.4,60-61.7c0-32.9-26-59.7-58.7-61.7c32.9-1.8,59.1-28.7,59.1-61.7c0-19.3-8.9-36.5-22.9-47.9 c-10.8-8.9-24.8-14.3-40-14.3c-33.2,0-60.2,25.5-62.4,57.8c-2.3-32.1-29.3-57.5-62.3-57.5c-33.7,0-61.1,26.4-62.4,59.3 c-1.3-33-28.7-59.3-62.4-59.3c-34.3,0-62.1,27.3-62.5,61.1c-0.4-33.8-28.2-61.1-62.5-61.1c-33.7,0-61.1,26.4-62.4,59.4 c-1.3-33-28.7-59.4-62.4-59.4c-34.3,0-62.1,27.3-62.5,61.1c-0.4-33.8-28.2-61.1-62.5-61.1c-33.7,0-61.1,26.4-62.4,59.4 c-1.3-33-28.7-59.4-62.4-59.4c-34.3,0-62.1,27.3-62.5,61.1c-0.4-33.8-28.2-61.1-62.5-61.1c-33.7,0-61.1,26.4-62.4,59.4 c-1.3-33-28.7-59.4-62.4-59.4c-34.3,0-62.1,27.3-62.5,61.1c-0.4-33.8-28.2-61.1-62.5-61.1c-33.7,0-61.1,26.4-62.4,59.4 c-1.3-33-28.7-59.4-62.4-59.4c-34.3,0-62.1,27.3-62.5,61.1c-0.1-10.4-2.8-20.2-7.5-28.8c-10.6-19.4-31.3-32.6-55.1-32.6 c-34.5,0-62.6,27.7-62.6,61.9c0,10.7,2.7,20.7,7.6,29.5c10,18.4,29.1,31.1,51.4,32.5c-32.9,1.9-59,28.7-59,61.7 c0,33.3,26.7,60.4,60,61.7c-33.4,1.3-60,28.4-60,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,33.3,26.7,60.4,60,61.7c-33.4,1.3-60,28.4-60,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,33.3,26.7,60.4,60,61.7c-33.4,1.3-60,28.4-60,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,33.3,26.7,60.4,60,61.7c-33.4,1.3-60,28.4-60,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,33.3,26.7,60.4,60,61.7c-33.4,1.3-60,28.4-60,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,33.3,26.7,60.4,60.1,61.7c-33.4,1.3-60.1,28.4-60.1,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,33.3,26.7,60.4,60.1,61.7c-33.4,1.3-60.1,28.4-60.1,61.7c0,33.6,27.1,60.8,60.8,61.8v0.1c-33.7,0.9-60.8,28.2-60.8,61.8 c0,31.6,23.9,57.6,54.8,61.3c-30.9,3.8-54.8,29.8-54.8,61.3c0,34.2,28,61.9,62.6,61.9C134.2,2137.5,161.8,2110.5,162.6,2077z",id:"portrait-b2-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c3-5x7"},c.default.createElement("path",{d:"M787.5,37.5c-165.5,0-306.1,119.6-356.3,285.8 C206.6,394.8,37.5,709.8,37.5,1087.5c0,377.7,169.1,692.7,393.7,764.2c50.2,166.2,190.8,285.8,356.3,285.8s306.1-119.6,356.3-285.8 c224.5-71.5,393.7-386.4,393.7-764.2s-169.1-692.7-393.7-764.2C1093.6,157.1,953,37.5,787.5,37.5z",id:"portrait-c3-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c4-5x7"},c.default.createElement("path",{d:"M37.5,1087.5c0-164,87.6-302.6,205.7-339.8 c-4-24.4-34.7-232.3,72.6-319.7c-21.2-46.7-12-103.4,27.5-141.7c26.3-25.5,60.9-37.9,95.3-37.3C435.2,220.9,421.5,51,599.3,65.9 C766.6,80,787.5,37.5,787.5,37.5S808.4,80,975.7,65.9c177.7-14.9,164.1,155,160.6,183.1c34.4-0.6,69.1,11.8,95.3,37.3 c39.4,38.3,48.7,95,27.5,141.7c107.3,87.4,76.6,295.3,72.6,319.7c118,37.2,205.7,175.8,205.7,339.8c0,164-87.6,302.6-205.7,339.8 c4,24.4,34.7,232.3-72.6,319.7c21.2,46.7,12,103.4-27.5,141.7c-26.3,25.5-60.9,37.9-95.3,37.3c3.5,28.1,17.1,198.1-160.6,183.1 c-167.4-14.1-188.2,28.4-188.2,28.4s-20.9-42.5-188.2-28.4c-177.7,14.9-164.1-155-160.6-183.1c-34.4,0.6-69.1-11.8-95.3-37.3 c-39.4-38.3-48.7-95-27.5-141.7c-107.3-87.4-76.6-295.3-72.6-319.7C125.1,1390.1,37.5,1251.5,37.5,1087.5z",id:"portrait-c4-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c6-5x7"},c.default.createElement("path",{d:"M787.5,2137.5c-306.8,0-562.1-128.1-617.9-297.6 c-77.9-25.8-132.2-83.1-132.2-149.7l0-1205.4c0-66.6,54.2-123.9,132.2-149.7C225.4,165.6,480.7,37.5,787.5,37.5 c306.7,0,562.1,128.1,617.8,297.6c77.9,25.8,132.2,83.1,132.2,149.7l0,1205.4c0,66.6-54.2,123.9-132.2,149.7 C1349.6,2009.4,1094.3,2137.5,787.5,2137.5z",id:"portrait-c6-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c8-5x7"},c.default.createElement("path",{d:"M526,2137.5c-11.5-56.8-39.4-98.3-91.6-117.8 c0-49.9,0-122.3,0-209.8c-0.8-0.4-1.6-0.8-2.4-1.2c-33.6-19.3-51.4-58.2-47.9-96.9c-32.3,17-72.2,12.3-100.6-15.2 c-28.4-27.4-37.1-69.7-25.1-106.4c-35.1,8.2-72.8-6.7-94.3-40.7c-21.5-34-20.6-77.4-0.8-109.8c-35.9-1.2-69.2-25.4-82.6-64 c-13.3-38.5-2.9-80.4,23.5-106.9c-34.5-10.4-61.6-42.5-66-83.5c-4.4-40.9,15.1-78.9,46.5-97.7c-31.4-18.8-50.9-56.8-46.5-97.7 c4.4-40.9,31.5-73,66-83.5C77.8,879.9,67.3,838,80.7,799.4c13.3-38.7,46.7-62.9,82.6-64c-19.7-32.4-20.7-75.8,0.8-109.8 c21.5-34.1,59.2-48.9,94.3-40.7c-12-36.6-3.3-79,25.1-106.4c28.4-27.5,68.3-32.2,100.6-15.2c-3.5-38.7,14.3-77.6,47.9-96.9 c0.8-0.5,1.6-0.8,2.4-1.2c0-87.5,0-159.9,0-209.8c52.2-19.5,80.2-61,91.6-117.8l523,0c11.4,56.8,39.4,98.3,91.6,117.8 c0,49.9,0,122.3,0,209.8c0.8,0.4,1.6,0.8,2.4,1.2c33.6,19.3,51.4,58.2,47.9,96.9c32.3-17,72.2-12.3,100.6,15.2 c28.4,27.4,37.1,69.7,25.1,106.4c35.1-8.1,72.8,6.7,94.3,40.7c21.5,34,20.6,77.4,0.8,109.8c35.9,1.2,69.2,25.4,82.6,64 c13.3,38.5,2.9,80.4-23.5,106.9c34.5,10.4,61.6,42.5,66,83.5c4.4,40.9-15.1,78.9-46.5,97.7c31.4,18.8,50.9,56.8,46.5,97.7 c-4.4,40.9-31.5,73-66,83.5c26.3,26.4,36.8,68.3,23.5,106.9c-13.3,38.7-46.7,62.9-82.6,64c19.7,32.4,20.7,75.8-0.8,109.8 c-21.5,34.1-59.2,48.9-94.3,40.7c12,36.6,3.3,79-25.1,106.4c-28.4,27.6-68.3,32.2-100.6,15.2c3.5,38.7-14.3,77.6-47.9,96.9 c-0.8,0.5-1.6,0.8-2.4,1.2c0,87.5,0,159.9,0,209.8c-52.2,19.5-80.2,61-91.6,117.8H526z",id:"portrait-c8-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c10-5x7"},c.default.createElement("path",{d:"M527.5,153.1C448,195.7,344,219.3,280.4,294.3 c-57.6,67.9-65.6,173.2-105.9,262C137.5,637.6,61.4,711.9,42.1,806.3c-17.9,87.9,21.9,185.4,21.9,281.2 c0,95.8-39.8,193.2-21.9,281.2c19.2,94.5,95.4,168.7,132.3,250.1c40.3,88.8,48.3,194.1,105.9,262c63.6,75,167.7,98.6,247.2,141.1 c84.3,45.1,164,115.7,260,115.7c96,0,175.7-70.6,260-115.7c79.5-42.5,183.6-66.1,247.2-141.1c57.6-67.9,65.6-173.2,105.9-262 c36.9-81.4,113.1-155.6,132.3-250.1c17.9-87.9-21.9-185.4-21.9-281.2c0-95.8,39.8-193.2,21.9-281.2 c-19.2-94.5-95.4-168.7-132.3-250.1c-40.3-88.8-48.3-194.1-105.9-262c-63.6-75-167.7-98.6-247.2-141.1 c-84.3-45.1-164-115.7-260-115.7C691.6,37.5,611.8,108.1,527.5,153.1z",id:"portrait-c10-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c11-5x7"},c.default.createElement("path",{d:"M787.5,2137.5c-164.6-27.3-263.7-221.6-408.4-304.4 c-39.3-22.7-115.5-62.6-121.7-56.7l0,0c5.7-6.8-16.1-104.1-29.1-154.8c-47.1-186.3-191.4-331.5-190.7-535 C36.8,884.2,181.1,739,228.2,552.8c13-50.6,34.8-148.1,29.1-154.8l0,0c6.3,5.9,82.4-33.9,121.7-56.5C524,258.9,622,64.7,787.5,37.5 c165.5,27.2,263.5,221.4,408.4,304c39.4,22.6,115.4,62.4,121.7,56.5l0,0c-5.7,6.7,16.2,104.2,29.1,154.8 c47.1,186.2,191.4,331.4,190.7,533.9c0.7,203.5-143.6,348.7-190.7,535c-12.9,50.7-34.8,148-29.1,154.8l0,0 c-6.2-5.9-82.4,34-121.7,56.7C1051.2,1915.9,952.1,2110.2,787.5,2137.5z",id:"portrait-c11-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-c13-5x7"},c.default.createElement("path",{d:"M787,37.5H229.3c-47.9,0-86.7,38.8-86.7,86.8 c0,3.8,0.3,7.6,0.8,11.3c-6.2-1.4-12.7-2.2-19.3-2.2c-47.9,0-86.7,38.8-86.7,86.8v567.2v0.4v1167.2c0,47.9,38.8,86.8,86.7,86.8 c6.7,0,13.1-0.8,19.3-2.2c-0.5,3.7-0.8,7.5-0.8,11.3c0,47.9,38.8,86.8,86.7,86.8H787h1.1h557.6c47.9,0,86.7-38.8,86.7-86.8 c0-3.8-0.3-7.6-0.8-11.3c6.2,1.4,12.7,2.2,19.3,2.2c47.9,0,86.7-38.8,86.7-86.8V787.7v-0.4V220.1c0-47.9-38.8-86.8-86.7-86.8 c-6.6,0-13.1,0.8-19.3,2.2c0.5-3.7,0.8-7.5,0.8-11.3c0-47.9-38.8-86.8-86.7-86.8H788",id:"portrait-c13-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-d1-5x7"},c.default.createElement("path",{d:"M37.5,1087.5c0,202.7,41.1,392,112.1,552.5l0,340.5h243.2 c114.6,99.5,249.8,157,394.6,157c144.8,0,280-57.5,394.6-157h243.2l0-340.5c71.1-160.5,112.1-349.8,112.1-552.5 c0-202.7-41.1-392-112.1-552.5V194.5l-243.2,0c-114.6-99.5-249.8-157-394.6-157c-144.8,0-280,57.5-394.6,157l-243.2,0l0,340.5 C78.6,695.5,37.5,884.8,37.5,1087.5z",id:"portrait-d1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-d2-5x7"},c.default.createElement("path",{d:"M443.8,205.2H337.5c0,0,15.6,296.2-300,296.2l0,1172.3 c315.6,0,300,296.2,300,296.2h106.3c0,0,309.4,377.2,687.5,0h106.3c0,0-15.6-296.2,300-296.2l0-1172.3c-315.6,0-300-296.2-300-296.2 l-106.3,0C753.1-172.1,443.8,205.2,443.8,205.2z",id:"portrait-d2-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-d3-5x7"},c.default.createElement("path",{d:"M191.4,2137.5c0.8-5.8,1.2-11.7,1.2-17.8 c0-74.3-60.1-134.5-134.2-134.5c-7.1,0-14.1,0.6-20.9,1.6l0-1798.8c6.8,1.1,13.8,1.6,20.9,1.6c74.1,0,134.2-60.2,134.2-134.5 c0-6-0.4-12-1.2-17.8l1192.3,0c-0.8,5.8-1.2,11.8-1.2,17.8c0,74.3,60.1,134.5,134.2,134.5c7.1,0,14.1-0.6,20.9-1.6v1798.8 c-6.8-1.1-13.8-1.6-20.9-1.6c-74.1,0-134.2,60.2-134.2,134.5c0,6,0.4,11.9,1.2,17.8H191.4z",id:"portrait-d3-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-d4-5x7"},c.default.createElement("path",{d:"M1344,37.5c0,95.4,86.7,172.7,193.5,172.7 c-15.3,0-82.1,392.7-82.1,877.3c0,484.6,66.7,877.4,82.1,877.4c-106.8,0-193.5,77.2-193.5,172.6H231c0-95.4-86.7-172.6-193.5-172.6 c15.4,0,82.1-392.7,82.1-877.4c0-484.7-66.7-877.3-82.1-877.3c106.8,0,193.5-77.2,193.5-172.7L1344,37.5z",id:"portrait-d4-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-d5-5x7"},c.default.createElement("path",{d:"M37.5,2025.9h535.4c47.8,67.5,126.2,111.6,214.9,111.6 s167.2-44.1,214.9-111.6h534.7V149.1l-534.7,0C955.1,81.6,876.6,37.5,787.9,37.5S620.7,81.6,572.9,149.1l-535.4,0L37.5,2025.9z",id:"portrait-d5-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-e1-5x7"},c.default.createElement("path",{d:"M787.5,2137.5 c-50.4-56.6-134-109.2-240.2-80.3c-28.1,7.6-52.4,23.5-81.3,30.4c-72.5,17.3-136.8-9.4-174.7-42.6c-41.2-36.1-61.6-89.2-76.4-148.4 c-69.5-29.3-127.2-69.1-156.5-136.3c-16.2-37.2-24.8-78.1-19.4-125.3c14.4-126.1,79.8-220.7,94.6-344.3c5.9-49.3,0.1-93.1-17-125.3 c-12.4-23.3-29.1-40.7-49.7-59.6c-2.9-2.6-18.1-16.9-18.2-18.3c0.1-1.3,15.3-15.6,18.2-18.3c20.6-18.9,37.4-36.3,49.7-59.6 c17.1-32.2,22.9-76,17-125.3C118.9,760.7,53.5,666.1,39.1,540c-5.4-47.2,3.2-88.2,19.4-125.3c29.3-67.2,87-107,156.5-136.3 c14.9-59.2,35.2-112.4,76.4-148.4c37.9-33.2,102.2-59.9,174.7-42.6c28.9,6.9,53.2,22.8,81.3,30.4c106.1,28.8,189.8-23.7,240.2-80.3 c50.4,56.6,134,109.2,240.2,80.3c28.1-7.6,52.4-23.5,81.3-30.4c72.5-17.3,136.8,9.4,174.7,42.6c41.2,36.1,61.6,89.2,76.4,148.4 c69.5,29.3,127.2,69.1,156.5,136.3c16.2,37.2,24.8,78.1,19.4,125.3c-14.4,126.1-79.8,220.7-94.6,344.3c-5.9,49.3-0.1,93.1,17,125.3 c12.4,23.3,29.1,40.7,49.7,59.6c2.9,2.7,18.1,16.9,18.2,18.3c-0.1,1.3-15.3,15.6-18.2,18.3c-20.6,19-37.4,36.3-49.7,59.6 c-17.1,32.2-22.9,76-17,125.3c14.8,123.6,80.2,218.2,94.6,344.3c5.4,47.2-3.2,88.2-19.4,125.3c-29.3,67.2-87,107-156.5,136.3 c-14.9,59.2-35.2,112.4-76.4,148.4c-37.9,33.2-102.2,59.9-174.7,42.6c-28.9-6.9-53.2-22.8-81.3-30.4 C921.5,2028.3,837.9,2080.9,787.5,2137.5z",id:"portrait-e1-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-e8-5x7"},c.default.createElement("path",{d:"M37.5,755.5c28.2-35.3,79.3-73.4,79.3-73.4 c15.7-59.7,76-117.4,76-117.4l0,0c-20.8-144.1,65.9-230.4,65.9-230.4c-2.6-29.5-2-57.7,0.4-87c34.3-1.7,70.2,0.2,105.4,3.4 c20.4-14.4,83.1-37.4,140-30.5c14-20.6,93.7-108.6,219.7-120.8c19.9-22.2,41.1-42.9,63.3-62c22.2,19.1,43.4,39.8,63.3,62 c126,12.2,205.7,100.2,219.7,120.8c56.9-6.9,119.6,16.2,140,30.5c35.2-3.2,71.1-5.1,105.4-3.4c2.4,29.3,3,57.4,0.4,87 c0,0,86.7,86.3,65.9,230.4l0,0c0,0,60.3,57.6,76,117.4c0,0,51.1,38,79.3,73.4v663.9c-28.2,35.3-79.3,73.4-79.3,73.4 c-15.7,59.7-76,117.4-76,117.4l0,0c20.8,144.1-65.9,230.4-65.9,230.4c2.6,29.5,2,57.7-0.4,87c-34.3,1.7-70.2-0.2-105.4-3.4 c-20.4,14.4-83.1,37.4-140,30.5c-14,20.6-93.7,108.6-219.7,120.8c-19.9,22.2-41.1,42.9-63.3,62c-22.2-19.1-43.4-39.8-63.3-62 c-126-12.2-205.7-100.2-219.7-120.8c-56.9,6.9-119.6-16.2-140-30.5c-35.2,3.2-71.1,5.1-105.4,3.4c-2.4-29.3-3-57.4-0.4-87 c0,0-86.7-86.3-65.9-230.4l0,0c0,0-60.3-57.6-76-117.4c0,0-51.1-38-79.3-73.4L37.5,755.5z",id:"portrait-e8-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-e9-5x7"},c.default.createElement("path",{d:"M787.5,2137.5c-201.5-110.8-247.4-336.3-257.2-410.3 c-77.8-15.7-120-75.5-135.2-102.3c-16.5,17.3-39.6,28-65.2,28c-21.9,0-41.9-7.8-57.6-20.9H220c0,0-105.8,18-182-95.1 c4.1,0.6,8.1,1,12.3,1c46.9,0,89.8-40.4,122.9-107.3c40.9-82.6,66.8-205.5,66.8-342.8c0-138.8-26.5-262.9-68.1-345.4 C138.9,677,96.5,637.7,50.2,637.7c-4.3,0-8.5,0.4-12.7,1C113.7,524.9,220,543,220,543h52.4c15.7-13.1,35.7-20.9,57.6-20.9 c25.6,0,48.7,10.7,65.2,28c15.3-26.8,57.5-86.6,135.2-102.3c9.8-74,55.7-299.6,257.2-410.3c201.5,110.8,247.4,336.3,257.2,410.3 c77.8,15.7,119.9,75.5,135.2,102.3c16.5-17.3,39.6-28,65.2-28c21.9,0,41.9,7.8,57.6,20.9h52.4c0,0,106.2-18.1,182.5,95.7 c-4.2-0.7-8.4-1-12.7-1c-46.3,0-88.7,39.3-121.6,104.7c-41.6,82.6-68.1,206.7-68.1,345.4c0,137.3,25.9,260.3,66.8,342.8 c33.1,66.9,76,107.3,122.9,107.3c4.1,0,8.2-0.4,12.3-1c-76.2,113-182,95.1-182,95.1h-52.4c-15.7,13.1-35.7,20.9-57.6,20.9 c-25.6,0-48.7-10.7-65.2-28c-15.3,26.8-57.5,86.6-135.2,102.3C1034.9,1801.2,989,2026.7,787.5,2137.5z",id:"portrait-e9-5x7-path"})),c.default.createElement("clipPath",{transform:"translate(100,100)",id:"portrait-e10-5x7"},c.default.createElement("path",{d:"M37.5,1087.5L159.7,1191l-100.3,122 l154.1,78.6L76.8,1535.1l161.4,35.2l-134.1,246l191.7-5.4l-28.8,249.8l219.7-137.2l92.7,183L696,1965.8l91.5,171.7l91.5-171.7 l116.5,140.7l92.7-183l219.7,137.2l-28.8-249.8l191.7,5.4l-134.1-246l161.4-35.2l-136.6-143.6l154.1-78.6l-100.3-122l122.2-103.5 L1415.3,984l100.3-122l-154.1-78.6l136.6-143.6l-161.4-35.2l134.1-246l-191.7,5.4l28.8-249.8l-219.7,137.2l-92.7-183L879,209.2 L787.5,37.5L696,209.2L579.4,68.5l-92.7,183L267.1,114.2l28.8,249.8l-191.7-5.4l134.1,246L76.8,639.9l136.6,143.6L59.4,862.1 l100.3,122L37.5,1087.5z",id:"portrait-e10-5x7-path"})))));t.displayName="CardDefs";var a=t;exports.default=a}(),SM.currentModule=null}),"",{requires:["react"]});
YUI.add("sm-card-picker-product-card",(function(e){SM.currentModule="sm-card-picker-product-card";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("react")),t=a("sm-card-picker-props");const r=a=>{let t,{cardImgUrl:r,cardTitle:c,cardImgRequirements:{photoCountLow:l,photoCountHigh:d},defaultFoilColor:i,defaultFoilDesign:o,defaultShape:n,orientation:s,onClick:m,cardName:u,"data-testid":f}=a,p=2175,g=1575;"portrait"===s&&(p=1575,g=2175),i&&o&&(t="https://cdn.dragdrop.design/foils/".concat(o,"-").concat("landscape"===s?"7x5":"5x7","-medium.png"));let k="".concat(l," - ").concat(d," images");return l===d&&(k="".concat(d," image").concat(1!==l?"s":"")),e.default.createElement("div",{className:"sm-card-picker-card",onClick:m,"data-testid":f},e.default.createElement("div",{className:"sm-card-picker-card-image-container sm-position-relative"},e.default.createElement("svg",{className:"sm-card-picker-card-image sm-position-relative",viewBox:"0 0 ".concat(p+200," ").concat(g+200)},e.default.createElement("g",{filter:"url(#dropshadow)"},e.default.createElement("g",{clipPath:"url(#".concat(s,"-").concat(n,"-5x7)")},e.default.createElement("image",{width:p,height:g,xlinkHref:r,x:"100",y:"100"}),t&&e.default.createElement("g",{filter:"#foil-".concat(i,")")},e.default.createElement("g",{filter:"url(#foil-texture)"},e.default.createElement("image",{xlinkHref:t,width:p,height:g,x:"100",y:"100"}))))))),e.default.createElement("div",{className:"sm-card-picker-card-info-block sm-flex sm-flex-column"},e.default.createElement("h3",null,u),e.default.createElement("div",{className:"sm-card-picker-card-info-block-image-details sm-flex sm-flex-row"},e.default.createElement("h5",null,c),e.default.createElement("h5",{className:" sm-card-picker-card-info-block-image-req"},k))))};r.displayName="CardPicker.Card",r.propTypes=t.CARD_PICKER_CARD_PROP_TYPES,r.defaultProps={onClick:()=>{}};var c=r;exports.default=c}(),SM.currentModule=null}),"",{requires:["react","sm-card-picker-props"]});
YUI.add("sm-card-picker-props",(function(e){SM.currentModule="sm-card-picker-props";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CARD_PICKER_ALLCARDS_PROP_TYPES=exports.CARD_PICKER_CARD_PROP_TYPES=exports.CARD_PICKER_IMG_REQUIREMENTS_PROP_TYPES=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types"));const u={photoCountLow:e.default.number.isRequired,photoCountHigh:e.default.number.isRequired};exports.CARD_PICKER_IMG_REQUIREMENTS_PROP_TYPES=u;const t={_id:e.default.string,cardImgUrl:e.default.string.isRequired,cardTitle:e.default.string.isRequired,cardImgRequirements:e.default.shape(u).isRequired,onClick:e.default.func.isRequired};exports.CARD_PICKER_CARD_PROP_TYPES=t;const d={occasionId:e.default.string,categoryName:e.default.string,cards:e.default.arrayOf(e.default.shape(t))};exports.CARD_PICKER_ALLCARDS_PROP_TYPES=d}(),SM.currentModule=null}),"",{requires:["prop-types"]});
YUI.add("sm-card-picker-selectors",(function(e){SM.currentModule="sm-card-picker-selectors";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCardDesigns=function(o){let t=(0,e.getEntity)(o,r.DESIGNS_ENDPOINT),c={};if(!t)return;return Object.values(t).map(e=>{let{occasionId:o,name:r,cards:t=[]}=e;Object.values(t).map(e=>{var t,a;c[e.occasion]||(c[e.occasion]={parentOccasionId:o,parentOccasionName:r,cards:[]}),c[e.occasion].cards.push({_id:e.cardId,name:e.name,occasion:e.occasion,cardImgRequirements:{photoCountLow:e.requirements.photoCountLow,photoCountHigh:e.requirements.photoCountHigh},cardImgUrl:e.previewUrl,cardTitle:e.title,productId:e.productId,defaultShape:e.defaultShape,orientation:e.orientation,defaultFoilColor:null===(t=e.defaultFoil)||void 0===t?void 0:t.color,defaultFoilDesign:null===(a=e.defaultFoil)||void 0===a?void 0:a.design})})}),c};var e=o("sm-api-redux-selectors"),r=o("sm-card-picker-constants")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-card-picker-constants"]});
YUI.add("sm-card-picker",(function(e){SM.currentModule="sm-card-picker";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("sm-component-collapsible")),l=babelHelpers.interopRequireDefault(r("sm-card-picker-product-card")),s=r("sm-card-picker-props"),d=babelHelpers.interopRequireDefault(r("sm-card-picker-defs")),i=babelHelpers.interopRequireDefault(r("sm-panel-alert")),n=babelHelpers.interopRequireDefault(r("sm-component-busy")),o=babelHelpers.interopRequireDefault(r("sm-dom-core")),c=babelHelpers.interopRequireDefault(r("sm-smuglog"));class u extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"state",{isLoading:!0,hadError:!1}),babelHelpers.defineProperty(this,"_loadDesigns",async()=>{let{allCards:e,loadDesigns:r}=this.props;try{e&&0!==Object.keys(e).length||await r(),this.setState({isLoading:!1})}catch(e){this.setState({hadError:!0})}}),babelHelpers.defineProperty(this,"_renderCardDesigns",()=>{let{cardOccasion:r}=this.props;if(r){let{allCards:t}=this.props,a=Object.keys(t).find(e=>e.toLowerCase()===r.toLowerCase());if(a)return e.default.createElement("div",{className:"sm-flex sm-flex-wrap sm-flex-justify-center"},this._renderCards(t[a].cards));c.default.add("sm-card-picker","Asked to render cards for ".concat(r,", but none were found. Rendering all cards."),c.default.LEVEL_WARNING)}return this._renderCategories()}),babelHelpers.defineProperty(this,"_renderCards",r=>r.map((r,t)=>{let{_id:a,productId:s,cardImgUrl:d,cardTitle:i,cardImgRequirements:n,defaultFoilColor:o,defaultFoilDesign:c,defaultShape:u,orientation:p,name:m}=r;return e.default.createElement(l.default,{key:a,"data-testid":"lightbox_cardsnameoftemplate".concat(t,"_button"),onClick:()=>{this.props.onClick({designId:a,productId:s,minCount:n.photoCountLow,maxCount:n.photoCountHigh})},orientation:p,cardName:m,cardImgUrl:d,cardTitle:i,cardImgRequirements:n,defaultShape:u,defaultFoilColor:o,defaultFoilDesign:c})}))}componentDidMount(){this._loadDesigns()}_renderCategories(){let{allCards:r}=this.props;return Object.keys(r).map((t,l)=>{let{cards:s}=r[t],d=0===l,i=e.default.createElement("h2",{"data-testid":"cardpicker_".concat(t,"cardtitle_header")},t),n=[e.default.createElement("p",{key:"categoryheadline-".concat(l),"data-testid":"cardpicker_".concat(t,"cardtotal_header")},s.length," Cards")];return e.default.createElement(a.default,{key:"cardcategory-".concat(l),headingItems:n,headingItemsClassName:"sm-flex-items-baseline",initiallyOpen:d,title:i,"heading-data-testid":"cardpicker_cardscategory".concat(t,"_button")},e.default.createElement("div",{className:"sm-flex sm-flex-wrap sm-flex-justify-center"},this._renderCards(s)))})}render(){let{isLoading:r,hadError:t}=this.state;return t?e.default.createElement(i.default,{applyUserSkin:!0,iconName:null,title:"Error loading your card designs",message:"We've encountered an error loading your designs. Please refresh the page and try again.",confirmLabel:"Refresh page",onConfirm:()=>o.default.doc.location.reload()}):e.default.createElement("main",{className:"sm-card-picker-main"},r?e.default.createElement(n.default,null):this._renderCardDesigns(),e.default.createElement(d.default,null))}}exports.default=u,u.displayName="CardPicker",u.propTypes={imageUri:t.default.string,allCards:t.default.shape(s.CARD_PICKER_ALLCARDS_PROP_TYPES),onClick:t.default.func.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-collapsible","sm-card-picker-product-card","sm-card-picker-props","sm-card-picker-defs","sm-panel-alert","sm-component-busy","sm-dom-core","sm-smuglog"]});
YUI.add("sm-checkout-action-types",(function(_){SM.currentModule="sm-checkout-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHECKOUT_TRACK_STRIPE_PAYMENT_ID=exports.CHECKOUT_INIT_STRIPE=exports.CHECKOUT_SET_FORM_MODIFIED=exports.CHECKOUT_SHIPPING_NEXT_CLICK=exports.CHECKOUT_SET_BILLING_ADDRESS_URI=exports.CHECKOUT_SET_SHIPPING_ADDRESS_URI=exports.CHECKOUT_SET_PAYMENT_METHOD=exports.CHECKOUT_SET_PROCESSING_ADDRESS=exports.CHECKOUT_SET_SHOW_ADDRESS_SUGGESTIONS=exports.CHECKOUT_SHOW_BILLING_ADDRESS_ERRORS=exports.CHECKOUT_SHOW_SHIPPING_ADDRESS_ERRORS=exports.CHECKOUT_SET_INVALID_CURRENCY=exports.CHECKOUT_CLOSE_ERROR_PANEL=exports.CHECKOUT_SHOW_ERROR_PANEL=exports.CHECKOUT_ORDER_ERROR=exports.CHECKOUT_SAVE_ORDER_URI=exports.CHECKOUT_SET_BACK_2_SHOP_URL=exports.CHECKOUT_CLEAR_ACCOUNT_PAYMENT_INFO=exports.CHECKOUT_QUEUE_EMPTY_CART=exports.CHECKOUT_QUEUE_REMOVE_ITEM=exports.CHECKOUT_SET_REMOVING_ITEM=exports.CHECKOUT_SHIPPING_CLEAR_ADDRESS=exports.CHECKOUT_SHIPPING_USE_ACCOUNT_ADDRESS=exports.CHECKOUT_BILLING_ADDRESS_VALID=exports.CHECKOUT_BILLING_ADDRESS_TYPE=exports.CHECKOUT_BILLING_FIELDS_UPDATE=exports.CHECKOUT_SET_BILLING_ADDRESS=exports.CHECKOUT_CLEAR_ADDRESS_ERROR=exports.CHECKOUT_SET_CONSTANTS=exports.CHECKOUT_SET_CC_NEEDS_VALIDATION=exports.CHECKOUT_PROCESSING_CC=exports.CHECKOUT_CLEAR_CC_ERRORS=exports.CHECKOUT_SET_CC_ERROR=exports.CHECKOUT_SET_CC_FIELD=exports.CHECKOUT_STORE_ADDRESS_ERROR=exports.CHECKOUT_SET_USE_ACCOUNT_PAYMENT_METHOD=exports.CHECKOUT_SET_SHIPPING_OPTION=exports.CHECKOUT_TOGGLE_LICENSE_MODAL=exports.CHECKOUT_SET_SHIPPING_ADDRESS=exports.CHECKOUT_LOAD_GEOIP_DATA=exports.CHECKOUT_LOAD_CART_IDS=exports.CHECKOUT_SUBMIT_CROP_FAILURE=exports.CHECKOUT_SUBMIT_CROP_SUCCESS=exports.CHECKOUT_SUBMIT_CROP_REQUEST=exports.CHECKOUT_UPDATE_CROP=exports.CHECKOUT_CLOSE_CROP_MODAL=exports.CHECKOUT_OPEN_CROP_MODAL=exports.CHECKOUT_QUEUE_REMOVE_ADD_ONS=exports.CHECKOUT_SET_REMOVING_ADD_ONS=exports.CHECKOUT_CLOSE_ADD_ONS=exports.CHECKOUT_OPEN_ADD_ONS=exports.CHECKOUT_SET_SHIPPING_FIELD=exports.CHECKOUT_SET_BILLING_FIELD=exports.CHECKOUT_LOAD_LOCALE_OPTIONS=exports.CHECKOUT_CHANGE_CURRENCY_SPINNER=exports.CHECKOUT_CHANGE_CURRENCY=exports.CHECKOUT_BEGIN_CHECKOUT=exports.CHECKOUT_SET_PROCESSING_COUPON=exports.CHECKOUT_SET_COUPON_FIELD=exports.CHECKOUT_SET_COUPON_ERROR=exports.CHECKOUT_REMOVE_COUPON=exports.CHECKOUT_DEACTIVATE_COUPON_BUTTON=exports.CHECKOUT_CLEAR_COUPON_ERRORS=exports.CHECKOUT_APPLY_COUPON=exports.CHECKOUT_ACTIVATE_COUPON_FIELD=exports.CHECKOUT_ACTIVATE_COUPON_BUTTON=void 0;exports.CHECKOUT_ACTIVATE_COUPON_BUTTON="CHECKOUT_ACTIVATE_COUPON_BUTTON";exports.CHECKOUT_ACTIVATE_COUPON_FIELD="CHECKOUT_ACTIVATE_COUPON_FIELD";exports.CHECKOUT_APPLY_COUPON="CHECKOUT_APPLY_COUPON";exports.CHECKOUT_CLEAR_COUPON_ERRORS="CHECKOUT_CLEAR_COUPON_ERRORS";exports.CHECKOUT_DEACTIVATE_COUPON_BUTTON="CHECKOUT_DEACTIVATE_COUPON_BUTTON";exports.CHECKOUT_REMOVE_COUPON="CHECKOUT_REMOVE_COUPON";exports.CHECKOUT_SET_COUPON_ERROR="CHECKOUT_SET_COUPON_ERROR";exports.CHECKOUT_SET_COUPON_FIELD="CHECKOUT_SET_COUPON_FIELD";exports.CHECKOUT_SET_PROCESSING_COUPON="CHECKOUT_SET_PROCESSING_COUPON";exports.CHECKOUT_BEGIN_CHECKOUT="CHECKOUT_BEGIN_CHECKOUT";exports.CHECKOUT_CHANGE_CURRENCY="CHECKOUT_CHANGE_CURRENCY";exports.CHECKOUT_CHANGE_CURRENCY_SPINNER="CHECKOUT_CHANGE_CURRENCY_SPINNER";exports.CHECKOUT_LOAD_LOCALE_OPTIONS="CHECKOUT_LOAD_LOCALE_OPTIONS";exports.CHECKOUT_SET_BILLING_FIELD="CHECKOUT_SET_BILLING_FIELD";exports.CHECKOUT_SET_SHIPPING_FIELD="CHECKOUT_SET_SHIPPING_FIELD";exports.CHECKOUT_OPEN_ADD_ONS="CHECKOUT_OPEN_ADD_ONS";exports.CHECKOUT_CLOSE_ADD_ONS="CHECKOUT_CLOSE_ADD_ONS";exports.CHECKOUT_SET_REMOVING_ADD_ONS="CHECKOUT_SET_REMOVING_ADD_ONS";exports.CHECKOUT_QUEUE_REMOVE_ADD_ONS="CHECKOUT_QUEUE_REMOVE_ADD_ONS";exports.CHECKOUT_OPEN_CROP_MODAL="CHECKOUT_OPEN_CROP_MODAL";exports.CHECKOUT_CLOSE_CROP_MODAL="CHECKOUT_CLOSE_CROP_MODAL";exports.CHECKOUT_UPDATE_CROP="CHECKOUT_UPDATE_CROP";exports.CHECKOUT_SUBMIT_CROP_REQUEST="CHECKOUT_SUBMIT_CROP_REQUEST";exports.CHECKOUT_SUBMIT_CROP_SUCCESS="CHECKOUT_SUBMIT_CROP_SUCCESS";exports.CHECKOUT_SUBMIT_CROP_FAILURE="CHECKOUT_SUBMIT_CROP_FAILURE";exports.CHECKOUT_LOAD_CART_IDS="CHECKOUT_LOAD_CART_IDS";exports.CHECKOUT_LOAD_GEOIP_DATA="CHECKOUT_LOAD_GEOIP_DATA";exports.CHECKOUT_SET_SHIPPING_ADDRESS="CHECKOUT_SET_SHIPPING_ADDRESS";exports.CHECKOUT_TOGGLE_LICENSE_MODAL="CHECKOUT_TOGGLE_LICENSE_MODAL";exports.CHECKOUT_SET_SHIPPING_OPTION="CHECKOUT_SET_SHIPPING_OPTION";exports.CHECKOUT_SET_USE_ACCOUNT_PAYMENT_METHOD="CHECKOUT_SET_USE_ACCOUNT_PAYMENT_METHOD";exports.CHECKOUT_STORE_ADDRESS_ERROR="CHECKOUT_STORE_ADDRESS_ERROR";exports.CHECKOUT_SET_CC_FIELD="CHECKOUT_SET_CC_FIELD";exports.CHECKOUT_SET_CC_ERROR="CHECKOUT_SET_CC_ERROR";exports.CHECKOUT_CLEAR_CC_ERRORS="CHECKOUT_CLEAR_CC_ERRORS";exports.CHECKOUT_PROCESSING_CC="CHECKOUT_PROCESSING_CC";exports.CHECKOUT_SET_CC_NEEDS_VALIDATION="CHECKOUT_SET_CC_NEEDS_VALIDATION";exports.CHECKOUT_SET_CONSTANTS="CHECKOUT_SET_CONSTANTS";exports.CHECKOUT_CLEAR_ADDRESS_ERROR="CHECKOUT_CLEAR_ADDRESS_ERROR";exports.CHECKOUT_SET_BILLING_ADDRESS="CHECKOUT_SET_BILLING_ADDRESS";exports.CHECKOUT_BILLING_FIELDS_UPDATE="CHECKOUT_BILLING_FIELDS_UPDATE";exports.CHECKOUT_BILLING_ADDRESS_TYPE="CHECKOUT_BILLING_ADDRESS_TYPE";exports.CHECKOUT_BILLING_ADDRESS_VALID="CHECKOUT_BILLING_ADDRESS_VALID";exports.CHECKOUT_SHIPPING_USE_ACCOUNT_ADDRESS="CHECKOUT_SHIPPING_USE_ACCOUNT_ADDRESS";exports.CHECKOUT_SHIPPING_CLEAR_ADDRESS="CHECKOUT_SHIPPING_CLEAR_ADDRESS";exports.CHECKOUT_SET_REMOVING_ITEM="CHECKOUT_SET_REMOVING_ITEM";exports.CHECKOUT_QUEUE_REMOVE_ITEM="CHECKOUT_QUEUE_REMOVE_ITEM";exports.CHECKOUT_QUEUE_EMPTY_CART="CHECKOUT_QUEUE_EMPTY_CART";exports.CHECKOUT_CLEAR_ACCOUNT_PAYMENT_INFO="CHECKOUT_CLEAR_ACCOUNT_PAYMENT_INFO";exports.CHECKOUT_SET_BACK_2_SHOP_URL="CHECKOUT_SET_BACK_2_SHOP_URL";exports.CHECKOUT_SAVE_ORDER_URI="CHECKOUT_SAVE_ORDER_URI";exports.CHECKOUT_ORDER_ERROR="CHECKOUT_ORDER_ERROR";exports.CHECKOUT_SHOW_ERROR_PANEL="CHECKOUT_SHOW_ERROR_PANEL";exports.CHECKOUT_CLOSE_ERROR_PANEL="CHECKOUT_CLOSE_ERROR_PANEL";exports.CHECKOUT_SET_INVALID_CURRENCY="CHECKOUT_SET_INVALID_CURRENCY";exports.CHECKOUT_SHOW_SHIPPING_ADDRESS_ERRORS="CHECKOUT_SHOW_SHIPPING_ADDRESS_ERRORS";exports.CHECKOUT_SHOW_BILLING_ADDRESS_ERRORS="CHECKOUT_SHOW_BILLING_ADDRESS_ERRORS";exports.CHECKOUT_SET_SHOW_ADDRESS_SUGGESTIONS="CHECKOUT_SET_SHOW_ADDRESS_SUGGESTIONS";exports.CHECKOUT_SET_PROCESSING_ADDRESS="CHECKOUT_SET_PROCESSING_ADDRESS";exports.CHECKOUT_SET_PAYMENT_METHOD="CHECKOUT_SET_PAYMENT_METHOD";exports.CHECKOUT_SET_SHIPPING_ADDRESS_URI="CHECKOUT_SET_SHIPPING_ADDRESS_URI";exports.CHECKOUT_SET_BILLING_ADDRESS_URI="CHECKOUT_SET_BILLING_ADDRESS_URI";exports.CHECKOUT_SHIPPING_NEXT_CLICK="CHECKOUT_SHIPPING_NEXT_CLICK";exports.CHECKOUT_SET_FORM_MODIFIED="CHECKOUT_SET_FORM_MODIFIED";exports.CHECKOUT_INIT_STRIPE="CHECKOUT_INIT_STRIPE";exports.CHECKOUT_TRACK_STRIPE_PAYMENT_ID="CHECKOUT_TRACK_STRIPE_PAYMENT_ID"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-checkout-constants",(function(e){SM.currentModule="sm-checkout-constants";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INVALID_CURRENCY_MESSAGE=exports.REQUEST_ID_CHANGE_CURRENCY=exports.REQUEST_ID_SET_SHIPPING_OPTION=exports.REQUEST_ID_UPDATE_ITEM_QUANTITY=exports.CC_STRIPE_EVENT_BRANDS=exports.CC_STRIPE_BRANDS=exports.CC_ALPHA2=exports.CC_FORM_TYPES=exports.ADDRESS_VALIDATION_SERVICES=exports.SHIPPING_ADDRESS_TYPES=exports.BILLING_ADDRESS_TYPES=exports.REMOVE_ADD_ON_ALERT_PROPS=exports.REMOVE_ITEM_ALERT_PROPS=exports.EMPTY_CART_ALERT_PROPS=exports.AUTO_OPEN_ITEM_LIMIT=exports.CART_PAGE_SIZE=exports.HOLIDAY_SHIPPING_TABLE_PULL_DATE=exports.BACK_TO_GALLERY_LINK_BLACKLILST=exports.ADDRESS_LABELS_BY_NAME=exports.ADDRESS_FIELD_NAMES=exports.API_FIELD_MAP=exports.ADDRESS_FIELD_LABEL_EMAIL=exports.ADDRESS_FIELD_LABEL_PHONE=exports.ADDRESS_FIELD_LABEL_COUNTRY=exports.ADDRESS_FIELD_LABEL_POSTAL_CODE=exports.ADDRESS_FIELD_LABEL_REGION=exports.ADDRESS_FIELD_LABEL_CITY=exports.ADDRESS_FIELD_LABEL_LINE_2=exports.ADDRESS_FIELD_LABEL_LINE_1=exports.ADDRESS_FIELD_LABEL_LAST_NAME=exports.ADDRESS_FIELD_LABEL_FIRST_NAME=exports.ADDRESS_FIELD_CITY_API=exports.ADDRESS_FIELD_COUNTRY_API=exports.ADDRESS_FIELD_REGION_API=exports.ADDRESS_FIELD_PHONE_API=exports.ADDRESS_FIELD_EMAIL_API=exports.ADDRESS_FIELD_LAST_NAME_API=exports.ADDRESS_FIELD_FIRST_NAME_API=exports.ADDRESS_FIELD_POSTAL_CODE_API=exports.ADDRESS_FIELD_LINE_2_API=exports.ADDRESS_FIELD_LINE_1_API=exports.ADDRESS_FIELD_CITY=exports.ADDRESS_FIELD_COUNTRY=exports.ADDRESS_FIELD_REGION=exports.ADDRESS_FIELD_PHONE=exports.ADDRESS_FIELD_EMAIL=exports.ADDRESS_FIELD_LAST_NAME=exports.ADDRESS_FIELD_FIRST_NAME=exports.ADDRESS_FIELD_POSTAL_CODE=exports.ADDRESS_FIELD_LINE_2=exports.ADDRESS_FIELD_LINE_1=exports.unlockSuccessTemplate=exports.contactUsMessageTemplate=exports.UNLOCK_FAIL=exports.UNLOCK_SUCCESS=exports.CONTACT_US_MSG=exports.CROP_INSTRUCTIONS=exports.SUMMARY_TOOLTIPS=exports.LICENSES=exports.DOWNLOAD_TYPES=exports.CART_ITEM_TYPES=exports.CHECKOUT_FIELD_KEYS=exports.SUBSECTION_TITLES=exports.STEPS=exports.API_ENDPOINTS=exports.CATALOG_ADD_ON_PRICE_EXPANSION=exports.ORDER_EXPANSIONS=exports.CART_ITEM_EXPANSIONS=void 0;var e=babelHelpers.interopRequireDefault(t("react")),_=t("immutable"),E=t("lodash"),I=t("sm-cart-constants");exports.CART_ITEM_EXPANSIONS=["CartItemAddons","CartItemAddons.[CartItemContentType]","CartItemAddons.[CartItemContentType].CatalogSkuType","CartItemAddons.[CartItemContentType].DescriptionImage","CartItemAddons.[CartItemContentType].DescriptionImage.ImageSizeDetails","CartItemAvailableAddons","CartItemAvailableAddons.[CartItemContentType]","CartItemAvailableAddons.[CartItemContentType].CatalogSkuType","CartItemAvailableAddons.[CartItemContentType].DescriptionImage","CartItemAvailableAddons.[CartItemContentType].DescriptionImage.ImageSizeDetails","[CartItemContents]","[CartItemContents].[CartItemContentType]","[CartItemContents].[CartItemContentType].AlbumImageShareUris","[CartItemContents].[CartItemContentType].HighlightImage","[CartItemContents].[CartItemContentType].HighlightImage.ImageSizeDetails","[CartItemContents].[CartItemContentType].ImageOwner","[CartItemContents].[CartItemContentType].ImageSizeDetails","[CartItemContents].[CartItemContentType].User","[CartItemContents].[CartItemContentType].CatalogSkuType","[CartItemContents].[CartItemContentType].CatalogSkuPrice","[CartItemContents].[CartItemContentType].DescriptionImage","[CartItemContents].[CartItemContentType].DescriptionImage.ImageSizeDetails","CartItemParent","[CartItemType]","[CartItemType].CatalogProduct","[CartItemType].CatalogProduct.CatalogCategory","[CartItemType].CatalogProduct.CatalogSubCategory","[CartItemType].CatalogProduct.CatalogProductAddons","[CartItemType].CatalogProduct.CatalogProductAddons.CatalogSkuType","[CartItemType].CatalogProduct.CatalogProductAddons.DescriptionImage","[CartItemType].CatalogProduct.CatalogProductAddons.DescriptionImage.ImageSizeDetails","[CartItemType].CatalogSkuType","[CartItemContents].Printmark"];exports.ORDER_EXPANSIONS=["OrderBilling","OrderBilling.OrderBillingCardDetails","OrderBillingAddress","OrderShippingAddress","OrderDownload","OrderDownloadAll","OrderShipments","OrderShipments.OrderShipmentItems","OrderShipments.OrderShipmentItems.OrderItemContents","OrderShipments.OrderShipmentItems.OrderItemContents.OrderItemContentDownload","OrderShipments.OrderShipmentItems.OrderItemContents.Printmark","OrderShipments.OrderShipmentItems.OrderItemContents.OrderItemContentType","OrderShipments.OrderShipmentItems.OrderItemContents.OrderItemContentType.ImageSizeDetails","OrderShipments.OrderShipmentItems.OrderItemContents.OrderItemContentType.HighlightImage","OrderShipments.OrderShipmentItems.OrderItemContents.OrderItemContentType.HighlightImage.ImageSizeDetails","OrderShipments.OrderShipmentItems.OrderItemContents.OrderItemContentType.User","OrderShipments.OrderShipmentItems.OrderItemParent","OrderShipments.OrderShipmentItems.OrderItemType.CatalogProduct","OrderShipments.OrderShipmentItems.OrderItemType.CatalogProduct.CatalogCategory","OrderShipments.OrderShipmentItems.OrderItemType.CatalogProduct.CatalogSubCategory","OrderShipments.OrderShipmentItems.OrderItemType.CatalogSkuType"];exports.CATALOG_ADD_ON_PRICE_EXPANSION="[CartItemType].CatalogProduct.CatalogProductAddons.CatalogSkuPrice";const S=(0,_.Map)({CART_URI:I.CART_URI,CART_ITEMS_URI:I.CART_ITEMS_URI,CART_COUPON_APPLY_URI:I.CART_COUPON_APPLY_URI,CART_COUPONS_URI:I.CART_COUPONS_URI,CART_CARD_EDITOR_URI:I.CART_CARD_EDITOR_URI});exports.API_ENDPOINTS=S;const r={labels:{signpostDesktop:"Shopping cart",signpostMobile:"Cart",pageTitle:"Shopping cart"},route:"/checkout"},o={...r,route:"/checkout/"},a=(0,_.Map)({CART:r,CART_WORKAROUND:o,SHIPPING:{labels:{signpostDesktop:"Shipping info",signpostMobile:"Shipping",pageTitle:"Shipping info"},route:"/checkout/shipping"},SHIPMENTS:{labels:{signpostDesktop:"Shipping options",signpostMobile:"Shipping",pageTitle:"Shipping options"},route:"/checkout/shipping"},BILLING:{labels:{signpostDesktop:"Billing info",signpostMobile:"Billing",pageTitle:"Billing info"},route:"/checkout/payment"},REVIEW:{labels:{signpostDesktop:"Review order",signpostMobile:"Review",pageTitle:"Review order"},route:"/checkout/review"},CONFIRMATION:{labels:{signpostDesktop:"Thank you",signpostMobile:"Thanks",pageTitle:"Thank you for your order!"}},INFORMATION:{labels:{signpostDesktop:"Additional info",signpostMobile:"Extra info",pageTitle:"Additional info"},route:"/checkout/info"},EMPTY_CART:{labels:{},route:"/checkout/empty"}});exports.STEPS=a;const n=(0,_.Map)({SHIPPING_OPTIONS:"Shipping options",PAYMENT_METHOD:"Payment method"});exports.SUBSECTION_TITLES=n;const A=(0,_.Map)({ADDRESS_2_SHIPPING_KEY:"addAddress2Shipping",ADDRESS_2_BILLING_KEY:"addAddress2Billing"});exports.CHECKOUT_FIELD_KEYS=A;const D=(0,_.Map)({SINGLE_ITEM:"SINGLE_ITEM",PACKAGE:"PACKAGE",PACKAGE_ITEM:"PACKAGE_ITEM",CARD_ITEM:"CARD_ITEM",SINGLE_DOWNLOAD:"SINGLE_DOWNLOAD",GALLERY_DOWNLOAD:"GALLERY_DOWNLOAD",DELETED_ITEM:"DELETED_ITEM"});exports.CART_ITEM_TYPES=D;const s=(0,_.Map)({SINGLE_PHOTO_DOWNLOAD_TYPE:"Single Photo Download",GALLERY_DOWNLOAD_TYPE:"Gallery Download",SINGLE_VIDEO_DOWNLOAD:"Single Video Download"});exports.DOWNLOAD_TYPES=s;const C=(0,_.Map)({PERSONAL_LICENSE:"Personal Photo License",COMMERCIAL_LICENSE:"Commercial Photo License",PERSONAL_VIDEO_LICENSE:"Personal Video License",COMMERCIAL_VIDEO_LICENSE:"Commercial Video License"});exports.LICENSES=C;const i=(0,_.Map)({SUMMARY_PROCESSING_FEE_TOOLTIP:"Covers the costs associated with digital downloads"});exports.SUMMARY_TOOLTIPS=i;exports.CROP_INSTRUCTIONS="Photos often require cropping. Use the corner handles to adjust for best fit.";const L="If the problem persists, please contact us at <%= email %>.";exports.CONTACT_US_MSG=L;const T="We’re sorry, your cart was momentarily locked. Please refresh this page and try again. ".concat(L);exports.UNLOCK_SUCCESS=T;exports.UNLOCK_FAIL="We’re sorry, your cart is momentarily locked.";const m=(0,E.template)(L);exports.contactUsMessageTemplate=m;const R=(0,E.template)(T);exports.unlockSuccessTemplate=R;exports.ADDRESS_FIELD_LINE_1="street";exports.ADDRESS_FIELD_LINE_2="street2";exports.ADDRESS_FIELD_POSTAL_CODE="zipCode";exports.ADDRESS_FIELD_FIRST_NAME="firstName";exports.ADDRESS_FIELD_LAST_NAME="lastName";exports.ADDRESS_FIELD_EMAIL="email";exports.ADDRESS_FIELD_PHONE="phoneNumber";exports.ADDRESS_FIELD_REGION="region";exports.ADDRESS_FIELD_COUNTRY="country";exports.ADDRESS_FIELD_CITY="city";exports.ADDRESS_FIELD_LINE_1_API="Line1";exports.ADDRESS_FIELD_LINE_2_API="Line2";exports.ADDRESS_FIELD_POSTAL_CODE_API="PostalCode";exports.ADDRESS_FIELD_FIRST_NAME_API="FirstName";exports.ADDRESS_FIELD_LAST_NAME_API="LastName";exports.ADDRESS_FIELD_EMAIL_API="Email";exports.ADDRESS_FIELD_PHONE_API="Phone";exports.ADDRESS_FIELD_REGION_API="Region";exports.ADDRESS_FIELD_COUNTRY_API="Country";exports.ADDRESS_FIELD_CITY_API="City";exports.ADDRESS_FIELD_LABEL_FIRST_NAME="First name";exports.ADDRESS_FIELD_LABEL_LAST_NAME="Last name";exports.ADDRESS_FIELD_LABEL_LINE_1="Street address";exports.ADDRESS_FIELD_LABEL_LINE_2="Street address 2";exports.ADDRESS_FIELD_LABEL_CITY="City";exports.ADDRESS_FIELD_LABEL_REGION="Region";exports.ADDRESS_FIELD_LABEL_POSTAL_CODE="Zip code";exports.ADDRESS_FIELD_LABEL_COUNTRY="Country";exports.ADDRESS_FIELD_LABEL_PHONE="Phone number";exports.ADDRESS_FIELD_LABEL_EMAIL="Email";const l={Line1:"street",Line2:"street2",PostalCode:"zipCode",FirstName:"firstName",LastName:"lastName",Email:"email",Phone:"phoneNumber",Region:"region",Country:"country",City:"city"};exports.API_FIELD_MAP=l;const O=new Set(["street","street2","city","region","zipCode","country"]);exports.ADDRESS_FIELD_NAMES=O;const d={firstName:"First name",lastName:"Last name",street:"Street address",street2:"Street address 2",city:"City",region:"Region",zipCode:"Zip code",country:"Country",phoneNumber:"Phone number",email:"Email"};exports.ADDRESS_LABELS_BY_NAME=d;const p=new Set(["Cards"]);exports.BACK_TO_GALLERY_LINK_BLACKLILST=p;exports.HOLIDAY_SHIPPING_TABLE_PULL_DATE=15772824e5;exports.CART_PAGE_SIZE=100;exports.AUTO_OPEN_ITEM_LIMIT=10;const N={applyUserSkin:!0,buttonLabel:"Message",cancelLabel:"No, take me back",className:"sm-checkout-alert",confirmLabel:"Yes, empty my cart",message:"This will remove all items from your cart and you will need to start over. Are you sure you want to do this?",title:e.default.createElement(e.default.Fragment,null,"You are about to empty your shopping cart")};exports.EMPTY_CART_ALERT_PROPS=N;exports.REMOVE_ITEM_ALERT_PROPS={applyUserSkin:!0,buttonLabel:"Message",cancelLabel:"No, take me back",className:"sm-checkout-alert",confirmLabel:"Yes, remove it",message:"This will remove it from your cart and you will need to re-add it. Are you sure you want to do this?",title:"You are about to remove an item"};exports.REMOVE_ADD_ON_ALERT_PROPS={applyUserSkin:!0,buttonLabel:"Message",cancelLabel:"No, take me back",className:"sm-checkout-alert",confirmLabel:"Yes, remove them",message:"You will need to re-add any finishing options to this item. Are you sure you want to continue?",title:"This will remove your finishing options"};exports.BILLING_ADDRESS_TYPES={ACCOUNT:"account",SHIPPING:"shipping",CUSTOM:"custom"};exports.SHIPPING_ADDRESS_TYPES={ACCOUNT:"account",CUSTOM:"custom"};exports.ADDRESS_VALIDATION_SERVICES={AVALARA:1,SMARTY_STREETS:2};exports.CC_FORM_TYPES={USE_ACCOUNT_CC:"account",USE_CUSTOM_CC:"custom"};exports.CC_ALPHA2={VISA:"VI",MASTER_CARD:"MC",DINERS_CLUB:"DC",AMERICAN_EXPRESS:"AX",JCB:"JC",DISCOVER:"DI"};const P={AMERICAN_EXPRESS:"American Express",DINERS_CLUB:"Diners Club",DISCOVER:"Discover",JCB:"JCB",MASTER_CARD:"Mastercard",VISA:"Visa",UNION_PAY:"UnionPay"};exports.CC_STRIPE_BRANDS=P;const c={AMERICAN_EXPRESS:"amex",DINERS_CLUB:"diners",DISCOVER:"discover",JCB:"jcb",MASTER_CARD:"mastercard",VISA:"visa",UNION_PAY:"unionpay"};exports.CC_STRIPE_EVENT_BRANDS=c;exports.REQUEST_ID_UPDATE_ITEM_QUANTITY="CHECKOUT_CART_ITEM_QTY_PATCH";exports.REQUEST_ID_SET_SHIPPING_OPTION="CHECKOUT_SET_SHIPPING_OPTION";exports.REQUEST_ID_CHANGE_CURRENCY="CHECKOUT_CHANGE_CURRENCY_SELECT";exports.INVALID_CURRENCY_MESSAGE={title:"Invalid currency",message:"Looks like the currency you selected is not supported by your credit card. Please select a different currency or payment method."}}(),SM.currentModule=null}),"",{requires:["react","immutable","lodash","sm-cart-constants"]});
YUI.add("sm-checkout-reducers",(function(e){SM.currentModule="sm-checkout-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=d,exports.combined=function(r={},s){return(0,e.combineReducers)({ui:d})(r,s)};var e=r("redux"),s=babelHelpers.interopRequireWildcard(r("sm-checkout-action-types")),i=r("connected-react-router"),c=r("sm-checkout-constants");function n(e,r){let{shippingFields:i={}}=e;switch(r.type){case s.CHECKOUT_SET_SHIPPING_ADDRESS_URI:case s.CHECKOUT_SET_SHIPPING_ADDRESS:return{...e,shipping:{formModified:!1},shippingAddress:r.uri};case s.CHECKOUT_SET_SHIPPING_OPTION:return{...e,shipments:{...e.shipments||{},[r.shipment]:r.selection}};case s.CHECKOUT_SET_SHIPPING_FIELD:var{[r.fieldName]:n=""}=i,o=e.addressModified;if(c.ADDRESS_FIELD_NAMES.has(r.fieldName)&&n!==r.fieldValue){o=!0;var{shippingAddress:E,...t}=e;e=t}return{...e,shipping:{formModified:!0},shippingFields:{...i,[r.fieldName]:r.fieldValue},addressModified:o,useShippingAccountAddress:!1};case s.CHECKOUT_SHIPPING_USE_ACCOUNT_ADDRESS:return{...e,useShippingAccountAddress:!0,shippingFields:r.address,shipping:{formModified:!0},shippingAddressType:c.SHIPPING_ADDRESS_TYPES.ACCOUNT};case s.CHECKOUT_SHIPPING_CLEAR_ADDRESS:return{...e,shippingFields:{},shipping:{formModified:!0},shippingAddressType:c.SHIPPING_ADDRESS_TYPES.CUSTOM};default:return e}}function o(e={ccNeedsValidation:!0},r){let{billingFields:i={},ccFields:n={},currentErrors:o={},billing:E={}}=e;switch(r.type){case s.CHECKOUT_SET_BILLING_ADDRESS_URI:return{...e,billingAddress:r.uri};case s.CHECKOUT_SHOW_BILLING_ADDRESS_ERRORS:return{...e,billing:{formModified:!1},currentErrors:{...o,billingAddressErrors:r.errors},billingAddressType:c.BILLING_ADDRESS_TYPES.CUSTOM};case s.CHECKOUT_SET_BILLING_ADDRESS:return{...e,billingAddress:r.uri,billing:{formModified:!1}};case s.CHECKOUT_CLEAR_ACCOUNT_PAYMENT_INFO:return{...e,ccFields:{ccNumber:"",ccMonth:"",ccYear:"",ccSecurityCode:"",[r.fieldName]:r.fieldValue},ccNeedsValidation:!0,ccFormModified:!0};case s.CHECKOUT_BILLING_FIELDS_UPDATE:return{...e,billingFields:r.fieldUpdates,billing:{formModified:!0}};case s.CHECKOUT_BILLING_ADDRESS_TYPE:return{...e,billingAddressType:r.addressType};case s.CHECKOUT_SET_BILLING_FIELD:var{[r.fieldName]:t=""}=i,{addressModified:C}=e;return c.ADDRESS_FIELD_NAMES.has(r.fieldName)&&t!==r.fieldValue&&(C=!0),{...e,billingFields:{...i,[r.fieldName]:r.fieldValue},billing:{formModified:!0},addressModified:C};case s.CHECKOUT_BILLING_ADDRESS_VALID:return{...e,billing:{...E,addressValidated:!0}};case s.CHECKOUT_SET_CC_FIELD:return{...e,ccFields:{...n,[r.fieldName]:r.fieldValue},ccErrors:{},ccNeedsValidation:r.needsValidation,ccFormModified:!0};case s.CHECKOUT_PROCESSING_CC:return{...e,isProcessingCC:r.isProcessing,ccFormModified:!1};case s.CHECKOUT_CLEAR_CC_ERRORS:return{...e,ccErrors:{},ccNeedsValidation:!1,ccFormModified:!1};case s.CHECKOUT_SET_CC_NEEDS_VALIDATION:return{...e,ccNeedsValidation:r.value};case s.CHECKOUT_SET_PAYMENT_METHOD:return{...e,paymentMethod:r.method};case s.CHECKOUT_SET_USE_ACCOUNT_PAYMENT_METHOD:return{...e,useAccountPaymentMethod:r.useAccountPaymentMethod};case s.CHECKOUT_SET_FORM_MODIFIED:return{...e,[r.key]:{formModified:r.modified}};case s.CHECKOUT_INIT_STRIPE:return{...e,stripeConfig:r.stripeConfig};case s.CHECKOUT_TRACK_STRIPE_PAYMENT_ID:return{...e,stripePaymentMethodId:r.stripePaymentMethodId};default:return e}}function E(e,r){let{upcomingErrors:c={},addressModified:n}=e;switch(r.type){case s.CHECKOUT_SET_CONSTANTS:return{...e,constants:{helpEmail:r.data.helpEmail,emptyCartHelpLink:r.data.emptyCartHelpLink,checkoutProduct:r.data.product}};case s.CHECKOUT_CLEAR_ADDRESS_ERROR:return{...e,upcomingErrors:{...c,[r.key]:{}}};case s.CHECKOUT_ACTIVATE_COUPON_FIELD:return{...e,showCouponField:!0};case s.CHECKOUT_ACTIVATE_COUPON_BUTTON:return{...e,showCouponButton:!0};case s.CHECKOUT_DEACTIVATE_COUPON_BUTTON:return{...e,showCouponButton:!1};case s.CHECKOUT_SET_COUPON_FIELD:return{...e,couponField:r.fieldValue,couponSuccessMessage:"",couponErrorMessage:""};case s.CHECKOUT_SET_PROCESSING_COUPON:return{...e,isProcessingCoupon:r.isProcessingCoupon};case s.CHECKOUT_REMOVE_COUPON:return{...e,couponApplied:!1,couponField:"",showCouponButton:!1,showCouponField:!1};case s.CHECKOUT_APPLY_COUPON:return{...e,couponApplied:!0,couponSuccessMessage:r.couponSuccessMessage,couponErrorMessage:""};case s.CHECKOUT_SET_COUPON_ERROR:return{...e,couponApplied:!1,couponSuccessMessage:"",couponErrorMessage:r.couponErrorMessage};case s.CHECKOUT_CLEAR_COUPON_ERRORS:return{...e,couponSuccessMessage:"",couponErrorMessage:""};case s.CHECKOUT_LOAD_GEOIP_DATA:return{...e,geoIPData:{...r.data}};case s.CHECKOUT_LOAD_CART_IDS:return{...e,cartIds:{...r.data}};case i.LOCATION_CHANGE:return{...e,addressSuggestion:void 0,showAddressSuggestion:!1,couponSuccessMessage:"",activePage:r.payload.pathname};case s.CHECKOUT_SET_PROCESSING_ADDRESS:return r.isProcessing&&(n=!1),{...e,isProcessingAddress:r.isProcessing,addressModified:n};case s.CHECKOUT_STORE_ADDRESS_ERROR:return{...e,upcomingErrors:{...c,[r.key]:{...c[r.key]||{},...r.errors}}};case s.CHECKOUT_SET_INVALID_CURRENCY:case s.CHECKOUT_SET_CC_ERROR:return{...e,ccErrors:r.ccErrors};case s.CHECKOUT_SET_SHOW_ADDRESS_SUGGESTIONS:return{...e,showAddressSuggestion:r.value};case s.CHECKOUT_OPEN_ADD_ONS:return{...e,addOnsModalUri:r.cartItemUri};case s.CHECKOUT_CLOSE_ADD_ONS:return{...e,addOnsModalUri:""};case s.CHECKOUT_QUEUE_REMOVE_ADD_ONS:return{...e,queuedRemoveAddOn:r.cartItemUri};case s.CHECKOUT_SET_REMOVING_ADD_ONS:return{...e,removingAddOnUri:r.cartItemUri};case s.CHECKOUT_OPEN_CROP_MODAL:{let{cartItemURI:s,initialCrop:i}=r;return{...e,cartItemBeingCropped:s,cropData:i}}case s.CHECKOUT_SUBMIT_CROP_SUCCESS:case s.CHECKOUT_CLOSE_CROP_MODAL:return{...e,cartItemBeingCropped:"",cropData:null,cropErrorMessage:""};case s.CHECKOUT_SUBMIT_CROP_FAILURE:return{...e,cropErrorMessage:r.errorMessage};case s.CHECKOUT_UPDATE_CROP:return{...e,cropData:{...e.cropData,...r.newCropData},cropErrorMessage:""};case s.CHECKOUT_QUEUE_EMPTY_CART:return{...e,emptyCartQueued:r.emptyCartQueued};case s.CHECKOUT_QUEUE_REMOVE_ITEM:return{...e,queuedRemoveItem:r.cartItemUri};case s.CHECKOUT_SET_REMOVING_ITEM:return{...e,removingItem:r.removingItem};case s.CHECKOUT_CHANGE_CURRENCY:return{...e,currency:r.currency};case s.CHECKOUT_CHANGE_CURRENCY_SPINNER:return{...e,isUpdatingCurrency:r.isUpdatingCurrency};case s.CHECKOUT_SHOW_ERROR_PANEL:return{...e,errorTitle:r.errorTitle,errorMessage:r.errorMessage};case s.CHECKOUT_CLOSE_ERROR_PANEL:return{...e,errorTitle:null,errorMessage:null};case s.CHECKOUT_TOGGLE_LICENSE_MODAL:return{...e,licenseModal:{showLicenseModal:r.showLicenseModal,licenseType:r.licenseType}};case s.CHECKOUT_SET_BACK_2_SHOP_URL:return{...e,back2ShopUrl:r.back2ShopUrl};case s.CHECKOUT_ORDER_ERROR:return{...e,orderErrors:r.error};case s.CHECKOUT_SAVE_ORDER_URI:return{...e,orderUri:r.orderUri};default:return e}}function t(e,r){let i;switch(r.type){case s.CHECKOUT_BILLING_FIELDS_UPDATE:case s.CHECKOUT_SHIPPING_USE_ACCOUNT_ADDRESS:{let{currentErrors:r,upcomingErrors:s,...i}=e;return i}case s.CHECKOUT_SET_BILLING_FIELD:i="billing";case s.CHECKOUT_SET_SHIPPING_FIELD:{i=i||"shipping";let s="".concat(i,"AddressErrors"),{currentErrors:{[s]:c={}}={},currentErrors:n={},upcomingErrors:o={}}=e,E={...o,[s]:void 0},{[r.fieldName]:t,...C}=c;if("zipCode"===r.fieldName||"region"===r.fieldName){let{region:e,zipCode:r,...s}=C;C=s}return{...e,currentErrors:{...n,[s]:C},upcomingErrors:E}}default:return e}}function C(e={},r){switch(r.type){case s.CHECKOUT_SHIPPING_NEXT_CLICK:{let{upcomingErrors:{shippingAddressErrors:r={},...s}={},currentErrors:i={},addressSuggestion:n={},shippingAddressType:o}=e,E=!1;return n.uri&&0===Object.keys(r).length&&(E=!0),Object.keys(r).length>0&&(o=c.SHIPPING_ADDRESS_TYPES.CUSTOM),{...e,currentErrors:{...i,shippingAddressErrors:{...i.shippingAddressErrors||{},...r}},upcomingErrors:s,showAddressSuggestion:E,shippingAddressType:o}}default:return e}}function d(e={},r){let{cart:s={}}=e;for(let e of[E,n,o,t,C])s=e(s,r);return{...e,cart:s}}}(),SM.currentModule=null}),"",{requires:["redux","sm-checkout-action-types","connected-react-router","sm-checkout-constants"]});
YUI.add("sm-com-lb-action-types",(function(_){SM.currentModule="sm-com-lb-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.COM_LB_UPDATE_CROP=exports.COM_LB_STORE_CONFIRMATION_IMAGE_URI=exports.COM_LB_SET_PRODUCT_PREVIEW=exports.COM_LB_ROTATE_CROP=exports.COM_LB_RESET_CROP=exports.COM_LB_PRODUCT_IMAGE_GALLERY_URI_SET=exports.COM_LB_PRODUCT_IMAGE_GALLERY_URI_CLEAR=exports.COM_LB_CLEAR_PRODUCT_PREVIEW=exports.COM_LB_CLEAR_ERROR_MESSAGES=exports.COM_LB_BATCH_ADD_FLOW_ENABLED=exports.COM_LB_ADD_TO_CART_BUSY_START=exports.COM_LB_ADD_TO_CART_BUSY_DONE=exports.COM_LB_ADD_ERROR_MESSAGE=void 0;exports.COM_LB_ADD_ERROR_MESSAGE="COM_LB_ADD_ERROR_MESSAGE";exports.COM_LB_ADD_TO_CART_BUSY_DONE="COM_LB_ADD_TO_CART_BUSY_DONE";exports.COM_LB_ADD_TO_CART_BUSY_START="COM_LB_ADD_TO_CART_BUSY_START";exports.COM_LB_BATCH_ADD_FLOW_ENABLED="COM_LB_BATCH_ADD_FLOW_ENABLED";exports.COM_LB_CLEAR_ERROR_MESSAGES="COM_LB_CLEAR_ERROR_MESSAGES";exports.COM_LB_CLEAR_PRODUCT_PREVIEW="COM_LB_CLEAR_PRODUCT_PREVIEW";exports.COM_LB_PRODUCT_IMAGE_GALLERY_URI_CLEAR="COM_LB_PRODUCT_IMAGE_GALLERY_URI_CLEAR";exports.COM_LB_PRODUCT_IMAGE_GALLERY_URI_SET="COM_LB_PRODUCT_IMAGE_GALLERY_URI_SET";exports.COM_LB_RESET_CROP="COM_LB_RESET_CROP";exports.COM_LB_ROTATE_CROP="COM_LB_ROTATE_CROP";exports.COM_LB_SET_PRODUCT_PREVIEW="COM_LB_SET_PRODUCT_PREVIEW";exports.COM_LB_STORE_CONFIRMATION_IMAGE_URI="COM_LB_STORE_CONFIRMATION_IMAGE_URI";exports.COM_LB_UPDATE_CROP="COM_LB_UPDATE_CROP"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-com-lb-actions",(function(t){SM.currentModule="sm-com-lb-actions";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addErrorMessage=_,exports.clearErrorMessages=function(){return{type:n.COM_LB_CLEAR_ERROR_MESSAGES}},exports.setAddToCartStart=p,exports.setAddToCartDone=C,exports.storeConfirmationImageUri=function(t){return{type:n.COM_LB_STORE_CONFIRMATION_IMAGE_URI,imageUri:t}},exports.setBatchAddFlowEnabled=function(t=!1,e=""){return{type:n.COM_LB_BATCH_ADD_FLOW_ENABLED,albumImageUri:e,enabled:t}},exports.loadCartItemContents=I,exports.createCardEditor=function({imageUris:t,designId:e,productId:a,smProductId:o}){return async function(i,n){let u=await i((0,s.postToAPI)({uri:"/api/v2/cards!generateeditorurl",data:{DesignID:e,ProductID:a,ImageUris:t,SMProductID:o}})),c=n(),d=(0,g.getEditorUrl)(c,u);r.default.win.location=d}},exports.setProductImageGalleryUri=function(t){return{type:n.COM_LB_PRODUCT_IMAGE_GALLERY_URI_SET,productImageGalleryUri:t}},exports.clearProductImageGalleryUri=function(){return{type:n.COM_LB_PRODUCT_IMAGE_GALLERY_URI_CLEAR}},exports.addAlbumToCart=exports.addToCart=exports.addToCartError=exports.refreshCart=void 0;var t=babelHelpers.interopRequireDefault(e("sm-smuglog")),r=babelHelpers.interopRequireDefault(e("sm-dom-core")),a=e("sm-cart-constants"),o=e("sm-dialogs-actions"),s=e("sm-api-redux-actions"),i=e("sm-api-redux-paginator-actions"),n=e("sm-com-lb-action-types"),u=e("sm-com-lb-helpers"),c=e("sm-api-redux-paginator-selectors"),d=e("sm-api-redux-utils"),l=e("sm-lightbox-constants"),m=e("sm-lightbox-selectors"),g=e("sm-com-lb-selectors");function _(t){let{response:{Message:e}={},message:r}=t,a=e||r||"Oops! Something went wrong.";return{type:n.COM_LB_ADD_ERROR_MESSAGE,message:a}}function p(){return{type:n.COM_LB_ADD_TO_CART_BUSY_START}}function C(t){return{type:n.COM_LB_ADD_TO_CART_BUSY_DONE,comLbCartUri:t}}const E=(e="",r,a)=>async i=>{try{await Promise.all([i((0,s.fetchFromAPI)({uri:"/api/v2/cart"})),i(I())])}catch(e){t.default.add("sm-commerce-lightbox-actions",(0,d.getSmugLogDataForRequestFailure)(e,"refreshCart"),t.default.LEVEL_ERROR)}try{i(C(e)),(0,u.goToConfirmation)(r,a)}catch(e){t.default.add("sm-commerce-lightbox-actions",(0,d.getSmugLogDataForRequestFailure)(e,"goToConfirmation"),t.default.LEVEL_ERROR),i((0,o.addError)("There was an issue adding the item to your cart. If the problem persists, contact our Support Heroes.",e))}};exports.refreshCart=E;const R=e=>r=>{t.default.add("sm-commerce-lightbox-actions",(0,d.getSmugLogDataForRequestFailure)(e,"addToCart"),t.default.LEVEL_ERROR),r(C()),r(_(e.error||e))};exports.addToCartError=R;exports.addToCart=(t,e,r,o,i,n)=>async(u,c)=>{let d=(0,m.getLightboxInitialMode)(c())===l.LIGHTBOX_MODE_BUY?a.SOURCE_LB_COMMERCE_FOCUSED:a.SOURCE_LB;u(p());try{let a=await u((0,s.postToAPI)({uri:t,data:{CropHeight:o.height,CropLeft:o.left,CropRotation:o.rotation,CropTop:o.top,CropWidth:o.width,Image:e,Quantity:r,Source:d}}));await u(E(a,i,n))}catch(t){u(R(t))}};function I(e=1){return(r,s)=>r((0,i.fetchPageFromAPI)({uri:a.CART_ITEMS_URI,expand:["[CartItemType]","[CartItemContents]","[CartItemContents].[CartItemContentType]"],data:{start:e}})).then(()=>{let t=s();if((0,c.getPaginatedEntityTotal)(t,a.CART_ITEMS_URI)>e+100)return r(I(e+100))}).catch(e=>(t.default.add("sm-commerce-lightbox-actions",(0,d.getSmugLogDataForRequestFailure)(e,"loadCartItemContents"),t.default.LEVEL_ERROR),r((0,o.addError)("There was an issue loading your cart. If the problem persists, contact our Support Heroes.",e))))}exports.addAlbumToCart=(t,e,r,a,o)=>async i=>{i(p());try{let n=await i((0,s.postToAPI)({uri:t,data:{Album:e,Quantity:r}}));await i(E(n,a,o))}catch(t){i(R(t))}}}(),SM.currentModule=null}),"",{requires:["sm-gallery-overlays","sm-smuglog","sm-dom-core","sm-cart-constants","sm-dialogs-actions","sm-api-redux-actions","sm-api-redux-paginator-actions","sm-com-lb-action-types","sm-com-lb-helpers","sm-api-redux-paginator-selectors","sm-api-redux-utils","sm-lightbox-constants","sm-lightbox-selectors","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-album-picker-flow",(function(e){SM.currentModule="sm-com-lb-album-picker-flow";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("sm-com-lb-image-picker-container")),l=babelHelpers.interopRequireDefault(t("sm-album-picker-skip-container")),a=t("sm-album-picker-constants"),n=t("sm-com-lb-constants");class o extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"state",{designId:"",productId:"",mode:"PICK_IMAGES"}),babelHelpers.defineProperty(this,"_setModeToSkipSelection",()=>{this.setState({mode:"PICK_SKIP"})}),babelHelpers.defineProperty(this,"_renderImagePicker",()=>{let{albumUri:t,initiallySelectedImageKeys:r}=this.props,{maxCount:i}=this.state;return e.default.createElement(s.default,{whccProduct:n.WHCC_PRODUCT_TYPE_ALBUMS,albumUri:t,onSubmit:this._onSubmit,selectableMaxCount:300,minCount:a.MIN_IMAGES,maxCount:i,initiallySelectedImageKeys:r,showRecommendation:!1})}),babelHelpers.defineProperty(this,"_renderSkipPicker",()=>{let{albumUri:t}=this.props;return e.default.createElement(l.default,{whccProduct:n.WHCC_PRODUCT_TYPE_ALBUMS,albumUri:t,onContinueClick:this._onSubmit})}),babelHelpers.defineProperty(this,"_onSubmit",async e=>{let{onSubmit:t,productId:r}=this.props;return t(e,r)})}componentDidMount(){this.props.loadDesigns();let{skipImageSelection:e}=this.props;e&&this._setModeToSkipSelection()}_renderCardPickerStep(){switch(this.state.mode){case"PICK_SKIP":return this._renderSkipPicker();case"PICK_IMAGES":default:return this._renderImagePicker()}}render(){let{className:t}=this.props,r=(0,i.default)(["sm-card-picker-container","sm-flex","sm-flex-column",t]);return e.default.createElement("div",{className:r},this._renderCardPickerStep())}}exports.default=o,babelHelpers.defineProperty(o,"propTypes",{initiallySelectedImageKeys:r.default.arrayOf(r.default.string),imageUri:r.default.string.isRequired,albumUri:r.default.string.isRequired,onSubmit:r.default.func.isRequired,skipImageSelection:r.default.bool}),babelHelpers.defineProperty(o,"displayName","ComLB.AlbumPickerFlow")}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-com-lb-image-picker-container","sm-album-picker-skip-container","sm-album-picker-constants","sm-com-lb-constants"]});
YUI.add("sm-com-lb-albums-flow-container",(function(e){SM.currentModule="sm-com-lb-albums-flow-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=r("sm-com-lb-selectors-url-mapper"),o=r("sm-com-lb-actions"),l=r("sm-album-picker-selectors"),u=r("sm-album-picker-actions"),m=r("sm-com-lb-selectors-common"),c=babelHelpers.interopRequireDefault(r("sm-com-lb-album-picker-flow")),s=r("sm-api-redux-selectors");var i=(0,e.connect)((function(e,r){let{imageUri:o,location:u,showAlbumSkus:c}=r,{ImageCount:i=Number.POSITIVE_INFINITY,Uri:a}=(0,s.getExpansion)(e,o,"Album")||{},n=(0,m.getSkusForAlbumImageUri)(e,o,{includeAlbumSkus:c}),d=u.pathname,b="",{productUri:p,skuUri:I}=(0,t.getEntityUriForUrlPath)(e,d,n)||{};return I&&(b=(0,s.getExpansionUri)(e,I,"CatalogProduct")),{smProductId:(p||b).split("/").pop(),productId:(0,l.getAlbumID)(e),albumUri:a,initiallySelectedImageKeys:(0,m.getDefaultImagePickerSelection)(e,o),skipImageSelection:i<30}}),(function(e){return{loadDesigns:()=>e((0,u.fetchAlbumsProductID)()),_onSubmit:(r,t,l)=>e((0,o.createCardEditor)({imageUris:r,designId:"",productId:t,smProductId:l}))}}),(function(e,r,t){let{smProductId:o,...l}=e;return{...l,...t,...r,onSubmit:(e,t)=>{r._onSubmit(e,t,o)}}}))(c.default);exports.default=i}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-selectors-url-mapper","sm-com-lb-actions","sm-album-picker-selectors","sm-album-picker-actions","sm-com-lb-selectors-common","sm-com-lb-album-picker-flow","sm-api-redux-selectors"]});
YUI.add("sm-com-lb-albums-info",(function(e){SM.currentModule="sm-com-lb-albums-info";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=babelHelpers.interopRequireDefault(t("react"));function r(){return e.default.createElement("div",{className:"sm-com-lb-albums-info sm-flex sm-flex-column"},e.default.createElement("p",{className:"sm-com-lb-typography-product-title sm-text-center"},"These professional-quality photo albums are hand crafted with high-end materials and refined finishing touches. Customize covers, pages, and everything else after choosing photos to make the perfect album."))}r.displayName="ComLB.AlbumInfo"}(),SM.currentModule=null}),"",{requires:["react"]});
YUI.add("sm-com-lb-already-in-cart",(function(e){SM.currentModule="sm-com-lb-already-in-cart";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-icon")),a=babelHelpers.interopRequireDefault(t("sm-com-lb-post-cart-buttons-container"));class n extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_ref",e.default.createRef())}componentDidMount(){var e,t;null===(e=this._ref)||void 0===e||null===(t=e.current)||void 0===t||t.focus()}render(){let{navigateToRoot:t}=this.props;return e.default.createElement("div",{className:"sm-com-lb-in-cart-slide sm-flex sm-flex-column sm-flex sm-flex-column","data-testid":"sm_com_lb_confirmation_slide",ref:this._ref,tabIndex:"1"},e.default.createElement("div",{className:"sm-com-lb-confirmation-check-mark sm-flex sm-flex-justify-center sm-flex-items-center"},e.default.createElement(l.default,{name:"Check"})),e.default.createElement("h3",{className:"sm-text-center"},"Already in your cart!"),e.default.createElement(a.default,{onBuyMoreClick:t}))}}babelHelpers.defineProperty(n,"displayName","ComLB.AlreadyInCart"),babelHelpers.defineProperty(n,"propTypes",{navigateToRoot:r.default.func.isRequired});var o=n;exports.default=o}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon","sm-com-lb-post-cart-buttons-container"]});
YUI.add("sm-com-lb-batch-add-button-container",(function(e){SM.currentModule="sm-com-lb-batch-add-button-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),o=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-com-lb-batch-add-button")),n=t("sm-com-lb-actions"),c=t("sm-com-lb-selectors-common");const l=(0,o.connect)((function(e){return{batchAddFlowEnabled:(0,c.isBatchAddFlowEnabled)(e)}}),(function(e){return{_onClick:(t,o)=>{e((0,n.setBatchAddFlowEnabled)(t,o))}}}),(function(e,{_onClick:t},o){return{...e,...o,onClick:()=>{t(!e.batchAddFlowEnabled,o.imageUri)}}}))(r.default);l.propTypes={imageUri:e.default.string.isRequired};var a=l;exports.default=a}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-com-lb-batch-add-button","sm-com-lb-actions","sm-com-lb-selectors-common"]});
YUI.add("sm-com-lb-batch-add-button",(function(e){SM.currentModule="sm-com-lb-batch-add-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),u=babelHelpers.interopRequireDefault(t("sm-component-button"));function o(t){let{batchAddFlowEnabled:l,onClick:o}=t;return e.default.createElement(u.default,{className:"sm-com-lb-batch-add-button",onClick:o,size:u.default.SIZE_LARGE},l?"Buy Single Photo":"Buy Multiple Photos")}o.displayName="ComLb.BatchAdd",o.propTypes={batchAddUrl:l.default.string}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button"]});
YUI.add("sm-com-lb-card-picker-flow",(function(e){SM.currentModule="sm-com-lb-card-picker-flow";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),i=babelHelpers.interopRequireDefault(r("classnames")),a=babelHelpers.interopRequireDefault(r("sm-card-picker-container")),n=babelHelpers.interopRequireDefault(r("sm-com-lb-image-picker-container")),s=babelHelpers.interopRequireDefault(r("sm-album-picker-skip-container")),l=r("sm-com-lb-constants");class o extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"state",{designId:"",productId:"",mode:"PICK_DESIGN"}),babelHelpers.defineProperty(this,"_onDesignSelect",e=>{let{productId:r,designId:t,minCount:i,maxCount:a}=e,{skipImageSelection:n}=this.props,s=n?"PICK_SKIP":"PICK_IMAGES";this.setState({designId:t,productId:r,minCount:i,maxCount:a,mode:s})}),babelHelpers.defineProperty(this,"_onImagePickerCancel",()=>{this.setState({designId:"",productId:"",minCount:void 0,maxCount:void 0,mode:"PICK_DESIGN"})}),babelHelpers.defineProperty(this,"_renderDesignPicker",()=>e.default.createElement(e.default.Fragment,null,e.default.createElement("h2",{className:"sm-card-design-picker-header"}," Select a design for your Greeting Card"),e.default.createElement(a.default,{imageUri:this.props.imageUri,onClick:this._onDesignSelect,cardOccasion:this.props.cardOccasion}))),babelHelpers.defineProperty(this,"_renderImagePicker",()=>{let{albumUri:r,initiallySelectedImageKeys:t}=this.props,{minCount:i,maxCount:a}=this.state;return e.default.createElement(n.default,{whccProduct:l.WHCC_PRODUCT_TYPE_CARDS,albumUri:r,onSubmit:this._onSubmit,onCancel:this._onImagePickerCancel,selectableMaxCount:100,minCount:i,maxCount:a,initiallySelectedImageKeys:t,showRecommendation:!0})}),babelHelpers.defineProperty(this,"_renderSkipPicker",()=>{let{albumUri:r}=this.props;return e.default.createElement(s.default,{whccProduct:l.WHCC_PRODUCT_TYPE_CARDS,albumUri:r,onContinueClick:this._onSubmit})}),babelHelpers.defineProperty(this,"_onSubmit",async e=>{let{designId:r,productId:t}=this.state;return this.props.onSubmit(e,r,t)})}_renderCardPickerStep(){switch(this.state.mode){case"PICK_IMAGES":return this._renderImagePicker();case"PICK_SKIP":return this._renderSkipPicker();case"PICK_DESIGN":default:return this._renderDesignPicker()}}render(){let{className:r}=this.props,t=(0,i.default)(["sm-card-picker-container","sm-flex","sm-flex-column",r]);return e.default.createElement("div",{className:t},this._renderCardPickerStep())}}exports.default=o,babelHelpers.defineProperty(o,"propTypes",{initiallySelectedImageKeys:t.default.arrayOf(t.default.string),imageUri:t.default.string.isRequired,albumUri:t.default.string.isRequired,onSubmit:t.default.func.isRequired,skipImageSelection:t.default.bool,cardOccasion:t.default.string}),babelHelpers.defineProperty(o,"displayName","ComLB.CardPickerFlow")}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-card-picker-container","sm-com-lb-image-picker-container","sm-album-picker-skip-container","sm-com-lb-constants"]});
YUI.add("sm-com-lb-cart-summary-container",(function(e){SM.currentModule="sm-com-lb-cart-summary-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-cart-summary")),t=babelHelpers.interopRequireDefault(r("sm-dom")),m=r("react-redux"),u=r("sm-com-lb-selectors"),a=r("sm-webview");var c=(0,m.connect)((function(e){let{numberOfItems:r,usersCartUri:m}=(0,u.getCartSummary)(e);return{numberOfItems:r,onViewCartClick:()=>{(0,a.sendWebviewMessage)({type:"commerceLightboxViewCartClicked"}),t.default.doc.location=m}}}))(e.default);exports.default=c}(),SM.currentModule=null}),"",{requires:["sm-com-lb-cart-summary","sm-dom","react-redux","sm-com-lb-selectors","sm-webview"]});
YUI.add("sm-com-lb-cart-summary",(function(e){SM.currentModule="sm-com-lb-cart-summary";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=m;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-icon")),l=babelHelpers.interopRequireDefault(t("sm-badge")),u=babelHelpers.interopRequireDefault(t("sm-component-button"));function m(t){let{numberOfItems:r,onViewCartClick:m}=t;return e.default.createElement("div",{className:"sm-com-lb-cart-summary sm-flex sm-flex-column"},e.default.createElement(u.default,{className:"sm-com-lb-view-cart-button sm-position-relative",skin:u.default.SKIN_PRIMARY,size:u.default.SIZE_LARGE,onClick:m,"data-testid":"com_lb_sidebar_view_cart_button"},e.default.createElement(a.default,{name:"Cart",size:a.default.SIZE_LARGE}),e.default.createElement(l.default,null,r),"View cart"))}m.displayName="ComLb.CartSummary",m.propTypes={numberOfItems:r.default.number.isRequired,onViewCartClick:r.default.func.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon","sm-badge","sm-component-button"]});
YUI.add("sm-com-lb-catalog-back-button-container",(function(e){SM.currentModule="sm-com-lb-catalog-back-button-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),a=t("sm-com-lb-selectors-url-mapper"),r=t("sm-com-lb-actions"),l=t("sm-com-lb-selectors-common"),c=t("sm-batch-add-selectors"),o=babelHelpers.interopRequireDefault(t("sm-com-lb-catalog-back-button"));var u=(0,e.connect)((function(e,{location:t,imageUri:r,showAlbumSkus:o}){let u,{pathname:s}=t,n=(0,l.isImagePurchaseable)(e,r,{includeAlbums:o});return u=(0,l.isBatchAddFlowEnabled)(e)?(0,c.getBatchAddSkusByAlbumImageUri)(e,r,{includeAlbumSkus:o}):(0,l.getSkusForAlbumImageUri)(e,r,{includeAlbumSkus:o}),{_nearestValidPath:(0,a.getNearestValidUrlPath)(e,s,u),showBackButton:n&&"/start"!==s&&"/"!==s&&u.length>1}}),(function(e){return{_clearProductImageGalleryUri:()=>e((0,r.clearProductImageGalleryUri)())}}),(function({_nearestValidPath:e,...t},a,{history:r,...l}){let c;return c=r.canGo(-1)?r.goBack:()=>{r.push({pathname:e,state:{direction:"back"}})},{...l,...t,...a,onClick:c,clearProductImageGalleryUri:()=>a._clearProductImageGalleryUri()}}))(o.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-selectors-url-mapper","sm-com-lb-actions","sm-com-lb-selectors-common","sm-batch-add-selectors","sm-com-lb-catalog-back-button"]});
YUI.add("sm-com-lb-catalog-back-button",(function(e){SM.currentModule="sm-com-lb-catalog-back-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-icon"));const o=({onClick:t,clearProductImageGalleryUri:a})=>e.default.createElement(l.default,{size:l.default.SIZE_LARGE,noChrome:!0,onClick:()=>{a(),t()},className:"sm-com-lb-sidebar-controls-back","data-elem-app-id":"com_lb_sidebar_btn_back"},e.default.createElement(r.default,{name:"NavigateBack",size:r.default.SIZE_LARGE}));o.displayName="ComLB.Sidebar.CatalogBackButton",o.propTypes={onClick:a.default.func.isRequired};var u=o;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon"]});
YUI.add("sm-com-lb-catalog-routes",(function(e){SM.currentModule="sm-com-lb-catalog-routes";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("react-dom")),o=babelHelpers.interopRequireDefault(t("prop-types")),i=t("react-router"),s=babelHelpers.interopRequireDefault(t("sm-transitions-slide")),a=babelHelpers.interopRequireDefault(t("sm-com-lb-category-list-container")),l=babelHelpers.interopRequireDefault(t("sm-com-lb-subcategory-list-container")),n=babelHelpers.interopRequireDefault(t("sm-com-lb-product-list-container")),u=babelHelpers.interopRequireDefault(t("sm-com-lb-sku-list-container")),c=babelHelpers.interopRequireDefault(t("sm-com-lb-sku-route-container")),m=babelHelpers.interopRequireDefault(t("sm-com-lb-confirmation-container")),p=babelHelpers.interopRequireDefault(t("sm-com-lb-inline-image-cropper-container")),d=babelHelpers.interopRequireDefault(t("sm-com-lb-greeting-cards-list-container")),b=babelHelpers.interopRequireDefault(t("sm-com-lb-greeting-cards-info")),h=babelHelpers.interopRequireDefault(t("sm-com-lb-greeting-cards-occasion-container")),f=babelHelpers.interopRequireDefault(t("sm-com-lb-albums-info")),g=babelHelpers.interopRequireDefault(t("sm-com-lb-albums-flow-container")),y=t("sm-com-lb-constants");class S extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_renderCategoryList",({history:t,location:r})=>e.default.createElement(a.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderCartConfirmation",({history:t,location:r})=>e.default.createElement(m.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderSkuRoute",({history:t,location:r})=>e.default.createElement(c.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderSkuList",({history:t,location:r})=>e.default.createElement(u.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderProductList",({history:t,location:r})=>e.default.createElement(n.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderSubcategoryList",({history:t,location:r})=>e.default.createElement(l.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderInlineCropper",({history:t,location:r})=>e.default.createElement(p.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderGreetingCardsList",({history:t,location:r})=>e.default.createElement(d.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderGreetingCardsOccasion",({history:t,location:r})=>e.default.createElement(b.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderGreetingCardsPickerInline",({history:t,location:r})=>e.default.createElement("div",{className:"sm-com-lb-greeting-cards-inline sm-flex"},e.default.createElement(h.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus}))),babelHelpers.defineProperty(this,"_renderAlbumsInfo",()=>e.default.createElement(f.default,null)),babelHelpers.defineProperty(this,"_renderAlbumsFlow",({location:t})=>e.default.createElement("div",{className:"sm-com-lb-albums-inline sm-flex"},e.default.createElement(g.default,{location:t,imageUri:this.props.imageUri,showAlbumSkus:this.props.hasGalleryContext})))}componentDidUpdate(e){if(this.props.location.pathname!==e.location.pathname){let e=r.default.findDOMNode(this);if(e){e.parentElement.scrollTop=0}}}render(){let{location:t,direction:r,showInlineCards:o,showInlineCropper:a}=this.props;return e.default.createElement(s.default,{pageKey:t.pathname,direction:r},e.default.createElement(i.Switch,{location:t},e.default.createElement(i.Route,{path:"/albums/albums/:albumSize",render:o?this._renderAlbumsFlow:this._renderAlbumsInfo}),e.default.createElement(i.Route,{path:"/cards/greeting-cards/:occasion",render:o?this._renderGreetingCardsPickerInline:this._renderGreetingCardsOccasion}),e.default.createElement(i.Route,{path:"/cards/greeting-cards",render:this._renderGreetingCardsList}),e.default.createElement(i.Route,{path:"/start",render:this._renderCategoryList}),e.default.createElement(i.Route,{path:"/:category/:subcategory/:product/:sku/confirmation",render:this._renderCartConfirmation}),e.default.createElement(i.Route,{exact:!0,path:"/:category/:subcategory/:product/:sku/qty",render:this._renderSkuRoute}),e.default.createElement(i.Route,{path:"/:category/:subcategory/:product/:sku",render:a?this._renderInlineCropper:this._renderSkuRoute}),e.default.createElement(i.Route,{path:"/:category/:subcategory/:product",component:this._renderSkuList}),e.default.createElement(i.Route,{path:"/:category/:subcategory",render:this._renderProductList}),e.default.createElement(i.Route,{path:"/:category",component:this._renderSubcategoryList}),e.default.createElement(i.Route,{render:this._renderCategoryList})))}}exports.default=S,S.displayName="ComLB.CatalogRoutes",S.propTypes={location:o.default.object.isRequired,direction:o.default.oneOf([y.SLIDE_DIRECTION_LEFT,y.SLIDE_DIRECTION_RIGHT]).isRequired,showAlbumSkus:o.default.bool,showInlineCropper:o.default.bool,showInlineCards:o.default.bool}}(),SM.currentModule=null}),"",{requires:["react","react-dom","prop-types","react-router","sm-transitions-slide","sm-com-lb-category-list-container","sm-com-lb-subcategory-list-container","sm-com-lb-product-list-container","sm-com-lb-sku-list-container","sm-com-lb-sku-route-container","sm-com-lb-confirmation-container","sm-com-lb-inline-image-cropper-container","sm-com-lb-greeting-cards-list-container","sm-com-lb-greeting-cards-info","sm-com-lb-greeting-cards-occasion-container","sm-com-lb-albums-info","sm-com-lb-albums-flow-container","sm-com-lb-constants"]});
YUI.add("sm-com-lb-category-list-container",(function(e){SM.currentModule="sm-com-lb-category-list-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-category-list")),t=r("react-redux"),l=r("sm-com-lb-selectors-url-mapper"),s=r("sm-catalog-selectors"),o=r("sm-catalog-helpers"),c=r("sm-com-lb-helpers"),a=r("sm-com-lb-selectors-common"),m=r("sm-com-lb-selectors"),u=r("sm-batch-add-selectors");const i=(0,c.isAndroidDevice)();var n=(0,t.connect)((function(e,{imageUri:r,showAlbumSkus:t}){let c;c=(0,a.isBatchAddFlowEnabled)(e)?(0,u.getBatchAddSkusByAlbumImageUri)(e,r,{includeAlbumSkus:t}):(0,a.getSkusForAlbumImageUri)(e,r,{includeAlbumSkus:t});let i=(0,s.getCatalogCategories)(e,c)||[];i.sort(o.byCatalogSortOrder);let n=i.map(e=>e.Uri),d=n.reduce((r,t)=>({...r,[t]:(0,l.getUrlPathForCategory)(e,t)}),{}),g=new Set;n=n.filter(e=>!g.has(d[e])&&(g.add(d[e]),!0));let b=(0,m.getAllProductImages)(e,i,c);return t||1!==n.length||(n=[]),{categoryUris:n,previewImageUrls:b,_categoryUrls:d}}),(function(){return{}}),(function({_categoryUrls:e,...r},t,{history:l,...s}){return{...s,...r,...t,isAndroidDevice:i,onClick:r=>{l.push({pathname:e[r],state:{direction:"forward"}})}}}))(e.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["sm-com-lb-category-list","react-redux","sm-com-lb-selectors-url-mapper","sm-catalog-selectors","sm-catalog-helpers","sm-com-lb-helpers","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-category-list-item-container",(function(e){SM.currentModule="sm-com-lb-category-list-item-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-category-list-item")),t=r("react-redux"),l=r("sm-catalog-selectors"),o=r("sm-catalog-model-helpers"),a=r("sm-com-lb-helpers");var s=(0,t.connect)((function(e,{uri:r,onClick:t,isAndroidDevice:s}){let{name:c}=(0,o.toCategory)((0,l.getCategoryByUri)(e,r))||{};return{name:c,displayUnavailableForAndroidMessage:s&&(0,a.isPathCardsOrAlbums)(c),onClick:()=>{t&&t(r)}}}))(e.default);exports.default=s}(),SM.currentModule=null}),"",{requires:["sm-com-lb-category-list-item","react-redux","sm-catalog-selectors","sm-catalog-model-helpers","sm-com-lb-helpers"]});
YUI.add("sm-com-lb-category-list-item",(function(e){SM.currentModule="sm-com-lb-category-list-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-com-lb-components-list-item")),r=t("sm-test-helpers");function s(t){let{onClick:l,name:s,displayUnavailableForAndroidMessage:o}=t;return e.default.createElement(a.default,{"data-testid":(0,r.toTestId)("com_lb_sidebar_".concat(s,"_button")),onClick:l,tooltipText:s,disabled:o},e.default.createElement("h3",null,s),o&&e.default.createElement("span",{className:"sm-label-small sm-text-right"},"Unavailable on Android"))}s.defaultProps={displayUnavailableForAndroidMessage:!1},s.propTypes={onClick:l.default.func.isRequired,name:l.default.string.isRequired,displayUnavailableForAndroidMessage:l.default.bool},s.displayName="ComLb.CategoryListItem"}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-components-list-item","sm-test-helpers"]});
YUI.add("sm-com-lb-category-list",(function(e){SM.currentModule="sm-com-lb-category-list";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-com-lb-category-list-item-container")),i=babelHelpers.interopRequireDefault(r("sm-image-preloader"));class a extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_firstButtonRef",e.default.createRef())}componentDidMount(){var e,r;null===(e=this._firstButtonRef)||void 0===e||null===(r=e.current)||void 0===r||r.firstChild.focus()}render(){let{categoryUris:r,isAndroidDevice:t,onClick:a,previewImageUrls:o}=this.props;return 0===r.length?null:e.default.createElement(e.default.Fragment,null,e.default.createElement("ul",{className:"sm-com-lb-category-list sm-com-lb-list"},r.map((r,i)=>e.default.createElement("li",{key:r,ref:0===i&&this._firstButtonRef},e.default.createElement(l.default,{uri:r,onClick:a,isAndroidDevice:t})))),!!o&&e.default.createElement(i.default,{preloadUrls:o}))}}babelHelpers.defineProperty(a,"displayName","CommerceLB.CategoryList"),babelHelpers.defineProperty(a,"propTypes",{categoryUris:t.default.arrayOf(t.default.string).isRequired,previewImageUrls:t.default.array.isRequired,isAndroidDevice:t.default.bool,onClick:t.default.func.isRequired}),babelHelpers.defineProperty(a,"defaultProps",{isAndroidDevice:!1});var o=a;exports.default=o}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-category-list-item-container","sm-image-preloader"]});
YUI.add("sm-com-lb-components-image-list-item",(function(e){SM.currentModule="sm-com-lb-components-image-list-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("classnames")),o=t("lodash"),i=t("sm-test-helpers"),r=babelHelpers.interopRequireDefault(t("sm-com-lb-components-list-item")),a=babelHelpers.interopRequireDefault(t("sm-component-busy"));class n extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_onChildClick",e=>{e.stopPropagation(),this.props.onClick(e)}),babelHelpers.defineProperty(this,"_onMouseEnter",e=>{e.stopPropagation(),this.props.onMouseEnter(e)})}render(){let{children:t,onClick:s,onMouseEnter:n,name:m,imageUrl:u,"data-testid":c,tooltipText:p}=this.props,d="user-ui-com-lb-product-".concat((0,o.kebabCase)(m)),f=(0,l.default)(["sm-com-lb-image-list-item","sm-flex","sm-flex-column","sm-position-relative",this.props.className]),b=u?e.default.createElement("img",{className:"sm-com-lb-image-list-item-preview","data-testid":(0,i.toTestId)("".concat(c,"_image")),src:u,alt:"".concat(p," Preview")}):e.default.createElement(a.default,null);return e.default.createElement("div",{onClick:s,onMouseEnter:n,className:f,title:p},e.default.createElement("div",{className:"".concat(d," sm-com-lb-image-list-item-preview-container sm-flex sm-flex-items-center sm-flex-justify-center sm-position-relative"),onMouseEnter:this._onMouseEnter},b),e.default.createElement(r.default,{onClick:this._onChildClick,"data-testid":(0,i.toTestId)("".concat(c,"_button")),tooltipText:p},t))}}exports.default=n,n.displayName="ComLB.ImageListItem",n.propTypes={name:s.default.string,onClick:s.default.func.isRequired,imageUrl:s.default.string,"data-testid":s.default.string.isRequired,tooltipText:s.default.string,onMouseEnter:s.default.func},n.defaultProps={onMouseEnter:()=>{}}}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","lodash","sm-test-helpers","sm-com-lb-components-list-item","sm-component-busy"]});
YUI.add("sm-com-lb-components-list-item",(function(e){SM.currentModule="sm-com-lb-components-list-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("classnames")),a=babelHelpers.interopRequireDefault(t("sm-icon"));function i(t){let{children:l,onClick:i,"data-testid":r,tooltipText:n,className:o,disabled:u,...d}=t,m=(0,s.default)("sm-com-lb-list-item","sm-flex","sm-flex-row","sm-flex-items-baseline","sm-position-relative",o,{"sm-flex-wrap":!o||-1===o.indexOf("sm-flex-nowrap")});return e.default.createElement("button",babelHelpers.extends({disabled:u,"data-testid":r,onClick:i,className:m,title:n},d),l,e.default.createElement(a.default,{className:"sm-com-lb-list-item-icon",name:"AngleBracketRightSlim",size:a.default.SIZE_SMALL}))}i.displayName="ComLB.ListItem",i.defaultProps={disabled:!1},i.propTypes={onClick:l.default.func.isRequired,"data-testid":l.default.string.isRequired,tooltipText:l.default.string,className:l.default.string,disabled:l.default.bool}}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-icon"]});
YUI.add("sm-com-lb-components-more-info-container",(function(e){SM.currentModule="sm-com-lb-components-more-info-container";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(o("prop-types")),r=babelHelpers.interopRequireDefault(o("sm-com-lb-components-more-info")),n=o("react-redux"),l=o("sm-com-lb-selectors-common"),t=o("sm-com-lb-selectors"),s=o("sm-com-lb-actions"),i=o("sm-page-selectors");const m=(0,n.connect)((function(){let e=(0,t.makeMemoizedGetMoreInfoDetails)(),o=(0,t.makeMemoizedGetMoreInfoImages)();return function(r,{uri:n,exclusionsUris:t}){let s=e(r,n,t),m=(0,i.viewportIsGreaterThanMedium)(r),{moreInfoImages:c,preloadImageUrls:a}=o(r,n,m);return{activeUri:(0,l.getProductImageGalleryUri)(r),galleryUri:n,moreInfoDetails:s,moreInfoImages:c,preloadImageUrls:a,showMoreInfoInline:m}}}),e=>({_onToggleOpen:o=>e((0,s.setProductImageGalleryUri)(o)),_onToggleClose:()=>e((0,s.clearProductImageGalleryUri)())}),(function(e,o,{uri:r,onClick:n,...l}){let{activeUri:t,moreInfoImages:s}=e;return{...e,...l,onToggleOpen:()=>s.length&&o._onToggleOpen(r),onToggleClose:()=>t===r?o._onToggleClose():()=>{},onClick:()=>n&&n(r)}}))(r.default);m.propTypes={uri:e.default.string.isRequired,onClick:e.default.func.isRequired,optionLabel:e.default.string.isRequired,exclusionsUris:e.default.arrayOf(e.default.string)};var c=m;exports.default=c}(),SM.currentModule=null}),"",{requires:["prop-types","sm-com-lb-components-more-info","react-redux","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-com-lb-actions","sm-page-selectors"]});
YUI.add("sm-com-lb-components-more-info",(function(e){SM.currentModule="sm-com-lb-components-more-info";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(l("react")),t=babelHelpers.interopRequireDefault(l("prop-types")),a=babelHelpers.interopRequireDefault(l("sm-component-button")),o=babelHelpers.interopRequireDefault(l("sm-component-collapsible")),n=babelHelpers.interopRequireDefault(l("sm-icon")),r=babelHelpers.interopRequireDefault(l("sm-product-image-gallery"));const s=l=>{let{activeUri:t,moreInfoDetails:s,moreInfoImages:i,galleryUri:m,onClick:u,onToggleOpen:d,onToggleClose:f,optionLabel:c,preloadImageUrls:p,showMoreInfoInline:g}=l;const b=(0,e.useRef)();(0,e.useEffect)(()=>{var e,l;t&&t!==m&&b&&(null===(e=b.current)||void 0===e||null===(l=e.state)||void 0===l?void 0:l.open)&&b.current.toggle()},[t,m]);let I=e.default.createElement("div",{className:"sm-flex sm-flex-items-center sm-com-lb-more-info-button","data-testid":"com_lb_sidebar_moreinfo_button"},e.default.createElement(n.default,{className:"sm-com-lb-more-info-icon",name:"InfoEncircled",size:n.default.SIZE_SMALL}),e.default.createElement("span",{className:"sm-label-small sm-com-lb-more-info-title-open"},"Hide info"),e.default.createElement("span",{className:"sm-label-small sm-com-lb-more-info-title-closed"},"More info"));if(!i.length&&s.length<=1)return null;c=c.toLowerCase();let E=s.length>1?"Choice of ".concat(c):"Available ".concat(c);return e.default.createElement(o.default,{className:"sm-com-lb-more-info","data-testid":"com_lb_sidebar_moreinfoexpandable_button",headingItemsClassName:"sm-flex-items-baseline",ref:b,title:I,onToggleOpen:d,onToggleClose:f},!g&&Boolean(i.length)&&e.default.createElement(r.default,{moreInfoImages:i,preloadImageUrls:p}),s.length>1&&e.default.createElement("div",{className:"sm-com-lb-more-info-details sm-flex sm-flex-column"},e.default.createElement("h4",{className:"sm-label-large"},E),e.default.createElement("ul",null,s.map(l=>e.default.createElement("li",{key:l.detailName},e.default.createElement("h4",null,l.detailName),e.default.createElement("p",null,l.detailDescription)))),e.default.createElement(a.default,{onClick:u},"Select this product")))};s.displayName="ComLB.MoreInfo",s.propTypes={activeUri:t.default.string,galleryUri:t.default.string,moreInfoImages:t.default.arrayOf(t.default.shape({mainImage:t.default.string.isRequired,thumbnail:t.default.string.isRequired})),moreInfoDetails:t.default.arrayOf(t.default.shape({detailName:t.default.string.isRequired,detailDescription:t.default.string.isRequired})),preloadImageUrls:t.default.arrayOf(t.default.string),optionLabel:t.default.string.isRequired,onClick:t.default.func.isRequired,onToggleOpen:t.default.func,onToggleClose:t.default.func},s.defaultProps={moreInfoDetails:[],moreInfoImages:[]};var i=s;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-component-collapsible","sm-icon","sm-product-image-gallery"]});
YUI.add("sm-com-lb-confirmation-container",(function(e){SM.currentModule="sm-com-lb-confirmation-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-com-lb-confirmation")),o=t("sm-batch-add-selectors"),n=t("sm-com-lb-selectors");var c=(0,e.connect)((function(e){let t=(0,n.getCartItemUri)(e),{confirmationSkuUri:r,...c}=(0,o.getBatchAddToCartDetails)(e),u=(0,n.getProductSkuFromCartUri)(e,t),i={};if(t){let{Currency:r,LinePrice:o,Price:c,Quantity:a}=(0,n.getConfirmedCartItemData)(e,t)||{};i={currency:r,quantity:a,skuName:u,skuPrice:c,multipleSkuPrices:!1,total:o}}else r&&(i={...c||{}});return i}),(function(){return{}}),(function(e,t,{history:r,...o}){return{...e,...o,navigateToRoot:()=>{r.push("/")}}}))(r.default);exports.default=c}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-confirmation","sm-batch-add-selectors","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-confirmation",(function(e){SM.currentModule="sm-com-lb-confirmation";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-icon")),m=babelHelpers.interopRequireDefault(t("sm-component-currency-amount")),n=babelHelpers.interopRequireDefault(t("sm-com-lb-post-cart-buttons-container"));class o extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_confirmRef",e.default.createRef())}componentDidMount(){var e,t;null===(e=this._confirmRef)||void 0===e||null===(t=e.current)||void 0===t||t.focus()}render(){let{currency:t="",quantity:a=0,skuName:o="",skuPrice:r=0,total:s=0,navigateToRoot:c,multipleSkuPrices:i=!1}=this.props;return e.default.createElement("div",{className:"sm-com-lb-confirmation-slide sm-flex sm-flex-column sm-flex sm-flex-column","data-testid":"sm_com_lb_confirmation_slide",ref:this._confirmRef,tabIndex:"1"},e.default.createElement("div",{className:"sm-com-lb-confirmation-check-mark sm-flex sm-flex-justify-center sm-flex-items-center"},e.default.createElement(l.default,{name:"Check"})),e.default.createElement("h1",null,"Confirmation"),e.default.createElement("div",{className:"sm-com-lb-confirmation-product sm-flex sm-flex-row sm-flex-justify-between"},e.default.createElement("div",{className:"sm-com-lb-confirmation-product-label sm-flex sm-flex-justify-start","data-testid":"sm_com_lb_confirmation_product_label"},o),e.default.createElement("div",{className:"sm-com-lb-confirmation-product-value sm-flex sm-flex-justify-end","data-testid":"sm_com_lb_confirmation_product_value"},e.default.createElement(m.default,{amount:r,currency:t}),i&&e.default.createElement("span",{className:"sm-currency-amount"},"+"))),e.default.createElement("div",{className:"sm-com-lb-confirmation-quantity sm-flex sm-flex-row sm-flex-justify-between"},e.default.createElement("div",{className:"sm-com-lb-confirmation-quantity-label sm-flex-justify-start","data-testid":"sm_com_lb_confirmation_quantity_label"},"Quantity"),e.default.createElement("div",{className:"sm-com-lb-confirmation-quantity-count sm-flex-justify-end","data-testid":"sm_com_lb_confirmation_quantity_count"},a)),e.default.createElement("div",{className:"sm-com-lb-confirmation-count-total sm-flex sm-flex-row sm-flex-justify-between"},e.default.createElement("div",{className:"sm-com-lb-confirmation-total-label sm-flex sm-flex-justify-start","data-testid":"sm_com_lb_confirmation_total_label"},"Total"),e.default.createElement("div",{className:"sm-com-lb-confirmation-total-amount sm-flex sm-flex-justify-end","data-testid":"sm_com_lb_confirmation_total_amount"},e.default.createElement(m.default,{amount:s,currency:t}))),e.default.createElement(n.default,{onBuyMoreClick:c}))}}babelHelpers.defineProperty(o,"displayName","ComLb.CartConfirmation"),babelHelpers.defineProperty(o,"propTypes",{skuName:a.default.string,currency:a.default.string,skuPrice:a.default.number,quantity:a.default.number,total:a.default.number,navigateToRoot:a.default.func.isRequired,multipleSkuPrices:a.default.bool});var r=o;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon","sm-component-currency-amount","sm-com-lb-post-cart-buttons-container"]});
YUI.add("sm-com-lb-constants",(function(_){SM.currentModule="sm-com-lb-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WHCC_PRODUCT_TYPE_ALBUMS=exports.WHCC_PRODUCT_TYPE_CARDS=exports.WHCC_MIN_IMAGE_WIDTH=exports.WHCC_MIN_IMAGE_HEIGHT=exports.WHCC_MAX_FILE_SIZE=exports.MORE_INFO_IGNORE_SKU_TYPES=exports.MORE_INFO_MAIN_PANE_THUMBNAIL_MAX_HEIGHT=exports.MORE_INFO_MAIN_PANE_THUMBNAIL_MAX_WIDTH=exports.MORE_INFO_THUMBNAIL_MAX_HEIGHT=exports.MORE_INFO_THUMBNAIL_MAX_WIDTH=exports.MORE_INFO_MAIN_PANE_MAIN_IMAGE_MAX_HEIGHT=exports.MORE_INFO_MAIN_PANE_MAIN_IMAGE_MAX_WIDTH=exports.MORE_INFO_MAIN_IMAGE_MAX_HEIGHT=exports.MORE_INFO_MAIN_IMAGE_MAX_WIDTH=exports.CATALOG_TYPES=exports.NONE_CATALOG_TYPE=exports.FLAT_CATALOG_TYPE=exports.TREE_CATALOG_TYPE=exports.FLAT_CATALOG_THRESHOLD=exports.TITLE_THUMBNAIL_WIDTH=exports.TITLE_THUMBNAIL_HEIGHT=exports.PREVIEW_IMAGE_HEIGHT=exports.PREVIEW_IMAGE_WIDTH=exports.SUBCATEGORY_HACKS=exports.CONFIRMATION_URL_STRING=exports.IMAGE_CROPPER_CONTROLS_SPACING=exports.SIDEBAR_CSS_CLASSES=exports.SIDEBAR_CSS_CLASS_ALBUMS=exports.SIDEBAR_CSS_CLASS_CARDS=exports.SIDEBAR_CSS_CLASS_CONFIRMATION=exports.SIDEBAR_CSS_CLASS_QUANTITY=exports.SIDEBAR_CSS_CLASS_CROP=exports.SIDEBAR_CSS_CLASS_SKU=exports.SIDEBAR_CSS_CLASS_PRODUCT=exports.SIDEBAR_CSS_CLASS_SUBCATEGORY=exports.SIDEBAR_CSS_CLASS_CATEGORY=exports.NO_PRODUCT_AVAILABLE=exports.SLIDE_DIRECTION_RIGHT=exports.SLIDE_DIRECTION_LEFT=void 0;exports.SLIDE_DIRECTION_LEFT="left";exports.SLIDE_DIRECTION_RIGHT="right";exports.NO_PRODUCT_AVAILABLE={VIDEO_TYPE:"video",IMAGE_TYPE:"image"};exports.SIDEBAR_CSS_CLASS_CATEGORY="sm-com-lb-sidebar-category";exports.SIDEBAR_CSS_CLASS_SUBCATEGORY="sm-com-lb-sidebar-subcategory";exports.SIDEBAR_CSS_CLASS_PRODUCT="sm-com-lb-sidebar-product";exports.SIDEBAR_CSS_CLASS_SKU="sm-com-lb-sidebar-sku";exports.SIDEBAR_CSS_CLASS_CROP="sm-com-lb-sidebar-crop";exports.SIDEBAR_CSS_CLASS_QUANTITY="sm-com-lb-sidebar-quantity";exports.SIDEBAR_CSS_CLASS_CONFIRMATION="sm-com-lb-sidebar-confirmation";exports.SIDEBAR_CSS_CLASS_CARDS="sm-com-lb-sidebar-cards";exports.SIDEBAR_CSS_CLASS_ALBUMS="sm-com-lb-sidebar-albums";const _=["sm-com-lb-sidebar-category","sm-com-lb-sidebar-subcategory","sm-com-lb-sidebar-product","sm-com-lb-sidebar-sku","sm-com-lb-sidebar-crop","sm-com-lb-sidebar-quantity","sm-com-lb-sidebar-confirmation"];exports.SIDEBAR_CSS_CLASSES=_;exports.IMAGE_CROPPER_CONTROLS_SPACING=112;exports.CONFIRMATION_URL_STRING="confirmation";const A=new Set(["/api/v2/catalog/vendor/EZprints/category/merch/ornaments","/api/v2/catalog/vendor/EZprints/category/merch/keepsakes","/api/v2/catalog/vendor/Loxley/category/merch/keepsakes","/api/v2/catalog/vendor/LoxleyConsumer/category/merch/keepsakes"]);exports.SUBCATEGORY_HACKS=A;exports.PREVIEW_IMAGE_WIDTH=456;exports.PREVIEW_IMAGE_HEIGHT=300;exports.TITLE_THUMBNAIL_HEIGHT=60;exports.TITLE_THUMBNAIL_WIDTH=60;exports.FLAT_CATALOG_THRESHOLD=6;exports.TREE_CATALOG_TYPE="FullCatalog";exports.FLAT_CATALOG_TYPE="FlatCatalog";exports.NONE_CATALOG_TYPE="NoneCatalog";const I=new Set(["FullCatalog","FlatCatalog","NoneCatalog"]);exports.CATALOG_TYPES=I;exports.MORE_INFO_MAIN_IMAGE_MAX_WIDTH=408;exports.MORE_INFO_MAIN_IMAGE_MAX_HEIGHT=289;exports.MORE_INFO_MAIN_PANE_MAIN_IMAGE_MAX_WIDTH=1600;exports.MORE_INFO_MAIN_PANE_MAIN_IMAGE_MAX_HEIGHT=1200;exports.MORE_INFO_THUMBNAIL_MAX_WIDTH=48;exports.MORE_INFO_THUMBNAIL_MAX_HEIGHT=48;exports.MORE_INFO_MAIN_PANE_THUMBNAIL_MAX_WIDTH=80;exports.MORE_INFO_MAIN_PANE_THUMBNAIL_MAX_HEIGHT=80;const S=new Set(["none","Horizontal","Vertical"]);exports.MORE_INFO_IGNORE_SKU_TYPES=S;exports.WHCC_MAX_FILE_SIZE=4e7;exports.WHCC_MIN_IMAGE_HEIGHT=150;exports.WHCC_MIN_IMAGE_WIDTH=150;exports.WHCC_PRODUCT_TYPE_CARDS="Greeting Cards";exports.WHCC_PRODUCT_TYPE_ALBUMS="Albums"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-com-lb-crop-selectors",(function(e){SM.currentModule="sm-com-lb-crop-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOriginalSizeForImage=s,exports.getOrientationLock=function(t,r){return((0,e.getExpansion)(t,r,"CatalogProduct")||{}).LockOrientation},exports.getDefaultCrop=a,exports.getCropData=u,exports.getCropMaskAttributes=function(e,t,r,i,n,a){let c=s(e,t),m=l(e,r,i),g=u(e,t,n,a);return(0,o.calculateMaskConstraints)(c,m,g)},exports.getPrintmarkForItem=c,exports.getProductAttributes=l,exports.getMarkBannerMessage=function(e,t,r){let o=[];c(e,t,r)&&o.push("This product will have the photographer's printmark.");(0,n.isImageWatermarked)(e,t)&&o.push("Watermarks don't appear on final products.");return o.join(" ")};var e=t("sm-api-redux-selectors"),r=t("sm-album-selectors"),o=t("sm-image-cropper-helpers"),i=t("sm-com-lb-selectors"),n=t("sm-com-lb-selectors-common");function s(t,r){let o=(0,e.getEntity)(t,r);return o?{height:o.OriginalHeight,width:o.OriginalWidth}:void 0}function a(e,t,r){let{skuEntity:n,product:a}=(0,i.getProductDataForImageUri)(e,t,r),u=s(e,t),c=l(e,n,a);return(0,o.calculateDefaultCrop)(u,c)}function u(e,t,r,o=!1){let i=r+t,n=a(e,t,r);if(o)return n;let{ui:{commerceLightbox:{cropData:s={}}={}}={}}=e;return s[i]?{...n,...s[i]}:n}function c(t,o,i){let n=(0,r.getSourceOrContextAlbum)(t,o);if(i){let{CanPrintmark:r=!0}=(0,e.getEntity)(t,i);if(!r)return}if(n)return(0,e.getExpansionUri)(t,n.Uri,"Printmark")}function l(e,t,r){return{width:r.Width,height:r.Height,minWidth:t.MinResWidth,minHeight:t.MinResHeight,borderWidth:t.BorderWidth,borderHeight:t.BorderHeight,lockOrientation:r.LockOrientation}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-album-selectors","sm-image-cropper-helpers","sm-com-lb-selectors","sm-com-lb-selectors-common"]});
YUI.add("sm-com-lb-cropper-actions",(function(e){SM.currentModule="sm-com-lb-cropper-actions";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateCrop=function(r,t,o){return{type:e.COM_LB_UPDATE_CROP,newCropData:r,cropObjectKey:t,_imageUri:o}},exports.resetCrop=function(r,t,o){return{type:e.COM_LB_RESET_CROP,locationPathname:r,cropObjectKey:t,_imageUri:o}},exports.rotateCrop=function(r,t,o){return{type:e.COM_LB_ROTATE_CROP,locationPathname:r,cropObjectKey:t,_imageUri:o}},exports.setProductUriToPreview=function(r){return{type:e.COM_LB_SET_PRODUCT_PREVIEW,_catalogProductUri:r}},exports.clearProductUriToPreview=function(){return{type:e.COM_LB_CLEAR_PRODUCT_PREVIEW}};var e=r("sm-com-lb-action-types")}(),SM.currentModule=null}),"",{requires:["sm-com-lb-action-types"]});
YUI.add("sm-com-lb-error-banner-container",(function(e){SM.currentModule="sm-com-lb-error-banner-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),o=babelHelpers.interopRequireDefault(r("sm-com-lb-error-banner")),s=r("sm-batch-add-selectors"),n=r("sm-com-lb-selectors-common"),c=r("sm-com-lb-selectors");var l=(0,e.connect)((function(e,{imageUri:r,considerAlbumSkus:o}){return{message:(0,n.isBatchAddFlowEnabled)(e)?(0,s.getBatchAddBannerMessage)(e,r,{includeAlbumSkus:o}):(0,c.getBannerErrorMessage)(e,r,{includeAlbumSkus:o})}}))(o.default);exports.default=l}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-error-banner","sm-batch-add-selectors","sm-com-lb-selectors-common","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-error-banner",(function(e){SM.currentModule="sm-com-lb-error-banner";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("prop-types")),n=babelHelpers.interopRequireDefault(r("sm-banner"));function t({message:r}){return e.default.createElement(n.default,{className:"sm-com-lb-error-banner"},e.default.createElement("p",{className:"sm-com-lb-error-banner-msg"},r))}t.displayName="ComLB.ErrorBanner",t.propTypes={message:a.default.string}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-banner"]});
YUI.add("sm-com-lb-flat-catalog-routes",(function(e){SM.currentModule="sm-com-lb-flat-catalog-routes";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("react-dom")),o=babelHelpers.interopRequireDefault(t("prop-types")),l=t("react-router"),a=babelHelpers.interopRequireDefault(t("sm-transitions-slide")),i=babelHelpers.interopRequireDefault(t("sm-com-lb-sku-route-container")),s=babelHelpers.interopRequireDefault(t("sm-com-lb-confirmation-container")),n=babelHelpers.interopRequireDefault(t("sm-com-lb-flat-catalog-sku-list-container")),u=babelHelpers.interopRequireDefault(t("sm-com-lb-inline-image-cropper-container")),m=babelHelpers.interopRequireDefault(t("sm-com-lb-albums-info")),c=babelHelpers.interopRequireDefault(t("sm-com-lb-albums-flow-container")),p=t("sm-com-lb-constants");class d extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_renderFlatCatalog",({history:t,location:r})=>e.default.createElement(n.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderCartConfirmation",({history:t,location:r})=>e.default.createElement(s.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderSkuRoute",({history:t,location:r})=>e.default.createElement(i.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderInlineCropper",({history:t,location:r})=>e.default.createElement(u.default,{history:t,location:r,imageUri:this.props.imageUri,showAlbumSkus:this.props.showAlbumSkus})),babelHelpers.defineProperty(this,"_renderAlbumsInfo",()=>e.default.createElement(m.default,null)),babelHelpers.defineProperty(this,"_renderAlbumsFlow",({location:t})=>e.default.createElement("div",{className:"sm-com-lb-albums-inline sm-flex"},e.default.createElement(c.default,{location:t,imageUri:this.props.imageUri,showAlbumSkus:this.props.hasGalleryContext})))}componentDidUpdate(e){if(this.props.location.pathname!==e.location.pathname){let e=r.default.findDOMNode(this);if(e){e.parentElement.scrollTop=0}}}render(){let{location:t,direction:r,showInlineCropper:o,showInlineCards:i}=this.props;return e.default.createElement(a.default,{pageKey:t.pathname,direction:r},e.default.createElement(l.Switch,{location:t},e.default.createElement(l.Route,{path:"/start",render:this._renderFlatCatalog}),e.default.createElement(l.Route,{path:"/albums/albums/:albumSize",render:i?this._renderAlbumsFlow:this._renderAlbumsInfo}),e.default.createElement(l.Route,{path:"/:category/:subcategory/:product/:sku/confirmation",render:this._renderCartConfirmation}),e.default.createElement(l.Route,{exact:!0,path:"/:category/:subcategory/:product/:sku/qty",render:this._renderSkuRoute}),e.default.createElement(l.Route,{path:"/:category/:subcategory/:product/:sku",render:o?this._renderInlineCropper:this._renderSkuRoute}),e.default.createElement(l.Redirect,{from:"/:category",to:"/start"}),e.default.createElement(l.Route,{render:this._renderFlatCatalog})))}}exports.default=d,d.displayName="ComLB.FlatCatalogRoutes",d.propTypes={location:o.default.object.isRequired,direction:o.default.oneOf([p.SLIDE_DIRECTION_RIGHT,p.SLIDE_DIRECTION_LEFT]).isRequired,imageUri:o.default.string.isRequired,showAlbumSkus:o.default.bool,showInlineCropper:o.default.bool,showInlineCards:o.default.bool}}(),SM.currentModule=null}),"",{requires:["react","react-dom","prop-types","react-router","sm-transitions-slide","sm-com-lb-sku-route-container","sm-com-lb-confirmation-container","sm-com-lb-flat-catalog-sku-list-container","sm-com-lb-inline-image-cropper-container","sm-com-lb-albums-info","sm-com-lb-albums-flow-container","sm-com-lb-constants"]});
YUI.add("sm-com-lb-flat-catalog-sku-list-container",(function(e){SM.currentModule="sm-com-lb-flat-catalog-sku-list-container";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("prop-types")),t=l("react-redux"),a=l("sm-catalog-selectors"),o=l("sm-catalog-helpers"),s=l("sm-catalog-model-helpers"),r=babelHelpers.interopRequireDefault(l("sm-com-lb-flat-catalog-sku-list")),u=l("sm-com-lb-selectors-common"),c=l("sm-batch-add-selectors");const m=(0,t.connect)((function(e,{imageUri:l,showAlbumSkus:t}){let r;r=(0,u.isBatchAddFlowEnabled)(e)?(0,c.getBatchAddSkusByAlbumImageUri)(e,l,{includeAlbumSkus:t}):(0,u.getSkusForAlbumImageUri)(e,l,{includeAlbumSkus:t});let m=(0,a.getCatalogCategories)(e,r)||[];return m.sort(o.byCatalogSortOrder),{categoryUris:m.map(({Uri:e})=>e),categoryTitles:m.map(s.toCategory).map(({name:e})=>e)}}),()=>({}),(function(e,l,{showGallerySkus:t,...a}){return{...e,...a}}))(r.default);m.propTypes={imageUri:r.default.propTypes.imageUri,showAlbumSkus:e.default.bool},m.defaultProps={showAlbumSkus:!1};var i=m;exports.default=i}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-catalog-selectors","sm-catalog-helpers","sm-catalog-model-helpers","sm-com-lb-flat-catalog-sku-list","sm-com-lb-selectors-common","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-flat-catalog-sku-list",(function(e){SM.currentModule="sm-com-lb-flat-catalog-sku-list";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-com-lb-full-sku-list-container"));function a({categoryUris:t,categoryTitles:r,history:a,imageUri:u,showAlbumSkus:s}){return e.default.createElement("div",{className:"sm-com-lb-list"},t.map((t,i)=>e.default.createElement(e.default.Fragment,{key:t},e.default.createElement("h5",{className:"sm-com-lb-flat-catalog-category-title"},r[i]),e.default.createElement(l.default,{firstEntry:0===i,categoryUri:t,history:a,imageUri:u,showAlbumSkus:s}))))}a.propTypes={categoryUris:r.default.arrayOf(r.default.string).isRequired,categoryTitles:r.default.arrayOf(r.default.string).isRequired,imageUri:r.default.string.isRequired},a.displayName="ComLB.FlatCatalogSkuList"}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-full-sku-list-container"]});
YUI.add("sm-com-lb-flat-redirect-container",(function(e){SM.currentModule="sm-com-lb-flat-redirect-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=r("react-redux"),o=r("react-router"),l=r("sm-com-lb-selectors-url-mapper"),s=r("sm-com-lb-selectors-common"),a=r("sm-com-lb-selectors"),i=r("sm-com-lb-helpers"),c=r("sm-batch-add-selectors");const m=(0,t.connect)((function(e,{location:r,imageUri:t,showAlbumSkus:o}){let m,{pathname:u}=r,n=u,d=(0,s.isBatchAddFlowEnabled)(e);if(d){let r=(0,c.getBatchAddAlbumImages)(e,(0,c.getBatchAddAlbumImagesUriByAlbumImage)(e,t));m=(0,c.isDataLoadingForImages)(e,r)}else m=(0,a.isDataLoading)(e,t);if(m)return{};if("/start"===u||"/"===u)return{};let b,p=u.endsWith("/qty");if(b=d?(0,c.getBatchAddSkusByAlbumImageUri)(e,t,{includeAlbumSkus:o}):(0,s.getSkusForAlbumImageUri)(e,t,{includeAlbumSkus:o}),u.endsWith("/confirmation")){let r=(0,a.getConfirmationImageUri)(e);return r&&r!==t?{from:u,to:(0,l.getNearestValidUrlPath)(e,u,b),exact:!0}:{}}p&&(n=(0,i.removeSpecialRoutes)(u));let{skuUri:f}=(0,l.getEntityUriForUrlPath)(e,n,b)||{},g=(0,a.needsInlineCropper)(e)&&!(0,a.needsInlineCropper)(e,f);return f&&!p&&g?{from:u,to:{pathname:(0,i.buildQtyPickerUrl)(u),state:{direction:"forward"}},exact:!0}:f?{}:{from:u,to:"/start",exact:!0}}))(o.Redirect);m.displayName="CommerceLB.Router.FlatRedirect",m.propTypes={location:e.default.object.isRequired,imageUri:e.default.string.isRequired,showAlbumSkus:e.default.bool.isRequired};var u=m;exports.default=u}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","react-router","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-com-lb-helpers","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-full-sku-list-container",(function(e){SM.currentModule="sm-com-lb-full-sku-list-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-full-sku-list")),s=r("react-redux"),t=r("sm-catalog-helpers"),l=r("sm-catalog-selectors"),o=r("sm-com-lb-selectors-url-mapper"),u=r("sm-batch-add-selectors"),c=r("sm-com-lb-selectors-common"),a=r("sm-com-lb-cropper-actions");var m=(0,s.connect)((function(e,{categoryUri:r,imageUri:s,showAlbumSkus:a}){if(!r)return{skuUris:[],_skuUrls:[]};let m;m=(0,c.isBatchAddFlowEnabled)(e)?(0,u.getBatchAddSkusByAlbumImageUri)(e,s,{includeAlbumSkus:a}):(0,c.getSkusForAlbumImageUri)(e,s,{includeAlbumSkus:a}),m.sort(t.byCatalogSortOrder);let n=(0,l.getCategoryByUri)(e,r),i=((0,l.getCatalogSkusForCategory)(e,m,n)||[]).map(({Uri:e})=>e),d=i.reduce((r,s)=>({...r,[s]:(0,o.getUrlPathForSku)(e,s)}),{});return{skuUris:i,_skuUrls:d}}),(function(e){return{_onMouseLeave:()=>{e((0,a.clearProductUriToPreview)())}}}),(function({_skuUrls:e,...r},s,t){let{history:l,firstEntry:o}=t;return{...r,firstEntry:o,onClick:r=>{l.push({pathname:e[r],state:{direction:"forward"}})},onMouseLeave:()=>{s._onMouseLeave()}}}))(e.default);exports.default=m}(),SM.currentModule=null}),"",{requires:["sm-com-lb-full-sku-list","react-redux","sm-catalog-helpers","sm-catalog-selectors","sm-com-lb-selectors-url-mapper","sm-batch-add-selectors","sm-com-lb-selectors-common","sm-com-lb-cropper-actions"]});
YUI.add("sm-com-lb-full-sku-list-item-container",(function(e){SM.currentModule="sm-com-lb-full-sku-list-item-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-com-lb-full-sku-list-item")),r=t("react-redux"),o=t("sm-catalog-selectors"),l=t("sm-com-lb-selectors-item-formatter"),u=t("sm-com-lb-selectors"),i=t("sm-com-lb-cropper-actions");var c=(0,r.connect)((function(e,{uri:t,onClick:r,imageUri:i}){let c=(0,o.getSkuByUri)(e,t)||{},s=(0,u.getProductUriFromSkuEntity)(e,c),n=(0,u.getTitleForFeaturedSku)(e,t),{description:m}=(0,l.getPrettySku)(e,c);return{name:n,description:m,disabled:(0,u.canAddToCartAgain)(e,i,t),_productUriToPreview:s,onClick:r}}),(function(e){return{_onMouseEnter:t=>{e((0,i.setProductUriToPreview)(t))}}}),(function(e,t,{uri:r}){let{onClick:o}=e,{_productUriToPreview:l,...u}=e;return{...u,onMouseEnter:()=>{t._onMouseEnter(l)},onClick:()=>{o&&o(r)}}}))(e.default);exports.default=c}(),SM.currentModule=null}),"",{requires:["sm-com-lb-full-sku-list-item","react-redux","sm-catalog-selectors","sm-com-lb-selectors-item-formatter","sm-com-lb-selectors","sm-com-lb-cropper-actions"]});
YUI.add("sm-com-lb-full-sku-list-item",(function(e){SM.currentModule="sm-com-lb-full-sku-list-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("sm-com-lb-components-list-item")),r=t("sm-test-helpers");function i(t){let{description:l,disabled:i,name:u,onClick:a,...n}=t;return e.default.createElement(s.default,babelHelpers.extends({"data-testid":(0,r.toTestId)("com_lb_sidebar_".concat(u,"_button")),className:"sm-com-lb-full-sku",onClick:a},n),e.default.createElement("div",{className:"sm-flex sm-flex-justify-between sm-com-lb-title-price"},e.default.createElement("h3",null,u)," ",i?e.default.createElement("span",{className:"sm-com-lb-in-cart-indicator"},"(in cart)"):null),e.default.createElement("p",{className:"sm-com-lb-description"},l))}i.propTypes={onClick:l.default.func.isRequired,name:l.default.string.isRequired,description:l.default.string.isRequired,disabled:l.default.bool.isRequired},i.displayName="ComLB.FullSkuItem"}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-components-list-item","sm-test-helpers"]});
YUI.add("sm-com-lb-full-sku-list",(function(e){SM.currentModule="sm-com-lb-full-sku-list";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-com-lb-full-sku-list-item-container"));class u extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_firstButtonRef",e.default.createRef())}componentDidMount(){var e,t;this.props.firstEntry&&(null===(e=this._firstButtonRef)||void 0===e||null===(t=e.current)||void 0===t||t.firstChild.focus())}render(){let{firstEntry:t,skuUris:r,onClick:u,onMouseLeave:s}=this.props;return e.default.createElement("ul",{className:"sm-com-lb-sku-list sm-com-lb-list",onMouseLeave:s},r.map((r,s)=>e.default.createElement("li",{key:r,ref:t&&0===s&&this._firstButtonRef},e.default.createElement(l.default,{uri:r,onClick:u}))))}}babelHelpers.defineProperty(u,"displayName","CommerceLB.FullSkuList"),babelHelpers.defineProperty(u,"propTypes",{firstEntry:r.default.bool,skuUris:r.default.arrayOf(r.default.string).isRequired,onClick:r.default.func.isRequired,onMouseLeave:r.default.func.isRequired});var s=u;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-full-sku-list-item-container"]});
YUI.add("sm-com-lb-greeting-cards-info",(function(e){SM.currentModule="sm-com-lb-greeting-cards-info";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=babelHelpers.interopRequireDefault(r("react"));function t(){return e.default.createElement("div",{className:"sm-com-lb-greeting-cards-info sm-flex sm-flex-column"},e.default.createElement("p",{className:"sm-com-lb-typography-product-title sm-text-center"},"Elegant press printed greeting cards are customizable and professionally printed on high end card stock. They come with envelopes and include countless combinations of designs, layouts, paper and envelope types, colors, foils, and shapes."))}t.displayName="ComLB.GreetingCardsInfo"}(),SM.currentModule=null}),"",{requires:["react"]});
YUI.add("sm-com-lb-greeting-cards-list-container",(function(e){SM.currentModule="sm-com-lb-greeting-cards-list-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-greeting-cards-list")),t=r("react-redux"),l=r("sm-catalog-selectors"),s=r("sm-catalog-helpers"),o=r("sm-com-lb-selectors-url-mapper"),c=r("sm-com-lb-selectors-common"),a=r("sm-com-lb-selectors"),u=r("sm-batch-add-selectors");var i=(0,t.connect)((function(e,{location:r,imageUri:t,showAlbumSkus:i}){let m,n;if((0,c.isBatchAddFlowEnabled)(e)){let r=(0,u.getBatchAddAlbumImagesUriByAlbumImage)(e,t),l=(0,u.getBatchAddAlbumImages)(e,r);m=(0,u.getBatchAddSkusForItemSelection)(e,r,{includeAlbumSkus:i});let{availableKeys:s=[]}=(0,u.getBatchAddImageAvailabilityForSkus)(e,l,m),o=l.filter(e=>s.includes(e.ImageKey));n=(0,a.getPricelistExclusionsUrisForAlbumImages)(e,o,{includeAlbumSkus:i})}else m=(0,c.getSkusForAlbumImageUri)(e,t,{includeAlbumSkus:i}),n=(0,a.getPricelistExclusionsUrisForAlbumImageUri)(e,t,{includeAlbumSkus:i});let d=r.pathname,{subcategoryUri:g}=(0,o.getEntityUriForUrlPath)(e,d,m)||{},b=(0,l.getCatalogProductsForSubcategory)(e,m,(0,l.getSubcategoryByUri)(e,g));b.sort(s.byCatalogSortOrder);let S=b.map(({Uri:e})=>e),h=S.reduce((r,t)=>({...r,[t]:(0,o.getUrlPathForProduct)(e,t)}),{});return{productUris:S,exclusionsUris:n,_productUrls:h}}),(function(){return{}}),(function({_productUrls:e,...r},t,{history:l,...s}){return{...s,...r,...t,onClick:r=>{l.push({pathname:e[r],state:{direction:"forward"}})}}}))(e.default);exports.default=i}(),SM.currentModule=null}),"",{requires:["sm-com-lb-greeting-cards-list","react-redux","sm-catalog-selectors","sm-catalog-helpers","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-greeting-cards-list",(function(e){SM.currentModule="sm-com-lb-greeting-cards-list";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-com-lb-subcategory-list-item-container"));class s extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_listRef",e.default.createRef())}componentDidMount(){var e,r;null===(e=this._listRef)||void 0===e||null===(r=e.current)||void 0===r||r.focus()}render(){let{productUris:r,onClick:t,exclusionsUris:s}=this.props;return e.default.createElement("ul",{className:"sm-com-lb-subcategory-list sm-com-lb-list",ref:this._listRef,tabIndex:"1"},r.map(r=>e.default.createElement("li",{key:r},e.default.createElement(l.default,{uri:r,onClick:t,exclusionsUris:s}))))}}exports.default=s,babelHelpers.defineProperty(s,"displayName","CommerceLB.GreetingCardsList"),babelHelpers.defineProperty(s,"propTypes",{productUris:t.default.arrayOf(t.default.string).isRequired,onClick:t.default.func.isRequired,exclusionsUris:t.default.arrayOf(t.default.string)}),babelHelpers.defineProperty(s,"defaultProps",{exclusionsUris:[]})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-subcategory-list-item-container"]});
YUI.add("sm-com-lb-greeting-cards-occasion-container",(function(e){SM.currentModule="sm-com-lb-greeting-cards-occasion-container";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o("react-redux"),r=o("sm-catalog-selectors"),t=o("sm-com-lb-selectors-url-mapper"),s=o("sm-com-lb-selectors-item-formatter"),m=o("sm-page-selectors"),a=o("sm-album-image-picker-actions"),c=o("sm-com-lb-actions"),i=o("sm-com-lb-selectors-common"),l=o("sm-com-lb-selectors"),n=o("sm-api-redux-selectors"),u=babelHelpers.interopRequireDefault(o("sm-com-lb-card-picker-flow"));var d=(0,e.connect)((function(e,o){let{location:a,imageUri:c,showAlbumSkus:u,whccProduct:d}=o,{ImageCount:g=Number.POSITIVE_INFINITY,Uri:b}=(0,n.getExpansion)(e,c,"Album")||{},p=(0,i.getSkusForAlbumImageUri)(e,c,{includeAlbumSkus:u}),I=a.pathname,{productUri:S}=(0,t.getEntityUriForUrlPath)(e,I,p)||{},f=S.split("/").pop(),_=(0,r.getProductByUri)(e,S),{name:P}=(0,s.getPrettyProduct)(e,_);return{cardOccasion:P,smProductId:f,_albumImagesUri:(0,n.getExpansionUri)(e,b,"AlbumImages"),_imageCount:(0,n.getEntity)(e,b).ImageCount,_expansions:(0,n.getPreviousExpansionsForParentExpansion)(e,b,"AlbumImages"),images:(0,l.getAlbumImagesForWHCCEditor)(e,b,d),showRecommendation:(0,m.viewportIsGreaterThanMedium)(e),albumUri:b,initiallySelectedImageKeys:(0,i.getDefaultImagePickerSelection)(e,c),skipImageSelection:g<15}}),(function(e){return{_loadImages:(o,r,t)=>e((0,a.loadAlbumImages)(o,r,t)),_onSubmit:(o,r,t,s)=>e((0,c.createCardEditor)({imageUris:o,designId:r,productId:t,smProductId:s}))}}),(function(e,o,r){let{_loadImages:t}=o,{_albumImagesUri:s,_imageCount:m,_expansions:a,images:c,smProductId:i}=e,{onSubmit:l,...n}=r;return{...e,...n,onSubmit:(e,r,t)=>{o._onSubmit(e,r,t,i)},loadImages:async()=>t(s,a,m),images:c}}))(u.default);exports.default=d}(),SM.currentModule=null}),"",{requires:["react-redux","sm-catalog-selectors","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-item-formatter","sm-page-selectors","sm-album-image-picker-actions","sm-com-lb-actions","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-api-redux-selectors","sm-com-lb-card-picker-flow"]});
YUI.add("sm-com-lb-helpers",(function(e){SM.currentModule="sm-com-lb-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.goToConfirmation=function(e,t){return t.replace({pathname:"".concat(e,"/").concat(n.CONFIRMATION_URL_STRING),state:{direction:"forward"}})},exports.calculateDirection=function(e,t){let r=n.SLIDE_DIRECTION_LEFT;e.state&&"forward"===e.state.direction&&(r=n.SLIDE_DIRECTION_RIGHT);"POP"===t.action&&e.state&&(r=r===n.SLIDE_DIRECTION_RIGHT?n.SLIDE_DIRECTION_LEFT:n.SLIDE_DIRECTION_RIGHT);"/"===e.pathname&&(r=n.SLIDE_DIRECTION_LEFT);return r},exports.getSidebarLocationClass=function(e){var t;if(!e||Object.keys(e).length<1)return;let r=null==e?void 0:e.pathname,o=null==r||null===(t=r.split("/"))||void 0===t?void 0:t.filter(e=>e.length>0),u=o.length;if("cards"===o[0]&&3===u)return n.SIDEBAR_CSS_CLASS_CARDS;if("albums"===o[0]&&3===u)return n.SIDEBAR_CSS_CLASS_ALBUMS;let a=n.SIDEBAR_CSS_CLASSES.indexOf(n.SIDEBAR_CSS_CLASS_QUANTITY),i=o.some(e=>"qty"===e);u>=a&&!i&&(u+=1);return n.SIDEBAR_CSS_CLASSES[u]},exports.launchPackages=function(t){let n=new e.SM.PackagesOverlay;n.render(),n.set("albumKey",t),n.show()},exports.buildQtyPickerUrl=function(e){return e.endsWith("/qty")?e:e.endsWith("/")?"".concat(e,"qty"):"".concat(e,"/qty")},exports.removeSpecialRoutes=function(e){return e.replace(/\/qty$/,"")},exports.isPathCardsOrAlbums=function(e){return e===n.WHCC_PRODUCT_TYPE_CARDS||e===n.WHCC_PRODUCT_TYPE_ALBUMS},exports.isAndroidDevice=function(){if("Android"===(new r.default).os)return!0;return!1};var n=t("sm-com-lb-constants"),r=babelHelpers.interopRequireDefault(t("sm-ua"))}(),SM.currentModule=null}),"",{requires:["sm-com-lb-constants","sm-ua"]});
YUI.add("sm-com-lb-image-cropper-container",(function(e){SM.currentModule="sm-com-lb-image-cropper-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=t("sm-com-lb-selectors"),o=t("sm-com-lb-constants"),a=t("sm-com-lb-crop-selectors"),c=t("sm-com-lb-selectors-url-mapper"),i=t("sm-image-cropper-helpers"),s=t("sm-com-lb-cropper-actions"),n=babelHelpers.interopRequireDefault(t("sm-image-cropper"));const l=(0,e.connect)((e,{location:t,containerWidth:s,containerHeight:n,imageUri:l})=>{let{skuUri:m,skuEntity:p,product:u,vendorID:d}=(0,r.getProductDataForImageUri)(e,l,t.pathname)||{},g=(0,a.getCropData)(e,l,t.pathname),h=(0,r.getImageSize)(e,l,s,n-o.IMAGE_CROPPER_CONTROLS_SPACING),C=(0,a.getOriginalSizeForImage)(e,l),b=(0,a.getOrientationLock)(e,m),M=(0,i.canRotateCrop)(g,p.MinResWidth,p.MinResHeight,C),k={width:h.DisplayWidth,height:h.DisplayHeight},R=k.width/C.width,S=(0,a.getCropMaskAttributes)(e,l,p,u,t.pathname);S=(0,i.scaleMaskAttributes)(S,R),g=(0,i.scaleCropAttributes)(g,R);let _=(0,a.getPrintmarkForItem)(e,l,m),v=_||null,I=(0,c.getUrlPathForSku)(e,m),U=Math.abs(g.width-g.height)<=2;return{previewURL:h.Url,previewScale:R,previewDimensions:k,cropAttributes:g,cropObjectKey:"".concat(I).concat(l),maskAttributes:S,canRotateCrop:!b&&(M||!U),vendorID:d,sku:p.Sku,productName:u.Name,printmarkUri:v,rotationMatters:p.RotationMatters}},(e,{location:t,imageUri:r})=>({_onRotateClick:o=>{e((0,s.rotateCrop)(t.pathname,o,r))},_onResetClick:o=>{e((0,s.resetCrop)(t.pathname,o,r))},_onCropChange:(t,o,a)=>{o=(0,i.scaleCropAttributes)(o,1/t),e((0,s.updateCrop)(o,a,r))}}),(function(e,t,r){let{cropObjectKey:o}=e;return{...e,...r,onRotateClick:()=>{t._onRotateClick(o)},onResetClick:()=>{t._onResetClick(o)},onCropChange:(e,r)=>{t._onCropChange(e,r,o)}}}))(n.default);l.displayName="CommerceLB.ImageCropper";var m=l;exports.default=m}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-selectors","sm-com-lb-constants","sm-com-lb-crop-selectors","sm-com-lb-selectors-url-mapper","sm-image-cropper-helpers","sm-com-lb-cropper-actions","sm-image-cropper"]});
YUI.add("sm-com-lb-image-cropper-wrapper-container",(function(e){SM.currentModule="sm-com-lb-image-cropper-wrapper-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-image-cropper")),o=babelHelpers.interopRequireDefault(r("prop-types")),t=r("react-redux"),a=r("sm-com-lb-selectors"),l=r("sm-catalog-model-helpers"),c=r("sm-catalog-selectors"),i=r("sm-com-lb-constants");const n=(0,t.connect)((function(e,{location:r,imageUri:o,forcePreview:t}){let n=r.pathname.replace("/".concat(i.CONFIRMATION_URL_STRING),""),s=!r.pathname.includes(i.CONFIRMATION_URL_STRING);if(s)return{productPreviewMode:s,previewOnly:Boolean(t||(0,a.isAddingItem)(e))};let{skuEntity:u}=(0,a.getProductDataForImageUri)(e,o,n);if(!u)return{disabled:!0};let p=u&&(0,c.getSkuTypeForSku)(e,u),{canCrop:m}=(0,l.toSku)(u,p);return{previewOnly:Boolean(t||!m||(0,a.isAddingItem)(e))}}),()=>({}),(function(e,r,{location:o,imageUri:t}){return{...e,location:o,imageUri:t}}))(e.default);n.propTypes={location:o.default.object.isRequired,imageUri:o.default.string.isRequired,forcePreview:o.default.bool},n.defaultProps={forcePreview:!1,productPreviewMode:!1};var s=n;exports.default=s}(),SM.currentModule=null}),"",{requires:["sm-com-lb-image-cropper","prop-types","react-redux","sm-com-lb-selectors","sm-catalog-model-helpers","sm-catalog-selectors","sm-com-lb-constants"]});
YUI.add("sm-com-lb-image-cropper",(function(e){SM.currentModule="sm-com-lb-image-cropper";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=r("react-virtualized"),a=babelHelpers.interopRequireDefault(r("sm-com-lb-image-cropper-container")),p=babelHelpers.interopRequireDefault(r("sm-com-lb-image-thumbnail-wrapper")),i=babelHelpers.interopRequireDefault(r("classnames"));class s extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_renderImageCropper",({height:r,width:t})=>{let l=this.props.previewOnly||r<180;if(r<120)return e.default.createElement("div",{style:{height:r,width:t},className:"sm-flex sm-flex-items-center"},e.default.createElement("p",{className:"sm-com-lb-cropper-warning"},"NOTE: The product may be cropped. You can adjust the crop during checkout after adding it to your cart."));let i=l?p.default:a.default;return e.default.createElement("div",{style:{height:r,width:t},className:"sm-flex"},e.default.createElement(i,babelHelpers.extends({containerWidth:t,containerHeight:r},this.props)))})}render(){if(this.props.disabled)return null;let r=(0,i.default)(["sm-com-lb-image-cropper-container","sm-flex",{"sm-com-lb-image-cropper-product-view":this.props.productPreviewMode}]);return e.default.createElement("div",{className:r},e.default.createElement("div",{className:"sm-com-lb-autosizer-cropper"},e.default.createElement(l.AutoSizer,this.props,this._renderImageCropper)))}}exports.default=s,babelHelpers.defineProperty(s,"displayName","ComLB.ImageCropper"),babelHelpers.defineProperty(s,"propTypes",{...a.default.propTypes,disabled:t.default.bool,previewOnly:t.default.bool}),babelHelpers.defineProperty(s,"defaultProps",{disabled:!1,previewOnly:!1})}(),SM.currentModule=null}),"",{requires:["react","prop-types","react-virtualized","sm-com-lb-image-cropper-container","sm-com-lb-image-thumbnail-wrapper","classnames"]});
YUI.add("sm-com-lb-image-picker-actions",(function(e){SM.currentModule="sm-com-lb-image-picker-actions";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchAllImagesForCardEditor=function(r,t,c,i,m){return async function(u,a){await u((0,e.loadAlbumImages)(t,c,i));let s=a();return((0,o.getAlbumImagesForWHCCEditor)(s,r,m)||[]).map(({Uri:e})=>e)}};var e=r("sm-album-image-picker-actions"),o=r("sm-com-lb-selectors")}(),SM.currentModule=null}),"",{requires:["sm-album-image-picker-actions","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-image-picker-container",(function(e){SM.currentModule="sm-com-lb-image-picker-container";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),r=babelHelpers.interopRequireDefault(a("sm-com-lb-image-picker")),m=a("sm-com-lb-selectors"),o=a("sm-page-selectors"),s=a("sm-album-image-picker-actions"),n=a("sm-api-redux-selectors");var t=(0,e.connect)((function(e,{albumUri:a,showRecommendation:r=!0,whccProduct:s}){return{_albumImagesUri:(0,n.getExpansionUri)(e,a,"AlbumImages"),_imageCount:(0,n.getEntity)(e,a).ImageCount,_expansions:(0,n.getPreviousExpansionsForParentExpansion)(e,a,"AlbumImages"),images:(0,m.getAlbumImagesForWHCCEditor)(e,a,s),showRecommendation:r&&(0,o.viewportIsGreaterThanMedium)(e)}}),(function(e){return{_loadImages:(a,r,m)=>e((0,s.loadAlbumImages)(a,r,m))}}),(function(e,a,r){let{_loadImages:m}=a,{_albumImagesUri:o,_imageCount:s,_expansions:n,images:t,showRecommendation:i}=e,{onSubmit:u,...c}=r;return{...c,images:t,loadImages:async()=>m(o,n,s),onSubmit:async e=>{let a=t.reduce((e,a)=>(e[a.ImageKey]=a.Uri,e),{}),r=e.map(e=>a[e]?a[e]:null).filter(e=>e);return u(r)},showRecommendation:i}}))(r.default);exports.default=t}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-image-picker","sm-com-lb-selectors","sm-page-selectors","sm-album-image-picker-actions","sm-api-redux-selectors"]});
YUI.add("sm-com-lb-image-picker-header",(function(e){SM.currentModule="sm-com-lb-image-picker-header";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-banner")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),u=babelHelpers.interopRequireDefault(t("sm-component-busy")),o=babelHelpers.interopRequireDefault(t("sm-pretty-pluralize"));function r(t){let{onCancel:a,onSubmit:r,selection:c,selectableMaxCount:s,minCount:m,maxCount:i,showRecommendation:d,onSelectAll:f,imageCount:p}=t,[b,C]=(0,e.useState)(),[h,S]=(0,e.useState)(!1),M=c.length;let R=m-M,g=Math.max(0,R),y="Please select at least ".concat(g," ").concat(R===m?"":"more"," ").concat((0,o.default)(g,"photo"),".");return M>0&&0===g&&(y="".concat(M," ").concat((0,o.default)(M,"photo")," selected.")),y="".concat(y," Make sure to select all the photos you might want to use."),d&&(y="".concat(y," The design supports up to ").concat(i," ").concat((0,o.default)(i,"photo"),".")),e.default.createElement("div",{className:"sm-card-picker-image-picker-header-actions"},b?e.default.createElement(l.default,{type:l.default.TYPE_ERROR},b):null,e.default.createElement("div",{className:"sm-flex sm-flex-justify-between sm-flex-items-center sm-flex-column sm-flex-row-large-and-up"},e.default.createElement("h2",{className:"sm-card-picker-image-picker-header-title"},y),e.default.createElement("div",{className:"sm-flex sm-flex-no-shrink"},f?e.default.createElement(n.default,{skin:n.default.SKIN_SECONDARY,onClick:f},M!==p?"Select all":"Unselect All"):null,a&&e.default.createElement(n.default,{skin:n.default.SKIN_PRIMARY,onClick:a},"Cancel"),e.default.createElement(n.default,{skin:n.default.SKIN_ACCENT,onClick:function(){M>s?C("Too many images selected, select up to ".concat(s," ").concat((0,o.default)(s,"image"))):M<m?C("Too few images selected, please select ".concat(m-M," more")):(C(),S(!0),r(c).catch(()=>{C("Error creating your card, please try again"),S(!1)}))},disabled:h},h?e.default.createElement(u.default,null):"Let's Go"))))}r.displayName="ComLB.Cards.ImagePickerHeader",r.propTypes={imageCount:a.default.number.isRequired,selection:a.default.array.isRequired,selectableMaxCount:a.default.number,minCount:a.default.number,maxCount:a.default.number,showRecommendation:a.default.bool,onSubmit:a.default.func.isRequired,onCancel:a.default.func,onSelectAll:a.default.func},r.defaultProps={selectableMaxCount:Number.POSITIVE_INFINITY,minCount:1}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-banner","sm-component-button","sm-component-busy","sm-pretty-pluralize"]});
YUI.add("sm-com-lb-image-picker",(function(e){SM.currentModule="sm-com-lb-image-picker";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-com-lb-image-picker-header")),r=babelHelpers.interopRequireDefault(t("sm-album-image-picker-container")),i=babelHelpers.interopRequireDefault(t("sm-banner")),n=babelHelpers.interopRequireDefault(t("sm-component-busy")),s=babelHelpers.interopRequireDefault(t("sm-smuglog"));class o extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"state",{selection:[...this.props.initiallySelectedImageKeys],loadError:!1,isLoading:!0,pickerKey:0}),babelHelpers.defineProperty(this,"_loadImages",async()=>{let{loadImages:e}=this.props;try{await e(),this.setState({isLoading:!1})}catch(e){s.default.add("sm-com-lb-image-picker",{error:e,message:"Error loading album images"},s.default.LEVEL_ERROR),this.setState({loadError:!0,isLoading:!1})}}),babelHelpers.defineProperty(this,"_setSelection",e=>{this.setState({selection:e})}),babelHelpers.defineProperty(this,"_onSelectAllClick",()=>{let e=this.state.pickerKey+1,t=[];this.state.selection.length!==this.props.images.length&&(t=this.props.images.map(e=>e.ImageKey)),this.setState({selection:t,pickerKey:e})}),babelHelpers.defineProperty(this,"_renderLoadErrorBanner",()=>e.default.createElement(i.default,{type:i.default.TYPE_WARNING},e.default.createElement("p",null,"There was an error retrieving some images, the list below may be incomplete"))),babelHelpers.defineProperty(this,"_renderLoadingSpinner",()=>e.default.createElement("div",{className:"sm-card-picker-image-picker-loading sm-flex"},e.default.createElement(n.default,null)))}componentDidMount(){this._loadImages()}componentWillUnmount(){this.setState=()=>{}}render(){let{images:t,onSubmit:a,onCancel:i,selectableMaxCount:n,minCount:s,maxCount:o,showRecommendation:m}=this.props,{selection:u,loadError:c,isLoading:d}=this.state;return e.default.createElement("main",{className:"sm-card-picker-image-picker sm-flex sm-flex-column"},c?this._renderLoadErrorBanner():null,e.default.createElement(l.default,{selection:u,onCancel:i,onSubmit:a,selectableMaxCount:n,minCount:s,maxCount:o,showRecommendation:m,onSelectAll:!d&&t.length<=n?this._onSelectAllClick:null,imageCount:t.length}),e.default.createElement("div",{className:"sm-card-picker-image-picker-selection-container sm-flex"},e.default.createElement(r.default,{images:t,onChange:this._setSelection,initiallySelectedImageKeys:u,key:this.state.pickerKey})),d?this._renderLoadingSpinner():null)}}exports.default=o,o.displayName="ComLB.Cards.ImagePicker",o.propTypes={initiallySelectedImageKeys:a.default.arrayOf(a.default.string),images:a.default.arrayOf(a.default.object).isRequired,onCancel:a.default.func,onSubmit:a.default.func.isRequired,selectableMaxCount:a.default.number,minCount:a.default.number,maxCount:a.default.number,showRecommendation:a.default.bool,loadImages:a.default.func},o.defaultProps={initiallySelectedImageKeys:[]}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-image-picker-header","sm-album-image-picker-container","sm-banner","sm-component-busy","sm-smuglog"]});
YUI.add("sm-com-lb-image-thumbnail-wrapper",(function(e){SM.currentModule="sm-com-lb-image-thumbnail-wrapper";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-cropped-image-thumbnail")),i=t("sm-com-lb-selectors"),a=t("sm-com-lb-crop-selectors"),o=t("sm-image-cropper-helpers"),l=t("sm-com-lb-constants");var m=(0,e.connect)((function(e,{location:t,containerWidth:r,containerHeight:m,imageUri:s}){let n=t.pathname.replace("/".concat(l.CONFIRMATION_URL_STRING),""),d=!t.pathname.includes(l.CONFIRMATION_URL_STRING),h=(0,i.getProductUriToPreview)(e),c=(0,a.getPrintmarkForItem)(e,s),p=t.pathname.includes("printmarked"),u=!d&&c||p?c:null,g=(0,i.getImageSize)(e,s,r,m),b=(0,a.getOriginalSizeForImage)(e,s),M={width:g.DisplayWidth,height:g.DisplayHeight},f=M.width/b.width;if(d&&!h)return{height:M.height,width:M.width,imageUrl:g.Url,printmarkUri:u,displayHeight:M.height,displayWidth:M.width,productPreviewMode:d};d&&(n=(0,i.getProductUrlPath)(e,s,h));let{skuEntity:w,product:I,vendorID:U}=(0,i.getProductDataForImageUri)(e,s,n)||{},k=I.Name&&I.Name.indexOf("Round ")>-1,R=(0,a.getCropData)(e,s,n,d);w.canCrop||(R={height:b.height,width:b.width,top:0,left:0});let S=(0,a.getCropMaskAttributes)(e,s,w,I,n,d);return S=(0,o.scaleMaskAttributes)(S,f),R=(0,o.scaleCropAttributes)(R,f),c=(0,a.getPrintmarkForItem)(e,s,w.Uri),{imageUrl:g.Url,height:R.height,width:R.width,offsetLeft:R.left,offsetTop:R.top,maskRotation:R.rotation,maskRotationMatters:w.RotationMatters,printmarkUri:u,displayHeight:M.height,displayWidth:M.width,perimeterHeight:S.perimeterHeight,perimeterWidth:S.perimeterWidth,perimeterIsRound:k,vendorID:U,sku:w.Sku}}))(r.default);exports.default=m}(),SM.currentModule=null}),"",{requires:["react-redux","sm-cropped-image-thumbnail","sm-com-lb-selectors","sm-com-lb-crop-selectors","sm-image-cropper-helpers","sm-com-lb-constants"]});
YUI.add("sm-com-lb-inline-image-cropper-container",(function(e){SM.currentModule="sm-com-lb-inline-image-cropper-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),o=babelHelpers.interopRequireDefault(r("sm-com-lb-inline-image-cropper")),t=r("sm-com-lb-selectors-url-mapper"),i=r("sm-com-lb-selectors-common"),l=r("sm-com-lb-selectors");var n=(0,e.connect)((function(e,{location:r,imageUri:o,showAlbumSkus:n}){let c=(0,i.getSkusForAlbumImageUri)(e,o,{includeAlbums:n})||[],{skuUri:a}=(0,t.getEntityUriForUrlPath)(e,r.pathname,c)||{};return{skuDisabled:(0,l.canAddToCartAgain)(e,o,a)}}),void 0,(function(e,r,o){let{skuDisabled:t}=e,{history:i,location:l,imageUri:n}=o,c="".concat(l.pathname,"/qty");return{onSubmit:()=>{i.push({pathname:c,state:{direction:"forward"}})},skuDisabled:t,location:l,history:i,imageUri:n}}))(o.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-inline-image-cropper","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-common","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-inline-image-cropper",(function(e){SM.currentModule="sm-com-lb-inline-image-cropper";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-component-button")),i=babelHelpers.interopRequireDefault(r("sm-com-lb-image-cropper-wrapper-container")),a=babelHelpers.interopRequireDefault(r("sm-com-lb-already-in-cart"));function o(r){let{onSubmit:t,skuDisabled:o,imageUri:n,location:u,history:c}=r;if(o){const r=()=>c.push("/");return e.default.createElement(a.default,{navigateToRoot:r})}return e.default.createElement("div",{className:"sm-com-lb-inline-cropper sm-flex sm-flex-column"},e.default.createElement(l.default,{onClick:t,skin:l.default.SKIN_PRIMARY},"Continue"),e.default.createElement(i.default,{imageUri:n,location:u,history:c}))}o.propTypes={onSubmit:t.default.func.isRequired,imageUri:t.default.string.isRequired,location:t.default.object.isRequired,history:t.default.object.isRequired},o.displayName="ComLB.InlineImageCropper"}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-com-lb-image-cropper-wrapper-container","sm-com-lb-already-in-cart"]});
YUI.add("sm-com-lb-no-product-available-container",(function(e){SM.currentModule="sm-com-lb-no-product-available-container";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l("react-redux"),a=babelHelpers.interopRequireDefault(l("sm-com-lb-no-product-available")),c=l("sm-com-lb-constants"),o=l("sm-com-lb-helpers"),t=l("sm-album-selectors"),s=l("sm-batch-add-actions"),r=l("sm-com-lb-selectors-common"),n=l("sm-com-lb-selectors");const m=new Set(["jpg","jpeg","gif","png"]);var u=(0,e.connect)((function(e,{imageUri:l,hasPackagesAvailable:a}){let o,s,u=(0,n.getImageType)(e,l);return u=m.has(u.toLowerCase())?c.NO_PRODUCT_AVAILABLE.IMAGE_TYPE:c.NO_PRODUCT_AVAILABLE.VIDEO_TYPE,a&&(o=(0,t.getSourceOrContextAlbum)(e,l),s=o.AlbumKey),{_albumKey:s,batchAddFlowEnabled:(0,r.isBatchAddFlowEnabled)(e),imageType:u,hasPackagesAvailable:a}}),(function(e){return{onUnselectAllClick:()=>e((0,s.selectBatchAddItems)([],!0))}}),(e,l)=>{let{_albumKey:a,...c}=e;return{...c,...l,onPackageTextClick:()=>{(0,o.launchPackages)(a)}}})(a.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-no-product-available","sm-com-lb-constants","sm-com-lb-helpers","sm-album-selectors","sm-batch-add-actions","sm-com-lb-selectors-common","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-no-product-available",(function(e){SM.currentModule="sm-com-lb-no-product-available";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=babelHelpers.interopRequireDefault(l("react")),a=babelHelpers.interopRequireDefault(l("prop-types")),t=l("sm-com-lb-constants"),r=babelHelpers.interopRequireDefault(l("sm-icon")),n=babelHelpers.interopRequireDefault(l("sm-component-button")),c=babelHelpers.interopRequireDefault(l("sm-link"));function o(l){let{batchAddFlowEnabled:a,onPackageTextClick:o,onUnselectAllClick:s,imageType:u,hasPackagesAvailable:m}=l;return e.default.createElement("div",{className:"sm-com-lb-no-product-available sm-flex sm-flex-column","data-testid":"sm_com_lb_no_product_available_slide"},e.default.createElement("div",{className:"sm-com-lb-no-product-available-content sm-flex sm-flex-column sm-flex-justify-center sm-flex-items-center"},e.default.createElement(r.default,{className:"sm-com-lb-no-product-available-icon",name:"InfoEncircled"}),a?e.default.createElement(e.default.Fragment,null,e.default.createElement("p",{className:"sm-text-center sm-mb-3"},"No products are available ",e.default.createElement("br",null),"for this selection. Try",e.default.createElement("br",null),"selecting fewer items."),e.default.createElement("p",{className:"sm-text-center"},"Or ",e.default.createElement(c.default,{href:"#",onClick:e=>{e.preventDefault(),s()}},"Unselect All")," and start over.")):e.default.createElement("p",{className:"sm-text-center"},"No products are available ",e.default.createElement("br",null),"for this ",u,"."),!a&&m&&u!==t.NO_PRODUCT_AVAILABLE.VIDEO_TYPE&&e.default.createElement(n.default,{noChrome:!0,className:"sm-com-lb-no-product-maybe-packages sm-text-center",onClick:o},"This ",u," may be available ",e.default.createElement("br",null),"as part of a Print Package.")))}o.displayName="ComLb.NoProductAvailable",o.propTypes={batchAddFlowEnabled:a.default.bool.isRequired,imageType:a.default.oneOf([t.NO_PRODUCT_AVAILABLE.IMAGE_TYPE,t.NO_PRODUCT_AVAILABLE.VIDEO_TYPE]).isRequired,hasPackagesAvailable:a.default.bool,onPackageTextClick:a.default.func}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-constants","sm-icon","sm-component-button","sm-link"]});
YUI.add("sm-com-lb-package-modal-container",(function(e){SM.currentModule="sm-com-lb-package-modal-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-package-modal")),l=r("react-redux"),a=r("sm-com-lb-helpers"),o=r("sm-album-selectors"),c=r("sm-page-selectors");var s=(0,l.connect)((function(e,{imageUri:r}){let l=(0,o.getSourceOrContextAlbum)(e,r).AlbumKey;return{showDisabledForMobileMessage:!(0,c.viewportIsGreaterThanMedium)(e),onClick:()=>{(0,a.launchPackages)(l)}}}))(e.default);exports.default=s}(),SM.currentModule=null}),"",{requires:["sm-com-lb-package-modal","react-redux","sm-com-lb-helpers","sm-album-selectors","sm-page-selectors"]});
YUI.add("sm-com-lb-package-modal",(function(e){SM.currentModule="sm-com-lb-package-modal";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("prop-types")),l=babelHelpers.interopRequireDefault(a("react")),t=babelHelpers.interopRequireDefault(a("sm-component-button"));const s=e=>{let{onClick:a,showDisabledForMobileMessage:s}=e;return l.default.createElement(t.default,{disabled:s,className:"sm-com-lb-packages-button sm-flex sm-flex-column",onClick:a,"data-testid":"sm_com_lb_buy_packages",size:t.default.SIZE_LARGE},l.default.createElement("span",null,"Buy Print Package"),s&&l.default.createElement("span",{className:"sm-com-lb-packages-disabled-message sm-label-small"},"Unavailable on Mobile Devices"))};s.displayName="ComLB.PackageModalButton",s.propTypes={onClick:e.default.func.isRequired,showDisabledForMobileMessage:e.default.bool};var o=s;exports.default=o}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button"]});
YUI.add("sm-com-lb-post-cart-buttons-container",(function(e){SM.currentModule="sm-com-lb-post-cart-buttons-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("sm-com-lb-post-cart-buttons")),l=t("sm-api-redux-selectors"),n=t("sm-webview");var u=(0,e.connect)((function(e,{imageUri:t}){let r,o=(0,l.getExpansion)(e,t,"Album");return o&&(r=o.WebUri),{_albumWebUri:r,showReturnToGallery:!!r}}),(function(e){return{_onReturnGalleryClick:()=>{},_onViewCartClick:()=>{}}}),(function(e,t,o){let{_albumWebUri:l,...u}=e;return{...u,...o,onReturnGalleryClick:()=>{t._onReturnGalleryClick(),r.default.doc.location=l},onViewCartClick:()=>{t._onViewCartClick(),(0,n.sendWebviewMessage)({type:"commerceLightboxViewCartClicked"}),r.default.doc.location=SM.env.host.cartUrl}}}))(o.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-dom","sm-com-lb-post-cart-buttons","sm-api-redux-selectors","sm-webview"]});
YUI.add("sm-com-lb-post-cart-buttons",(function(e){SM.currentModule="sm-com-lb-post-cart-buttons";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-component-button"));function o(t){let{onBuyMoreClick:l,onReturnGalleryClick:o,onViewCartClick:u,showReturnToGallery:a}=t;return e.default.createElement("div",{className:"sm-com-lb-post-cart-add-buttons sm-flex sm-flex-column sm-button-stacked-group"},e.default.createElement(r.default,{skin:r.default.SKIN_ACCENT,size:r.default.SIZE_LARGE,title:"View shopping cart","data-testid":"com_lb_sidebar_view_cart_button",onClick:u},"View shopping cart"),e.default.createElement(r.default,{skin:r.default.SKIN_PRIMARY,size:r.default.SIZE_LARGE,title:"Continue shopping","data-testid":"com_lb_sidebar_buy_more_photos_button",onClick:l},"Continue shopping"),a&&e.default.createElement(r.default,{className:"sm-com-lb-return-to-gallery",noChrome:!0,title:"Return to gallery","data-testid":"com_lb_sidebar_return_to_gallery",onClick:o},"Return to gallery"))}o.displayName="ComLB.PostCartButtons",o.propTypes={onBuyMoreClick:l.default.func.isRequired,onReturnGalleryClick:l.default.func.isRequired,onViewCartClick:l.default.func.isRequired,showReturnToGallery:l.default.bool.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button"]});
YUI.add("sm-com-lb-print-watermark-banner-container",(function(e){SM.currentModule="sm-com-lb-print-watermark-banner-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=r("sm-com-lb-crop-selectors"),n=r("sm-com-lb-selectors-common"),o=r("sm-com-lb-constants"),c=r("sm-com-lb-selectors-url-mapper"),a=babelHelpers.interopRequireDefault(r("sm-com-lb-print-watermark-banner"));var m=(0,e.connect)((function(e,{imageUri:r,location:a}){let m=a.pathname.replace("/".concat(o.CONFIRMATION_URL_STRING),""),l=(0,n.getSkusForAlbumImageUri)(e,r,{includeAlbumSkus:!0})||[],{skuUri:s}=(0,c.getEntityUriForUrlPath)(e,m,l)||{};return{message:(0,t.getMarkBannerMessage)(e,r,s)||""}}),(function(){return{}}))(a.default);exports.default=m}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-crop-selectors","sm-com-lb-selectors-common","sm-com-lb-constants","sm-com-lb-selectors-url-mapper","sm-com-lb-print-watermark-banner"]});
YUI.add("sm-com-lb-print-watermark-banner",(function(e){SM.currentModule="sm-com-lb-print-watermark-banner";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),n=babelHelpers.interopRequireDefault(r("sm-banner"));function a({message:r}){return r?e.default.createElement(n.default,null,e.default.createElement("p",null,r)):null}a.displayName="ComLB.Print/WatermarkBanner",a.propTypes={message:t.default.string.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-banner"]});
YUI.add("sm-com-lb-product-list-container",(function(e){SM.currentModule="sm-com-lb-product-list-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-product-list")),s=r("reselect"),o=r("lodash"),t=r("react-redux"),l=r("sm-page-selectors"),c=r("sm-com-lb-selectors-url-mapper"),a=r("sm-com-lb-constants"),u=r("sm-com-lb-cropper-actions"),m=r("sm-catalog-selectors"),i=r("sm-batch-add-selectors"),n=r("sm-com-lb-selectors-common"),d=r("sm-com-lb-selectors");const b=(0,s.createSelectorCreator)(s.defaultMemoize,o.isEqual)([(e,r)=>s=>e.push({pathname:r[s],state:{direction:"forward"}})],e=>e);let g=(0,d.makeMemoizedGetMoreInfoImages)();var p=(0,t.connect)((function(e,{location:r,imageUri:s,showAlbumSkus:o}){let t,u;if((0,n.isBatchAddFlowEnabled)(e)){let r=(0,i.getBatchAddAlbumImagesUriByAlbumImage)(e,s),l=(0,i.getBatchAddAlbumImages)(e,r);t=(0,i.getBatchAddSkusForItemSelection)(e,r,{includeAlbumSkus:o});let{availableKeys:c=[]}=(0,i.getBatchAddImageAvailabilityForSkus)(e,l,t),a=l.filter(e=>c.includes(e.ImageKey));u=(0,d.getPricelistExclusionsUrisForAlbumImages)(e,a,{includeAlbumSkus:o})}else t=(0,n.getSkusForAlbumImageUri)(e,s,{includeAlbumSkus:o}),u=(0,d.getPricelistExclusionsUrisForAlbumImageUri)(e,s,{includeAlbumSkus:o});let b=r.pathname,{subcategoryUri:p}=(0,c.getEntityUriForUrlPath)(e,b,t)||{},A=a.SUBCATEGORY_HACKS.has(p),S=(0,m.isAlbums)(e,p),{productUris:U,_productUrls:I}=(0,d.memoizedGetProductUris)(e,t,p,{renderAsSubcategory:A}),h=[],M=[];return S&&({moreInfoImages:h,preloadImageUrls:M}=g(e,p,(0,l.viewportIsGreaterThanMedium)(e))||{}),{moreInfoImages:h,preloadImageUrls:M,productUris:U,exclusionsUris:u,_productUrls:I,renderAsSubcategory:A}}),(function(e){return{_onMouseLeave:()=>{e((0,u.clearProductUriToPreview)())}}}),(function({_productUrls:e,...r},s,{history:o,...t}){return{...t,...r,...s,onMouseLeave:()=>{s._onMouseLeave()},onClick:b(o,e)}}))(e.default);exports.default=p}(),SM.currentModule=null}),"",{requires:["sm-com-lb-product-list","reselect","lodash","react-redux","sm-page-selectors","sm-com-lb-selectors-url-mapper","sm-com-lb-constants","sm-com-lb-cropper-actions","sm-catalog-selectors","sm-batch-add-selectors","sm-com-lb-selectors-common","sm-com-lb-selectors"]});
YUI.add("sm-com-lb-product-list-item-container",(function(e){SM.currentModule="sm-com-lb-product-list-item-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("memoize-one")),r=babelHelpers.interopRequireDefault(t("sm-com-lb-product-list-item")),o=babelHelpers.interopRequireDefault(t("prop-types")),s=t("react-redux"),i=t("sm-api-redux-selectors"),c=t("sm-catalog-model-helpers"),l=t("sm-com-lb-selectors-item-formatter"),u=t("sm-com-lb-cropper-actions"),n=t("sm-catalog-selectors"),a=t("sm-pricelist-selectors");const m=(0,e.default)(a.getCombinedFilteredPricelistPrices);const d=(0,s.connect)((function(e,{uri:t,exclusionsUris:r=[]}){let o=(0,i.getApiState)(e),s=(0,n.getProductByUri)(o,t),{CatalogSubCategory:u}=null==s?void 0:s.Uris,d=(0,n.isAlbums)(o,u),{name:p,shortName:f,cmDims:b}=(0,l.getPrettyProduct)(o,s);f&&p!==f&&(p=f);let M=m(o,r),g=(0,a.getLowestPriceForProduct)(e,M,t),{price:y,currency:P}=(0,c.toSkuPrice)(g||{});return{displayStartingAt:d,name:p,price:y,currency:P,altDimensions:b&&"(".concat(b.join(" x ")," cm)")}}),e=>({_onMouseEnter:t=>{e((0,u.setProductUriToPreview)(t))}}),(function(e,t,{uri:r,onClick:o}){return{...e,onMouseEnter:()=>{t._onMouseEnter(r)},onClick:()=>{o&&o(r)}}}))(r.default);d.propTypes={exclusionsUris:o.default.arrayOf(o.default.string),onClick:o.default.func.isRequired,onMouseEnter:o.default.func,uri:o.default.string.isRequired};var p=d;exports.default=p}(),SM.currentModule=null}),"",{requires:["memoize-one","sm-com-lb-product-list-item","prop-types","react-redux","sm-api-redux-selectors","sm-catalog-model-helpers","sm-com-lb-selectors-item-formatter","sm-com-lb-cropper-actions","sm-catalog-selectors","sm-pricelist-selectors"]});
YUI.add("sm-com-lb-product-list-item",(function(e){SM.currentModule="sm-com-lb-product-list-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("sm-component-currency-amount")),a=babelHelpers.interopRequireDefault(t("sm-com-lb-components-list-item")),s=t("sm-test-helpers");const n=e=>{let{altDimensions:t,name:n,onClick:u,price:i,currency:m,displayStartingAt:c,...o}=e;return l.default.createElement(a.default,babelHelpers.extends({onClick:u,"data-testid":(0,s.toTestId)("com_lb_sidebar_".concat(n,"_button")),className:"sm-flex-nowrap",tooltipText:n},o),l.default.createElement("h3",null,n," ",t?l.default.createElement("small",{className:"sm-com-lb-alt-dimensions"},t):null),c?l.default.createElement("div",{className:"sm-text-right"},l.default.createElement("span",{className:"sm-semi-muted"},l.default.createElement("i",null,"Starting at:")),l.default.createElement(r.default,{className:"sm-com-lb-price",amount:i,currency:m})):l.default.createElement(r.default,{className:"sm-com-lb-price",amount:i,currency:m}))};n.displayName="ComLB.ProductListItem",n.propTypes={altDimensions:e.default.string,name:e.default.string.isRequired,price:e.default.number.isRequired,currency:e.default.string.isRequired,displayStartingAt:e.default.bool,onClick:e.default.func.isRequired},n.defaultProps={displayStartingAt:!1};var u=n;exports.default=u}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-currency-amount","sm-com-lb-components-list-item","sm-test-helpers"]});
YUI.add("sm-com-lb-product-list",(function(e){SM.currentModule="sm-com-lb-product-list";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-com-lb-subcategory-list-item-container")),a=babelHelpers.interopRequireDefault(r("sm-com-lb-product-list-item-container")),s=babelHelpers.interopRequireDefault(r("sm-product-image-gallery"));class o extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_firstButtonRef",e.default.createRef())}componentDidMount(){var e,r,t;null===(e=this._firstButtonRef)||void 0===e||null===(r=e.current)||void 0===r||null===(t=r.firstChild)||void 0===t||t.focus()}render(){let{preloadImageUrls:r,moreInfoImages:t,productUris:o,onClick:u,onMouseLeave:i,renderAsSubcategory:n,exclusionsUris:d}=this.props;if(o.length<=1)return null;let c=n?l.default:a.default;return e.default.createElement("ul",{className:"sm-com-lb-product-list sm-com-lb-list",ref:this._listRef,tabIndex:"1",onMouseLeave:i},!!t.length&&e.default.createElement("li",{key:t[0].mainImage,className:"sm-com-lb-product-list-folded-card-display",onMouseEnter:i},e.default.createElement(s.default,{moreInfoImages:t,preloadImageUrls:r})),o.map((r,t)=>e.default.createElement("li",{key:r,ref:0===t&&this._firstButtonRef},e.default.createElement(c,{uri:r,onClick:u,exclusionsUris:d}))))}}babelHelpers.defineProperty(o,"displayName","CommerceLB.ProductList"),babelHelpers.defineProperty(o,"propTypes",{productUris:t.default.arrayOf(t.default.string).isRequired,onClick:t.default.func.isRequired,renderAsSubcategory:t.default.bool,exclusionsUris:t.default.arrayOf(t.default.string),preloadImageUrls:t.default.arrayOf(t.default.string),moreInfoImages:t.default.arrayOf(t.default.shape({mainImage:t.default.string,thumbnail:t.default.string})),onMouseLeave:t.default.func}),babelHelpers.defineProperty(o,"defaultProps",{renderAsSubcategory:!1,exclusionsUris:[],onMouseLeave:()=>{},moreInfoImages:[{mainImage:"",thumbnail:""}],preloadImageUrls:[]});var u=o;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-subcategory-list-item-container","sm-com-lb-product-list-item-container","sm-product-image-gallery"]});
YUI.add("sm-com-lb-reducers",(function(e){SM.currentModule="sm-com-lb-reducers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return[i,u,m,_,l].reduce((e,r)=>r(e,t),e)};var e=babelHelpers.interopRequireWildcard(t("sm-com-lb-action-types")),r=t("sm-lightbox-action-types"),c=t("sm-com-lb-selectors-common"),a=t("sm-image-cropper-helpers"),o=t("sm-com-lb-crop-selectors");function i(t,r){switch(r.type){case e.COM_LB_CLEAR_ERROR_MESSAGES:case e.COM_LB_ADD_TO_CART_BUSY_START:{let{errors:e,...r}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:r}}}case e.COM_LB_ADD_ERROR_MESSAGE:{let{errors:e=[],...a}=(0,c.getUIState)(t);return e.includes(r.message)||(e=[...e,r.message]),{...t,ui:{...t.ui||{},commerceLightbox:{...a,errors:e}}}}default:return t}}function u(t,r){switch(r.type){case e.COM_LB_ADD_TO_CART_BUSY_START:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,addToCartBusy:!0}}}}case e.COM_LB_ADD_TO_CART_BUSY_DONE:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,addToCartBusy:!1,comLbCartUri:r.comLbCartUri||e.comLbCartUri}}}}case e.COM_LB_STORE_CONFIRMATION_IMAGE_URI:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,confirmationImageUri:r.imageUri}}}}default:return t}}function m(t,r){switch(r.type){case e.COM_LB_ROTATE_CROP:{let{_imageUri:e,cropObjectKey:i}=r,u=(0,c.getUIState)(t),{cropData:m}=u,_=(0,o.getCropData)(t,e,r.locationPathname),l=(0,o.getOriginalSizeForImage)(t,e),s={...m,[i]:(0,a.rotateCrop)(_,l)};return{...t,ui:{...t.ui||{},commerceLightbox:{...u,cropData:s}}}}case e.COM_LB_RESET_CROP:{let{_imageUri:e,cropObjectKey:a}=r,i=(0,c.getUIState)(t),{cropData:u={}}=i,m={...u,[a]:(0,o.getDefaultCrop)(t,e,r.locationPathname)};return{...t,ui:{...t.ui||{},commerceLightbox:{...i,cropData:m}}}}case e.COM_LB_UPDATE_CROP:{let e=r.cropObjectKey,a=(0,c.getUIState)(t),{cropData:o={}}=a,i={...o,[e]:{...o[e]||{},...r.newCropData}};return{...t,ui:{...t.ui||{},commerceLightbox:{...a,cropData:i}}}}case e.COM_LB_SET_PRODUCT_PREVIEW:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,productUriToPreview:r._catalogProductUri}}}}case e.COM_LB_CLEAR_PRODUCT_PREVIEW:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,productUriToPreview:""}}}}default:return t}}function _(t,a){switch(a.type){case e.COM_LB_PRODUCT_IMAGE_GALLERY_URI_SET:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,productImageGalleryUri:a.productImageGalleryUri}}}}case r.RESET:case r.SET_MODE:case e.COM_LB_PRODUCT_IMAGE_GALLERY_URI_CLEAR:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,productImageGalleryUri:""}}}}default:return t}}function l(t,a){switch(a.type){case e.COM_LB_BATCH_ADD_FLOW_ENABLED:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,batchAddFlowEnabled:a.enabled,batchAddInitialImageUri:a.albumImageUri}}}}case r.RESET:{let{...e}=(0,c.getUIState)(t);return{...t,ui:{...t.ui||{},commerceLightbox:{...e,batchAddFlowEnabled:!1,batchAddInitialImageUri:""}}}}default:return t}}}(),SM.currentModule=null}),"",{requires:["sm-com-lb-action-types","sm-lightbox-action-types","sm-com-lb-selectors-common","sm-image-cropper-helpers","sm-com-lb-crop-selectors"]});
YUI.add("sm-com-lb-router-redirect-container",(function(e){SM.currentModule="sm-com-lb-router-redirect-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=t("react-router"),a=t("sm-catalog-selectors"),o=t("sm-com-lb-selectors-url-mapper"),s=t("sm-com-lb-selectors-common"),c=t("sm-com-lb-selectors"),l=t("sm-com-lb-helpers"),i=t("sm-batch-add-selectors");const m=(0,e.connect)((function(e,{location:t,imageUri:r,showAlbumSkus:m}){let u,n,{pathname:d}=t,g=d,h=(0,s.isBatchAddFlowEnabled)(e);if(h){let t=(0,i.getBatchAddAlbumImages)(e,(0,i.getBatchAddAlbumImagesUriByAlbumImage)(e,r));u=(0,i.isDataLoadingForImages)(e,t)}else u=(0,c.isDataLoading)(e,r);if(u||g.startsWith("/cards/greeting-cards")||g.startsWith("/albums/albums"))return{};n=h?(0,i.getBatchAddSkusByAlbumImageUri)(e,r,{includeAlbumSkus:m}):(0,s.getSkusForAlbumImageUri)(e,r,{includeAlbumSkus:m});let f=d.endsWith("/qty");if(d.endsWith("/confirmation")){let t=(0,c.getConfirmationImageUri)(e);return t&&t!==r?{from:d,to:(0,o.getNearestValidUrlPath)(e,d,n),exact:!0}:{}}f&&(g=(0,l.removeSpecialRoutes)(d));let{categoryUri:b,subcategoryUri:U,productUri:p,skuUri:S}=(0,o.getEntityUriForUrlPath)(e,g,n)||{};if(S){let t=(0,c.needsInlineCropper)(e)&&!(0,c.needsInlineCropper)(e,S);return!f&&t?{from:d,to:{pathname:(0,l.buildQtyPickerUrl)(d),state:{direction:"forward"}},exact:!0}:{}}if(p){let t=(0,a.getProductByUri)(e,p),r=(0,a.getCatalogSkusForProduct)(e,n,t)||[];switch(r.length){case 0:return{from:d,to:(0,o.getNearestValidUrlPath)(e,d,n),exact:!0};case 1:return{from:d,to:{pathname:(0,o.getUrlPathForSku)(e,r[0].Uri),state:{direction:"forward"}},exact:!0}}return{}}if(U){let t=(0,a.getSubcategoryByUri)(e,U),r=((0,a.getCatalogProductsForSubcategory)(e,n,t)||[]).map(({Uri:e})=>e);switch(r.length){case 0:return{from:d,to:(0,o.getNearestValidUrlPath)(e,d,n),exact:!0};case 1:return{from:d,to:{pathname:(0,o.getUrlPathForProduct)(e,r[0]),state:{direction:"forward"}},exact:!0}}}else if(b){let t=(0,a.getCategoryByUri)(e,b),r=((0,a.getCatalogSubcategoriesForCategory)(e,n,t)||[]).map(({Uri:e})=>e);switch(r.length){case 0:return{from:d,to:"/start",exact:!0};case 1:return{from:d,to:{pathname:(0,o.getUrlPathForSubcategory)(e,r[0]),state:{direction:"forward"}},exact:!0}}}else{if("/"!==d&&"/start"!==d){let t=(0,o.getNearestValidUrlPath)(e,d,n);return"/"===t&&(t="/start"),{from:d,to:{pathname:t},exact:!0}}{let t=((0,a.getCatalogCategories)(e,n)||[]).map(({Uri:e})=>e);switch(t.length){case 1:return m?{}:{from:d,to:{pathname:(0,o.getUrlPathForCategory)(e,t[0]),state:{direction:"forward"}},exact:!0}}}}return{}}))(r.Redirect);m.displayName="CommerceLB.Router.Redirect";var u=m;exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","react-router","sm-catalog-selectors","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-com-lb-helpers","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-selectors-common",(function(e){SM.currentModule="sm-com-lb-selectors-common";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUIState=c,exports.getBatchAddState=g,exports.isBatchAddFlowEnabled=m,exports.getBatchAddSelectedItemKeys=d,exports.hasPackagesAvailable=f,exports.getAlbumPricelistSkusForImageUri=I,exports.getSkusForAlbumImageUri=b,exports.hasCardsEnabled=C,exports.hasAlbumsEnabled=P,exports.getCatalogDisplayTypeForSkus=p,exports.getCatalogDisplayType=U,exports.getProductImageGalleryUri=function(e={}){let{productImageGalleryUri:t=""}=c(e);return t},exports.isImageWatermarked=function(e,t){let{Watermarked:r=!1}=(0,n.getEntity)(e,t)||{};return r},exports.isImagePurchaseable=exports.getDiscountMessageForAlbumImage=exports.getDefaultImagePickerSelection=exports.getMemoizedPricelistSkusForImageUri=void 0;var e=babelHelpers.interopRequireDefault(t("memoize-one")),r=t("reselect"),l=t("sm-page-feature-flag-constants"),i=t("sm-com-lb-constants"),n=t("sm-api-redux-selectors"),o=t("sm-page-selectors"),s=t("sm-pricelist-selectors");const u=(0,e.default)(s.getPricelistSkusForImageUri);exports.getMemoizedPricelistSkusForImageUri=u;const a=(0,e.default)(s.getPricelistSkusForAlbumUri);function c(e){let{ui:{commerceLightbox:t={}}}=e;return t}function g(e){let{ui:{batchAdd:t={}}={}}=e;return t}function m(e={}){let{batchAddFlowEnabled:t=!1}=c(e);return t}function d(e){let{selected:t=[]}=g(e);return t}exports.getDefaultImagePickerSelection=(e,t)=>{let{ImageKey:r}=(0,n.getEntity)(e,t)||{},l=[r];if(m(e)){let t=d(e);l=t.length?t:l}return l};const A=(0,e.default)((e,t)=>{let r=(0,s.getPricelistExclusionsUriByImageUri)(e,t);if(!(0,s.isCatalogDiscounted)(e,r))return"";if("Wholesale"===(0,s.getDiscountLevel)(e,r))return"Employee wholesale catalog and prices";{let t=(0,o.isLoggedInUserAdmin)(e);return"".concat(t?"(ADMIN) ":"","Owner catalog and prices")}});function f(e,t){let{Packages:r=!1}=(0,n.getExpansion)(e,t,"Album")||{};return r}exports.getDiscountMessageForAlbumImage=A;exports.isImagePurchaseable=(e,t,{includeAlbumSkus:r=!1}={})=>U(e,t,{includeAlbumSkus:r})!==i.NONE_CATALOG_TYPE||f(e,t);const E=(0,r.createSelector)([u,I],(e=[],t=[])=>[...e,...t]);function I(e,t){let r=(0,n.getExpansion)(e,t,"Album");return r?a(e,r.Uri):[]}function b(e,t,{includeAlbumSkus:r=!1}={}){let l=(0,n.getApiState)(e);return r?E(l,t):u(l,t)}function S(e,t){if(!1===(0,o.getFeatureFlagValue)(e,l.WHCC_CARD_EDITOR_INTEGRATION))return!1;let r=(0,n.getEntity)(e,t),s="gif"===(null==r?void 0:r.Format.toLowerCase()),u=null==r?void 0:r.IsVideo,a=(null==r?void 0:r.OriginalHeight)<i.WHCC_MIN_IMAGE_HEIGHT||(null==r?void 0:r.OriginalWidth)<i.WHCC_MIN_IMAGE_WIDTH,c=(null==r?void 0:r.OriginalSize)>i.WHCC_MAX_FILE_SIZE,g=null==r?void 0:r.Watermarked;return!(s||u||a||c&&g)}function _(e,t){let r=(0,n.getEntity)(e,t);return"US"===(null==r?void 0:r.Country)}function C(e,t){let r=(0,s.getPricelistExclusionsUriByImageUri)(e,t),l=(0,s.getPrintVendorUriFromExclusions)(e,r);if(!S(e,t))return!1;if(l)return _(e,l);let i=(0,s.getPricelistUriFromExclusions)(e,r),{CardEnabled:o}=(0,n.getEntity)(e,i)||{};return Boolean(o)}function P(e,t){let r=(0,s.getPricelistExclusionsUriByImageUri)(e,t),l=(0,s.getPrintVendorUriFromExclusions)(e,r);if(!S(e,t))return!1;if(l)return _(e,l);let i=(0,s.getPricelistUriFromExclusions)(e,r),{FoldedCardEnabled:o}=(0,n.getEntity)(e,i)||{};return Boolean(o)}function p(e,t,{forceTreeCatalog:r=!1}={}){return 0===t.length?i.NONE_CATALOG_TYPE:t.length<=i.FLAT_CATALOG_THRESHOLD&&!r?i.FLAT_CATALOG_TYPE:i.TREE_CATALOG_TYPE}function U(e,t,{includeAlbumSkus:r=!1,isAndroidDevice:l=!1}={}){return p(0,b(e,t,{includeAlbumSkus:r}),{forceTreeCatalog:(C(e,t)||P(e,t))&&l})}}(),SM.currentModule=null}),"",{requires:["memoize-one","reselect","sm-page-feature-flag-constants","sm-com-lb-constants","sm-api-redux-selectors","sm-page-selectors","sm-pricelist-selectors"]});
YUI.add("sm-com-lb-selectors-item-formatter",(function(e){SM.currentModule="sm-com-lb-selectors-item-formatter";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrettySubcategory=function(t,u){let i,{name:s,description:n,uri:c}=(0,o.toSubcategory)(u)||{},l=(0,r.getExpansion)(t,c,"CatalogCategory"),g=(0,e.getSubcategoryProducts)(t,c);if(l&&g&&g.length>0){let o=g[0],r=((0,e.getProductSkus)(t,o.Uri)||[])[0],c=(0,e.getSkuTypeForSku)(t,r);if(r&&c){let{subcategoryName:e,subcategoryDescription:t,productOptionLabel:g}=(0,a.default)(r,c,o,u,l);s=e,i=g,n=t}}return{name:s,description:n,optionLabel:i}},exports.getPrettyProduct=u,exports.getPrettySku=function(t,i){let s=i&&(0,e.getSkuTypeForSku)(t,i),{name:n,description:c,uri:l}=(0,o.toSku)(i,s)||{},g=(0,r.getExpansion)(t,l,"CatalogProduct.CatalogCategory"),d=(0,r.getExpansion)(t,l,"CatalogProduct.CatalogSubCategory"),p=(0,r.getExpansion)(t,l,"CatalogProduct"),m=p.Name;if(g&&d&&p){let{itemFinish:e,finishDescription:o,productName:S}=(0,a.default)(i,s,p,d,g);if(n=e,c=o,m=S,!c){let e=(0,r.getExpansion)(t,l,"CatalogProduct");({description:c}=u(t,e))}}return{name:n,productName:m,description:c}};var e=t("sm-catalog-selectors"),o=t("sm-catalog-model-helpers"),r=t("sm-api-redux-selectors"),a=babelHelpers.interopRequireDefault(t("sm-catalog-helpers-hacks-redux"));function u(t,u){let i,s,{name:n,description:c,uri:l}=(0,o.toProduct)(u)||{},g=(0,r.getExpansion)(t,l,"CatalogCategory"),d=(0,r.getExpansion)(t,l,"CatalogSubCategory"),p=(0,e.getProductSkus)(t,l)||[],m=n;if(g&&d&&p.length>0){let o=p[0],r=(0,e.getSkuTypeForSku)(t,o),{productName:l,productShortName:S,productDescription:f,productOptionLabel:y,productCmDimensions:b}=(0,a.default)(o,r,u,d,g);n=l,m=S,c=f,i=y,s=b}return{name:n,shortName:m,description:c,optionLabel:i,cmDims:s}}}(),SM.currentModule=null}),"",{requires:["sm-catalog-selectors","sm-catalog-model-helpers","sm-api-redux-selectors","sm-catalog-helpers-hacks-redux"]});
YUI.add("sm-com-lb-selectors-url-mapper",(function(t){SM.currentModule="sm-com-lb-selectors-url-mapper";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEntityUriForUrlPath=i,exports.getAllEntityUrisForUrlPath=function(t,e="",n=[]){let i=e.split("/").filter(t=>t.length>0),o=i.length;switch(e="/".concat(i.join("/")),o){case 1:{let i=function(t,e,n=[]){let i=new Set,o=new Set;return n.forEach(({Uri:n}={})=>{let a=(0,r.getExpansion)(t,n,"CatalogProduct.CatalogCategory");a&&(o.has(a.Uri)||i.has(a.Uri)||(e!==c(t,a)?o.add(a.Uri):i.add(a.Uri)))}),Array.from(i)}(t,e,n);return(null==i?void 0:i.length)>0?{categoryUris:i}:void 0}case 2:{let i=function(t,e,n=[]){let i=new Set,o=new Set;return n.forEach(({Uri:n}={})=>{let a=(0,r.getExpansion)(t,n,"CatalogProduct.CatalogSubCategory");a&&(o.has(a.Uri)||o.has(a.Uri)||(e!==s(t,a)?o.add(a.Uri):i.add(a.Uri)))}),Array.from(i)}(t,e,n);return(null==i?void 0:i.length)>0?{subcategoryUris:i}:void 0}case 3:{let r=u(t,e,n);return(null==r?void 0:r.length)>0?{productUris:r}:void 0}case 4:{let i=function(t,e,n=[]){let i=e.split("/").slice(0,4).join("/"),o=u(t,i,n).flatMap(e=>(0,r.getExpansion)(t,e,"CatalogProductOptions"));if(!o.length)return;let a=o.filter(r=>e===d(t,r));if(!a.length)return;return a.reduce((t,e)=>{let r=e.Uri;return n.some(({Uri:t})=>t===r)?[...t,e.Uri]:t},[])}(t,e,n);return(null==i?void 0:i.length)>0?{skuUris:i}:void 0}default:return}},exports.getUrlPathForCategory=function(t,e){let n=(0,r.getEntity)(t,e);if(!n)return;if("Keepsakes"===n.Name){let n=((0,r.getExpansion)(t,e,"CatalogSubCategories")||[])[0];return o(t,n.Uri)}return c(t,n)},exports.getUrlPathForSubcategory=o,exports.getUrlPathForProduct=function(t,e){let n=(0,r.getEntity)(t,e);if(!n)return;return g(t,n)},exports.getUrlPathForSku=function(t,e){let n=(0,r.getEntity)(t,e);if(!n)return;return d(t,n)},exports.getNearestValidUrlPath=function t(e,r,n){let o=r.split("/");if(o.pop(),0===o.length)return"/";let a=o.join("/");return i(e,a,n)?a:t(e,a,n)};var t=babelHelpers.interopRequireDefault(e("lodash")),r=e("sm-api-redux-selectors");function n(t){return t.toLowerCase().replace(/[/\s_]+/g,"-").replace(/['"”.]/g,"")}function i(t,e="",n=[]){let i=e.split("/").filter(t=>t.length>0),o=i.length;switch(e="/".concat(i.join("/")),o){case 1:{let i=function(t,e,n=[]){let i,o=new Set;return n.some(({Uri:n}={})=>{let a=(0,r.getExpansion)(t,n,"CatalogProduct.CatalogCategory");if(a&&!o.has(a.Uri))return e===c(t,a)?(i=a.Uri,!0):void o.add(a.Uri)}),i}(t,e,n);return i?{categoryUri:i}:void 0}case 2:{let i=function(t,e,n=[]){let i,o=new Set;return n.some(({Uri:n}={})=>{let a=(0,r.getExpansion)(t,n,"CatalogProduct.CatalogSubCategory");if(a&&!o.has(a.Uri))return e===s(t,a)?(i=a.Uri,!0):void o.add(a.Uri)}),i}(t,e,n);return i?{subcategoryUri:i}:void 0}case 3:{let r=l(t,e,n);return r?{productUri:r}:void 0}case 4:{let i=function(t,e,n=[]){let i=e.split("/").slice(0,4).join("/"),o=l(t,i,n),a=(0,r.getExpansion)(t,o,"CatalogProductOptions");if(!a)return;let u=a.find(r=>e===d(t,r));if(u){let t=u.Uri;if(n.some(({Uri:e})=>e===t))return u.Uri}}(t,e,n);return i?{skuUri:i}:void 0}default:return}}function o(t,e){let n=(0,r.getEntity)(t,e);if(n)return s(t,n)}const a=t.default.memoize((function(t){return t.split("/").pop()}));function l(t,e,n=[]){let i,o=new Set;return n.some(({Uri:n}={})=>{let a=(0,r.getExpansion)(t,n,"CatalogProduct");if(a&&!o.has(a.Uri))return e===g(t,a)?(i=a.Uri,!0):void o.add(a.Uri)}),i}function u(t,e,n=[]){let i=new Set,o=new Set;return n.forEach(({Uri:n}={})=>{let a=(0,r.getExpansion)(t,n,"CatalogProduct");a&&(o.has(a.Uri)||i.has(a.Uri)||(e!==g(t,a)?o.add(a.Uri):i.add(a.Uri)))}),Array.from(i)}function c(t,e){let r=e.Uri,n=a(r);return"/".concat(n)}function s(t,e){let n=e.Uri,i=a(n),o=c(0,(0,r.getExpansion)(t,n,"CatalogCategory"));return"".concat(o,"/").concat(i)}function g(t,e){let i=e.Uri,o=e.Name;if(!o)return;let a=n(o),l=s(t,(0,r.getExpansion)(t,i,"CatalogSubCategory"));return"".concat(l,"/").concat(a)}function d(t,e){let i=e.Uri,{Name:o,Uri:l}=(0,r.getExpansion)(t,i,"CatalogSkuType");"card-matte"===a(l)&&(o="Card Matte"),o=n(o);let u=g(t,(0,r.getExpansion)(t,i,"CatalogProduct"));return"".concat(u,"/").concat(o)}a.cache=new Map}(),SM.currentModule=null}),"",{requires:["lodash","sm-api-redux-selectors"]});
YUI.add("sm-com-lb-selectors",(function(e){SM.currentModule="sm-com-lb-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFeaturedSkuByUri=function(e,t){let{Name:r=""}=(0,o.getExpansion)(e,t,"CatalogProduct")||{},{Name:i="",Description:a=""}=(0,o.getExpansion)(e,t,"CatalogSkuType")||{};return{name:"".concat(r," ").concat(i),description:a,price:3.99}},exports.getCartSummary=P,exports.getConfirmedCartItemData=function(e,t){let{Currency:r,Price:i,Quantity:a,LinePrice:n}=(0,o.getEntity)(e,t)||{};return{Currency:r,Price:i,Quantity:a,LinePrice:n}},exports.getBuyerCurrency=function(e){let{config:{cartUri:t,defaultCurrency:r}={}}=e,{Currency:i}=(0,o.getEntity)(e,t)||{};return i||r},exports.isAddingItem=function(e){let{addToCartBusy:t}=(0,a.getUIState)(e)||{};return t},exports.getCartItemUri=function(e){let{comLbCartUri:t}=(0,a.getUIState)(e)||{};return t},exports.hasErrorMessage=function(e,t,{includeAlbumSkus:r=!1}={}){return!!E(e,t,{includeAlbumSkus:r})},exports.isDataLoading=A,exports.getProductSkuFromCartUri=function(e,t){let r=(0,o.getExpansionUri)(e,t,"CartItemType");if(!r||!(0,o.getEntity)(e,r))return;return C(e,r)},exports.getTitleForFeaturedSku=C,exports.getCategoryTitleForFeaturedSku=function(e,t){var r;let i=(0,U.getSkuByUri)(e,t),a=(0,o.getExpansion)(e,null==i?void 0:i.Uri,"CatalogProduct")||{},{Name:n}=(0,o.getEntity)(e,null==a||null===(r=a.Uris)||void 0===r?void 0:r.CatalogCategory)||{};return n},exports.getShowCartSummary=function(e){return P(e).numberOfItems>0},exports.getImageType=function(e,t){let{Format:r}=(0,o.getEntity)(e,t)||{};return r},exports.getProductDataForImageUri=function(e,t,r){let i=y(e,t)||[],n=(0,a.getSkusForAlbumImageUri)(e,t,{includeAlbumSkus:!0})||[],{skuUri:u}=(0,g.getEntityUriForUrlPath)(e,r,n)||"",l=(0,U.getSkuByUri)(e,u)||{},s=(0,o.getExpansion)(e,u,"CatalogProduct")||{},c=((0,o.getExpansionUri)(e,u,"CatalogProduct.CatalogVendor")||"").split("/").pop();return{skuUri:u,pricelistPrices:i,skuEntity:l,product:s,vendorID:c}},exports.isSkuInCart=M,exports.isAlbumSku=_,exports.getBuyTargetUri=function(e,t,r){return _(e,t,r)?(0,o.getExpansion)(e,t,"Album").Uri:t},exports.canAddToCartAgain=function(e,t,r){return 1===((0,U.getSkuByUri)(e,r)||{}).CartItemLimit&&M(e,t,r)},exports.getImageSize=k,exports.getPricelistExclusionsUrisForAlbumImageUri=H,exports.getBatchAddUrlForAlbumImage=function(e,t){let{WebUri:r}=(0,o.getExpansion)(e,t,"Album")||{},i=u.default.stringifyQuery({url:r});return"/cart/batchadd?".concat(i)},exports.getAlbumImagesForWHCCEditor=function(e,t,r){let i=(0,o.getApiState)(e),n=(0,o.getExpansionUri)(i,t,"AlbumImages"),u=N(i,n);if(r===d.WHCC_PRODUCT_TYPE_ALBUMS)return u.filter(t=>(0,a.hasAlbumsEnabled)(e,t.Uri));return u.filter(t=>(0,a.hasCardsEnabled)(e,t.Uri))},exports.getConfirmationImageUri=function(e){let{confirmationImageUri:t}=(0,a.getUIState)(e);return t},exports.getEditorUrl=function(e,t){let r=(0,o.getEntity)(e,t);return null==r?void 0:r.EditorUrl},exports.needsInlineCropper=function(e,t){if((0,a.isBatchAddFlowEnabled)(e))return!1;let r=(0,p.viewportIsLessThanLarge)(e)&&(0,p.orientationIsPortrait)(e);if(!t)return r;let i=(0,U.getSkuByUri)(e,t),o=i&&(0,U.getSkuTypeForSku)(e,i),{canCrop:n}=(0,l.toSku)(i,o);return n&&r},exports.getProductUriToPreview=function(e){let{productUriToPreview:t}=(0,a.getUIState)(e)||{};return t},exports.getProductUrlPath=function(e,t,r){var i;let n=(0,a.getSkusForAlbumImageUri)(e,t,{includeAlbumSkus:!0})||[],u=(0,o.getEntity)(e,r),l=(0,U.getCatalogSkusForProduct)(e,n,u)||[];return(0,g.getUrlPathForSku)(e,null===(i=l[0])||void 0===i?void 0:i.Uri)||""},exports.getProductUriFromSkuEntity=function(e,t){return(0,o.getExpansionUri)(e,t.Uri,"CatalogProduct")},exports.memoizedGetSubcategoryUris=exports.memoizedGetProductUris=exports.makeMemoizedGetMoreInfoImages=exports.makeMemoizedGetMoreInfoDetails=exports.getPricelistExclusionsUrisForAlbumImages=exports.getAllProductImages=exports.getPricelistPricesForAlbumImageUri=exports.getMemoizedPricelistSkusForImageUri=exports.getBannerErrorMessage=void 0;var e=babelHelpers.interopRequireDefault(t("memoize-one")),r=t("reselect"),i=t("lodash"),o=t("sm-api-redux-selectors"),a=t("sm-com-lb-selectors-common"),n=babelHelpers.interopRequireDefault(t("sm-image-sizes")),u=babelHelpers.interopRequireDefault(t("sm-uri-deprecated")),l=t("sm-catalog-model-helpers"),s=t("sm-catalog-helpers"),c=t("sm-api-redux-paginator-selectors"),g=t("sm-com-lb-selectors-url-mapper"),m=t("sm-cart-constants"),d=t("sm-com-lb-constants"),U=t("sm-catalog-selectors"),I=t("sm-pricelist-selectors"),f=t("sm-com-lb-selectors-item-formatter"),p=t("sm-page-selectors");const S=(0,r.createSelectorCreator)(r.defaultMemoize,i.isEqual),E=(0,e.default)((function(e,t,{includeAlbumSkus:r=!1}={}){let{errors:i=[]}=(0,a.getUIState)(e);if(A(e,t))return"";let o=(0,a.getDiscountMessageForAlbumImage)(e,t);i=o?[o,...i]:i,(0,a.isImagePurchaseable)(e,t,{includeAlbumSkus:r})||(i=["No Products available for this image",...i]);return i.join("\n")}));exports.getBannerErrorMessage=E;const b=(0,e.default)(I.getPricelistSkusForImageUri);exports.getMemoizedPricelistSkusForImageUri=b;const y=(0,r.createSelector)([function(e,t){let r=(0,o.getExpansion)(e,t,"Album");if(!r)return[];return(0,I.getPricelistPricesForAlbumUri)(e,r.Uri)},I.getPricelistPricesForImageUri],(e=[],t=[])=>[...e,...t]);function P(e){let{GrandTotal:t,ItemCount:r,BuyerCurrency:i,WebUri:a}=(0,o.getEntity)(e,m.CART_URI)||{};return{totalValue:t,numberOfItems:r,currency:i,usersCartUri:a}}function A(e,t){let r=(0,I.getPricelistExclusionsUriByImageUri)(e,t),i=(0,I.getPricelistUri)(e,r),a=((0,o.getEntity)(e,"/api/v2/catalog!vendors")||[]).length>0;return!r||!(0,I.isPricelistLoaded)(e,i)||!a}function C(e,t){let r=(0,U.getSkuByUri)(e,t),i=(0,o.getExpansion)(e,null==r?void 0:r.Uri,"CatalogProduct")||{};return"".concat(((0,f.getPrettyProduct)(e,i)||{}).name," ").concat(((0,f.getPrettySku)(e,r)||{}).name)}function M(e,t,r){let i=(0,c.getPaginatedEntity)(e,m.CART_ITEMS_URI);if(!i)return!1;if(_(e,t,r)){let r=(0,o.getExpansion)(e,t,"Album");t=r.Uri}return i.some(({Uri:i})=>{let a=((0,o.getExpansion)(e,i,"CartItemContents.CartItemContentType")||[])[0],n=(0,o.getExpansion)(e,i,"CartItemType");if(a&&n)return a.Uri===t&&n.Uri===r})}function _(e,t,r){return(0,a.getAlbumPricelistSkusForImageUri)(e,t).some(({Uri:e})=>e===r)}exports.getPricelistPricesForAlbumImageUri=y;const F=S(o.getApiState,(e,...t)=>t,(e,t)=>((e,t,r)=>(0,U.getCatalogPreviewImagesLookupUri)(e)?t.flatMap(t=>(0,U.getCatalogSubcategoriesForCategory)(e,r,t).flatMap(t=>{let{Uri:i}=t;if(d.SUBCATEGORY_HACKS.has(i)){return((0,U.getCatalogProductsForSubcategory)(e,r,t)||[]).map(({Uri:t})=>{let r=(0,U.getCatalogFocusImageForItemUri)(e,t);if(r)return(0,U.getCatalogHighlightImageUrlForImage)(e,r,d.PREVIEW_IMAGE_WIDTH,d.PREVIEW_IMAGE_HEIGHT)})}{let t=(0,U.getCatalogFocusImageForItemUri)(e,i);if(!t)return;return(0,U.getCatalogHighlightImageUrlForImage)(e,t,d.PREVIEW_IMAGE_WIDTH,d.PREVIEW_IMAGE_HEIGHT)}})):[])(e,...t));function k(e,t,r,i){let a=(0,o.getExpansion)(e,t,"ImageSizeDetails")||[];return new n.default(a).containWithin(r,i,{allowPixelRatioOverride:!0})}exports.getAllProductImages=F;const T=new Map;function h(e,t){return"".concat(e,":").concat(t||"")}function x(e,t){let r=h(e,t);return T.get(r)}function O(e,t){let r=h(e,t),i=t?[e,t]:[e];return T.set(r,i),i}function H(e,t,{includeAlbumSkus:r=!1}={}){let i,a=(0,I.getPricelistExclusionsUriByImageUri)(e,t);if(!a)return[];if(r){let r=(0,o.getExpansionUri)(e,t,"Album")||"",n=(0,I.getPricelistExclusionsUriByAlbumUri)(e,r);if(n)return i=x(a,n),i||(i=O(a,n)),i}return i=x(a),i||(i=O(a)),i}exports.getPricelistExclusionsUrisForAlbumImages=(e,t,{includeAlbumSkus:r=!1})=>t.flatMap(({Uri:t})=>H(e,t,{includeAlbumSkus:r}));function B(e,t,r=[]){let i,o,a=(0,U.getSubcategoryByUri)(e,t)||{};if(r&&0!==r.length){let t=new Set;i=r.flatMap(t=>(0,I.getFilteredSkuTypesForProductOrSubcategory)(e,t,a)).filter(({Uri:e})=>!t.has(e)&&(t.add(e),!0))}else i=(0,U.getSkuTypesForProductOrSubcategory)(e,a);return o=i?i.filter(e=>!d.MORE_INFO_IGNORE_SKU_TYPES.has(e.Name)).sort(s.byCatalogSortOrder).map(e=>({detailName:e.Name,detailDescription:e.Description})):[],o}exports.makeMemoizedGetMoreInfoDetails=()=>S([B],e=>e);function G(e,t,r=!1){let i=(0,U.getCatalogMoreInfoImagesForItemUri)(e,t)||[],o=[];return{moreInfoImages:i.map(t=>{let i=r?d.MORE_INFO_MAIN_PANE_MAIN_IMAGE_MAX_WIDTH:d.MORE_INFO_MAIN_IMAGE_MAX_WIDTH,a=r?d.MORE_INFO_MAIN_PANE_MAIN_IMAGE_MAX_HEIGHT:d.MORE_INFO_MAIN_IMAGE_MAX_HEIGHT,{Url:n}=k(e,t,d.MORE_INFO_THUMBNAIL_MAX_WIDTH,d.MORE_INFO_THUMBNAIL_MAX_HEIGHT),{Url:u}=k(e,t,i,a);return o.push(u,n),{mainImage:u,thumbnail:n}}),preloadImageUrls:o}}exports.makeMemoizedGetMoreInfoImages=()=>S([G],e=>e);const N=(0,r.createSelector)([c.getPaginatedEntity],e=>e);const R=S([function(e,t,r,{renderAsSubcategory:i}){let o;if(i)o=[...d.SUBCATEGORY_HACKS].flatMap(r=>(0,U.getCatalogProductsForSubcategory)(e,t,(0,U.getSubcategoryByUri)(e,r))||[]).sort(s.byCatalogSortOrder).map(({Uri:e})=>e);else{let i=(0,U.getCatalogProductsForSubcategory)(e,t,(0,U.getSubcategoryByUri)(e,r));i.sort(s.byCatalogSortOrder),o=i.map(({Uri:e})=>e)}let a=o.reduce((t,r)=>({...t,[r]:(0,g.getUrlPathForProduct)(e,r)}),{});return{productUris:o,_productUrls:a}}],e=>e);exports.memoizedGetProductUris=R;const v=S([function(e,t,r){let i=(0,U.getCatalogSubcategoriesForCategory)(e,t,r);i.sort(s.byCatalogSortOrder);let o=i.map(({Uri:e})=>e),a=o.reduce((t,r)=>({...t,[r]:(0,g.getUrlPathForSubcategory)(e,r)}),{});return{subcategoryUris:o,_subcategoryUrls:a}}],e=>e);exports.memoizedGetSubcategoryUris=v}(),SM.currentModule=null}),"",{requires:["memoize-one","reselect","lodash","sm-api-redux-selectors","sm-com-lb-selectors-common","sm-image-sizes","sm-uri-deprecated","sm-catalog-model-helpers","sm-catalog-helpers","sm-api-redux-paginator-selectors","sm-com-lb-selectors-url-mapper","sm-cart-constants","sm-com-lb-constants","sm-catalog-selectors","sm-pricelist-selectors","sm-com-lb-selectors-item-formatter","sm-page-selectors"]});
YUI.add("sm-com-lb-sidebar-footer-container",(function(e){SM.currentModule="sm-com-lb-sidebar-footer-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),o=r("sm-page-selectors"),t=babelHelpers.interopRequireDefault(r("sm-com-lb-sidebar-footer")),s=r("sm-com-lb-selectors-common");var a=(0,e.connect)((function(e,{imageUri:r}){return{showPackageModalButton:!(0,o.isSmugMugWebView)(e)&&(0,s.hasPackagesAvailable)(e,r)}}),()=>({}))(t.default);exports.default=a}(),SM.currentModule=null}),"",{requires:["react-redux","sm-page-selectors","sm-com-lb-sidebar-footer","sm-com-lb-selectors-common"]});
YUI.add("sm-com-lb-sidebar-footer",(function(e){SM.currentModule="sm-com-lb-sidebar-footer";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-com-lb-batch-add-button-container")),o=babelHelpers.interopRequireDefault(t("sm-com-lb-package-modal-container"));function l(t){let{imageUri:a,showPackageModalButton:l}=t;return e.default.createElement("div",{className:"sm-com-lb-sidebar-footer-container sm-flex sm-flex-column sm-flex-justify-center sm-button-stacked-group"},e.default.createElement("div",{className:"sm-com-lb-sidebar-divider"}),e.default.createElement(r.default,{imageUri:a}),l&&e.default.createElement(o.default,{imageUri:a}))}l.displayName="CommerceLB.SidebarFooter",l.propTypes={imageUri:a.default.string.isRequired,showBatchAddButton:a.default.bool,showPackageModalButton:a.default.bool},l.defaultProps={showBatchAddButton:!0,showPackageModalButton:!1}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-batch-add-button-container","sm-com-lb-package-modal-container"]});
YUI.add("sm-com-lb-sidebar-title-container",(function(e){SM.currentModule="sm-com-lb-sidebar-title-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=t("sm-com-lb-selectors-url-mapper"),s=t("sm-catalog-selectors"),o=t("sm-api-redux-selectors"),l=t("sm-com-lb-selectors-item-formatter"),a=t("sm-com-lb-selectors-common"),c=t("sm-com-lb-selectors"),i=t("sm-batch-add-selectors"),m=t("sm-com-lb-helpers"),u=babelHelpers.interopRequireDefault(t("sm-com-lb-sidebar-title"));var d=(0,e.connect)((function(e,{location:t,imageUri:u,isMobileClb:d,showAlbumSkus:n}){let b,g,p,h,{pathname:y}=t;(0,a.isBatchAddFlowEnabled)(e)?(g=(0,i.getBatchAddSkusByAlbumImageUri)(e,u,{includeAlbumSkus:n}),b=d?"Select a product":"Buy photos",p=!1):(g=(0,a.getSkusForAlbumImageUri)(e,u,{includeAlbumSkus:n}),b="Buy this photo",p=!(0,c.isDataLoading)(e,u)&&d);let{categoryUri:S,subcategoryUri:f,productUri:U,skuUri:M}=(0,r.getEntityUriForUrlPath)(e,(0,m.removeSpecialRoutes)(y),g)||{};if(M){b=(0,c.getTitleForFeaturedSku)(e,M);let t=(0,c.getCategoryTitleForFeaturedSku)(e,M);p=!1;let r=(0,c.needsInlineCropper)(e,M);y.endsWith("/qty")||!r||(0,m.isPathCardsOrAlbums)(t)||(h="Adjust crop")}else if(U){let t=(0,s.getProductByUri)(e,U)||{},{Name:r}=(0,o.getEntity)(e,t.Uris.CatalogCategory),{name:a,optionLabel:c}=(0,l.getPrettyProduct)(e,t)||{};b=a,c&&!(0,m.isPathCardsOrAlbums)(r)&&(h="Choose a ".concat(c.toLowerCase())),p=!1}else if(f){let t=(0,s.getSubcategoryByUri)(e,f)||{};b=((0,l.getPrettySubcategory)(e,t)||{}).name,p=!1}else S&&(b=(0,s.getTitleForCategory)(e,S),p=!1);return{title:b,subTitle:h,showThumbnail:p}}))(u.default);exports.default=d}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-selectors-url-mapper","sm-catalog-selectors","sm-api-redux-selectors","sm-com-lb-selectors-item-formatter","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-batch-add-selectors","sm-com-lb-helpers","sm-com-lb-sidebar-title"]});
YUI.add("sm-com-lb-sidebar-title",(function(e){SM.currentModule="sm-com-lb-sidebar-title";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=babelHelpers.interopRequireDefault(l("react")),t=babelHelpers.interopRequireDefault(l("prop-types")),a=babelHelpers.interopRequireDefault(l("classnames")),r=babelHelpers.interopRequireDefault(l("sm-com-lb-title-thumbnail")),s=l("sm-com-lb-constants");function i({title:l,subTitle:t,showThumbnail:i,imageUri:u}){let m=(0,a.default)({"sm-com-lb-sidebar-title":!0,"sm-flex-small-only":i,"sm-flex-medium-only":i,"sm-flex-items-center":i});return e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:m,"data-thumbnail":!!i||void 0},i&&e.default.createElement(r.default,{imageUri:u,height:s.TITLE_THUMBNAIL_HEIGHT,width:s.TITLE_THUMBNAIL_WIDTH}),e.default.createElement("h2",null,l)),t&&e.default.createElement("p",{className:"sm-label-large"},t))}i.displayName="ComLB.Sidebar.Title",i.propTypes={title:t.default.string.isRequired,subTitle:t.default.string,showThumbnail:t.default.bool}}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-com-lb-title-thumbnail","sm-com-lb-constants"]});
YUI.add("sm-com-lb-sku-item-container",(function(e){SM.currentModule="sm-com-lb-sku-item-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=r("react-redux"),o=babelHelpers.interopRequireDefault(r("sm-com-lb-sku-item")),i=r("sm-catalog-selectors"),s=r("sm-pricelist-selectors"),c=r("sm-catalog-model-helpers"),u=r("sm-com-lb-selectors-item-formatter"),l=r("sm-com-lb-selectors"),n=r("sm-com-lb-cropper-actions");const m=(0,t.connect)((function(e,{uri:r,imageUri:t,onClick:o}){let n=(0,l.getPricelistPricesForAlbumImageUri)(e,t)||[],m=(0,i.getSkuByUri)(e,r)||{},a=(0,l.getProductUriFromSkuEntity)(e,m)||"",{name:d,description:p}=(0,u.getPrettySku)(e,m),{price:f,currency:b}=(0,c.toSkuPrice)((0,s.getPricelistSkuPriceForSku)(e,n,m))||{};return{name:d,description:p,price:f,currency:b,disabled:(0,l.canAddToCartAgain)(e,t,r),uri:r,onClick:o,_productUriToPreview:a}}),e=>({_onMouseEnter:r=>{e((0,n.setProductUriToPreview)(r))}}),(function(e,r){let{onClick:t}=e,{uri:o,_productUriToPreview:i,...s}=e;return{...s,onMouseEnter:()=>{r._onMouseEnter(i)},onClick:()=>{t&&t(o)}}}))(o.default);m.propTypes={exclusionsUris:e.default.arrayOf(e.default.string),onClick:e.default.func.isRequired,onMouseEnter:e.default.func,uri:e.default.string.isRequired};var a=m;exports.default=a}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-com-lb-sku-item","sm-catalog-selectors","sm-pricelist-selectors","sm-catalog-model-helpers","sm-com-lb-selectors-item-formatter","sm-com-lb-selectors","sm-com-lb-cropper-actions"]});
YUI.add("sm-com-lb-sku-item",(function(e){SM.currentModule="sm-com-lb-sku-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-com-lb-components-list-item")),s=babelHelpers.interopRequireDefault(t("sm-component-currency-amount")),a=t("sm-test-helpers");function n(t){let{onClick:l,name:n,description:u,price:c,currency:i,disabled:m,...o}=t;return e.default.createElement(r.default,babelHelpers.extends({"data-testid":(0,a.toTestId)("com_lb_sidebar_".concat(n,"_button")),onClick:l,tooltipText:n},o),e.default.createElement("div",{className:"sm-flex sm-flex-items-baseline sm-com-lb-title-price"},e.default.createElement("h3",null,n),m?e.default.createElement("span",{className:"sm-com-lb-in-cart-indicator"},"(in cart)"):c&&e.default.createElement(s.default,{className:"sm-com-lb-price",amount:c,currency:i})),e.default.createElement("p",{className:"sm-com-lb-description"},u))}n.displayName="ComLB.SkuItem",n.propTypes={onClick:l.default.func.isRequired,name:l.default.string.isRequired,description:l.default.string.isRequired,price:l.default.number,currency:l.default.string,disabled:l.default.bool.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-components-list-item","sm-component-currency-amount","sm-test-helpers"]});
YUI.add("sm-com-lb-sku-list-container",(function(e){SM.currentModule="sm-com-lb-sku-list-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-com-lb-sku-list")),t=r("react-redux"),l=r("sm-catalog-selectors"),s=r("sm-catalog-helpers"),o=r("sm-com-lb-selectors-url-mapper"),u=r("sm-com-lb-selectors-common"),c=r("sm-batch-add-selectors");var a=(0,t.connect)((function(e,{location:r,history:t,imageUri:a,showAlbumSkus:m}){let i;i=(0,u.isBatchAddFlowEnabled)(e)?(0,c.getBatchAddSkusByAlbumImageUri)(e,a,{includeAlbumSkus:m}):(0,u.getSkusForAlbumImageUri)(e,a,{includeAlbumSkus:m});let d=r.pathname,{productUri:n}=(0,o.getEntityUriForUrlPath)(e,d,i)||{},b=(0,l.getProductByUri)(e,n),g=(0,l.getCatalogSkusForProduct)(e,i,b);g.sort(s.byCatalogSortOrder);let p=g.map(({Uri:e})=>e),S=p.reduce((r,t)=>({...r,[t]:(0,o.getUrlPathForSku)(e,t)}),{});return{skuUris:p,onClick:e=>{t.push({pathname:S[e],state:{direction:"forward"}})}}}))(e.default);exports.default=a}(),SM.currentModule=null}),"",{requires:["sm-com-lb-sku-list","react-redux","sm-catalog-selectors","sm-catalog-helpers","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-common","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-sku-list",(function(e){SM.currentModule="sm-com-lb-sku-list";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-com-lb-sku-item-container"));class u extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_firstButtonRef",e.default.createRef())}componentDidMount(){var e,r,t;null===(e=this._firstButtonRef)||void 0===e||null===(r=e.current)||void 0===r||null===(t=r.firstChild)||void 0===t||t.focus()}render(){let{skuUris:r,onClick:t}=this.props;return r.length<=1?null:e.default.createElement("ul",{className:"sm-com-lb-sku-list sm-com-lb-list"},r.map((r,u)=>e.default.createElement("li",{key:r,ref:0===u&&this._firstButtonRef},e.default.createElement(l.default,{uri:r,onClick:t}))))}}babelHelpers.defineProperty(u,"displayName","CommerceLB.SkuList"),babelHelpers.defineProperty(u,"propTypes",{skuUris:t.default.arrayOf(t.default.string).isRequired,imageUri:t.default.string.isRequired,onClick:t.default.func.isRequired});var i=u;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-sku-item-container"]});
YUI.add("sm-com-lb-sku-quantity-picker-container",(function(e){SM.currentModule="sm-com-lb-sku-quantity-picker-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("prop-types")),o=t("lodash"),i=t("sm-com-lb-actions"),a=t("sm-com-lb-crop-selectors"),c=t("sm-pricelist-selectors"),s=t("sm-catalog-selectors"),l=babelHelpers.interopRequireDefault(t("sm-com-lb-sku-quantity-picker")),u=t("sm-com-lb-selectors-common"),d=t("sm-com-lb-selectors"),m=t("sm-catalog-model-helpers"),n=t("sm-com-lb-selectors-item-formatter"),b=t("sm-com-lb-helpers"),p=t("sm-batch-add-selectors"),h=t("sm-batch-add-actions");const k=(0,e.connect)((function(e,{location:t,imageUri:r}){let i,{pathname:l}=t,h=(0,u.isBatchAddFlowEnabled)(e),k=r;var S;l=(0,b.removeSpecialRoutes)(l),h&&(i=(0,p.getBatchAddSelectedItemUris)(e,(0,p.getBatchAddAlbumImagesUriByAlbumImage)(e,r)),k=(null===(S=i)||void 0===S?void 0:S[0])||k);let{skuEntity:g={},pricelistPrices:y,product:A}=(0,d.getProductDataForImageUri)(e,k,l),_=Object.keys(g).length&&(0,s.getSkuTypeForSku)(e,g),{batchAddUri:f,buyUri:U,maxQuantity:P,canCrop:v}=(0,m.toSku)(g,_),{currency:C,price:I}=(0,m.toSkuPrice)((0,c.getPricelistSkuPriceForSku)(e,y,g)),{description:T}=(0,n.getPrettyProduct)(e,A),{Uri:M}=g,q={busyLoading:(0,d.isAddingItem)(e),description:T,currency:C,defaultSkuPrice:I,prices:[I],isBatchAdd:h,multipleSkuPrices:!1,disabled:(0,d.isAddingItem)(e),canSetQuantity:1!==P,_buyUri:U,_buyItemUri:(0,d.getBuyTargetUri)(e,r,M),_cropData:v?(0,a.getCropData)(e,r,l):{},_isAlbumSku:(0,d.isAlbumSku)(e,r,M)};if(h&&!(0,p.shouldBypassBatchAddForProduct)(e,l,[g])){var F;let t=i.map(t=>{var r;let o=(0,d.getPricelistPricesForAlbumImageUri)(e,t);return null===(r=(0,m.toSkuPrice)((0,c.getPricelistSkuPriceForSku)(e,o,g)))||void 0===r?void 0:r.price}),r=(null===(F=(0,o.uniq)(t))||void 0===F?void 0:F.length)>1;q={...q,_batchAddItemUris:i,_batchAddSkuDetails:{skuName:(0,d.getTitleForFeaturedSku)(e,M),confirmationSkuUri:M},_batchAddUri:f,defaultSkuPrice:r?Math.min(...t):t[0],multipleSkuPrices:r,prices:t}}return q}),(function(e,{location:t,history:r}){let o=(0,b.removeSpecialRoutes)(t.pathname);return{_addToCart:(t,a,c,s)=>{e((0,i.addToCart)(t,a,c,s,o,r))},_addAlbumToCart:(t,a,c)=>{e((0,i.addAlbumToCart)(t,a,c,o,r))},_batchAddToCart:(t,i,a,c)=>{e((0,h.batchAddToCart)(t,i,a,o,r,c))},_storeConfirmationImageUri:t=>{e((0,i.storeConfirmationImageUri)(t))}}}),(function(e,t,r){let{_batchAddItemUris:o,_batchAddSkuDetails:i,_batchAddUri:a,_buyUri:c,_buyItemUri:s,_cropData:l,_isAlbumSku:u,...d}=e;return{...r,...d,onAddToCartClick:(e,d={})=>{if(u)t._addAlbumToCart(c,s,e);else if(a){let r={...d,...i};t._batchAddToCart(a,o,e,r)}else t._addToCart(c,s,e,l);t._storeConfirmationImageUri(r.imageUri)}}}))(l.default);k.propTypes={history:r.default.object.isRequired};var S=k;exports.default=S}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","lodash","sm-com-lb-actions","sm-com-lb-crop-selectors","sm-pricelist-selectors","sm-catalog-selectors","sm-com-lb-sku-quantity-picker","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-catalog-model-helpers","sm-com-lb-selectors-item-formatter","sm-com-lb-helpers","sm-batch-add-selectors","sm-batch-add-actions"]});
YUI.add("sm-com-lb-sku-quantity-picker",(function(e){SM.currentModule="sm-com-lb-sku-quantity-picker";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-currency-amount")),r=babelHelpers.interopRequireDefault(t("sm-stepper")),s=babelHelpers.interopRequireDefault(t("sm-component-button")),i=babelHelpers.interopRequireDefault(t("sm-component-busy")),n=babelHelpers.interopRequireDefault(t("sm-icon"));const u=(0,babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")).default)(s.default);class c extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"state",{quantity:1}),babelHelpers.defineProperty(this,"_pickerRef",e.default.createRef()),babelHelpers.defineProperty(this,"_onQuantityChange",e=>{let t=+e.target.value;this.setState({quantity:t})}),babelHelpers.defineProperty(this,"_getTotalPrice",()=>{let{multipleSkuPrices:e=!1,prices:t=[]}=this.props,{quantity:l}=this.state;if(t.length&&l)return e?t.reduce((e,t)=>e+t*l,0):t[0]*t.length*l}),babelHelpers.defineProperty(this,"_getTotalItems",()=>{let{prices:e=[]}=this.props,{quantity:t}=this.state;return e.length*t}),babelHelpers.defineProperty(this,"_onAddToCartClick",()=>{let{currency:e,defaultSkuPrice:t=0,isBatchAdd:l=!1,multipleSkuPrices:a=!1,onAddToCartClick:r,prices:s}=this.props;if(!r)return;let{quantity:i}=this.state;if(l){return r(i,{currency:e,multipleSkuPrices:a,quantity:this._getTotalItems(s,i),skuPrice:t,total:this._getTotalPrice(s,i)})}r(this.state.quantity)})}componentDidMount(){var e,t,l,a;null===(e=this._pickerRef)||void 0===e||null===(t=e.current)||void 0===t||null===(l=t.inputField)||void 0===l||null===(a=l.current)||void 0===a||a.focus()}render(){let{busyLoading:t,currency:l,prices:c,defaultSkuPrice:o=0,description:d,multipleSkuPrices:m=!1,canSetQuantity:p,disabled:f}=this.props,{quantity:b}=this.state,y=c.length,_=y?"Add to cart":"Select photos to continue",h=this._getTotalItems(c,b),k=this._getTotalPrice(c,b);return e.default.createElement("div",{className:"sm-com-lb-sku-quantity-picker"},d?e.default.createElement("p",{className:"sm-com-lb-description"},d):null,p&&e.default.createElement(e.default.Fragment,null,e.default.createElement("p",{className:"sm-com-lb-sku-quantity-picker-instructions sm-label-large"},y>1?"Select a quantity for each":"Select a quantity"),e.default.createElement("div",{className:"sm-flex sm-flex-justify-between sm-flex-items-center"},e.default.createElement(r.default,{"data-testid":"com_lb_sidebar_quantity_field",onChange:this._onQuantityChange,value:b,min:1,max:999,disabled:!!f,ref:this._pickerRef}),m?e.default.createElement("div",null,e.default.createElement(a.default,{"data-testid":"com_lb_sidebar_itemprice_text",amount:o,currency:l}),e.default.createElement("span",{className:"sm-currency-amount"},"+")):e.default.createElement(a.default,{"data-testid":"com_lb_sidebar_itemprice_text",amount:o,currency:l}))),Boolean(y)&&k&&e.default.createElement("div",{className:"sm-com-lb-sku-total"},y>1&&e.default.createElement("div",{className:"sm-flex sm-flex-items-center sm-flex-justify-between sm-mb-4"},e.default.createElement("div",{className:"sm-flex sm-flex-items-center"},e.default.createElement("div",{className:"sm-com-lb-sku-total-label"},"Item total"),e.default.createElement(u,{noChrome:!0,size:s.default.SIZE_SMALL,tooltipAlignment:u.TOOLTIP_ALIGN_TOP,tooltipLabel:"Selected (".concat(y,") x Quantity (").concat(b,")"),touchEnabled:!0},e.default.createElement(n.default,{name:"InfoEncircled",size:n.default.SIZE_SMALL}))),e.default.createElement("span",{className:"sm-com-lb-confirmation-total-label"},h)),e.default.createElement("div",{className:"sm-flex sm-flex-justify-between"},e.default.createElement("span",{className:"sm-com-lb-sku-total-label"},"Total"),e.default.createElement(a.default,{"data-testid":"com_lb_sidebar_itemtotal_text",amount:k,currency:l}))),e.default.createElement(s.default,{className:"sm-com-lb-add-to-cart-button",skin:y?s.default.SKIN_ACCENT:s.default.SKIN_PRIMARY,"data-testid":"com_lb_sidebar_addtocart_button",onClick:this._onAddToCartClick,disabled:!!f||!y,size:s.default.SIZE_LARGE},t?e.default.createElement(i.default,{transparentBackground:!0}):_))}}exports.default=c,babelHelpers.defineProperty(c,"displayName","ComLB.SkuQuantityPicker"),babelHelpers.defineProperty(c,"propTypes",{canSetQuantity:l.default.bool,defaultSkuPrice:l.default.number,description:l.default.string,disabled:l.default.bool,isBatchAdd:l.default.bool,multipleSkuPrices:l.default.bool,prices:l.default.arrayOf(l.default.number).isRequired,currency:l.default.string,onAddToCartClick:l.default.func.isRequired}),babelHelpers.defineProperty(c,"defaultProps",{canSetQuantity:!0,currency:SM.env.buyerCurrency})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-currency-amount","sm-stepper","sm-component-button","sm-component-busy","sm-icon","sm-tooltip-hoc"]});
YUI.add("sm-com-lb-sku-route-container",(function(e){SM.currentModule="sm-com-lb-sku-route-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),l=babelHelpers.interopRequireDefault(r("sm-com-lb-sku-route")),s=r("sm-com-lb-selectors-common"),o=r("sm-com-lb-selectors"),u=r("sm-com-lb-selectors-url-mapper"),t=r("sm-com-lb-helpers"),c=r("sm-batch-add-selectors");var m=(0,e.connect)((function(e,{location:r,imageUri:l,showAlbumSkus:m}){let a,{pathname:n}=r;n=(0,t.removeSpecialRoutes)(n),a=(0,s.isBatchAddFlowEnabled)(e)?(0,c.getBatchAddSkusByAlbumImageUri)(e,l,{includeAlbumSkus:m}):(0,s.getSkusForAlbumImageUri)(e,l,{includeAlbumSkus:m});let{skuUri:d}=(0,u.getEntityUriForUrlPath)(e,n,a)||{};return{skuDisabled:(0,o.canAddToCartAgain)(e,l,d),skuUnavailable:!d}}))(l.default);exports.default=m}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-sku-route","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-com-lb-selectors-url-mapper","sm-com-lb-helpers","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-sku-route",(function(e){SM.currentModule="sm-com-lb-sku-route";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),u=babelHelpers.interopRequireDefault(r("sm-com-lb-sku-quantity-picker-container")),l=babelHelpers.interopRequireDefault(r("sm-com-lb-already-in-cart"));function a({skuDisabled:r,skuUnavailable:t,location:a,history:i,imageUri:o}){if(t)return null;if(r){const r=()=>i.push("/");return e.default.createElement(l.default,{navigateToRoot:r})}return e.default.createElement(u.default,{location:a,history:i,imageUri:o})}a.displayName="ComLB.SkuRoute",a.propTypes={skuDisabled:t.default.bool.isRequired,skuUnavailable:t.default.bool.isRequired,location:t.default.object.isRequired,history:t.default.object.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-sku-quantity-picker-container","sm-com-lb-already-in-cart"]});
YUI.add("sm-com-lb-subcategory-list-container",(function(e){SM.currentModule="sm-com-lb-subcategory-list-container";var exports={},s=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s("react-redux"),r=babelHelpers.interopRequireDefault(s("sm-com-lb-subcategory-list")),t=s("reselect"),l=s("lodash"),o=s("sm-com-lb-selectors-url-mapper"),c=s("sm-catalog-selectors"),u=s("sm-com-lb-selectors-common"),a=s("sm-com-lb-selectors"),i=s("sm-batch-add-selectors");const m=(0,t.createSelectorCreator)(t.defaultMemoize,l.isEqual)([(e,s)=>r=>e.push({pathname:s[r],state:{direction:"forward"}})],e=>e);var n=(0,e.connect)((function(e,{location:s,imageUri:r,showAlbumSkus:t}){let l,m;if((0,u.isBatchAddFlowEnabled)(e)){let s=(0,i.getBatchAddAlbumImagesUriByAlbumImage)(e,r),o=(0,i.getBatchAddAlbumImages)(e,s);l=(0,i.getBatchAddSkusForItemSelection)(e,s,{includeAlbumSkus:t});let{availableKeys:c=[]}=(0,i.getBatchAddImageAvailabilityForSkus)(e,o,l),u=o.filter(e=>c.includes(e.ImageKey));m=(0,a.getPricelistExclusionsUrisForAlbumImages)(e,u,{includeAlbumSkus:t})}else l=(0,u.getSkusForAlbumImageUri)(e,r,{includeAlbumSkus:t}),m=(0,a.getPricelistExclusionsUrisForAlbumImageUri)(e,r,{includeAlbumSkus:t});let n=s.pathname,{categoryUri:b}=(0,o.getEntityUriForUrlPath)(e,n,l)||{},d=(0,c.getCategoryByUri)(e,b),{subcategoryUris:g,_subcategoryUrls:y}=(0,a.memoizedGetSubcategoryUris)(e,l,d);return{subcategoryUris:g,_subcategoryUrls:y,exclusionsUris:m}}),()=>({}),(function({subcategoryUris:e,exclusionsUris:s,_subcategoryUrls:r},t,{history:l}){return{subcategoryUris:e,exclusionsUris:s,onClick:m(l,r)}}))(r.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-com-lb-subcategory-list","reselect","lodash","sm-com-lb-selectors-url-mapper","sm-catalog-selectors","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-batch-add-selectors"]});
YUI.add("sm-com-lb-subcategory-list-item-container",(function(e){SM.currentModule="sm-com-lb-subcategory-list-item-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-com-lb-subcategory-list-item")),o=t("react-redux"),s=t("sm-catalog-selectors"),l=t("sm-com-lb-selectors-item-formatter"),c=t("sm-com-lb-constants"),i=t("sm-com-lb-cropper-actions"),a=t("sm-com-lb-actions"),u=t("sm-page-selectors");const n=(0,o.connect)((function(e,{uri:t,onClick:r}){let o,i,a,n=(0,s.getSubcategoryByUri)(e,t)||{},m=(0,u.getFeatureFlagValue)(e,"web.disable-product-previews"),g=!1;(0,s.getSubcategoryProducts)(e,n.Uri).length>0?(({name:o,description:i,optionLabel:a}=(0,l.getPrettySubcategory)(e,n)),g=!0):({name:o,description:i,optionLabel:a}=(0,l.getPrettyProduct)(e,n));let d,b=(0,s.getCatalogFocusImageForItemUri)(e,t);return b&&(d=(0,s.getCatalogHighlightImageUrlForImage)(e,b,c.PREVIEW_IMAGE_WIDTH,c.PREVIEW_IMAGE_HEIGHT)),{description:i,hideImage:m,imageUrl:d,name:o,onClick:r,optionLabel:a,uri:t,_subcategoryProduct:g}}),e=>({_onToggleClose:()=>e((0,a.clearProductImageGalleryUri)()),_onMouseEnter:t=>e((0,i.setProductUriToPreview)(t))}),(function(e,t){let r={},{uri:o,onClick:s,_subcategoryProduct:l,...c}=e;return l||(r={onMouseEnter:()=>{t._onMouseEnter(o)}}),{uri:o,...c,...r,onClick:()=>{t._onToggleClose(),s&&s(o)}}}))(r.default);n.propTypes={exclusionsUris:e.default.arrayOf(e.default.string),onClick:e.default.func.isRequired,uri:e.default.string.isRequired};var m=n;exports.default=m}(),SM.currentModule=null}),"",{requires:["prop-types","sm-com-lb-subcategory-list-item","react-redux","sm-catalog-selectors","sm-com-lb-selectors-item-formatter","sm-com-lb-constants","sm-com-lb-cropper-actions","sm-com-lb-actions","sm-page-selectors"]});
YUI.add("sm-com-lb-subcategory-list-item",(function(e){SM.currentModule="sm-com-lb-subcategory-list-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("sm-com-lb-components-list-item")),r=babelHelpers.interopRequireDefault(t("sm-com-lb-components-image-list-item")),o=t("sm-test-helpers"),s=babelHelpers.interopRequireDefault(t("sm-com-lb-components-more-info-container"));const a=t=>{let{description:l,exclusionsUris:a,imageUrl:n,name:u,onClick:m,onToggleOpen:c,onToggleClose:d,optionLabel:p,uri:b,hideImage:f,...g}=t,q=f?i.default:r.default;return e.default.createElement(e.default.Fragment,null,e.default.createElement(q,babelHelpers.extends({name:u,"data-testid":(0,o.toTestId)("com_lb_sidebar_".concat(u)),imageUrl:n,onClick:m,tooltipText:u},g),e.default.createElement("h3",null,u),e.default.createElement("p",{className:"sm-com-lb-description"},l)),e.default.createElement(s.default,{uri:b,onClick:m,exclusionsUris:a,optionLabel:p}))};a.displayName="ComLb.SubcategoryListItem",a.propTypes={onClick:l.default.func.isRequired,name:l.default.string.isRequired,description:l.default.string.isRequired,optionLabel:l.default.string.isRequired,exclusionsUris:l.default.arrayOf(l.default.string),uri:l.default.string.isRequired,hideImage:l.default.bool},a.defaultProps={exclusionsUris:[]};var n=a;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-components-list-item","sm-com-lb-components-image-list-item","sm-test-helpers","sm-com-lb-components-more-info-container"]});
YUI.add("sm-com-lb-subcategory-list",(function(e){SM.currentModule="sm-com-lb-subcategory-list";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-com-lb-subcategory-list-item-container"));class s extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_firstButtonRef",e.default.createRef())}componentDidMount(){var e,r,t,l;null===(e=this._firstButtonRef)||void 0===e||null===(r=e.current)||void 0===r||null===(t=r.firstChild)||void 0===t||null===(l=t.getElementsByTagName("button")[0])||void 0===l||l.focus()}render(){let{subcategoryUris:r,onClick:t,exclusionsUris:s}=this.props;return r.length<=1?null:e.default.createElement("ul",{className:"sm-com-lb-subcategory-list sm-com-lb-list"},r.map((r,u)=>e.default.createElement("li",{key:r,ref:0===u&&this._firstButtonRef},e.default.createElement(l.default,{uri:r,onClick:t,exclusionsUris:s}))))}}babelHelpers.defineProperty(s,"displayName","CommerceLB.SubcategoryList"),babelHelpers.defineProperty(s,"propTypes",{subcategoryUris:t.default.arrayOf(t.default.string).isRequired,exclusionsUris:t.default.arrayOf(t.default.string),onClick:t.default.func.isRequired}),babelHelpers.defineProperty(s,"defaultProps",{exclusionsUris:[]});var u=s;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-com-lb-subcategory-list-item-container"]});
YUI.add("sm-com-lb-title-thumbnail-selector",(function(e){SM.currentModule="sm-com-lb-title-thumbnail-selector";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTileDataForImage=function(r,l,i,u){let s=(0,t.getExpansion)(r,l,"ImageSizeDetails");if(!s)return{};let n=new e.default(s).cover(i,u);return{height:u,width:i,src:n.Url}};var e=babelHelpers.interopRequireDefault(r("sm-image-sizes")),t=r("sm-api-redux-selectors")}(),SM.currentModule=null}),"",{requires:["sm-image-sizes","sm-api-redux-selectors"]});
YUI.add("sm-com-lb-title-thumbnail",(function(e){SM.currentModule="sm-com-lb-title-thumbnail";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=t("react-redux"),i=t("sm-com-lb-title-thumbnail-selector");function u({imageUri:t,width:r,height:u}){let a=(0,l.useSelector)(e=>(0,i.getTileDataForImage)(e,t,r,u));return e.default.createElement("img",babelHelpers.extends({className:"sm-com-lb-title-thumbnail"},a))}u.displayName="ComLB.Title.Thumbnail",u.propTypes={height:r.default.number.isRequired,width:r.default.number.isRequired,imageUri:r.default.string.isRequired}}(),SM.currentModule=null}),"",{requires:["react","prop-types","react-redux","sm-com-lb-title-thumbnail-selector"]});
YUI.add("sm-content-wizard-action-types",(function(_){SM.currentModule="sm-content-wizard-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UPLOAD_COMPLETE_GALLERY=exports.UPLOAD_COMPLETE=exports.TRACK_EVENT=exports.THUMBNAIL_REMOVED=exports.THUMBNAIL_EXTRACTED=exports.SHOW_ALERT=exports.SET_UPLOADING_FLAG=exports.SET_SUBMITTED_FLAG=exports.SET_SOCIAL_INFO_FIELD=exports.SET_SITE_INFO_FIELD=exports.SELECT_SITE_DESIGN=exports.LOADING=exports.INIT_STORE=exports.CLEAR_UPLOAD_URI=exports.CLEAR_ALERT=exports.CHANGE_STEP=void 0;exports.CHANGE_STEP="CONTENT_WIZ_CHANGE_STEP";exports.CLEAR_ALERT="CONTENT_WIZ_CLEAR_ALERT";exports.CLEAR_UPLOAD_URI="CONTENT_WIZ_CLEAR_UPLOAD_URI";exports.INIT_STORE="CONTENT_WIZ_INIT_STORE";exports.LOADING="CONTENT_WIZ_LOADING";exports.SELECT_SITE_DESIGN="CONTENT_WIZ_SELECT_SITE_DESIGN";exports.SET_SITE_INFO_FIELD="CONTENT_WIZ_SET_SITE_INFO_FIELD";exports.SET_SOCIAL_INFO_FIELD="CONTENT_WIZ_SET_SOCIAL_INFO_FIELD";exports.SET_SUBMITTED_FLAG="CONTENT_WIZ_SET_SUBMITTED_FLAG";exports.SET_UPLOADING_FLAG="CONTENT_WIZ_SET_UPLOADING_FLAG";exports.SHOW_ALERT="CONTENT_WIZ_SHOW_ALERT";exports.THUMBNAIL_EXTRACTED="CONTENT_WIZ_THUMBNAIL_EXTRACTED";exports.THUMBNAIL_REMOVED="CONTENT_WIZ_THUMBNAIL_REMOVED";exports.TRACK_EVENT="CONTENT_WIZ_TRACK_EVENT";exports.UPLOAD_COMPLETE="CONTENT_WIZ_UPLOAD_COMPLETE";exports.UPLOAD_COMPLETE_GALLERY="CONTENT_WIZ_UPLOAD_COMPLETE_GALLERY"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-content-wizard-reducers",(function(e){SM.currentModule="sm-content-wizard-reducers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=a,exports.combined=function(t={},r){return(0,e.combineReducers)({ui:a})(t,r)};var e=t("redux"),r=t("sm-content-wizard-action-types");function n(e,t){let{completedUploads:n={},numberOfDesignsPreviewed:a=0,siteInfo:u={},socialLinks:i={},thumbnails:s={}}=e;switch(t.type){case r.INIT_STORE:return{...e,...t.data};case r.CHANGE_STEP:return{...e,currentStep:t.step};case r.CLEAR_ALERT:return{...e,alertType:null};case r.LOADING:return{...e,loading:t.loading,...void 0!==t.percentComplete&&{percentComplete:t.percentComplete}};case r.SELECT_SITE_DESIGN:return{...e,selectedSiteDesignUri:t.siteDesignUri,numberOfDesignsPreviewed:a+1};case r.SHOW_ALERT:return{...e,alertType:t.alertType,isSubmitted:!1};case r.SET_SITE_INFO_FIELD:return{...e,siteInfo:{...u,[t.fieldName]:t.fieldValue}};case r.SET_SOCIAL_INFO_FIELD:return{...e,socialLinks:{...i,[t.fieldName]:t.fieldValue}};case r.SET_SUBMITTED_FLAG:return{...e,isSubmitted:t.status};case r.SET_UPLOADING_FLAG:return{...e,isUploading:t.status};case r.UPLOAD_COMPLETE:return{...e,completedUploads:{...n,[t.uploadType]:"/api/v2/image/".concat(t.imgKey)}};case r.UPLOAD_COMPLETE_GALLERY:return{...e,completedUploads:{...n,galleryTotal:e.completedUploads.galleryTotal+t.fileCount}};case r.CLEAR_UPLOAD_URI:return{...e,completedUploads:{...n,[t.uploadType]:null}};case r.THUMBNAIL_EXTRACTED:return{...e,thumbnails:{...s,[t.uploadType]:{url:t.thumbnailUrl,width:t.width,height:t.height}}};case r.THUMBNAIL_REMOVED:return{...e,thumbnails:{...s,...t.thumbnailsToRemove}};case r.TRACK_EVENT:default:return e}}function a(e={},t){let{contentWizard:r={}}=e;return{...e,contentWizard:n(r,t)}}}(),SM.currentModule=null}),"",{requires:["redux","sm-content-wizard-action-types"]});
YUI.add("sm-contextual-help-menu-button",(function(e){SM.currentModule="sm-contextual-help-menu-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-component-button"));const u=({label:e,name:t,onClick:u})=>n.default.createElement(l.default,{skin:"none",onClick:u},n.default.createElement("svg",{height:"30px",width:"30px",title:t},n.default.createElement("use",{xlinkHref:"#sm-help-def-".concat(t)})),n.default.createElement("span",null,e));u.propTypes={name:e.default.oneOf(["GettingStarted","AccountSettings","BuyPrints","Chat","ContentSettings","Personalize","PrivacySecurity","SellPrints","Sharing"]).isRequired,label:e.default.string.isRequired,onClick:e.default.func.isRequired},u.displayName="ContextualHelp.Menu.Button";var r=u;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","sm-component-button","sm-icon"]});
YUI.add("sm-contextual-help-menu",(function(e){SM.currentModule="sm-contextual-help-menu";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),n=t("sm-dom-core"),a=babelHelpers.interopRequireDefault(t("sm-contextual-help-menu-button")),u=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),i=babelHelpers.interopRequireDefault(t("sm-component-button"));let c=!0;class r extends u.default{constructor(e){super(e),this.state={menuOpen:c},this._toggleMenu=this._toggleMenu.bind(this)}render(){let{clickedGettingStarted:e,clickedAccountManagement:t,clickedBuyingPrints:n,clickedChatWithHero:u,clickedContentManagement:c,clickedPersonalizing:r,clickedPrivacyAndSecurity:s,clickedSellingPrints:d,clickedSharing:o,showChatButton:m}=this.props,f=null;return m&&(f=l.default.createElement("div",{className:"sm-contextual-help-menu-chat",onClick:u},l.default.createElement("span",null,l.default.createElement(i.default,{skin:"none",size:"small"},l.default.createElement("svg",{height:"30px",width:"30px",title:"Chat"},l.default.createElement("use",{xlinkHref:"#sm-help-def-Chat"})))),l.default.createElement("span",null,"Chat with a Hero"))),l.default.createElement("div",{className:"sm-contextual-help-menu"},l.default.createElement("div",{className:"sm-contextual-help-menu-toggle",onClick:this._toggleMenu},l.default.createElement("span",{className:"sm-contextual-help-menu-title"},"Support Menu"),l.default.createElement("span",{className:"sm-contextual-help-menu-show-hide"},this.state.menuOpen?"hide":"show")),l.default.createElement("div",{className:"sm-contextual-help-menu-items sm-flex sm-flex-row sm-flex-wrap sm-flex-justify-between"},l.default.createElement(a.default,{label:"Getting Started",onClick:e,name:"GettingStarted"}),l.default.createElement(a.default,{label:"Account Management",onClick:t,name:"AccountSettings"}),l.default.createElement(a.default,{label:"Content Management",onClick:c,name:"ContentSettings"}),l.default.createElement(a.default,{label:"Privacy and Security",onClick:s,name:"PrivacySecurity"}),l.default.createElement(a.default,{label:"Personalizing",onClick:r,name:"Personalize"}),l.default.createElement(a.default,{label:"Sharing",onClick:o,name:"Sharing"}),l.default.createElement(a.default,{label:"Buying Prints",onClick:n,name:"BuyPrints"}),l.default.createElement(a.default,{label:"Selling Prints",onClick:d,name:"SellPrints"})),f)}static defaultMenuStateClosed(){n.doc.body.setAttribute("data-help-menu-open",!1),c=!1}_toggleMenu(){this.setState({menuOpen:!this.state.menuOpen},()=>{n.doc.body.setAttribute("data-help-menu-open",this.state.menuOpen?"true":"false")})}}exports.default=r,r.propTypes={clickedGettingStarted:e.default.func.isRequired,clickedAccountManagement:e.default.func.isRequired,clickedBuyingPrints:e.default.func.isRequired,clickedChatWithHero:e.default.func.isRequired,clickedContentManagement:e.default.func.isRequired,clickedPersonalizing:e.default.func.isRequired,clickedPrivacyAndSecurity:e.default.func.isRequired,clickedSellingPrints:e.default.func.isRequired,clickedSharing:e.default.func.isRequired},r.displayName="ContextualHelp.Menu"}(),SM.currentModule=null}),"",{requires:["react","sm-component-pure-render","sm-contextual-help-menu-button"]});
YUI.add("sm-contextual-help",(function(e){SM.currentModule="sm-contextual-help";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("react-dom")),n=t("sm-dom-core"),i=babelHelpers.interopRequireDefault(t("sm-contextual-help-menu")),l=babelHelpers.interopRequireDefault(t("sm-elevio")),o=babelHelpers.interopRequireDefault(t("sm-load-external-svg")),r=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),s=babelHelpers.interopRequireDefault(t("sm-site-status-indicator")),u=babelHelpers.interopRequireDefault(t("sm-smuglog"));let d,c,h,p=!1;class g extends r.default{constructor(){super(),this.state={showChatButton:!1},this.openCategoryGettingStarted=l.default.openCategoryGettingStarted.bind(l.default),this.openCategoryAccountManagement=l.default.openCategoryAccountManagement.bind(l.default),this.openCategoryBuyingPrints=l.default.openCategoryBuyingPrints.bind(l.default),this.openCategoryContentManagement=l.default.openCategoryContentManagement.bind(l.default),this.openCategoryPrivacyAndSecurity=l.default.openCategoryPrivacyAndSecurity.bind(l.default),this.openCategoryPersonalizing=l.default.openCategoryPersonalizing.bind(l.default),this.openCategorySellingPrints=l.default.openCategorySellingPrints.bind(l.default),this.openCategorySharing=l.default.openCategorySharing.bind(l.default),this.openLiveChat=this.openLiveChat.bind(this),this.openStatusPage=l.default.openStatusPage.bind(l.default)}render(){return e.default.createElement("div",{className:"sm-contextual-help"},e.default.createElement(s.default,{onClick:this.openStatusPage}),e.default.createElement(i.default,{clickedGettingStarted:this.openCategoryGettingStarted,clickedAccountManagement:this.openCategoryAccountManagement,clickedBuyingPrints:this.openCategoryBuyingPrints,clickedContentManagement:this.openCategoryContentManagement,clickedPrivacyAndSecurity:this.openCategoryPrivacyAndSecurity,clickedPersonalizing:this.openCategoryPersonalizing,clickedSellingPrints:this.openCategorySellingPrints,clickedSharing:this.openCategorySharing,clickedChatWithHero:this.openLiveChat,showChatButton:this.state.showChatButton}))}openLiveChat(){l.default.close(),p&&d.launchChat()}static chatHide(){c&&c.setState({showChatButton:!1})}static chatShow(){c&&c.setState({showChatButton:!0})}static initialize(e={contextualHelpEnabled:!1,liveChatEnabled:!1}){h||(h=!0,e.liveChatEnabled&&g._initializeLiveChat(),e.contextualHelpEnabled&&g._initializeElevio(),e.liveChatEnabled&&i.default.defaultMenuStateClosed())}static toggle(){l.default&&l.default.isLoaded()&&(l.default.isOpen()?l.default.close():l.default.open())}static isOpen(){return l.default&&l.default.isLoaded()&&l.default.isOpen()}static _initializeElevio(){l.default.initialize().then(()=>{(0,o.default)(SM.env.svgUrls.help);let t=n.doc.createElement("div");t.classList.add("sm-contextual-help-container");let i=n.doc.querySelector("#_elev_io.elevioReset._elevio_launcher");i.parentNode.insertBefore(t,i),c=a.default.render(e.default.createElement(g),t),p&&c&&c.setState({showChatButton:!0})})}static async _initializeLiveChat(){try{await SM.load("sm-page-live-chat"),d=SM.import("sm-live-chat"),await d.initialize(),p=!0,c&&c.setState({showChatButton:!0})}catch(e){u.default.add("sm-contextual-help",{[u.default.FIELD_MESSAGE]:"Failed to load LiveChat",[u.default.FIELD_ERROR]:e},u.default.LEVEL_ERROR)}}}exports.default=g,g.displayName="ContextualHelp"}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-component-pure-render","sm-contextual-help-menu","sm-elevio","sm-load-external-svg","sm-site-status-indicator","sm-smuglog"]});
YUI.add("sm-controlpanel-helpers",(function(e){SM.currentModule="sm-controlpanel-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAccountSettingsUrl=function({nickname:e,section:n}={}){var t;return e=e||(null===(t=SM.env.loggedInUser)||void 0===t?void 0:t.nickName),"https://".concat(SM.env.host.main,"/app/account/settings").concat(e?"?nick=".concat(e):"").concat(n?"#section=".concat(n):"")}}(),SM.currentModule=null}),"",{});
YUI.add("sm-cropped-image-thumbnail",(function(e){SM.currentModule="sm-cropped-image-thumbnail";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-printmark-view-container")),i=babelHelpers.interopRequireDefault(t("sm-component-crop-mask"));function o(t){let r,o,n,{imageUrl:l,height:d,width:u,offsetLeft:m,offsetTop:s,displayHeight:p,displayWidth:c,perimeterHeight:f,perimeterWidth:h,perimeterIsRound:g,printmarkUri:b,productPreviewMode:k,maskRotation:M,maskRotationMatters:v,vendorID:w,sku:H,canCrop:R,onClick:y,showGrid:C}=t;if(!l)return null;if(w&&H){let t=M>=180?180:0,a=M%180?"portrait":"landscape";r=e.default.createElement("svg",{className:"sm-cropped-image-thumbnail-product-overlay",title:"crop-svg",style:{transform:"rotate(".concat(t,"deg)")}},e.default.createElement("use",{xlinkHref:"#sm-cropmask-def-".concat(w,"-").concat(H,"-").concat(a)}))}let S=e.default.createElement(a.default,{rotation:v?M:90,printmarkUri:b,perimeterWidth:h,perimeterHeight:f});h||f?o=S:n=S;let U={};return R&&(U.onClick=y),e.default.createElement("div",babelHelpers.extends({className:"sm-cropped-image-thumbnail",style:{height:d,width:u},"data-preview-mode":k,"data-can-crop":R},U),e.default.createElement("div",{className:"sm-cropped-image-container",style:{backgroundImage:"url(".concat(l,")"),width:c,height:p,marginLeft:-m,marginTop:-s}},e.default.createElement(i.default,{maskWidth:c,maskHeight:p,top:s,left:m,width:u,height:d,perimeterWidth:h,perimeterHeight:f,perimeterIsRound:g,showGrid:C,innerMaskContent:o},n,r)))}o.displayName="Thumbnail",o.propTypes={imageUrl:r.default.string,height:r.default.number,width:r.default.number,offsetLeft:r.default.number,offsetTop:r.default.number,printmarkUri:r.default.string,maskUri:r.default.string,maskRotation:r.default.number,maskRotationMatters:r.default.bool,vendorID:r.default.string,sku:r.default.string,perimeterHeight:r.default.number,perimeterWidth:r.default.number,productPreviewMode:r.default.bool,canCrop:r.default.bool,onClick:r.default.func},o.defaultProps={offsetTop:0,offsetLeft:0,maskRotation:90,maskRotationMatters:!1,perimeterHeight:0,perimeterWidth:0,productPreviewMode:!1,canCrop:!1,showGrid:!1,onClick:()=>{}}}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-printmark-view-container","sm-component-crop-mask"]});
YUI.add("sm-events-models",(function(e){SM.currentModule="sm-events-models";var t,a;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Base.create("sm-events-models-event",e.Model,[e.SM.ModelSyncAPI,e.ModelRelate],{idAttribute:"MarketingEventID",apiEndpoint:"event"},{ATTRS:{MarketingEventID:{value:null},Name:{value:""},NiceName:{value:""},Description:{value:""},EventDate:{value:""},EventType:{value:0},Location:{value:""},Public:{value:!1},URL:{value:""},ImageID:{value:0}},RELATIONSHIPS:{Image:{type:"toOne",key:"ImageID",relatedModel:"SM.Models.Image",relatedKey:"ImageID"}}}),e.namespace("SM.Events.Models").Event=t,a=e.Base.create("sm-events-models-eventlist",e.ModelList,[e.SM.ModelListSyncAPI],{model:e.SM.Events.Models.Event,apiEndpoint:"event",apiCategories:{featured:{method:"featured",expanded:{HighlightImages:e.SM.Models.ImageList}}},initializer:function(e){}},{}),e.namespace("SM.Events.Models").EventList=a,SM.currentModule=null}),"",{requires:["base","model","model-list","model-relate","sm-api","sm-image-model","sm-models-imagelist","sm-model-sync-api"]});
YUI.add("sm-flickr-logo",(function(e){SM.currentModule="sm-flickr-logo";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("react")),l=babelHelpers.interopRequireDefault(r("classnames"));function t({className:r,...t}){let a=(0,l.default)([r,"sm-flickr-prints-logo"]);return e.default.createElement("svg",babelHelpers.extends({className:a,height:"22px",role:"presentation",title:"Flickr Logo"},t),e.default.createElement("use",{href:"#sm-flickr-prints-def-FlickrWordmark",xlinkHref:"#sm-flickr-prints-def-FlickrWordmark"}))}t.displayName="FlickrLogo";var a=t;exports.default=a}(),SM.currentModule=null}),"",{requires:["react","classnames"]});
YUI.add("sm-folded-card-picker-skip",(function(e){SM.currentModule="sm-folded-card-picker-skip";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-panel-alert")),a=babelHelpers.interopRequireDefault(t("sm-component-busy")),n=babelHelpers.interopRequireDefault(t("sm-dom-core")),s=babelHelpers.interopRequireDefault(t("sm-component-button")),i=t("sm-com-lb-constants");class o extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",{error:!1,isSubmitting:!1}),babelHelpers.defineProperty(this,"_onContinueClick",async()=>{this.setState({isSubmitting:!0});try{await this.props.onContinueClick()}catch(e){this.setState({error:!0,isSubmitting:!1})}})}render(){let{error:t,isSubmitting:r}=this.state,{whccProduct:o}=this.props,u=o===i.WHCC_PRODUCT_TYPE_CARDS?"greeting card":"photo album";return e.default.createElement("div",{className:"sm-image-picker-skip-container sm-flex sm-flex-column sm-flex-justify-around"},t?e.default.createElement(l.default,{applyUserSkin:!0,iconName:null,title:"Error creating your ".concat(u,", please refresh and try again"),confirmLabel:"Refresh page",onConfirm:()=>n.default.doc.location.reload()}):null,e.default.createElement("div",{className:"sm-image-picker-skip-message sm-flex sm-flex-column sm-flex-justify-around sm-text-center"},e.default.createElement("h2",null,"Let's make some magic"),e.default.createElement("p",null,"In a moment, you'll be able to create and customize a beautiful ",u,"."),e.default.createElement(s.default,{skin:s.default.SKIN_ACCENT,onClick:this._onContinueClick,disabled:r},r?e.default.createElement(a.default,null):"Let's Go")))}}exports.default=o,babelHelpers.defineProperty(o,"displayName","CommerceGalleryImagePicker.Skip"),babelHelpers.defineProperty(o,"propTypes",{onContinueClick:r.default.func.isRequired,whccProduct:r.default.string.isRequired})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-panel-alert","sm-component-busy","sm-dom-core","sm-component-button","sm-com-lb-constants"]});
YUI.add("sm-gallery-overlays",(function(e){SM.currentModule="sm-gallery-overlays";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";e.DOM;var t,a,n,i=e.Node,s=e.config.doc,l=e.Lang,r=e.UA,o=e.config.win,c=SM,u=e.SM;e.namespace("SM"),t=e.Base.create("sm-captionkeywordsoverlay",e.SM.Panel,[],{initializer:function(t){this.set("visible",!1),this.set("centered",!0),this.set("width",336),this.set("title","Edit Photo Info"),this.set("smbuttons",[{value:"cancel",label:"Cancel"},{value:"save",label:"Save",skin:"submit"}]),this.image=t.image,this.album=t.album,this.galleryAlbum=t.galleryAlbum;var a=[{name:"Title",type:"text",label:"Title",value:this.image.get("Title")},{name:"CaptionRaw",type:"textarea",label:"Caption",value:this.image.get("CaptionRaw")},{name:"Keywords",type:"textarea",label:"Keywords",value:this._getKeywordString()}];this._form=new e.SM.Form({fields:a}).render()},renderUI:function(){t.superclass.renderUI.call(this),this.get("boundingBox"),this.setStdModContent("body",this._form.get("container"),"after")},bindUI:function(){t.superclass.bindUI.call(this);var a=this.get("boundingBox");e.delegate("click",this._handleButtonClick,a,".sm-button",this)},_getKeywordString:function(){var e=this.image.get("Keywords"),t=e.join("; ");return 1===e.length&&(t='"'+t+'"'),t},_handleButtonClick:function(e){var t=e.currentTarget.getAttribute("data-value");switch(e.preventDefault(),t){case"cancel":this.hide();break;case"save":this._saveChanges()}},show:function(){t.superclass.show.call(this),this.image.get("ShowKeywords")?this._form.showItem("Keywords"):this._form.hideItem("Keywords"),e.SM.Page.uxdisabled=!0},hide:function(){t.superclass.hide.call(this),e.SM.Page.uxdisabled=!1},update:function(){var e=this._form.get("model");e.set("Title",this.image.get("Title")),e.set("CaptionRaw",this.image.get("CaptionRaw")),e.set("Keywords",this._getKeywordString())},_saveChanges:function(){this.image.setAttrs(this._form.get("model").toJSON()),this.image.save({data:{ImageID:this.image.get("ImageID"),ImageKey:this.image.get("ImageKey"),GalleryAlbumID:this.galleryAlbum?this.galleryAlbum.get("AlbumID"):0,GalleryAlbumKey:this.galleryAlbum?this.galleryAlbum.get("AlbumKey"):""}},e.bind((function(t,a){if(a&&a.Image){var n=this.image;this.hide(),e.fire("image:updated",{image:n,updates:{Title:n.get("Title"),Caption:n.get("Caption"),Keywords:n.get("Keywords")}})}}),this))}},{CSS_PREFIX:"sm-panel",ATTRS:{draggable:{value:!0}}}),e.SM.CaptionKeywordsOverlay=t,function(){function t(e,t){this._fieldCfg=t}t.prototype.render=function(e){e.append(this._fieldCfg.value),e.addClass("sm-panel-content-margin"),this.container=e},t.prototype.setValue=function(e){this.container.setHTML(e)};var a={Personal:"This license grants you the right to display, print, or use the digital image for personal reasons.",Commercial:"This license grants you the right to display, print, or use the digital image for commercial reasons."},n={Printmarked:"These photos are printmarked",Standard:"These photos are NOT printmarked"},i={Web:"Your download will be approx. 640x480 and up to 0.3 Megapixels, suitable for web usage.",Low:"Your download will be up to 1 Megapixel, suitable for smaller print sizes and web usage.",High:"Your download will be up to 4 Megapixels in size, suitable for making larger prints.",Original:"Your download will be the largest file your photographer provides."},s=e.Base.create("sm-digitaldownloadoverlay",e.SM.Panel,[],{_handles:null,initializer:function(){this.set("title","Buy Gallery Download"),this.set("visible",!1),this.set("centered",!0),this.set("modal",!0),this.set("width",450),this.set("smbuttons",[{value:"cancel",label:"Cancel",skin:"submit"},{value:"cart",label:"Add To Cart",skin:"accent"}]),this._skusInCart={},this._handles=[]},renderUI:function(){s.superclass.renderUI.call(this)},show:function(){var t=this;/\S+\.smugmug\.[net|com]/.test(location.href)?this._show():e.Get.js(SM.env.host.cartUrl+"gallerySingle.mg?type=pricedGallery&smn=true&t="+Math.floor(1e5*Math.random()+1),(function(){u.Cart.getUserCart(SM.currentContext.DDCartID,{success:function(){t._show(SM.currentContext.DDCartURL)},context:this})}))},_show:function(t){t&&(this.cartURL=t);var a=e.SM.currency.getBuyerCurrency();return e.SM.currency.buyerCurrency!==a&&this._form&&this._setPrice(),this._attachEvents(),this._licenses?(this.centered(),this._setCartButtonState(),this.set("visible",!0)):(this._getDigitalDownloadData(),!0)},hide:function(){return this._detachEvents(),this.set("visible",!1)},_attachEvents:function(){this._handles.push(e.delegate("click",this._handleButtonClick,this.get("boundingBox"),".sm-button",this))},_detachEvents:function(){new e.EventHandle(this._handles).detach()},_handleButtonClick:function(e){var t=e.currentTarget.getAttribute("data-value");switch(e.preventDefault(),t){case"cancel":this.hide();break;case"cart":this._handleAddToCartClick()}},_handleAddToCartClick:function(){var e=this._getSkuId(),t=this._form.get("model"),a=t.get("License"),n=this._getPMValueForBoolean(t.get("printmarkToggle")),i=this._licenses[a][n].ProductID,s=this.get("album"),l=this.get("image");u.Cart.addDownloadItem({quantity:1,productId:i,skuId:e,albumId:s.get("AlbumID"),imageId:l.get("ImageID")},{success:this._handleAddToCartResponse,context:this})},_handleAddToCartResponse:function(t){var a,n=this._skusInCart,i=this._getSkuId(),s=e.SM.Page&&e.SM.Page.cart;n[i]=1,s&&s.navigation&&s.navigation.refresh(),this._skusInCart=n,this.hide(),(a=new e.SM.Panel.Confirm({centered:!0,width:"500px",modal:!0,disableScrollbars:!0,title:"Finished Adding to Cart",message:"Add to cart successful!",confirmLabel:"Go to Cart",cancelLabel:"Back to Gallery"})).render(),a.on("confirm",(function(e){e.confirmed&&(window.location=u.Cart.URL)}),this)},_getDigitalDownloadData:function(){var e=this.get("album"),t=this.get("image").get("ImageID");u.Cart.getDigitalDownloadData(e.get("AlbumID"),t,{success:this._handleDigitalDownloadResponse,context:this})},_handleDigitalDownloadResponse:function(e){var t=e.response.results,a=t.Downloads;this._skusInCart=t.skusInCart,a&&(this._licenses=a,this._createForm(a)),this.centered(),this.set("visible",!0)},_createForm:function(s){var l,r,o={type:"select",label:"License For",name:"License",options:[]},c=[o,{type:"CustomText",name:"licenseText"},{type:"toggle",name:"printmarkToggle",label:"Printmarked",hidden:!0},{type:"CustomText",name:"printmarkText",hidden:!0}];this.skuMap={},e.SM.Form.registerFormField("CustomText",t),e.Object.each(s,(function(t,a){o.options.push({value:a,label:a}),e.Object.each(t,(function(e,t){var n,i,l=e.skus||[];for("Printmarked"==t&&(s.hasPrintmark=!0),i={type:"select",label:"Image Size",hidden:!0,name:a+t+"skus",options:[]},n=0;n<l.length;n++)i.options.push({value:l[n].SkuID,label:l[n].Type}),this.skuMap[l[n].SkuID]=l[n].Type;i.options.length&&c.push(i)}),this)}),this),c[4].hidden=!1,c.push({type:"CustomText",name:"skuText",value:i[c[4].options[0].label]},{type:"select",label:"Currency",name:"currencySelector",options:[{value:"USD",label:"$ - US Dollar"},{value:"CAD",label:"CA$  - Canadian Dollar"},{value:"GBP",label:"£ - British Pound Sterling"},{value:"EUR",label:"€ - Euro"},{value:"AUD",label:"AU$  - Australian Dollar"},{value:"JPY",label:"¥ - Japanese Yen"},{value:"CHF",label:"CHF - Swiss Franc"},{value:"NZD",label:"NZ$ - New Zealand Dollar"},{value:"SEK",label:"SEK - Swedish Krona"},{value:"HKD",label:"HK$ - Hong Kong Dollar"}]},{type:"number",label:"Price",name:"price"},{type:"CustomText",name:"alreadyInCartText"}),r=o.options[0].value;var u=!s[r].Standard,d=this._getPMValueForBoolean(u);this._form=new e.SM.Form({fields:c,values:{License:r,licenseText:a[r],printmarkToggle:u,printmarkText:n[d],currencySelector:e.SM.currency.getBuyerCurrency(),alreadyInCartText:'<font color="red">This item is already in your cart. Please choose a different license or image size.</font>'}}).render(),l=this._form,this._setPrice(r,d),this._setCartButtonState(),s.hasPrintmark&&(l.showItem("printmarkToggle"),l.showItem("printmarkText")),this.set("bodyContent",l.get("container")),this._handles.push(l.get("model").after("change",this._handleChangeEvent,this))},_handleChangeEvent:function(t){var s=this._licenses;e.Object.each(t.changed,(function(l,r){if("price"!=r)if(this._togglingField)this._togglingField=!1;else{var o,c,u,d,h,g=this._form,m=g.get("model"),p=t.changed[r].newVal,b=t.changed[r].prevVal,v=s[m.get("License")].Standard,y=s[m.get("License")].Printmarked,k=m.get("printmarkToggle");if(b!=p){switch(r){case"License":o=c=this._getPMValueForBoolean(k),s[p][o]||(o=this._getPMValueForBoolean(!k)),g.hideItem(b+c+"skus"),g.showItem(p+o+"skus"),!v&&y?(this._togglingField=!0,m.set("printmarkToggle",!0)):(this._togglingField=!0,m.set("printmarkToggle",!1)),(s[p].Standard?!s[p].Printmarked:s[p].Printmarked)?g.getField("printmarkToggle").disable():g.getField("printmarkToggle").enable(),m.set("licenseText",a[p]);break;case"printmarkToggle":if(u=m.get("License"),s[u].Standard?!s[u].Printmarked:s[u].Printmarked)return this._togglingField=!0,void m.set("printmarkToggle",b);g.hideItem(u+this._getPMValueForBoolean(b)+"skus"),g.showItem(u+this._getPMValueForBoolean(p)+"skus");break;case"currencySelector":d=m.get("currencySelector"),e.SM.currency.setCurrencyCookie(d)}u=u||m.get("License"),o=o||this._getPMValueForBoolean(m.get("printmarkToggle")),h=m.get(u+o+"skus"),m.set("printmarkText",n[o]),m.set("skuText",i[this.skuMap[h]]),this._setPrice(u,o),this._setCartButtonState()}}}),this)},_setCartButtonState:function(){var e=this._skusInCart,t=this._form,a=this._getSkuId();null===e||void 0===e[a]?(t.hideItem("alreadyInCartText"),this.get("boundingBox").one('[data-value="cart"]').removeAttribute("disabled")):(t.showItem("alreadyInCartText"),this.get("boundingBox").one('[data-value="cart"]').set("disabled","disabled"))},_getPMValueForBoolean:function(e){return e?"Printmarked":"Standard"},_getSkuId:function(){var e=this._form.get("model"),t=e.get("License"),a=this._getPMValueForBoolean(e.get("printmarkToggle"));return e.get(t+a+"skus")},_setPrice:function(t,a){var n,i,s,l,r,o,c,u=this._licenses,d=this._form.get("model"),h=t||d.get("License"),g=a||this._getPMValueForBoolean(d.get("printmarkToggle")),m=d.get(h+g+"skus"),p=u[h][g].skus;for(n=0;n<p.length&&(i=p[n]).SkuID!=m;n++);s=i.Price,r={currencyCode:l=e.SM.currency.getBuyerCurrency()},o=i.SalePriceCurrency,c=e.SM.currency.formatAndConvert(s,o,l,r,{}),d.set("price",c)}},{CSS_PREFIX:"sm-panel",ATTRS:{album:{value:null},image:{value:null}}});e.SM.DigitalDownloadOverlay=s}(),a=SM.env.host.cartOrigin+"/sales/packages/edit?mode=choose&id={packageId}&from={fromUrl}&albumKey={albumKey}",n=e.Base.create("sm-packagesoverlay",e.SM.Panel,[],{_packages:null,_packageClickDelegate:null,initializer:function(){this.set("visible",!1),this.set("zIndex",1001),this.set("centered",!0),this.set("fillHeight",null),this.set("modal",!0),this._eventHandles=[]},renderUI:function(){this.set("headerContent",this._getHeaderNode()),this.set("footerContent",this._getFooterNode())},syncUI:function(){this.get("boundingBox").addClass("sm-overlay-packages"),this.centered()},show:function(){if(e.SM.currency.getBuyerCurrency()!=this.get("buyerCurrency")&&(this.set("buyerCurrency",e.SM.currency.getBuyerCurrency()),this.set("bodyContent",this._getBodyNode())),this._attachEvents(),e.SM.Page.uxdisabled=!0,!l.isNull(this._packages))return this.centered(),this.set("visible",!0);this._getPackages()},hide:function(){return this._detachEvents(),e.SM.Page.uxdisabled=!1,this.set("visible",!1)},_attachEvents:function(){this._eventHandles.push(e.on("click",this._handleCancelClick,this.get("boundingBox").one(".sm-button-skin-submit"),this)),this._eventHandles.push(e.on("click",this._handleContClick,this.get("boundingBox").one(".sm-button-skin-accent"),this)),this._packageClickDelegate=e.delegate("click",this._handlePackageClick,this.get("boundingBox"),"li.sm-package",this)},_detachEvents:function(){e.each(this._eventHandles,(function(e){e.detach()})),e.detach(this._packageClickDelegate),this._packageClickDelegate=null},_getHeaderNode:function(){return i.create(l.sub('<h3 class="sm-m-2 sm-text-center">{title}</h3>',{title:"Buy Photo Package"}))},_getFooterNode:function(){var t=i.create('<div class="sm-packages-buttons sm-flex"></div>'),a=e.SM.Templates.button({label:"Continue",skin:"accent"}),n=e.SM.Templates.button({label:"Cancel",skin:"submit"});return t.append(n),t.append(a),t.one(".sm-button-skin-accent").set("disabled","disabled"),this.set("cancelButton",n),this.set("contButton",t.one(".sm-button-skin-accent")),t},_getBodyNode:function(){var t=i.create('<ul class="sm-package-items"></ul>'),a=s.createDocumentFragment(),n=this._packages.length,r=null,o=0,c=null,d="",h=null,g=null;if(n>0){for(h=0;h<n;h++){for(o=(r=this._packages[h]).items.length,d="",g=0;g<o;g++)c=r.items[g],d+=l.sub('<li class="sm-py-1"><span class="sm-mr-4">{quantity}</span> {name}</li>',{quantity:c.quantity,name:c.name});a.appendChild(i.getDOMNode(i.create(l.sub('<li class="sm-package sm-flex sm-flex-column {itemClass} sm-p-4" data-packageid="{packageId}">\n            <div class="sm-flex sm-flex-column">\n                <div class="sm-flex sm-flex-row">\n                    <h2 class="sm-pr-2">{name}</h2>\n                    <h2 class="sm-package-price sm-pl-2" title="{priceTitle}">{price}</h2>\n                </div>\n                <div>\n                    <p class="sm-package-description sm-py-2">{description}</p>\n                </div>\n            </div>\n            <ul class="sm-package-skus sm-flex sm-flex-column sm-py-2">\n                {items}\n            </ul>\n        </li>',{packageId:r.packageId,name:r.name,totalItems:r.totalItems,price:e.SM.currency.formatAndConvert(r.salePrice,r.currency,this.get("buyerCurrency")),priceTitle:e.SM.currency.generateTitleString(e.SM.currency.getExchangeRate(r.currency,this.get("buyerCurrency")),r.salePrice,r.currency,this.get("buyerCurrency")),multiImage:r.multiImage?"Multi-Image":"Single-Image",description:r.description,items:d,itemClass:0===h?" sm-package-selected":""})))),0===h&&(this.set("packageId",r.packageId),this.get("contButton").set("disabled",""))}t.append(a)}else t=i.create("<div></div>"),new u.MessageBox({type:u.MessageBox.TYPES.ALERT,message:"There are no packages available from this pro."}).render(t);return t},_getPackages:function(){var e=this.get("albumKey");this._packages||(new u.API).sendRequest({method:"rpc.package.get",data:{albumKey:e},callback:{success:this._handleApiResponse,context:this}})},_handleCancelClick:function(e){e.preventDefault(),this.hide()},_handleContClick:function(e){var t=this.get("contButton");e.preventDefault(),!1===t.get("disabled")&&(s.location.href=l.sub(a,{packageId:this.get("packageId"),fromUrl:o.location.href,albumKey:this.get("albumKey")}))},_handlePackageClick:function(e){var t=e.currentTarget,a=this.get("contButton");e.preventDefault(),i.all("li.sm-package").removeClass("sm-package-selected"),t.addClass("sm-package-selected"),this.set("packageId",t.getAttribute("data-packageid")),a.set("disabled","")},_handleApiResponse:function(e){var t=e.response.results;return this._packages=t.Packages,this.set("bodyContent",this._getBodyNode()),this.centered(),this.set("visible",!0)}},{CSS_PREFIX:"sm-panel",ATTRS:{albumKey:{value:null},cancelButton:{value:null},contButton:{value:null},packageId:{value:0},buyerCurrency:{value:e.SM.currency.getBuyerCurrency()}}}),e.SM.PackagesOverlay=n;var d,h,g,m,p=SM.import("sm-analytics"),b=SM.import("sm-dom"),v=SM.import("sm-page"),y=SM.import("lodash");d=c.env.host.imgUrl,h=e.SM.Templates.button({label:"Get started!",href:"http://www.blurb.com/partner/smugmug",target:"_blank"}),g='<div class="'.concat("sm-tab-panel-content",'">\n                <div data-partner="Blurb" class="').concat("sm-marketing-section",'">\n                    <a data-type="Image" href="http://www.blurb.com/partner/smugmug" target="_blank"><img src="').concat(d+"prints/blurb-photo-books-black-2.jpg",'" alt="Blurb photo books" class="imgBorder sm-marketing-image" border="0" height="300" hspace="0" vspace="0" width="410"></a>\n                    <div style="margin-left:435px;">\n                        <h2><a data-type="Link" href="http://www.blurb.com/partner/smugmug" target="_blank" style="text-decoration: none;">Blurb</a></h2>\n                        <p><a data-type="Link" href="http://www.blurb.com/partner/smugmug" target="_blank">Blurb</a> helps you create custom, bookstore-quality photo books and magazines. With creative layout tools Bookify™ and Blurb BookWright®, you can use your SmugMug photos and print beautiful books with softcover, dust-jacket, and ImageWrap cover treatments as well as magazines. Opt for an archival, premium look and feel with professional-grade papers, linen covers, and a curated collection of end sheets for your photo book needs.</p>\n                        <p><strong>From $14.99. 35% off for SmugMug customers.</strong></p>\n                        <div data-type="Button" class="sm-marketing-button">').concat(h,'</div>\n                        <div class="sm-clear"></div>\n                    </div>\n                </div>\n            </div>'),m=e.Base.create("sm-ownerbuyoverlay",e.SM.Panel,[],{_buttons:null,_handles:null,_resizing:!1,_resizeTimer:null,initializer:function(){this._buttons={},this.set("visible",!1),this.set("zIndex",1001),this.set("centered",!0),this.set("width",1e3),this.set("fillHeight",null),this.set("modal",!0),this.get("boundingBox").addClass("sm-owner-buy").setStyle("position","fixed")},renderUI:function(){m.superclass.renderUI.call(this),this.set("bodyContent",this._getBodyNode())},bindUI:function(){y.map(["Montage","Blurb","Animoto Pro","fotoflot"],function(e){let t=b.querySelector('[data-partner="'+e+'"]'),a=b.querySelectorAll('[data-type="Link"]',t),n=b.querySelectorAll('[data-type="Image"]',t),i=b.querySelectorAll('[data-type="Button"]',t);y.map(a,function(t){b.addEventListener(t,"click",this._onTrackableClick.bind(null,e,"Link"),this)}.bind(this)),y.map(n,function(t){b.addEventListener(t,"click",this._onTrackableClick.bind(null,e,"Image"),this)}.bind(this)),y.map(i,function(t){b.addEventListener(t,"click",this._onTrackableClick.bind(null,e,"Button"),this)}.bind(this))}.bind(this));let t=e.one(".animotoButton");t&&e.on("click",this._onAnimotoButtonClick.bind(this),t)},_onTrackableClick:function(e,t){p.Tracker.createEvent(p.CATEGORY.PARTNER_PRODUCTS,"Start",{label:e,property:t,isOwner:!(!v.user||!v.user.isOwner)}).addContext(p.CONTEXT.SCREEN,{}).log()},_onAnimotoButtonClick:function(){var t=this.get("album"),a=[];e.SM.Resource.loadUri("/api/v2/album/"+t.get("AlbumKey")+"!images",{expand:["ImageSizeDetails"]}).then((function(e){e.map((function(e){var t=e.getExpansion("ImageSizeDetails"),n=t.get("UsableSizes"),i=n[n.length-1],s=t.get(i).Url;a.push(s)}));var t=b.querySelector("#animotoForm");a.map((function(e){var a=document.createElement("input");a.type="hidden",a.name="a[]",a.value=e,t.appendChild(a)})),t.submit()}))},show:function(){this._attachEvents(),this.set("visible",!0),this._centerOverlay();var t=this.get("boundingBox").all("iframe");t&&t.each((function(e){e.setStyle("display","inline-block")})),e.SM.Page.uxdisabled=!0},hide:function(){return this._detachEvents(),e.SM.Page.uxdisabled=!1,this.set("visible",!1)},_attachEvents:function(){this._handles=[],(0===r.ie||r.ie>=9)&&this._handles.push(e.on("windowresize",e.bind(this._handleResize,this)))},_detachEvents:function(){e.each(this._handles,(function(e){e.detach()})),this._handles=null},_handleResize:function(){!1===this._resizing&&(this._resizeTimer&&this._resizeTimer.cancel(),this._resizing=!1,this._resizeTimer=e.later(500,this,this._centerOverlay,!1))},_centerOverlay:function(){var t=this.get("boundingBox"),a=e.DOM.winHeight();t.all(".sm-tab-panel-content").setStyles({maxHeight:a-80,overflow:"auto"}),this.centered()},_getBodyNode:function(){var e=i.create('<div class="yui3-g">');return e.append('<div class="yui3-u-23-24"><div>'+g+"</div></div>"),this.set("bodyContent",e),e},_handleTabViewChange:function(e){var t=this.get("boundingBox"),a=e.newVal.get("label");p.Tracker.createEvent(p.CATEGORY.PARTNER_PRODUCTS,"Screen View",{label:a,isOwner:!(!v.user||!v.user.isOwner)}).addContext(p.CONTEXT.SCREEN,{screen_name:a}).log(),setTimeout(()=>{var e=t._node.getBoundingClientRect();e.top+e.height>window.innerHeight&&this._centerOverlay()},0)},_handleCancelClick:function(){this.hide()}},{CSS_PREFIX:"sm-panel",ATTRS:{album:{value:{}},tabview:{value:null},cancelButton:{readOnly:!0,valueFn:function(){return new u.Button({label:"Cancel",skin:u.Button.SKINS.DARK})}},closable:{value:!0},title:{value:" "}}}),e.SM.OwnerBuyOverlay=m}(),SM.currentModule=null}),"",{requires:["anim","cookie","dom","datatype-date-format","node","tabview","sm-button","sm-button-group","sm-cart","sm-currency","sm-panel","sm-panel-confirm","sm-templates-form","sm-resource-core","sm-analytics","lodash","sm-dom","sm-page","sm-page-nav-cart"]});
YUI.add("sm-gallery-prefetcher",(function(e){SM.currentModule="sm-gallery-prefetcher";var t,r,h,n,s,a,i,c,u,o,d,l,f,p;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Event,r=e.Lang,h=new Image,n=!0,s=[],a=0,i=[],c=[],u=[],o=!1,d=0,l=0,f=!1,p=e.Base.create("sm-prefetcher",e.Base,[],{initializer:function(e){},_handlePreFetch:function(e){if(!1===o&&(++l!=i[d]&&!1!==c[d]||(c[d]=!1,l=0,d++),d==a))return n=!0,this.detachEvents(),this.set("paused",n),void this.fire("complete");this._start()},_preFetch:function(e){h.src!=e?h.src=e:this._handlePreFetch(null)},_start:function(){var e="";if(o=!1,!1===n){if(e=u.pop(),r.isUndefined(e)||""===e){if(e="",!(d<a))return void this.pause();if(!0!==c[d])return void this._handlePreFetch(null);l<i[d]&&(e=s[d][l])}else o=!0;e.length>0&&this._preFetch(e)}},attachEvents:function(){!1===f&&(t.attach("load",this._handlePreFetch,h,this),t.attach("error",this._handlePreFetch,h,this),t.attach("abort",this._handlePreFetch,h,this),f=!0)},detachEvents:function(){t.detach("load",this._handlePreFetch,h),t.detach("error",this._handlePreFetch,h),t.detach("abort",this._handlePreFetch,h),f=!1},addQueue:function(e){a++,s.push(e),i.push(e.length),c.push(!0)},stopCurrent:function(){c[d]=!1},stopAll:function(){for(var e=0;e<a;e++)c[e]=!1},promoteUrl:function(e){u.push(e)},run:function(){!0===n&&(this.attachEvents(),n=!1,this.set("paused",n),this._start())},pause:function(){n=!0,this.set("paused",n)}},{ATTRS:{paused:{value:!0}}}),e.namespace("SM"),e.SM.PreFetcher=p,SM.currentModule=null}),"",{requires:["node","base"]});
YUI.add("sm-gallery-views-constants",(function(E){SM.currentModule="sm-gallery-views-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GALLERY_IMAGE_ENTITY_PAGE_REQUEST=exports.GALLERY_IMAGE_ENTITY_REQUEST=exports.ACTION_DEFAULT=exports.ACTION_LIGHTBOX=exports.DOWNLOAD_PAGE_PREFIX=exports.ROUTE_SIZES=exports.GALLERY_TYPES=exports.HASH_BANG=exports.DASH=exports.SLASH=exports.HASH=exports.BANG=void 0;exports.BANG="!";exports.HASH="#";exports.SLASH="/";exports.DASH="-";exports.HASH_BANG="#!";exports.GALLERY_TYPES={ALBUM:"album",KEYWORD:"keyword",POPULAR:"popular",DATE:"date"};exports.ROUTE_SIZES={A:!0,S:!0,M:!0,L:!0,XL:!0,X2:!0,X3:!0,X4:!0,X5:!0,"4K":!0,"5K":!0,320:!0,640:!0,1280:!0,1920:!0,O:!0};const E="https://".concat(SM.env.host.ssl,"/download");exports.DOWNLOAD_PAGE_PREFIX=E;exports.ACTION_LIGHTBOX="lightbox";exports.ACTION_DEFAULT="";exports.GALLERY_IMAGE_ENTITY_REQUEST="GALLERY_IMAGE_ENTITY_REQUEST";exports.GALLERY_IMAGE_ENTITY_PAGE_REQUEST="GALLERY_IMAGE_ENTITY_PAGE_REQUEST"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-image-cropper-helpers",(function(t){SM.currentModule="sm-image-cropper-helpers";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canRotateCrop=exports.rotateCrop=exports.scaleMaskAttributes=exports.scaleCropAttributes=exports.calculateMaskConstraints=exports.calculateDefaultCrop=exports.constrainCrop=exports.isCropRotated=void 0;var t=e("sm-catalog-constants");const i=(t,e,i=0)=>{let r=e>1,o=i%180;return!!(!r&&0===o||r&&90===o)};exports.isCropRotated=i;const r=(t,e)=>{let{width:i,height:r,top:o,left:h}=t,{width:a,height:n}=e,d=i/r;if(r>n){r=n;let t=i;i=Math.round(n*d),o=0,h+=Math.round((t-i)/2)}if(i>a){i=a;let t=r;r=Math.round(a/d),h=0,o+=Math.round((t-r)/2)}return o<0?o=0:o+r>n&&(o=n-r),h<0?h=0:h+i>a&&(h=a-i),{...t,width:i,height:r,top:o,left:h}};exports.constrainCrop=r;exports.calculateDefaultCrop=(e,i)=>{let{width:r,height:o}=e,{width:h,height:a,borderWidth:n,borderHeight:d,lockOrientation:u}=i;if(n&&(h+=2*n),d&&(a+=2*d),!a&&!h)return{width:0,height:0,top:0,left:0,rotation:0};let l,s=r/o,c=h/a,p={aspectRatio:c,top:0,left:0,width:r,height:o,rotation:c>1?0:90},g={...p,aspectRatio:1/p.aspectRatio,rotation:p.rotation?0:90};if([p,g].forEach(t=>{s<=t.aspectRatio?(t.height=Math.round(r/t.aspectRatio),t.top=Math.round((o-t.height)/2)):(t.width=Math.round(o*t.aspectRatio),t.left=Math.round((r-t.width)/2))}),!u){let t=p.width*p.height,e=g.width*g.height;return t===e?p.aspectRatio>1?p:g:t>e?p:g}return l=u===t.ORIENTATION_LANDSCAPE!=c>=1,l?g:p};exports.calculateMaskConstraints=(t,e,r={})=>{let{width:o,height:h}=t,{width:a,height:n,minWidth:d,minHeight:u,borderWidth:l,borderHeight:s}=e;if(a>n&&d<u||a<n&&d>u)throw new Error("Product orientation does not match the orientation of the product's minimum dimensions");let{rotation:c}=r;l&&(a+=2*l),s&&(n+=2*s);let p=a/n,g=i(0,p,c),M=0,m=0;return l&&(m=l/a*100,M=s/n*100),{minWidth:g?u:d,minHeight:g?d:u,aspectRatio:g?1/p:p,perimeterWidth:g?M:m,perimeterHeight:g?m:M}};exports.scaleCropAttributes=(t,e)=>({...t,width:Math.round(t.width*e),height:Math.round(t.height*e),top:Math.round(t.top*e),left:Math.round(t.left*e)});exports.scaleMaskAttributes=(t,e)=>({...t,minWidth:Math.round(t.minWidth*e),minHeight:Math.round(t.minHeight*e)});const o=(t,e)=>{let{width:i,height:o,top:h,left:a,rotation:n=0}=t;[o,i]=[i,o];let d=a+o/2,u=h+i/2,l={width:i,height:o,top:Math.round(u-o/2),left:Math.round(d-i/2),rotation:(n+90)%360};return e&&(l=r(l,e)),l};exports.rotateCrop=o;exports.canRotateCrop=(t,e,i,r)=>{let{width:h,height:a}=t;if(h===a)return!1;let n=o(t,r);return n.width/n.height>=1!=e/i>=1&&([i,e]=[e,i]),!(n.width<e||n.height<i)}}(),SM.currentModule=null}),"",{requires:["sm-catalog-constants"]});
YUI.add("sm-image-cropper",(function(e){SM.currentModule="sm-image-cropper";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-adjustable-crop-mask")),i=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-icon")),l=babelHelpers.interopRequireDefault(t("sm-printmark-view-container"));class o extends e.PureComponent{render(){let t,r,{previewURL:o,previewScale:u,previewDimensions:s,cropAttributes:d,maskAttributes:m,canRotateCrop:p,disableCropping:c,hideDefaultCropControls:f,vendorID:b,sku:R,productName:g,printmarkUri:h,rotationMatters:C,error:k,onRotateClick:q,onResetClick:v,onCropChange:E}=this.props,M=d.rotation,w=M>=180?180:0,D=M%180?"portrait":"landscape",H=e.default.createElement("svg",{className:"sm-image-cropper-product-overlay",title:"crop-svg",style:{transform:"rotate(".concat(w,"deg)")}},e.default.createElement("use",{href:"#sm-cropmask-def-".concat(b,"-").concat(R,"-").concat(D),xlinkHref:"#sm-cropmask-def-".concat(b,"-").concat(R,"-").concat(D)}));m={...m,perimeterIsRound:g.indexOf("Round ")>-1};let S=e.default.createElement(l.default,{printmarkUri:h,rotation:C?d.rotation:90});m.perimeterWidth||m.perimeterHeight?t=S:r=S;let N=!p||c;return e.default.createElement("div",{className:"sm-image-cropper-container"},e.default.createElement("div",{className:"sm-image-cropper-error"},k),e.default.createElement("div",{style:{backgroundImage:"url(".concat(o,")"),width:s.width,height:s.height},className:"sm-image-cropper-mask-container"},e.default.createElement(a.default,babelHelpers.extends({},d,m,{maskWidth:s.width,maskHeight:s.height,printmarkUri:h,touchDelay:0,onCropChange:E.bind(null,u),innerMaskContent:t,disableCropping:c}),r,H)),!f&&e.default.createElement("div",{className:"sm-image-cropper-crop-controls sm-flex sm-flex-justify-center"},!N&&e.default.createElement(i.default,{disabled:N,onClick:q},e.default.createElement(n.default,{name:"Rotate",size:n.default.SIZE_LARGE}),e.default.createElement("span",{className:"sm-button-label"},"Rotate")),!c&&e.default.createElement(i.default,{disabled:c,onClick:v},e.default.createElement(n.default,{name:"Reset",size:n.default.SIZE_LARGE}),e.default.createElement("span",{className:"sm-button-label"},"Reset"))))}}exports.default=o,o.displayName="ImageCropper.ImageCropper",o.propTypes={previewURL:r.default.string.isRequired,previewScale:r.default.number.isRequired,previewDimensions:r.default.shape({width:r.default.number.isRequired,height:r.default.number.isRequired}).isRequired,cropAttributes:r.default.shape({width:r.default.number.isRequired,height:r.default.number.isRequired,top:r.default.number.isRequired,left:r.default.number.isRequired,rotation:r.default.number}).isRequired,canRotateCrop:r.default.bool,disableCropping:r.default.bool,hideDefaultCropControls:r.default.bool,maskAttributes:r.default.shape({aspectRatio:r.default.number.isRequired,minWidth:r.default.number.isRequired,minHeight:r.default.number.isRequired,perimeterWidth:r.default.number.isRequired,perimeterHeight:r.default.number.isRequired}).isRequired,vendorID:r.default.string,sku:r.default.string,productName:r.default.string,printmarkUri:r.default.string,rotationMatters:r.default.bool,error:r.default.string,onRotateClick:r.default.func,onResetClick:r.default.func,onCropChange:r.default.func},o.defaultProps={printmarkUri:"",rotationMatters:!1,canRotateCrop:!0,disableCropping:!1,hideDefaultCropControls:!1,onClose:()=>{},onCropChange:()=>{}}}(),SM.currentModule=null}),"",{requires:["react","react-redux","sm-modal","sm-component-adjustable-crop-mask","sm-component-button","sm-component-panel","sm-icon","sm-printmark-view-container","sm-redux-store"]});
YUI.add("sm-image-editor-constants",(function(e){SM.currentModule="sm-image-editor-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROCESSING_SIZES=exports.PROCESSING_IMAGE_URL=exports.IMAGE_SIZES=exports.IMAGES_PER_PAGE=exports.TILES_PADDING=exports.SIDEBAR_WIDTH=void 0;exports.SIDEBAR_WIDTH=360;exports.TILES_PADDING=48;exports.IMAGES_PER_PAGE=200;exports.IMAGE_SIZES={ImageSizeSmall:!0,ImageSizeMedium:!0,ImageSizeLarge:!0,ImageSizeXLarge:!0,ImageSizeX2Large:!0,ImageSizeX3Large:!0,ImageSizeOriginal:800};exports.PROCESSING_IMAGE_URL="//cdn.smugmug.com/img/processing-NeXT-{size}.png";exports.PROCESSING_SIZES={Ti:100,Th:150,S:300,M:450,L:600,XL:768,X2:960,X3:1200}}(),SM.currentModule=null}),"",{});
YUI.add("sm-image-editor-helpers",(function(e){SM.currentModule="sm-image-editor-helpers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageUrlForSize=exports.getProcessingUrlForSize=void 0;var t=r("sm-image-editor-constants");const i=(r,i,n)=>{var o=e.Lang.sub(t.PROCESSING_IMAGE_URL,{size:"X3"});return e.Object.some(t.PROCESSING_SIZES,(function(r,s){if(r>=i||r>=n)return o=e.Lang.sub(t.PROCESSING_IMAGE_URL,{size:s}),!0})),o};exports.getProcessingUrlForSize=i;exports.getImageUrlForSize=(r,n,o)=>{if(n&&n>0||(n=0),o&&o>0||(o=0),r.get("Processing"))return i(0,n,o);var s=r.getExpansion("ImageSizeDetails"),u=s.get("UsableSizes"),a=e.Array.filter(u,(function(e){var i=t.IMAGE_SIZES[e];if(i){if("boolean"==typeof i)return e;var n=s.get(e);if(r.get("IsVideo")||n.Height<=i&&n.Width<=i)return e}})),g=s.get(a[a.length-1]).Url;return(n||o)&&e.Array.some(a,(function(e){var r=s.get(e);if(r.Width>=n||r.Height>=o)return g=r.Url,!0})),g}}(),SM.currentModule=null}),"",{requires:["sm-image-editor-constants"]});
YUI.add("sm-image-editor-panel",(function(e){SM.currentModule="sm-image-editor-panel";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("lodash")),s=babelHelpers.interopRequireDefault(t("sm-analytics")),n=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("react-dom")),r=babelHelpers.interopRequireDefault(t("sm-redux-store")),o=t("react-redux"),l=babelHelpers.interopRequireDefault(t("sm-header-help-container")),d=babelHelpers.interopRequireDefault(t("sm-smuglog")),u=t("sm-templates-button"),h=babelHelpers.interopRequireDefault(t("sm-image-editor-sidebar")),c=babelHelpers.interopRequireDefault(t("sm-image-editor-plugin-single")),m=babelHelpers.interopRequireDefault(t("sm-image-editor-plugin-bulk")),g=t("sm-image-editor-constants");const _='<div class="sm-bar sm-bar-nochrome"><h3>Edit</h3><div class="sm-imageedit-help-container sm-bar-support-wrapper"></div>'+(0,u.button)({className:"sm-imageedit-done",label:"Close",size:"small",skin:"submit"})+"</div>";var f=e.Base.create("imageEditorPanel",e.Panel,[],{classNames:{done:"sm-imageedit-done",help:"sm-imageedit-help",mask:"sm-imageedit-mask",mainContainer:"sm-imageedit-main",noScroll:"sm-imageedit-noscroll",tilesContainer:"sm-imageedit-tiles"},errorMessages:{adminCollected:"Careful! You are loading one or more item(s) collected from another user into the editor. Any changes you make will affect those photos/videos as well.",generic:"Ack! An error occurred that prevented one or more items from loading. Please check your Internet connection is working, then try again."},DEF_PARENT_NODE:".sm-overlay-container",initializer:function(t){t.startIndex&&(this._startIndex=t.startIndex),t.startTool&&(this._startTool=t.startTool),this._attachEvents(),this._scrollbarWidth=e.UA.webkit?8:e.DOM.getScrollbarWidth(),this.set("hideOn",[])},destructor:function(){this._detachEvents(),this._detachUIEvents(),this.sidebar.destroy(),this.sidebar=null,this._selectedImages=null,this._selectedImageCount=null,this._startTool=null,this.unplug("mode")},alert:function(t){t||(t=this.errorMessages.generic);var i=this;return new e.Promise((function(s){var n=new e.SM.Panel.Alert({message:t});n.render(),n.show(),n.on("visibleChange",(function(e){e.newVal||(n.destroy(),i.hasAlert=!1,s())}))}))},createBaseAnalyticsEvent:function(e,t){t=t||{};var{selected_items:n,...a}=t,r=s.default.Tracker.createEvent(s.default.CATEGORY.IMAGE_EDITOR,e,a),o={total_images:this._imageCount,total_items:this._itemCount,total_videos:this._videoCount};return i.default.merge(o,{selected_items:n}),r.addContext(s.default.CONTEXT.COLLECTION,o),r},_attachEvents:function(){this._detachEvents(),this._eventHandles=[this.after("render",this._afterRender),this.on("visibleChange",this._onVisibleChange)]},_attachUIEvents:function(){this._detachUIEvents();var t=this.getStdModNode(e.WidgetStdMod.HEADER),i=this.sidebar;this._uiEvents=[e.on("windowresize",this._onWindowResize,null,this),t.one("."+this.classNames.done).on("click",this._onCloseClick,this),i.on("lockSelection",this._onSidebarLock,this),i.on("unlockSelection",this._onSidebarUnlock,this),this.mode.on("selectedChange",this._onSelectedImagesChange,this)]},_detachEvents:function(){this._eventHandles&&(new e.EventHandle(this._eventHandles).detach(),this._eventHandles=null)},_detachUIEvents:function(){this._uiEvents&&(new e.EventHandle(this._uiEvents).detach(),this._uiEvents=null)},_getLoadingProgress:function(t){t||(t={});var i=this._loadingProgress;return i||(i=this._loadingProgress=new e.SM.Panel.Progress({progressBarConfig:e.merge({message:"Loading..."},t)})).render(),i},_hasCollected:function(){if(!e.SM.Page.user.isAdmin)return!1;var t=e.SM.Page.owner;return e.Array.some(this._imageResources,(function(e){return t.nickName!==e.getExpansion("ImageAlbum.User").get("NickName")}))},_hide:function(){this._detachUIEvents();var t=this.get("maskNode"),i=this.classNames;t&&t.removeClass(i.mask),this._container.setStyles({height:null,width:null}),e.one("body").removeClass(i.noScroll),e.SM.Page.uxdisabled=this._uxState,this.createBaseAnalyticsEvent("Close Editor").log()},_loadAlbumExpansions:function(){var t=this._albumResource,i=t.getExpansionUri("AlbumImages"),s=t.get("ImageCount"),n=this,a=[],r=function(t){return e.SM.Resource.loadUri(i,{count:g.IMAGES_PER_PAGE,start:t,expand:["ImageSizeDetails"]}).then((function(t){return Array.prototype.push.apply(a,t),e.when()}))};return new e.Promise((function(t,i){for(var o=[],l=1;l<=s;l+=g.IMAGES_PER_PAGE)o.push(e.bind(r,n,l));e.SM.PromiseQueue(o).then((function(){t(a)}),i)}))},_loadAlbumResource:function(){var t=this.get("albumUri");return t?e.SM.Resource.loadUri(t,{expand:["Folder"]}):e.when(null)},_loadImageResources:function(t){var i=this.get("imageUris");if(t&&(this._albumResource=t),!i)return this._loadAlbumExpansions();var s=["ImageSizeDetails"];return e.SM.Page.user.isAdmin&&s.push("ImageAlbum","ImageAlbum.User"),e.SM.Resource.loadUris(i,{expand:s}).then((function(e){return e}))},_loadSidebar:function(){var t=this._loadSidebarPromise;return t||(t=this._loadSidebarPromise=new e.Promise((function(t){e.use.apply(e,["sm-image-editor-sidebar",t])}))),t},_loadResources:function(){var t=this;return new e.Promise((function(i,s){t._loadAlbumResource().then(e.bind(t._loadImageResources,t)).then(e.bind(t._pluginMode,t)).then(e.bind(t._hasCollected,t)).then(i,s)}))},_pluginMode:function(t){if(!t||!t[0].isSmugMugResource)throw new Error("Error loading image data.");var i=this._itemCount=t.length,s=this.mode,n=s&&s.isBulk,a=0,r=0;return e.Array.each(t,(function(e){e.get("IsVideo")?r+=1:a+=1})),this._imageResources=this._selectedImages=t,this._imageCount=this._selectedImageCount=a,this._videoCount=r,i>1?s&&n||(this.unplug("mode"),this.plug(m.default)):s&&!n||(this.unplug("mode"),this.plug(c.default)),this._updateSidebarState(),t},_renderBody:function(){var t=this._container=e.Node.create('<div class="sm-imageedit-body"><div class="sm-imageedit-main"></div></div>'),i=this;this.setStdModContent(e.WidgetStdMod.BODY,t),this._mainContainer=t.one("."+this.classNames.mainContainer),this._loadSidebar().then((function(e){(i.sidebar=new h.default({container:t,editor:i})).render()})),this.fire("renderBody",{node:t})},_renderEditView:function(){(this._boundingBox=this.get("boundingBox"))._node.style.top=0,this._renderHeader(),this._renderBody(),this.rendered=!0},_renderHeader:function(){var t=e.Node.create(_);this.setStdModContent(e.WidgetStdMod.HEADER,t);let i=t.one(".sm-imageedit-help-container");i&&a.default.render(n.default.createElement(o.Provider,{store:r.default},n.default.createElement(l.default,null)),i.getDOMNode()),this.fire("renderHeader",{node:t})},_show:function(){e.one("body").addClass(this.classNames.noScroll);var t=this.get("maskNode");t&&t.addClass(this.classNames.mask),this._attachUIEvents(),this._syncViewport(),this.createBaseAnalyticsEvent("Open Editor").log(),this._startTool&&(this.sidebar.setActiveTool(this._startTool),this._startTool=null)},_syncViewport:function(){var t=this._container,i=this._mainContainer,s=this._winWidth=e.DOM.winWidth(),n=e.DOM.winHeight();t.setStyle("height",n-48+"px"),i.setStyle("width",s-g.SIDEBAR_WIDTH+"px"),this.mode&&this.mode.resize(s,n)},_afterRender:function(){this._renderEditView()},_onCloseClick:function(){var t=this.sidebar.getActiveTool(),i=this;t&&t.get("unsaved")?e.SM.Page.confirm("Any unsaved changes made will be lost. Are you sure you want to leave?",{type:"warning",title:"Are You Sure?"}).then((function(){i.hide()})):this.hide()},_onSelectedImagesChange:function(t){var i=t.count,s=t.selectedImages;e.Lang.isArray(s)||(s=[s]),this._selectedImages=s,this._selectedImageCount=i,this._updateSidebarState()},_updateSidebarState:function(){this.sidebar.updateImages({count:this._selectedImageCount,images:this._selectedImages})},_onSidebarLock:function(){this.mode.lock()},_onSidebarUnlock:function(){this.mode.unlock()},_onVisibleChange:function(t){var i=this;t.newVal?(this._uxState=e.SM.Page.uxdisabled,e.SM.Page.uxdisabled=!0,this._getLoadingProgress().show(),this._loadSidebar().then(e.bind(this._loadResources,this)).then((function(t){i._loadingProgress.hide().destroy(!0),t?(i.hasAlert=!0,e.SM.Page.confirm(i.errorMessages.adminCollected,{type:"warning",title:"Are You Sure?"}).then((function(){i.hasAlert=!1,i._show()}),(function(){i.hasAlert=!1,i.hide()}))):i._show()}),(function(t){i._loadingProgress.hide().destroy(!0),d.default.add("image-editor",{Details:t.error.response||t.message,Message:"Error launching editor",NickName:e.SM.Page.user.nickName},d.default.LEVEL_ERROR),i.alert().then((function(){i.hide()}))}))):this._hide()},_onWindowResize:function(){this._syncViewport()}},{CSS_PREFIX:"sm-imageedit",SIDEBAR_WIDTH:g.SIDEBAR_WIDTH,TILES_PADDING:g.TILES_PADDING,ATTRS:{albumUri:{value:null},buttons:{value:null},constrain:{value:!0},disableSingleNav:{value:!1},fillHeight:{value:null},focusOn:{value:{}},height:{value:"100%"},imageUris:{setter:function(t){return t&&!e.Lang.isArray(t)&&(t=[t]),t},value:null},modal:{value:!0},resources:{readOnly:!0,value:null},width:{value:"100%"}}});exports.default=f}(),SM.currentModule=null}),"",{requires:["base-build","lodash","node","panel","promise","react","react-dom","react-redux","widget-stdmod","sm-analytics","sm-header-help-container","sm-image-editor-constants","sm-image-editor-plugin-bulk","sm-image-editor-plugin-single","sm-image-editor-sidebar","sm-page","sm-page-confirm","sm-panel-alert","sm-panel-progress-deprecated","sm-promise-queue","sm-redux-store","sm-resource-album","sm-resource-image","sm-resource-album-image","sm-smuglog"]});
YUI.add("sm-image-editor-photo-grid",(function(e){SM.currentModule="sm-image-editor-photo-grid";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("sm-smuglog")),s=t("sm-image-editor-constants"),l=t("sm-image-editor-helpers");const r=e.SM.Views.Tiles,n=e.Template.Micro,o=n.compile(r.Templates.Base.tile),a=n.compile('<span class="sm-image-filename"><%= data.filename %></span>'),d=e.merge(r.Layout.Grid.prototype.classNames,{tileContent:"sm-tile-content sm-imageedit-image-offscreen"});class c{constructor(e){e||(e={}),this._resourceId=e.resourceId||"Uri",this._parentNode=e.parentNode,this._size=e.size||"S",this._tiles={},this._selectedTiles={},this._tileIndexes=[],this._pixelDims=r.WIDTHS["3x2"][this._size],this._devicePixelDims=this._pixelDims*(window.devicePixelRatio||1)}destroy(){this._container.remove(),this._container.destroy(!0),this._container=null,this._devicePixelDims=null,this._resourceId=null,this._parentNode=null,this._pixelDims=null,this._size=null,this._tiles=null,this._selectedTiles=null,this._tileIndexes=null,new e.EventHandle(this._eventHandles).detach()}getNext(e){var t=this._tileIndexes,i=this.index(e)+1;return i>=t.length&&(i=0),this._tiles[t[i]]}getPrevious(e){var t=this._tileIndexes,i=this.index(e)-1;return i<0&&(i=t.length-1),this._tiles[t[i]]}getSelected(){return this._selectedTiles}getSelectedSorted(){var t=e.Object.values(this._selectedTiles),i=this;return t.sort((function(e,t){return i.index(e)-i.index(t)})),t}getTileFromDOMNode(e){return this._tiles[e.getData("clientid")]}index(t){return e.Array.indexOf(this._tileIndexes,t.resource.getCanonicalUri())}isSelected(e){return!!this._selectedTiles[e.resource.getCanonicalUri()]}positionVideoIcon(e,t){if(e.resource.get("IsVideo")){var i,s=t.one(".sm-image"),l=t.one(".sm-tile-info-icon"),r=t.get("offsetWidth");return s.get("complete")?n():s.once("load",(function(){n()})),this}function n(){i=s.get("offsetWidth"),l.setStyle("marginLeft",(r-i)/2+"px"),t.addClass("sm-imageedit-image-loaded")}}render(t){this._container||(this._container=e.Node.create('<div class="sm-tiles sm-tiles-grid sm-tiles-3x2 sm-tiles-spacing-24" />'),this._container.addClass("sm-tiles-"+this._size),this._containerList=e.Node.create('<ul class="sm-tiles-list" />'),this._container.append(this._containerList),this._parentNode.append(this._container),this._eventHandles=[this._container.delegate("click",this._tileClick,".sm-tile",this)],this.resize());for(var r,n="",c=0;r=t[c];c++){var h,m=r.getCanonicalUri(),u=this._tiles[m],g=u&&u.tileId||e.guid();if(m){if(h=r.get("Processing")?e.Lang.sub(s.PROCESSING_IMAGE_URL,{size:this._size}):(0,l.getImageUrlForSize)(r,this._devicePixelDims,this._devicePixelDims)){var _=r.get("IsVideo"),f=o({classNames:d,clickable:!1,id:g,renderedImage:'<img class="sm-image sm-tile-limit-both" src="'+SM.env.host.spacerGif+'" data-imgsrc="'+h+'" />',renderedInfo:a({filename:r.get("FileName")}),showInfo:"after",tile:{clientId:m,IsVideo:_},type:_?"video":""});u&&document.getElementById(u.tileId)?(e.one("#"+u.tileId).replace(f),u.resource=r):(this._tiles[m]={resource:r,tileId:g},n+=f,this._tileIndexes.push(m))}}else i.default.error("photo-grid","'"+this._resourceId+"' is missing. Please include it or initialize your PhotoGrid with a more relevant 'resourceId'to allow this Resource to render.")}n&&this._containerList.append(n)}resize(){if(this._container&&this._container.getDOMNode()){var e=this._container.get("offsetWidth"),t=Math.ceil(e/this._pixelDims),s=e&&t<10?"sm-tiles-col-"+t:"";e||i.default.console("photo-grid","No 'offsetWidth' available for PhotoGrid. Falling back to fixed size tiles, which won't be edge to edge. Perhaps the PhotoGrid is invisible or not in the document?",i.default.LEVEL_WARNING),s!==this._columnClass&&(this._container.replaceClass(this._columnClass,s),this._columnClass=s)}}select(t){var i=t.tileId;return this._selectedTiles[t.resource.getCanonicalUri()]=t,e.one("#"+i).one(".sm-tile").addClass("sm-tile-selected"),this.fire("tileSelect",{tile:t}),this}toggleSelection(e){return this.isSelected(e)?this.unselect(e):this.select(e)}unselect(t){var i=t.tileId;return e.one("#"+i).one(".sm-tile").removeClass("sm-tile-selected"),delete this._selectedTiles[t.resource.getCanonicalUri()],this.fire("tileUnselect",{tile:t}),this}_getTileRange(e,t){var i,s=this._tileIndexes,l=this.index(e),r=this.index(t),n=[];if(l<r)for(i=l;i<=r;i++)n.push(this._tiles[s[i]]);else if(r<l)for(i=r;i<=l;i++)n.push(this._tiles[s[i]]);return n}_tileClick(e){if(1===e.button){var t=e.currentTarget,i=e.target;if(i.hasClass("sm-image")||i.hasClass("sm-image-filename"))if(e.halt(),e.shiftKey)for(var s=this.getTileFromDOMNode(t),l=this._getTileRange(this.getSelectedSorted()[0],s),r=0,n=l.length;r<n;r++)this.select(l[r]);else this.toggleSelection(this._tiles[t.getData("clientid")])}}}e.augment(c,e.EventTarget);var h=c;exports.default=h}(),SM.currentModule=null}),"",{requires:["node","template-micro","sm-smuglog","sm-image-editor-constants","sm-image-editor-helpers","sm-tile-base-view","sm-tiles-view"]});
YUI.add("sm-image-editor-plugin-bulk",(function(e){SM.currentModule="sm-image-editor-plugin-bulk";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=babelHelpers.interopRequireDefault(t("sm-image-editor-photo-grid")),i=t("sm-image-editor-constants"),o=t("sm-templates-button");const n=e.Template.Micro,l=n.compile('<div class="<%= data.classNames.bulkHeader %>"><%== data.details %><%== data.selectAllButton %></div>'),a=n.compile('<span class="<%= data.classNames.selectedDetails %>"><%= data.tileCount %> items<% if (data.selected) { %>, <span class="<%= data.classNames.selectedCount %>"><%= data.selected %> selected</span><% } %></span>'),c=n.compile('<div class="<%= data.classNames.selectionLock %>"><div class="<%= data.classNames.selectionLockHeader %>"><div><span class="sm-button sm-button-size-small sm-button-square" title="Image selection is disabled"><span class="sm-fonticon sm-fonticon-small sm-button-fonticon sm-fonticon-Lock"></span></span></div></div><h2>Save or Cancel Changes to Unlock</h2></div>'),r=e.config.doc;var d=e.Base.create("imageEditorBulkMode",e.Plugin.Base,[],{classNames:{bulkHeader:"sm-imageedit-bulk-header",bulkSelectButton:"sm-imageedit-bulk-select",mode:"sm-imageedit-bulk",imageOffscreen:"sm-imageedit-image-offscreen",selectedCount:"sm-imageedit-selected-count",selectedDetails:"sm-imageedit-bulk-details",selectionLock:"sm-imageedit-selection-mask",selectionLockHeader:"sm-imageedit-selection-mask-header",selectionLockVisible:"sm-imageedit-selection-mask-visible",totalCount:"sm-imageedit-total-count"},isBulk:!0,selectionDisabled:!1,initializer:function(){var t=this._host=this.get("host");t._boundingBox.addClass(this.classNames.mode),this._photoGrid=new s.default({size:"M"}),t.rendered?this._renderBodyContent(t.getStdModNode(e.WidgetStdMod.BODY).one(".sm-imageedit-body")):this.onceAfterHostEvent("renderBody",this._afterRenderBody,this)},destructor:function(){this._detachUIEvents(),this._detachMouseEvents(),this._host._boundingBox.removeClass(this.classNames.mode),this._getLockOverlay().remove(!0),this._bulkInfoHeader.empty(),this._bulkInfoHeader=null,this._photoGrid.destroy(),this._mainContainer.unplug(e.Plugin.ScrollInfo),this._mainContainer=null},lock:function(){this.selectionDisabled=!0,this._updateLockSize(),this._selectAllButton.set("disabled",!0),this._hostBodyNode.append(this._getLockOverlay()),this._attachMouseEvents()},nextImage:function(){1===this._selectedImageCount&&this._navigateImage("next")},prevImage:function(){1===this._selectedImageCount&&this._navigateImage("previous")},resize:function(e,t){var s=this._tilesContainer,o=e-i.SIDEBAR_WIDTH,n=o-i.TILES_PADDING,l=o,a=this._bulkInfoHeader;a.hide(),s.get("offsetHeight")>t&&(l-=this._host._scrollbarWidth,n-=this._host._scrollbarWidth),s.setStyle("width",n+"px"),a.setStyle("width",l+"px"),a.show(),this._updateLockSize(),this._photoGrid.resize(),this._mainContainer.scrollInfo.refreshDimensions(),this._freeTiles(),this._tileHeight=null},unlock:function(){this.selectionDisabled=!1,this._selectAllButton.set("disabled",!1),this._getLockOverlay().remove(),this._detachMouseEvents()},_attachMouseEvents:function(){this._detachMouseEvents();var e=this._mainContainer,t=this._getLockOverlay();this._mouseEvents=[e.on("mouseover",this._onContainerMouseover,this),e.on("touchstart",this._onContainerMouseover,this),t.on("mouseleave",this._afterContainerMouseLeave,this)]},_attachBulkEvents:function(){this._detachUIEvents();var t=this._host._boundingBox,s="."+this.classNames.bulkSelectButton+":not([disabled])",i=this._mainContainer;i.plug(e.Plugin.ScrollInfo),this._uiEvents=[t.delegate("click",this._onSelectAllClick,s,this),t.on("keydown",this._onKeyDown,this),t.on("keyup",this._onKeyup,this),this._photoGrid.on(["tileSelect","tileUnselect"],this._onTileSelectionChange,this),i.on("click",this._onContainerClick,this),i.scrollInfo.on("scroll",this._onScroll,this)]},_detachMouseEvents:function(){this._mouseEvents&&(new e.EventHandle(this._mouseEvents).detach(),this._mouseEvents=null)},_detachUIEvents:function(){this._uiEvents&&(new e.EventHandle(this._uiEvents).detach(),this._uiEvents=null)},_freeTiles:function(){var e=this._mainContainer.scrollInfo,t=this.classNames,s=this._photoGrid;clearTimeout(this._hideTimeout),clearTimeout(this._showTimeout),this._showTimeout=setTimeout((function(){e.getOnscreenNodes(".sm-tile-content",750).each((function(e){var i=e.one(".sm-image[data-imgsrc]");i&&i.setAttribute("src",i.getData("imgsrc")).removeAttribute("data-imgsrc"),e.removeClass(t.imageOffscreen),s.positionVideoIcon(s.getTileFromDOMNode(e),e)}))}),100),this._hideTimeout=setTimeout((function(){e.getOffscreenNodes(".sm-tile-content",750).addClass(t.imageOffscreen)}),1e3)},_getLockOverlay:function(){var t=this._lockOverlay;return t||(t=this._lockOverlay=e.Node.create(c({classNames:this.classNames}))),t},_navigateImage:function(t){var s,i,o=this._photoGrid,n=this._mainContainer,l=o.getSelectedSorted()[0],a=this._tileHeight;if(s="previous"===t?o.getPrevious(l):o.getNext(l),o.unselect(l).select(s),i=e.one("#"+s.tileId),a||(a=this._tileHeight=i.get("offsetHeight")),!n.scrollInfo.isNodeOnscreen(i,-(40+a))){var c=i.get("offsetTop")-40;if(e.UA.ie)n.set("scrollTop",c);else new e.Anim({duration:.7,easing:"easeOut",node:n,to:{scrollTop:c}}).run()}},_renderBodyContent:function(t){var s=t.one("."+this._host.classNames.mainContainer),i=s.appendChild('<div class="sm-imageedit-tiles"></div>'),o=this._photoGrid,n=this.classNames;s.prepend(e.Node.create(l({classNames:n,details:this._renderDetails(),selectAllButton:this._renderSelectAllButton()}))),this._hostBodyNode=t,this._mainContainer=s,this._tilesContainer=i,this._bulkInfoHeader=s.one("."+n.bulkHeader),this._details=s.one("."+n.selectedDetails),this._selectAllButton=s.one("."+n.bulkSelectButton),o._parentNode=i,o.render(this._host._imageResources),this._attachBulkEvents(),this._freeTiles(),this._selectAllImages()},_renderDetails:function(){return this._replaceNode("_details",a({classNames:this.classNames,selected:this._selectedImageCount,tileCount:this._host._itemCount}))},_renderSelectAllButton:function(){var e=this._selectedImageCount,t=this._host._itemCount,s=e&&t&&e===t;return this._replaceNode("_selectAllButton",(0,o.button)({className:this.classNames.bulkSelectButton,noChrome:!0,icon:s?"CheckmarkEncircled2":"CheckmarkEncircled",label:s?"Unselect All":"Select All",size:"small",value:s?"unselect":"select"}))},_replaceNode:function(t,s){var i;return this[t]&&(i=e.Node.create(s),this[t].replace(i),this[t]=i),s},_selectAllImages:function(){if(!this.selectionDisabled){var t=this._photoGrid;e.Object.each(t._tiles,(function(e){t.select(e)}))}},_unselectAllImages:function(){if(!this.selectionDisabled){var t=this._photoGrid;e.Object.each(t._tiles,(function(e){t.unselect(e)}))}},_updateLockSize:function(){if(this.selectionDisabled){var t=this._getLockOverlay(),s=e.DOM.winWidth()-i.SIDEBAR_WIDTH;t.setStyle("width",s+"px")}},_onContainerMouseover:function(){this.selectionDisabled&&this._getLockOverlay().addClass(this.classNames.selectionLockVisible)},_afterContainerMouseLeave:function(){this.selectionDisabled&&this._getLockOverlay().removeClass(this.classNames.selectionLockVisible)},_afterRenderBody:function(e){this._renderBodyContent(e.node)},_afterSubmitSuccess:function(){this._progressPanel.destroy()},_onContainerClick:function(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||this._unselectAllImages()},_onKeyDown:function(t){if(!this.selectionDisabled){var s=r.activeElement;(s===r.body||e.one(s).ancestor(".sm-imageedit-bulk",!0))&&65===t.keyCode&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this._selectAllImages())}},_onKeyup:function(t){if(!this.selectionDisabled){var s=t.keyCode,i=r.activeElement;if((i===r.body||e.one(i).ancestor(".sm-imageedit-bulk",!0))&&("text"!==i.type&&"textarea"!==i.type||""===i.value))switch(s){case 37:case 39:1===this._selectedImageCount&&(t.stopPropagation(),this._navigateImage(37===s?"previous":"next"))}}},_onScroll:function(){this._freeTiles()},_onSelectAllClick:function(e){1===e.button&&this["unselect"===e.currentTarget.getData("value")?"_unselectAllImages":"_selectAllImages"]()},_onTileSelectionChange:function(){var t=this;clearTimeout(this._timeoutSelect),this._timeoutSelect=setTimeout((function(){var s,i=t._photoGrid.getSelected(),o=[];e.Object.each(i,(function(e){var t=e.resource;o.push(t)})),s=o.length,t._selectedTiles=i,t._selectedImageCount=s,t.fire("selectedChange",{count:s,selectedImages:o}),t._renderDetails(),t._renderSelectAllButton()}),25)}},{NS:"mode"});exports.default=d}(),SM.currentModule=null}),"",{requires:["anim","base-build","node","plugin","template","widget-stdmod","sm-image-editor-constants","sm-image-editor-photo-grid"]});
YUI.add("sm-image-editor-plugin-single",(function(e){SM.currentModule="sm-image-editor-plugin-single";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("react-dom")),s=babelHelpers.interopRequireDefault(t("sm-image-editor-single-nav")),r=babelHelpers.interopRequireDefault(t("sm-smuglog")),o=t("sm-image-editor-constants"),u=t("sm-image-editor-helpers"),d=e.Template.Micro.compile("Warning: this <%= data.type %> is not owned by <%= data.pageOwner %>; it is collected from another user (<%= data.imageOwner %>)."),h=e.config.doc,l=e.Base.create("imageEditorSingleMode",e.Plugin.Base,[],{classNames:{mode:"sm-imageedit-single"},isBulk:!1,initializer:function(){var t=this._host=this.get("host"),i=this._hostNavDisabled=t.get("disableSingleNav");t._boundingBox.addClass(this.classNames.mode);var n=this._currentIndex=t._startIndex,a=this._currentImage=t._imageResources[0];this._resources={},this._resources[n]=a,i||(this._albumImageCount=t._albumResource.get("ImageCount")),this._prefetcher=new e.SM.PreFetcher,t.rendered?this._renderBodyContent(t.getStdModNode(e.WidgetStdMod.BODY)):this.onceAfterHostEvent("renderBody",this._afterRenderBody,this),this._attachEvents()},destructor:function(){var e=this.classNames;this._host._boundingBox.removeClass(e.mode),a.default.unmountComponentAtNode(this._mainContainer),this._navComponent=null,this._detachEvents(),this._resources=null,this._prefetcher&&this._prefetcher.destroy()},lock:function(){this._hostNavDisabled||(this._navDisabled=!0,this._renderNavComponent())},nextImage:function(){return this._navImage("forward",Math.min(this._currentIndex+1,this._albumImageCount))},prevImage:function(){return this._navImage("back",Math.max(this._currentIndex-1,1))},unlock:function(){this._hostNavDisabled||(this._navDisabled=!1,this._renderNavComponent())},resize:function(e,t){this._renderNavComponent()},_attachEvents:function(){this._detachEvents(),this._hostNavDisabled||(this._eventHandles=[e.one(h).on("keyup",this._onKeyup,this)])},_checkCollected:function(){var t,i=this._currentImage,n=e.SM.Page.owner.nickName,a=this;e.SM.Page.user.isAdmin&&(t=i.getExpansion("ImageAlbum.User").get("NickName"))!==n&&(this._navDisabled=!0,this._host.alert(d({imageOwner:t,pageOwner:n,type:i.get("IsVideo")?"video":"image"})).then((function(){a._navDisabled=!1})))},_detachEvents:function(){this._eventHandles&&(new e.EventHandle(this._eventHandles).detach(),this._eventHandles=null)},_getImageUrl:function(e,t){t||(t={});var i=this._tileContainer;return(0,u.getImageUrlForSize)(e,t.width||i.offsetWidth,t.height||i.offsetHeight)},_navImage:function(t,i){var n=this._host,a=this._resources[i],s=this;return this._currentIndex=i,this._preCacheImages(t),a?(this._updateImage(a),e.when(a)):e.SM.Resource.loadUri(n._albumResource.getExpansionUri("AlbumImages"),{count:1,start:i,expand:["ImageSizeDetails"]}).then((function(e){var t=e[0];return s._resources[i]=t,s._updateImage(t),t}),(function(t){r.default.add("image-editor",{Details:t.error.response||t.message,Message:"Error navigating to image",NickName:e.SM.Page.user.nickName},r.default.LEVEL_ERROR),n.alert()}))},_preCacheImages:function(t){var i,n=this._currentIndex,a=this._resources,s=n+1,r=n-1,o=3,u=this;if(!a[s]||!a[r]){if(1===n?t="forward":n===this._albumImageCount&&(t="back"),t)switch(o=1,t){case"back":i=r;break;case"forward":i=s}else i=Math.max(1,r);var d=["ImageSizeDetails"];e.SM.Page.user.isAdmin&&d.push("ImageAlbum","ImageAlbum.User"),e.SM.Resource.loadUri(this._host._albumResource.getExpansionUri("AlbumImages"),{count:o,start:i,expand:d}).then((function(e){var t;e&&e.length&&(1===e.length?(a[i]=e[0],t=[u._getImageUrl(e[0])]):(a[r]=e[0],a[s]=e[2],t=[u._getImageUrl(e[0]),u._getImageUrl(e[2])]),u._prefetcher.addQueue(t),u._prefetcher.run())}))}},_renderBodyContent:function(e){var t=this._host,i=this._mainContainer=e.one("."+t.classNames.mainContainer).getDOMNode();this._renderNavComponent(),this._tileContainer=i.querySelector(".sm-imageedit-tile"),this._hostNavDisabled||this._preCacheImages()},_renderNavComponent:function(e){var t=i.default.win.innerWidth-o.SIDEBAR_WIDTH,r=i.default.win.innerHeight-48,u=t-o.TILES_PADDING,d=this._currentImage,h=this._getImageUrl(this._currentImage,{width:u,height:r});h&&a.default.render(n.default.createElement(s.default,babelHelpers.extends({navDisabled:this._navDisabled||this._hostNavDisabled,onNext:this._onNextClick.bind(this),onPrevious:this._onPreviousClick.bind(this),index:this._currentIndex,containerHeight:r,containerWidth:t,imgUrl:h,maxWidth:u,totalImages:this._albumImageCount,isVideo:d.get("IsVideo")},e)),this._mainContainer)},_updateImage:function(e){this.fire("selectedChange",{count:1,selectedImages:e}),this._currentImage=e,this._renderNavComponent(),this._checkCollected()},_afterRenderBody:function(e){this._renderBodyContent(e.node)},_onPreviousClick:function(){this.prevImage()},_onNextClick:function(){this.nextImage()},_onKeyup:function(t){var i=t.charCode,n=h.activeElement,a=this._currentIndex;if(!this._navDisabled&&!this._host.hasAlert&&(n===h.body||e.one(n).ancestor(".sm-imageedit-single",!0))&&("text"!==n.type&&"textarea"!==n.type||""===n.value)){switch(i){case 37:if(1===a)return;break;case 39:if(a===this._albumImageCount)return;break;default:return}this[37===i?"prevImage":"nextImage"]()}}},{NS:"mode"});exports.default=l}(),SM.currentModule=null}),"",{requires:["base-build","plugin","react","react-dom","template-micro","widget-stdmod","sm-dom","sm-gallery-prefetcher","sm-image-editor-helpers","sm-image-editor-single-nav","sm-page","sm-resource-album","sm-resource-image","sm-resource-album-image","sm-smuglog"]});
YUI.add("sm-image-editor-sidebar",(function(e){SM.currentModule="sm-image-editor-sidebar";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("sm-analytics"));const s=e.Template.Micro,o=e.Array,a=e.config.doc,n=e.SM.ImageTools,{ColorEffects:l,Crop:r,Rotate:c,LocationData:d,TitleCaptionKeywords:u,Watermark:h}=n,m=[h.toolId,l.toolId,r.toolId,c.toolId],_=s.compile('<div class="<%= data.classNames.sidebarContainer %>"><div class="<%= data.classNames.pushlistContainer %>"></div></div>'),p=s.compile('<div class="<%= data.classNames.toolContainer %> <%= data.classNames.emptyToolContainer %>"><div class="test"><span class="sm-muted sm-fonticon sm-fonticon-Image"></span><div class="sm-muted">Please select at least one image to continue</div></div></div>');var g=e.Base.create("imageEditorSidebar",e.View,[],{classNames:{sidebarContainer:"sm-imageedit-sidebar",pushlistContainer:"sm-imageedit-sidebar-pushlist",toolContainer:"sm-imageedit-tool",emptyToolContainer:"sm-imageedit-empty-tool"},_pushListItems:[{label:u.toolName,id:u.toolId,icon:"ThumbInfo"},{label:h.toolName,id:h.toolId,icon:"Stamp"},{label:l.toolName,id:l.toolId,icon:"Effects"},{label:r.toolName,id:r.toolId,icon:"Crop"},{label:c.toolName,id:c.toolId,icon:"RotateRight"},{label:d.toolName,id:d.toolId,icon:"Location3"}],initializer:function(e){this.editor=e.editor,this._currentTool=null,this._imageTools={}},destructor:function(){this._detachEvents(),e.Object.each(this._imageTools,(function(e){e.view.destroy({remove:!0})})),this._pushlist.destroy({remove:!0}),this.get("container").empty(),this._pushlist=null,this._imageTools=null,this._currentTool=null,this.editor=null},getActiveTool:function(){return this._currentTool?this._currentTool.view:null},hideActiveTool:function(){var e=this._pushlist,t=e._openItemId,i=this._currentTool&&this._currentTool.view;t&&i&&e._popItemView(t)},render:function(){var t,i,s=this.get("container"),o=this.classNames;i=s.appendChild(_({classNames:o})),t=this._pushlist=new e.SM.Views.PushList({container:i.one("."+o.pushlistContainer),items:this._getPushListItems(),hidePoppedItems:!0}),i.append(t.render().get("container")),this._attachEvents(),this._updateSidebar()},setActiveTool:function(e){this._pushlist._pushItemView(e)},updateImages:function(t){this._selectedImageCount=t.count,this._selectedImages=t.images,e.Object.each(this._imageTools,(function(e){e.imageChange=!0})),t.images.length?this._allVideos=!e.Array.some(t.images,(function(e){return!e.get("IsVideo")})):this._allVideos=!1,this._updateSidebar()},_attachEvents:function(){var t=this._pushlist;this._events=[t.on("itemPush",this._onItemPush,this),t.on("itemPop",this._onItemPop,this)],e.UA.mobile||this._events.push(e.one(a).on("keydown",this._onKeyDown,this))},_canEdit:function(){var e=this._selectedImageCount,t=this._selectedImages[0];return!(1===e&&(!t.get("CanEdit")||t.get("EZProject")))},_detachEvents:function(){new e.EventHandle(this._events).detach(),this._events=null},_getImageTool:function(e,t){t||(t={});var i,s=this._imageTools[e],o=this.editor._albumResource;return s||(i={container:t.container,images:this._selectedImages},o&&(i.album=o),s=new n[e](i).render(),this._events.push(s.on("cancel",this._pushlist._onBackClick,this._pushlist),s.on("submitSuccess",this._onSubmitSuccess,this),s.on("submitFail",this._onSubmitFail,this),s.on("unsavedChange",this._onUnsavedChange,this),s.on("forceClose",this._onToolForceClose,this)),s=this._imageTools[e]={imageChange:!1,view:s}),s},_getPushListItems:function(){var t=this._pushListItems;return e.SM.Page.ownerHasFeature(e.SM.Page.FEATURES.WATERMARKS)||(t=t.filter((function(e){return e.id!=h.toolId}))),o.each(t,(function(t){t.childContainer=e.Node.create('<div class="sm-imageedit-tool" />')})),t},_getToolEmptyState:function(){var t=this._emptyState;return t||(t=this._emptyState=e.Node.create(p({classNames:this.classNames}))),t},_setSidebarListStates:function(){var e=this._pushlist,t=e.get("items"),s=this._selectedImageCount;if(this._selectedImages&&!this._canEdit()){e.disableAllListItems();var a=this.editor.createBaseAnalyticsEvent("Image Not Editable",{label:this._currentTool?this._currentTool.view.constructor.toolName:"No Open Tool"});return a.addContext(i.default.CONTEXT.IMAGE,{image_key:this._selectedImages[0].get("ImageKey")}),void a.log()}if(this._allVideos)o.each(t,(function(t){o.indexOf(m,t.id)>=0?e.disableListItem(t.id):e.enableListItem(t.id)}));else switch(s){case 0:e.disableAllListItems();break;case 1:e.enableAllListItems();break;default:o.each(t,(function(t){t.id===r.toolId?e.disableListItem(t.id):e.enableListItem(t.id)}))}},_setSidebarToolSelectedImages:function(){var t=this._pushlist,i=t._openItemId,s=this._currentTool&&this._currentTool.view,a=this._selectedImageCount;if(s){if(!this._canEdit())return void t._popItemView(i);var n=e.one(".sm-pushlist-child-open"),l=i==r.toolId&&a>1,c=this._allVideos&&o.indexOf(m,i)>=0;this._storedTool&&(n.replaceChild(this._storedTool,n.one(".sm-imageedit-tool")),this._storedTool=null),a<1?this._storedTool=n.replaceChild(this._getToolEmptyState(),n.one(".sm-imageedit-tool")):i&&(l||c)?t._popItemView(i):s.set("images",this._selectedImages)}},_updateSidebar:function(){this._setSidebarListStates(),this._setSidebarToolSelectedImages()},_onItemPop:function(t){var i=e.one("#"+t.currentTarget._openItemId+" .sm-pushlist-child"),s=this._currentTool.view;this._storedTool&&i&&(i.replaceChild(this._storedTool,i.one(".sm-imageedit-tool")),this._storedTool=null),setTimeout((function(){s.set("visible",!1,{popped:!0})}),550),this.editor.createBaseAnalyticsEvent("Close Tool",{label:s.constructor.toolName,selected_items:this._selectedImageCount}).log(),this._currentTool=null},_onItemPush:function(e){var t=e.item.id,i=t.charAt(0).toUpperCase()+t.substring(1),s=this._getImageTool(i,{container:e.itemNode.one("."+this.classNames.toolContainer)}),o=s.view;setTimeout((function(){o.set("visible",!0,{pushed:!0})}),550),this._currentTool=s,s.imageChange&&(this._setSidebarToolSelectedImages(),s.imageChange=!1),this.editor.createBaseAnalyticsEvent("Open Tool",{label:o.constructor.toolName,selected_items:this._selectedImageCount}).log()},_onKeyDown:function(t){var i,s=a.activeElement,o=this._currentTool?this._currentTool.view:null;if(o&&(!o||o.buttonsVisible)&&(s===a.body||e.one(s).ancestor(".sm-imageedit",!0))){if(t.altKey&&(t.ctrlKey||t.metaKey))switch(t.keyCode){case 67:t.preventDefault(),o.cancel(),a.body.focus(),i="Cancel";break;case 78:case 192:if(this._selectedImageCount>1)return;t.preventDefault();var n=this.editor;i="Save Next",o.submit({source:i}).then((function(t){"success"===t&&e.when(n.mode.nextImage()).then((function(){o.focus()}))}));break;case 83:t.preventDefault(),i="Save",o.submit({source:i}).then((function(){a.body.focus()}));break;default:return}return i&&this.editor.createBaseAnalyticsEvent("Use Keyboard Shortcut",{property:i,label:o.constructor.toolName}).log(),!1}},_onSubmitFail:function(){var e=this._pushlist;e._popItemView(e._openItemId)},_onSubmitSuccess:function(e){var t="crop"===e.toolName.toLowerCase(),i=(e.submitData||{}).source;t&&"save_next"!==i&&this.hideActiveTool()},_onUnsavedChange:function(t){this.fire(t.newVal?"lockSelection":"unlockSelection"),e.one('[data-value="back"]').set("disabled",t.newVal)},_onToolForceClose:function(){var e=this._pushlist;e._popItemView(e._openItemId)}});exports.default=g}(),SM.currentModule=null}),"",{requires:["node","template","view","sm-analytics","sm-image-tools","sm-pushlist-view"]});
YUI.add("sm-image-editor-single-nav",(function(e){SM.currentModule="sm-image-editor-single-nav";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("react-dom")),r=babelHelpers.interopRequireDefault(t("sm-icon")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("classnames"));class l extends a.PureComponent{constructor(e){super(e),babelHelpers.defineProperty(this,"_onBackClick",()=>{if(!this.props.navDisabled&&1!==this.state.currentIndex){var e=this.state.currentIndex-1;this.setState({currentIndex:Math.max(1,e)}),this.props.onPrevious()}}),babelHelpers.defineProperty(this,"_onForwardClick",()=>{if(!this.props.navDisabled&&this.state.currentIndex!==this.props.totalImages){var e=this.state.currentIndex+1;this.setState({currentIndex:Math.min(e,this.props.totalImages)}),this.props.onNext()}}),this.state={currentIndex:e.index}}componentDidUpdate(){if(this.props.isVideo){var e=s.default.findDOMNode(this.refs.imgNode),t=this;e.complete?this._positionVideoIcon():e.onload=function(){t._positionVideoIcon()}}}UNSAFE_componentWillReceiveProps(e){this.setState({currentIndex:e.index})}render(){let{navDisabled:e,imgUrl:t,isVideo:i}=this.props,{currentIndex:s}=this.state;var l,d,u=(0,o.default)({"sm-imageedit-nav-controls":!0,"sm-imageedit-nav-disabled":this.props.navDisabled});return t&&(l=a.default.createElement("img",{ref:"imgNode",src:t,style:{maxWidth:this.props.maxWidth}})),i&&(d=a.default.createElement("span",{ref:"iconNode",className:"sm-fonticon sm-fonticon-VideoCamera",style:{display:"none"}})),void 0===s&&(e=!0),a.default.createElement("div",null,a.default.createElement("div",{className:"sm-imageedit-tile"},l,d),a.default.createElement("div",{className:u},a.default.createElement("div",{className:"sm-imageedit-nav-control sm-imageedit-nav-back"},a.default.createElement(n.default,{disabled:e||1===s,noChrome:!0,onClick:this._onBackClick,value:"prev",size:"large",title:"Load previous image"},a.default.createElement(r.default,{name:"NavigateBackSlim"}))),a.default.createElement("div",{className:"sm-imageedit-nav-control sm-imageedit-nav-forward"},a.default.createElement(n.default,{disabled:e||this.state.currentIndex===this.props.totalImages,noChrome:!0,onClick:this._onForwardClick,value:"next",size:"large",title:"Load next image"},a.default.createElement(r.default,{name:"NavigateNextSlim"})))))}_positionVideoIcon(){var e=s.default.findDOMNode(this.refs.imgNode),t=this.refs.iconNode&&s.default.findDOMNode(this.refs.iconNode),i="bottom:"+(this.props.containerHeight-e.offsetHeight)/2+"px;",a="left:"+(this.props.containerWidth-e.offsetWidth)/2+"px;";t&&this.props.isVideo&&(t.style.cssText+=";display:block;"+i+a)}}exports.default=l,babelHelpers.defineProperty(l,"propTypes",{containerHeight:i.default.number,imgUrl:i.default.string,index:i.default.number,isVideo:i.default.bool,maxWidth:i.default.number,navDisabled:i.default.bool,onNext:i.default.func.isRequired,onPrevious:i.default.func.isRequired,totalImages:i.default.number,containerWidth:i.default.number}),e.namespace("SM.ImageEditor.Component").Single=l}(),SM.currentModule=null}),"",{requires:["classnames","create-class","prop-types","react","react-dom","sm-component-button","sm-icon"]});
YUI.add("sm-login-helpers",(function(e){SM.currentModule="sm-login-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const a=SM.import("sm-analytics"),o=("".concat(SM.env.host.http).concat(SM.env.host.main),['data-link-tracking-category="'.concat(a.CATEGORY.TRIAL,'"'),'data-link-tracking-action="'.concat(a.ACTION.TRIAL_START,'"'),'data-link-tracking-label="Signup Escape"',"data-link-tracking-contexts=".concat(JSON.stringify([{schema:a.CONTEXT.SCREEN,data:{section_name:a.SCREEN_CONTEXTS.SECTION_BODY}}]))]);var n={CONSTANTS:{loginModeClass:"sm-login-form-login-mode",otpModeClass:"sm-login-form-otp-mode",verifyModeClass:"sm-login-form-verify-mode",loginTitle:"Login",verifyTitle:"Verify Login",otpTitle:"Two-Factor Verification",desiredWidth:340,minimumWidth:310},ERROR_MESSAGES:{missingEmail:"Please enter your email",missingPassword:"Please enter your password",invalidEmail:"Please check your email and try again",invalidPassword:"Please check your password and try again",invalidLogin:"Please check your username and password",serverError:"Oops... There was an error on the server.",invalidOTP:"Double check your two-factor code.",cannotLinkAssistant:"Only account owner can link an account.",accountLocked:"Your account has been locked due to too many failed login attempts. Please contact support."},TEMPLATES:{FORGOT_PASSWORD:'<a class="sm-login-forgot-password-link" href="/passwordreset/request">Forgot your password?</a>',SIGNUP:e.Template.Micro.compile('<div class="sm-login-signup">'+'<p class="sm-text-mini">New to SmugMug? <a '.concat(o.join(" "),' href="<%= data.link %>">Start your free trial.</a></p>')+"</div>")}};exports.default=n}(),SM.currentModule=null}),"",{requires:["sm-analytics","template-micro"]});
YUI.add("sm-login",(function(e){SM.currentModule="sm-login";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("sm-analytics")),s=babelHelpers.interopRequireDefault(t("sm-dom-core")),a=babelHelpers.interopRequireDefault(t("sm-login-helpers")),o=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("react-dom")),l=babelHelpers.interopRequireDefault(t("sm-terms-of-use"));const n={Email:"Invalid Email",Password:"Invalid Password",OTPCode:"Invalid OTP",Login:"Invalid Email Or Password",PassCompromised:"Compromised Password"};e.namespace("SM.Login").Form=function(e){this._fieldMap={},e=e||{},this._eventHandles=[],this._authCustomDomain=e.authCustomDomain||"",this._isOauthLogin=e.isOauthLogin||0,this._password=e.password||"",this._signupLink=e.signupLink||"",this._submitButtonLabel=e.submitButtonLabel||"Log In",this._username=e.username||"",this._verifyLogin=e.verifyLogin||!1,this._product=e.product},e.SM.Login.Form.prototype={renderModal:function(t){var i=new e.SM.Panel({titleLocation:"outside",title:a.default.CONSTANTS.loginTitle,modal:!0,centered:!0,width:340,hideOn:[],closable:"undefined"!==t&&t}),s=e.one(document.createDocumentFragment());if(this.render(s),i.set("bodyContent",s),i.render(),i.get("boundingBox").addClass("sm-login-overlay"),this.on("titleChange",(function(e){i.set("title",e)})),i.getStdModNode(e.WidgetStdMod.HEADER).addClass("sm-login-panel-header"),this.focusFirstField(),t){var o=e.one("document").once("key",(function(e){e.preventDefault(),i.hide()}),"esc");i.after("hide",(function(){i.destroy(),o.detach(),this.destroy()}),this)}return e.UA.mobile||this._eventHandles.push(e.on("windowresize",(function(){i.centered()}))),i},render:function(t){var i=e.Node.create('<form class="sm-login-form sm-nui" novalidate="novalidate"></form>');i.on("submit",(function(e){e.preventDefault()})),this._form=i,this._setStyleState(a.default.CONSTANTS.loginModeClass),this._verifyLogin&&this._setStyleState(a.default.CONSTANTS.verifyModeClass),this._fieldMap.Email=new e.SM.Fields.Textbox({type:"email",name:"username",size:"large",value:this._username,placeholder:"email",iconPrefix:"Email"}).render(e.Node.create("<div>").appendTo(i)),this._fieldMap.Email.field.setData("fieldmap","Email"),this._fieldMap.Email.container.addClass("sm-login-emailField"),this._fieldMap.Password=new e.SM.Fields.Textbox({type:"password",name:"password",size:"large",value:this._password,placeholder:"password",iconPrefix:"Key"}).render(e.Node.create("<div>").appendTo(i)),this._fieldMap.Password.field.setData("fieldmap","Password"),this._fieldMap.Password.container.addClass("sm-login-passwordField"),this._fieldMap.OTPCode=new e.SM.Fields.Textbox({type:"text",name:"OTPCode",size:"large",placeholder:"two-factor code"}).render(e.Node.create("<div>").appendTo(i)),this._fieldMap.OTPCode.container.addClass("sm-login-otpField");var s=e.Node.create('<div class="sm-login-buttons-container"></div>');i.append(s),this._loginButton=e.Node.create(e.SM.Templates.button({label:this._submitButtonLabel,skin:"accent",value:"login"})),s.append(this._loginButton);var n=e.Node.create('<div class="sm-login-remember-me-container"></div>');i.append(n);var d=e.Cookie.get("rememberKeepMeLoggedIn");this._fieldMap.RememberMe=new e.SM.Fields.Checkbox({name:"rememberMe",label:"Remember me",value:"1",unselectedValue:"0",selected:null===d||"1"===d}).render(n),this._fieldMap.RememberMe.field.on("click",this._onRememberMeClick,this),null===d&&this._setRememberMeCookie();var u=e.Node.create(a.default.TEMPLATES.FORGOT_PASSWORD);return n.append(u),t.append(i),this._signupLink&&t.append(a.default.TEMPLATES.SIGNUP({link:this._signupLink})),r.default.render(o.default.createElement(l.default,{action:"logging in",className:"sm-text-mini",product:this._product}),e.Node.create('<div class="sm-login-tos">').appendTo(t).getDOMNode()),this._loginButton.on("click",this._onLoginClick,this),i.delegate("keydown",this._formFieldEnterCheck,"input[type=text], input[type=email], input[type=password]",this),i.delegate("keydown",this._clearFormFieldErrors,"input[type=text], input[type=email], input[type=password]",this),this},_setStyleState:function(e){this._form.removeClass(a.default.CONSTANTS.loginModeClass),this._form.removeClass(a.default.CONSTANTS.verifyModeClass),this._form.addClass(e)},_onRememberMeClick:function(e){this._setRememberMeCookie()},_setRememberMeCookie:function(){e.Cookie.set("rememberKeepMeLoggedIn",this._fieldMap.RememberMe.getValue(),{domain:s.default.win.SM.env.host.session,path:"/",expires:new Date(+new Date+31536e6)})},_clearFormFieldErrors:function(e){var t=e.currentTarget.getData("fieldmap")||e.currentTarget.get("name");this._clearFormFieldErrorsWithName(t)},_clearFormFieldErrorsWithName:function(e){this._fieldMap[e]&&this._fieldMap[e].clearError()},_formFieldEnterCheck:function(e){13===e.keyCode&&(e.halt(),this._submitForm())},_onLoginClick:function(){this._submitForm("rpc.user.login",this._onLoginSuccess)},_submitForm:function(t,i){this._loginButton.set("disabled","disabled"),this._fieldMap.Email.field.set("disabled","disabled"),this._fieldMap.Password.field.set("disabled","disabled");var s={Email:this._fieldMap.Email.getValue(),Password:this._fieldMap.Password.getValue(),OTPCode:this._fieldMap.OTPCode.getValue(),KeepLoggedIn:this._fieldMap.RememberMe.getValue(),IsOAuth:1==this._isOauthLogin?1:0};new e.SM.API({source:"https://"+SM.env.host.ssl+e.SM.API.URL}).sendRequest({apiMethod:t||"rpc.user.login",httpMethod:"POST",data:s,withCredentials:!0,cacheResponse:!1}).then((i||this._onLoginSuccess).bind(this),this._formSubmitFailure.bind(this))},login:function(){this._submitForm()},_onLoginSuccess:function(t){var a=t.response.results,o=this._authCustomDomain||a.Domain,r=i.default.Tracker.createEvent(i.default.CATEGORY.LOGIN,"Login",{label:"Email"}).addContext(i.default.CONTEXT.AUTHENTICATION,{is_oauth:1==this._isOauthLogin,remember_me:1==this._fieldMap.RememberMe.getValue()}).log(),l=e.QueryString.parse(s.default.win.location.search.substr(1)),n=s.default.win.location.href;if((l.goTo||"/login"===s.default.win.location.pathname)&&(n=a.DefaultPage),l.goTo&&a.VerifiedGoTo&&!a.OverrideGoToUrlUseDefault&&(n=l.goTo),o){var d=e.QueryString.stringify({SessionID:a.SessionID,skey:a.Key,goTo:n});n="https://"+o+"/cookiemonster.mg?"+d}var u=function(){s.default.win.location.href=n};r.then(u,u)},_formSubmitFailure:function(t){var o,r;this._loginButton.set("disabled",""),this._fieldMap.Email.field.set("disabled",""),this._fieldMap.Password.field.set("disabled","");var l=!1;let d=t.error.errors||(null===(o=t.error)||void 0===o||null===(r=o.response)||void 0===r?void 0:r.errors);d?e.Array.each(d,(function(e){this._fieldMap[e.Field]?this._fieldMap[e.Field].setError(a.default.ERROR_MESSAGES[e.Message]):"Login"==e.Field?(this._fieldMap.Email.setError(""),this._fieldMap.Password.setError(a.default.ERROR_MESSAGES.invalidLogin)):"OTPRequired"==e.Field&&(this._fieldMap.Email.setError(""),this._fieldMap.Password.setError(""),this.fire("titleChange",a.default.CONSTANTS.otpTitle),this._setStyleState(a.default.CONSTANTS.otpModeClass),this._fieldMap.OTPCode.field.focus()),!l&&n[e.Field]&&(l=!0,i.default.Tracker.createEvent(i.default.CATEGORY.LOGIN,"Login Error",{label:n[e.Field],systemAction:!0}).addContext(i.default.CONTEXT.AUTHENTICATION,{is_oauth:1==this._isOauthLogin}).log()),"PassCompromised"===e.Field&&(s.default.win.location.href="https://"+SM.env.host.ssl+"/account-health?email="+encodeURIComponent(this._fieldMap.Email.getValue()))}),this):(this._fieldMap.Email.setError(""),this._fieldMap.Password.setError(a.default.ERROR_MESSAGES.serverError))},focusFirstField:function(){this._fieldMap.Email.getValue()?this._fieldMap.Password.field.focus():this._fieldMap.Email.field.focus()},destroy:function(){e.Array.each(this._eventHandles,(function(e){e.detach()})),this.detachAll(),this._form.remove().destroy(!0)}},e.augment(e.SM.Login.Form,e.EventTarget)}(),SM.currentModule=null}),"",{requires:["cookie","event-resize","history","io","querystring-parse","react","react-dom","sm-analytics","sm-dom-core","sm-facebook","sm-fields","sm-image-model","sm-login-helpers","sm-page","sm-panel","sm-templates-button","sm-templates-form","sm-terms-of-use","sm","transition"]});
YUI.add("sm-marks-itemsview",(function(e){SM.currentModule="sm-marks-itemsview";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const t=["ImageSizeTiny","ImageSizeThumb","ImageSizeSmall","ImageSizeMedium","ImageSizeLarge","ImageSizeXLarge","ImageSizeX2Large","ImageSizeX3Large","ImageSizeOriginal"],a={WatermarkID:"WATERMARKS",PrintmarkID:"PRINTMARKS"},i=e.Base.create("sm-marks-itemsview",e.View,[],{template:e.Template.Micro.compile('<div class="sm-marks-sidebar-item"><div class="sm-marks-route"><div class="mark-item-img <%= data.orientation %>" data-id=<%= data.markId %>  style="background-image: url(<%= data.url %>)"></div><span class="mark-item-label"><%= data.name %></span><%== data.editButton %><%== data.deleteButton %></div></div>'),emptyTemplate:e.Template.Micro.compile('<div class="sm-marks-sidebar-empty sm-flex sm-flex-column sm-flex-items-center"><span class="sm-fonticon sm-fonticon-Image"></span><div>NO <%== data.types %> EXIST</div></div>'),deletedTemplate:e.Template.Micro.compile('<div class="sm-marks-sidebar-item sm-marks-deletedimg"><div class="sm-marks-route"><div class="mark-item-img" data-id="<%= data.markId %>"> Oops! It looks like you deleted the image you used here. You\'ll need to add the image to your site again and recreate this mark.</div><span class="mark-item-label"><%= data.name %></span><%== data.deleteButton %></div></div>'),initializer:function(){this._attachEvents()},destructor:function(){this._eventHandles.forEach((function(e){e.detach()}))},_attachEvents:function(){this._eventHandles=[]},render:function(){var i=this.get("container"),s=this.get("marks").reverse();return s.length?s.forEach((function(a){var s=a[this.get("id")],m=a.Name.length>30?a.Name.substr(0,27)+"...":a.Name,r=e.SM.Templates.button({className:"mark-delete-button",icon:"Trash",size:"small",value:s,noChrome:!0});if(a.Image){var n=a.Image.ImageSizes.ImageSizeOriginal,d=n.Height>n.Width?"portrait":"landscape",l=n;t.some((function(e){if(a.Image.ImageSizes[e]){var t=a.Image.ImageSizes[e];if("landscape"===d&&t.Width>=330&&t.Height>=220)return l=t,!0;if("portrait"===d&&t.Width>=330&&t.Height>=495)return l=t,!0}})),i.append(this.template({markId:s,orientation:d,name:m,url:l.Url,editButton:this.get("showEdit")?e.SM.Templates.button({className:"mark-edit-button",icon:"Wrench",size:"small",href:"edit/"+s,noChrome:!0}):"",deleteButton:this.get("showDelete")?r:""}))}else i.append(this.deletedTemplate({markId:s,name:m,deleteButton:this.get("showDelete")?r:""}))}),this):i.append(this.emptyTemplate({types:a[this.get("id")]})),this}},{ATTRS:{marks:{valueFn:function(){return[]}},id:{value:""},showEdit:{value:!1},showDelete:{value:!1}}});e.namespace("SM.Marks.Views").ItemsView=i;var s=i;exports.default=s}(),SM.currentModule=null}),"",{requires:["base","view","sm-templates-button"]});
YUI.add("sm-mobile-app-instructions",(function(e){SM.currentModule="sm-mobile-app-instructions";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("react-dom")),l=babelHelpers.interopRequireDefault(t("sm-banner")),n=babelHelpers.interopRequireDefault(t("sm-dom")),r=babelHelpers.interopRequireDefault(t("sm-icon")),u=babelHelpers.interopRequireDefault(t("sm-page")),o=babelHelpers.interopRequireDefault(t("sm-ua")),d=babelHelpers.interopRequireDefault(t("sm-uri-deprecated"));const{os:s}=new o.default,i=t=>{let a;switch(s){case"iOS":a=e.default.createElement("p",null,"To Install: Tap ",e.default.createElement(r.default,{name:"ActionAlt",size:"small"}),' and then "Add to Home Screen".');break;case"Windows Phone":a=e.default.createElement("p",null,"To Install: Swipe up from the bottom of your screen and tap ",e.default.createElement(r.default,{name:"StarOutlined",size:"small"}),".");break;case"Android":default:a=e.default.createElement("p",null,"To Install: Tap ",e.default.createElement(r.default,{name:"MoreVert",size:"small"}),' and then "Add to Homescreen".')}return e.default.createElement(l.default,t,a)};u.default.on("page:init",()=>{if((0,d.default)(n.default.win.location.href).queryParams.mobile&&!n.default.isStandalone){let l=n.default.doc.createElement("div");switch(n.default.doc.body.insertBefore(l,n.default.doc.getElementById("sm-page-content")),s){case"Android":case"iOS":case"Windows Phone":var t=a.default.render(e.default.createElement(i,{onClose:()=>a.default.unmountComponentAtNode(t)}),l)}}})}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-dom","sm-ua","sm-uri-deprecated","sm-icon","sm-component-button","sm-banner"]});
YUI.add("sm-node-settings-action-types",(function(E){SM.currentModule="sm-node-settings-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHANGE_PAGE=exports.SET_GRANT_INVITE_EMAIL_ERROR=exports.ADD_GRANT=exports.CANCEL_GRANT=exports.SET_PASSWORD_HINT=exports.SET_PASSWORD=exports.SAVE_CHANGES_SUCCESS=exports.SAVE_CHANGES_ERROR=exports.SAVE_CHANGES_REQUEST=exports.CANCEL_CLOSE=exports.DISCARD_CHANGES=exports.SHOW_CONFIRM_CANCEL=exports.CLOSE_NODE_SETTINGS=exports.OPEN_NODE_SETTINGS=exports.OPEN_CREATE_NODE=exports.LOADED_NODE_DATA=exports.LOAD_NODE_SETTINGS_REQUEST=exports.SET_MINIMUM_SECURITY_TYPE=exports.SET_MINIMUM_VISIBILITY=exports.SET_SECURITY_TYPE=exports.SET_VISIBILITY=exports.SET_KEYWORDS=exports.SET_DESCRIPTION=exports.SET_NAME=void 0;exports.SET_NAME="SET_NODE_NAME";exports.SET_DESCRIPTION="SET_NODE_DESCRIPTION";exports.SET_KEYWORDS="SET_NODE_KEYWORDS";exports.SET_VISIBILITY="SET_NODE_VISIBILITY";exports.SET_SECURITY_TYPE="SET_NODE_SECURITY_TYPE";exports.SET_MINIMUM_VISIBILITY="SET_NODE_INHERITED_VISIBILITY";exports.SET_MINIMUM_SECURITY_TYPE="SET_NODE_INHERITED_SECURITY_TYPE";exports.LOAD_NODE_SETTINGS_REQUEST="LOAD_NODE_SETTINGS_REQUEST";exports.LOADED_NODE_DATA="LOADED_NODE_DATA";exports.OPEN_CREATE_NODE="NODE_OPEN_CREATE";exports.OPEN_NODE_SETTINGS="NODE_SETTINGS_OPEN";exports.CLOSE_NODE_SETTINGS="NODE_SETTINGS_CLOSE";exports.SHOW_CONFIRM_CANCEL="NODE_SETTINGS_SHOW_CANCEL";exports.DISCARD_CHANGES="NODE_SETTINGS_CLOSE_DISCARD";exports.CANCEL_CLOSE="NODE_SETTINGS_CLOSE_CANCEL";exports.SAVE_CHANGES_REQUEST="SAVE_NODE_SETTINGS";exports.SAVE_CHANGES_ERROR="SAVE_NODE_SETTINGS_ERROR";exports.SAVE_CHANGES_SUCCESS="SAVE_NODE_SETTINGS_SUCESS";exports.SET_PASSWORD="SET_NODE_PASSWORD";exports.SET_PASSWORD_HINT="SET_NODE_PASSWORD_HINT";exports.CANCEL_GRANT="NODE_CANCEL_GRANT";exports.ADD_GRANT="NODE_ADD_GRANT";exports.SET_GRANT_INVITE_EMAIL_ERROR="NODE_INVITE_EMAIL_ERROR";exports.CHANGE_PAGE="NODE_SETTINGS_PAGE_CHANGE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-node-settings-actions",(function(e){SM.currentModule="sm-node-settings-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openNodeSettings=function(){return{type:a.OPEN_NODE_SETTINGS}},exports.openCreateNode=function(e){if(e!==u.NODE_TYPE_ALBUM&&e!==u.NODE_TYPE_FOLDER)return n.default.console("sm-node-settings-actions","Oops. Node type can only be Album or Folder",n.default.LEVEL_WARNING),()=>{};return function(e){return{type:a.OPEN_CREATE_NODE,nodeType:e}}(e)},exports.closeNodeSettings=function(){return function(e,t){let n=t(),{cancelledGrants:r,nodeId:o,payload:s}=(0,l.getNodeSettings)(n),i=(0,l.getNodeById)(n,o);!!Object.keys(s).find(e=>i?i[e]!==s[e]:"Type"!==e&&s[e].length>0)||r.length>0?e(N()):e(S())}},exports.forceCloseNodeSettings=S,exports.showCancelConfirm=N,exports.cancelCloseNodeSettings=function(){return(e,t)=>{let n=t(),{nodeId:r}=(0,l.getNodeSettings)(n);e(function(e={}){let t=d.NODE_TYPE_TO_DISPLAY_NAME[e.Type];return{type:a.CANCEL_CLOSE,_internal:{analytics:{action:"Close",category:d.ANALYTICS_CATEGORY,contexts:{[d.ANALYTICS_CONTEXT_NODE]:{node_id:e.NodeID,node_type:t}},label:"Continue",property:t}}}}((0,l.getNodeById)(n,r)))}},exports.setNodeName=function(e){return e=e.substring(0,d.NODE_NAME_MAX_LENGTH),{type:a.SET_NAME,name:e}},exports.setNodeDescription=function(e){return e=e.substring(0,d.NODE_DESCRIPTION_MAX_LENGTH),{type:a.SET_DESCRIPTION,description:e}},exports.setNodeKeywords=function(e){return{type:a.SET_KEYWORDS,keywords:e}},exports.setNodeSecurityType=function(e){return{type:a.SET_SECURITY_TYPE,securityType:e}},exports.setNodeVisibility=function(e){return{type:a.SET_VISIBILITY,visibility:e}},exports.setNodePassword=function(e){return{type:a.SET_PASSWORD,password:e}},exports.setNodePasswordHint=function(e){return{type:a.SET_PASSWORD_HINT,passwordHint:e}},exports.setMinimumVisibility=T,exports.setMinimumSecurityType=_,exports.setGrantAccessEmailsError=function(e=""){return{type:a.SET_GRANT_INVITE_EMAIL_ERROR,error:e}},exports.changePage=function(e){if(-1===d.PAGES.indexOf(e))throw new Error("Invalid Page Selected");return{type:a.CHANGE_PAGE,page:e}},exports.addGrantInvites=function(e){return{type:a.ADD_GRANT,emailList:e}},exports.cancelGrantInvites=function(e){return{type:a.CANCEL_GRANT,grantUri:e}},exports.saveChanges=function(){return{type:a.SAVE_CHANGES_REQUEST}},exports.saveChangesSuccess=function(){return(e,t)=>{let n=t(),{nodeId:r}=(0,l.getNodeSettings)(n);e(function(e={}){let t=d.NODE_TYPE_TO_DISPLAY_NAME[e.Type];return{type:a.SAVE_CHANGES_SUCCESS,_internal:{analytics:{action:"Close",category:d.ANALYTICS_CATEGORY,contexts:{[d.ANALYTICS_CONTEXT_NODE]:{node_id:e.NodeID,node_type:t}},label:"Save",property:t}}}}((0,l.getNodeById)(n,r)))}},exports.saveChangesError=y,exports.loadNodeSettingsRequest=g,exports.nodeSettingsDataLoaded=I,exports.loadNodeSettingsData=function(){return(e,t)=>{e(g());let i=(0,E.getNode)(t());return e((0,s.fetchFromAPI)({uri:i.uri,expand:{NodeGrants:{data:{count:200}},"NodeGrants.Contact":!0,ParentNodes:!0,"ParentNodes.NodeGrants":{data:{count:200}},"ParentNodes.NodeGrants.Contact":!0}})).then(()=>{let n=i.id,r=(0,l.getNodeParentNodesById)(t(),n),o=[],s=0,a=0;r.forEach(e=>{let{Uri:t,EffectivePrivacy:n,EffectiveSecurityType:r}=e;o.push(t);let i=d.VISIBILITY_OPTIONS.indexOf(n),u=d.SECURITY_OPTIONS.indexOf(r);s=Math.max(i,s),a=Math.max(u,a)});let u=d.VISIBILITY_OPTIONS[s],c=d.SECURITY_OPTIONS[a];if(o.length>1||0!==s?e(T(u)):e(T()),o.length>1||0!==a){let r=(0,l.getNodeById)(t(),n);e(_({isInherited:d.SECURITY_OPTIONS.indexOf(c)>d.SECURITY_OPTIONS.indexOf(r.SecurityType),minimumSecurityType:c}))}else e(_());e(I(n))}).catch(t=>(n.default.add("sm-node-settings-actions",(0,r.getSmugLogDataForRequestFailure)(t,"loadNodeSettingsData"),n.default.LEVEL_ERROR),e((0,o.addError)("There was an issue fetching your settings. Please reload the page and try again. If the problem persists, contact our Support Heroes.",t,{applyUserSkin:!1,dismissible:!1}))))}},exports.loadDefaultAlbumTemplateData=function(){return async e=>{let t;e(g());try{t=await e((0,s.fetchFromAPI)({uri:d.DEFAULT_ALBUM_TEMPLATE_URI}))}catch(t){return n.default.add("sm-node-settings-actions",(0,r.getSmugLogDataForRequestFailure)(t,"loadDefaultAlbumTemplateData"),n.default.LEVEL_ERROR),e((0,o.addError)("There was an issue fetching your default presets. Please reload the page and try again. If the problem persists, contact our Support Heroes.",t,{applyUserSkin:!1}))}return e(I()),t}},exports.saveNodeSettings=function(){return(t,n)=>{let o=n(),{cancelledGrants:i,inviteGrants:a,nodeId:u,payload:E}=(0,l.getNodeSettings)(o),p=(0,l.getNodeById)(o,u),S=Object.keys(E).reduce((e,t)=>{let n=(0,c.formatFieldForAPI)(t,E[t]);return p[t]!==n&&(e[t]=n),e},{}),N="/api/v2/node/".concat(encodeURIComponent(u),"!grants"),T=!1;return t((0,s.patchToAPI)({uri:p.Uri,data:S})).then(()=>{if(T=!0,d.SECURITY_TYPES.GRANT_ACCESS===(E.SecurityType||p.SecurityType))return t(f(a,i,N))}).then(()=>{e.default.win.location.reload(!0)}).catch(e=>{let{generalProblems:n}=(0,r.extractProblems)(e);t(y({partial:T,message:n.join(". ")}))})}},exports.createNewNode=function(t){return(n,r)=>{let o=r(),a=(0,E.getNodeUri)(o),{cancelledGrants:u,inviteGrants:p,payload:S}=(0,l.getNodeSettings)(o);S.AutoRename=!0;let N,T=Object.keys(S).reduce((e,t)=>(e[t]=(0,c.formatFieldForAPI)(t,S[t]),e),{});return n((0,s.postToAPI)({uri:"".concat(a,"!children"),data:T})).then(e=>{if(N=(0,i.getEntity)(r(),e),d.SECURITY_TYPES.GRANT_ACCESS===N.SecurityType)return n(f(p,u,N.Uris.NodeGrants))}).then(()=>{t?t(N):e.default.win.location.href=N.WebUri}).catch(()=>{var e;n(y({partial:!!(null===(e=N)||void 0===e?void 0:e.WebUri)}))})}};var e=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-smuglog")),r=t("sm-api-redux-utils"),o=t("sm-dialogs-actions"),s=t("sm-api-redux-actions"),i=t("sm-api-redux-selectors"),a=babelHelpers.interopRequireWildcard(t("sm-node-settings-action-types")),d=t("sm-node-settings-constants"),u=t("sm-page-nodepage-constants"),c=t("sm-node-settings-field-formatter"),l=t("sm-node-settings-selectors"),E=t("sm-page-nodepage-selectors");function p(){return{type:a.CLOSE_NODE_SETTINGS}}function S({discardChanges:e=!1}={}){return(t,n)=>{let r=n(),{nodeId:o}=(0,l.getNodeSettings)(r),s=(0,l.getNodeById)(r,o);t(e?function(e={}){let t=d.NODE_TYPE_TO_DISPLAY_NAME[e.Type];return{...p(),_internal:{analytics:{action:"Close",category:d.ANALYTICS_CATEGORY,contexts:{[d.ANALYTICS_CONTEXT_NODE]:{node_id:e.NodeID,node_type:t}},label:"Continue",property:t}}}}(s):p())}}function N(){return{type:a.SHOW_CONFIRM_CANCEL}}function T(e=""){return{type:a.SET_MINIMUM_VISIBILITY,visibility:e}}function _({isInherited:e=!1,minimumSecurityType:t=""}={}){return{type:a.SET_MINIMUM_SECURITY_TYPE,data:{isInherited:e,minimumSecurityType:t}}}function y({partial:e,message:t}={}){return t||(t=e?d.SAVE_ERROR_PARTIAL:d.SAVE_ERROR_FULL),{type:a.SAVE_CHANGES_ERROR,partial:e,message:t}}function g(){return{type:a.LOAD_NODE_SETTINGS_REQUEST}}function I(e){return{type:a.LOADED_NODE_DATA,nodeId:e}}function f(e,t,n){return r=>{let o=e.split(",").filter(e=>e.length).map(e=>r((0,s.postToAPI)({uri:n,data:{Email:e}})));return o=o.concat(t.map(e=>r((0,s.postToAPI)({uri:"".concat(e,"!cancel")})))),Promise.all(o)}}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-smuglog","sm-api-redux-utils","sm-dialogs-actions","sm-api-redux-actions","sm-api-redux-selectors","sm-node-settings-action-types","sm-node-settings-constants","sm-page-nodepage-constants","sm-node-settings-field-formatter","sm-node-settings-selectors","sm-page-nodepage-selectors"]});
YUI.add("sm-node-settings-constants",(function(E){SM.currentModule="sm-node-settings-constants";var exports={},I=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ALBUM_TEMPLATE_URI=exports.NODE_URL_MAX_CHARACTERS=exports.NODE_DESCRIPTION_MAX_LENGTH=exports.NODE_NAME_MAX_LENGTH=exports.SAVE_ERROR_FULL=exports.SAVE_ERROR_PARTIAL=exports.SAVE_ERROR_INVALID_FIELD_PARTIAL=exports.NODE_TYPE_TO_DISPLAY_NAME=exports.SECURITY_TYPES=exports.VISIBILITY_OPTIONS=exports.VISIBILITY_PRIVATE=exports.VISIBILITY_UNLISTED=exports.VISIBILITY_PUBLIC=exports.SECURITY_OPTIONS=exports.PAGES=exports.PAGE_VISIBILITY=exports.PAGE_ACCESS=exports.PAGE_GENERAL=exports.ANALYTICS_CONTEXT_NODE=exports.ANALYTICS_CATEGORY=void 0;var E=I("sm-analytics-constants");const _=E.CATEGORY.GALLERY_SETTINGS;exports.ANALYTICS_CATEGORY=_;const A=E.CONTEXT.NODE;exports.ANALYTICS_CONTEXT_NODE=A;exports.PAGE_GENERAL="General";exports.PAGE_ACCESS="Access";exports.PAGE_VISIBILITY="Visibility";const e=Object.freeze(new Array("General","Access","Visibility"));exports.PAGES=e;exports.SECURITY_OPTIONS=["None","Password","GrantAccess"];exports.VISIBILITY_PUBLIC="Public";exports.VISIBILITY_UNLISTED="Unlisted";exports.VISIBILITY_PRIVATE="Private";const T=["Public","Unlisted","Private"];exports.VISIBILITY_OPTIONS=T;exports.SECURITY_TYPES={NONE:"None",PASSWORD:"Password",GRANT_ACCESS:"GrantAccess"};exports.NODE_TYPE_TO_DISPLAY_NAME={Album:"Gallery",Folder:"Folder",Page:"Page"};exports.SAVE_ERROR_INVALID_FIELD_PARTIAL="Error: Invalid";exports.SAVE_ERROR_PARTIAL="Some changes failed to save, please refresh the page and try again.";exports.SAVE_ERROR_FULL="Failed to save changes, please try again.";exports.NODE_NAME_MAX_LENGTH=255;exports.NODE_DESCRIPTION_MAX_LENGTH=65233;exports.NODE_URL_MAX_CHARACTERS=60;exports.DEFAULT_ALBUM_TEMPLATE_URI="/api/v2/albumtemplate!userdefault"}(),SM.currentModule=null}),"",{requires:["sm-analytics-constants"]});
YUI.add("sm-node-settings-field-formatter",(function(r){SM.currentModule="sm-node-settings-field-formatter";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatFieldForUI=function(r,e){if("keywords"===r.toLowerCase()&&Array.isArray(e))return e.join("; ");return e},exports.formatFieldForAPI=function(r,e){if("keywords"===r.toLowerCase()&&!Array.isArray(e))return""===e.trim()?[]:(e=e.replace(/[,;]$/,"")).split(/\s*[;,]\s*/);return e}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-node-settings-field-grant-access-item",(function(e){SM.currentModule="sm-node-settings-field-grant-access-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-icon"));const r=e=>{let{canceled:t,email:r,inherited:i,name:u,onCancelClick:s,uri:d}=e,c=r;u&&u.length>0&&(c=" (".concat(r,")"));let o=l.default.createElement(a.default,{size:"small",noChrome:!0,"data-key":d,onClick:s,disabled:t},l.default.createElement(n.default,{name:"XCross",size:n.default.SIZE_SMALL}));return i&&(o=l.default.createElement("p",null,"(Inherited)")),l.default.createElement("div",{className:"sm-flex sm-grant-access-item","data-canceled":t},l.default.createElement("p",null,u,c),o)};r.displayName="NodeSettings.GrantAccessItem",r.propTypes={name:e.default.string,email:e.default.string.isRequired,canceled:e.default.bool,uri:e.default.string.isRequired,onCancelClick:e.default.func,inherited:e.default.bool.isRequired},r.defaultProps={onCancelClick:()=>{},name:"",canceled:!1};var i=r;exports.default=i}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-icon"]});
YUI.add("sm-node-settings-field-grant-access",(function(e){SM.currentModule="sm-node-settings-field-grant-access";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),n=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),r=t("sm-api-redux-selectors"),s=babelHelpers.interopRequireDefault(t("sm-dom")),i=babelHelpers.interopRequireDefault(t("sm-component-textarea")),l=babelHelpers.interopRequireWildcard(t("sm-node-settings-actions")),d=babelHelpers.interopRequireDefault(t("sm-component-adaptiveformfield")),o=babelHelpers.interopRequireDefault(t("sm-node-settings-field-grant-access-item")),u=babelHelpers.interopRequireWildcard(t("sm-node-settings-field-validators")),c=t("sm-node-settings-selectors");const m=e=>{let{acceptedGrants:t,cancelledGrants:n,inviteError:r,invites:s,onCancelClick:l,onInviteFocus:u,onInvitesBlur:c,onInvitesChange:m,pendingGrants:f}=e;return a.default.createElement("div",{className:"sm-form-modern sm-flex sm-flex-column"},a.default.createElement(d.default,{id:"sm-node-settings-field-add-grant",label:"Invite People",error:r},a.default.createElement(i.default,{value:s,onBlur:c,onChange:m,onFocus:u,"data-testid":"nodesettings_invite_field"})),a.default.createElement("span",{className:"sm-text-mini"},"Comma separated emails, 200 max"),a.default.createElement("p",null,"Pending (",f.length,")"),a.default.createElement("div",{className:"sm-node-settings-grant-list"},f.map(e=>{let{email:t,uri:r}=e;return a.default.createElement(o.default,babelHelpers.extends({onCancelClick:l,canceled:n.has(r),key:t},e))})),a.default.createElement("p",null,"Accepted (",t.length,")"),a.default.createElement("div",{className:"sm-node-settings-grant-list"},t.map(e=>{let{email:t,uri:r}=e;return a.default.createElement(o.default,babelHelpers.extends({onCancelClick:l,canceled:n.has(r),key:t},e))})))};m.displayName="NodeSettings.GrantAccessField";const f={name:n.default.string,email:n.default.string.isRequired,uri:n.default.string,inherited:n.default.bool.isRequired};m.propTypes={acceptedGrants:n.default.arrayOf(n.default.shape(f)).isRequired,cancelledGrants:n.default.instanceOf(Set).isRequired,inviteError:n.default.string,invites:n.default.string.isRequired,onCancelClick:n.default.func.isRequired,onInvitesBlur:n.default.func.isRequired,onInvitesChange:n.default.func.isRequired,pendingGrants:n.default.arrayOf(n.default.shape(f)).isRequired},m.defaultProps={invites:"",inviteError:"",cancelledGrants:[],inheritedGrants:[],nodeGrants:[]};var p=(0,e.connect)((e,t)=>{let n,a,s,i,l;if(!(0,c.getCreateNodeSettings)(e).isCreate){({cancelledGrants:s,inviteErrorMsg:a,inviteGrants:n}=(0,c.getNodeSettings)(e));let t=(0,c.getNodeSettings)(e).nodeId;i=(0,c.getInheritedGrantsById)(e,t),l=(0,c.getNodeGrants)(e,t)}s=new Set(s);let d=l.map(e=>e.Uri),o=[],u=[];for(let t of[...i,...l]){let{Uri:n,Status:a}=t,s=-1===d.indexOf(n),{Name:i,PrimaryEmail:l}=(0,r.getExpansion)(e,n,"Contact"),c={email:l,inherited:s,name:i,uri:n};"Pending"===a?u.push(c):o.push(c)}return{...t,acceptedGrants:o,cancelledGrants:s,inviteError:a,invites:n,pendingGrants:u}},e=>({onInvitesBlur:t=>{let n=t.target.value.split(",").map(e=>e.trim()).join(","),a="";u.areGrantAccessEmailsValid(n)||(a="Verify that your email addresses are formatted properly and separated by commas."),e(l.setGrantAccessEmailsError(a))},onInvitesChange:t=>{let n=t.target.value;e(l.addGrantInvites(n))},onCancelClick:t=>{let n=t.currentTarget.getAttribute("data-key");e(l.cancelGrantInvites(n))},onInviteFocus(e){let t=e.target.parentElement;setTimeout(()=>{s.default.scrollIntoViewIfNeeded(t,!0)},500)}}))(m);exports.default=p}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","react","sm-api-redux-selectors","sm-dom","sm-component-textarea","sm-node-settings-actions","sm-component-adaptiveformfield","sm-node-settings-field-grant-access-item","sm-node-settings-field-validators","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-field-password",(function(e){SM.currentModule="sm-node-settings-field-password";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),s=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("sm-component-adaptiveformfield")),d=babelHelpers.interopRequireDefault(t("sm-component-textbox")),r=babelHelpers.interopRequireWildcard(t("sm-node-settings-actions")),n=t("sm-node-settings-selectors");const i=e=>{let{password:t,passwordHint:s,onPasswordChange:r,onPasswordHintChange:n}=e,i="Visitor Password";t||(i="".concat(i," (Optional)"));let l="Hint for Visitors";return s||(l="".concat(l," (Optional)")),a.default.createElement("div",{className:"sm-form-modern"},a.default.createElement(o.default,{label:i},a.default.createElement(d.default,{onChange:r,type:"password",value:t,"data-testid":"nodesettings_password_field"})),a.default.createElement(o.default,{label:l},a.default.createElement(d.default,{type:"text",value:s,onChange:n,"data-testid":"nodesettings_passwordhint_field"})))};i.displayName="NodeSettings.PasswordField",i.propTypes={password:s.default.string.isRequired,passwordHint:s.default.string.isRequired,onPasswordChange:s.default.func.isRequired,onPasswordHintChange:s.default.func.isRequired},i.defaultProps={password:"",passwordHint:""};var l=(0,e.connect)((e,t)=>{let s,a,o;if((0,n.getNodeSettings)(e).isCreate)s=(0,n.getCreateNodeSettings)(e).payload;else{s=(0,n.getNodeSettings)(e).payload;let t=(0,n.getNodeSettings)(e).nodeId;({Password:a,PasswordHint:o}=(0,n.getNodeById)(e,t))}return void 0!==s.Password&&(a=s.Password),void 0!==s.PasswordHint&&(o=s.PasswordHint),{...t,password:a,passwordHint:o}},e=>({onPasswordChange:t=>{let s=t.target.value;e(r.setNodePassword(s))},onPasswordHintChange:t=>{let s=t.target.value;e(r.setNodePasswordHint(s))}}))(i);exports.default=l}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","react","sm-component-adaptiveformfield","sm-component-textbox","sm-node-settings-actions","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-field-validators",(function(e){SM.currentModule="sm-node-settings-field-validators";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.areGrantAccessEmailsValid=function(e=""){let t=e.split(",");for(let e of t)if(e.length>0&&null==e.match(/^.+@.+\..+$/))return!1;return!0},exports.isNameValid=function(e){return void 0!==e&&e.trim().length>0}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-node-settings-footer",(function(e){SM.currentModule="sm-node-settings-footer";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),s=babelHelpers.interopRequireDefault(t("sm-component-panel"));const o=e=>{let{errorMsg:t,disableSave:o,isCreate:l,onClick:a}=e,u="accent";return o&&(u="submit"),r.default.createElement("div",{className:"sm-node-settings-footer sm-flex sm-flex-column"},r.default.createElement("p",{className:"sm-node-settings-error sm-text-center sm-text-large"},t),r.default.createElement(s.default.Buttons,null,r.default.createElement(n.default,{disabled:o,skin:u,onClick:a,"data-testid":l?"nodesettings_create_button":"nodesettings_save_button"},l?"Create":"Save")))};o.displayName="NodeSettings.Footer",o.propTypes={errorMsg:e.default.string.isRequired,disableSave:e.default.bool.isRequired,onClick:e.default.func.isRequired};var l=o;exports.default=l}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-component-panel"]});
YUI.add("sm-node-settings-launcher",(function(e){SM.currentModule="sm-node-settings-launcher";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),n=t("react-redux"),s=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("sm-panel-alert")),l=babelHelpers.interopRequireDefault(t("sm-component-busy")),a=babelHelpers.interopRequireDefault(t("sm-dom")),r=babelHelpers.interopRequireDefault(t("sm-modal")),d=babelHelpers.interopRequireDefault(t("sm-redux-store")),i=t("sm-node-settings-actions"),u=t("sm-node-settings-constants"),c=babelHelpers.interopRequireDefault(t("sm-node-settings-panel")),p=t("sm-node-settings-selectors");class f extends s.default.Component{componentDidUpdate(e){this.props.isOpen&&!e.isOpen?a.default.doc.body.setAttribute("data-node-settings","open"):!this.props.isOpen&&e.isOpen&&a.default.doc.body.removeAttribute("data-node-settings")}render(){let{isOpen:e,showCancelConfirm:t}=this.props;return s.default.createElement("div",null,e?this._renderModal():null,t?this._renderCancelConfirm():null)}_renderModal(){let{disableClose:e,onCreateSuccess:t}=this.props;return s.default.createElement(r.default,{preventTouch:!1},s.default.createElement(n.Provider,{store:d.default},this.props.isLoading?s.default.createElement(l.default,null):s.default.createElement(c.default,{disableClose:e,onCreateSuccess:t})))}_renderCancelConfirm(){let{onCancelConfirm:e,onCancelExit:t}=this.props;return s.default.createElement(o.default,{cancelLabel:"Cancel",confirmLabel:"Yes",message:"All unsaved changes will be lost. This cannot be undone.",title:"Discard Changes?",onCancel:t,onConfirm:e})}}f.displayName="NodeSettings.Launcher",f.propTypes={disableClose:e.default.bool,isLoading:e.default.bool,isOpen:e.default.bool,hasLoaded:e.default.bool.isRequired,showCancelConfirm:e.default.bool,onButtonClick:e.default.func.isRequired,onCreateSuccess:e.default.func,type:e.default.oneOf(Object.keys(u.NODE_TYPE_TO_DISPLAY_NAME))},f.defaultProps={disableClose:!1,isOpen:!1,showCancelConfirm:!1};var m=(0,n.connect)((e,t)=>{let n,s,o=(0,p.getNodeSettings)(e),{isLoading:l,isOpen:a,nodeId:r,showCancelConfirm:d}=o,i=!1;return r&&(n=(0,p.getNodeById)(e,r),i=void 0!==n),i&&(s=n.Type),{...t,isLoading:l,isOpen:a,showCancelConfirm:d,hasLoaded:i,type:s}},(e,t)=>({...t,dispatch:e,onButtonClick(){e((0,i.openNodeSettings)())},onCancelConfirm(){e((0,i.forceCloseNodeSettings)({discardChanges:!0}))},onCancelExit(){e((0,i.cancelCloseNodeSettings)())}}))(f);exports.default=m}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","react","sm-panel-alert","sm-component-busy","sm-dom","sm-modal","sm-redux-store","sm-node-settings-actions","sm-node-settings-constants","sm-node-settings-panel","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-page-access",(function(e){SM.currentModule="sm-node-settings-page-access";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),s=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-icon")),i=babelHelpers.interopRequireDefault(t("sm-page")),r=babelHelpers.interopRequireDefault(t("sm-component-underlineformfield")),d=babelHelpers.interopRequireWildcard(t("sm-node-settings-actions")),c=babelHelpers.interopRequireDefault(t("sm-node-settings-field-grant-access")),u=babelHelpers.interopRequireDefault(t("sm-node-settings-page-header")),o=babelHelpers.interopRequireDefault(t("sm-node-settings-field-password")),m=t("sm-node-settings-constants"),f=t("sm-node-settings-selectors");const p=e=>{let t,{access:s,switchBack:d,onAccessChange:f,minimumSecurityType:p,visibility:g}=e,b=m.SECURITY_OPTIONS.indexOf(p);switch(s){case"Password":t=a.default.createElement(o.default,null);break;case"GrantAccess":t=a.default.createElement(c.default,null)}let y="Anyone";"Unlisted"===g&&(y="Anyone with a Link");let S=!i.default.ownerHasFeature(i.default.FEATURES.GRANT_ACCESS),E=a.default.createElement(n.default,{className:"sm-node-settings-option-selected",name:"Checkmark",size:n.default.SIZE_SMALL});return a.default.createElement("div",null,a.default.createElement(u.default,{title:"Access",onSwitchBack:d}),a.default.createElement("div",{className:"sm-node-settings-page-access"},a.default.createElement("div",{className:"sm-node-settings-page-access-options"},b<=1&&a.default.createElement("div",{"data-access-level":"None",onClick:f},a.default.createElement(r.default,{label:"Public"},a.default.createElement("div",{className:"sm-form-field-action"},a.default.createElement(l.default,{noChrome:!0,size:l.default.SIZE_SMALL,"data-testid":"nodesettings_public_button"},a.default.createElement("span",{className:"sm-button-label"},y),"None"===s?E:null)))),b<=2&&a.default.createElement("div",{"data-access-level":"Password",onClick:f},a.default.createElement(r.default,{label:"Password"},a.default.createElement("div",{className:"sm-form-field-action"},a.default.createElement(l.default,{noChrome:!0,size:l.default.SIZE_SMALL,"data-testid":"nodesettings_password_button"},a.default.createElement("span",{className:"sm-button-label"},"People with Password"),"Password"===s?E:null)))),b<=3&&!S&&a.default.createElement("div",{"data-access-level":"GrantAccess",onClick:f},a.default.createElement(r.default,{label:"Invitation Only"},a.default.createElement("div",{className:"sm-form-field-action"},a.default.createElement(l.default,{noChrome:!0,size:l.default.SIZE_SMALL,"data-testid":"nodesettings_privateshare_button"},a.default.createElement("span",{className:"sm-button-label"},"People I Choose"),"GrantAccess"===s?E:null))))),t))};p.displayName="NodeSettings.AccessPage",p.propTypes={access:s.default.string.isRequired,visibility:s.default.string.isRequired,switchBack:s.default.func.isRequired,onAccessChange:s.default.func.isRequired,minimumSecurityType:s.default.string.isRequired};var g=(0,e.connect)((e,t)=>{let s,a,l,n;if((0,f.getNodeSettings)(e).isCreate)({minimumSecurityType:a,minimumSecurityType:s,minimumVisibility:n,payload:l}=(0,f.getCreateNodeSettings)(e));else{let t=(0,f.getNodeSettings)(e).nodeId;({minimumSecurityType:a,payload:l}=(0,f.getNodeSettings)(e)),({Privacy:n,SecurityType:s}=(0,f.getNodeById)(e,t))}return l.SecurityType&&(s=l.SecurityType),l.Privacy&&(n=l.Privacy),{...t,access:s,minimumSecurityType:a,visibility:n}},e=>({onAccessChange(t){let s=t.currentTarget.getAttribute("data-access-level");e(d.setNodeSecurityType(s))},switchBack(){e(d.changePage(m.PAGE_GENERAL))}}))(p);exports.default=g}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","react","sm-component-button","sm-icon","sm-page","sm-component-underlineformfield","sm-node-settings-actions","sm-node-settings-field-grant-access","sm-node-settings-page-header","sm-node-settings-field-password","sm-node-settings-constants","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-page-general",(function(e){SM.currentModule="sm-node-settings-page-general";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),i=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-component-adaptiveformfield")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-icon")),r=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),o=babelHelpers.interopRequireDefault(t("sm-component-textarea")),d=babelHelpers.interopRequireDefault(t("sm-component-textbox")),c=babelHelpers.interopRequireDefault(t("sm-component-underlineformfield")),u=t("sm-settings-constants"),m=babelHelpers.interopRequireWildcard(t("sm-node-settings-actions")),f=babelHelpers.interopRequireWildcard(t("sm-node-settings-constants")),p=t("sm-page-nodepage-constants"),g=babelHelpers.interopRequireWildcard(t("sm-node-settings-field-validators")),h=t("sm-node-settings-field-formatter"),b=t("sm-node-settings-selectors");class y extends r.default{constructor(e){super(e),this._switchVisibility=this._switchVisibility.bind(this),this._switchAccess=this._switchAccess.bind(this),this._checkValidity=this._checkValidity.bind(this),this._nameChange=this._nameChange.bind(this),this.state={nameError:""}}componentDidMount(){this.props.autoFocus&&this._nameInput.focus()}_checkValidity(e){let t=p.NODE_TYPE_LABEL_MAP[this.props.type];g.isNameValid(e.target.value)?this.setState({nameError:""}):this.setState({nameError:"Invalid ".concat(t," Name - Must not be empty")})}_nameChange(e){this._checkValidity(e),this.props.onNameChange(e)}render(){let{access:e,description:t,disableClose:i,isCreate:r,isInherited:m,keywords:f,minimumVisibility:g,name:h,onClose:b,onDescriptionChange:y,onKeywordsChange:E,type:_,visibility:S}=this.props,C=e,v=S,N=p.NODE_TYPE_LABEL_MAP[_];switch(e){case"Password":C="People with Password";break;case"GrantAccess":C="People I Choose";break;case"None":default:C="Unlisted"===S?"Anyone with a Link":"Anyone"}m&&(C="".concat(C," (Inherited)"));let w,R=!1,A="Private"===S;return"Private"===g&&(R=!0,v="Inheriting ".concat(S)),w=R?s.default.createElement("p",{className:"sm-node-settings-message"},u.PARENT_ACCESS_MESSAGE.replace(/%type%/g,N)):A?s.default.createElement("p",{className:"sm-node-settings-message"},u.ACCESS_MESSAGE.replace(/%type%/g,N)):s.default.createElement(c.default,{label:"Access"},s.default.createElement("div",{className:"sm-form-field-action"},s.default.createElement(n.default,{onClick:this._switchAccess,noChrome:!0,size:n.default.SIZE_SMALL,"data-testid":"nodesettings_access_button"},C,s.default.createElement(l.default,{name:"AngleBracketRight",size:"small"})))),s.default.createElement("div",null,s.default.createElement("div",{className:"sm-node-settings-title sm-flex sm-flex-items-center"},s.default.createElement("h2",{className:"sm-flex-grow"},r?"Create New ".concat(N):"Edit ".concat(N," Settings")),!i&&s.default.createElement(n.default,{noChrome:!0,size:n.default.SIZE_MEDIUM,className:"sm-flex-justify-end","data-testid":"nodesettings_close_button",onClick:b},s.default.createElement(l.default,{name:"Close",size:l.default.SIZE_LARGE}))),s.default.createElement("form",{className:"sm-form-modern"},s.default.createElement(a.default,{label:"".concat(N," Name"),error:this.state.nameError},s.default.createElement(d.default,{ref:e=>{this._nameInput=e},onChange:this._nameChange,value:h,"data-testid":"nodesettings_name_field"})),s.default.createElement(a.default,{label:"Description"},s.default.createElement(o.default,{value:t,onChange:y,"data-testid":"nodesettings_description_field"})),s.default.createElement(a.default,{label:"Keywords"},s.default.createElement(d.default,{value:f,onChange:E,"data-testid":"nodesettings_keywords_field"})),s.default.createElement(c.default,{label:"Visibility"},s.default.createElement("div",{className:"sm-form-field-action"},R?v:s.default.createElement(n.default,{onClick:this._switchVisibility,noChrome:!0,size:n.default.SIZE_SMALL,"data-testid":"nodesettings_visibility_button"},v,s.default.createElement(l.default,{name:"AngleBracketRight",size:l.default.SIZE_SMALL})))),w))}_switchAccess(){let{onPageSwitch:e}=this.props;e(f.PAGE_ACCESS)}_switchVisibility(){let{onPageSwitch:e}=this.props;e(f.PAGE_VISIBILITY)}}y.displayName="NodeSettings.GeneralPage",y.propTypes={autoFocus:i.default.bool,name:i.default.string.isRequired,description:i.default.string.isRequired,disableClose:i.default.bool,keywords:i.default.string.isRequired,visibility:i.default.string.isRequired,access:i.default.string.isRequired,type:i.default.oneOf(Object.keys(p.NODE_TYPE_LABEL_MAP)).isRequired,isCreate:i.default.bool,isInherited:i.default.bool,minimumVisibility:i.default.string.isRequired,minimumSecurityType:i.default.string.isRequired,onNameChange:i.default.func.isRequired,onDescriptionChange:i.default.func.isRequired,onKeywordsChange:i.default.func.isRequired,onClose:i.default.func.isRequired,onPageSwitch:i.default.func.isRequired},y.defaultProps={autoFocus:!1,disableClose:!1};var E=(0,e.connect)((e,t)=>{let i,s=(0,b.getNodeSettings)(e).isCreate,a={...t};a.isCreate=s;let n={name:"Name",description:"Description",keywords:"Keywords",access:"SecurityType",visibility:"Privacy"};if(s){let t=(0,b.getCreateNodeSettings)(e);i=t.payload,a.type=i.Type,a.visibility=t.visibility,a.minimumVisibility=t.minimumVisibility,a.access=t.access,a.minimumSecurityType=t.minimumSecurityType,a.name=t.name,a.description=t.description,a.keywords=t.keywords;for(let[e,t]of Object.entries(n))i[t]&&(a[e]=i[t]);return a}let l=(0,b.getNodeSettings)(e),r=(0,b.getNodeById)(e,l.nodeId);i=l.payload||{};for(let[e,t]of Object.entries(n))if(void 0===i[t]){let i="access"===e?"EffectiveSecurityType":t;a[e]=(0,h.formatFieldForUI)(e,r[i])}else a[e]=i[t];return a.autoFocus=!!l.autoFocus,a.minimumVisibility=l.minimumVisibility,a.minimumSecurityType=l.minimumSecurityType,a.isInherited=l.isSecurityInherited,a.type=r.Type,a},(e,t)=>({...t,onNameChange:t=>{e(m.setNodeName(t.target.value))},onDescriptionChange:t=>{e(m.setNodeDescription(t.target.value))},onKeywordsChange:t=>{e(m.setNodeKeywords(t.target.value))},onClose:()=>{e(m.closeNodeSettings())},onPageSwitch:t=>{e(m.changePage(t))}}))(y);exports.default=E}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","react","sm-component-adaptiveformfield","sm-component-button","sm-icon","sm-component-pure-render","sm-component-textarea","sm-component-textbox","sm-component-underlineformfield","sm-settings-constants","sm-node-settings-actions","sm-node-settings-constants","sm-page-nodepage-constants","sm-node-settings-field-validators","sm-node-settings-field-formatter","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-page-header",(function(e){SM.currentModule="sm-node-settings-page-header";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-icon"));const l=({onSwitchBack:e,title:t})=>a.default.createElement(r.default,{className:"sm-node-settings-page-header sm-flex","data-testid":"nodesettings_back_button",noChrome:!0,onClick:e},a.default.createElement(n.default,{name:"NavigateBack",size:"large"}),a.default.createElement("h2",null,t));l.displayName="NodeSettings.PageHeader",l.propTypes={onSwitchBack:e.default.func,title:e.default.string.isRequired},l.defalutProps={onSwitchBack:()=>{}};var u=l;exports.default=u}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-icon"]});
YUI.add("sm-node-settings-page-visibility",(function(e){SM.currentModule="sm-node-settings-page-visibility";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),i=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-page")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),d=babelHelpers.interopRequireDefault(t("sm-component-underlineformfield")),r=babelHelpers.interopRequireWildcard(t("sm-node-settings-actions")),u=babelHelpers.interopRequireDefault(t("sm-node-settings-page-header")),o=t("sm-node-settings-constants"),m=t("sm-node-settings-selectors");const c=e=>{let{visibility:t,switchBack:i,onVisibilityChange:r,minimumVisibility:o}=e,m=0;switch(o){case"Public":case"Unlisted":m=1;break;case"Private":m=3}let c=s.default.user.isAssistant,f=l.default.createElement(a.default,{className:"sm-node-settings-option-selected",name:"Checkmark",size:a.default.SIZE_SMALL});return l.default.createElement("div",null,l.default.createElement(u.default,{title:"Visibility",onSwitchBack:i}),l.default.createElement("div",{className:"sm-form-modern"},m<=1&&l.default.createElement("div",{"data-visibility-level":"Public",onClick:r},l.default.createElement(d.default,{label:"Public"},l.default.createElement("div",{className:"sm-form-field-action"},l.default.createElement(n.default,{noChrome:!0,size:n.default.SIZE_SMALL,"data-testid":"nodesettings_public_button"},l.default.createElement("span",{className:"sm-button-label"},"Anyone"),"Public"===t?f:null)))),m<=2&&l.default.createElement("div",{"data-visibility-level":"Unlisted",onClick:r},l.default.createElement(d.default,{label:"Unlisted"},l.default.createElement("div",{className:"sm-form-field-action"},l.default.createElement(n.default,{noChrome:!0,size:n.default.SIZE_SMALL,"data-testid":"nodesettings_unlisted_button"},l.default.createElement("span",{className:"sm-button-label"},"Anyone with the Link"),"Unlisted"===t?f:null)))),m<=3&&!c&&l.default.createElement("div",{"data-visibility-level":"Private",onClick:r},l.default.createElement(d.default,{label:"Private"},l.default.createElement("div",{className:"sm-form-field-action"},l.default.createElement(n.default,{noChrome:!0,size:n.default.SIZE_SMALL,"data-testid":"nodesettings_private_button"},l.default.createElement("span",{className:"sm-button-label"},"Only Me"),"Private"===t?f:null))))))};c.displayName="NodeSettings.VisibilityPage",c.propTypes={visibility:i.default.oneOf(["Private","Public","Unlisted"]).isRequired,switchBack:i.default.func.isRequired,onVisibilityChange:i.default.func.isRequired,minimumVisibility:i.default.string.isRequired};var f=(0,e.connect)((e,t)=>{let i,l,a;if((0,m.getNodeSettings)(e).isCreate)({minimumVisibility:i,minimumVisibility:l,payload:a}=(0,m.getCreateNodeSettings)(e));else{let t=(0,m.getNodeSettings)(e).nodeId;i=(0,m.getNodeSettings)(e).minimumVisibility,a=(0,m.getNodeSettings)(e).payload,l=(0,m.getNodeById)(e,t).Privacy}return a.Privacy&&(l=a.Privacy),{...t,minimumVisibility:i,visibility:l}},e=>({onVisibilityChange(t){let i=t.currentTarget.getAttribute("data-visibility-level");e(r.setNodeVisibility(i))},switchBack(){e(r.changePage(o.PAGE_GENERAL))}}))(c);exports.default=f}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","react","sm-icon","sm-page","sm-component-button","sm-component-underlineformfield","sm-node-settings-actions","sm-node-settings-page-header","sm-node-settings-constants","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-panel",(function(e){SM.currentModule="sm-node-settings-panel";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),s=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-component-panel")),l=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),i=babelHelpers.interopRequireDefault(t("sm-transitions-slide")),o=babelHelpers.interopRequireDefault(t("sm-node-settings-page-access")),u=babelHelpers.interopRequireWildcard(t("sm-node-settings-actions")),d=babelHelpers.interopRequireDefault(t("sm-node-settings-footer")),c=babelHelpers.interopRequireDefault(t("sm-node-settings-page-general")),p=babelHelpers.interopRequireDefault(t("sm-node-settings-page-visibility")),f=t("sm-node-settings-constants"),m=t("sm-node-settings-selectors");class g extends l.default{componentDidUpdate(e){this.props.currentPage!==e.currentPage&&a.default.fixVhElements()}render(){let e,t,{currentPage:s,disableClose:a,disableSave:l,isCreate:u,onCreateClick:m,onSaveClick:g,errorMsg:b}=this.props,S=!1,C="right";switch(s){case f.PAGE_ACCESS:e=r.default.createElement(o.default,null);break;case f.PAGE_VISIBILITY:e=r.default.createElement(p.default,null);break;case f.PAGE_GENERAL:default:e=r.default.createElement(c.default,{disableClose:a}),S=!0,C="left"}return S&&(t=r.default.createElement(d.default,{errorMsg:b,disableSave:l,onClick:u?m:g,isCreate:u})),r.default.createElement(n.default,{className:"sm-node-settings"},r.default.createElement(i.default,{direction:C,innerProps:{className:"sm-flex sm-flex-column sm-flex-justify-between"},pageKey:s},e,t))}}g.displayName="NodeSettings",g.propTypes={currentPage:s.default.oneOf(f.PAGES),disableClose:s.default.bool,disableSave:s.default.bool,isCreate:s.default.bool,onCreateSuccess:s.default.func,onSaveClick:s.default.func.isRequired,errorMsg:s.default.string},g.defaultProps={errorMsg:"",currentPage:f.PAGE_GENERAL,disableClose:!1,disableSave:!1};var b=(0,e.connect)((e,t)=>{let s=(0,m.getNodeSettings)(e);if(!s)return t;let{currentPage:r,disableSave:a,errorMsg:n,isCreate:l}=s;return{...t,currentPage:r,disableSave:a,errorMsg:n,isCreate:l}},(e,t)=>({...t,dispatch:e,onSaveClick(){e(u.saveNodeSettings())},onCreateClick(){e(u.createNewNode(t.onCreateSuccess))}}))(g);exports.default=b}(),SM.currentModule=null}),"",{requires:["react-redux","prop-types","react","sm-dom","sm-component-panel","sm-component-pure-render","sm-transitions-slide","sm-node-settings-page-access","sm-node-settings-actions","sm-node-settings-footer","sm-node-settings-page-general","sm-node-settings-page-visibility","sm-node-settings-constants","sm-node-settings-selectors"]});
YUI.add("sm-node-settings-reducers",(function(e){SM.currentModule="sm-node-settings-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=u,exports.combined=function(r={},i){return(0,e.combineReducers)({ui:u})(r,i)};var e=r("redux"),i=babelHelpers.interopRequireWildcard(r("sm-node-settings-action-types")),t=babelHelpers.interopRequireWildcard(r("sm-node-settings-constants")),s=babelHelpers.interopRequireWildcard(r("sm-node-settings-field-validators"));function n(e,r){let{payload:s={}}=e;switch(r.type){case i.SET_NAME:return{...e,payload:{...s,Name:r.name}};case i.SET_DESCRIPTION:return{...e,payload:{...s,Description:r.description}};case i.SET_KEYWORDS:return{...e,payload:{...s,Keywords:r.keywords}};case i.SET_VISIBILITY:if(-1===t.VISIBILITY_OPTIONS.indexOf(r.visibility))throw new Error("Invalid Visibility Option");return{...e,payload:{...s,Privacy:r.visibility}};case i.SET_SECURITY_TYPE:if(-1===t.SECURITY_OPTIONS.indexOf(r.securityType))throw new Error("Invalid Security Option");return{...e,payload:{...s,SecurityType:r.securityType}};case i.SET_PASSWORD:return{...e,payload:{...s,Password:r.password}};case i.SET_PASSWORD_HINT:return{...e,payload:{...s,PasswordHint:r.passwordHint}};case i.SET_MINIMUM_VISIBILITY:return{...e,minimumVisibility:r.visibility};case i.SET_MINIMUM_SECURITY_TYPE:{let{isInherited:i,minimumSecurityType:t}=r.data;return{...e,isSecurityInherited:i,minimumSecurityType:t}}case i.OPEN_CREATE_NODE:return{...e,payload:{...s,Type:r.nodeType}};case i.ADD_GRANT:return{...e,payload:{...s,SecurityType:t.SECURITY_TYPES.GRANT_ACCESS}};default:return e}}function a(e,r){switch(r.type){case i.SET_NAME:return{...e,disableSave:!s.isNameValid(r.name)};case i.ADD_GRANT:return{...e,disableSave:!s.areGrantAccessEmailsValid(r.emailList)};case i.SET_GRANT_INVITE_EMAIL_ERROR:return{...e,disableSave:!!r.error,inviteErrorMsg:r.error};case i.CHANGE_PAGE:{let i=!0;return e.isCreate&&(i=s.isNameValid(e.payload.Name)),{...e,autoFocus:!1,currentPage:r.page,disableSave:!i||e.disableSave}}case i.LOAD_NODE_SETTINGS_REQUEST:return{...e,isLoading:!0};case i.LOADED_NODE_DATA:return{...e,isLoading:!1,nodeId:r.nodeId};case i.SAVE_CHANGES_REQUEST:return{...e,disableSave:!0,errorMsg:""};case i.SAVE_CHANGES_SUCCESS:return{...e,isOpen:!1};case i.SAVE_CHANGES_ERROR:return{...e,errorMsg:r.message,disableSave:r.partial};case i.OPEN_NODE_SETTINGS:return{...e,isOpen:!0,isCreate:!1};case i.OPEN_CREATE_NODE:return{...e,disableSave:!0,isOpen:!0,isCreate:!0};case i.CLOSE_NODE_SETTINGS:var{nodeId:t,parentUris:n,minimumVisibility:a,minimumSecurityType:d}=e;return{nodeId:t,parentUris:n,minimumVisibility:a,minimumSecurityType:d,isOpen:!1};case i.SHOW_CONFIRM_CANCEL:return{...e,showCancelConfirm:!0};case i.CANCEL_CLOSE:return{...e,showCancelConfirm:!1};default:return e}}function d(e,r){switch(r.type){case i.ADD_GRANT:return{...e,inviteGrants:r.emailList.toLowerCase()};case i.CANCEL_GRANT:var{cancelledGrants:t=[]}=e;return t=new Set([...t,r.grantUri]),{...e,cancelledGrants:[...t]};default:return e}}function u(e={},r){let{nodeSettings:i={}}=e;for(let e of[n,a,d])i=e(i,r);return{...e,nodeSettings:i}}}(),SM.currentModule=null}),"",{requires:["redux","sm-node-settings-action-types","sm-node-settings-constants","sm-node-settings-field-validators"]});
YUI.add("sm-node-settings-selectors",(function(e){SM.currentModule="sm-node-settings-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInheritedGrantsById=function(e={},t){return(o(e,t)||[]).map(t=>s(e,t.NodeID)).reduce((e,t)=>[...e,...t],[])},exports.getNodeById=r,exports.getNodeGrants=s,exports.getNodeParentNodesById=o,exports.getNodeSettings=function(e={}){let{ui:{nodeSettings:{autoFocus:t,cancelledGrants:i=[],currentPage:n,disableSave:r,errorMsg:s,inviteErrorMsg:o,inviteGrants:a="",isCreate:d,isLoading:u,isOpen:c,isSecurityInherited:l,minimumSecurityType:m,minimumVisibility:g,nodeId:y,payload:p={},showCancelConfirm:S}={}}={}}=e;return{autoFocus:t,cancelledGrants:i,currentPage:n,disableSave:r,errorMsg:s,inviteErrorMsg:o,inviteGrants:a,isCreate:d,isLoading:u,isOpen:c,isSecurityInherited:l,minimumSecurityType:m,minimumVisibility:g,nodeId:y,payload:p,showCancelConfirm:S}},exports.getCreateNodeSettings=function(t={}){let s,o,{ui:{nodeSettings:{payload:a={}}={}}={}}=t,{id:d}=(0,n.getNode)(t),{EffectivePrivacy:u,EffectiveSecurityType:c}=r(t,d);if("Album"===(null==a?void 0:a.Type)){let{Privacy:n}=(0,i.getEntity)(t,e.DEFAULT_ALBUM_TEMPLATE_URI)||{};s=n||e.VISIBILITY_PUBLIC,o=e.SECURITY_TYPES.NONE}else s=u,o=c;return{payload:a,access:o,visibility:s,minimumVisibility:u,minimumSecurityType:c,name:"",description:"",keywords:""}};var e=t("sm-node-settings-constants"),i=t("sm-api-redux-selectors"),n=t("sm-page-nodepage-selectors");function r(e={},t){return(0,i.getEntity)(e,"/api/v2/node/".concat(t))}function s(e={},t){return(0,i.getEntity)(e,"/api/v2/node/".concat(t,"!grants?count=200"))||[]}function o(e={},t){let n=(0,i.getExpansion)(e,"/api/v2/node/".concat(t),"ParentNodes");return n?n.filter(e=>e.NodeID!==t):n}}(),SM.currentModule=null}),"",{requires:["sm-node-settings-constants","sm-api-redux-selectors","sm-page-nodepage-selectors"]});
YUI.add("sm-quickstart-guide-action-types",(function(e){SM.currentModule="sm-quickstart-guide-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QUICKSTART_GUIDE_INIT_STORE=void 0;exports.QUICKSTART_GUIDE_INIT_STORE="QUICKSTART_GUIDE_INIT_STORE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-quickstart-guide-reducers",(function(e){SM.currentModule="sm-quickstart-guide-reducers";var exports={},u=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u("sm-quickstart-guide-action-types");exports.default=(u={},t)=>{switch(t.type){case e.QUICKSTART_GUIDE_INIT_STORE:{let e=u.ui||{};return{...u,ui:{...e,quickstartGuide:t.data}}}default:return u}}}(),SM.currentModule=null}),"",{requires:["sm-quickstart-guide-action-types"]});
YUI.add("sm-smugpage-header",(function(e){SM.currentModule="sm-smugpage-header";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var r=SM._requireShim;!function(){"use strict";var e=babelHelpers.interopRequireDefault(r("sm-dom")),a=babelHelpers.interopRequireDefault(r("sm-page")),t=babelHelpers.interopRequireDefault(r("react")),l=babelHelpers.interopRequireDefault(r("react-dom")),o=babelHelpers.interopRequireDefault(r("sm-redux-store")),d=r("react-redux"),u=babelHelpers.interopRequireDefault(r("sm-header-layout-container"));a.default.on("page:init",r=>{var a,i,n;let s=r.headerConfig||{};l.default.render(t.default.createElement(d.Provider,{store:o.default},t.default.createElement(u.default,{canCreateAlbum:s.canCreateAlbum,canCreateFolder:s.canCreateFolder,linkHeaderLogo:s.linkHeaderLogo,minimalHeaderTitle:s.minimalHeaderTitle,searchCategory:null===(a=s.search)||void 0===a?void 0:a.category,searchScope:null===(i=s.search)||void 0===i?void 0:i.scope,searchScopeValue:null===(n=s.search)||void 0===n?void 0:n.scopeValue,showCartOnlyHeader:s.cartOnlyHeader,showMinimalHeader:s.showMinimalHeader,showSearchBox:s.showSearchBox})),e.default.doc.getElementById("sm-page-header"))})}(),SM.currentModule=null}),"",{requires:["react","react-dom","react-redux","sm-dom","sm-header-actions","sm-header-layout-container","sm-page","sm-redux-store","sm-uri-deprecated"]});
YUI.add("sm-subscribe-choose-a-plan-v2-action-types",(function(e){SM.currentModule="sm-subscribe-choose-a-plan-v2-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHOOSE_PLAN_INIT_STORE=void 0;exports.CHOOSE_PLAN_INIT_STORE="CHOOSE_PLAN_INIT_STORE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-subscribe-choose-a-plan-v2-reducers",(function(e){SM.currentModule="sm-subscribe-choose-a-plan-v2-reducers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=s,exports.combined=function(r={},u){return e({ui:s})(r,u)};const{combineReducers:e}=SM.import("redux"),{CHOOSE_PLAN_INIT_STORE:r}=SM.import("sm-subscribe-choose-a-plan-v2-action-types");function u(e,u){switch(u.type){case r:return{...e,...u.subscribeConfig};default:return e}}function s(e={},r){let{choosePlan:s={}}=e;return{...e,choosePlan:u(s,r)}}}(),SM.currentModule=null}),"",{requires:["redux","sm-subscribe-choose-a-plan-v2-action-types"]});
YUI.add("sm-uploader-file",(function(e){SM.currentModule="sm-uploader-file";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("sm-dom-core"),i=babelHelpers.interopRequireDefault(t("sm-pretty-size")),s=babelHelpers.interopRequireDefault(t("sm-smuglog")),a=t("sm-form-field-file-picker-constants");exports.default=class{constructor(t){let i=t instanceof e.win.Blob||t instanceof e.win.File,a=t.isSmugMugResource&&"ExternalResource"===t.resourceType;if(!i&&!a)throw s.default.add("sm-uploader-file",{fileData:t,toString:t.toString&&t.toString()||"",message:"Unexpected file data"},s.default.LEVEL_ERROR),s.default.error("sm-uploader-file","Oops! There was an error reading the file. Please try again.");if(i)this.name=t.name,this.size=t.size,this.type=t.type,this.nativeObject=t;else{let e=t.get();this.external=!0,this.name=e.Name,this.size=e.ResourceDetails.OriginalSize,this.type=e.FileType.toLowerCase(),this.uri=e.Uri,e.ExternalFileId&&(this.externalFileId=e.ExternalFileId)}t.fullPath&&(this.path=t.fullPath),this.id="sm-uploader-file-".concat(++r)}get augmentedPath(){let e=this._pathInfo;if(e)return e.augmented||e.original}set augmentedPath(e){this._pathInfo=Object.assign({},this._pathInfo,{augmented:e})}get displayName(){let e=this._pathInfo;return e?e.original:this.name}get formattedSize(){return this.size&&(0,i.default)(this.size)||""}get path(){return this._pathInfo&&this._pathInfo.original}set path(e){this._pathInfo=Object.assign({},this._pathInfo,{original:e.replace(/^\//,"")})}get uploadWeight(){let e=this.extension.toLowerCase();return a.DEFAULT_IMAGE_EXTENSIONS.includes(e)||a.DEFAULT_IMAGE_MIMES.includes(this.type)?2:a.DEFAULT_SIDECAR_EXTENSIONS.includes(e)||"text/xml"===this.type?1:0}get extension(){let e=this.name.lastIndexOf(".");return e>0?this.name.substr(e+1).toLowerCase():""}hasRelativePath(){let e=this.path;return!(!e||e===this.name)}};let r=0}(),SM.currentModule=null}),"",{requires:["sm-dom-core","sm-form-field-file-picker-constants","sm-pretty-size","sm-smuglog"]});
YUI.add("sm-uploader-get-upload-limits-helper",(function(e){SM.currentModule="sm-uploader-get-upload-limits-helper";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUserUploadLimits=function({defaultImageTypesOnly:t=!1}={}){let i=e.default.getState(),a=(0,s.getUploadLimits)(i,{defaultImageTypesOnly:t});if(!a){let e=new Map;e.set("Image",r.IMAGE_SIZE),e.set("Video",r.VIDEO_SIZE);let t=new Map;return t.set("image",new Set(r.DEFAULT_IMAGE_MIMES)),t.set("video",new Set(r.DEFAULT_VIDEO_MIMES)),l.default.add("sm-uploader-get-upload-limits-helper",{[l.default.FIELD_MESSAGE]:"Failed to retrieve upload limits"},l.default.LEVEL_ERROR),{additionalKnownExtensionsAndMimes:new Set,allowedExtensions:new Set([...r.DEFAULT_IMAGE_EXTENSIONS,...r.DEFAULT_VIDEO_EXTENSIONS]),allowedMimeTypes:new Set([...r.DEFAULT_IMAGE_MIMES,...r.DEFAULT_VIDEO_MIMES]),maxFileSizes:e,fileTypeMap:t}}return a};var e=babelHelpers.interopRequireDefault(t("sm-redux-store")),l=babelHelpers.interopRequireDefault(t("sm-smuglog")),s=t("sm-page-selectors"),r=t("sm-form-field-file-picker-constants")}(),SM.currentModule=null}),"",{requires:["sm-form-field-file-picker-constants","sm-page-selectors","sm-redux-store","sm-smuglog"]});
YUI.add("sm-uploader-queue",(function(e){SM.currentModule="sm-uploader-queue";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("sm-event-emitter")),s=babelHelpers.interopRequireDefault(t("sm-io-core")),i=babelHelpers.interopRequireDefault(t("sm-page")),r=babelHelpers.interopRequireDefault(t("sm-pretty-size")),l=babelHelpers.interopRequireDefault(t("sm-resource-core")),o=babelHelpers.interopRequireDefault(t("sm-smuglog")),n=babelHelpers.interopRequireDefault(t("sm-uploader-file")),d=babelHelpers.interopRequireDefault(t("sm-uploader-tracking"));const u=e.default.win,{FIELD_NICKNAME:p,FIELD_MESSAGE:c,LEVEL_NOTICE:h,LEVEL_ERROR:m}=o.default,_="sm-uploader-queue",{nodeMaxChildren:f}=SM.env.limits,g={60:!0,61:!0,62:!0,98:!0,99:!0},U={10:{full:"You already have a %type% named %name% here. Try uploading with a different name – or changing the name of the existing %type% by accessing the %type%’s settings, and then re-uploading your new %type%.",type:"Node Name Conflict"},40:{full:"We only support ".concat(f," folders or galleries in a single folder."),type:"Node Children Count Conflict"},20:{full:"Your folders are nested too deeply for us to upload here.",type:"Node Depth Conflict"}},y={Album:"gallery",Folder:"folder",Page:"page"};class E extends a.default{constructor(e={}){super(),this.config=Object.assign({},{checkDuplicates:!0,duplicateAction:"skip"},e),this._initProperties()}get activeUploads(){return this._active}get completedUploads(){return this._completed}get failedUploads(){return this._failed}get percentComplete(){let e=this.completedUploads+this.failedUploads,t=this._uploadsQueue.length-this.removedUploads;return Object.values(this._activeProgress).forEach(t=>{e+=t}),Math.min(e,t)/t}get removedUploads(){return this._removed}get totalUploads(){return this._uploadsQueue.length-this.removedUploads}static getErrorType(e){let t;switch(e){case 60:case 61:case 16:case 62:case 404:t="Network Error";break;case 400:case 1:case 63:case 99:case 98:case 5:case 66:case 67:case 64:case 70:case 68:case 65:case 71:case 72:t="SmugMug Error";break;default:t="Unknown Error"}return t}static getConflictMessage(e){let t=U[e];return t&&t.full||"Unknown conflict."}add(e){if(!e)return Promise.reject(o.default.error(_,"No files passed to Uploader queue"));Array.isArray(e)||(e=[e]);let t=e.map(e=>{let t=e instanceof n.default?e:new n.default(e),a=this._createUploadData(t.id,t);return a.valid&&(this._uploadsQueue.push(a),this._uploadsMap[t.id]=a),a});return this._batchTotal+=t.length,t}clearAll(){let e=this._uploadsQueue;for(let t=0,a=e.length;t<a;t++){let a=e[t];this._releaseUploadIO(a),this._releaseFile(a)}return this._initProperties(),this}destroy(){this.clearAll(),this._detachBeforeUnload()}pause(){return this._stopped=!0,this}precheckFiles(e){Array.isArray(e)||(e=[e]);let t={},a={};return e.forEach((e,s)=>{e.hasRelativePath()&&(t[e.id]=e.path,a[e.id]=s)}),Object.keys(t).length?new Promise((s,i)=>{l.default.postUri("/api/v2/node/".concat(encodeURIComponent(this.config.nodeId),"!uploadconflicts"),{data:{RelativePaths:t},io:{apiRoot:"https://".concat(SM.env.host.upload)}}).then(t=>{let i=t.get("FolderUploadPathAugmentations");Object.keys(i).forEach(t=>{e[a[t]].augmentedPath=i[t]}),s(e)},e=>{let{response:t}=e.error;409!==(t&&t.Code)&&i();let a,s,r,n=l.default._makeResources(t).get("PathsConflictsDetails");for(let e in n){let t=n[e][0];a=t.Code,s=t.Uri,r=E.getConflictMessage(t.Code);break}10===a?l.default.loadUri(s).then(e=>{r=r.replace("%name%",e.get("Name"));let t=y[e.get("Type")]||"folder";r=r.replace(new RegExp("%type%","g"),t),i(o.default.error(_,{message:r,type:U[a].type}))},i):i(o.default.error(_,{message:r,type:U[a].type}))})}):Promise.resolve(e)}removeById(e){let t=this._getUploadById(e)||null;if(t){switch(t=this._releaseUploadIO(t),this._removed++,t.status){case"processing":this._active--,t.file&&delete this._fileNames[t.file.name],delete this._activeProgress[e];break;case"complete":this._completed--;break;case"error":this._failed--,t.file&&delete this._fileNames[t.file.name];break;case"verifying":this._inVerification--}t=this._releaseFile(t)}return delete this._uploadsMap[e],t}restart(){return this._currentIndex=0,this.run()}run(){let e=this._uploadsQueue,t=e.length;for(this._stopped=!1,this._currentIndex;this._currentIndex<t&&2!==this.activeUploads;this._currentIndex++)this._processUpload(e[this._currentIndex]);return this._checkCompleted(),this._active>0}_attachBeforeUnload(){this._detachBeforeUnload(),this._beforeUnload=e.default.addEventListener(u,"beforeunload",e=>{let t="Navigating away from this page will cancel uploads currently in progress.";return d.default.trackScreenView("Browser Confirm Navigation"),e.returnValue=t,t})}_checkCompleted(){let e=this._uploadsQueue.length;this._currentIndex===e&&0===this.activeUploads&&0===this._inVerification&&(this.emit(E.EVENT_QUEUE_COMPLETE,{completed:this.completedUploads,failed:this._batchFailed,total:this._batchTotal}),this._batchFailed=0,this._batchTotal=0,this._detachBeforeUnload())}_createUploadData(e,t){let a,s,i,r=t.name,l=this._getReplaceImageData(r),o=this._validateFile(t);return o.valid?!1===l&&(i="Photo to replace not found"):i=o.message,l&&(a=l.ImageID,s=l.AlbumID),{attempts:0,duplicateAlbumId:s||null,duplicateImageId:a||null,extension:t.extension,file:t,io:null,message:i||"",link:null==o?void 0:o.errorLink,status:"",type:o.type,uploadId:e,valid:o.valid}}_detachBeforeUnload(){this._beforeUnload&&(e.default.removeEventListener(this._beforeUnload),this._beforeUnload=null)}_getDuplicate(e){let t=this.config.albumKey,a=i.default.owner&&i.default.isOwnerOrAdmin()?i.default.owner.nickName:"";if(!this.config.checkDuplicates||!t||!a)return Promise.resolve(!1);let s="/api/v2/user/".concat(encodeURIComponent(a),"!duplicatecomponentsearch");return l.default.loadUri(s,{data:{AlbumUri:"/api/v2/album/".concat(t),FileName:e}}).then(t=>t.length?t[0]:this._getLocalDuplicate(e)).catch(()=>!1)}_getLocalDuplicate(e){return!!this._fileNames[e]}_getReplaceImageData(e){var t=this.config.replaceImagesData;if(t&&e){let a;for(let s=0,i=t.length;s<i;s++)if(a=t[s],e.toLowerCase()===a.FileName.toLowerCase())return a;return!1}return null}_getUploadById(e){return this._uploadsMap[e]||null}_initProperties(){this._active=0,this._activeProgress={},this._completed=0,this._currentIndex=0,this._failed=0,this._fileNames={},this._inVerification=0,this._removed=0,this._stopped=!0,this._uploadsMap={},this._uploadsQueue=[],this._batchFailed=0,this._batchTotal=0}_isExternalVideo(e){return e.external&&"video"===e.type}_isRetryableBackendError(e){return!!g[e]}_processUpload(e,t={isRetry:!1}){let a=this.config.duplicateAction;if(this._stopped||!e.file||e.status)return e;if(null!==e.duplicateImageId&&"skip"===a)return e;let s=e.file.name;return t.isRetry||this._active++,this._getDuplicate(s).then(t=>{if("allow"!==a&&(!0===t||t.isSmugMugResource&&"skip"===a))return e.errorLabel=e.message="Duplicate File",this.emit(E.EVENT_UPLOAD_ERROR,{type:"warning",upload:e}),this._active--,void(!this._stopped&&this.run());t&&"replace"===a?e.duplicateImageUri=t.getExpansionUri("Image"):this._fileNames[s]=!0,this._sendFile(e)}),e}_releaseFile(e){return e.file=null,e}_releaseUploadIO(e){return e.io&&e.io.abort(),e.io=null,e}_retryFile(e){return!this._stopped&&(delete e.status,delete this._fileNames[e.file.name],this._processUpload(e,{isRetry:!0}),!0)}_sendFile(e){let t;e.attempts++,e.status="processing",this._attachBeforeUnload(),this.emit(E.EVENT_UPLOAD_START,{upload:e}),t=e.file.external?this._sendThirdPartyFile(e):this._sendLocalFile(e),t.then(t=>{this._onUploadComplete(t,e.uploadId)}).catch(t=>{this._onSendError(e,t)})}_sendLocalFile(e){let t=e.io=(0,s.default)({type:"uploader",uploadData:e,requestData:this.config});return t.on("load",t=>{this._onUploadProgress(t,e.uploadId)}),t.on("progress",t=>{this._onUploadProgress(t,e.uploadId)}),t}_sendThirdPartyFile(e){let t={data:{Uri:e.file.uri},io:{apiRoot:"https://".concat(SM.env.host.upload)}},a="/api/v2/album/".concat(encodeURIComponent(this.config.albumKey),"!uploadfromexternalresource");return"replace"===this.config.duplicateAction&&e.duplicateImageUri&&(a="".concat(e.duplicateImageUri,"!replacefromexternalresource")),e.file.externalFileId&&(t.data.Id=e.file.externalFileId),l.default.postUri(a,t).catch(e=>{let t=l.default.getProblems(e),a=Object.keys(t);if(0===a.length)return e.error&&e.error.message||o.default.add(_,{details:e,[c]:"Error, but not field or standard error",url:document.URL},h),Promise.reject(e);let s=a[0],i=t[s][0];throw"Uri"!==s&&o.default.add(_,{details:t,field:s,[c]:"Problem field not Uri",url:document.URL},h),e.error.message=i,e})}_validateFile(e){let t,{uploadLimits:{additionalKnownExtensionsAndMimes:a,allowedExtensions:s,allowedMimeTypes:i,errorMessages:l,fileTypeMap:o,maxFileSizes:n}}=this.config,{extension:d,size:u,type:p}=e,c={message:"",type:"",valid:!1};if(o.has("SmugVault")){c.valid=!0,t=n.get("SmugVault"),c.type="Vault";let e=this._getFileType({extension:d,type:p});"Image"!==e&&"Video"!==e||(c.type=e)}else s.has(d)||i.has(p)?(c.valid=!0,c.type=this._getFileType({extension:d,type:p}),t=n.get(c.type)):(c.message="Unsupported file type.",(a.has(d)||a.has(p))&&(c.type="RAW",c.message="Error uploading file. ".concat(l.RAW.message),c.errorLink=l.RAW.link));if(c.valid&&u>t){let e=(0,r.default)(t);c.message="Exceeds maximum size of ".concat(e),c.valid=!1}return c}_getFileType({extension:e,type:t}){let a;for(let[s,i]of this.config.uploadLimits.fileTypeMap)if(i.has(e||t)){a=s;break}return a}_onSendError(e,t={}){let a=e.uploadId,s=this._activeProgress[a];delete this._activeProgress[a],"verifying"===e.status&&this._inVerification--,e=this._releaseUploadIO(e);let{error:r}=t;if(e.file&&e.file.external)o.default.add(_,{response:t,[c]:"Error uploading from third party",url:document.URL},m);else if(s<1&&e.attempts<2){if(this._retryFile(e))return}else 1===s&&o.default.add(_,{[c]:"XHR error all bytes sent",url:document.URL},h);r&&r.message?e.message=r.message:(o.default.add(_,{attempts:e.attempts,filePath:e.file.hasRelativePath()?e.file.augmentedPath:"",fileSize:e.file.size,[c]:"No error message on response",[p]:i.default.user.nickName,percentComplete:s,url:document.URL},m),e.message="Connection error"),e.status="error",r&&r.response&&(e.errorLabel=E.getErrorType(r.response.Code)),this._active--,this._failed++,this._batchFailed++,this._checkCompleted(),!this._stopped&&this.run(),this.emit(E.EVENT_UPLOAD_ERROR,{upload:e})}_onUploadComplete(e,t){let a,s=this._getUploadById(t),i=!1,r="verifying"===s.status,l={upload:s};"ok"===e.stat||e.isSmugMugResource&&"Image"===e.resourceType?i=!0:(a=this._isRetryableBackendError(e.code)&&s.attempts<2,s.errorLabel=E.getErrorType(e.code),s.message=e.message||"Unknown error"),delete this._activeProgress[t],r&&this._inVerification--,a||this._active--,s=this._releaseUploadIO(s);let o=a&&this._retryFile(s);i?(s=this._releaseFile(s),s.status="complete",s.imageData=e.Image||e.get(),this._completed++,this.emit(E.EVENT_UPLOAD_COMPLETE,l),!this._stopped&&this.run()):o||(s.status="error",this._failed++,this._batchFailed++,this.emit(E.EVENT_UPLOAD_ERROR,l),!this._stopped&&this.run()),this._stopped&&0===this.activeUploads&&this._detachBeforeUnload()}_onUploadProgress(e,t){let a=e.loaded||0,s=e.total||0;this._progressTimers||(this._progressTimers={}),clearTimeout(this._progressTimers[t]);let i=this._getUploadById(t);a&&s&&a===s&&"verifying"!==i.status&&(i.status="verifying",this._inVerification++,this.emit(E.EVENT_UPLOAD_VERIFYING,{upload:i})),this._progressTimers[t]=setTimeout(()=>{let e=0;i&&"complete"!==i.status&&(a&&s&&(e=this._activeProgress[t]=a/s),this.emit(E.EVENT_UPLOAD_PROGRESS,{percentComplete:e,uploadId:t}))},17)}}exports.default=E,E.EVENT_QUEUE_COMPLETE="queuecomplete",E.EVENT_UPLOAD_COMPLETE="uploadcomplete",E.EVENT_UPLOAD_ERROR="uploaderror",E.EVENT_UPLOAD_PROGRESS="uploadprogress",E.EVENT_UPLOAD_START="uploadstart",E.EVENT_UPLOAD_VERIFYING="uploadverifying"}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-event-emitter","sm-io-core","sm-page","sm-pretty-size","sm-resource-core","sm-smuglog","sm-uploader-transaction","sm-uploader-file","sm-uploader-tracking"]});
YUI.add("sm-uploader-tracking",(function(e){SM.currentModule="sm-uploader-tracking";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const e=SM.import("lodash"),r=SM.import("sm-analytics"),l={addNumber:"Add Mobile Number",addNumberError:"Add Mobile Number Error",buttonClick:"Button Click",changeDuplicate:"Change Duplicate Setting",close:"Close",complete:"Upload Complete",createGallery:"Create New Gallery",createGalleryError:"Create New Gallery Error",error:"Upload Error",failures:"Upload Failures",paused:"Uploads Paused",queue:"Queue Upload",remove:"Remove Upload",retryEnd:"Upload Retry End",screen:"Screen View",selectAll:"Select All",selectGallery:"Select Gallery",sendLink:"Send Upload Link",sendLinkAgain:"Send Upload Link Again",sendLinkError:"Send Upload Link Error",verifyNumber:"Verify Mobile Number",verifyNumberError:"Verify Mobile Number Error"},a={COLLECTION:r.CONTEXT.COLLECTION,IMAGE:r.CONTEXT.IMAGE,NODE:r.CONTEXT.NODE,SCREEN:r.CONTEXT.SCREEN};let o=module.exports={ACTIONS:l,CONTEXTS:a,trackEvent:(o,t={})=>{if(!o||-1===e.values(l).indexOf(o))return Promise.reject("Invalid Upload action.");let{contexts:n,params:d,screenName:i}=t,u=r.Tracker.createEvent(r.CATEGORY.UPLOAD,o,d);i||(i="Uploader"),u.addContext(a.SCREEN,{[r.CONTEXT_PARAM[a.SCREEN].SCREEN_NAME]:i});for(let e in n)u.addContext(e,n[e]);return l.queue===o&&"undefined"!=typeof Intercom&&Intercom&&Intercom("trackEvent","upload"),u.log()},trackScreenView:(e="Uploader",r)=>o.trackEvent(l.screen,{params:{label:e},screenName:r||e})}}(),SM.currentModule=null}),"",{requires:["lodash","sm-analytics"]});
YUI.add("sm-uploader-transaction",(function(e){SM.currentModule="sm-uploader-transaction";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const t="https://".concat(SM.env.host.upload);class a extends(SM.import("sm-io-xhr-transaction")){constructor(e={}){super(Object.assign({},e,{lazy:!0}))}_getHeaders(){let{requestData:e,uploadData:t}=this.request,{file:a}=t,r={"Content-Type":"","X-Smug-ResponseType":"JSON","X-Smug-Uploader":"HTML5","X-Smug-FileName":encodeURIComponent(a.name)};e.nodeId?r["X-Smug-NodeUri"]="/api/v2/node/".concat(e.nodeId):e.systemAlbumType?r["X-Smug-SystemAlbumType"]=e.systemAlbumType:r["X-Smug-AlbumID"]=t.duplicateAlbumId||e.albumId,a.hasRelativePath()&&(r["X-Smug-RelativePath"]=encodeURIComponent(a.augmentedPath)),"replace"===e.duplicateAction&&t.duplicateImageId&&(r["X-Smug-ImageID"]=t.duplicateImageId),"replace"===e.duplicateAction&&t.duplicateImageUri&&(r["X-Smug-ImageUri"]=t.duplicateImageUri);let o=a.name.match(/^smuploadfail_(\d{1,3})/);return o&&(r["X-Smug-ErrorCode"]=o[1]),t.attempts&&t.attempts>1&&(r["X-Smug-RetryCount"]=t.attempts-1),r}_init(){this.request={data:this.request.uploadData.file.nativeObject,headers:this._getHeaders(),method:"PUT",url:t,withCredentials:!0,on:{upload:{load:(...e)=>{this._notifier&&this._notifier.fire("load",...e)},progress:(...e)=>{this._notifier&&this._notifier.fire("progress",...e)}}}}}}exports.default=a,e.SM.io.Transaction.uploader=a}(),SM.currentModule=null}),"",{requires:["sm-io-xhr-transaction"]});
YUI.add("sm-w9-action-types",(function(E){SM.currentModule="sm-w9-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SET_FORM_RESPONSE_SUCCESS=exports.CHANGE_CHECK_FIELD=exports.CHANGE_PAYPAL_FIELD=exports.CHANGE_ACH_FIELD=exports.VALIDATE_ACH_MATCH=exports.SET_ROUTING_VALIDITY=exports.CHANGE_LEGAL_NAME=exports.UPDATE_TIN=exports.SELECT_TIN_TYPE=exports.SELECT_W9_TYPE=exports.SELECT_INTERNATIONAL=exports.SELECT_US=exports.SET_FORM_STEP=exports.SET_SIMPLE_FIELD=exports.SET_NICKNAME=exports.LOAD_LOCALE_OPTIONS=exports.LOAD_SAVED_STATE=exports.LOAD_W9_DATA=void 0;exports.LOAD_W9_DATA="LOAD_W9_DATA";exports.LOAD_SAVED_STATE="LOAD_SAVED_STATE";exports.LOAD_LOCALE_OPTIONS="LOAD_LOCALE_OPTIONS";exports.SET_NICKNAME="SET_NICKNAME";exports.SET_SIMPLE_FIELD="SET_SIMPLE_FIELD";exports.SET_FORM_STEP="SET_FORM_STEP";exports.SELECT_US="SELECT_US";exports.SELECT_INTERNATIONAL="SELECT_INTERNATIONAL";exports.SELECT_W9_TYPE="SELECT_W9_TYPE";exports.SELECT_TIN_TYPE="SELECT_TIN_TYPE";exports.UPDATE_TIN="UPDATE_TIN";exports.CHANGE_LEGAL_NAME="CHANGE_LEGAL_NAME";exports.SET_ROUTING_VALIDITY="SET_ROUTING_VALIDITY";exports.VALIDATE_ACH_MATCH="VALIDATE_ACH_MATCH";exports.CHANGE_ACH_FIELD="CHANGE_ACH_FIELD";exports.CHANGE_PAYPAL_FIELD="CHANGE_PAYPAL_FIELD";exports.CHANGE_CHECK_FIELD="CHANGE_CHECK_FIELD";exports.SET_FORM_RESPONSE_SUCCESS="SET_FORM_RESPONSE_SUCCESS"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-w9-constants",(function(T){SM.currentModule="sm-w9-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAYPAL_CURRENCIES=exports.JUMP_TO_STEPS=exports.FORM_STEPS=exports.W9_TYPES=exports.FORM_ERRORS=exports.ACH_OWNER_TYPES=exports.ACH_ACCOUNT_TYPES=exports.PAYMENT_TYPES=exports.TIN_TYPES=exports.PROTECTED_FIELDS=exports.AUTH_FIELDS=exports.PAYPAL_FIELDS=exports.CHECK_FIELDS=exports.ACH_FIELDS=exports.W9_FIELDS=exports.API_ENDPOINTS=exports.ACH_NAME_ON_ACCOUNT_LIMIT=exports.VQ=void 0;const{List:T,Map:e,OrderedMap:A}=SM.import("immutable");exports.VQ=3;exports.ACH_NAME_ON_ACCOUNT_LIMIT=22;const a=e({COUNTRIES:"/api/v2/address!countrieslookup",STATES:"/api/v2/address!regionslookup?country=USA"});exports.API_ENDPOINTS=a;const n=A({TYPE:"Type",PAYMENT_TYPE:"PaymentType",NAME:"Name",ADDITIONAL_NAME:"AdditionalName"});exports.W9_FIELDS=n;const E=A({ACH_TYPE:"ACHType",ACH_TYPE2:"ACHType2",ACH_NAME_ON_ACCOUNT:"ACHNameOnAccount",ACH_ROUTING:"ACHRouting",ACH_ROUTING2:"ACHRouting2",ACH_ACCOUNT:"ACHAccount",ACH_ACCOUNT2:"ACHAccount2",ACH_ROUTING_VALID:"_achRoutingValid",ACH_ROUTING_MATCH:"_achRoutingMatch",ACH_ACCOUNT_MATCH:"_achAccountMatch"});exports.ACH_FIELDS=E;const _=A({COUNTRY:"Country",CHECKS_MAILABLE_TO:"ChecksMailableTo",STREET_1:"Street1",STREET_2:"Street2",CITY:"City",STATE:"State",ZIP:"Zip",CHECKS_PAYABLE_TO:"ChecksPayableTo"});exports.CHECK_FIELDS=_;const o=A({PAYPAL_ADDRESS:"PayPalAddress",PAYPAL_ADDRESS2:"PayPalAddress2",PAYPAL_CURRENCY:"PayPalCurrency"});exports.PAYPAL_FIELDS=o;const S=e({AUTH_1:"auth1",AUTH_2:"auth2",AUTH_3:"auth3",INTL_AUTH_1:"intlAuth1",INTL_AUTH_2:"intlAuth2",INTL_AUTH_3:"intlAuth3"});exports.AUTH_FIELDS=S;const t=T(["Uri","UriDescription","vq","nickname","PayPalVerified","Status"]);exports.PROTECTED_FIELDS=t;const C="ein",P=e({SSN:"ssn",EIN:C});exports.TIN_TYPES=P;const l="ACH Direct Deposit",i=e({ACH:l,PAYPAL:"PayPal",CHECK:"Mailed Paper Checks",DEFAULT_US_PAYMENT:"ACH Direct Deposit",DEFAULT_INTL_PAYMENT:"PayPal"});exports.PAYMENT_TYPES=i;const s=e({CHECKING:"Checking",SAVINGS:"Savings"});exports.ACH_ACCOUNT_TYPES=s;const r=e({PERSONAL:"Personal",BUSINESS:"Business"});exports.ACH_OWNER_TYPES=r;exports.FORM_ERRORS={LOADURI_ERROR:"There was a problem loading your information.",REFRESH_ERROR:"There was a problem re-loading your information.",VALIDATION_ERROR:"There was a problem validating your information.",SYNC_ERROR:"There was a problem updating your information."};const N=A({TYPE_INDIVIDUAL:{label:"Individual (I don't file taxes as a business)",allowedTinTypes:["ssn"]},TYPE_SOLE_PROPERIETOR:{label:"Sole Proprietor",allowedTinTypes:["ssn",C]},TYPE_PARTNERSHIP:{label:"Partnership",allowedTinTypes:[C]},TYPE_CORPORATION:{label:"Corporation",allowedTinTypes:[C]},TYPE_LLC_DISREGARDED:{label:"LLC-Single Member",allowedTinTypes:["ssn",C]},TYPE_LLC_PARTNERSHIP:{label:"LLC-Partnership",allowedTinTypes:[C]},TYPE_LLC_CORPORATION:{label:"LLC-Corporation",allowedTinTypes:[C]},TYPE_NONPROFIT:{label:"Non-Profit / Government",allowedTinTypes:[C]},TYPE_INTERNATIONAL:{label:"International (I don't file taxes in the US)",allowedTinTypes:[]}});exports.W9_TYPES=N;const I=e({DEFAULT:"DEFAULT",US1A:"US1A",US1B:"US1B",US2:"US2",US3:"US3",US4A:"US4A",US4B:"US4B",US4C:"US4C",INTL1:"INTL1",INTL2A:"INTL2A",INTL2B:"INTL2B",INTL2C:"INTL2C",REVIEW:"REVIEW"});exports.FORM_STEPS=I;const R=e({"ach-epay-info":"REVIEW"});exports.JUMP_TO_STEPS=R;const L=A({USD:"$ - US Dollar",CAD:"CA$ - Canadian Dollar",GBP:"£ - British Pound Sterling",EUR:"€ - Euro",AUD:"A$ - Australian Dollar",MXN:"MX$ - Mexican Peso",JPY:"¥ - Japanese Yen",CHF:"CHF - Swiss Franc",NZD:"NZ$ - New Zealand Dollar",SEK:"SEK - Swedish Krona",HKD:"HK$ - Hong Kong Dollar"});exports.PAYPAL_CURRENCIES=L}(),SM.currentModule=null}),"",{requires:["immutable"]});
YUI.add("sm-w9-reducers",(function(e){SM.currentModule="sm-w9-reducers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DATA=l,exports.UI=a,exports.combined=function(s={},t){return e({ui:a,data:l})(s,t)};const{combineReducers:e}=SM.import("redux"),s=SM.import("sm-w9-action-types"),{W9_TYPES:t,PAYMENT_TYPES:r}=SM.import("sm-w9-constants");function i(e,t){switch(t.type){case s.LOAD_W9_DATA:return{...e,w9Data:{...t.w9Data}};default:return e}}function n(e,i){let{localeOptions:n={},fields:l={},fields:{w9Fields:a={},checkFields:c={},paypalFields:d={},tinFields:u={},achFields:T={}}={}}=e;switch(i.type){case s.LOAD_LOCALE_OPTIONS:return{...e,localeOptions:{...n,countries:i.countries,states:i.states}};case s.LOAD_SAVED_STATE:var o=i.savedState;return{...e,...o};case s.SET_NICKNAME:return{...e,nickname:i.nickname};case s.SET_SIMPLE_FIELD:return{...e,[i.simpleField]:i.simpleValue};case s.SET_FORM_STEP:return{...e,step:i.formStep,formResponseSuccess:!1};case s.SELECT_US:return{...e,isUs:!0,fields:{...l,w9Fields:{...a,Type:"",PaymentType:e.payTypeOverride||r.get("DEFAULT_US_PAYMENT")}}};case s.SELECT_INTERNATIONAL:return{...e,isUs:!1,fields:{...l,w9Fields:{...a,Type:t.get("TYPE_INTERNATIONAL"),PaymentType:e.payTypeOverride||r.get("DEFAULT_INTL_PAYMENT")}}};case s.SELECT_W9_TYPE:var E=i.w9Type.allowedTinTypes,_=1===E.length?E[0]:"",S=_===e.tinType?e.fields.tinFields.TIN:"";return{...e,tinType:_,fields:{...l,w9Fields:{...a,Type:i.w9Type},tinFields:{...u,TIN:S}}};case s.SELECT_TIN_TYPE:return{...e,tinType:i.tinType,fields:{...l,tinFields:{TIN:""}}};case s.UPDATE_TIN:return{...e,fields:{...l,tinFields:{...u,TIN:i.value}}};case s.CHANGE_LEGAL_NAME:return{...e,legalNameStored:!1,fields:{...l,w9Fields:{...a,[i.nameField]:i.nameValue}}};case s.SET_ROUTING_VALIDITY:return{...e,fields:{...l,achFields:{...T,_achRoutingValid:i.isValid}}};case s.VALIDATE_ACH_MATCH:return{...e,fields:{...l,achFields:{...T,[i.matchField]:i.isMatch}}};case s.CHANGE_ACH_FIELD:return{...e,achFieldsStored:!1,fields:{...l,achFields:{...T,[i.achField]:i.achValue}}};case s.CHANGE_PAYPAL_FIELD:return{...e,fields:{...l,paypalFields:{...d,[i.field]:i.fieldValue}}};case s.CHANGE_CHECK_FIELD:return{...e,fields:{...l,checkFields:{...c,[i.field]:i.fieldValue}}};case s.SET_FORM_RESPONSE_SUCCESS:return{...e,formSubmitting:!1,formResponseSuccess:i.formResponseSuccess,formResponseErrorMsg:i.error||""};default:return e}}function l(e={},s){let t=e;for(let e of[i])t=e(t,s);return t}function a(e={},s){let{w9:t={}}=e;for(let e of[n])t=e(t,s);return{...e,w9:t}}}(),SM.currentModule=null}),"",{requires:["redux","sm-w9-action-types","sm-w9-constants"]});
YUI.add('body-scroll-lock', function (Y) {SM.currentModule = 'body-scroll-lock';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var o={};t(o),e.bodyScrollLock=o}}(this,function(exports){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0});var l=!1;if("undefined"!=typeof window){var e={get passive(){l=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}var d="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),c=[],a=!1,u=-1,s=void 0,v=void 0,f=function(t){return c.some(function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))})},m=function(e){var t=e||window.event;return!!f(t.target)||(1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1))},o=function(){setTimeout(function(){void 0!==v&&(document.body.style.paddingRight=v,v=void 0),void 0!==s&&(document.body.style.overflow=s,s=void 0)})};exports.disableBodyScroll=function(r,e){if(d){if(!r)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(r&&!c.some(function(e){return e.targetElement===r})){var t={targetElement:r,options:e||{}};c=[].concat(i(c),[t]),r.ontouchstart=function(e){1===e.targetTouches.length&&(u=e.targetTouches[0].clientY)},r.ontouchmove=function(e){var t,o,n,i;1===e.targetTouches.length&&(o=r,i=(t=e).targetTouches[0].clientY-u,!f(t.target)&&(o&&0===o.scrollTop&&0<i?m(t):(n=o)&&n.scrollHeight-n.scrollTop<=n.clientHeight&&i<0?m(t):t.stopPropagation()))},a||(document.addEventListener("touchmove",m,l?{passive:!1}:void 0),a=!0)}}else{n=e,setTimeout(function(){if(void 0===v){var e=!!n&&!0===n.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(v=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===s&&(s=document.body.style.overflow,document.body.style.overflow="hidden")});var o={targetElement:r,options:e||{}};c=[].concat(i(c),[o])}var n},exports.clearAllBodyScrollLocks=function(){d?(c.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),a&&(document.removeEventListener("touchmove",m,l?{passive:!1}:void 0),a=!1),c=[],u=-1):(o(),c=[])},exports.enableBodyScroll=function(t){if(d){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,c=c.filter(function(e){return e.targetElement!==t}),a&&0===c.length&&(document.removeEventListener("touchmove",m,l?{passive:!1}:void 0),a=!1)}else(c=c.filter(function(e){return e.targetElement!==t})).length||o()}});
}());SM.currentModule = null;}, '', {"node_modules":true});
YUI.add("classnames",(function(e){SM.currentModule="classnames";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var e={}.hasOwnProperty;function r(){for(var n=[],s=0;s<arguments.length;s++){var u=arguments[s];if(u){var o=typeof u;if("string"===o||"number"===o)n.push(u);else if(Array.isArray(u)&&u.length){var t=r.apply(null,u);t&&n.push(t)}else if("object"===o)for(var a in u)e.call(u,a)&&u[a]&&n.push(a)}}return n.join(" ")}void 0!==module&&module.exports?(r.default=r,module.exports=r):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],(function(){return r})):window.classNames=r}(),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add("codemirror",(function(e){SM.currentModule="codemirror";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){var e,t,r,n=function(){return module.exports};e=this,t=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=n||i||o,l=a&&(n?document.documentMode||6:+(o||i)[1]),s=!o&&/WebKit\//.test(e),c=s&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),f=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),x=f&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(f=!1,s=!0);var k=y&&(c||f&&(null==x||x<12.11)),C=r||a&&l>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var L,M=function(e,t){var r=e.className,n=S(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function T(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function O(e,t){return T(e).appendChild(t)}function N(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function A(e,t,r,n){var i=N(e,t,r,n);return i.setAttribute("role","presentation"),i}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function P(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function W(e,t){var r=e.className;S(t).test(r)||(e.className+=(r?" ":"")+t)}function F(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!S(r[n]).test(t)&&(t+=" "+r[n]);return t}L=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var z=function(e){e.select()};function H(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function E(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,a=i||0;;){var l=e.indexOf("\t",o);if(l<0||l>=t)return a+(t-o);a+=l-o,a+=r-a%r,o=l+1}}g?z=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(z=function(e){try{e.select()}catch(e){}});var R=function(){this.id=null};function B(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}R.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var j={toString:function(){return"CodeMirror.Pass"}},q={scroll:!1},K={origin:"*mouse"},V={origin:"+move"};function U(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var a=o-n;if(o==e.length||i+a>=t)return n+Math.min(a,t-i);if(i+=o-n,n=o+1,(i+=r-i%r)>=t)return n}}var G=[""];function $(e){for(;G.length<=e;)G.push(_(G)+" ");return G[e]}function _(e){return e[e.length-1]}function X(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Y(){}function Z(e,t){var r;return Object.create?r=Object.create(e):(Y.prototype=e,r=new Y),t&&I(t,r),r}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&J(e))||t.test(e):J(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ne(e){return e.charCodeAt(0)>=768&&re.test(e)}function ie(e,t,r){for(;(r<0?t>0:t<e.length)&&ne(e.charAt(t));)t+=r;return t}function oe(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+n}}function ae(e,t,n){var i=this;this.input=n,i.scrollbarFiller=N("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=N("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=A("div",null,"CodeMirror-code"),i.selectionDiv=N("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=N("div",null,"CodeMirror-cursors"),i.measure=N("div",null,"CodeMirror-measure"),i.lineMeasure=N("div",null,"CodeMirror-measure"),i.lineSpace=A("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=A("div",[i.lineSpace],"CodeMirror-lines");i.mover=N("div",[o],null,"position: relative"),i.sizer=N("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=N("div",null,null,"position: absolute; height: 30px; width: 1px;"),i.gutters=N("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=N("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=N("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&l<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),s||r&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function le(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function se(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,(function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i})),n}function ce(e,t,r){var n=[];return e.iter(t,r,(function(e){n.push(e.text)})),n}function ue(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function fe(e){if(null==e.parent)return null;for(var t=e.parent,r=B(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function de(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a].height;if(t<l)break;t-=l}return r+a}function he(e,t){return t>=e.first&&t<e.first+e.size}function pe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,r){if(void 0===r&&(r=null),!(this instanceof ge))return new ge(e,t,r);this.line=e,this.ch=t,this.sticky=r}function me(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==me(e,t)}function ye(e){return ge(e.line,e.ch)}function be(e,t){return me(e,t)<0?t:e}function we(e,t){return me(e,t)<0?e:t}function xe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return ge(e.first,0);var r=e.first+e.size-1;return t.line>r?ge(r,le(e,r).text.length):function(e,t){var r=e.ch;return null==r||r>t?ge(e.line,t):r<0?ge(e.line,0):e}(t,le(e,t.line).text.length)}function Ce(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=ke(e,t[n]);return r}var Se=!1,Le=!1;function Me(e,t,r){this.marker=e,this.from=t,this.to=r}function Te(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Oe(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Ne(e,t){if(t.full)return null;var r=he(e,t.from.line)&&le(e,t.from.line).markedSpans,n=he(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,a=0==me(t.from,t.to),l=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!r||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Me(a,o.from,l?null:o.to))}}return n}(r,i,a),s=function(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!r||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Me(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,a),c=1==t.text.length,u=_(t.text).length+(c?i:0);if(l)for(var f=0;f<l.length;++f){var d=l[f];if(null==d.to){var h=Te(s,d.marker);h?c&&(d.to=null==h.to?null:h.to+u):d.to=i}}if(s)for(var p=0;p<s.length;++p){var g=s[p];null!=g.to&&(g.to+=u),null==g.from?Te(l,g.marker)||(g.from=u,c&&(l||(l=[])).push(g)):(g.from+=u,c&&(l||(l=[])).push(g))}l&&(l=Ae(l)),s&&s!=l&&(s=Ae(s));var m=[l];if(!c){var v,y=t.text.length-2;if(y>0&&l)for(var b=0;b<l.length;++b)null==l[b].to&&(v||(v=[])).push(new Me(l[b].marker,null,null));for(var w=0;w<y;++w)m.push(v);m.push(s)}return m}function Ae(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function De(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Pe(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function We(e){return e.inclusiveLeft?-1:0}function Fe(e){return e.inclusiveRight?1:0}function ze(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=me(n.from,i.from)||We(e)-We(t);if(o)return-o;var a=me(n.to,i.to)||Fe(e)-Fe(t);return a||t.id-e.id}function He(e,t){var r,n=Le&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||ze(r,i.marker)<0)&&(r=i.marker);return r}function Ie(e){return He(e,!0)}function Ee(e){return He(e,!1)}function Re(e,t,r,n,i){var o=le(e,t),a=Le&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var c=s.marker.find(0),u=me(c.from,r)||We(s.marker)-We(i),f=me(c.to,n)||Fe(s.marker)-Fe(i);if(!(u>=0&&f<=0||u<=0&&f>=0)&&(u<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?me(c.to,r)>=0:me(c.to,r)>0)||u>=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?me(c.from,n)<=0:me(c.from,n)<0)))return!0}}}function Be(e){for(var t;t=Ie(e);)e=t.find(-1,!0).line;return e}function je(e,t){var r=le(e,t),n=Be(r);return r==n?t:fe(n)}function qe(e,t){if(t>e.lastLine())return t;var r,n=le(e,t);if(!Ke(e,n))return t;for(;r=Ee(n);)n=r.find(1,!0).line;return fe(n)+1}function Ke(e,t){var r=Le&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Ve(e,t,n))return!0}}function Ve(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Ve(e,n.line,Te(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Ve(e,t,i))return!0}function Ue(e){for(var t=0,r=(e=Be(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;o=(r=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==r)break;t+=l.height}return t}function Ge(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=Ie(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=Ee(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,r+=(n=o.to.line).text.length-o.to.ch}return r}function $e(e){var t=e.display,r=e.doc;t.maxLine=le(r,r.first),t.maxLineLength=Ge(t.maxLine),t.maxLineChanged=!0,r.iter((function(e){var r=Ge(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)}))}var _e=null;function Xe(e,t,r){var n;_e=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==r?n=i:_e=i),o.from==t&&(o.from!=o.to&&"before"!=r?n=i:_e=i)}return null!=n?n:_e}var Ye=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,r=/[LRr]/,n=/[Lb1n]/,i=/[1n]/;function o(e,t,r){this.level=e,this.from=t,this.to=r}return function(a,l){var s="ltr"==l?"L":"R";if(0==a.length||"ltr"==l&&!e.test(a))return!1;for(var c,u=a.length,f=[],d=0;d<u;++d)f.push((c=a.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L");for(var h=0,p=s;h<u;++h){var g=f[h];"m"==g?f[h]=p:p=g}for(var m=0,v=s;m<u;++m){var y=f[m];"1"==y&&"r"==v?f[m]="n":r.test(y)&&(v=y,"r"==y&&(f[m]="R"))}for(var b=1,w=f[0];b<u-1;++b){var x=f[b];"+"==x&&"1"==w&&"1"==f[b+1]?f[b]="1":","!=x||w!=f[b+1]||"1"!=w&&"n"!=w||(f[b]=w),w=x}for(var k=0;k<u;++k){var C=f[k];if(","==C)f[k]="N";else if("%"==C){var S=void 0;for(S=k+1;S<u&&"%"==f[S];++S);for(var L=k&&"!"==f[k-1]||S<u&&"1"==f[S]?"1":"N",M=k;M<S;++M)f[M]=L;k=S-1}}for(var T=0,O=s;T<u;++T){var N=f[T];"L"==O&&"1"==N?f[T]="L":r.test(N)&&(O=N)}for(var A=0;A<u;++A)if(t.test(f[A])){var D=void 0;for(D=A+1;D<u&&t.test(f[D]);++D);for(var P="L"==(A?f[A-1]:s),W=P==("L"==(D<u?f[D]:s))?P?"L":"R":s,F=A;F<D;++F)f[F]=W;A=D-1}for(var z,H=[],I=0;I<u;)if(n.test(f[I])){var E=I;for(++I;I<u&&n.test(f[I]);++I);H.push(new o(0,E,I))}else{var R=I,B=H.length;for(++I;I<u&&"L"!=f[I];++I);for(var j=R;j<I;)if(i.test(f[j])){R<j&&H.splice(B,0,new o(1,R,j));var q=j;for(++j;j<I&&i.test(f[j]);++j);H.splice(B,0,new o(2,q,j)),R=j}else++j;R<I&&H.splice(B,0,new o(1,R,I))}return"ltr"==l&&(1==H[0].level&&(z=a.match(/^\s+/))&&(H[0].from=z[0].length,H.unshift(new o(0,0,z[0].length))),1==_(H).level&&(z=a.match(/\s+$/))&&(_(H).to-=z[0].length,H.push(new o(0,u-z[0].length,u)))),"rtl"==l?H.reverse():H}}();function Ze(e,t){var r=e.order;return null==r&&(r=e.order=Ye(e.text,t)),r}var Qe=[],Je=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||Qe).concat(r)}};function et(e,t){return e._handlers&&e._handlers[t]||Qe}function tt(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=B(i,r);o>-1&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function rt(e,t){var r=et(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function nt(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),rt(e,r||t.type,e,t),ct(t)||t.codemirrorIgnore}function it(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==B(r,t[n])&&r.push(t[n])}function ot(e,t){return et(e,t).length>0}function at(e){e.prototype.on=function(e,t){Je(this,e,t)},e.prototype.off=function(e,t){tt(this,e,t)}}function lt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function st(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ct(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ut(e){lt(e),st(e)}function ft(e){return e.target||e.srcElement}function dt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var ht,pt,gt=function(){if(a&&l<9)return!1;var e=N("div");return"draggable"in e||"dragDrop"in e}();function mt(e){if(null==ht){var t=N("span","​");O(e,N("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ht=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&l<8))}var r=ht?N("span","​"):N("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function vt(e){if(null!=pt)return pt;var t=O(e,document.createTextNode("AخA")),r=L(t,0,1).getBoundingClientRect(),n=L(t,1,2).getBoundingClientRect();return T(e),!(!r||r.left==r.right)&&(pt=n.right-r.right<3)}var yt,bt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(r.push(o.slice(0,a)),t+=a+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},wt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},xt="oncopy"in(yt=N("div"))||(yt.setAttribute("oncopy","return;"),"function"==typeof yt.oncopy),kt=null,Ct={},St={};function Lt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ct[e]=t}function Mt(e){if("string"==typeof e&&St.hasOwnProperty(e))e=St[e];else if(e&&"string"==typeof e.name&&St.hasOwnProperty(e.name)){var t=St[e.name];"string"==typeof t&&(t={name:t}),(e=Z(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Mt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Mt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Tt(e,t){t=Mt(t);var r=Ct[t.name];if(!r)return Tt(e,"text/plain");var n=r(e,t);if(Ot.hasOwnProperty(t.name)){var i=Ot[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)n[a]=t.modeProps[a];return n}var Ot={};function Nt(e,t){I(t,Ot.hasOwnProperty(e)?Ot[e]:Ot[e]={})}function At(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Dt(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Pt(e,t,r){return!e.startState||e.startState(t,r)}var Wt=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};Wt.prototype.eol=function(){return this.pos>=this.string.length},Wt.prototype.sol=function(){return this.pos==this.lineStart},Wt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Wt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Wt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Wt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Wt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Wt.prototype.skipToEnd=function(){this.pos=this.string.length},Wt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Wt.prototype.backUp=function(e){this.pos-=e},Wt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=E(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?E(this.string,this.lineStart,this.tabSize):0)},Wt.prototype.indentation=function(){return E(this.string,null,this.tabSize)-(this.lineStart?E(this.string,this.lineStart,this.tabSize):0)},Wt.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Wt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Wt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Wt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Wt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Ft=function(e,t){this.state=e,this.lookAhead=t},zt=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function Ht(e,t,r,n){var i=[e.state.modeGen],o={};Ut(e,t.text,e.doc.mode,r,(function(e,t){return i.push(e,t)}),o,n);for(var a=r.state,l=function(n){r.baseTokens=i;var l=e.state.overlays[n],s=1,c=0;r.state=!0,Ut(e,t.text,l.mode,r,(function(e,t){for(var r=s;c<e;){var n=i[s];n>e&&i.splice(s,1,e,i[s+1],n),s+=2,c=Math.min(e,n)}if(t)if(l.opaque)i.splice(r,s-r,e,"overlay "+t),s=r+2;else for(;r<s;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"overlay "+t}}),o),r.state=a,r.baseTokens=null,r.baseTokenPos=1},s=0;s<e.state.overlays.length;++s)l(s);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function It(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Et(e,fe(t)),i=t.text.length>e.options.maxHighlightLength&&At(e.doc.mode,n.state),o=Ht(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Et(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new zt(n,!0,t);var o=function(e,t,r){for(var n,i,o=e.doc,a=r?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>a;--l){if(l<=o.first)return o.first;var s=le(o,l-1),c=s.stateAfter;if(c&&(!r||l+(c instanceof Ft?c.lookAhead:0)<=o.modeFrontier))return l;var u=E(s.text,null,e.options.tabSize);(null==i||n>u)&&(i=l-1,n=u)}return i}(e,t,r),a=o>n.first&&le(n,o-1).stateAfter,l=a?zt.fromSaved(n,a,o):new zt(n,Pt(n.mode),o);return n.iter(o,t,(function(r){Rt(e,r.text,l);var n=l.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?l.save():null,l.nextLine()})),r&&(n.modeFrontier=l.line),l}function Rt(e,t,r,n){var i=e.doc.mode,o=new Wt(t,e.options.tabSize,r);for(o.start=o.pos=n||0,""==t&&Bt(i,r.state);!o.eol();)jt(i,o,r.state),o.start=o.pos}function Bt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Dt(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function jt(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Dt(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}zt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},zt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},zt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},zt.fromSaved=function(e,t,r){return t instanceof Ft?new zt(e,At(e.mode,t.state),r,t.lookAhead):new zt(e,At(e.mode,t),r)},zt.prototype.save=function(e){var t=!1!==e?At(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ft(t,this.maxLookAhead):t};var qt=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function Kt(e,t,r,n){var i,o,a=e.doc,l=a.mode,s=le(a,(t=ke(a,t)).line),c=Et(e,t.line,r),u=new Wt(s.text,e.options.tabSize,c);for(n&&(o=[]);(n||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=jt(l,u,c.state),n&&o.push(new qt(u,i,At(a.mode,c.state)));return n?o:new qt(u,i,c.state)}function Vt(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function Ut(e,t,r,n,i,o,a){var l=r.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,c=0,u=null,f=new Wt(t,e.options.tabSize,n),d=e.options.addModeClass&&[null];for(""==t&&Vt(Bt(r,n.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(l=!1,a&&Rt(e,t,n,f.pos),f.pos=t.length,s=null):s=Vt(jt(r,f,n.state,d),o),d){var h=d[0].name;h&&(s="m-"+(s?h+" "+s:h))}if(!l||u!=s){for(;c<f.start;)i(c=Math.min(f.start,c+5e3),u);u=s}f.start=f.pos}for(;c<f.pos;){var p=Math.min(f.pos,c+5e3);i(p,u),c=p}}var Gt=function(e,t,r){this.text=e,Pe(this,t),this.height=r?r(this):1};function $t(e){e.parent=null,De(e)}Gt.prototype.lineNo=function(){return fe(this)},at(Gt);var _t={},Xt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Xt:_t;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function Zt(e,t){var r=A("span",null,null,s?"padding-right: .1px":null),n={pre:A("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(a||s)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,l=void 0;n.pos=0,n.addToken=Jt,vt(e.display.measure)&&(l=Ze(o,e.doc.direction))&&(n.addToken=er(n.addToken,l)),n.map=[],rr(o,n,It(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=F(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=F(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(mt(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(s){var c=n.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return rt(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=F(n.pre.className,n.textClass||"")),n}function Qt(e){var t=N("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,r,n,i,o,s){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/ {2}/.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),n+=o,r=" "==o}return n}(t,e.trailingSpace):t,f=e.cm.state.specialChars,d=!1;if(f.test(t)){c=document.createDocumentFragment();for(var h=0;;){f.lastIndex=h;var p=f.exec(t),g=p?p.index-h:t.length-h;if(g){var m=document.createTextNode(u.slice(h,h+g));a&&l<9?c.appendChild(N("span",[m])):c.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;h+=g+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=c.appendChild(N("span",$(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((v=c.appendChild(N("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),a&&l<9?c.appendChild(N("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),a&&l<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),r||n||i||d||s){var w=r||"";n&&(w+=n),i&&(w+=i);var x=N("span",[c],w,s);return o&&(x.title=o),e.content.appendChild(x)}e.content.appendChild(c)}}function er(e,t){return function(r,n,i,o,a,l,s){i=i?i+" cm-force-border":"cm-force-border";for(var c=r.pos,u=c+n.length;;){for(var f=void 0,d=0;d<t.length&&!((f=t[d]).to>c&&f.from<=c);d++);if(f.to>=u)return e(r,n,i,o,a,l,s);e(r,n.slice(0,f.to-c),i,o,null,l,s),o=null,n=n.slice(f.to-c),c=f.to}}}function tr(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function rr(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var a,l,s,c,u,f,d,h=i.length,p=0,g=1,m="",v=0;;){if(v==p){s=c=u=f=l="",d=null,v=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var x=n[w],k=x.marker;"bookmark"==k.type&&x.from==p&&k.widgetNode?y.push(k):x.from<=p&&(null==x.to||x.to>p||k.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),k.className&&(s+=" "+k.className),k.css&&(l=(l?l+";":"")+k.css),k.startStyle&&x.from==p&&(u+=" "+k.startStyle),k.endStyle&&x.to==v&&(b||(b=[])).push(k.endStyle,x.to),k.title&&!f&&(f=k.title),k.collapsed&&(!d||ze(d.marker,k)<0)&&(d=x)):x.from>p&&v>x.from&&(v=x.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==v&&(c+=" "+b[C]);if(!d||d.from==p)for(var S=0;S<y.length;++S)tr(t,0,y[S]);if(d&&(d.from||0)==p){if(tr(t,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=h)break;for(var L=Math.min(h,v);;){if(m){var M=p+m.length;if(!d){var T=M>L?m.slice(0,L-p):m;t.addToken(t,T,a?a+s:s,u,p+T.length==v?c:"",f,l)}if(M>=L){m=m.slice(L-p),p=L;break}p=M,u=""}m=i.slice(o,o=r[g++]),a=Yt(r[g++],t.cm.options)}}else for(var O=1;O<r.length;O+=2)t.addToken(t,i.slice(o,o=r[O]),Yt(r[O+1],t.cm.options))}function nr(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Ee(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?fe(_(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Ke(e,t)}function ir(e,t,r){for(var n,i=[],o=t;o<r;o=n){var a=new nr(e.doc,le(e.doc,o),o);n=o+a.size,i.push(a)}return i}var or=null,ar=null;function lr(e,t){var r=et(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);or?n=or.delayedCallbacks:ar?n=ar:(n=ar=[],setTimeout(sr,0));for(var o=function(e){n.push((function(){return r[e].apply(null,i)}))},a=0;a<r.length;++a)o(a)}}function sr(){var e=ar;ar=null;for(var t=0;t<e.length;++t)e[t]()}function cr(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?dr(e,t):"gutter"==o?pr(e,t,r,n):"class"==o?hr(e,t):"widget"==o&&gr(e,t,n)}t.changes=null}function ur(e){return e.node==e.text&&(e.node=N("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&l<8&&(e.node.style.zIndex=2)),e.node}function fr(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Zt(e,t)}function dr(e,t){var r=t.text.className,n=fr(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,hr(e,t)):r&&(t.text.className=r)}function hr(e,t){!function(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=ur(t);t.background=n.insertBefore(N("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?ur(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function pr(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=ur(t);t.gutterBackground=N("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=ur(t),l=t.gutter=N("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),a.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(N("div",pe(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var c=e.options.gutters[s],u=o.hasOwnProperty(c)&&o[c];u&&l.appendChild(N("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[c]+"px; width: "+n.gutterWidth[c]+"px"))}}}function gr(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,"CodeMirror-linewidget"==n.className&&t.node.removeChild(n);vr(e,t,r)}function mr(e,t,r,n){var i=fr(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),hr(e,t),pr(e,t,r,n),vr(e,t,n),t.node}function vr(e,t,r){if(yr(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)yr(e,t.rest[n],t,r,!1)}function yr(e,t,r,n,i){if(t.widgets)for(var o=ur(r),a=0,l=t.widgets;a<l.length;++a){var s=l[a],c=N("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),br(s,c,r,n),e.display.input.setUneditable(c),i&&s.above?o.insertBefore(c,r.gutter||r.text):o.appendChild(c),lr(s,"redraw")}}function br(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function wr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),O(t.display.measure,N("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function xr(e,t){for(var r=ft(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function kr(e){return e.lineSpace.offsetTop}function Cr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=O(e.measure,N("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Lr(e){return 30-e.display.nativeBarWidth}function Mr(e){return e.display.scroller.clientWidth-Lr(e)-e.display.barWidth}function Tr(e){return e.display.scroller.clientHeight-Lr(e)-e.display.barHeight}function Or(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(fe(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Nr(e,t,r,n){return Pr(e,Dr(e,t),r,n)}function Ar(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[un(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Dr(e,t){var r=fe(t),n=Ar(e,r);n&&!n.text?n=null:n&&n.changes&&(cr(e,n,r,on(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var r=fe(t=Be(t)),n=e.display.externalMeasured=new nr(e.doc,t,r);n.lineN=r;var i=n.built=Zt(e,n);return n.text=i.pre,O(e.display.lineMeasure,i.pre),n}(e,t));var i=Or(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Pr(e,t,r,n,i){t.before&&(r=-1);var o,s=r+(n||"");return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,r){var n=e.options.lineWrapping,i=n&&Mr(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],c=a[l+1];Math.abs(s.bottom-c.bottom)>2&&o.push((s.bottom+c.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,r,n){var i,o=zr(t.map,r,n),s=o.node,c=o.start,u=o.end,f=o.collapse;if(3==s.nodeType){for(var d=0;d<4;d++){for(;c&&ne(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&ne(t.line.text.charAt(o.coverStart+u));)++u;if((i=a&&l<9&&0==c&&u==o.coverEnd-o.coverStart?s.parentNode.getBoundingClientRect():Hr(L(s,c,u).getClientRects(),n)).left||i.right||0==c)break;u=c,c-=1,f="right"}a&&l<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=kt)return kt;var t=O(e,N("span","x")),r=t.getBoundingClientRect(),n=L(t,0,1).getBoundingClientRect();return kt=Math.abs(r.left-n.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,i))}else{var h;c>0&&(f=n="right"),i=e.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==n?h.length-1:0]:s.getBoundingClientRect()}if(a&&l<9&&!c&&(!i||!i.left&&!i.right)){var p=s.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+nn(e.display),top:p.top,bottom:p.bottom}:Fr}for(var g=i.top-t.rect.top,m=i.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w=b?y[b-1]:0,x=y[b],k={left:("right"==f?i.right:i.left)-t.rect.left,right:("left"==f?i.left:i.right)-t.rect.left,top:w,bottom:x};return i.left||i.right||(k.bogus=!0),e.options.singleCursorHeightPerLine||(k.rtop=g,k.rbottom=m),k}(e,t,r,n)).bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Wr,Fr={left:0,right:0,top:0,bottom:0};function zr(e,t,r){for(var n,i,o,a,l,s,c=0;c<e.length;c+=3)if(l=e[c],s=e[c+1],t<l?(i=0,o=1,a="left"):t<s?o=1+(i=t-l):(c==e.length-3||t==s&&e[c+3]>t)&&(i=(o=s-l)-1,t>=s&&(a="right")),null!=i){if(n=e[c+2],l==s&&r==(n.insertLeft?"left":"right")&&(a=r),"left"==r&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)n=e[2+(c-=3)],a="left";if("right"==r&&i==s-l)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)n=e[(c+=3)+2],a="right";break}return{node:n,start:i,end:o,collapse:a,coverStart:l,coverEnd:s}}function Hr(e,t){var r=Fr;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function Ir(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Er(e){e.display.externalMeasure=null,T(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ir(e.display.view[t])}function Rr(e){Er(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Br(){return u&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jr(){return u&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function qr(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=wr(e.widgets[r]));return t}function Kr(e,t,r,n,i){if(!i){var o=qr(t);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var a=Ue(t);if("local"==n?a+=kr(e.display):a-=e.display.viewOffset,"page"==n||"window"==n){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==n?0:jr());var s=l.left+("window"==n?0:Br());r.left+=s,r.right+=s}return r.top+=a,r.bottom+=a,r}function Vr(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=Br(),i-=jr();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:n-a.left,top:i-a.top}}function Ur(e,t,r,n,i){return n||(n=le(e.doc,t.line)),Kr(e,n,Nr(e,n,t.ch,i),r)}function Gr(e,t,r,n,i,o){function a(t,a){var l=Pr(e,i,t,a?"right":"left",o);return a?l.left=l.right:l.right=l.left,Kr(e,n,l,r)}n=n||le(e.doc,t.line),i||(i=Dr(e,n));var l=Ze(n,e.doc.direction),s=t.ch,c=t.sticky;if(s>=n.text.length?(s=n.text.length,c="before"):s<=0&&(s=0,c="after"),!l)return a("before"==c?s-1:s,"before"==c);function u(e,t,r){return a(r?e-1:e,1==l[t].level!=r)}var f=Xe(l,s,c),d=_e,h=u(s,f,"before"==c);return null!=d&&(h.other=u(s,d,"before"!=c)),h}function $r(e,t){var r=0;t=ke(e.doc,t),e.options.lineWrapping||(r=nn(e.display)*t.ch);var n=le(e.doc,t.line),i=Ue(n)+kr(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function _r(e,t,r,n,i){var o=ge(e,t,r);return o.xRel=i,n&&(o.outside=!0),o}function Xr(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return _r(n.first,0,null,!0,-1);var i=de(n,r),o=n.first+n.size-1;if(i>o)return _r(n.first+n.size-1,le(n,o).text.length,null,!0,1);t<0&&(t=0);for(var a=le(n,i);;){var l=Jr(e,a,i,t,r),s=Ee(a),c=s&&s.find(0,!0);if(!s||!(l.ch>c.from.ch||l.ch==c.from.ch&&l.xRel>0))return l;i=fe(a=c.to.line)}}function Yr(e,t,r,n){n-=qr(t);var i=t.text.length,o=oe((function(t){return Pr(e,r,t-1).bottom<=n}),i,0);return{begin:o,end:i=oe((function(t){return Pr(e,r,t).top>n}),o,i)}}function Zr(e,t,r,n){return r||(r=Dr(e,t)),Yr(e,t,r,Kr(e,t,Pr(e,r,n),"line").top)}function Qr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function Jr(e,t,r,n,i){i-=Ue(t);var o=Dr(e,t),a=qr(t),l=0,s=t.text.length,c=!0,u=Ze(t,e.doc.direction);if(u){var f=(e.options.lineWrapping?tn:en)(e,t,r,o,u,n,i);l=(c=1!=f.level)?f.from:f.to-1,s=c?f.to:f.from-1}var d,h,p=null,g=null,m=oe((function(t){var r=Pr(e,o,t);return r.top+=a,r.bottom+=a,!!Qr(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(p=t,g=r),!0)}),l,s),v=!1;if(g){var y=n-g.left<g.right-n,b=y==c;m=p+(b?0:1),h=b?"after":"before",d=y?g.left:g.right}else{c||m!=s&&m!=l||m++,h=0==m?"after":m==t.text.length?"before":Pr(e,o,m-(c?1:0)).bottom+a<=i==c?"after":"before";var w=Gr(e,ge(r,m,h),"line",t,o);d=w.left,v=i<w.top||i>=w.bottom}return _r(r,m=ie(t.text,m,1),h,v,n-d)}function en(e,t,r,n,i,o,a){var l=oe((function(l){var s=i[l],c=1!=s.level;return Qr(Gr(e,ge(r,c?s.to:s.from,c?"before":"after"),"line",t,n),o,a,!0)}),0,i.length-1),s=i[l];if(l>0){var c=1!=s.level,u=Gr(e,ge(r,c?s.from:s.to,c?"after":"before"),"line",t,n);Qr(u,o,a,!0)&&u.top>a&&(s=i[l-1])}return s}function tn(e,t,r,n,i,o,a){var l=Yr(e,t,n,a),s=l.begin,c=l.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,f=null,d=0;d<i.length;d++){var h=i[d];if(!(h.from>=c||h.to<=s)){var p=Pr(e,n,1!=h.level?Math.min(c,h.to)-1:Math.max(s,h.from)).right,g=p<o?o-p+1e9:p-o;(!u||f>g)&&(u=h,f=g)}}return u||(u=i[i.length-1]),u.from<s&&(u={from:s,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function rn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Wr){Wr=N("pre");for(var t=0;t<49;++t)Wr.appendChild(document.createTextNode("x")),Wr.appendChild(N("br"));Wr.appendChild(document.createTextNode("x"))}O(e.measure,Wr);var r=Wr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),T(e.measure),r||1}function nn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=N("span","xxxxxxxxxx"),r=N("pre",[t]);O(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function on(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)r[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[a]]=o.clientWidth;return{fixedPos:an(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function an(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ln(e){var t=rn(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/nn(e.display)-3);return function(i){if(Ke(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function sn(e){var t=e.doc,r=ln(e);t.iter((function(e){var t=r(e);t!=e.height&&ue(e,t)}))}function cn(e,t,r,n){var i=e.display;if(!r&&"true"==ft(t).getAttribute("cm-not-content"))return null;var o,a,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,c=Xr(e,o,a);if(n&&1==c.xRel&&(s=le(e.doc,c.line).text).length==c.ch){var u=E(s,s.length,e.options.tabSize)-s.length;c=ge(c.line,Math.max(0,Math.round((o-Sr(e.display).left)/nn(e.display))-u))}return c}function un(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function fn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function dn(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),a=0;a<r.sel.ranges.length;a++)if(t||a!=r.sel.primIndex){var l=r.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&hn(e,l.head,i),s||gn(e,l,o)}}return n}function hn(e,t,r){var n=Gr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(N("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(N("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function pn(e,t){return e.top-t.top||e.left-t.left}function gn(e,t,r){var n=e.display,i=e.doc,o=document.createDocumentFragment(),a=Sr(e.display),l=a.left,s=Math.max(n.sizerWidth,Mr(e)-n.sizer.offsetLeft)-a.right,c="ltr"==i.direction;function u(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),o.appendChild(N("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?s-e:r)+"px;\n                             height: "+(n-t)+"px"))}function f(t,r,n){var o,a,f=le(i,t),d=f.text.length;function h(r,n){return Ur(e,ge(t,r),"div",f,n)}function p(t,r,n){var i=Zr(e,f,null,t),o="ltr"==r==("after"==n)?"left":"right";return h("after"==n?i.begin:i.end-(/\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var g=Ze(f,i.direction);return function(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<r&&a.to>t||t==r&&a.to==t)&&(n(Math.max(a.from,t),Math.min(a.to,r),1==a.level?"rtl":"ltr",o),i=!0)}i||n(t,r,"ltr")}(g,r||0,null==n?d:n,(function(e,t,i,f){var m="ltr"==i,v=h(e,m?"left":"right"),y=h(t-1,m?"right":"left"),b=null==r&&0==e,w=null==n&&t==d,x=0==f,k=!g||f==g.length-1;if(y.top-v.top<=3){var C=(c?w:b)&&k,S=(c?b:w)&&x?l:(m?v:y).left,L=C?s:(m?y:v).right;u(S,v.top,L-S,v.bottom)}else{var M,T,O,N;m?(M=c&&b&&x?l:v.left,T=c?s:p(e,i,"before"),O=c?l:p(t,i,"after"),N=c&&w&&k?s:y.right):(M=c?p(e,i,"before"):l,T=!c&&b&&x?s:v.right,O=!c&&w&&k?l:y.left,N=c?p(t,i,"after"):s),u(M,v.top,T-M,v.bottom),v.bottom<y.top&&u(l,v.bottom,null,y.top),u(O,y.top,N-O,y.bottom)}(!o||pn(v,o)<0)&&(o=v),pn(y,o)<0&&(o=y),(!a||pn(v,a)<0)&&(a=v),pn(y,a)<0&&(a=y)})),{start:o,end:a}}var d=t.from(),h=t.to();if(d.line==h.line)f(d.line,d.ch,h.ch);else{var p=le(i,d.line),g=le(i,h.line),m=Be(p)==Be(g),v=f(d.line,d.ch,m?p.text.length+1:null).end,y=f(h.line,m?0:null,h.ch).start;m&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(l,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(l,v.bottom,null,y.top)}r.appendChild(o)}function mn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(r=!r)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function vn(e){e.state.focused||(e.display.input.focus(),bn(e))}function yn(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,wn(e))}),100)}function bn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(rt(e,"focus",e,t),e.state.focused=!0,W(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),s&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),mn(e))}function wn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(rt(e,"blur",e,t),e.state.focused=!1,M(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function xn(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i=t.view[n],o=void 0;if(!i.hidden){if(a&&l<8){var s=i.node.offsetTop+i.node.offsetHeight;o=s-r,r=s}else{var c=i.node.getBoundingClientRect();o=c.bottom-c.top}var u=i.line.height-o;if(o<2&&(o=rn(t)),(u>.005||u<-.005)&&(ue(i.line,o),kn(i.line),i.rest))for(var f=0;f<i.rest.length;f++)kn(i.rest[f])}}}function kn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function Cn(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-kr(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=de(t,n),a=de(t,i);if(r&&r.ensure){var l=r.ensure.from.line,s=r.ensure.to.line;l<o?(o=l,a=de(t,Ue(le(t,l))+e.wrapper.clientHeight)):Math.min(s,t.lastLine())>=a&&(o=de(t,Ue(le(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function Sn(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=an(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",a=0;a<r.length;a++)if(!r[a].hidden){e.options.fixedGutter&&(r[a].gutter&&(r[a].gutter.style.left=o),r[a].gutterBackground&&(r[a].gutterBackground.style.left=o));var l=r[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function Ln(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=pe(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(N("div",[N("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-a)+1,n.lineNumWidth=n.lineNumInnerWidth+a,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",fi(e),!0}return!1}function Mn(e,t){var r=e.display,n=rn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=Tr(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+Cr(r),s=t.top<n,c=t.bottom>l-n;if(t.top<i)a.scrollTop=s?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?l:t.bottom)-o);u!=i&&(a.scrollTop=u)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,d=Mr(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),h=t.right-t.left>d;return h&&(t.right=t.left+d),t.left<10?a.scrollLeft=0:t.left<f?a.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>d+f-3&&(a.scrollLeft=t.right+(h?0:10)-d),a}function Tn(e,t){null!=t&&(An(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function On(e){An(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nn(e,t,r){null==t&&null==r||An(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function An(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Dn(e,$r(e,t.from),$r(e,t.to),t.margin))}function Dn(e,t,r,n){var i=Mn(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});Nn(e,i.scrollLeft,i.scrollTop)}function Pn(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||ui(e,{top:t}),Wn(e,t,!0),r&&ui(e),oi(e,100))}function Wn(e,t,r){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Fn(e,t,r,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,Sn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function zn(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Cr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Lr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var Hn=function(e,t,r){this.cm=r;var n=this.vert=N("div",[N("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=N("div",[N("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(i),Je(n,"scroll",(function(){n.clientHeight&&t(n.scrollTop,"vertical")})),Je(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Hn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},Hn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Hn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Hn.prototype.zeroWidthHack=function(){var e=y&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new R,this.disableVert=new R},Hn.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto",t.set(1e3,(function n(){var i=e.getBoundingClientRect();("vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,n)}))},Hn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var In=function(){};function En(e,t){t||(t=zn(e));var r=e.display.barWidth,n=e.display.barHeight;Rn(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&xn(e),Rn(e,zn(e)),r=e.display.barWidth,n=e.display.barHeight}function Rn(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}In.prototype.update=function(){return{bottom:0,right:0}},In.prototype.setScrollLeft=function(){},In.prototype.setScrollTop=function(){},In.prototype.clear=function(){};var Bn={native:Hn,null:In};function jn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Bn[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Je(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,r){"horizontal"==r?Fn(e,t):Pn(e,t)}),e),e.display.scrollbars.addClass&&W(e.display.wrapper,e.display.scrollbars.addClass)}var qn=0;function Kn(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qn},t=e.curOp,or?or.ops.push(t):t.ownsGroup=or={ops:[t],delayedCallbacks:[]}}function Vn(e){!function(e,t){var r=e.ownsGroup;if(r)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}(r)}finally{or=null,t(r)}}(e.curOp,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)Un(t[r]);for(var n=0;n<t.length;n++)Gn(t[n]);for(var i=0;i<t.length;i++)$n(t[i]);for(var o=0;o<t.length;o++)_n(t[o]);for(var a=0;a<t.length;a++)Xn(t[a])}(e)}))}function Un(e){var t=e.cm,r=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Lr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Lr(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&$e(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new li(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Gn(e){e.updatedDisplay=e.mustUpdate&&si(e.cm,e.update)}function $n(e){var t=e.cm,r=t.display;e.updatedDisplay&&xn(t),e.barMeasure=zn(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Nr(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Lr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Mr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function _n(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Fn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==P();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&En(t,e.barMeasure),e.updatedDisplay&&di(t,e.barMeasure),e.selectionChanged&&mn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&vn(e.cm)}function Xn(e){var t=e.cm,r=t.display,n=t.doc;e.updatedDisplay&&ci(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&Wn(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Fn(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!nt(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=N("div","​",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-kr(e.display))+"px;\n                         height: "+(t.bottom-t.top+Lr(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,r,n){var i;null==n&&(n=0),e.options.lineWrapping||t!=r||(r="before"==(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ge(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,l=Gr(e,t),s=r&&r!=t?Gr(e,r):l,c=Mn(e,i={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-n,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+n}),u=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=c.scrollTop&&(Pn(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=c.scrollLeft&&(Fn(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return i}(t,ke(n,e.scrollToPos.from),ke(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||rt(i[a],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&rt(o[l],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&rt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Yn(e,t){if(e.curOp)return t();Kn(e);try{return t()}finally{Vn(e)}}function Zn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Kn(e);try{return t.apply(e,arguments)}finally{Vn(e)}}}function Qn(e){return function(){if(this.curOp)return e.apply(this,arguments);Kn(this);try{return e.apply(this,arguments)}finally{Vn(this)}}}function Jn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Kn(t);try{return e.apply(this,arguments)}finally{Vn(t)}}}function ei(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Le&&je(e.doc,t)<i.viewTo&&ri(e);else if(r<=i.viewFrom)Le&&qe(e.doc,r+n)>i.viewFrom?ri(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)ri(e);else if(t<=i.viewFrom){var o=ni(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):ri(e)}else if(r>=i.viewTo){var a=ni(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):ri(e)}else{var l=ni(e,t,t,-1),s=ni(e,r,r+n,1);l&&s?(i.view=i.view.slice(0,l.index).concat(ir(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):ri(e)}var c=i.externalMeasured;c&&(r<c.lineN?c.lineN+=n:t<c.lineN+c.size&&(i.externalMeasured=null))}function ti(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[un(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==B(a,r)&&a.push(r)}}}function ri(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ni(e,t,r,n){var i,o=un(e,t),a=e.display.view;if(!Le||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(n>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,r+=i}for(;je(e.doc,r)!=r;){if(o==(n<0?0:a.length-1))return null;r+=n*a[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function ii(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function oi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,H(ai,e))}function ai(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Et(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(n.line>=e.display.viewFrom){var a=o.styles,l=o.text.length>e.options.maxHighlightLength?At(t.mode,n.state):null,s=Ht(e,o,n,!0);l&&(n.state=l),o.styles=s.styles;var c=o.styleClasses,u=s.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!f&&d<a.length;++d)f=a[d]!=o.styles[d];f&&i.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Rt(e,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return oi(e,e.options.workDelay),!0})),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&Yn(e,(function(){for(var t=0;t<i.length;t++)ti(e,i[t],"text")}))}}var li=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Cn(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Mr(e),this.force=r,this.dims=on(e),this.events=[]};function si(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return ri(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==ii(e))return!1;Ln(e)&&(ri(e),t.dims=on(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>a&&r.viewTo-a<20&&(a=Math.min(i,r.viewTo)),Le&&(o=je(e.doc,o),a=qe(e.doc,a));var l=o!=r.viewFrom||a!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;!function(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=ir(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=ir(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(un(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(ir(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,un(e,r)))),n.viewTo=r}(e,o,a),r.viewOffset=Ue(le(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var c=ii(e);if(!l&&0==c&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=P();if(!t||!D(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&D(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}(e);return c>4&&(r.lineDiv.style.display="none"),function(e,t,r){var n=e.display,i=e.options.lineNumbers,o=n.lineDiv,a=o.firstChild;function l(t){var r=t.nextSibling;return s&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var c=n.view,u=n.viewFrom,f=0;f<c.length;f++){var d=c[f];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=l(a);var h=i&&null!=t&&t<=u&&d.lineNumber;d.changes&&(B(d.changes,"gutter")>-1&&(h=!1),cr(e,d,u,r)),h&&(T(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(pe(e.options,u)))),a=d.node.nextSibling}else{var p=mr(e,d,u,r);o.insertBefore(p,a)}u+=d.size}for(;a;)a=l(a)}(e,r.updateLineNumbers,t.dims),c>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,function(e){if(e&&e.activeElt&&e.activeElt!=P()&&(e.activeElt.focus(),e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}(u),T(r.cursorDiv),T(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,l&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,oi(e,400)),r.updateLineNumbers=null,!0}function ci(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Mr(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Cr(e.display)-Tr(e),r.top)}),t.visible=Cn(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&si(e,t);n=!1){xn(e);var i=zn(e);fn(e),En(e,i),di(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ui(e,t){var r=new li(e,t);if(si(e,r)){xn(e),ci(e,r);var n=zn(e);fn(e),En(e,n),di(e,n),r.finish()}}function fi(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function di(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Lr(e)+"px"}function hi(e){var t=e.display.gutters,r=e.options.gutters;T(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(N("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",fi(e)}function pi(e){var t=B(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}li.prototype.signal=function(e,t){ot(e,t)&&this.events.push(arguments)},li.prototype.finish=function(){for(var e=0;e<this.events.length;e++)rt.apply(null,this.events[e])};var gi=0,mi=null;function vi(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function yi(e){var t=vi(e);return t.x*=mi,t.y*=mi,t}function bi(e,t){var n=vi(t),i=n.x,o=n.y,a=e.display,l=a.scroller,c=l.scrollWidth>l.clientWidth,u=l.scrollHeight>l.clientHeight;if(i&&c||o&&u){if(o&&y&&s)e:for(var d=t.target,h=a.view;d!=l;d=d.parentNode)for(var p=0;p<h.length;p++)if(h[p].node==d){e.display.currentWheelTarget=d;break e}if(i&&!r&&!f&&null!=mi)return o&&u&&Pn(e,Math.max(0,l.scrollTop+o*mi)),Fn(e,Math.max(0,l.scrollLeft+i*mi)),(!o||o&&u)&&lt(t),void(a.wheelStartX=null);if(o&&null!=mi){var g=o*mi,m=e.doc.scrollTop,v=m+a.wrapper.clientHeight;g<0?m=Math.max(0,m+g-50):v=Math.min(e.doc.height,v+g+50),ui(e,{top:m,bottom:v})}gi<20&&(null==a.wheelStartX?(a.wheelStartX=l.scrollLeft,a.wheelStartY=l.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var e=l.scrollLeft-a.wheelStartX,t=l.scrollTop-a.wheelStartY,r=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,r&&(mi=(mi*gi+r)/(gi+1),++gi)}}),200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?mi=-.53:r?mi=15:u?mi=-.7:d&&(mi=-1/3);var wi=function(e,t){this.ranges=e,this.primIndex=t};wi.prototype.primary=function(){return this.ranges[this.primIndex]},wi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!ve(r.anchor,n.anchor)||!ve(r.head,n.head))return!1}return!0},wi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new xi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new wi(e,this.primIndex)},wi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},wi.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(me(t,n.from())>=0&&me(e,n.to())<=0)return r}return-1};var xi=function(e,t){this.anchor=e,this.head=t};function ki(e,t){var r=e[t];e.sort((function(e,t){return me(e.from(),t.from())})),t=B(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(me(o.to(),i.from())>=0){var a=we(o.from(),i.from()),l=be(o.to(),i.to()),s=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new xi(s?l:a,s?a:l))}}return new wi(e,t)}function Ci(e,t){return new wi([new xi(e,t||e)],0)}function Si(e){return e.text?ge(e.from.line+e.text.length-1,_(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Li(e,t){if(me(e,t.from)<0)return e;if(me(e,t.to)<=0)return Si(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Si(t).ch-t.to.ch),ge(r,n)}function Mi(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new xi(Li(i.anchor,t),Li(i.head,t)))}return ki(r,e.sel.primIndex)}function Ti(e,t,r){return e.line==t.line?ge(r.line,e.ch-t.ch+r.ch):ge(r.line+(e.line-t.line),e.ch)}function Oi(e){e.doc.mode=Tt(e.options,e.doc.modeOption),Ni(e)}function Ni(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,oi(e,100),e.state.modeGen++,e.curOp&&ei(e)}function Ai(e,t){return 0==t.from.ch&&0==t.to.ch&&""==_(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Di(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),De(e),Pe(e,r);var i=n?n(e):1;i!=e.height&&ue(e,i)}(e,r,i,n),lr(e,"change",e,t)}function a(e,t){for(var r=[],o=e;o<t;++o)r.push(new Gt(c[o],i(o),n));return r}var l=t.from,s=t.to,c=t.text,u=le(e,l.line),f=le(e,s.line),d=_(c),h=i(c.length-1),p=s.line-l.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ai(e,t)){var g=a(0,c.length-1);o(f,f.text,h),p&&e.remove(l.line,p),g.length&&e.insert(l.line,g)}else if(u==f)if(1==c.length)o(u,u.text.slice(0,l.ch)+d+u.text.slice(s.ch),h);else{var m=a(1,c.length-1);m.push(new Gt(d+u.text.slice(s.ch),h,n)),o(u,u.text.slice(0,l.ch)+c[0],i(0)),e.insert(l.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,l.ch)+c[0]+f.text.slice(s.ch),i(0)),e.remove(l.line+1,p);else{o(u,u.text.slice(0,l.ch)+c[0],i(0)),o(f,d+f.text.slice(s.ch),h);var v=a(1,c.length-1);p>1&&e.remove(l.line+1,p-1),e.insert(l.line+1,v)}lr(e,"change",e,t)}function Pi(e,t,r){!function e(n,i,o){if(n.linked)for(var a=0;a<n.linked.length;++a){var l=n.linked[a];if(l.doc!=i){var s=o&&l.sharedHist;r&&!s||(t(l.doc,s),e(l.doc,n,s))}}}(e,null,!0)}function Wi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,sn(e),Oi(e),Fi(e),e.options.lineWrapping||$e(e),e.options.mode=t.modeOption,ei(e)}function Fi(e){("rtl"==e.doc.direction?W:M)(e.display.lineDiv,"CodeMirror-rtl")}function zi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Hi(e,t){var r={from:ye(t.from),to:Si(t),text:se(e,t.from,t.to)};return ji(e,r,t.from.line,t.to.line+1),Pi(e,(function(e){return ji(e,r,t.from.line,t.to.line+1)}),!0),r}function Ii(e){for(;e.length&&_(e).ranges;)e.pop()}function Ei(e,t,r,n){var i=e.history;i.undone.length=0;var o,a,l=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ii(e.done),_(e.done)):e.done.length&&!_(e.done).ranges?_(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),_(e.done)):void 0}(i,i.lastOp==n)))a=_(o.changes),0==me(t.from,t.to)&&0==me(t.from,a.to)?a.to=Si(t):o.changes.push(Hi(e,t));else{var s=_(i.done);for(s&&s.ranges||Bi(e.sel,i.done),o={changes:[Hi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,a||rt(e,"historyAdded")}function Ri(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,_(i.done),t))?i.done[i.done.length-1]=t:Bi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&!1!==n.clearRedo&&Ii(i.undone)}function Bi(e,t){var r=_(t);r&&r.ranges&&r.equals(e)||t.push(e)}function ji(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),(function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o}))}function qi(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Ki(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(qi(r[i]));return n}(e,t),n=Ne(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],a=n[i];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else a&&(r[i]=a)}return r}function Vi(e,t,r){for(var n=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?wi.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];n.push({changes:l});for(var s=0;s<a.length;++s){var c=a[s],u=void 0;if(l.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\d+)$/))&&B(t,Number(u[1]))>-1&&(_(l)[f]=c[f],delete c[f])}}}return n}function Ui(e,t,r,n){if(n){var i=e.anchor;if(r){var o=me(t,i)<0;o!=me(r,i)<0?(i=t,t=r):o!=me(t,r)<0&&(t=r)}return new xi(i,t)}return new xi(r||t,t)}function Gi(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Zi(e,new wi([Ui(e.sel.primary(),t,r,i)],0),n)}function $i(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=Ui(e.sel.ranges[o],t[o],null,i);Zi(e,ki(n,e.sel.primIndex),r)}function _i(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,Zi(e,ki(i,e.sel.primIndex),n)}function Xi(e,t,r,n){Zi(e,Ci(t,r),n)}function Yi(e,t,r){var n=e.history.done,i=_(n);i&&i.ranges?(n[n.length-1]=t,Qi(e,t,r)):Zi(e,t,r)}function Zi(e,t,r){Qi(e,t,r),Ri(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Qi(e,t,r){(ot(e,"beforeSelectionChange")||e.cm&&ot(e.cm,"beforeSelectionChange"))&&(t=function(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new xi(ke(e,t[r].anchor),ke(e,t[r].head))},origin:r&&r.origin};return rt(e,"beforeSelectionChange",e,n),e.cm&&rt(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?ki(n.ranges,n.ranges.length-1):t}(e,t,r));var n=r&&r.bias||(me(t.primary().head,e.sel.primary().head)<0?-1:1);Ji(e,to(e,t,n,!0)),r&&!1===r.scroll||!e.cm||On(e.cm)}function Ji(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,it(e.cm)),lr(e,"cursorActivity",e))}function eo(e){Ji(e,to(e,e.sel,null,!1))}function to(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=no(e,a.anchor,l&&l.anchor,r,n),c=no(e,a.head,l&&l.head,r,n);(i||s!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new xi(s,c))}return i?ki(i,t.primIndex):t}function ro(e,t,r,n,i){var o=le(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(i&&(rt(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(r){var c=s.find(n<0?1:-1),u=void 0;if((n<0?s.inclusiveRight:s.inclusiveLeft)&&(c=io(e,c,-n,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=me(c,r))&&(n<0?u<0:u>0))return ro(e,c,t,n,i)}var f=s.find(n<0?-1:1);return(n<0?s.inclusiveLeft:s.inclusiveRight)&&(f=io(e,f,n,f.line==t.line?o:null)),f?ro(e,f,t,n,i):null}}return t}function no(e,t,r,n,i){var o=n||1,a=ro(e,t,r,o,i)||!i&&ro(e,t,r,o,!0)||ro(e,t,r,-o,i)||!i&&ro(e,t,r,-o,!0);return a||(e.cantEdit=!0,ge(e.first,0))}function io(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?ke(e,ge(t.line-1)):null:r>0&&t.ch==(n||le(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+r)}function oo(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),q)}function ao(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,i,o){t&&(n.from=ke(e,t)),r&&(n.to=ke(e,r)),i&&(n.text=i),void 0!==o&&(n.origin=o)}),rt(e,"beforeChange",e,n),e.cm&&rt(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function lo(e,t,r){if(e.cm){if(!e.cm.curOp)return Zn(e.cm,lo)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"))||(t=ao(e,t,!0))){var n=Se&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=B(n,r)||(n||(n=[])).push(r)}})),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var a=n[o],l=a.find(0),s=0;s<i.length;++s){var c=i[s];if(!(me(c.to,l.from)<0||me(c.from,l.to)>0)){var u=[s,1],f=me(c.from,l.from),d=me(c.to,l.to);(f<0||!a.inclusiveLeft&&!f)&&u.push({from:c.from,to:l.from}),(d>0||!a.inclusiveRight&&!d)&&u.push({from:l.to,to:c.to}),i.splice.apply(i,u),s+=u.length-3}}return i}(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)so(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else so(e,t)}}function so(e,t){if(1!=t.text.length||""!=t.text[0]||0!=me(t.from,t.to)){var r=Mi(e,t);Ei(e,t,r,e.cm?e.cm.curOp.id:NaN),fo(e,t,r,Ne(e,t));var n=[];Pi(e,(function(e,r){r||-1!=B(n,e.history)||(mo(e.history,t),n.push(e.history)),fo(e,t,null,Ne(e,t))}))}}function co(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!n||r){for(var i,o=e.history,a=e.sel,l="undo"==t?o.done:o.undone,s="undo"==t?o.undone:o.done,c=0;c<l.length&&(i=l[c],r?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=l.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=l.pop()).ranges){if(n)return void l.push(i);break}if(Bi(i,s),r&&!i.equals(e.sel))return void Zi(e,i,{clearRedo:!1});a=i}var u=[];Bi(a,s),s.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"),d=function(r){var n=i.changes[r];if(n.origin=t,f&&!ao(e,n,!1))return l.length=0,{};u.push(Hi(e,n));var o=r?Mi(e,n):_(l);fo(e,n,o,Ki(e,n)),!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:Si(n)});var a=[];Pi(e,(function(e,t){t||-1!=B(a,e.history)||(mo(e.history,n),a.push(e.history)),fo(e,n,null,Ki(e,n))}))},h=i.changes.length-1;h>=0;--h){var p=d(h);if(p)return p.v}}}}function uo(e,t){if(0!=t&&(e.first+=t,e.sel=new wi(X(e.sel.ranges,(function(e){return new xi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){ei(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)ti(e.cm,n,"gutter")}}function fo(e,t,r,n){if(e.cm&&!e.cm.curOp)return Zn(e.cm,fo)(e,t,r,n);if(t.to.line<e.first)uo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);uo(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[_(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ge(o,le(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=se(e,t.from,t.to),r||(r=Mi(e,t)),e.cm?function(e,t,r){var n=e.doc,i=e.display,o=t.from,a=t.to,l=!1,s=o.line;e.options.lineWrapping||(s=fe(Be(le(n,o.line))),n.iter(s,a.line+1,(function(e){if(e==i.maxLine)return l=!0,!0}))),n.sel.contains(t.from,t.to)>-1&&it(e),Di(n,t,r,ln(e)),e.options.lineWrapping||(n.iter(s,o.line+t.text.length,(function(e){var t=Ge(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)})),l&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=le(e,n).stateAfter;if(i&&(!(i instanceof Ft)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}(n,o.line),oi(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?ei(e):o.line!=a.line||1!=t.text.length||Ai(e.doc,t)?ei(e,o.line,a.line+1,c):ti(e,o.line,"text");var u=ot(e,"changes"),f=ot(e,"change");if(f||u){var d={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&lr(e,"change",e,d),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,n):Di(e,t,n),Qi(e,r,q)}}function ho(e,t,r,n,i){var o;n||(n=r),me(n,r)<0&&(r=(o=[n,r])[0],n=o[1]),"string"==typeof t&&(t=e.splitLines(t)),lo(e,{from:r,to:n,text:t,origin:i})}function po(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function go(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)po(o.ranges[l].anchor,t,r,n),po(o.ranges[l].head,t,r,n)}else{for(var s=0;s<o.changes.length;++s){var c=o.changes[s];if(r<c.from.line)c.from=ge(c.from.line+n,c.from.ch),c.to=ge(c.to.line+n,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function mo(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;go(e.done,r,n,i),go(e.undone,r,n,i)}function vo(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=le(e,xe(e,t)):i=fe(t),null==i?null:(n(o,i)&&e.cm&&ti(e.cm,i,r),o)}function yo(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function bo(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}xi.prototype.from=function(){return we(this.anchor,this.head)},xi.prototype.to=function(){return be(this.anchor,this.head)},xi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,$t(i),lr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},bo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),a=n.height;if(n.removeInner(e,o),this.height-=a-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var l=[];this.collapse(l),this.children=[new yo(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,l=a;l<i.lines.length;){var s=new yo(i.lines.slice(l,l+=25));i.height-=s.height,this.children.splice(++n,0,s),s.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new bo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=B(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new bo(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,r))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var wo=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function xo(e,t,r){Ue(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Tn(e,r)}wo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=fe(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=wr(this);ue(r,Math.max(0,r.height-o)),e&&(Yn(e,(function(){xo(e,r,-o),ti(e,n,"widget")})),lr(e,"lineWidgetCleared",e,this,n))}},wo.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=wr(this)-t;i&&(ue(n,n.height+i),r&&Yn(r,(function(){r.curOp.forceUpdate=!0,xo(r,n,i),lr(r,"lineWidgetChanged",r,e,fe(n))})))},at(wo);var ko=0,Co=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ko};function So(e,t,r,n,i){if(n&&n.shared)return function(e,t,r,n,i){(n=I(n)).shared=!1;var o=[So(e,t,r,n,i)],a=o[0],l=n.widgetNode;return Pi(e,(function(e){l&&(n.widgetNode=l.cloneNode(!0)),o.push(So(e,ke(e,t),ke(e,r),n,i));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=_(o)})),new Lo(o,a)}(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return Zn(e.cm,So)(e,t,r,n,i);var o=new Co(e,i),a=me(t,r);if(n&&I(n,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Re(e,t.line,t,r,o)||t.line!=r.line&&Re(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Le=!0}o.addToHistory&&Ei(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var l,s=t.line,c=e.cm;if(e.iter(s,r.line+1,(function(e){c&&o.collapsed&&!c.options.lineWrapping&&Be(e)==c.display.maxLine&&(l=!0),o.collapsed&&s!=t.line&&ue(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Me(o,s==t.line?t.ch:null,s==r.line?r.ch:null)),++s})),o.collapsed&&e.iter(t.line,r.line+1,(function(t){Ke(e,t)&&ue(t,0)})),o.clearOnEnter&&Je(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Se=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ko,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)ei(c,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=r.line;u++)ti(c,u,"text");o.atomic&&eo(c.doc),lr(c,"markerAdded",c,o)}return o}Co.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Kn(e),ot(this,"clear")){var r=this.find();r&&lr(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Te(a.markedSpans,this);e&&!this.collapsed?ti(e,fe(a),"text"):e&&(null!=l.to&&(i=fe(a)),null!=l.from&&(n=fe(a))),a.markedSpans=Oe(a.markedSpans,l),null==l.from&&this.collapsed&&!Ke(this.doc,a)&&e&&ue(a,rn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var c=Be(this.lines[s]),u=Ge(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&ei(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&eo(e.doc)),e&&lr(e,"markerCleared",e,this,n,i),t&&Vn(e),this.parent&&this.parent.clear()}},Co.prototype.find=function(e,t){var r,n;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Te(o.markedSpans,this);if(null!=a.from&&(r=ge(t?o:fe(o),a.from),-1==e))return r;if(null!=a.to&&(n=ge(t?o:fe(o),a.to),1==e))return n}return r&&{from:r,to:n}},Co.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&Yn(n,(function(){var i=t.line,o=fe(t.line),a=Ar(n,o);if(a&&(Ir(a),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Ke(r.doc,i)&&null!=r.height){var l=r.height;r.height=null;var s=wr(r)-l;s&&ue(i,i.height+s)}lr(n,"markerChanged",n,e)}))},Co.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Co.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},at(Co);var Lo=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function Mo(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),(function(e){return e.parent}))}function To(e){for(var t=function(t){var r=e[t],n=[r.primary.doc];Pi(r.primary.doc,(function(e){return n.push(e)}));for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==B(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}},r=0;r<e.length;r++)t(r)}Lo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();lr(this,"clear")}},Lo.prototype.find=function(e,t){return this.primary.find(e,t)},at(Lo);var Oo=0,No=function(e,t,r,n,i){if(!(this instanceof No))return new No(e,t,r,n,i);null==r&&(r=0),bo.call(this,[new yo([new Gt("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=ge(r,0);this.sel=Ci(o),this.history=new zi(null),this.id=++Oo,this.modeOption=t,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Di(this,{from:o,to:o,text:e}),Zi(this,Ci(o),q)};No.prototype=Z(bo.prototype,{constructor:No,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ce(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Jn((function(e){var t=ge(this.first,0),r=this.first+this.size-1;lo(this,{from:t,to:ge(r,le(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nn(this.cm,0,0),Zi(this,Ci(t),q)})),replaceRange:function(e,t,r,n){ho(this,e,t=ke(this,t),r=r?ke(this,r):t,n)},getRange:function(e,t,r){var n=se(this,ke(this,e),ke(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(he(this,e))return le(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=le(this,e)),Be(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Jn((function(e,t,r){Xi(this,ke(this,"number"==typeof e?ge(e,t||0):e),null,r)})),setSelection:Jn((function(e,t,r){Xi(this,ke(this,e),ke(this,t||e),r)})),extendSelection:Jn((function(e,t,r){Gi(this,ke(this,e),t&&ke(this,t),r)})),extendSelections:Jn((function(e,t){$i(this,Ce(this,e),t)})),extendSelectionsBy:Jn((function(e,t){$i(this,Ce(this,X(this.sel.ranges,e)),t)})),setSelections:Jn((function(e,t,r){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new xi(ke(this,e[i].anchor),ke(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Zi(this,ki(n,t),r)}})),addSelection:Jn((function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new xi(ke(this,e),ke(this,t||e))),Zi(this,ki(n,n.length-1),r)})),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=se(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=se(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Jn((function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];n[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:r}}for(var l=t&&"end"!=t&&function(e,t,r){for(var n=[],i=ge(e.first,0),o=i,a=0;a<t.length;a++){var l=t[a],s=Ti(l.from,i,o),c=Ti(Si(l),i,o);if(i=l.to,o=c,"around"==r){var u=e.sel.ranges[a],f=me(u.head,u.anchor)<0;n[a]=new xi(f?c:s,f?s:c)}else n[a]=new xi(s,s)}return new wi(n,e.sel.primIndex)}(this,n,t),s=n.length-1;s>=0;s--)lo(this,n[s]);l?Yi(this,l):this.cm&&On(this.cm)})),undo:Jn((function(){co(this,"undo")})),redo:Jn((function(){co(this,"redo")})),undoSelection:Jn((function(){co(this,"undo",!0)})),redoSelection:Jn((function(){co(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new zi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vi(this.history.done),undone:Vi(this.history.undone)}},setHistory:function(e){var t=this.history=new zi(this.history.maxGeneration);t.done=Vi(e.done.slice(0),null,!0),t.undone=Vi(e.undone.slice(0),null,!0)},setGutterMarker:Jn((function(e,t,r){return vo(this,e,"gutter",(function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&te(n)&&(e.gutterMarkers=null),!0}))})),clearGutter:Jn((function(e){var t=this;this.iter((function(r){r.gutterMarkers&&r.gutterMarkers[e]&&vo(t,r,"gutter",(function(){return r.gutterMarkers[e]=null,te(r.gutterMarkers)&&(r.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!he(this,e))return null;if(t=e,!(e=le(this,e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Jn((function(e,t,r){return vo(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(S(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0}))})),removeLineClass:Jn((function(e,t,r){return vo(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(S(r));if(!o)return!1;var a=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:Jn((function(e,t,r){return function(e,t,r,n){var i=new wo(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),vo(e,t,"widget",(function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Ke(e,t)){var n=Ue(t)<e.scrollTop;ue(t,t.height+wr(i)),n&&Tn(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&lr(o,"lineWidgetAdded",o,i,"number"==typeof t?t:fe(t)),i}(this,e,t,r)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return So(this,ke(this,e),ke(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return So(this,e=ke(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=le(this,(e=ke(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=ke(this,e),t=ke(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,(function(o){var a=o.markedSpans;if(a)for(var l=0;l<a.length;l++){var s=a[l];null!=s.to&&i==e.line&&e.ch>=s.to||null==s.from&&i!=e.line||null!=s.from&&i==t.line&&s.from>=t.ch||r&&!r(s.marker)||n.push(s.marker.parent||s.marker)}++i})),n},getAllMarks:function(){var e=[];return this.iter((function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)})),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+n;if(o>e)return t=e,!0;e-=o,++r})),ke(this,ge(r,t))},indexFromPos:function(e){var t=(e=ke(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+r})),t},copy:function(e){var t=new No(ce(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new No(ce(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(me(o,a)){var l=So(e,o,a,n.primary,n.primary.type);n.markers.push(l),l.parent=n}}}(n,Mo(this)),n},unlinkDoc:function(e){if(e instanceof Ma&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),To(Mo(this));break}if(e.history==this.history){var r=[e.id];Pi(e,(function(e){return r.push(e.id)}),!0),e.history=new zi(null),e.history.done=Vi(this.history.done,r),e.history.undone=Vi(this.history.undone,r)}},iterLinkedDocs:function(e){Pi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):bt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Jn((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Yn(t=this.cm,(function(){Fi(t),ei(t)})))}))}),No.prototype.eachLine=No.prototype.iter;var Ao=0;function Do(e){var t=this;if(Po(t),!nt(t,e)&&!xr(t.display,e)){lt(e),a&&(Ao=+new Date);var r=cn(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){if(!t.options.allowDropFileTypes||-1!=B(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Zn(t,(function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[n]=e,++l==i){var s={from:r=ke(t.doc,r),to:r,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};lo(t.doc,s),Yi(t.doc,Ci(r,Si(s)))}})),a.readAsText(e)}},c=0;c<i;++c)s(n[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var u=e.dataTransfer.getData("Text");if(u){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Qi(t.doc,Ci(r,r)),f)for(var d=0;d<f.length;++d)ho(t.doc,"",f[d].anchor,f[d].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Po(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Wo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}var Fo=!1;function zo(){var e;Fo||(Je(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Wo(Ho)}),100))})),Je(window,"blur",(function(){return Wo(wn)})),Fo=!0)}function Ho(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}for(var Io={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Eo=0;Eo<10;Eo++)Io[Eo+48]=Io[Eo+96]=String(Eo);for(var Ro=65;Ro<=90;Ro++)Io[Ro]=String.fromCharCode(Ro);for(var Bo=1;Bo<=12;Bo++)Io[Bo+111]=Io[Bo+63235]="F"+Bo;var jo={};function qo(e){var t,r,n,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Ko(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=X(r.split(" "),qo),o=0;o<i.length;o++){var a=void 0,l=void 0;o==i.length-1?(l=i.join(" "),a=n):(l=i.slice(0,o+1).join(" "),a="...");var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[r]}for(var c in t)e[c]=t[c];return e}function Vo(e,t,r,n){var i=(t=_o(t)).call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Vo(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var a=Vo(e,t.fallthrough[o],r,n);if(a)return a}}}function Uo(e){var t="string"==typeof e?e:Io[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Go(e,t,r){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function $o(e,t){if(f&&34==e.keyCode&&e.char)return!1;var r=Io[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),Go(r,e,t))}function _o(e){return"string"==typeof e?jo[e]:e}function Xo(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&me(o.from,_(n).to)<=0;){var a=n.pop();if(me(a.from,o.from)<0){o.from=a.from;break}}n.push(o)}Yn(e,(function(){for(var t=n.length-1;t>=0;t--)ho(e.doc,"",n[t].from,n[t].to,"+delete");On(e)}))}function Yo(e,t,r){var n=ie(e.text,t+r,r);return n<0||n>e.text.length?null:n}function Zo(e,t,r){var n=Yo(e,t.ch,r);return null==n?null:new ge(t.line,n,r<0?"after":"before")}function Qo(e,t,r,n,i){if(e){var o=Ze(r,t.doc.direction);if(o){var a,l=i<0?_(o):o[0],s=i<0==(1==l.level)?"after":"before";if(l.level>0||"rtl"==t.doc.direction){var c=Dr(t,r);a=i<0?r.text.length-1:0;var u=Pr(t,c,a).top;a=oe((function(e){return Pr(t,c,e).top==u}),i<0==(1==l.level)?l.from:l.to-1,a),"before"==s&&(a=Yo(r,a,1))}else a=i<0?l.to:l.from;return new ge(n,a,s)}}return new ge(n,i<0?r.text.length:0,i<0?"before":"after")}jo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},jo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jo.default=y?jo.macDefault:jo.pcDefault;var Jo={selectAll:oo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(e){return Xo(e,(function(t){if(t.empty()){var r=le(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:ge(t.head.line+1,0)}:{from:t.head,to:ge(t.head.line,r)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Xo(e,(function(t){return{from:ge(t.from().line,0),to:ke(e.doc,ge(t.to().line+1,0))}}))},delLineLeft:function(e){return Xo(e,(function(e){return{from:ge(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Xo(e,(function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Xo(e,(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return ea(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ta(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var r=le(e.doc,t),n=function(e){for(var t;t=Ee(e);)e=t.find(1,!0).line;return e}(r);return n!=r&&(t=fe(n)),Qo(!0,e,r,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")}),V)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")}),V)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?ta(e,t.head):n}),V)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),a=E(e.getLine(o.line),o.ch,n);t.push($(n-a%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Yn(e,(function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,o=le(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ge(i.line,i.ch-1)),i.ch>0)i=new ge(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ge(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=le(e.doc,i.line-1).text;a&&(i=new ge(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),ge(i.line-1,a.length-1),i,"+transpose"))}r.push(new xi(i,i))}e.setSelections(r)}))},newlineAndIndent:function(e){return Yn(e,(function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);On(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ea(e,t){var r=le(e.doc,t),n=Be(r);return n!=r&&(t=fe(n)),Qo(!0,e,n,t,1)}function ta(e,t){var r=ea(e,t.line),n=le(e.doc,r.line),i=Ze(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),a=t.line==r.line&&t.ch<=o&&t.ch;return ge(r.line,a?0:o,r.sticky)}return r}function ra(e,t,r){if("string"==typeof t&&!(t=Jo[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=j}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}var na=new R;function ia(e,t,r,n){var i=e.state.keySeq;if(i){if(Uo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:na.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),oa(e,i+" "+t,r,n))return!0}return oa(e,t,r,n)}function oa(e,t,r,n){var i=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Vo(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&Vo(t,e.options.extraKeys,r,e)||Vo(t,e.options.keyMap,r,e)}(e,t,n);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&lr(e,"keyHandled",e,t,r),"handled"!=i&&"multi"!=i||(lt(r),mn(e)),!!i}function aa(e,t){var r=$o(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?ia(e,"Shift-"+r,t,(function(t){return ra(e,t,!0)}))||ia(e,r,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ra(e,t)})):ia(e,r,t,(function(t){return ra(e,t)})))}var la=null;function sa(e){var t=this;if(t.curOp.focus=P(),!nt(t,e)){a&&l<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=aa(t,e);f&&(la=n?r:null,n||88!=r||xt||!(y?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(M(t,"CodeMirror-crosshair"),tt(document,"keyup",r),tt(document,"mouseover",r))}W(t,"CodeMirror-crosshair"),Je(document,"keyup",r),Je(document,"mouseover",r)}(t)}}function ca(e){16==e.keyCode&&(this.doc.sel.shift=!1),nt(this,e)}function ua(e){var t=this;if(!(xr(t.display,e)||nt(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(f&&r==la)return la=null,void lt(e);if(!f||e.which&&!(e.which<10)||!aa(t,e)){var i=String.fromCharCode(null==n?r:n);"\b"!=i&&(function(e,t,r){return ia(e,"'"+r+"'",t,(function(t){return ra(e,t,!0)}))}(t,e,i)||t.display.input.onKeyPress(e))}}}var fa,da,ha=function(e,t,r){this.time=e,this.pos=t,this.button=r};function pa(e){var t=this,r=t.display;if(!(nt(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,xr(r,e))s||(r.scroller.draggable=!1,setTimeout((function(){return r.scroller.draggable=!0}),100));else if(!va(t,e)){var n=cn(t,e),i=dt(e),o=n?function(e,t){var r=+new Date;return da&&da.compare(r,e,t)?(fa=da=null,"triple"):fa&&fa.compare(r,e,t)?(da=new ha(r,e,t),fa=null,"double"):(fa=new ha(r,e,t),da=null,"single")}(n,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&function(e,t,r,n,i){var o="Click";return"double"==n?o="Double"+o:"triple"==n&&(o="Triple"+o),ia(e,Go(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,(function(t){if("string"==typeof t&&(t=Jo[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=j}finally{e.state.suppressEdits=!1}return n}))}(t,i,n,o,e)||(1==i?n?function(e,t,r,n){a?setTimeout(H(vn,e),0):e.curOp.focus=P();var i,o=function(e,t,r){var n=e.getOption("configureMouse"),i=n?n(e,t,r):{};if(null==i.unit){var o=b?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey),null==i.addNew&&(i.addNew=y?r.metaKey:r.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(y?r.altKey:r.ctrlKey)),i}(e,r,n),c=e.doc.sel;e.options.dragDrop&&gt&&!e.isReadOnly()&&"single"==r&&(i=c.contains(t))>-1&&(me((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(me(i.to(),t)>0||t.xRel<0)?function(e,t,r,n){var i=e.display,o=!1,c=Zn(e,(function(t){s&&(i.scroller.draggable=!1),e.state.draggingText=!1,tt(i.wrapper.ownerDocument,"mouseup",c),tt(i.wrapper.ownerDocument,"mousemove",u),tt(i.scroller,"dragstart",f),tt(i.scroller,"drop",c),o||(lt(t),n.addNew||Gi(e.doc,r,null,null,n.extend),s||a&&9==l?setTimeout((function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()}),20):i.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},f=function(){return o=!0};s&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!n.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),Je(i.wrapper.ownerDocument,"mouseup",c),Je(i.wrapper.ownerDocument,"mousemove",u),Je(i.scroller,"dragstart",f),Je(i.scroller,"drop",c),yn(e),setTimeout((function(){return i.input.focus()}),20)}(e,n,t,o):function(e,t,r,n){var i=e.display,o=e.doc;lt(t);var a,l,s=o.sel,c=s.ranges;if(n.addNew&&!n.extend?(l=o.sel.contains(r),a=l>-1?c[l]:new xi(r,r)):(a=o.sel.primary(),l=o.sel.primIndex),"rectangle"==n.unit)n.addNew||(a=new xi(r,r)),r=cn(e,t,!0,!0),l=-1;else{var u=ga(e,r,n.unit);a=n.extend?Ui(a,u.anchor,u.head,n.extend):u}n.addNew?-1==l?(l=c.length,Zi(o,ki(c.concat([a]),l),{scroll:!1,origin:"*mouse"})):c.length>1&&c[l].empty()&&"char"==n.unit&&!n.extend?(Zi(o,ki(c.slice(0,l).concat(c.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),s=o.sel):_i(o,l,a,K):(l=0,Zi(o,new wi([a],0),K),s=o.sel);var f=r;function d(t){if(0!=me(f,t))if(f=t,"rectangle"==n.unit){for(var i=[],c=e.options.tabSize,u=E(le(o,r.line).text,r.ch,c),d=E(le(o,t.line).text,t.ch,c),h=Math.min(u,d),p=Math.max(u,d),g=Math.min(r.line,t.line),m=Math.min(e.lastLine(),Math.max(r.line,t.line));g<=m;g++){var v=le(o,g).text,y=U(v,h,c);h==p?i.push(new xi(ge(g,y),ge(g,y))):v.length>y&&i.push(new xi(ge(g,y),ge(g,U(v,p,c))))}i.length||i.push(new xi(r,r)),Zi(o,ki(s.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=a,x=ga(e,t,n.unit),k=w.anchor;me(x.anchor,k)>0?(b=x.head,k=we(w.from(),x.anchor)):(b=x.anchor,k=be(w.to(),x.head));var C=s.ranges.slice(0);C[l]=function(e,t){var r=t.anchor,n=t.head,i=le(e.doc,r.line);if(0==me(r,n)&&r.sticky==n.sticky)return t;var o=Ze(i);if(!o)return t;var a=Xe(o,r.ch,r.sticky),l=o[a];if(l.from!=r.ch&&l.to!=r.ch)return t;var s,c=a+(l.from==r.ch==(1!=l.level)?0:1);if(0==c||c==o.length)return t;if(n.line!=r.line)s=(n.line-r.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=Xe(o,n.ch,n.sticky),f=u-a||(n.ch-r.ch)*(1==l.level?-1:1);s=u==c-1||u==c?f<0:f>0}var d=o[c+(s?-1:0)],h=s==(1==d.level),p=h?d.from:d.to,g=h?"after":"before";return r.ch==p&&r.sticky==g?t:new xi(new ge(r.line,p,g),n)}(e,new xi(ke(o,k),b)),Zi(o,ki(C,l),K)}}var h=i.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,lt(t),i.input.focus(),tt(i.wrapper.ownerDocument,"mousemove",m),tt(i.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var m=Zn(e,(function(t){dt(t)?function t(r){var a=++p,l=cn(e,r,!0,"rectangle"==n.unit);if(l)if(0!=me(l,f)){e.curOp.focus=P(),d(l);var s=Cn(i,o);(l.line>=s.to||l.line<s.from)&&setTimeout(Zn(e,(function(){p==a&&t(r)})),150)}else{var c=r.clientY<h.top?-20:r.clientY>h.bottom?20:0;c&&setTimeout(Zn(e,(function(){p==a&&(i.scroller.scrollTop+=c,t(r))})),50)}}(t):g(t)})),v=Zn(e,g);e.state.selectingText=v,Je(i.wrapper.ownerDocument,"mousemove",m),Je(i.wrapper.ownerDocument,"mouseup",v)}(e,n,t,o)}(t,n,o,e):ft(e)==r.scroller&&lt(e):2==i?(n&&Gi(t.doc,n),setTimeout((function(){return r.input.focus()}),20)):3==i&&(C?ya(t,e):yn(t)))}}function ga(e,t,r){if("char"==r)return new xi(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new xi(ge(t.line,0),ke(e.doc,ge(t.line+1,0)));var n=r(e,t);return new xi(n.from,n.to)}function ma(e,t,r,n){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&lt(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!ot(e,r))return ct(t);o-=l.top-a.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=a.gutters.childNodes[s];if(c&&c.getBoundingClientRect().right>=i)return rt(e,r,e,de(e.doc,o),e.options.gutters[s],t),ct(t)}}function va(e,t){return ma(e,t,"gutterClick",!0)}function ya(e,t){xr(e.display,t)||function(e,t){return!!ot(e,"gutterContextMenu")&&ma(e,t,"gutterContextMenu",!1)}(e,t)||nt(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function ba(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Rr(e)}ha.prototype.compare=function(e,t,r){return this.time+400>e&&0==me(t,this.pos)&&r==this.button};var wa={toString:function(){return"CodeMirror.Init"}},xa={},ka={};function Ca(e){hi(e),ei(e),Sn(e)}function Sa(e,t,r){if(!t!=!(r&&r!=wa)){var n=e.display.dragFunctions,i=t?Je:tt;i(e.display.scroller,"dragstart",n.start),i(e.display.scroller,"dragenter",n.enter),i(e.display.scroller,"dragover",n.over),i(e.display.scroller,"dragleave",n.leave),i(e.display.scroller,"drop",n.drop)}}function La(e){e.options.lineWrapping?(W(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(M(e.display.wrapper,"CodeMirror-wrap"),$e(e)),sn(e),ei(e),Rr(e),setTimeout((function(){return En(e)}),100)}function Ma(e,t){var r=this;if(!(this instanceof Ma))return new Ma(e,t);this.options=t=t?I(t):{},I(xa,t,!1),pi(t);var n=t.value;"string"==typeof n&&(n=new No(n,t.mode,null,t.lineSeparator,t.direction)),this.doc=n;var i=new Ma.inputStyles[t.inputStyle](this),o=this.display=new ae(e,n,i);for(var c in o.wrapper.CodeMirror=this,hi(this),ba(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),jn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new R,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),a&&l<11&&setTimeout((function(){return r.display.input.reset(!0)}),20),function(e){var t=e.display;Je(t.scroller,"mousedown",Zn(e,pa)),Je(t.scroller,"dblclick",a&&l<11?Zn(e,(function(t){if(!nt(e,t)){var r=cn(e,t);if(r&&!va(e,t)&&!xr(e.display,t)){lt(t);var n=e.findWordAt(r);Gi(e.doc,n.anchor,n.head)}}})):function(t){return nt(e,t)||lt(t)}),C||Je(t.scroller,"contextmenu",(function(t){return ya(e,t)}));var r,n={end:0};function i(){t.activeTouch&&(r=setTimeout((function(){return t.activeTouch=null}),1e3),(n=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}Je(t.scroller,"touchstart",(function(i){if(!nt(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!va(e,i)){t.input.ensurePolled(),clearTimeout(r);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),Je(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),Je(t.scroller,"touchend",(function(r){var n=t.activeTouch;if(n&&!xr(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var a,l=e.coordsChar(t.activeTouch,"page");a=!n.prev||o(n,n.prev)?new xi(l,l):!n.prev.prev||o(n,n.prev.prev)?e.findWordAt(l):new xi(ge(l.line,0),ke(e.doc,ge(l.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),lt(r)}i()})),Je(t.scroller,"touchcancel",i),Je(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Pn(e,t.scroller.scrollTop),Fn(e,t.scroller.scrollLeft,!0),rt(e,"scroll",e))})),Je(t.scroller,"mousewheel",(function(t){return bi(e,t)})),Je(t.scroller,"DOMMouseScroll",(function(t){return bi(e,t)})),Je(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){nt(e,t)||ut(t)},over:function(t){nt(e,t)||(function(e,t){var r=cn(e,t);if(r){var n=document.createDocumentFragment();hn(e,r,n),e.display.dragCursor||(e.display.dragCursor=N("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),O(e.display.dragCursor,n)}}(e,t),ut(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-Ao<100))ut(t);else if(!nt(e,t)&&!xr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var r=N("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),f&&r.parentNode.removeChild(r)}}(e,t)},drop:Zn(e,Do),leave:function(t){nt(e,t)||Po(e)}};var s=t.input.getField();Je(s,"keyup",(function(t){return ca.call(e,t)})),Je(s,"keydown",Zn(e,sa)),Je(s,"keypress",Zn(e,ua)),Je(s,"focus",(function(t){return bn(e,t)})),Je(s,"blur",(function(t){return wn(e,t)}))}(this),zo(),Kn(this),this.curOp.forceUpdate=!0,Wi(this,n),t.autofocus&&!v||this.hasFocus()?setTimeout(H(bn,this),20):wn(this),ka)ka.hasOwnProperty(c)&&ka[c](r,t[c],wa);Ln(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Ta.length;++u)Ta[u](r);Vn(this),s&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ma.defaults=xa,Ma.optionHandlers=ka;var Ta=[];function Oa(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=Et(e,t).state:r="prev");var a=e.options.tabSize,l=le(o,t),s=E(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var c,u=l.text.match(/^\s*/)[0];if(n||/\S/.test(l.text)){if("smart"==r&&((c=o.mode.indent(i,l.text.slice(u.length),l.text))==j||c>150)){if(!n)return;r="prev"}}else c=0,r="not";"prev"==r?c=t>o.first?E(le(o,t-1).text,null,a):0:"add"==r?c=s+e.options.indentUnit:"subtract"==r?c=s-e.options.indentUnit:"number"==typeof r&&(c=s+r),c=Math.max(0,c);var f="",d=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/a);h;--h)d+=a,f+="\t";if(d<c&&(f+=$(c-d)),f!=u)return ho(o,f,ge(t,0),ge(t,u.length),"+input"),l.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<u.length){var m=ge(t,u.length);_i(o,p,new xi(m,m));break}}}Ma.defineInitHook=function(e){return Ta.push(e)};var Na=null;function Aa(e){Na=e}function Da(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var a,l=e.state.pasteIncoming||"paste"==i,s=bt(t),c=null;if(l&&n.ranges.length>1)if(Na&&Na.text.join("\n")==t){if(n.ranges.length%Na.text.length==0){c=[];for(var u=0;u<Na.text.length;u++)c.push(o.splitLines(Na.text[u]))}}else s.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(s,(function(e){return[e]})));for(var f=n.ranges.length-1;f>=0;f--){var d=n.ranges[f],h=d.from(),p=d.to();d.empty()&&(r&&r>0?h=ge(h.line,h.ch-r):e.state.overwrite&&!l?p=ge(p.line,Math.min(le(o,p.line).text.length,p.ch+_(s).length)):Na&&Na.lineWise&&Na.text.join("\n")==t&&(h=p=ge(h.line,0))),a=e.curOp.updateInput;var g={from:h,to:p,text:c?c[f%c.length]:s,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};lo(e.doc,g),lr(e,"inputRead",e,g)}t&&!l&&Wa(e,t),On(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Pa(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Yn(t,(function(){return Da(t,r,0,null,"paste")})),!0}function Wa(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(t.indexOf(o.electricChars.charAt(l))>-1){a=Oa(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(le(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Oa(e,i.head.line,"smart"));a&&lr(e,"electricInput",e,i.head.line)}}}function Fa(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:ge(i,0),head:ge(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function za(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ha(){var e=N("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=N("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),za(e),t}function Ia(e,t,r,n,i){var o=t,a=r,l=le(e,t.line);function s(n){var o,a;if(null==(o=i?function(e,t,r,n){var i=Ze(t,e.doc.direction);if(!i)return Zo(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=Xe(i,r.ch,r.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(n>0?a.to>r.ch:a.from<r.ch))return Zo(t,r,n);var l,s=function(e,r){return Yo(t,e instanceof ge?e.ch:e,r)},c=function(r){return e.options.lineWrapping?(l=l||Dr(e,t),Zr(e,t,l,r)):{begin:0,end:t.text.length}},u=c("before"==r.sticky?s(r,-1):r.ch);if("rtl"==e.doc.direction||1==a.level){var f=1==a.level==n<0,d=s(r,f?1:-1);if(null!=d&&(f?d<=a.to&&d<=u.end:d>=a.from&&d>=u.begin)){var h=f?"before":"after";return new ge(r.line,d,h)}}var p=function(e,t,n){for(var o=function(e,t){return t?new ge(r.line,s(e,1),"before"):new ge(r.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],l=t>0==(1!=a.level),c=l?n.begin:s(n.end,-1);if(a.from<=c&&c<a.to)return o(c,l);if(c=l?a.from:s(a.to,-1),n.begin<=c&&c<n.end)return o(c,l)}},g=p(o+n,n,u);if(g)return g;var m=n>0?u.end:s(u.begin,-1);return null==m||n>0&&m==t.text.length||!(g=p(n>0?0:i.length-1,n,c(m)))?null:g}(e.cm,l,t,r):Zo(l,t,r))){if(n||(a=t.line+r)<e.first||a>=e.first+e.size||(t=new ge(a,t.ch,t.sticky),!(l=le(e,a))))return!1;t=Qo(i,e.cm,l,t.line,r)}else t=o;return!0}if("char"==n)s();else if("column"==n)s(!0);else if("word"==n||"group"==n)for(var c=null,u="group"==n,f=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(r<0)||s(!d);d=!1){var h=l.text.charAt(t.ch)||"\n",p=ee(h,f)?"w":u&&"\n"==h?"n":!u||/\s/.test(h)?null:"p";if(!u||d||p||(p="s"),c&&c!=p){r<0&&(r=1,s(),t.sticky="after");break}if(p&&(c=p),r>0&&!s(!d))break}var g=no(e,t,o,a,!0);return ve(o,g)&&(g.hitSide=!0),g}function Ea(e,t,r,n){var i,o,a=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(s-.5*rn(e.display),3);i=(r>0?t.bottom:t.top)+r*c}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;(o=Xr(e,l,i)).outside;){if(r<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*r}return o}var Ra=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new R,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ba(e,t){var r=Ar(e,t.line);if(!r||r.hidden)return null;var n=le(e.doc,t.line),i=Or(r,n,t.line),o=Ze(n,e.doc.direction),a="left";o&&(a=Xe(o,t.ch)%2?"right":"left");var l=zr(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function ja(e,t){return t&&(e.bad=!0),e}function qa(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return ja(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return Ka(o,t,r)}}function Ka(e,t,r){var n=e.text.firstChild,i=!1;if(!t||!D(n,t))return ja(ge(fe(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[r],r=0,!t)){var o=e.rest?_(e.rest):e.line;return ja(ge(fe(o),o.text.length),i)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,r&&(r=a.nodeValue.length));l.parentNode!=n;)l=l.parentNode;var s=e.measure,c=s.maps;function u(t,r,n){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?s.map:c[i],a=0;a<o.length;a+=3){var l=o[a+2];if(l==t||l==r){var u=fe(i<0?e.line:e.rest[i]),f=o[a]+n;return(n<0||l!=t)&&(f=o[a+(n?1:0)]),ge(u,f)}}}var f=u(a,l,r);if(f)return ja(f,i);for(var d=l.nextSibling,h=a?a.nodeValue.length-r:0;d;d=d.nextSibling){if(f=u(d,d.firstChild,0))return ja(ge(f.line,f.ch-h),i);h+=d.textContent.length}for(var p=l.previousSibling,g=r;p;p=p.previousSibling){if(f=u(p,p.firstChild,-1))return ja(ge(f.line,f.ch+g),i);g+=p.textContent.length}}Ra.prototype.init=function(e){var t=this,r=this,n=r.cm,i=r.div=e.lineDiv;function o(e){if(!nt(n,e)){if(n.somethingSelected())Aa({lineWise:!1,text:n.getSelections()}),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=Fa(n);Aa({lineWise:!0,text:t.text}),"cut"==e.type&&n.operation((function(){n.setSelections(t.ranges,0,q),n.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var o=Na.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Ha(),l=a.firstChild;n.display.lineSpace.insertBefore(a,n.display.lineSpace.firstChild),l.value=Na.text.join("\n");var s=document.activeElement;z(l),setTimeout((function(){n.display.lineSpace.removeChild(a),s.focus(),s==i&&r.showPrimarySelection()}),50)}}za(i,n.options.spellcheck),Je(i,"paste",(function(e){nt(n,e)||Pa(e,n)||l<=11&&setTimeout(Zn(n,(function(){return t.updateFromDOM()})),20)})),Je(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),Je(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),Je(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),Je(i,"touchstart",(function(){return r.forceCompositionEnd()})),Je(i,"input",(function(){t.composing||t.readFromDOMSoon()})),Je(i,"copy",o),Je(i,"cut",o)},Ra.prototype.prepareSelection=function(){var e=dn(this.cm,!1);return e.focus=this.cm.state.focused,e},Ra.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ra.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=qa(t,e.anchorNode,e.anchorOffset),l=qa(t,e.focusNode,e.focusOffset);if(!a||a.bad||!l||l.bad||0!=me(we(a,l),i)||0!=me(be(a,l),o)){var s=t.display.view,c=i.line>=t.display.viewFrom&&Ba(t,i)||{node:s[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Ba(t,o);if(!u){var f=s[s.length-1].measure,d=f.maps?f.maps[f.maps.length-1]:f.map;u={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(c&&u){var h,p=e.rangeCount&&e.getRangeAt(0);try{h=L(c.node,c.offset,u.offset,u.node)}catch(e){}h&&(!r&&t.state.focused?(e.collapse(c.node,c.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),p&&null==e.anchorNode?e.addRange(p):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ra.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Ra.prototype.showMultipleSelections=function(e){O(this.cm.display.cursorDiv,e.cursors),O(this.cm.display.selectionDiv,e.selection)},Ra.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ra.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Ra.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ra.prototype.blur=function(){this.div.blur()},Ra.prototype.getField=function(){return this.div},Ra.prototype.supportsTouch=function(){return!0},Ra.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Yn(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Ra.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ra.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;if(m&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=qa(t,e.anchorNode,e.anchorOffset),n=qa(t,e.focusNode,e.focusOffset);r&&n&&Yn(t,(function(){Zi(t.doc,Ci(r,n),q),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)}))}}},Ra.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,n=this.cm,i=n.display,o=n.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>n.firstLine()&&(a=ge(a.line-1,le(n.doc,a.line-1).length)),l.ch==le(n.doc,l.line).text.length&&l.line<n.lastLine()&&(l=ge(l.line+1,0)),a.line<i.viewFrom||l.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=un(n,a.line))?(t=fe(i.view[0].line),r=i.view[0].node):(t=fe(i.view[e].line),r=i.view[e-1].node.nextSibling);var s,c,u=un(n,l.line);if(u==i.view.length-1?(s=i.viewTo-1,c=i.lineDiv.lastChild):(s=fe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!r)return!1;for(var f=n.doc.splitLines(function(e,t,r,n,i){var o="",a=!1,l=e.doc.lineSeparator();function s(){a&&(o+=l,a=!1)}function c(e){e&&(s(),o+=e)}function u(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(null!=r)return void c(r||t.textContent.replace(/\u200b/g,""));var o,f=t.getAttribute("cm-marker");if(f){var d=e.findMarks(ge(n,0),ge(i+1,0),(g=+f,function(e){return e.id==g}));return void(d.length&&(o=d[0].find(0))&&c(se(e.doc,o.from,o.to).join(l)))}if("false"==t.getAttribute("contenteditable"))return;var h=/^(pre|div|p)$/i.test(t.nodeName);h&&s();for(var p=0;p<t.childNodes.length;p++)u(t.childNodes[p]);h&&(a=!0)}else 3==t.nodeType&&c(t.nodeValue);var g}for(;u(t),t!=r;)t=t.nextSibling;return o}(n,r,c,t,s)),d=se(n.doc,ge(t,0),ge(s,le(n.doc,s).text.length));f.length>1&&d.length>1;)if(_(f)==_(d))f.pop(),d.pop(),s--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),t++}for(var h=0,p=0,g=f[0],m=d[0],v=Math.min(g.length,m.length);h<v&&g.charCodeAt(h)==m.charCodeAt(h);)++h;for(var y=_(f),b=_(d),w=Math.min(y.length-(1==f.length?h:0),b.length-(1==d.length?h:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==d.length&&t==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var x=ge(t,h),k=ge(s,d.length?_(d).length-p:0);return f.length>1||f[0]||me(x,k)?(ho(n.doc,f,x,k,"+input"),!0):void 0},Ra.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ra.prototype.reset=function(){this.forceCompositionEnd()},Ra.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ra.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Ra.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Yn(this.cm,(function(){return ei(e.cm)}))},Ra.prototype.setUneditable=function(e){e.contentEditable="false"},Ra.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Zn(this.cm,Da)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ra.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ra.prototype.onContextMenu=function(){},Ra.prototype.resetPosition=function(){},Ra.prototype.needsContentAttribute=!0;var Va=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new R,this.hasSelection=!1,this.composing=null};Va.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!nt(n,e)){if(n.somethingSelected())Aa({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Fa(n);Aa({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,q):(r.prevInput="",i.value=t.text.join("\n"),z(i))}"cut"==e.type&&(n.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(i.style.width="0px"),Je(i,"input",(function(){a&&l>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()})),Je(i,"paste",(function(e){nt(n,e)||Pa(e,n)||(n.state.pasteIncoming=!0,r.fastPoll())})),Je(i,"cut",o),Je(i,"copy",o),Je(e.scroller,"paste",(function(t){xr(e,t)||nt(n,t)||(n.state.pasteIncoming=!0,r.focus())})),Je(e.lineSpace,"selectstart",(function(t){xr(e,t)||lt(t)})),Je(i,"compositionstart",(function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}})),Je(i,"compositionend",(function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)}))},Va.prototype.createField=function(e){this.wrapper=Ha(),this.textarea=this.wrapper.firstChild},Va.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=dn(e);if(e.options.moveInputWithCursor){var i=Gr(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return n},Va.prototype.showSelection=function(e){var t=this.cm.display;O(t.cursorDiv,e.cursors),O(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Va.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&z(this.textarea),a&&l>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",a&&l>=9&&(this.hasSelection=null))}},Va.prototype.getField=function(){return this.textarea},Va.prototype.supportsTouch=function(){return!1},Va.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||P()!=this.textarea))try{this.textarea.focus()}catch(e){}},Va.prototype.blur=function(){this.textarea.blur()},Va.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Va.prototype.receivedFocus=function(){this.slowPoll()},Va.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Va.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))}))},Va.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||wt(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(a&&l>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var s=0,c=Math.min(n.length,i.length);s<c&&n.charCodeAt(s)==i.charCodeAt(s);)++s;return Yn(t,(function(){Da(t,i.slice(s),n.length-s,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Va.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Va.prototype.onKeyPress=function(){a&&l>=9&&(this.hasSelection=null),this.fastPoll()},Va.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,i=t.textarea,o=cn(r,e),c=n.scroller.scrollTop;if(o&&!f){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(o)&&Zn(r,Zi)(r.doc,Ci(o),q);var u=i.style.cssText,d=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var h,p=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(h=window.scrollY),n.input.focus(),s&&window.scrollTo(null,h),n.input.reset(),r.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),a&&l>=9&&m(),C){ut(e);var g=function(){tt(window,"mouseup",g),setTimeout(v,20)};Je(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=i.selectionStart){var e=r.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,n.selForContextMenu=r.doc.sel}}function v(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=u,a&&l<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=c),null!=i.selectionStart){(!a||a&&l<9)&&m();var e=0,o=function(){n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Zn(r,oo)(r):e++<10?n.detectingSelectAll=setTimeout(o,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(o,200)}}},Va.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Va.prototype.setUneditable=function(){},Va.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function r(r,n,i,o){e.defaults[r]=n,i&&(t[r]=o?function(e,t,r){r!=wa&&i(e,t,r)}:i)}e.defineOption=r,e.Init=wa,r("value","",(function(e,t){return e.setValue(t)}),!0),r("mode",null,(function(e,t){e.doc.modeOption=t,Oi(e)}),!0),r("indentUnit",2,Oi,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,(function(e){Ni(e),Rr(e),ei(e)}),!0),r("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,r.push(ge(n,o))}n++}));for(var i=r.length-1;i>=0;i--)ho(e.doc,t,r[i],ge(r[i].line,r[i].ch+t.length))}})),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,(function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=wa&&e.refresh()})),r("specialCharPlaceholder",Qt,(function(e){return e.refresh()}),!0),r("electricChars",!0),r("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),r("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),r("rtlMoveVisually",!w),r("wholeLineUpdateBefore",!0),r("theme","default",(function(e){ba(e),Ca(e)}),!0),r("keyMap","default",(function(e,t,r){var n=_o(t),i=r!=wa&&_o(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)})),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,La,!0),r("gutters",[],(function(e){pi(e.options),Ca(e)}),!0),r("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?an(e.display)+"px":"0",e.refresh()}),!0),r("coverGutterNextToScrollbar",!1,(function(e){return En(e)}),!0),r("scrollbarStyle","native",(function(e){jn(e),En(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),r("lineNumbers",!1,(function(e){pi(e.options),Ca(e)}),!0),r("firstLineNumber",1,Ca,!0),r("lineNumberFormatter",(function(e){return e}),Ca,!0),r("showCursorWhenSelecting",!1,fn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("readOnly",!1,(function(e,t){"nocursor"==t&&(wn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),r("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),r("dragDrop",!0,Sa),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,fn,!0),r("singleCursorHeightPerLine",!0,fn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Ni,!0),r("addModeClass",!1,Ni,!0),r("pollInterval",100),r("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),r("historyEventDelay",1250),r("viewportMargin",10,(function(e){return e.refresh()}),!0),r("maxHighlightLength",1e4,Ni,!0),r("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),r("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),r("autofocus",null),r("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0)}(Ma),function(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];n[e]==r&&"mode"!=e||(n[e]=r,t.hasOwnProperty(e)&&Zn(this,t[e])(this,r,i),rt(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](_o(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Qn((function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");!function(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},(function(e){return e.priority})),this.state.modeGen++,ei(this)})),removeOverlay:Qn((function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void ei(this)}})),indentLine:Qn((function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),he(this.doc,e)&&Oa(this,e,t,r)})),indentSelection:Qn((function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(Oa(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&On(this));else{var o=i.from(),a=i.to(),l=Math.max(r,o.line);r=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<r;++s)Oa(this,s,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[n].from().ch>0&&_i(this.doc,n,new xi(o,c[n].to()),q)}}})),getTokenAt:function(e,t){return Kt(this,e,t)},getLineTokens:function(e,t){return Kt(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=ke(this.doc,e);var t,r=It(this,le(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var a=n+i>>1;if((a?r[2*a-1]:0)>=o)i=a;else{if(!(r[2*a+1]<o)){t=r[2*a+2];break}n=a+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!r.hasOwnProperty(t))return n;var i=r[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&n.push(i[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var l=i[o[t][a]];l&&n.push(l)}else o.helperType&&i[o.helperType]?n.push(i[o.helperType]):i[o.name]&&n.push(i[o.name]);for(var s=0;s<i._global.length;s++){var c=i._global[s];c.pred(o,this)&&-1==B(n,c.val)&&n.push(c.val)}return n},getStateAfter:function(e,t){var r=this.doc;return Et(this,(e=xe(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return Gr(this,null==e?r.head:"object"==typeof e?ke(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return Ur(this,ke(this.doc,e),t||"page")},coordsChar:function(e,t){return Xr(this,(e=Vr(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Vr(this,{top:e,left:0},t||"page").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=le(this.doc,e)}else n=e;return Kr(this,n,{top:0,left:0},t||"page",r||i).top+(i?this.doc.height-Ue(n):0)},defaultTextHeight:function(){return rn(this.display)},defaultCharWidth:function(){return nn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o,a,l,s=this.display,c=(e=Gr(this,ke(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==n)c=e.top;else if("above"==n||"near"==n){var f=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(c=e.bottom),u+t.offsetWidth>d&&(u=d-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),r&&(o=this,a={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(l=Mn(o,a)).scrollTop&&Pn(o,l.scrollTop),null!=l.scrollLeft&&Fn(o,l.scrollLeft))},triggerOnKeyDown:Qn(sa),triggerOnKeyPress:Qn(ua),triggerOnKeyUp:ca,triggerOnMouseDown:Qn(pa),execCommand:function(e){if(Jo.hasOwnProperty(e))return Jo[e].call(null,this)},triggerElectric:Qn((function(e){Wa(this,e)})),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=ke(this.doc,e),a=0;a<t&&!(o=Ia(this.doc,o,i,r,n)).hitSide;++a);return o},moveH:Qn((function(e,t){var r=this;this.extendSelectionsBy((function(n){return r.display.shift||r.doc.extend||n.empty()?Ia(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()}),V)})),deleteH:Qn((function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Xo(this,(function(r){var i=Ia(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}}))})),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var a=ke(this.doc,e),l=0;l<t;++l){var s=Gr(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Ea(this,s,i,r)).hitSide)break}return a},moveV:Qn((function(e,t){var r=this,n=this.doc,i=[],o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((function(a){if(o)return e<0?a.from():a.to();var l=Gr(r,a.head,"div");null!=a.goalColumn&&(l.left=a.goalColumn),i.push(l.left);var s=Ea(r,l,e,t);return"page"==t&&a==n.sel.primary()&&Tn(r,Ur(r,s,"div").top-l.top),s}),V),i.length)for(var a=0;a<n.sel.ranges.length;a++)n.sel.ranges[a].goalColumn=i[a]})),findWordAt:function(e){var t=le(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!r?++n:--r;for(var o=t.charAt(r),a=ee(o,i)?function(e){return ee(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};r>0&&a(t.charAt(r-1));)--r;for(;n<t.length&&a(t.charAt(n));)++n}return new xi(ge(e.line,r),ge(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?W(this.display.cursorDiv,"CodeMirror-overwrite"):M(this.display.cursorDiv,"CodeMirror-overwrite"),rt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Qn((function(e,t){Nn(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Lr(this)-this.display.barHeight,width:e.scrollWidth-Lr(this)-this.display.barWidth,clientHeight:Tr(this),clientWidth:Mr(this)}},scrollIntoView:Qn((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){An(e),e.curOp.scrollToPos=t}(this,e):Dn(this,e.from,e.to,e.margin)})),setSize:Qn((function(e,t){var r=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Er(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){ti(r,i,"widget");break}++i})),this.curOp.forceUpdate=!0,rt(this,"refresh",this)})),operation:function(e){return Yn(this,e)},startOperation:function(){return Kn(this)},endOperation:function(){return Vn(this)},refresh:Qn((function(){var e=this.display.cachedTextHeight;ei(this),this.curOp.forceUpdate=!0,Rr(this),Nn(this,this.doc.scrollLeft,this.doc.scrollTop),fi(this),(null==e||Math.abs(e-rn(this.display))>.5)&&sn(this),rt(this,"refresh",this)})),swapDoc:Qn((function(e){var t=this.doc;return t.cm=null,Wi(this,e),Rr(this),this.display.input.reset(),Nn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,lr(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},at(e),e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),r[t]._global.push({pred:i,val:o})}}(Ma);var Ua="iter insert remove copy getEditor constructor".split(" ");for(var Ga in No.prototype)No.prototype.hasOwnProperty(Ga)&&B(Ua,Ga)<0&&(Ma.prototype[Ga]=function(e){return function(){return e.apply(this.doc,arguments)}}(No.prototype[Ga]));return at(No),Ma.inputStyles={textarea:Va,contenteditable:Ra},Ma.defineMode=function(e){Ma.defaults.mode||"null"==e||(Ma.defaults.mode=e),Lt.apply(this,arguments)},Ma.defineMIME=function(e,t){St[e]=t},Ma.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ma.defineMIME("text/plain","null"),Ma.defineExtension=function(e,t){Ma.prototype[e]=t},Ma.defineDocExtension=function(e,t){No.prototype[e]=t},Ma.fromTextArea=function(e,t){if((t=t?I(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=P();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=l.getValue()}var i;if(e.form&&(Je(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var a=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=a}}catch(e){}}t.finishInit=function(t){t.save=n,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,n(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var l=Ma((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return l},function(e){e.off=tt,e.on=Je,e.wheelEventPixels=yi,e.Doc=No,e.splitLines=bt,e.countColumn=E,e.findColumn=U,e.isWordChar=J,e.Pass=j,e.signal=rt,e.Line=Gt,e.changeEnd=Si,e.scrollbarModel=Bn,e.Pos=ge,e.cmpPos=me,e.modes=Ct,e.mimeModes=St,e.resolveMode=Mt,e.getMode=Tt,e.modeExtensions=Ot,e.extendMode=Nt,e.copyState=At,e.startState=Pt,e.innerMode=Dt,e.commands=Jo,e.keyMap=jo,e.keyName=$o,e.isModifierKey=Uo,e.lookupKey=Vo,e.normalizeKeyMap=Ko,e.StringStream=Wt,e.SharedTextMarker=Lo,e.TextMarker=Co,e.LineWidget=wo,e.e_preventDefault=lt,e.e_stopPropagation=st,e.e_stop=ut,e.addClass=W,e.contains=D,e.rmClass=M,e.keyNames=Io}(Ma),Ma.version="5.37.0",Ma},"object"==typeof exports&&void 0!==module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t(),r=function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function r(e){t(e);var r=e.state.placeholder=document.createElement("pre");r.style.cssText="height: 0; overflow: visible",r.style.direction=e.getOption("direction"),r.className="CodeMirror-placeholder";var n=e.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),r.appendChild(n),e.display.lineSpace.insertBefore(r,e.display.lineSpace.firstChild)}function n(e){o(e)&&r(e)}function i(e){var n=e.getWrapperElement(),i=o(e);n.className=n.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?r(e):t(e)}function o(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(r,o,a){var l=a&&a!=e.Init;if(o&&!l)r.on("blur",n),r.on("change",i),r.on("swapDoc",i),i(r);else if(!o&&l){r.off("blur",n),r.off("change",i),r.off("swapDoc",i),t(r);var s=r.getWrapperElement();s.className=s.className.replace(" CodeMirror-empty","")}o&&!r.hasFocus()&&n(r)}))},"object"==typeof exports&&"object"==typeof module?r(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){var t={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},r=e.Pos;function n(e,r){return"pairs"==r&&"string"==typeof e?e:"object"==typeof e&&null!=e[r]?e[r]:t[r]}e.defineOption("autoCloseBrackets",!1,(function(t,r,a){a&&a!=e.Init&&(t.removeKeyMap(i),t.state.closeBrackets=null),r&&(o(n(r,"pairs")),t.state.closeBrackets=r,t.addKeyMap(i))}));var i={Backspace:function(t){var i=l(t);if(!i||t.getOption("disableInput"))return e.Pass;for(var o=n(i,"pairs"),a=t.listSelections(),s=0;s<a.length;s++){if(!a[s].empty())return e.Pass;var u=c(t,a[s].head);if(!u||o.indexOf(u)%2!=0)return e.Pass}for(s=a.length-1;s>=0;s--){var f=a[s].head;t.replaceRange("",r(f.line,f.ch-1),r(f.line,f.ch+1),"+delete")}},Enter:function(t){var r=l(t),i=r&&n(r,"explode");if(!i||t.getOption("disableInput"))return e.Pass;for(var o=t.listSelections(),a=0;a<o.length;a++){if(!o[a].empty())return e.Pass;var s=c(t,o[a].head);if(!s||i.indexOf(s)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),t.execCommand("goCharLeft"),o=t.listSelections();for(var r=0;r<o.length;r++){var n=o[r].head.line;t.indentLine(n,null,!0),t.indentLine(n+1,null,!0)}}))}};function o(e){for(var t=0;t<e.length;t++){var r=e.charAt(t),n="'"+r+"'";i[n]||(i[n]=a(r))}}function a(t){return function(i){return function(t,i){var o=l(t);if(!o||t.getOption("disableInput"))return e.Pass;var a=n(o,"pairs"),c=a.indexOf(i);if(-1==c)return e.Pass;for(var f,d=n(o,"triples"),h=a.charAt(c+1)==i,p=t.listSelections(),g=c%2==0,m=0;m<p.length;m++){var v,y=p[m],b=y.head,w=t.getRange(b,r(b.line,b.ch+1));if(g&&!y.empty())v="surround";else if(!h&&g||w!=i)if(h&&b.ch>1&&d.indexOf(i)>=0&&t.getRange(r(b.line,b.ch-2),b)==i+i){if(b.ch>2&&/\bstring/.test(t.getTokenTypeAt(r(b.line,b.ch-2))))return e.Pass;v="addFour"}else if(h){var x=0==b.ch?" ":t.getRange(r(b.line,b.ch-1),b);if(e.isWordChar(w)||x==i||e.isWordChar(x))return e.Pass;v="both"}else{if(!g||t.getLine(b.line).length!=b.ch&&!s(w,a)&&!/\s/.test(w))return e.Pass;v="both"}else v=h&&u(t,b)?"both":d.indexOf(i)>=0&&t.getRange(b,r(b.line,b.ch+3))==i+i+i?"skipThree":"skip";if(f){if(f!=v)return e.Pass}else f=v}var k=c%2?a.charAt(c-1):i,C=c%2?i:a.charAt(c+1);t.operation((function(){if("skip"==f)t.execCommand("goCharRight");else if("skipThree"==f)for(var n=0;n<3;n++)t.execCommand("goCharRight");else if("surround"==f){var i=t.getSelections();for(n=0;n<i.length;n++)i[n]=k+i[n]+C;t.replaceSelections(i,"around"),i=t.listSelections().slice();for(n=0;n<i.length;n++)i[n]=(o=i[n],a=void 0,a=e.cmpPos(o.anchor,o.head)>0,{anchor:new r(o.anchor.line,o.anchor.ch+(a?-1:1)),head:new r(o.head.line,o.head.ch+(a?1:-1))});t.setSelections(i)}else"both"==f?(t.replaceSelection(k+C,null),t.triggerElectric(k+C),t.execCommand("goCharLeft")):"addFour"==f&&(t.replaceSelection(k+k+k+k,"before"),t.execCommand("goCharRight"));var o,a}))}(i,t)}}function l(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function s(e,t){var r=t.lastIndexOf(e);return r>-1&&r%2==1}function c(e,t){var n=e.getRange(r(t.line,t.ch-1),r(t.line,t.ch+1));return 2==n.length?n:null}function u(e,t){var n=e.getTokenAt(r(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}o(t.pairs+"`")})),function(e){"object"==typeof exports&&"object"==typeof module?e(n(),n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}((function(e){e.defineOption("autoCloseTags",!1,(function(a,l,s){if(s!=e.Init&&s&&a.removeKeyMap("autoCloseTags"),l){var c={name:"autoCloseTags"};("object"!=typeof l||l.whenClosing)&&(c["'/'"]=function(t){return function(t){if(t.getOption("disableInput"))return e.Pass;return n(t,!0)}(t)}),("object"!=typeof l||l.whenOpening)&&(c["'>'"]=function(n){return function(n){if(n.getOption("disableInput"))return e.Pass;for(var a=n.listSelections(),l=[],s=n.getOption("autoCloseTags"),c=0;c<a.length;c++){if(!a[c].empty())return e.Pass;var u=a[c].head,f=n.getTokenAt(u),d=e.innerMode(n.getMode(),f.state),h=d.state;if("xml"!=d.mode.name||!h.tagName)return e.Pass;var p="html"==d.mode.configuration,g="object"==typeof s&&s.dontCloseTags||p&&t,m="object"==typeof s&&s.indentTags||p&&r,v=h.tagName;f.end>u.ch&&(v=v.slice(0,v.length-f.end+u.ch));var y=v.toLowerCase();if(!v||"string"==f.type&&(f.end!=u.ch||!/[\"\']/.test(f.string.charAt(f.string.length-1))||1==f.string.length)||"tag"==f.type&&"closeTag"==h.type||f.string.indexOf("/")==f.string.length-1||g&&i(g,y)>-1||o(n,v,u,h,!0))return e.Pass;var b=m&&i(m,y)>-1;l[c]={indent:b,text:">"+(b?"\n\n":"")+"</"+v+">",newPos:b?e.Pos(u.line+1,0):e.Pos(u.line,u.ch+1)}}var w="object"==typeof s&&s.dontIndentOnAutoClose;for(c=a.length-1;c>=0;c--){var x=l[c];n.replaceRange(x.text,a[c].head,a[c].anchor,"+insert");var k=n.listSelections().slice(0);k[c]={head:x.newPos,anchor:x.newPos},n.setSelections(k),!w&&x.indent&&(n.indentLine(x.newPos.line,null,!0),n.indentLine(x.newPos.line+1,null,!0))}}(n)}),a.addKeyMap(c)}}));var t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],r=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function n(t,r){for(var n=t.listSelections(),i=[],a=r?"/":"</",l=t.getOption("autoCloseTags"),s="object"==typeof l&&l.dontIndentOnSlash,c=0;c<n.length;c++){if(!n[c].empty())return e.Pass;var u,f=n[c].head,d=t.getTokenAt(f),h=e.innerMode(t.getMode(),d.state),p=h.state;if(r&&("string"==d.type||"<"!=d.string.charAt(0)||d.start!=f.ch-1))return e.Pass;if("xml"!=h.mode.name)if("htmlmixed"==t.getMode().name&&"javascript"==h.mode.name)u=a+"script";else{if("htmlmixed"!=t.getMode().name||"css"!=h.mode.name)return e.Pass;u=a+"style"}else{if(!p.context||!p.context.tagName||o(t,p.context.tagName,f,p))return e.Pass;u=a+p.context.tagName}">"!=t.getLine(f.line).charAt(d.end)&&(u+=">"),i[c]=u}if(t.replaceSelections(i),n=t.listSelections(),!s)for(c=0;c<n.length;c++)(c==n.length-1||n[c].head.line<n[c+1].head.line)&&t.indentLine(n[c].head.line)}function i(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;++r)if(e[r]==t)return r;return-1}function o(t,r,n,i,o){if(!e.scanForClosingTag)return!1;var a=Math.min(t.lastLine()+1,n.line+500),l=e.scanForClosingTag(t,n,null,a);if(!l||l.tag!=r)return!1;for(var s=i.context,c=o?1:0;s&&s.tagName==r;s=s.prev)++c;n=l.to;for(var u=1;u<c;u++){var f=e.scanForClosingTag(t,n,null,a);if(!f||f.tag!=r)return!1;n=f.to}return!0}e.commands.closeTag=function(e){return n(e)}})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),r=e.Pos,n={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function i(e,t,i){var a=e.getLineHandle(t.line),l=t.ch-1,s=i&&i.afterCursor;null==s&&(s=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var c=!s&&l>=0&&n[a.text.charAt(l)]||n[a.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&i.strict&&u>0!=(l==t.ch))return null;var f=e.getTokenTypeAt(r(t.line,l+1)),d=o(e,r(t.line,l+(u>0?1:0)),u,f||null,i);return null==d?null:{from:r(t.line,l),to:d&&d.pos,match:d&&d.ch==c.charAt(0),forward:u>0}}function o(e,t,i,o,a){for(var l=a&&a.maxScanLineLength||1e4,s=a&&a.maxScanLines||1e3,c=[],u=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/,f=i>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s),d=t.line;d!=f;d+=i){var h=e.getLine(d);if(h){var p=i>0?0:h.length-1,g=i>0?h.length:-1;if(!(h.length>l))for(d==t.line&&(p=t.ch-(i<0?1:0));p!=g;p+=i){var m=h.charAt(p);if(u.test(m)&&(void 0===o||e.getTokenTypeAt(r(d,p+1))==o))if(">"==n[m].charAt(1)==i>0)c.push(m);else{if(!c.length)return{pos:r(d,p),ch:m};c.pop()}}}}return d-i!=(i>0?e.lastLine():e.firstLine())&&null}function a(e,n,o){for(var a=e.state.matchBrackets.maxHighlightLineLength||1e3,l=[],s=e.listSelections(),c=0;c<s.length;c++){var u=s[c].empty()&&i(e,s[c].head,o);if(u&&e.getLine(u.from.line).length<=a){var f=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(e.markText(u.from,r(u.from.line,u.from.ch+1),{className:f})),u.to&&e.getLine(u.to.line).length<=a&&l.push(e.markText(u.to,r(u.to.line,u.to.ch+1),{className:f}))}}if(l.length){t&&e.state.focused&&e.focus();var d=function(){e.operation((function(){for(var e=0;e<l.length;e++)l[e].clear()}))};if(!n)return d;setTimeout(d,800)}}function l(e){e.operation((function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=a(e,!1,e.state.matchBrackets)}))}e.defineOption("matchBrackets",!1,(function(t,r,n){n&&n!=e.Init&&(t.off("cursorActivity",l),t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)),r&&(t.state.matchBrackets="object"==typeof r?r:{},t.on("cursorActivity",l))})),e.defineExtension("matchBrackets",(function(){a(this,!0)})),e.defineExtension("findMatchingBracket",(function(e,t,r){return(r||"boolean"==typeof t)&&(r?(r.strict=t,t=r):t=t?{strict:!0}:null),i(this,e,t)})),e.defineExtension("scanForBracket",(function(e,t,r,n){return o(this,e,t,r,n)}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(n(),n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}((function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function r(r){r.state.failedTagMatch=!1,r.operation((function(){if(t(r),!r.somethingSelected()){var n=r.getCursor(),i=r.getViewport();i.from=Math.min(i.from,n.line),i.to=Math.max(n.line+1,i.to);var o=e.findMatchingTag(r,n,i);if(o){if(r.state.matchBothTags){var a="open"==o.at?o.open:o.close;a&&(r.state.tagHit=r.markText(a.from,a.to,{className:"CodeMirror-matchingtag"}))}var l="close"==o.at?o.open:o.close;l?r.state.tagOther=r.markText(l.from,l.to,{className:"CodeMirror-matchingtag"}):r.state.failedTagMatch=!0}}}))}function n(e){e.state.failedTagMatch&&r(e)}e.defineOption("matchTags",!1,(function(i,o,a){a&&a!=e.Init&&(i.off("cursorActivity",r),i.off("viewportChange",n),t(i)),o&&(i.state.matchBothTags="object"==typeof o&&o.bothTags,i.on("cursorActivity",r),i.on("viewportChange",n),r(i))})),e.commands.toMatchingTag=function(t){var r=e.findMatchingTag(t,t.getCursor());if(r){var n="close"==r.at?r.open:r.close;n&&t.extendSelection(n.to,n.from)}}})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";var t=e.Pos;function r(e,t){return e.line-t.line||e.ch-t.ch}var n="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i=new RegExp("<(/?)(["+n+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function o(e,t,r,n){this.line=t,this.ch=r,this.cm=e,this.text=e.getLine(t),this.min=n?Math.max(n.from,e.firstLine()):e.firstLine(),this.max=n?Math.min(n.to-1,e.lastLine()):e.lastLine()}function a(e,r){var n=e.cm.getTokenTypeAt(t(e.line,r));return n&&/\btag\b/.test(n)}function l(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function s(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function c(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(l(e))continue;return}if(a(e,t+1)){var r=e.text.lastIndexOf("/",t),n=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t+1}}function u(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(s(e))continue;return}if(a(e,t+1)){i.lastIndex=t,e.ch=t;var r=i.exec(e.text);if(r&&r.index==t)return r}else e.ch=t}}function f(e){for(;;){i.lastIndex=e.ch;var t=i.exec(e.text);if(!t){if(l(e))continue;return}if(a(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function d(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(s(e))continue;return}if(a(e,t+1)){var r=e.text.lastIndexOf("/",t),n=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t}}function h(e,r){for(var n=[];;){var i,o=f(e),a=e.line,l=e.ch-(o?o[0].length:0);if(!o||!(i=c(e)))return;if("selfClose"!=i)if(o[1]){for(var s=n.length-1;s>=0;--s)if(n[s]==o[2]){n.length=s;break}if(s<0&&(!r||r==o[2]))return{tag:o[2],from:t(a,l),to:t(e.line,e.ch)}}else n.push(o[2])}}function p(e,r){for(var n=[];;){var i=d(e);if(!i)return;if("selfClose"!=i){var o=e.line,a=e.ch,l=u(e);if(!l)return;if(l[1])n.push(l[2]);else{for(var s=n.length-1;s>=0;--s)if(n[s]==l[2]){n.length=s;break}if(s<0&&(!r||r==l[2]))return{tag:l[2],from:t(e.line,e.ch),to:t(o,a)}}}else u(e)}}e.registerHelper("fold","xml",(function(e,n){for(var i=new o(e,n.line,0);;){var a=f(i);if(!a||i.line!=n.line)return;var l=c(i);if(!l)return;if(!a[1]&&"selfClose"!=l){var s=t(i.line,i.ch),u=h(i,a[2]);return u&&r(u.from,s)>0?{from:s,to:u.from}:null}}})),e.findMatchingTag=function(e,n,i){var a=new o(e,n.line,n.ch,i);if(-1!=a.text.indexOf(">")||-1!=a.text.indexOf("<")){var l=c(a),s=l&&t(a.line,a.ch),f=l&&u(a);if(l&&f&&!(r(a,n)>0)){var d={from:t(a.line,a.ch),to:s,tag:f[2]};return"selfClose"==l?{open:d,close:null,at:"open"}:f[1]?{open:p(a,f[2]),close:d,at:"close"}:{open:d,close:h(a=new o(e,s.line,s.ch,i),f[2]),at:"open"}}}},e.findEnclosingTag=function(e,t,r,n){for(var i=new o(e,t.line,t.ch,r);;){var a=p(i,n);if(!a)break;var l=h(new o(e,t.line,t.ch,r),a.tag);if(l)return{open:a,close:l}}},e.scanForClosingTag=function(e,t,r,n){return h(new o(e,t.line,t.ch,n?{from:0,to:n}:null),r)}})),function(e){"object"==typeof exports&&"object"==typeof module?e(n(),n(),n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}((function(e){"use strict";function t(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new t)}function n(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,t,r){return e.getSearchCursor(t,r,{caseFold:n(t),multiline:!0})}function o(e,t,r,n,i){e.openDialog?e.openDialog(t,i,{value:n,selectValueOnOpen:!0}):i(prompt(r,n))}function a(e){return e.replace(/\\(.)/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":t}))}function l(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=a(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}var s='<span class="CodeMirror-search-label">Search:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function c(e,t,r){t.queryText=r,t.query=l(r),e.removeOverlay(t.overlay,n(t.query)),t.overlay=function(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var r=e.exec(t.string);if(r&&r.index==t.pos)return t.pos+=r[0].length||1,"searching";r?t.pos=r.index:t.skipToEnd()}}}(t.query,n(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,n(t.query)))}function u(t,n,i,a){var l=r(t);if(l.query)return f(t,n);var u=t.getSelection()||l.lastQuery;if(u instanceof RegExp&&"x^"==u.source&&(u=null),i&&t.openDialog){var h=null,p=function(r,n){e.e_stop(n),r&&(r!=l.queryText&&(c(t,l,r),l.posFrom=l.posTo=t.getCursor()),h&&(h.style.opacity=1),f(t,n.shiftKey,(function(e,r){var n;r.line<3&&document.querySelector&&(n=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&n.getBoundingClientRect().bottom-4>t.cursorCoords(r,"window").top&&((h=n).style.opacity=.4)})))};!function(e,t,r,n,i){e.openDialog(t,n,{value:r,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){d(e)},onKeyDown:i})}(t,s,u,p,(function(n,i){var o=e.keyName(n),a=t.getOption("extraKeys"),l=a&&a[o]||e.keyMap[t.getOption("keyMap")][o];"findNext"==l||"findPrev"==l||"findPersistentNext"==l||"findPersistentPrev"==l?(e.e_stop(n),c(t,r(t),i),t.execCommand(l)):"find"!=l&&"findPersistent"!=l||(e.e_stop(n),p(i,n))})),a&&u&&(c(t,l,u),f(t,n))}else o(t,s,"Search for:",u,(function(e){e&&!l.query&&t.operation((function(){c(t,l,e),l.posFrom=l.posTo=t.getCursor(),f(t,n)}))}))}function f(t,n,o){t.operation((function(){var a=r(t),l=i(t,a.query,n?a.posFrom:a.posTo);(l.find(n)||(l=i(t,a.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(n))&&(t.setSelection(l.from(),l.to()),t.scrollIntoView({from:l.from(),to:l.to()},20),a.posFrom=l.from(),a.posTo=l.to(),o&&o(l.from(),l.to()))}))}function d(e){e.operation((function(){var t=r(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}function h(e,t,r){e.operation((function(){for(var n=i(e,t);n.findNext();)if("string"!=typeof t){var o=e.getRange(n.from(),n.to()).match(t);n.replace(r.replace(/\$(\d)/g,(function(e,t){return o[t]})))}else n.replace(r)}))}function p(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||r(e).lastQuery,s='<span class="CodeMirror-search-label">'+(t?"Replace all:":"Replace:")+"</span>";o(e,s+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',s,n,(function(r){r&&(r=l(r),o(e,'<span class="CodeMirror-search-label">With:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',"Replace with:","",(function(n){if(n=a(n),t)h(e,r,n);else{d(e);var o=i(e,r,e.getCursor("from")),l=function(){var t,a=o.from();!(t=o.findNext())&&(o=i(e,r),!(t=o.findNext())||a&&o.from().line==a.line&&o.from().ch==a.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),function(e,t,r,n){e.openConfirm?e.openConfirm(t,n):confirm(r)&&n[0]()}(e,'<span class="CodeMirror-search-label">Replace?</span> <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>',"Replace?",[function(){s(t)},l,function(){h(e,r,n)}]))},s=function(e){o.replace("string"==typeof r?n:n.replace(/\$(\d)/g,(function(t,r){return e[r]}))),l()};l()}})))}))}}e.commands.find=function(e){d(e),u(e)},e.commands.findPersistent=function(e){d(e),u(e,!1,!0)},e.commands.findPersistentNext=function(e){u(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){u(e,!0,!0,!0)},e.commands.findNext=u,e.commands.findPrev=function(e){u(e,!0)},e.commands.clearSearch=d,e.commands.replace=p,e.commands.replaceAll=function(e){p(e,!0)}})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";var t,r,n=e.Pos;function i(e,t){for(var r=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),n=r,i=0;i<t.length;i++)-1==n.indexOf(t.charAt(i))&&(n+=t.charAt(i));return r==n?e:new RegExp(e.source,n)}function o(e,t,r){t=i(t,"g");for(var o=r.line,a=r.ch,l=e.lastLine();o<=l;o++,a=0){t.lastIndex=a;var s=e.getLine(o),c=t.exec(s);if(c)return{from:n(o,c.index),to:n(o,c.index+c[0].length),match:c}}}function a(e,t,r){if(!function(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}(t))return o(e,t,r);t=i(t,"gm");for(var a,l=1,s=r.line,c=e.lastLine();s<=c;){for(var u=0;u<l&&!(s>c);u++){var f=e.getLine(s++);a=null==a?f:a+"\n"+f}l*=2,t.lastIndex=r.ch;var d=t.exec(a);if(d){var h=a.slice(0,d.index).split("\n"),p=d[0].split("\n"),g=r.line+h.length-1,m=h[h.length-1].length;return{from:n(g,m),to:n(g+p.length-1,1==p.length?m+p[0].length:p[p.length-1].length),match:d}}}}function l(e,t){for(var r,n=0;;){t.lastIndex=n;var i=t.exec(e);if(!i)return r;if((n=(r=i).index+(r[0].length||1))==e.length)return r}}function s(e,t,r){t=i(t,"g");for(var o=r.line,a=r.ch,s=e.firstLine();o>=s;o--,a=-1){var c=e.getLine(o);a>-1&&(c=c.slice(0,a));var u=l(c,t);if(u)return{from:n(o,u.index),to:n(o,u.index+u[0].length),match:u}}}function c(e,t,r){t=i(t,"gm");for(var o,a=1,s=r.line,c=e.firstLine();s>=c;){for(var u=0;u<a;u++){var f=e.getLine(s--);o=null==o?f.slice(0,r.ch):f+"\n"+o}a*=2;var d=l(o,t);if(d){var h=o.slice(0,d.index).split("\n"),p=d[0].split("\n"),g=s+h.length,m=h[h.length-1].length;return{from:n(g,m),to:n(g+p.length-1,1==p.length?m+p[0].length:p[p.length-1].length),match:d}}}}function u(e,t,r,n){if(e.length==t.length)return r;for(var i=0,o=r+Math.max(0,e.length-t.length);;){if(i==o)return i;var a=i+o>>1,l=n(e.slice(0,a)).length;if(l==r)return a;l>r?o=a:i=a+1}}function f(e,i,o,a){if(!i.length)return null;var l=a?t:r,s=l(i).split(/\r|\n\r?/);e:for(var c=o.line,f=o.ch,d=e.lastLine()+1-s.length;c<=d;c++,f=0){var h=e.getLine(c).slice(f),p=l(h);if(1==s.length){var g=p.indexOf(s[0]);if(-1==g)continue e;o=u(h,p,g,l)+f;return{from:n(c,u(h,p,g,l)+f),to:n(c,u(h,p,g+s[0].length,l)+f)}}var m=p.length-s[0].length;if(p.slice(m)==s[0]){for(var v=1;v<s.length-1;v++)if(l(e.getLine(c+v))!=s[v])continue e;var y=e.getLine(c+s.length-1),b=l(y),w=s[s.length-1];if(b.slice(0,w.length)==w)return{from:n(c,u(h,p,m,l)+f),to:n(c+s.length-1,u(y,b,w.length,l))}}}}function d(e,i,o,a){if(!i.length)return null;var l=a?t:r,s=l(i).split(/\r|\n\r?/);e:for(var c=o.line,f=o.ch,d=e.firstLine()-1+s.length;c>=d;c--,f=-1){var h=e.getLine(c);f>-1&&(h=h.slice(0,f));var p=l(h);if(1==s.length){var g=p.lastIndexOf(s[0]);if(-1==g)continue e;return{from:n(c,u(h,p,g,l)),to:n(c,u(h,p,g+s[0].length,l))}}var m=s[s.length-1];if(p.slice(0,m.length)==m){var v=1;for(o=c-s.length+1;v<s.length-1;v++)if(l(e.getLine(o+v))!=s[v])continue e;var y=e.getLine(c+1-s.length),b=l(y);if(b.slice(b.length-s[0].length)==s[0])return{from:n(c+1-s.length,u(y,b,y.length-s[0].length,l)),to:n(c,u(h,p,m.length,l))}}}}function h(e,t,r,l){var u;this.atOccurrence=!1,this.doc=e,r=r?e.clipPos(r):n(0,0),this.pos={from:r,to:r},"object"==typeof l?u=l.caseFold:(u=l,l=null),"string"==typeof t?(null==u&&(u=!1),this.matches=function(r,n){return(r?d:f)(e,t,n,u)}):(t=i(t,"gm"),l&&!1===l.multiline?this.matches=function(r,n){return(r?s:o)(e,t,n)}:this.matches=function(r,n){return(r?c:a)(e,t,n)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},r=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},r=function(e){return e}),h.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var r=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));r&&0==e.cmpPos(r.from,r.to);)t?r.from.ch?r.from=n(r.from.line,r.from.ch-1):r=r.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(n(r.from.line-1))):r.to.ch<this.doc.getLine(r.to.line).length?r.to=n(r.to.line,r.to.ch+1):r=r.to.line==this.doc.lastLine()?null:this.matches(t,n(r.to.line+1,0));if(r)return this.pos=r,this.atOccurrence=!0,this.pos.match||!0;var i=n(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,r){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,r),this.pos.to=n(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,r){return new h(this.doc,e,t,r)})),e.defineDocExtension("getSearchCursor",(function(e,t,r){return new h(this,e,t,r)})),e.defineExtension("selectMatches",(function(t,r){for(var n=[],i=this.getSearchCursor(t,this.getCursor("from"),r);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)n.push({anchor:i.from(),head:i.to()});n.length&&this.setSelections(n,0)}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";var t="CodeMirror-activeline-background";function r(e){for(var r=0;r<e.state.activeLines.length;r++)e.removeLineClass(e.state.activeLines[r],"wrap","CodeMirror-activeline"),e.removeLineClass(e.state.activeLines[r],"background",t),e.removeLineClass(e.state.activeLines[r],"gutter","CodeMirror-activeline-gutter")}function n(e,n){for(var i=[],o=0;o<n.length;o++){var a=n[o],l=e.getOption("styleActiveLine");if("object"==typeof l&&l.nonEmpty?a.anchor.line==a.head.line:a.empty()){var s=e.getLineHandleVisualStart(a.head.line);i[i.length-1]!=s&&i.push(s)}}(function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0})(e.state.activeLines,i)||e.operation((function(){r(e);for(var n=0;n<i.length;n++)e.addLineClass(i[n],"wrap","CodeMirror-activeline"),e.addLineClass(i[n],"background",t),e.addLineClass(i[n],"gutter","CodeMirror-activeline-gutter");e.state.activeLines=i}))}function i(e,t){n(e,t.ranges)}e.defineOption("styleActiveLine",!1,(function(t,o,a){var l=a!=e.Init&&a;o!=l&&(l&&(t.off("beforeSelectionChange",i),r(t),delete t.state.activeLines),o&&(t.state.activeLines=[],n(t,t.listSelections()),t.on("beforeSelectionChange",i)))}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";function t(e){for(var t={},r=0;r<e.length;++r)t[e[r].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,r){var n=r.inline;r.propertyKeywords||(r=e.resolveMode("text/css"));var i,o,a=t.indentUnit,l=r.tokenHooks,s=r.documentTypes||{},c=r.mediaTypes||{},u=r.mediaFeatures||{},f=r.mediaValueKeywords||{},d=r.propertyKeywords||{},h=r.nonStandardPropertyKeywords||{},p=r.fontProperties||{},g=r.counterDescriptors||{},m=r.colorKeywords||{},v=r.valueKeywords||{},y=r.allowNested,b=r.lineComment,w=!0===r.supportsAtComponent;function x(e,t){return i=t,e}function k(e,t){var r=e.next();if(l[r]){var n=l[r](e,t);if(!1!==n)return n}return"@"==r?(e.eatWhile(/[\w\\\-]/),x("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?x(null,"compare"):'"'==r||"'"==r?(t.tokenize=C(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),x("atom","hash")):"!"==r?(e.match(/^\s*\w*/),x("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),x("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?x(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?x("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?x(null,r):("u"==r||"U"==r)&&e.match(/rl(-prefix)?\(/i)||("d"==r||"D"==r)&&e.match("omain(",!0,!0)||("r"==r||"R"==r)&&e.match("egexp(",!0,!0)?(e.backUp(1),t.tokenize=S,x("property","word")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),x("property","word")):x(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),x("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?x("variable-2","variable-definition"):x("variable-2","variable")):e.match(/^\w+-/)?x("meta","meta"):void 0}function C(e){return function(t,r){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\"==n}return(n==e||!i&&")"!=e)&&(r.tokenize=null),x("string","string")}}function S(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=C(")"),x(null,"(")}function L(e,t,r){this.type=e,this.indent=t,this.prev=r}function M(e,t,r,n){return e.context=new L(r,t.indentation()+(!1===n?0:a),e.context),r}function T(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function O(e,t,r){return D[r.context.type](e,t,r)}function N(e,t,r,n){for(var i=n||1;i>0;i--)r.context=r.context.prev;return O(e,t,r)}function A(e){var t=e.current().toLowerCase();o=v.hasOwnProperty(t)?"atom":m.hasOwnProperty(t)?"keyword":"variable"}var D={top:function(e,t,r){if("{"==e)return M(r,t,"block");if("}"==e&&r.context.prev)return T(r);if(w&&/@component/i.test(e))return M(r,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return M(r,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return M(r,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return r.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return M(r,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return M(r,t,"interpolation");if(":"==e)return"pseudo";if(y&&"("==e)return M(r,t,"parens")}return r.context.type},block:function(e,t,r){if("word"==e){var n=t.current().toLowerCase();return d.hasOwnProperty(n)?(o="property","maybeprop"):h.hasOwnProperty(n)?(o="string-2","maybeprop"):y?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":y||"hash"!=e&&"qualifier"!=e?D.top(e,t,r):(o="error","block")},maybeprop:function(e,t,r){return":"==e?M(r,t,"prop"):O(e,t,r)},prop:function(e,t,r){if(";"==e)return T(r);if("{"==e&&y)return M(r,t,"propBlock");if("}"==e||"{"==e)return N(e,t,r);if("("==e)return M(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)A(t);else if("interpolation"==e)return M(r,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,r){return"}"==e?T(r):"word"==e?(o="property","maybeprop"):r.context.type},parens:function(e,t,r){return"{"==e||"}"==e?N(e,t,r):")"==e?T(r):"("==e?M(r,t,"parens"):"interpolation"==e?M(r,t,"interpolation"):("word"==e&&A(t),"parens")},pseudo:function(e,t,r){return"meta"==e?"pseudo":"word"==e?(o="variable-3",r.context.type):O(e,t,r)},documentTypes:function(e,t,r){return"word"==e&&s.hasOwnProperty(t.current())?(o="tag",r.context.type):D.atBlock(e,t,r)},atBlock:function(e,t,r){if("("==e)return M(r,t,"atBlock_parens");if("}"==e||";"==e)return N(e,t,r);if("{"==e)return T(r)&&M(r,t,y?"block":"top");if("interpolation"==e)return M(r,t,"interpolation");if("word"==e){var n=t.current().toLowerCase();o="only"==n||"not"==n||"and"==n||"or"==n?"keyword":c.hasOwnProperty(n)?"attribute":u.hasOwnProperty(n)?"property":f.hasOwnProperty(n)?"keyword":d.hasOwnProperty(n)?"property":h.hasOwnProperty(n)?"string-2":v.hasOwnProperty(n)?"atom":m.hasOwnProperty(n)?"keyword":"error"}return r.context.type},atComponentBlock:function(e,t,r){return"}"==e?N(e,t,r):"{"==e?T(r)&&M(r,t,y?"block":"top",!1):("word"==e&&(o="error"),r.context.type)},atBlock_parens:function(e,t,r){return")"==e?T(r):"{"==e||"}"==e?N(e,t,r,2):D.atBlock(e,t,r)},restricted_atBlock_before:function(e,t,r){return"{"==e?M(r,t,"restricted_atBlock"):"word"==e&&"@counter-style"==r.stateArg?(o="variable","restricted_atBlock_before"):O(e,t,r)},restricted_atBlock:function(e,t,r){return"}"==e?(r.stateArg=null,T(r)):"word"==e?(o="@font-face"==r.stateArg&&!p.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==r.stateArg&&!g.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,r){return"word"==e?(o="variable","keyframes"):"{"==e?M(r,t,"top"):O(e,t,r)},at:function(e,t,r){return";"==e?T(r):"{"==e||"}"==e?N(e,t,r):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,r){return"}"==e?T(r):"{"==e||";"==e?N(e,t,r):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new L(n?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||k)(e,t);return r&&"object"==typeof r&&(i=r[1],r=r[0]),o=r,"comment"!=i&&(t.state=D[t.state](i,e,t)),o},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),r.prev&&("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=n||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"atBlock"!=r.type)||(i=Math.max(0,r.indent-a)):i=(r=r.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var r=["domain","regexp","url","url-prefix"],n=t(r),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],l=t(a),s=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],c=t(s),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],f=t(u),d=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=t(d),p=t(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),g=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),m=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(m),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(y),w=r.concat(i).concat(a).concat(s).concat(u).concat(d).concat(m).concat(y);function x(e,t){for(var r,n=!1;null!=(r=e.next());){if(n&&"/"==r){t.tokenize=null;break}n="*"==r}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:n,mediaTypes:o,mediaFeatures:l,mediaValueKeywords:c,propertyKeywords:f,nonStandardPropertyKeywords:h,fontProperties:p,counterDescriptors:g,colorKeywords:v,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:l,mediaValueKeywords:c,propertyKeywords:f,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:b,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:l,mediaValueKeywords:c,propertyKeywords:f,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:b,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:o,mediaFeatures:l,propertyKeywords:f,nonStandardPropertyKeywords:h,fontProperties:p,counterDescriptors:g,colorKeywords:v,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css",helperType:"gss"})})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";e.defineMode("javascript",(function(t,r){var n,i,o=t.indentUnit,a=r.statementIndent,l=r.jsonld,s=r.json||l,c=r.typescript,u=r.wordCharacters||/[\w$\xa1-\uffff]/,f=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),i=e("keyword d"),o=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:i,break:i,continue:i,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n}}(),d=/[+\-*&%=<>!?|~^@]/,h=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(e,t,r){return n=e,i=r,t}function g(e,t){var r,n=e.next();if('"'==n||"'"==n)return t.tokenize=(r=n,function(e,t){var n,i=!1;if(l&&"@"==e.peek()&&e.match(h))return t.tokenize=g,p("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=r||i);)i=!i&&"\\"==n;return i||(t.tokenize=g),p("string","string")}),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return p("number","number");if("."==n&&e.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return p(n);if("="==n&&e.eat(">"))return p("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),p("number","number");if("0"==n&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),p("number","number");if("0"==n&&e.eat(/b/i))return e.eatWhile(/[01]/i),p("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),p("number","number");if("/"==n)return e.eat("*")?(t.tokenize=m,m(e,t)):e.eat("/")?(e.skipToEnd(),p("comment","comment")):Be(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),p("regexp","string-2")):(e.eat("="),p("operator","operator",e.current()));if("`"==n)return t.tokenize=v,v(e,t);if("#"==n)return e.skipToEnd(),p("error","error");if(d.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),p("operator","operator",e.current());if(u.test(n)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(f.propertyIsEnumerable(i)){var o=f[i];return p(o.type,o.style,i)}if("async"==i&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",i)}return p("variable","variable",i)}}function m(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=g;break}n="*"==r}return p("comment","comment")}function v(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=g;break}n=!n&&"\\"==r}return p("quasi","string-2",e.current())}function y(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(c){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var i=0,o=!1,a=r-1;a>=0;--a){var l=e.string.charAt(a),s="([{}])".indexOf(l);if(s>=0&&s<3){if(!i){++a;break}if(0==--i){"("==l&&(o=!0);break}}else if(s>=3&&s<6)++i;else if(u.test(l))o=!0;else{if(/["'\/]/.test(l))return;if(o&&!i){++a;break}}}o&&!i&&(t.fatArrowAt=a)}}var b={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,r,n,i,o){this.indented=e,this.column=t,this.type=r,this.prev=i,this.info=o,null!=n&&(this.align=n)}function x(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var k={state:null,column:null,marked:null,cc:null};function C(){for(var e=arguments.length-1;e>=0;e--)k.cc.push(arguments[e])}function S(){return C.apply(null,arguments),!0}function L(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=k.state;if(k.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function M(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}var T={name:"this",next:{name:"arguments"}};function O(){k.state.context={prev:k.state.context,vars:k.state.localVars},k.state.localVars=T}function N(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function A(e,t){var r=function(){var r=k.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new w(n,k.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function D(){var e=k.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function P(e){return function t(r){return r==e?S():";"==e?C():S(t)}}function W(e,t){return"var"==e?S(A("vardef",t.length),de,P(";"),D):"keyword a"==e?S(A("form"),H,W,D):"keyword b"==e?S(A("form"),W,D):"keyword d"==e?k.stream.match(/^\s*$/,!1)?S():S(A("stat"),E,P(";"),D):"debugger"==e?S(P(";")):"{"==e?S(A("}"),ee,D):";"==e?S():"if"==e?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==D&&k.state.cc.pop()(),S(A("form"),H,W,D,ve)):"function"==e?S(Ce):"for"==e?S(A("form"),ye,W,D):"class"==e||c&&"interface"==t?(k.marked="keyword",S(A("form"),Me,D)):"variable"==e?c&&"declare"==t?(k.marked="keyword",S(W)):c&&("module"==t||"enum"==t||"type"==t)&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword","enum"==t?S(Ee):"type"==t?S(ie,P("operator"),ie,P(";")):S(A("form"),he,P("{"),A("}"),ee,D,D)):c&&"namespace"==t?(k.marked="keyword",S(A("form"),F,ee,D)):c&&"abstract"==t?(k.marked="keyword",S(W)):S(A("stat"),$):"switch"==e?S(A("form"),H,P("{"),A("}","switch"),ee,D,D):"case"==e?S(F,P(":")):"default"==e?S(P(":")):"catch"==e?S(A("form"),O,P("("),Se,P(")"),W,D,N):"export"==e?S(A("stat"),Ae,D):"import"==e?S(A("stat"),Pe,D):"async"==e?S(W):"@"==t?S(F,W):C(A("stat"),F,P(";"),D)}function F(e,t){return I(e,t,!1)}function z(e,t){return I(e,t,!0)}function H(e){return"("!=e?C():S(A(")"),F,P(")"),D)}function I(e,t,r){if(k.state.fatArrowAt==k.stream.start){var n=r?V:K;if("("==e)return S(O,A(")"),Q(Se,")"),D,P("=>"),n,N);if("variable"==e)return C(O,he,P("=>"),n,N)}var i=r?B:R;return b.hasOwnProperty(e)?S(i):"function"==e?S(Ce,i):"class"==e||c&&"interface"==t?(k.marked="keyword",S(A("form"),Le,D)):"keyword c"==e||"async"==e?S(r?z:F):"("==e?S(A(")"),E,P(")"),D,i):"operator"==e||"spread"==e?S(r?z:F):"["==e?S(A("]"),Ie,D,i):"{"==e?J(X,"}",null,i):"quasi"==e?C(j,i):"new"==e?S(function(e){return function(t){return"."==t?S(e?G:U):"variable"==t&&c?S(ce,e?B:R):C(e?z:F)}}(r)):"import"==e?S(F):S()}function E(e){return e.match(/[;\}\)\],]/)?C():C(F)}function R(e,t){return","==e?S(F):B(e,t,!1)}function B(e,t,r){var n=0==r?R:B,i=0==r?F:z;return"=>"==e?S(O,r?V:K,N):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?S(n):c&&"<"==t&&k.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?S(A(">"),Q(ie,">"),D,n):"?"==t?S(F,P(":"),i):S(i):"quasi"==e?C(j,n):";"!=e?"("==e?J(z,")","call",n):"."==e?S(_,n):"["==e?S(A("]"),E,P("]"),D,n):c&&"as"==t?(k.marked="keyword",S(ie,n)):"regexp"==e?(k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),S(i)):void 0:void 0}function j(e,t){return"quasi"!=e?C():"${"!=t.slice(t.length-2)?S(j):S(F,q)}function q(e){if("}"==e)return k.marked="string-2",k.state.tokenize=v,S(j)}function K(e){return y(k.stream,k.state),C("{"==e?W:F)}function V(e){return y(k.stream,k.state),C("{"==e?W:z)}function U(e,t){if("target"==t)return k.marked="keyword",S(R)}function G(e,t){if("target"==t)return k.marked="keyword",S(B)}function $(e){return":"==e?S(D,W):C(R,P(";"),D)}function _(e){if("variable"==e)return k.marked="property",S()}function X(e,t){return"async"==e?(k.marked="property",S(X)):"variable"==e||"keyword"==k.style?(k.marked="property","get"==t||"set"==t?S(Y):(c&&k.state.fatArrowAt==k.stream.start&&(r=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+r[0].length),S(Z))):"number"==e||"string"==e?(k.marked=l?"property":k.style+" property",S(Z)):"jsonld-keyword"==e?S(Z):c&&M(t)?(k.marked="keyword",S(X)):"["==e?S(F,te,P("]"),Z):"spread"==e?S(z,Z):"*"==t?(k.marked="keyword",S(X)):":"==e?C(Z):void 0;var r}function Y(e){return"variable"!=e?C(Z):(k.marked="property",S(Ce))}function Z(e){return":"==e?S(z):"("==e?C(Ce):void 0}function Q(e,t,r){function n(i,o){if(r?r.indexOf(i)>-1:","==i){var a=k.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),S((function(r,n){return r==t||n==t?C():C(e)}),n)}return i==t||o==t?S():S(P(t))}return function(r,i){return r==t||i==t?S():C(e,n)}}function J(e,t,r){for(var n=3;n<arguments.length;n++)k.cc.push(arguments[n]);return S(A(t,r),Q(e,t),D)}function ee(e){return"}"==e?S():C(W,ee)}function te(e,t){if(c){if(":"==e)return S(ie);if("?"==t)return S(te)}}function re(e){if(c&&":"==e)return k.stream.match(/^\s*\w+\s+is\b/,!1)?S(F,ne,ie):S(ie)}function ne(e,t){if("is"==t)return k.marked="keyword",S()}function ie(e,t){return"keyof"==t||"typeof"==t?(k.marked="keyword",S("keyof"==t?ie:z)):"variable"==e||"void"==t?(k.marked="type",S(se)):"string"==e||"number"==e||"atom"==e?S(se):"["==e?S(A("]"),Q(ie,"]",","),D,se):"{"==e?S(A("}"),Q(ae,"}",",;"),D,se):"("==e?S(Q(le,")"),oe):"<"==e?S(Q(ie,">"),ie):void 0}function oe(e){if("=>"==e)return S(ie)}function ae(e,t){return"variable"==e||"keyword"==k.style?(k.marked="property",S(ae)):"?"==t?S(ae):":"==e?S(ie):"["==e?S(F,te,P("]"),ae):void 0}function le(e,t){return"variable"==e&&k.stream.match(/^\s*[?:]/,!1)||"?"==t?S(le):":"==e?S(ie):C(ie)}function se(e,t){return"<"==t?S(A(">"),Q(ie,">"),D,se):"|"==t||"."==e||"&"==t?S(ie):"["==e?S(P("]"),se):"extends"==t||"implements"==t?(k.marked="keyword",S(ie)):void 0}function ce(e,t){if("<"==t)return S(A(">"),Q(ie,">"),D,se)}function ue(){return C(ie,fe)}function fe(e,t){if("="==t)return S(ie)}function de(e,t){return"enum"==t?(k.marked="keyword",S(Ee)):C(he,te,ge,me)}function he(e,t){return c&&M(t)?(k.marked="keyword",S(he)):"variable"==e?(L(t),S()):"spread"==e?S(he):"["==e?J(he,"]"):"{"==e?J(pe,"}"):void 0}function pe(e,t){return"variable"!=e||k.stream.match(/^\s*:/,!1)?("variable"==e&&(k.marked="property"),"spread"==e?S(he):"}"==e?C():S(P(":"),he,ge)):(L(t),S(ge))}function ge(e,t){if("="==t)return S(z)}function me(e){if(","==e)return S(de)}function ve(e,t){if("keyword b"==e&&"else"==t)return S(A("form","else"),W,D)}function ye(e,t){return"await"==t?S(ye):"("==e?S(A(")"),be,P(")"),D):void 0}function be(e){return"var"==e?S(de,P(";"),xe):";"==e?S(xe):"variable"==e?S(we):C(F,P(";"),xe)}function we(e,t){return"in"==t||"of"==t?(k.marked="keyword",S(F)):S(R,xe)}function xe(e,t){return";"==e?S(ke):"in"==t||"of"==t?(k.marked="keyword",S(F)):C(F,P(";"),ke)}function ke(e){")"!=e&&S(F)}function Ce(e,t){return"*"==t?(k.marked="keyword",S(Ce)):"variable"==e?(L(t),S(Ce)):"("==e?S(O,A(")"),Q(Se,")"),D,re,W,N):c&&"<"==t?S(A(">"),Q(ue,">"),D,Ce):void 0}function Se(e,t){return"@"==t&&S(F,Se),"spread"==e?S(Se):c&&M(t)?(k.marked="keyword",S(Se)):C(he,te,ge)}function Le(e,t){return"variable"==e?Me(e,t):Te(e,t)}function Me(e,t){if("variable"==e)return L(t),S(Te)}function Te(e,t){return"<"==t?S(A(">"),Q(ue,">"),D,Te):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(k.marked="keyword"),S(c?ie:F,Te)):"{"==e?S(A("}"),Oe,D):void 0}function Oe(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&M(t))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(k.marked="keyword",S(Oe)):"variable"==e||"keyword"==k.style?(k.marked="property",S(c?Ne:Ce,Oe)):"["==e?S(F,te,P("]"),c?Ne:Ce,Oe):"*"==t?(k.marked="keyword",S(Oe)):";"==e?S(Oe):"}"==e?S():"@"==t?S(F,Oe):void 0}function Ne(e,t){return"?"==t?S(Ne):":"==e?S(ie,ge):"="==t?S(z):C(Ce)}function Ae(e,t){return"*"==t?(k.marked="keyword",S(He,P(";"))):"default"==t?(k.marked="keyword",S(F,P(";"))):"{"==e?S(Q(De,"}"),He,P(";")):C(W)}function De(e,t){return"as"==t?(k.marked="keyword",S(P("variable"))):"variable"==e?C(z,De):void 0}function Pe(e){return"string"==e?S():"("==e?C(F):C(We,Fe,He)}function We(e,t){return"{"==e?J(We,"}"):("variable"==e&&L(t),"*"==t&&(k.marked="keyword"),S(ze))}function Fe(e){if(","==e)return S(We,Fe)}function ze(e,t){if("as"==t)return k.marked="keyword",S(We)}function He(e,t){if("from"==t)return k.marked="keyword",S(F)}function Ie(e){return"]"==e?S():C(Q(z,"]"))}function Ee(){return C(A("form"),he,P("{"),A("}"),Q(Re,"}"),D,D)}function Re(){return C(he,ge)}function Be(e,t,r){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}return D.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new w((e||0)-o,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),y(e,t)),t.tokenize!=m&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",function(e,t,r,n,i){var o=e.cc;for(k.state=e,k.stream=i,k.marked=null,k.cc=o,k.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){if((o.length?o.pop():s?F:W)(r,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return k.marked?k.marked:"variable"==r&&x(e,n)?"variable-2":t}}}(t,r,n,i,e))},indent:function(t,n){if(t.tokenize==m)return e.Pass;if(t.tokenize!=g)return 0;var i,l=n&&n.charAt(0),s=t.lexical;if(!/^\s*else\b/.test(n))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==D)s=s.prev;else if(u!=ve)break}for(;("stat"==s.type||"form"==s.type)&&("}"==l||(i=t.cc[t.cc.length-1])&&(i==R||i==B)&&!/^[,\.=+\-*:?[\(]/.test(n));)s=s.prev;a&&")"==s.type&&"stat"==s.prev.type&&(s=s.prev);var f=s.type,h=l==f;return"vardef"==f?s.indented+("operator"==t.lastType||","==t.lastType?s.info+1:0):"form"==f&&"{"==l?s.indented:"form"==f?s.indented+o:"stat"==f?s.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||d.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,n)?a||o:0):"switch"!=s.info||h||0==r.doubleIndentSwitch?s.align?s.column+(h?0:1):s.indented+(h?0:o):s.indented+(/^(?:case|default)\b/.test(n)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:s?null:"/*",blockCommentEnd:s?null:"*/",blockCommentContinue:s?null:" * ",lineComment:s?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:s?"json":"javascript",jsonldMode:l,jsonMode:s,expressionAllowed:Be,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=F&&t!=z||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})),function(e){"object"==typeof exports&&"object"==typeof module?e(n(),n(),n(),n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}((function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var r={};function n(e,t){var n=e.match(function(e){var t=r[e];return t||(r[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(t));return n?/^\s*(.*?)\s*$/.exec(n[2])[1]:""}function i(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var r in e)for(var n=t[r]||(t[r]=[]),i=e[r],o=i.length-1;o>=0;o--)n.unshift(i[o])}e.defineMode("htmlmixed",(function(r,a){var l=e.getMode(r,{name:"xml",htmlMode:!0,multilineTagIndentFactor:a.multilineTagIndentFactor,multilineTagIndentPastTag:a.multilineTagIndentPastTag}),s={},c=a&&a.tags,u=a&&a.scriptTypes;if(o(t,s),c&&o(c,s),u)for(var f=u.length-1;f>=0;f--)s.script.unshift(["type",u[f].matches,u[f].mode]);function d(t,o){var a,c=l.token(t,o.htmlState),u=/\btag\b/.test(c);if(u&&!/[<>\s\/]/.test(t.current())&&(a=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&s.hasOwnProperty(a))o.inTag=a+" ";else if(o.inTag&&u&&/>$/.test(t.current())){var f=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var h=">"==t.current()&&function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i[0]||i[1].test(n(t,i[0])))return i[2]}}(s[f[1]],f[2]),p=e.getMode(r,h),g=i(f[1],!0),m=i(f[1],!1);o.token=function(e,t){return e.match(g,!1)?(t.token=d,t.localState=t.localMode=null,null):function(e,t,r){var n=e.current(),i=n.search(t);return i>-1?e.backUp(n.length-i):n.match(/<\/?$/)&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),r}(e,m,t.localMode.token(e,t.localState))},o.localMode=p,o.localState=e.startState(p,l.indent(o.htmlState,""))}else o.inTag&&(o.inTag+=t.current(),t.eol()&&(o.inTag+=" "));return c}return{startState:function(){return{token:d,inTag:null,localMode:null,localState:null,htmlState:e.startState(l)}},copyState:function(t){var r;return t.localState&&(r=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:r,htmlState:e.copyState(l,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,r,n){return!t.localMode||/^\s*<\//.test(r)?l.indent(t.htmlState,r):t.localMode.indent?t.localMode.indent(t.localState,r,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||l}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")})),function(e){"object"==typeof exports&&"object"==typeof module?e(n()):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(n,i){var o,a,l=n.indentUnit,s={},c=i.htmlMode?t:r;for(var u in c)s[u]=c[u];for(var u in i)s[u]=i[u];function f(e,t){function r(r){return t.tokenize=r,r(e,t)}var n=e.next();return"<"==n?e.eat("!")?e.eat("[")?e.match("CDATA[")?r(h("atom","]]>")):null:e.match("--")?r(h("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(function e(t){return function(r,n){for(var i;null!=(i=r.next());){if("<"==i)return n.tokenize=e(t+1),n.tokenize(r,n);if(">"==i){if(1==t){n.tokenize=f;break}return n.tokenize=e(t-1),n.tokenize(r,n)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=h("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=d,"tag bracket"):"&"==n?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function d(e,t){var r,n,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=f,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"==i){t.tokenize=f,t.state=v,t.tagName=t.tagStart=null;var a=t.tokenize(e,t);return a?a+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=(r=i,(n=function(e,t){for(;!e.eol();)if(e.next()==r){t.tokenize=d;break}return"string"}).isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(e,t){return function(r,n){for(;!r.eol();){if(r.match(t)){n.tokenize=f;break}r.next()}return e}}function p(e,t,r){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=r,(s.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!s.contextGrabbers.hasOwnProperty(r)||!s.contextGrabbers[r].hasOwnProperty(t))return;g(e)}}function v(e,t,r){return"openTag"==e?(r.tagStart=t.column(),y):"closeTag"==e?b:v}function y(e,t,r){return"word"==e?(r.tagName=t.current(),a="tag",k):s.allowMissingTagName&&"endTag"==e?(a="tag bracket",k(e,t,r)):(a="error",y)}function b(e,t,r){if("word"==e){var n=t.current();return r.context&&r.context.tagName!=n&&s.implicitlyClosed.hasOwnProperty(r.context.tagName)&&g(r),r.context&&r.context.tagName==n||!1===s.matchClosing?(a="tag",w):(a="tag error",x)}return s.allowMissingTagName&&"endTag"==e?(a="tag bracket",w(e,t,r)):(a="error",x)}function w(e,t,r){return"endTag"!=e?(a="error",w):(g(r),v)}function x(e,t,r){return a="error",w(e,0,r)}function k(e,t,r){if("word"==e)return a="attribute",C;if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,i=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||s.autoSelfClosers.hasOwnProperty(n)?m(r,n):(m(r,n),r.context=new p(r,n,i==r.indented)),v}return a="error",k}function C(e,t,r){return"equals"==e?S:(s.allowMissing||(a="error"),k(e,0,r))}function S(e,t,r){return"string"==e?L:"word"==e&&s.allowUnquoted?(a="string",k):(a="error",k(e,0,r))}function L(e,t,r){return"string"==e?L:k(e,0,r)}return f.isInText=!0,{startState:function(e){var t={tokenize:f,state:v,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var r=t.tokenize(e,t);return(r||o)&&"comment"!=r&&(a=null,t.state=t.state(o||r,e,t),a&&(r="error"==a?r+" error":a)),r},indent:function(t,r,n){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+l;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=d&&t.tokenize!=f)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==s.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var o=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(o&&o[1])for(;i;){if(i.tagName==o[2]){i=i.prev;break}if(!s.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(o)for(;i;){var a=s.contextGrabbers[i.tagName];if(!a||!a.hasOwnProperty(o[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+l:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=k)}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}))}(),SM.currentModule=null}),"",{requires:[]});
YUI.add('connected-react-router', function (Y) {SM.currentModule = 'connected-react-router';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ConnectedReactRouter=e():t.ConnectedReactRouter=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=68)}([function(t,e,n){"use strict";t.exports=n(60)},function(t,e,n){t.exports=n(40)()},function(t,e,n){"use strict";var r=function(t,e,n,r,o,i,a,u){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,u],p=0;c=new Error(e.replace(/%s/g,function(){return s[p++]})),c.name="Invariant Violation"}throw (c.framesToPop=1, c)}};t.exports=r},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return a}),n.d(e,"e",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"a",function(){return s});var r=function(t){return"/"===t.charAt(0)?t:"/"+t},o=function(t){return"/"===t.charAt(0)?t.substr(1):t},i=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)},a=function(t,e){return i(t,e)?t.substr(e.length):t},u=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},c=function(t){var e=t||"/",n="",r="",o=e.indexOf("#");-1!==o&&(r=e.substr(o),e=e.substr(0,o));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},s=function(t){var e=t.pathname,n=t.search,r=t.hash,o=e||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return i}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return p}),n.d(e,"h",function(){return f}),n.d(e,"i",function(){return l});var r="@@router/LOCATION_CHANGE",o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:r,payload:{location:t,action:e,isFirstRendering:n}}},i="@@router/CALL_HISTORY_METHOD",a=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return{type:i,payload:{method:t,args:n}}}},u=a("push"),c=a("replace"),s=a("go"),p=a("goBack"),f=a("goForward"),l={push:u,replace:c,go:s,goBack:p,goForward:f}},function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c});var r=n(62),o=n(65),i=n(4),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(t,e,o,u){var c=void 0;"string"==typeof t?(c=n.i(i.b)(t),c.state=e):(c=a({},t),void 0===c.pathname&&(c.pathname=""),c.search?"?"!==c.search.charAt(0)&&(c.search="?"+c.search):c.search="",c.hash?"#"!==c.hash.charAt(0)&&(c.hash="#"+c.hash):c.hash="",void 0!==e&&void 0===c.state&&(c.state=e));try{c.pathname=decodeURI(c.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+c.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return o&&(c.key=o),u?c.pathname?"/"!==c.pathname.charAt(0)&&(c.pathname=n.i(r.a)(c.pathname,u.pathname)):c.pathname=u.pathname:c.pathname||(c.pathname="/"),c},c=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&n.i(o.a)(t.state,e.state)}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ConnectedRouter",function(){return s}),n.d(e,"connectRouter",function(){return p}),n.d(e,"getLocation",function(){return l}),n.d(e,"getAction",function(){return d}),n.d(e,"getHash",function(){return h}),n.d(e,"getSearch",function(){return y}),n.d(e,"createMatchSelector",function(){return v});var r=n(29),o=n(31),i=n(17),a=n(33),u=n(5);n.d(e,"LOCATION_CHANGE",function(){return u.a}),n.d(e,"CALL_HISTORY_METHOD",function(){return u.b}),n.d(e,"onLocationChanged",function(){return u.c}),n.d(e,"push",function(){return u.d}),n.d(e,"replace",function(){return u.e}),n.d(e,"go",function(){return u.f}),n.d(e,"goBack",function(){return u.g}),n.d(e,"goForward",function(){return u.h}),n.d(e,"routerActions",function(){return u.i});var c=n(30);n.d(e,"routerMiddleware",function(){return c.a});var s=n.i(r.a)(a.a),p=n.i(o.a)(a.a),f=n.i(i.a)(a.a),l=f.getLocation,d=f.getAction,h=f.getHash,y=f.getSearch,v=f.createMatchSelector},function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}e.a=r},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}e.a=r},function(t,e,n){"use strict";var r=n(7),o=n.n(r),i=function(){var t=null,e=function(e){return o()(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,r,i){if(null!=t){var a="function"==typeof t?t(e,n):t;"string"==typeof a?"function"==typeof r?r(a,i):(o()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},r=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return r.push(n),function(){e=!1,r=r.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach(function(t){return t.apply(void 0,e)})}}};e.a=i},function(t,e,n){"use strict";var r=(n(34),n(35),n(36));n.d(e,"d",function(){return r.a});var o=n(6);n.d(e,"b",function(){return o.a}),n.d(e,"c",function(){return o.b});var i=n(4);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),o=n.n(r),i=o.a.createContext(null)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),u=n.n(a),c=n(2),s=n.n(c),p=n(0),f=n.n(p),l=n(1),d=n.n(l),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y=function(t){function e(){var n,i,a;r(this,e);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=i=o(this,t.call.apply(t,[this].concat(c))),i.state={match:i.computeMatch(i.props.history.location.pathname)},a=n,o(i,a)}return i(e,t),e.prototype.getChildContext=function(){return{router:h({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},e.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.children,r=e.history;s()(null==n||1===f.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){console.log("react-router: history changed, match",t.computeMatch(r.location.pathname)),console.log("history",r),t.setState({match:t.computeMatch(r.location.pathname)})})},e.prototype.componentWillReceiveProps=function(t){u()(this.props.history===t.history,"You cannot change <Router history>")},e.prototype.componentWillUnmount=function(){console.log("react-router: unlisten"),this.unlisten()},e.prototype.componentWillUpdate=function(t,e){return console.log("react-router: componentWillUpdate"),console.log("prevProps",t),console.log("nextProps",e),!1},e.prototype.render=function(){console.log("react-router: render Router");var t=this.props.children;return t?f.a.Children.only(t):null},e}(f.a.Component);y.propTypes={history:d.a.object.isRequired,children:d.a.node},y.contextTypes={router:d.a.object},y.childContextTypes={router:d.a.object.isRequired},e.a=y},function(t,e,n){"use strict";var r=n(19),o=n.n(r),i={},a=0,u=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=i[n]||(i[n]={});if(r[t])return r[t];var u=[],c=o()(t,u,e),s={re:c,keys:u};return a<1e4&&(r[t]=s,a++),s},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof e&&(e={path:e});var r=e,o=r.path,i=r.exact,a=void 0!==i&&i,c=r.strict,s=void 0!==c&&c,p=r.sensitive,f=void 0!==p&&p;if(null==o)return n;var l=u(o,{end:a,strict:s,sensitive:f}),d=l.re,h=l.keys,y=d.exec(t);if(!y)return null;var v=y[0],m=y.slice(1),b=t===v;return a&&!b?null:{path:o,url:"/"===o&&""===v?"/":v,isExact:b,params:h.reduce(function(t,e,n){return t[e.name]=m[n],t},{})}};e.a=c},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}e.a=r},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(27),i=function(t){var e=t.getIn,i=t.toJS,a=function(t){return null!=t&&"object"===r(t)&&e(t,["location"])&&e(t,["action"])},u=function(t){var n=i(e(t,["router"]));if(!a(n))throw'Could not find router reducer in state tree, it must be mounted under "router"';return n},c=function(t){return i(e(u(t),["location"]))};return{getLocation:c,getAction:function(t){return i(e(u(t),["action"]))},getRouter:u,getSearch:function(t){return i(e(u(t),["location","search"]))},getHash:function(t){return i(e(u(t),["location","hash"]))},createMatchSelector:function(t){var e=null,r=null;return function(i){var a=c(i)||{},u=a.pathname;if(u===e)return r;e=u;var s=n.i(o.a)(u,t);return s&&r&&s.url===r.url||(r=s),r}}}};e.a=i},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"f",function(){return u}),n.d(e,"g",function(){return c}),n.d(e,"b",function(){return s}),n.d(e,"h",function(){return p});var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},i=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},a=function(t,e){return e(window.confirm(t))},u=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},c=function(){return-1===window.navigator.userAgent.indexOf("Trident")},s=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},p=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){function r(t,e){for(var n,r=[],o=0,i=0,a="",u=e&&e.delimiter||"/";null!=(n=b.exec(t));){var p=n[0],f=n[1],l=n.index;if(a+=t.slice(i,l),i=l+p.length,f)a+=f[1];else{var d=t[i],h=n[2],y=n[3],v=n[4],m=n[5],g=n[6],w=n[7];a&&(r.push(a),a="");var O=null!=h&&null!=d&&d!==h,P="+"===g||"*"===g,x="?"===g||"*"===g,j=n[2]||u,S=v||m;r.push({name:y||o++,prefix:h||"",delimiter:j,optional:x,repeat:P,partial:O,asterisk:!!w,pattern:S?s(S):w?".*":"[^"+c(j)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&r.push(a),r}function o(t,e){return u(r(t,e))}function i(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function u(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",u=n||{},c=r||{},s=c.pretty?i:encodeURIComponent,p=0;p<t.length;p++){var f=t[p];if("string"!=typeof f){var l,d=u[f.name];if(null==d){if(f.optional){f.partial&&(o+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(m(d)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(l=s(d[h]),!e[p].test(l))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(l)+"`");o+=(0===h?f.prefix:f.delimiter)+l}}else{if(l=f.asterisk?a(d):s(d),!e[p].test(l))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+l+'"');o+=f.prefix+l}}else o+=f}return o}}function c(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function s(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function p(t,e){return t.keys=e,t}function f(t){return t.sensitive?"":"i"}function l(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return p(t,e)}function d(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(v(t[o],e,n).source);return p(new RegExp("(?:"+r.join("|")+")",f(n)),e)}function h(t,e,n){return y(r(t,n),e,n)}function y(t,e,n){m(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",a=0;a<t.length;a++){var u=t[a];if("string"==typeof u)i+=c(u);else{var s=c(u.prefix),l="(?:"+u.pattern+")";e.push(u),u.repeat&&(l+="(?:"+s+l+")*"),l=u.optional?u.partial?s+"("+l+")?":"(?:"+s+"("+l+"))?":s+"("+l+")",i+=l}}var d=c(n.delimiter||"/"),h=i.slice(-d.length)===d;return r||(i=(h?i.slice(0,-d.length):i)+"(?:"+d+"(?=$))?"),i+=o?"$":r&&h?"":"(?="+d+"|$)",p(new RegExp("^"+i,f(n)),e)}function v(t,e,n){return m(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?l(t,e):m(t)?d(t,e,n):h(t,e,n)}var m=n(39);t.exports=v,t.exports.parse=r,t.exports.compile=o,t.exports.tokensToFunction=u,t.exports.tokensToRegExp=y;var b=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e,n){"use strict";t.exports=n(42)},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e={});var r=e,c=r.getDisplayName,p=void 0===c?function(t){return"ConnectAdvanced("+t+")"}:c,h=r.methodName,v=void 0===h?"connectAdvanced":h,m=r.renderCountProp,b=void 0===m?void 0:m,g=r.shouldHandleStateChanges,w=void 0===g||g,O=r.storeKey,P=void 0===O?"store":O,x=r.withRef,j=void 0!==x&&x,S=r.forwardRef,R=void 0!==S&&S,C=r.context,E=void 0===C?y.a:C,T=n.i(u.a)(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);f()(void 0===b,"renderCountProp is removed. render counting is built into the latest React dev tools profiling extension"),f()(!j,"withRef is removed. To access the wrapped instance, use a ref on the connected component");var _="To use a custom Redux store for specific components,  create a custom React context with React.createContext(), and pass the context object to React-Redux's Provider and specific components like:  <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect";f()("store"===P,"storeKey has been removed and does not do anything. "+_);var k=E;return function(e){function r(){var e,n,r,o,i;return function(a,u,c){if(m&&e===u&&n===a)return r;c!==o&&(o=c,i=t(c.dispatch,y)),e=u,n=a;var s=i(a,u);return r===s?r:r=s}}function u(){var t,e,r;return function(o,i){return o===t&&i===e||(t=o,e=i,r=d.a.createElement(O,n.i(a.a)({},o,{ref:i}))),r}}var c=e.displayName||e.name||"Component",h=p(c),y=n.i(a.a)({},T,{getDisplayName:p,methodName:v,renderCountProp:b,shouldHandleStateChanges:w,storeKey:P,displayName:h,wrappedComponentName:c,WrappedComponent:e}),m=T.pure,g=l.Component,O=e;m&&(g=l.PureComponent);var x=function(t){function e(e){var o;return o=t.call(this,e)||this,f()(R?!e.wrapperProps[P]:!e[P],"Passing redux store in props has been removed and does not do anything. "+_),o.selectDerivedProps=r(),o.selectChildElement=u(),o.renderWrappedComponent=o.renderWrappedComponent.bind(n.i(i.a)(n.i(i.a)(o))),o}n.i(o.a)(e,t);var c=e.prototype;return c.renderWrappedComponent=function(t){f()(t,'Could not find "store" in the context of "'+h+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+h+" in connect options.");var e,r=t.storeState,o=t.store,i=this.props;R&&(i=this.props.wrapperProps,e=this.props.forwardedRef);var u=this.selectDerivedProps(r,i,o);return m?this.selectChildElement(u,e):d.a.createElement(O,n.i(a.a)({},u,{ref:e}))},c.render=function(){var t=this.props.context||k;return d.a.createElement(t.Consumer,null,this.renderWrappedComponent)},e}(g);if(x.WrappedComponent=e,x.displayName=h,R){var j=d.a.forwardRef(function(t,e){return d.a.createElement(x,{wrapperProps:t,forwardedRef:e})});return j.displayName=h,j.WrappedComponent=e,s()(j,e)}return s()(x,e)}}e.a=r;var o=n(16),i=n(28),a=n(9),u=n(10),c=n(53),s=n.n(c),p=n(2),f=n.n(p),l=n(0),d=n.n(l),h=n(20),y=(n.n(h),n(13))},function(t,e,n){"use strict";function r(t){return function(e,n){function r(){return o}var o=t(e,n);return r.dependsOnOwnProps=!1,r}}function o(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function i(t,e){return function(e,n){var r=(n.displayName,function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)});return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=o(t);var i=r(e,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=o(i),i=r(e,n)),i},r}}e.b=r,e.a=i,n(23)},function(t,e,n){"use strict";n(51),n(24)},function(t,e,n){"use strict";function r(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.a=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),u=n.n(a),c=n(2),s=n.n(c),p=n(0),f=n.n(p),l=n(1),d=n.n(l),h=n(15),y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(t){return 0===f.a.Children.count(t)},m=function(t){function e(){var n,i,a;r(this,e);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=i=o(this,t.call.apply(t,[this].concat(c))),i.state={match:i.computeMatch(i.props,i.context.router)},a=n,o(i,a)}return i(e,t),e.prototype.getChildContext=function(){return{router:y({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},e.prototype.computeMatch=function(t,e){var r=t.computedMatch,o=t.location,i=t.path,a=t.strict,u=t.exact,c=t.sensitive;if(r)return r;s()(e,"You should not use <Route> or withRouter() outside a <Router>");var p=e.route,f=(o||p.location).pathname;return n.i(h.a)(f,{path:i,strict:a,exact:u,sensitive:c},p.match)},e.prototype.componentWillMount=function(){u()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),u()(!(this.props.component&&this.props.children&&!v(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),u()(!(this.props.render&&this.props.children&&!v(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},e.prototype.componentWillReceiveProps=function(t,e){u()(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),u()(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},e.prototype.render=function(){var t=this.state.match,e=this.props,n=e.children,r=e.component,o=e.render,i=this.context.router,a=i.history,u=i.route,c=i.staticContext,s=this.props.location||u.location,p={match:t,location:s,history:a,staticContext:c};return r?t?f.a.createElement(r,p):null:o?t?o(p):null:"function"==typeof n?n(p):n&&!v(n)?f.a.Children.only(n):null},e}(f.a.Component);m.propTypes={computedMatch:d.a.object,path:d.a.string,exact:d.a.bool,strict:d.a.bool,sensitive:d.a.bool,component:d.a.func,render:d.a.func,children:d.a.oneOfType([d.a.func,d.a.node]),location:d.a.object},m.contextTypes={router:d.a.shape({history:d.a.object.isRequired,route:d.a.object.isRequired,staticContext:d.a.object})},m.childContextTypes={router:d.a.object.isRequired},e.a=m},function(t,e,n){"use strict";var r=n(19),o=n.n(r),i={},a=0,u=function(t){var e=t,n=i[e]||(i[e]={});if(n[t])return n[t];var r=o.a.compile(t);return a<1e4&&(n[t]=r,a++),r},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===t?t:u(t)(e,{pretty:!0})};e.a=c},function(t,e,n){"use strict";var r=(n(54),n(55),n(56),n(25),n(14));n.d(e,"b",function(){return r.a});var o=(n(57),n(58),n(26),n(15));n.d(e,"a",function(){return o.a}),n(59)},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.a=r},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=n(0),h=n.n(d),y=n(1),v=n.n(y),m=n(50),b=n(27),g=n(5),w=n(17),O=function(t){var e=n.i(w.a)(t),r=e.getLocation,a=function(t){function e(t){var n;i(this,e),n=c(this,p(e).call(this,t));var o=t.store,a=t.history,u=t.onLocationChanged;n.inTimeTravelling=!1,n.unsubscribe=o.subscribe(function(){var t=r(o.getState()),e=t.pathname,i=t.search,u=t.hash,c=a.location,s=c.pathname,p=c.search,f=c.hash;s===e&&p===i&&f===u||(n.inTimeTravelling=!0,a.push({pathname:e,search:i,hash:u}))});var s=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.inTimeTravelling?n.inTimeTravelling=!1:u(t,e,r)};return n.unlisten=a.listen(s),s(a.location,a.action,!0),n}return f(e,t),u(e,[{key:"componentWillUnmount",value:function(){this.unlisten(),this.unsubscribe()}},{key:"render",value:function(){var t=this.props,e=t.history,n=t.children;return h.a.createElement(b.b,{history:e},n)}}]),e}(d.PureComponent);a.propTypes={store:v.a.shape({getState:v.a.func.isRequired,subscribe:v.a.func.isRequired}).isRequired,history:v.a.shape({action:v.a.string.isRequired,listen:v.a.func.isRequired,location:v.a.object.isRequired,push:v.a.func.isRequired}).isRequired,basename:v.a.string,children:v.a.oneOfType([v.a.func,v.a.node]),onLocationChanged:v.a.func.isRequired};var s=function(t){return{onLocationChanged:function(e,r){return t(n.i(g.c)(e,r))}}},l=function(t){var e=t.context||m.a;if(null==e)throw"Please upgrade to react-redux v6";return h.a.createElement(e.Consumer,null,function(e){var n=e.store;return h.a.createElement(a,o({store:n},t))})};return l.propTypes={context:v.a.object},n.i(m.b)(null,s)(l)};e.a=O},function(t,e,n){"use strict";function r(t){return a(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var u=n(5),c=function(t){return function(e){return function(e){return function(n){if(n.type!==u.b)return e(n);var o=n.payload,i=o.method,a=o.args;t[i].apply(t,r(a))}}}};e.a=c},function(t,e,n){"use strict";var r=n(5),o=function(t){var e=t.fromJS,n=t.merge;return function(t){var o=e({location:t.location,action:t.action});return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.type,u=i.payload;if(a===r.a){var c=u.location,s=u.action;return u.isFirstRendering?t:n(t,{location:e(c),action:s})}return t}}};e.a=o},function(t,e,n){"use strict";var r=function(t,e){if(!t)return t;var n=e.length;if(n){for(var r=t,o=0;o<n&&r;++o)r=r[e[o]];return r}};e.a=r},function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(32),a={fromJS:function(t){return t},getIn:i.a,merge:function(t,e){return r({},t,e)},toJS:function(t){return t}};e.a=a},function(t,e,n){"use strict";var r=n(7),o=(n.n(r),n(2));n.n(o),n(6),n(4),n(11),n(18),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(t,e,n){"use strict";var r=n(7),o=(n.n(r),n(2)),i=(n.n(o),n(6),n(4));n(11),n(18),Object.assign,i.c,i.d,i.d,i.d},function(t,e,n){"use strict";var r=n(7),o=n.n(r),i=n(4),a=n(6),u=n(11),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(t,e,n){return Math.min(Math.max(t,e),n)},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,r=t.initialEntries,f=void 0===r?["/"]:r,l=t.initialIndex,d=void 0===l?0:l,h=t.keyLength,y=void 0===h?6:h,v=n.i(u.a)(),m=function(t){s(_,t),_.length=_.entries.length,v.notifyListeners(_.location,_.action)},b=function(){return Math.random().toString(36).substr(2,y)},g=p(d,0,f.length-1),w=f.map(function(t){return"string"==typeof t?n.i(a.a)(t,void 0,b()):n.i(a.a)(t,void 0,t.key||b())}),O=i.a,P=function(t,r){o()(!("object"===(void 0===t?"undefined":c(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=n.i(a.a)(t,r,b(),_.location);v.confirmTransitionTo(i,"PUSH",e,function(t){if(t){var e=_.index,n=e+1,r=_.entries.slice(0);r.length>n?r.splice(n,r.length-n,i):r.push(i),m({action:"PUSH",location:i,index:n,entries:r})}})},x=function(t,r){o()(!("object"===(void 0===t?"undefined":c(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=n.i(a.a)(t,r,b(),_.location);v.confirmTransitionTo(i,"REPLACE",e,function(t){t&&(_.entries[_.index]=i,m({action:"REPLACE",location:i}))})},j=function(t){var n=p(_.index+t,0,_.entries.length-1),r=_.entries[n];v.confirmTransitionTo(r,"POP",e,function(t){t?m({action:"POP",location:r,index:n}):m()})},S=function(){return j(-1)},R=function(){return j(1)},C=function(t){var e=_.index+t;return e>=0&&e<_.entries.length},E=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v.setPrompt(t)},T=function(t){return v.appendListener(t)},_={length:w.length,action:"POP",location:w[g],index:g,entries:w,createHref:O,push:P,replace:x,go:j,goBack:S,goForward:R,canGo:C,block:E,listen:T};return _};e.a=f},function(t,e,n){"use strict";function r(t,e,n){if("string"!=typeof e){if(f){var l=p(e);l&&l!==f&&r(t,l,n)}var d=u(e);c&&(d=d.concat(c(e)));for(var h=0;h<d.length;++h){var y=d[h];if(!(o[y]||i[y]||n&&n[y])){var v=s(e,y);try{a(t,y,v)}catch(t){}}}return t}return t}var o={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,u=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=p&&p(Object);t.exports=r},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,u,c=r(t),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var p in n)i.call(n,p)&&(c[p]=n[p]);if(o){u=o(n);for(var f=0;f<u.length;f++)a.call(n,u[f])&&(c[u[f]]=n[u[f]])}}return c}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(){}var o=n(41);t.exports=function(){function t(t,e,n,r,i,a){if(a!==o){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw (u.name="Invariant Violation", u)}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function r(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case a:switch(t=t.type){case d:case h:case c:case p:case s:return t;default:switch(t=t&&t.$$typeof){case l:case y:case f:return t;default:return e}}case u:return e}}}function o(t){return r(t)===h}/** @license React v16.6.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,u=i?Symbol.for("react.portal"):60106,c=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,p=i?Symbol.for("react.profiler"):60114,f=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,y=i?Symbol.for("react.forward_ref"):60112,v=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,b=i?Symbol.for("react.lazy"):60116;e.typeOf=r,e.AsyncMode=d,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=f,e.Element=a,e.ForwardRef=y,e.Fragment=c,e.Profiler=p,e.Portal=u,e.StrictMode=s,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===c||t===h||t===p||t===s||t===v||"object"==typeof t&&null!==t&&(t.$$typeof===b||t.$$typeof===m||t.$$typeof===f||t.$$typeof===l||t.$$typeof===y)},e.isAsyncMode=function(t){return o(t)||r(t)===d},e.isConcurrentMode=o,e.isContextConsumer=function(t){return r(t)===l},e.isContextProvider=function(t){return r(t)===f},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===a},e.isForwardRef=function(t){return r(t)===y},e.isFragment=function(t){return r(t)===c},e.isProfiler=function(t){return r(t)===p},e.isPortal=function(t){return r(t)===u},e.isStrictMode=function(t){return r(t)===s}},function(t,e,n){"use strict";var r=n(16),o=n(0),i=n.n(o),a=n(1),u=n.n(a),c=n(13);((function(t){function e(e){var n;n=t.call(this,e)||this;var r=e.store;return n.state={storeState:r.getState(),store:r},n}n.i(r.a)(e,t);var o=e.prototype;return o.componentDidMount=function(){this._isMounted=!0,this.subscribe()},o.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this._isMounted=!1},o.componentDidUpdate=function(t){this.props.store!==t.store&&(this.unsubscribe&&this.unsubscribe(),this.subscribe())},o.subscribe=function(){var t=this,e=this.props.store;this.unsubscribe=e.subscribe(function(){var n=e.getState();t._isMounted&&t.setState(function(t){return t.storeState===n?null:{storeState:n}})});var n=e.getState();n!==this.state.storeState&&this.setState({storeState:n})},o.render=function(){console.log("rendering");var t=this.props.context||c.a;return console.log("state",this.state),i.a.createElement(t.Provider,{value:this.state},this.props.children)},e})(o.Component)).propTypes={store:u.a.shape({subscribe:u.a.func.isRequired,dispatch:u.a.func.isRequired,getState:u.a.func.isRequired}),context:u.a.object,children:u.a.any}},function(t,e,n){"use strict";function r(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function o(t,e){return t===e}var i=n(9),a=n(10),u=n(21),c=n(52),s=n(45),p=n(46),f=n(47),l=n(48);e.a=function(t){var e={},d=e.connectHOC,h=void 0===d?u.a:d,y=e.mapStateToPropsFactories,v=void 0===y?p.a:y,m=e.mapDispatchToPropsFactories,b=void 0===m?s.a:m,g=e.mergePropsFactories,w=void 0===g?f.a:g,O=e.selectorFactory,P=void 0===O?l.a:O;return function(t,e,u,s){void 0===s&&(s={});var p=s,f=p.pure,l=void 0===f||f,d=p.areStatesEqual,y=void 0===d?o:d,m=p.areOwnPropsEqual,g=void 0===m?c.a:m,O=p.areStatePropsEqual,x=void 0===O?c.a:O,j=p.areMergedPropsEqual,S=void 0===j?c.a:j,R=n.i(a.a)(p,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=r(t,v,"mapStateToProps"),E=r(e,b,"mapDispatchToProps"),T=r(u,w,"mergeProps");return h(P,n.i(i.a)({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:C,initMapDispatchToProps:E,initMergeProps:T,pure:l,areStatesEqual:y,areOwnPropsEqual:g,areStatePropsEqual:x,areMergedPropsEqual:S},R))}}()},function(t,e,n){"use strict";function r(t){return"function"==typeof t?n.i(u.a)(t,"mapDispatchToProps"):void 0}function o(t){return t?void 0:n.i(u.b)(function(t){return{dispatch:t}})}function i(t){return t&&"object"==typeof t?n.i(u.b)(function(e){return n.i(a.a)(t,e)}):void 0}var a=n(61),u=n(22);e.a=[r,o,i]},function(t,e,n){"use strict";function r(t){return"function"==typeof t?n.i(i.a)(t,"mapStateToProps"):void 0}function o(t){return t?void 0:n.i(i.b)(function(){return{}})}var i=n(22);e.a=[r,o]},function(t,e,n){"use strict";function r(t,e,r){return n.i(u.a)({},r,t,e)}function o(t){return function(e,n){var r,o=(n.displayName,n.pure),i=n.areMergedPropsEqual,a=!1;return function(e,n,u){var c=t(e,n,u);return a?o&&i(c,r)||(r=c):(a=!0,r=c),r}}}function i(t){return"function"==typeof t?o(t):void 0}function a(t){return t?void 0:function(){return r}}var u=n(9);n(23),e.a=[i,a]},function(t,e,n){"use strict";function r(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function o(t,e,n,r,o){function i(o,i){return p=o,f=i,l=t(p,f),d=e(r,f),h=n(l,d,f),b=!0,h}function a(){return l=t(p,f),e.dependsOnOwnProps&&(d=e(r,f)),h=n(l,d,f)}function u(){return t.dependsOnOwnProps&&(l=t(p,f)),e.dependsOnOwnProps&&(d=e(r,f)),h=n(l,d,f)}function c(){var e=t(p,f),r=!m(e,l);return l=e,r&&(h=n(l,d,f)),h}function s(t,e){var n=!v(e,f),r=!y(t,p);return p=t,f=e,n&&r?a():n?u():r?c():h}var p,f,l,d,h,y=o.areStatesEqual,v=o.areOwnPropsEqual,m=o.areStatePropsEqual,b=!1;return function(t,e){return b?s(t,e):i(t,e)}}function i(t,e){var i=e.initMapStateToProps,u=e.initMapDispatchToProps,c=e.initMergeProps,s=n.i(a.a)(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),p=i(t,s),f=u(t,s),l=c(t,s);return(s.pure?o:r)(p,f,l,t,s)}e.a=i;var a=n(10);n(49)},function(t,e,n){"use strict";n(24)},function(t,e,n){"use strict";var r=(n(43),n(21),n(13)),o=n(44);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function r(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}e.a=r},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!==t&&e!==e}function o(t,e){if(r(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}e.a=o;var i=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function r(t,e,n){if("string"!=typeof e){if(h){var o=d(e);o&&o!==h&&r(t,o,n)}var u=p(e);f&&(u=u.concat(f(e)));for(var y=c[t.$$typeof]||i,v=c[e.$$typeof]||i,m=0;m<u.length;++m){var b=u[m];if(!(a[b]||n&&n[b]||v&&v[b]||y&&y[b])){var g=l(e,b);try{s(t,b,g)}catch(t){}}}return t}return t}var o=n(20),i=(n(0),{childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0}),a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u={$$typeof:!0,render:!0},c={};c[o.ForwardRef]=u;var s=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),u=n.n(a),c=n(0),s=n.n(c),p=n(1),f=n.n(p),l=n(12),d=n(14);((function(t){function e(){var i,a,u;r(this,e);for(var c=arguments.length,s=Array(c),p=0;p<c;p++)s[p]=arguments[p];return i=a=o(this,t.call.apply(t,[this].concat(s))),a.history=n.i(l.d)(a.props),u=i,o(a,u)}return i(e,t),e.prototype.componentWillMount=function(){u()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},e.prototype.render=function(){return s.a.createElement(d.a,{history:this.history,children:this.props.children})},e})(s.a.Component)).propTypes={initialEntries:f.a.array,initialIndex:f.a.number,getUserConfirmation:f.a.func,keyLength:f.a.number,children:f.a.node}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),u=n.n(a),c=n(1),s=n.n(c),p=n(2),f=n.n(p),l=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(u.a.Component);l.propTypes={when:s.a.bool,message:s.a.oneOfType([s.a.func,s.a.string]).isRequired},l.defaultProps={when:!0},l.contextTypes={router:s.a.shape({history:s.a.shape({block:s.a.func.isRequired}).isRequired}).isRequired}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),u=n.n(a),c=n(1),s=n.n(c),p=n(3),f=n.n(p),l=n(2),d=n.n(l),h=n(12),y=n(26),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=n.i(h.b)(t.to),r=n.i(h.b)(this.props.to);if(n.i(h.c)(e,r))return void f()(!1,"You tried to redirect to the same route you're currently on: \""+r.pathname+r.search+'"');this.perform()},e.prototype.computeTo=function(t){var e=t.computedMatch,r=t.to;return e?"string"==typeof r?n.i(y.a)(r,e.params):v({},r,{pathname:n.i(y.a)(r.pathname,e.params)}):r},e.prototype.perform=function(){var t=this.context.router.history,e=this.props.push,n=this.computeTo(this.props);e?t.push(n):t.replace(n)},e.prototype.render=function(){return null},e}(u.a.Component);m.propTypes={computedMatch:s.a.object,push:s.a.bool,from:s.a.string,to:s.a.oneOfType([s.a.string,s.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:s.a.shape({history:s.a.shape({push:s.a.func.isRequired,replace:s.a.func.isRequired}).isRequired,staticContext:s.a.object}).isRequired}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(3),c=n.n(u),s=n(2),p=n.n(s),f=n(0),l=n.n(f),d=n(1),h=n.n(d),y=n(12),v=n(14),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(t){return"/"===t.charAt(0)?t:"/"+t},g=function(t,e){return t?m({},e,{pathname:b(t)+e.pathname}):e},w=function(t,e){if(!t)return e;var n=b(t);return 0!==e.pathname.indexOf(n)?e:m({},e,{pathname:e.pathname.substr(n.length)})},O=function(t){return"string"==typeof t?t:n.i(y.a)(t)},P=function(t){return function(){p()(!1,"You cannot %s with <StaticRouter>",t)}},x=function(){},j=function(t){function e(){var r,a,u;o(this,e);for(var c=arguments.length,s=Array(c),p=0;p<c;p++)s[p]=arguments[p];return r=a=i(this,t.call.apply(t,[this].concat(s))),a.createHref=function(t){return b(a.props.basename+O(t))},a.handlePush=function(t){var e=a.props,r=e.basename,o=e.context;o.action="PUSH",o.location=g(r,n.i(y.b)(t)),o.url=O(o.location)},a.handleReplace=function(t){var e=a.props,r=e.basename,o=e.context;o.action="REPLACE",o.location=g(r,n.i(y.b)(t)),o.url=O(o.location)},a.handleListen=function(){return x},a.handleBlock=function(){return x},u=r,i(a,u)}return a(e,t),e.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},e.prototype.componentWillMount=function(){c()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},e.prototype.render=function(){var t=this.props,e=t.basename,o=(t.context,t.location),i=r(t,["basename","context","location"]),a={createHref:this.createHref,action:"POP",location:w(e,n.i(y.b)(o)),push:this.handlePush,replace:this.handleReplace,go:P("go"),goBack:P("goBack"),goForward:P("goForward"),listen:this.handleListen,block:this.handleBlock};return l.a.createElement(v.a,m({},i,{history:a}))},e}(l.a.Component);j.propTypes={basename:h.a.string,context:h.a.object.isRequired,location:h.a.oneOfType([h.a.string,h.a.object])},j.defaultProps={basename:"",location:"/"},j.childContextTypes={router:h.a.object.isRequired}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),u=n.n(a),c=n(1),s=n.n(c),p=n(3),f=n.n(p),l=n(2),d=n.n(l),h=n(15),y=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Switch> outside a <Router>")},e.prototype.componentWillReceiveProps=function(t){f()(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),f()(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},e.prototype.render=function(){var t=this.context.router.route,e=this.props.children,r=this.props.location||t.location,o=void 0,i=void 0;return u.a.Children.forEach(e,function(e){if(null==o&&u.a.isValidElement(e)){var a=e.props,c=a.path,s=a.exact,p=a.strict,f=a.sensitive,l=a.from,d=c||l;i=e,o=n.i(h.a)(r.pathname,{path:d,exact:s,strict:p,sensitive:f},t.match)}}),o?u.a.cloneElement(i,{location:r,computedMatch:o}):null},e}(u.a.Component);y.contextTypes={router:s.a.shape({route:s.a.object.isRequired}).isRequired},y.propTypes={children:s.a.node,location:s.a.object}},function(t,e,n){"use strict";var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),n(37));n.n(i),n(25),Object.assign},function(t,e,n){"use strict";function r(t,e,n,r,o,i,a,u){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,u],s=0;t=Error(e.replace(/%s/g,function(){return c[s++]})),t.name="Invariant Violation"}throw (t.framesToPop=1, t)}}function o(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=0;o<e;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);r(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n){this.props=t,this.context=e,this.refs=L,this.updater=n||$}function a(){}function u(t,e,n){this.props=t,this.context=e,this.refs=L,this.updater=n||$}function c(t,e,n){var r=void 0,o={},i=null,a=null;if(null!=e)for(r in (void 0!==e.ref&&(a=e.ref), void 0!==e.key&&(i=""+e.key), e))U.call(e,r)&&!F.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),s=0;s<u;s++)c[s]=arguments[s+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:P,type:t,key:i,ref:a,props:o,_owner:D.current}}function s(t,e){return{$$typeof:P,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function p(t){return"object"==typeof t&&null!==t&&t.$$typeof===P}function f(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function l(t,e,n,r){if(W.length){var o=W.pop();return o.result=t,o.keyPrefix=e,o.func=n,o.context=r,o.count=0,o}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function d(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>W.length&&W.push(t)}function h(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case P:case x:a=!0}}if(a)return n(r,t,""===e?"."+v(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var u=0;u<t.length;u++){i=t[u];var c=e+v(i,u);a+=h(i,c,n,r)}else if(null===t||"object"!=typeof t?c=null:(c=q&&t[q]||t["@@iterator"],c="function"==typeof c?c:null),"function"==typeof c)for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=e+v(i,u++),a+=h(i,c,n,r);else"object"===i&&(n=""+t,o("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function y(t,e,n){return null==t?0:h(t,"",e,n)}function v(t,e){return"object"==typeof t&&null!==t&&null!=t.key?f(t.key):e.toString(36)}function m(t,e){t.func.call(t.context,e,t.count++)}function b(t,e,n){var r=t.result,o=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?g(t,r,n,function(t){return t}):null!=t&&(p(t)&&(t=s(t,o+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+n)),r.push(t))}function g(t,e,n,r,o){var i="";null!=n&&(i=(""+n).replace(I,"$&/")+"/"),e=l(e,i,r,o),y(t,b,e),d(e)}/** @license React v16.6.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var w=n(38),O="function"==typeof Symbol&&Symbol.for,P=O?Symbol.for("react.element"):60103,x=O?Symbol.for("react.portal"):60106,j=O?Symbol.for("react.fragment"):60107,S=O?Symbol.for("react.strict_mode"):60108,R=O?Symbol.for("react.profiler"):60114,C=O?Symbol.for("react.provider"):60109,E=O?Symbol.for("react.context"):60110,T=O?Symbol.for("react.concurrent_mode"):60111,_=O?Symbol.for("react.forward_ref"):60112,k=O?Symbol.for("react.suspense"):60113,A=O?Symbol.for("react.memo"):60115,M=O?Symbol.for("react.lazy"):60116,q="function"==typeof Symbol&&Symbol.iterator,$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L={};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&o("85"),this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},a.prototype=i.prototype;var N=u.prototype=new a;N.constructor=u,w(N,i.prototype),N.isPureReactComponent=!0;var D={current:null,currentDispatcher:null},U=Object.prototype.hasOwnProperty,F={key:!0,ref:!0,__self:!0,__source:!0},I=/\/+/g,W=[],H={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return g(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=l(null,null,e,n),y(t,m,e),d(e)},count:function(t){return y(t,function(){return null},null)},toArray:function(t){var e=[];return g(t,e,null,function(t){return t}),e},only:function(t){return p(t)||o("143"),t}},createRef:function(){return{current:null}},Component:i,PureComponent:u,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:E,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,Provider:null,Consumer:null},t.Provider={$$typeof:C,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:_,render:t}},lazy:function(t){return{$$typeof:M,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:A,type:t,compare:void 0===e?null:e}},Fragment:j,StrictMode:S,Suspense:k,createElement:c,cloneElement:function(t,e,n){(null===t||void 0===t)&&o("267",t);var r=void 0,i=w({},t.props),a=t.key,u=t.ref,c=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,c=D.current),void 0!==e.key&&(a=""+e.key);var s=void 0;t.type&&t.type.defaultProps&&(s=t.type.defaultProps);for(r in e)U.call(e,r)&&!F.hasOwnProperty(r)&&(i[r]=void 0===e[r]&&void 0!==s?s[r]:e[r])}if(1==(r=arguments.length-2))i.children=n;else if(1<r){s=Array(r);for(var p=0;p<r;p++)s[p]=arguments[p+2];i.children=s}return{$$typeof:P,type:t.type,key:a,ref:u,props:i,_owner:c}},createFactory:function(t){var e=c.bind(null,t);return e.type=t,e},isValidElement:p,version:"16.6.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:D,assign:w}};H.unstable_ConcurrentMode=T,H.unstable_Profiler=R;var Y={default:H},B=Y&&H||Y;t.exports=B.default||B},function(t,e,n){"use strict";function r(t,e){return function(){return e(t.apply(this,arguments))}}function o(t,e){if("function"==typeof t)return r(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),o={},i=0;i<n.length;i++){var a=n[i],u=t[a];"function"==typeof u&&(o[a]=r(u,e))}return o}n.d(e,"a",function(){return o});var i=(n(63),function(){return Math.random().toString(36).substring(7).split("").join(".")});i(),i()},function(t,e,n){"use strict";function r(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],i=e&&e.split("/")||[],a=t&&r(t),u=e&&r(e),c=a||u;if(t&&r(t)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var s=void 0;if(i.length){var p=i[i.length-1];s="."===p||".."===p||""===p}else s=!1;for(var f=0,l=i.length;l>=0;l--){var d=i[l];"."===d?o(i,l):".."===d?(o(i,l),f++):f&&(o(i,l),f--)}if(!c)for(;f--;f)i.unshift("..");!c||""===i[0]||i[0]&&r(i[0])||i.unshift("");var h=i.join("/");return s&&"/"!==h.substr(-1)&&(h+="/"),h}e.a=i},function(t,e,n){"use strict";(function(t,r){var o,i=n(64);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=n.i(i.a)(o);e.a=a}).call(e,n(66),n(67)(t))},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.a=r},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return r(t,e[n])});var n=void 0===t?"undefined":o(t);if(n!==(void 0===e?"undefined":o(e)))return!1;if("object"===n){var i=t.valueOf(),a=e.valueOf();if(i!==t||a!==e)return r(i,a);var u=Object.keys(t),c=Object.keys(e);return u.length===c.length&&u.every(function(n){return r(t[n],e[n])})}return!1}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){n(8),t.exports=n(8)}]);});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('create-class', function (Y) {SM.currentModule = 'create-class';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.createReactClass=e(require("react")):t.createReactClass=e(t.React)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function o(t){return t}function r(t,e,n){function r(t,e){var n=N.hasOwnProperty(e)?N[e]:null;b.hasOwnProperty(e)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function u(t,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var o=t.prototype,i=o.__reactAutoBindPairs;n.hasOwnProperty(c)&&g.mixins(t,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var u=n[a],p=o.hasOwnProperty(a);if(r(p,a),g.hasOwnProperty(a))g[a](t,u);else{var l=N.hasOwnProperty(a),E="function"==typeof u,m=E&&!l&&!p&&!1!==n.autobind;if(m)i.push(a,u),o[a]=u;else if(p){var h=N[a];s(l&&("DEFINE_MANY_MERGED"===h||"DEFINE_MANY"===h),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",h,a),"DEFINE_MANY_MERGED"===h?o[a]=f(o[a],u):"DEFINE_MANY"===h&&(o[a]=d(o[a],u))}else o[a]=u}}}else;}function p(t,e){if(e)for(var n in e){var o=e[n];if(e.hasOwnProperty(n)){var r=n in g;s(!r,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in t;if(i){var a=_.hasOwnProperty(n)?_[n]:null;return s("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=f(t[n],o))}t[n]=o}}}function l(t,e){s(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(s(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function f(t,e){return function(){var n=t.apply(this,arguments),o=e.apply(this,arguments);if(null==n)return o;if(null==o)return n;var r={};return l(r,n),l(r,o),r}}function d(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function E(t,e){var n=e.bind(t);return n}function m(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var o=e[n],r=e[n+1];t[o]=E(t,r)}}function h(t){var e=o(function(t,o,r){this.__reactAutoBindPairs.length&&m(this),this.props=t,this.context=o,this.refs=a,this.updater=r||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;s("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=i});e.prototype=new I,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],y.forEach(u.bind(null,e)),u(e,v),u(e,t),u(e,D),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),s(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in N)e.prototype[r]||(e.prototype[r]=null);return e}var y=[],N={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},g={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)u(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=i({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=i({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=i({},t.propTypes,e)},statics:function(t,e){p(t,e)},autobind:function(){}},v={componentDidMount:function(){this.__isMounted=!0}},D={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},I=function(){};return i(I.prototype,t.prototype,b),h}var i=n(5),a=n(3),s=n(4),c="mixins";t.exports=r},function(e,n){e.exports=t},function(t,e,n){"use strict";var o=n(1),r=n(0);if(void 0===o)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new o.Component).updater;t.exports=r(o.Component,o.isValidElement,i)},function(t,e,n){"use strict";var o={};t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o,i,a,s,c){if(r(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,o,i,a,s,c],l=0;u=new Error(e.replace(/%s/g,function(){return p[l++]})),u.name="Invariant Violation"}throw (u.framesToPop=1, u)}}var r=function(t){};t.exports=o},function(t,e,n){"use strict";function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,c=o(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var p in n)i.call(n,p)&&(c[p]=n[p]);if(r){s=r(n);for(var l=0;l<s.length;l++)a.call(n,s[l])&&(c[s[l]]=n[s[l]])}}return c}}]);});
}());SM.currentModule = null;}, '', {"requires":["react"],"node_modules":true});
YUI.add("focus-visible",(function(e){SM.currentModule="focus-visible";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(e,t){"object"==typeof exports&&void 0!==module?t():"function"==typeof define&&define.amd?define(t):t()}(0,(function(){"use strict";function e(e){var t=!0,n=!1,o=null,d={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function s(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function u(e){t=!1}function c(){document.addEventListener("mousemove",r),document.addEventListener("mousedown",r),document.addEventListener("mouseup",r),document.addEventListener("pointermove",r),document.addEventListener("pointerdown",r),document.addEventListener("pointerup",r),document.addEventListener("touchmove",r),document.addEventListener("touchstart",r),document.addEventListener("touchend",r)}function r(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener("mousemove",r),document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",r),document.removeEventListener("pointermove",r),document.removeEventListener("pointerdown",r),document.removeEventListener("pointerup",r),document.removeEventListener("touchmove",r),document.removeEventListener("touchstart",r),document.removeEventListener("touchend",r))}document.addEventListener("keydown",(function(n){n.metaKey||n.altKey||n.ctrlKey||(i(e.activeElement)&&s(e.activeElement),t=!0)}),!0),document.addEventListener("mousedown",u,!0),document.addEventListener("pointerdown",u,!0),document.addEventListener("touchstart",u,!0),document.addEventListener("visibilitychange",(function(e){"hidden"===document.visibilityState&&(n&&(t=!0),c())}),!0),c(),e.addEventListener("focus",(function(e){var n,o,u;i(e.target)&&(t||(o=(n=e.target).type,"INPUT"===(u=n.tagName)&&d[o]&&!n.readOnly||"TEXTAREA"===u&&!n.readOnly||n.isContentEditable))&&s(e.target)}),!0),e.addEventListener("blur",(function(e){var t;i(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout((function(){n=!1}),100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))}),!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)})),SM.currentModule=null}),"",{requires:[],node_modules:!0,preMinified:!0});
YUI.add("hammerjs",(function(t){SM.currentModule="hammerjs";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(t,e,n,i){"use strict";var r,s=["","webkit","Moz","MS","ms","o"],o=e.createElement("div"),a=Math.round,u=Math.abs,h=Date.now;function c(t,e,n){return setTimeout(g(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(p(t,n[e],n),!0)}function p(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function f(e,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,r,i),e.apply(this,arguments)}}r="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var d=f((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),v=f((function(t,e){return d(t,e,!0)}),"merge","Use `assign`.");function m(t,e,n){var i,s=e.prototype;(i=t.prototype=Object.create(s)).constructor=t,i._super=s,n&&r(i,n)}function g(t,e){return function(){return t.apply(e,arguments)}}function y(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function T(t,e){return void 0===t?e:t}function E(t,e,n){p(_(e),(function(e){t.addEventListener(e,n,!1)}))}function I(t,e,n){p(_(e),(function(e){t.removeEventListener(e,n,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function A(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function C(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var i=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];x(r,o)<0&&i.push(t[s]),r[s]=o,s++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function M(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<s.length;){if((i=(n=s[o])?n+r:e)in t)return i;o++}}var P=1;function D(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}var w="ontouchstart"in t,O=void 0!==M(t,"PointerEvent"),R=w&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=["x","y"],Y=["clientX","clientY"];function N(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&n.handler(e)},this.init()}function X(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,s=1&e&&i-r==0,o=12&e&&i-r==0;n.isFirst=!!s,n.isFinal=!!o,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=F(e)),r>1&&!n.firstMultiple?n.firstMultiple=F(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,a=o?o.center:s.center,c=e.center=q(i);e.timeStamp=h(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=L(a,c),e.distance=H(a,c),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=k(e.deltaX,e.deltaY);var l,p,f=W(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x,e.overallVelocityY=f.y,e.overallVelocity=u(f.x)>u(f.y)?f.x:f.y,e.scale=o?(l=o.pointers,H((p=i)[0],p[1],Y)/H(l[0],l[1],Y)):1,e.rotation=o?function(t,e){return L(e[1],e[0],Y)+L(t[1],t[0],Y)}(o.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,s,o=t.lastInterval||e,a=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(a>25||void 0===o.velocity)){var h=e.deltaX-o.deltaX,c=e.deltaY-o.deltaY,l=W(a,h,c);i=l.x,r=l.y,n=u(l.x)>u(l.y)?l.x:l.y,s=k(h,c),t.lastInterval=e}else n=o.velocity,i=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=s}(n,e);var d=t.element;S(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function F(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:a(t.pointers[n].clientX),clientY:a(t.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:e,center:q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function q(t){var e=t.length;if(1===e)return{x:a(t[0].clientX),y:a(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:a(n/e),y:a(i/e)}}function W(t,e,n){return{x:e/t||0,y:n/t||0}}function k(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function H(t,e,n){n||(n=z);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function L(t,e,n){n||(n=z);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}N.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(D(this.element),this.evWin,this.domHandler)}};var U={mousedown:1,mousemove:2,mouseup:4};function j(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,N.apply(this,arguments)}m(j,N,{handler:function(t){var e=U[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var V={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},G={2:"touch",3:"pen",4:"mouse",5:"kinect"},Z="pointerdown",B="pointermove pointerup pointercancel";function $(){this.evEl=Z,this.evWin=B,N.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(Z="MSPointerDown",B="MSPointerMove MSPointerUp MSPointerCancel"),m($,N,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=V[i],s=G[t.pointerType]||t.pointerType,o="touch"==s,a=x(e,t.pointerId,"pointerId");1&r&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&r&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(a,1))}});var J={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function K(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,N.apply(this,arguments)}function Q(t,e){var n=C(t.touches),i=C(t.changedTouches);return 12&e&&(n=b(n.concat(i),"identifier",!0)),[n,i]}m(K,N,{handler:function(t){var e=J[t.type];if(1===e&&(this.started=!0),this.started){var n=Q.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var tt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function et(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},N.apply(this,arguments)}function nt(t,e){var n=C(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,o=C(t.changedTouches),a=[],u=this.target;if(s=n.filter((function(t){return S(t.target,u)})),1===e)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&a.push(o[r]),12&e&&delete i[o[r].identifier],r++;return a.length?[b(s.concat(a),"identifier",!0),a]:void 0}function it(){N.apply(this,arguments);var t=g(this.handler,this);this.touch=new et(this.manager,t),this.mouse=new j(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function rt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,st.call(this,e)):12&t&&st.call(this,e)}function st(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function ot(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(e-r.x),o=Math.abs(n-r.y);if(s<=25&&o<=25)return!0}return!1}m(et,N,{handler:function(t){var e=tt[t.type],n=nt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),m(it,N,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)rt.call(this,e,n);else if(r&&ot.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var at=M(o.style,"touchAction"),ut=void 0!==at,ht=function(){if(!ut)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){e[i]=!n||t.CSS.supports("touch-action",i)})),e}();function ct(t,e){this.manager=t,this.set(e)}function lt(t){this.options=r({},this.defaults,t||{}),this.id=P++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function ft(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function dt(t,e){var n=e.manager;return n?n.get(t):t}function vt(){lt.apply(this,arguments)}function mt(){vt.apply(this,arguments),this.pX=null,this.pY=null}function gt(){vt.apply(this,arguments)}function yt(){lt.apply(this,arguments),this._timer=null,this._input=null}function Tt(){vt.apply(this,arguments)}function Et(){vt.apply(this,arguments)}function It(){lt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function St(t,e){return(e=e||{}).recognizers=T(e.recognizers,St.defaults.preset),new At(t,e)}function At(t,e){var n;this.options=r({},St.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(O?$:R?et:w?it:j))(n,X),this.touchAction=new ct(this,this.options.touchAction),_t(this,!0),p(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function _t(t,e){var n,i=t.element;i.style&&(p(t.options.cssProps,(function(r,s){n=M(i.style,s),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}ct.prototype={set:function(t){"compute"==t&&(t=this.compute()),ut&&this.manager.element.style&&ht[t]&&(this.manager.element.style[at]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,(function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(A(t,"none"))return"none";var e=A(t,"pan-x"),n=A(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":A(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=A(i,"none")&&!ht.none,s=A(i,"pan-y")&&!ht["pan-y"],o=A(i,"pan-x")&&!ht["pan-x"];if(r){var a=1===t.pointers.length,u=t.distance<2,h=t.deltaTime<250;if(a&&u&&h)return}if(!o||!s)return r||s&&6&n||o&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},lt.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=dt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)||(t=dt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return-1===x(e,t=dt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=dt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+pt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+pt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=r({},t);if(!y(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m(vt,lt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(8&n||!r)?16|e:i||r?4&n?8|e:2&e?4|e:2:32}}),m(mt,vt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(6&e.direction?(r=0===s?1:s<0?2:4,n=s!=this.pX,i=Math.abs(t.deltaX)):(r=0===o?1:o<0?8:16,n=o!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return vt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=ft(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),m(gt,vt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),m(yt,lt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=c((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),m(Tt,vt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),m(Et,vt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return mt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=ft(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(It,lt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&r&&n){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||H(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=c((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=c((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),St.VERSION="2.0.7",St.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Tt,{enable:!1}],[gt,{enable:!1},["rotate"]],[Et,{direction:6}],[mt,{direction:6},["swipe"]],[It],[It,{event:"doubletap",taps:2},["tap"]],[yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},At.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),s++}},get:function(t){if(t instanceof lt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return p(_(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return p(_(t),(function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]})),this}},emit:function(t,n){this.options.domEvents&&function(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}(t,n);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](n),r++}},destroy:function(){this.element&&_t(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(St,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:At,Input:N,TouchAction:ct,TouchInput:et,MouseInput:j,PointerEventInput:$,TouchMouseInput:it,SingleTouchInput:K,Recognizer:lt,AttrRecognizer:vt,Tap:It,Pan:mt,Swipe:Et,Pinch:gt,Rotate:Tt,Press:yt,on:E,off:I,each:p,merge:v,extend:d,assign:r,inherit:m,bindFn:g,prefixed:M}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=St,"function"==typeof define&&define.amd?define((function(){return St})):void 0!==module&&module.exports?module.exports=St:t.Hammer=St}(window,document),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add('history-ext', function (Y) {SM.currentModule = 'history-ext';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.History={})}(this,function(n){"use strict";function S(){return(S=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n}).apply(this,arguments)}var e="Invariant failed";function H(n,t){if(!n)throw new Error(e)}function d(n){return"/"===n.charAt(0)}function v(n,t){for(var e=t,o=e+1,i=n.length;o<i;e+=1,o+=1)n[e]=n[o];n.pop()}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function U(n){return"/"===n.charAt(0)?n:"/"+n}function t(n){return"/"===n.charAt(0)?n.substr(1):n}function j(n,t){return e=n,new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)?n.substr(t.length):n;var e}function C(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n}function r(n){var t=n||"/",e="",o="",i=t.indexOf("#");-1!==i&&(o=t.substr(i),t=t.substr(0,i));var r=t.indexOf("?");return-1!==r&&(e=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===e?"":e,hash:"#"===o?"":o}}function I(n){var t=n.pathname,e=n.search,o=n.hash,i=t||"/";return e&&"?"!==e&&(i+="?"===e.charAt(0)?e:"?"+e),o&&"#"!==o&&(i+="#"===o.charAt(0)?o:"#"+o),i}function R(n,t,e,o){var i;"string"==typeof n?(i=r(n)).state=t:(void 0===(i=S({},n)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return e&&(i.key=e),o?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",e=n&&n.split("/")||[],o=t&&t.split("/")||[],i=n&&d(n),r=t&&d(t),a=i||r;if(n&&d(n)?o=e:e.length&&(o.pop(),o=o.concat(e)),!o.length)return"/";var c=void 0;if(o.length){var f=o[o.length-1];c="."===f||".."===f||""===f}else c=!1;for(var u=0,s=o.length;0<=s;s--){var h=o[s];"."===h?v(o,s):".."===h?(v(o,s),u++):u&&(v(o,s),u--)}if(!a)for(;u--;u)o.unshift("..");!a||""===o[0]||o[0]&&d(o[0])||o.unshift("");var l=o.join("/");return c&&"/"!==l.substr(-1)&&(l+="/"),l}(i.pathname,o.pathname)):i.pathname=o.pathname:i.pathname||(i.pathname="/"),i}function T(n,t){return n.pathname===t.pathname&&n.search===t.search&&n.hash===t.hash&&n.key===t.key&&function e(t,o){if(t===o)return!0;if(null==t||null==o)return!1;if(Array.isArray(t))return Array.isArray(o)&&t.length===o.length&&t.every(function(n,t){return e(n,o[t])});var n=void 0===t?"undefined":f(t);if(n!==(void 0===o?"undefined":f(o)))return!1;if("object"!==n)return!1;var i=t.valueOf(),r=o.valueOf();if(i!==t||r!==o)return e(i,r);var a=Object.keys(t),c=Object.keys(o);return a.length===c.length&&a.every(function(n){return e(t[n],o[n])})}(n.state,t.state)}function M(){var r=null;var o=[];return{setPrompt:function(n){return r=n,function(){r===n&&(r=null)}},confirmTransitionTo:function(n,t,e,o){if(null!=r){var i="function"==typeof r?r(n,t):r;"string"==typeof i?"function"==typeof e?e(i,o):o(!0):o(!1!==i)}else o(!0)},appendListener:function(n){var t=!0;function e(){t&&n.apply(void 0,arguments)}return o.push(e),function(){t=!1,o=o.filter(function(n){return n!==e})}},notifyListeners:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];o.forEach(function(n){return n.apply(void 0,t)})}}}var B=!("undefined"==typeof window||!window.document||!window.document.createElement);function F(n,t){t(window.confirm(n))}var _="popstate",q="hashchange";function G(){try{return window.history.state||{}}catch(n){return{}}}var E="hashchange",L={hashbang:{encodePath:function(n){return"!"===n.charAt(0)?n:"!/"+t(n)},decodePath:function(n){return"!"===n.charAt(0)?n.substr(1):n}},noslash:{encodePath:t,decodePath:U},slash:{encodePath:U,decodePath:U}};function W(){var n=window.location.href,t=n.indexOf("#");return-1===t?"":n.substring(t+1)}function $(n){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+n)}function g(n,t,e){return Math.min(Math.max(n,t),e)}n.createBrowserHistory=function(n){void 0===n&&(n={}),B||H(!1);var t,c=window.history,f=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,e=!(-1===window.navigator.userAgent.indexOf("Trident")),o=n,i=o.forceRefresh,u=void 0!==i&&i,r=o.getUserConfirmation,s=void 0===r?F:r,a=o.keyLength,h=void 0===a?6:a,l=n.basename?C(U(n.basename)):"";function d(n){var t=n||{},e=t.key,o=t.state,i=window.location,r=i.pathname+i.search+i.hash;return l&&(r=j(r,l)),R(r,o,e)}function v(){return Math.random().toString(36).substr(2,h)}var p=M();function y(n){S(L,n),L.length=c.length,p.notifyListeners(L.location,L.action)}function g(n){void(void 0===n.state&&navigator.userAgent.indexOf("CriOS"))||P(d(n.state))}function w(){P(d(G()))}var m=!1;function P(t){m?(m=!1,y()):p.confirmTransitionTo(t,"POP",s,function(n){n?y({action:"POP",location:t}):function(n){var t=L.location,e=b.indexOf(t.key);-1===e&&(e=0);var o=b.indexOf(n.key);-1===o&&(o=0);var i=e-o;i&&(m=!0,k(i))}(t)})}var O=d(G()),b=[O.key];function x(n){return l+I(n)}function k(n){c.go(n)}var A=0;function T(n){1===(A+=n)&&1===n?(window.addEventListener(_,g),e&&window.addEventListener(q,w)):0===A&&(window.removeEventListener(_,g),e&&window.removeEventListener(q,w))}var E=!1,L={length:c.length,action:"POP",location:O,createHref:x,push:function(n,t){var a=R(n,t,v(),L.location);p.confirmTransitionTo(a,"PUSH",s,function(n){if(n){var t=x(a),e=a.key,o=a.state;if(f)if(c.pushState({key:e,state:o},null,t),u)window.location.href=t;else{var i=b.indexOf(L.location.key),r=b.slice(0,-1===i?0:i+1);r.push(a.key),b=r,y({action:"PUSH",location:a})}else window.location.href=t}})},replace:function(n,t){var r="REPLACE",a=R(n,t,v(),L.location);p.confirmTransitionTo(a,r,s,function(n){if(n){var t=x(a),e=a.key,o=a.state;if(f)if(c.replaceState({key:e,state:o},null,t),u)window.location.replace(t);else{var i=b.indexOf(L.location.key);-1!==i&&(b[i]=a.key),y({action:r,location:a})}else window.location.replace(t)}})},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},block:function(n){void 0===n&&(n=!1);var t=p.setPrompt(n);return E||(T(1),E=!0),function(){return E&&(E=!1,T(-1)),t()}},listen:function(n){var t=p.appendListener(n);return T(1),function(){T(-1),t()}}};return L},n.createHashHistory=function(n){void 0===n&&(n={}),B||H(!1);var t=window.history,e=(window.navigator.userAgent.indexOf("Firefox"),n),o=e.getUserConfirmation,c=void 0===o?F:o,i=e.hashType,r=void 0===i?"slash":i,f=n.basename?C(U(n.basename)):"",a=L[r],u=a.encodePath,s=a.decodePath;function h(){var n=s(W());return f&&(n=j(n,f)),R(n)}var l=M();function d(n){S(A,n),A.length=t.length,l.notifyListeners(A.location,A.action)}var v=!1,p=null;function y(){var t,n=W(),e=u(n);if(n!==e)$(e);else{var o=h(),i=A.location;if(!v&&T(i,o))return;if(p===I(o))return;p=null,t=o,v?(v=!1,d()):l.confirmTransitionTo(t,"POP",c,function(n){n?d({action:"POP",location:t}):function(n){var t=A.location,e=P.lastIndexOf(I(t));-1===e&&(e=0);var o=P.lastIndexOf(I(n));-1===o&&(o=0);var i=e-o;i&&(v=!0,O(i))}(t)})}}var g=W(),w=u(g);g!==w&&$(w);var m=h(),P=[I(m)];function O(n){t.go(n)}var b=0;function x(n){1===(b+=n)&&1===n?window.addEventListener(E,y):0===b&&window.removeEventListener(E,y)}var k=!1,A={length:t.length,action:"POP",location:m,createHref:function(n){return"#"+u(f+I(n))},push:function(n,t){var a=R(n,void 0,void 0,A.location);l.confirmTransitionTo(a,"PUSH",c,function(n){if(n){var t,e=I(a),o=u(f+e);if(W()!==o){p=e,t=o,window.location.hash=t;var i=P.lastIndexOf(I(A.location)),r=P.slice(0,-1===i?0:i+1);r.push(e),P=r,d({action:"PUSH",location:a})}else d()}})},replace:function(n,t){var i="REPLACE",r=R(n,void 0,void 0,A.location);l.confirmTransitionTo(r,i,c,function(n){if(n){var t=I(r),e=u(f+t);W()!==e&&(p=t,$(e));var o=P.indexOf(I(A.location));-1!==o&&(P[o]=t),d({action:i,location:r})}})},go:O,goBack:function(){O(-1)},goForward:function(){O(1)},block:function(n){void 0===n&&(n=!1);var t=l.setPrompt(n);return k||(x(1),k=!0),function(){return k&&(k=!1,x(-1)),t()}},listen:function(n){var t=l.appendListener(n);return x(1),function(){x(-1),t()}}};return A},n.createMemoryHistory=function(n){void 0===n&&(n={});var t=n,i=t.getUserConfirmation,e=t.initialEntries,o=void 0===e?["/"]:e,r=t.initialIndex,a=void 0===r?0:r,c=t.keyLength,f=void 0===c?6:c,u=M();function s(n){S(y,n),y.length=y.entries.length,u.notifyListeners(y.location,y.action)}function h(){return Math.random().toString(36).substr(2,f)}var l=g(a,0,o.length-1),d=o.map(function(n){return R(n,void 0,"string"==typeof n?h():n.key||h())}),v=I;function p(n){var t=g(y.index+n,0,y.entries.length-1),e=y.entries[t];u.confirmTransitionTo(e,"POP",i,function(n){n?s({action:"POP",location:e,index:t}):s()})}var y={length:d.length,action:"POP",location:d[l],index:l,entries:d,createHref:v,push:function(n,t){var o=R(n,t,h(),y.location);u.confirmTransitionTo(o,"PUSH",i,function(n){if(n){var t=y.index+1,e=y.entries.slice(0);e.length>t?e.splice(t,e.length-t,o):e.push(o),s({action:"PUSH",location:o,index:t,entries:e})}})},replace:function(n,t){var e="REPLACE",o=R(n,t,h(),y.location);u.confirmTransitionTo(o,e,i,function(n){n&&(y.entries[y.index]=o,s({action:e,location:o}))})},go:p,goBack:function(){p(-1)},goForward:function(){p(1)},canGo:function(n){var t=y.index+n;return 0<=t&&t<y.entries.length},block:function(n){return void 0===n&&(n=!1),u.setPrompt(n)},listen:function(n){return u.appendListener(n)}};return y},n.createLocation=R,n.locationsAreEqual=T,n.parsePath=r,n.createPath=I,Object.defineProperty(n,"__esModule",{value:!0})});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('hls.js', function (Y) {SM.currentModule = 'hls.js';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
"undefined"!=typeof window&&function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=19)}([function(t,e,r){"use strict";var i;r.d(e,"a",(function(){return i})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(i||(i={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return l}));var i=function(){},a={trace:i,debug:i,log:i,warn:i,info:i,error:i},n=a;function s(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):i}function o(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach((function(e){n[e]=t[e]?t[e].bind(t):s(e)}))}(t,"debug","log","info","warn","error");try{n.log()}catch(t){n=a}}else n=a}var l=a},function(t,e,r){"use strict";var i,a;r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return a})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(i||(i={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(a||(a={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var i=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)};Number.MAX_SAFE_INTEGER},function(t,e,r){"use strict";var i,a;r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(a||(a={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return v})),r.d(e,"c",(function(){return g}));var i,a=r(3),n=r(10),s=r(1),o=r(15),l=r(12);function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(i||(i={}));var c=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[i.AUDIO]=null,e[i.VIDEO]=null,e[i.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),i=[];1===r.length?i[0]=e?e.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i},f(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(n.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),v=function(t){function e(e,r){var i;return(i=t.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkey=void 0,i.type=void 0,i.loader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new l.a,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.type=e,i}u(e,t);var r=e.prototype;return r.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var r=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((r=o.a.fromURI(t.uri)).method=t.method,r.iv=this.createInitializationVector(e),r.keyFormat="identity"),r},r.setElementaryStreamInfo=function(t,e,r,i,a,n){void 0===n&&(n=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,a)):s[t]={startPTS:e,endPTS:r,startDTS:i,endDTS:a,partial:n}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[i.AUDIO]=null,t[i.VIDEO]=null,t[i.AUDIOVIDEO]=null},f(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var t=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(c),g=function(t){function e(e,r,i,a,n){var s;(s=t.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new l.a,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=r,s.index=a;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,n),n&&(s.fragOffset=n.fragOffset+n.duration),s}return u(e,t),f(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(c)},function(t,e,r){"use strict";r.d(e,"b",(function(){return d})),r.d(e,"g",(function(){return h})),r.d(e,"f",(function(){return f})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return v})),r.d(e,"e",(function(){return p})),r.d(e,"h",(function(){return m})),r.d(e,"a",(function(){return y}));var i=r(8),a=r(5),n=Math.pow(2,32)-1,s=[].push;function o(t){return String.fromCharCode.apply(null,t)}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r}function u(t,e,r){"data"in t&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function d(t,e){var r,i,a,n=[];if(!e.length)return n;"data"in t?(r=t.data,i=t.start,a=t.end):(i=0,a=(r=t).byteLength);for(var u=i;u<a;){var h=l(r,u),f=h>1?u+h:a;if(o(r.subarray(u+4,u+8))===e[0])if(1===e.length)n.push({data:r,start:u+8,end:f});else{var c=d({data:r,start:u+8,end:f},e.slice(1));c.length&&s.apply(n,c)}u=f}return n}function h(t){var e=d(t,["moov"])[0],r=e?e.end:null,i=d(t,["sidx"]);if(!i||!i[0])return null;var a=[],n=i[0],s=n.data[0],o=0===s?8:16,u=l(n,o);o+=4;o+=0===s?8:16,o+=2;var h=n.end+0,f=function(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r}(n,o);o+=2;for(var c=0;c<f;c++){var v=o,g=l(n,v);v+=4;var p=2147483647&g;if(1===(2147483648&g)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var m=l(n,v);v+=4,a.push({referenceSize:p,subsegmentDuration:m,info:{duration:m/u,start:h,end:h+p-1}}),h+=p,o=v+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:f,references:a,moovEndOffset:r}}function f(t){for(var e=[],r=d(t,["moov","trak"]),i=0;i<r.length;i++){var n=r[i],s=d(n,["tkhd"])[0];if(s){var u=s.data[s.start],h=0===u?12:20,f=l(s,h),c=d(n,["mdia","mdhd"])[0];if(c){var v=l(c,h=0===(u=c.data[c.start])?12:20),g=d(n,["mdia","hdlr"])[0];if(g){var p=o(g.data.subarray(g.start+8,g.start+12)),m={soun:a.a.AUDIO,vide:a.a.VIDEO}[p];if(m){var y=d(n,["mdia","minf","stbl","stsd"])[0],b=void 0;y&&(b=o(y.data.subarray(y.start+12,y.start+16))),e[f]={timescale:v,type:m},e[m]={timescale:v,id:f,codec:b}}}}}}return d(t,["moov","mvex","trex"]).forEach((function(t){var r=l(t,4),i=e[r];i&&(i.default={duration:l(t,12),flags:l(t,20)})})),e}function c(t,e){return d(e,["moof","traf"]).reduce((function(e,r){var i=d(r,["tfdt"])[0],a=i.data[i.start],n=d(r,["tfhd"]).reduce((function(e,r){var n=l(r,4),s=t[n];if(s){var o=l(i,4);1===a&&(o*=Math.pow(2,32),o+=l(i,8));var u=o/(s.timescale||9e4);if(isFinite(u)&&(null===e||u<e))return u}return e}),null);return null!==n&&isFinite(n)&&(null===e||n<e)?n:e}),null)||0}function v(t,e){for(var r=0,i=0,n=0,s=d(t,["moof","traf"]),o=0;o<s.length;o++){var u=s[o],f=d(u,["tfhd"])[0],c=e[l(f,4)];if(c){var v=c.default,p=l(f,0)|(null==v?void 0:v.flags),m=null==v?void 0:v.duration;8&p&&(m=l(f,2&p?12:8));for(var y=c.timescale||9e4,b=d(u,["trun"]),T=0;T<b.length;T++){if(m)r=m*l(b[T],4);else r=g(b[T]);c.type===a.a.VIDEO?i+=r/y:c.type===a.a.AUDIO&&(n+=r/y)}}}if(0===i&&0===n){var E=h(t);if(null!=E&&E.references)return E.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return i||n}function g(t){var e=l(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var i=0,a=l(t,4),n=0;n<a;n++){if(256&e)i+=l(t,r),r+=4;512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4)}return i}function p(t,e,r){d(e,["moof","traf"]).forEach((function(e){d(e,["tfhd"]).forEach((function(i){var a=l(i,4),s=t[a];if(s){var o=s.timescale||9e4;d(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],i=l(t,4);if(0===e)u(t,4,i-r*o);else{i*=Math.pow(2,32),i+=l(t,8),i-=r*o,i=Math.max(i,0);var a=Math.floor(i/(n+1)),s=Math.floor(i%(n+1));u(t,4,a),u(t,8,s)}}))}}))}))}function m(t){var e={valid:null,remainder:null},r=d(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var a=r[r.length-1];return e.valid=Object(i.a)(t,0,a.start-8),e.remainder=Object(i.a)(t,a.start-8),e}function y(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}},function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"c",(function(){return f})),r.d(e,"f",(function(){return y}));var i,a=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},n=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s=function(t,e){for(var r=e,i=0;a(t,e);){i+=10,i+=o(t,e+6),n(t,e+10)&&(i+=10),e+=i}if(i>0)return t.subarray(r,r+i)},o=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},l=function(t,e){return a(t,e)&&o(t,e+6)+10<=t.length-e},u=function(t){for(var e=f(t),r=0;r<e.length;r++){var i=e[r];if(d(i))return m(i)}},d=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},h=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=o(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},f=function(t){for(var e=0,r=[];a(t,e);){for(var i=o(t,e+6),s=(e+=10)+i;e+8<s;){var l=h(t.subarray(e)),u=c(l);u&&r.push(u),e+=l.size+10}n(t,e)&&(e+=10)}return r},c=function(t){return"PRIV"===t.type?v(t):"W"===t.type[0]?p(t):g(t)},v=function(t){if(!(t.size<2)){var e=y(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},g=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=y(t.data.subarray(e),!0);e+=r.length+1;var i=y(t.data.subarray(e));return{key:t.type,info:r,data:i}}var a=y(t.data.subarray(1));return{key:t.type,data:a}}},p=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=y(t.data.subarray(e),!0);e+=r.length+1;var i=y(t.data.subarray(e));return{key:t.type,info:r,data:i}}var a=y(t.data);return{key:t.type,data:a}},m=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},y=function(t,e){void 0===e&&(e=!1);var r=b();if(r){var i=r.decode(t);if(e){var a=i.indexOf("\0");return-1!==a?i.substring(0,a):i}return i.replace(/\0/g,"")}for(var n,s,o,l=t.length,u="",d=0;d<l;){if(0===(n=t[d++])&&e)return u;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(n);break;case 12:case 13:s=t[d++],u+=String.fromCharCode((31&n)<<6|63&s);break;case 14:s=t[d++],o=t[d++],u+=String.fromCharCode((15&n)<<12|(63&s)<<6|(63&o)<<0)}}return u};function b(){return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}},function(t,e,r){"use strict";function i(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}r.d(e,"a",(function(){return i}))},function(t,e,r){"use strict";r.d(e,"c",(function(){return St})),r.d(e,"d",(function(){return At})),r.d(e,"a",(function(){return Rt})),r.d(e,"b",(function(){return Dt}));var i=r(0),a=r(2),n=r(14),s=r(3),o=r(7);var l=r(6),u=r(8),d=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=Object(l.a)(this.cachedData,t),this.cachedData=null);var r,i,a=o.b(t,0),n=a?a.length:0,s=this._audioTrack,d=this._id3Track,f=a?o.d(a):void 0,c=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=h(f,e)),a&&a.length>0&&d.samples.push({pts:this.initPTS,dts:this.initPTS,data:a}),i=this.initPTS;n<c;){if(this.canParse(t,n)){var v=this.appendFrame(s,t,n);v?(this.frameIndex++,i=v.sample.pts,r=n+=v.length):n=c}else o.a(t,n)?(a=o.b(t,n),d.samples.push({pts:i,dts:i,data:a}),r=n+=a.length):n++;if(n===c&&r!==c){var g=Object(u.a)(t,r);this.cachedData?this.cachedData=Object(l.a)(this.cachedData,g):this.cachedData=g}}return{audioTrack:s,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:d,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.destroy=function(){},t}(),h=function(t,e){return Object(s.a)(t)?90*t:9e4*e},f=d,c=r(1);function v(t,e){return 255===t[e]&&240==(246&t[e+1])}function g(t,e){return 1&t[e+1]?7:9}function p(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function m(t,e){return e+1<t.length&&v(t,e)}function y(t,e){if(m(t,e)){var r=g(t,e);if(e+r>=t.length)return!1;var i=p(t,e);if(i<=r)return!1;var a=e+i;return a===t.length||m(t,a)}return!1}function b(t,e,r,n,s){if(!t.samplerate){var o=function(t,e,r,n){var s,o,l,u,d=navigator.userAgent.toLowerCase(),h=n,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&e[r+2])>>>6);var v=(60&e[r+2])>>>2;if(!(v>f.length-1))return l=(1&e[r+2])<<2,l|=(192&e[r+3])>>>6,c.b.log("manifest codec:"+n+", ADTS type:"+s+", samplingIndex:"+v),/firefox/i.test(d)?v>=6?(s=5,u=new Array(4),o=v-3):(s=2,u=new Array(2),o=v):-1!==d.indexOf("android")?(s=2,u=new Array(2),o=v):(s=5,u=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&v>=6?o=v-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(v>=6&&1===l||/vivaldi/i.test(d))||!n&&1===l)&&(s=2,u=new Array(2)),o=v)),u[0]=s<<3,u[0]|=(14&v)>>1,u[1]|=(1&v)<<7,u[1]|=l<<3,5===s&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:f[v],channelCount:l,codec:"mp4a.40."+s,manifestCodec:h};t.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+v})}(e,r,n,s);if(!o)return;t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,c.b.log("parsed codec:"+t.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function T(t){return 9216e4/t}function E(t,e,r,i,a){var n=function(t,e,r,i,a){var n=g(t,e),s=p(t,e);if((s-=n)>0)return{headerLength:n,frameLength:s,stamp:r+i*a}}(e,r,i,a,T(t.samplerate));if(n){var s,o=n.frameLength,l=n.headerLength,u=n.stamp,d=l+o,h=Math.max(0,r+d-e.length);h?(s=new Uint8Array(d-l)).set(e.subarray(r+l,e.length),0):s=e.subarray(r+l,r+d);var f={unit:s,pts:u};return h||t.samples.push(f),{sample:f,length:d,missing:h}}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var L=function(t){var e,r;function i(e,r){var i;return(i=t.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=r,i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,S(e,r);var a=i.prototype;return a.resetInitSegment=function(e,r,i){t.prototype.resetInitSegment.call(this,e,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(t){if(!t)return!1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(y(t,e))return c.b.log("ADTS sync word found !"),!0;return!1},a.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&v(t,e)&&p(t,e)<=t.length-e}(t,e)},a.appendFrame=function(t,e,r){b(t,this.observer,e,r,t.manifestCodec);var i=E(t,e,r,this.initPTS,this.frameIndex);if(i&&0===i.missing)return i},i}(f);L.minProbeByteLength=9;var A=L,R=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(l.b)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,r={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(e=Object(l.a)(this.remainderData,t));var i=Object(l.h)(e);this.remainderData=i.remainder,r.samples=i.valid||new Uint8Array}else r.samples=e;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:r,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.flush=function(){var t={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:t,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();R.minProbeByteLength=1024;var D=R,_=null,k=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],x=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],w=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],C=[0,1,1,4];function O(t,e,r,i,a){if(!(r+24>e.length)){var n=I(e,r);if(n&&r+n.frameLength<=e.length){var s=i+a*(9e4*n.samplesPerFrame/n.sampleRate),o={unit:e.subarray(r,r+n.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=n.channelCount,t.samplerate=n.sampleRate,t.samples.push(o),{sample:o,length:n.frameLength,missing:0}}}}function I(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,a=t[e+2]>>4&15,n=t[e+2]>>2&3;if(1!==r&&0!==a&&15!==a&&3!==n){var s=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*k[14*(3===r?3-i:3===i?3:4)+a-1],u=x[3*(3===r?0:2===r?1:2)+n],d=3===o?1:2,h=w[r][i],f=C[i],c=8*h*f,v=Math.floor(h*l/u+s)*f;if(null===_){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_=g?parseInt(g[1]):0}return!!_&&_<=87&&2===i&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:u,channelCount:d,frameLength:v,samplesPerFrame:c}}}function P(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function F(t,e){return e+1<t.length&&P(t,e)}function M(t,e){if(e+1<t.length&&P(t,e)){var r=I(t,e),i=4;null!=r&&r.frameLength&&(i=r.frameLength);var a=e+i;return a===t.length||F(t,a)}return!1}var N=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");i.set(t.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&c.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,i=0;i<t;i++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,i=0,a=0,n=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),h=this.skipBits.bind(this),f=this.skipEG.bind(this),c=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);o();var g=o();if(l(5),h(3),o(),c(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var p=u();if(3===p&&h(1),c(),c(),h(1),d())for(e=3!==p?8:12,r=0;r<e;r++)d()&&v(r<6?16:64)}c();var m=u();if(0===m)u();else if(1===m)for(h(1),f(),f(),t=u(),r=0;r<t;r++)f();c(),h(1);var y=u(),b=u(),T=l(1);0===T&&h(1),h(1),d()&&(i=u(),a=u(),n=u(),s=u());var E=[1,1];if(d()&&d())switch(o()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(y+1)-2*i-2*a),height:(2-T)*(b+1)*16-(T?2:4)*(n+s),pixelRatio:E}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),B=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new n.a(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,r,i){var a=t[e].unit,n=a.subarray(16,a.length-a.length%16),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),o=this;this.decryptBuffer(s,(function(n){var s=new Uint8Array(n);a.set(s,16),i||o.decryptAacSamples(t,e+1,r)}))},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,i),!i)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)r.set(t.subarray(a,a+16),i);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)t.set(r.subarray(i,i+16),a);return t},e.decryptAvcSample=function(t,e,r,i,a,n){var s=X(a.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){a.data=l.getAvcDecryptedUnit(s,o),n||l.decryptAvcSamples(t,e,r+1,i)}))},e.decryptAvcSamples=function(t,e,r,i){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void i();for(var a=t[e].units;!(r>=a.length);r++){var n=a[r];if(!(n.data.length<=48||1!==n.type&&5!==n.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,i,n,s),!s)return}}}},t}(),U={video:1,audio:2,id3:3,text:4},G=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return!(r<0)&&(r&&c.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:U[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=i},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,r,n,s){var o;void 0===n&&(n=!1),void 0===s&&(s=!1),n||(this.sampleAes=null);var u=this._avcTrack,d=this._audioTrack,h=this._id3Track,f=u.pid,v=u.pesData,g=d.pid,p=h.pid,m=d.pesData,y=h.pesData,b=!1,T=this.pmtParsed,E=this._pmtId,S=e.length;if(this.remainderData&&(S=(e=Object(l.a)(this.remainderData,e)).length,this.remainderData=null),S<188&&!s)return this.remainderData=e,{audioTrack:d,avcTrack:u,id3Track:h,textTrack:this._txtTrack};var L=Math.max(0,t.syncOffset(e));(S-=(S+L)%188)<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,S,e.buffer.byteLength-S));for(var A=L;A<S;A+=188)if(71===e[A]){var R=!!(64&e[A+1]),D=((31&e[A+1])<<8)+e[A+2],_=void 0;if((48&e[A+3])>>4>1){if((_=A+5+e[A+4])===A+188)continue}else _=A+4;switch(D){case f:R&&(v&&(o=V(v))&&this.parseAVCPES(o,!1),v={data:[],size:0}),v&&(v.data.push(e.subarray(_,A+188)),v.size+=A+188-_);break;case g:R&&(m&&(o=V(m))&&(d.isAAC?this.parseAACPES(o):this.parseMPEGPES(o)),m={data:[],size:0}),m&&(m.data.push(e.subarray(_,A+188)),m.size+=A+188-_);break;case p:R&&(y&&(o=V(y))&&this.parseID3PES(o),y={data:[],size:0}),y&&(y.data.push(e.subarray(_,A+188)),y.size+=A+188-_);break;case 0:R&&(_+=e[_]+1),E=this._pmtId=K(e,_);break;case E:R&&(_+=e[_]+1);var k=H(e,_,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,n);(f=k.avc)>0&&(u.pid=f),(g=k.audio)>0&&(d.pid=g,d.isAAC=k.isAAC),(p=k.id3)>0&&(h.pid=p),b&&!T&&(c.b.log("reparse from beginning"),b=!1,A=L-188),T=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=!0}}else this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});u.pesData=v,d.pesData=m,h.pesData=y;var x={audioTrack:d,avcTrack:u,id3Track:h,textTrack:this._txtTrack};return s&&this.extractRemainingSamples(x),x},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,i=t.avcTrack,a=t.id3Track,n=i.pesData,s=r.pesData,o=a.pesData;n&&(e=V(n))?(this.parseAVCPES(e,!0),i.pesData=null):i.pesData=n,s&&(e=V(s))?(r.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),r.pesData=null):(null!=s&&s.size&&c.b.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=s),o&&(e=V(o))?(this.parseID3PES(e),a.pesData=null):a.pesData=o},e.demuxSampleAes=function(t,e,r){var i=this.demux(t,r,!0,!this.config.progressive),a=this.sampleAes=new B(this.observer,this.config,e);return this.decrypt(i,a)},e.decrypt=function(t,e){return new Promise((function(r){var i=t.audioTrack,a=t.avcTrack;i.samples&&i.isAAC?e.decryptAacSamples(i.samples,0,(function(){a.samples?e.decryptAvcSamples(a.samples,0,0,(function(){r(t)})):r(t)})):a.samples&&e.decryptAvcSamples(a.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var r,i=this,a=this._avcTrack,n=this.parseAVCNALu(t.data),s=this.avcSample,l=!1;t.data=null,s&&n.length&&!a.audFound&&(W(s,a),s=this.avcSample=j(!1,t.pts,t.dts,"")),n.forEach((function(e){switch(e.type){case 1:r=!0,s||(s=i.avcSample=j(!0,t.pts,t.dts,"")),s.frame=!0;var n=e.data;if(l&&n.length>4){var u=new N(n).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(s.key=!0)}break;case 5:r=!0,s||(s=i.avcSample=j(!0,t.pts,t.dts,"")),s.key=!0,s.frame=!0;break;case 6:r=!0;var d=new N(X(e.data));d.readUByte();for(var h=0,f=0,c=!1,v=0;!c&&d.bytesAvailable>1;){h=0;do{h+=v=d.readUByte()}while(255===v);f=0;do{f+=v=d.readUByte()}while(255===v);if(4===h&&0!==d.bytesAvailable){if(c=!0,181===d.readUByte())if(49===d.readUShort())if(1195456820===d.readUInt())if(3===d.readUByte()){for(var g=d.readUByte(),p=31&g,m=[g,d.readUByte()],y=0;y<p;y++)m.push(d.readUByte()),m.push(d.readUByte()),m.push(d.readUByte());Y(i._txtTrack.samples,{type:3,pts:t.pts,bytes:m})}}else if(5===h&&0!==d.bytesAvailable){if(c=!0,f>16){for(var b=[],T=0;T<16;T++)b.push(d.readUByte().toString(16)),3!==T&&5!==T&&7!==T&&9!==T||b.push("-");for(var E=f-16,S=new Uint8Array(E),L=0;L<E;L++)S[L]=d.readUByte();Y(i._txtTrack.samples,{pts:t.pts,payloadType:h,uuid:b.join(""),userData:Object(o.f)(S),userDataBytes:S})}}else if(f<d.bytesAvailable)for(var A=0;A<f;A++)d.readUByte()}break;case 7:if(r=!0,l=!0,!a.sps){var R=new N(e.data).readSPS();a.width=R.width,a.height=R.height,a.pixelRatio=R.pixelRatio,a.sps=[e.data],a.duration=i._duration;for(var D=e.data.subarray(1,4),_="avc1.",k=0;k<3;k++){var x=D[k].toString(16);x.length<2&&(x="0"+x),_+=x}a.codec=_}break;case 8:r=!0,a.pps||(a.pps=[e.data]);break;case 9:r=!1,a.audFound=!0,s&&W(s,a),s=i.avcSample=j(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,s&&(s.debug+="unknown NAL "+e.type+" ")}s&&r&&s.units.push(e)})),e&&s&&(W(s,a),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,r=this.avcSample;if(!r||0===r.units.length){var i=this._avcTrack.samples;r=i[i.length-1]}if(null!==(t=r)&&void 0!==t&&t.units){var a=r.units;e=a[a.length-1]}return e},e.parseAVCNALu=function(t){var e,r,i=t.byteLength,a=this._avcTrack,n=a.naluState||0,s=n,o=[],l=0,u=-1,d=0;for(-1===n&&(u=0,d=31&t[0],n=0,l=1);l<i;)if(e=t[l++],n)if(1!==n)if(e)if(1===e){if(u>=0){var h={data:t.subarray(u,l-n-1),type:d};o.push(h)}else{var f=this.getLastNalUnit();if(f&&(s&&l<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),(r=l-n-1)>0)){var c=new Uint8Array(f.data.byteLength+r);c.set(f.data,0),c.set(t.subarray(0,r),f.data.byteLength),f.data=c}}l<i?(u=l,d=31&t[l],n=0):n=-1}else n=0;else n=3;else n=e?0:2;else n=e?0:1;if(u>=0&&n>=0){var v={data:t.subarray(u,i),type:d,state:n};o.push(v)}if(0===o.length){var g=this.getLastNalUnit();if(g){var p=new Uint8Array(g.data.byteLength+t.byteLength);p.set(g.data,0),p.set(t,g.data.byteLength),g.data=p}}return a.naluState=n,o},e.parseAACPES=function(t){var e,r,n,s,o,l=0,u=this._audioTrack,d=this.aacOverFlow,h=t.data;if(d){this.aacOverFlow=null;var f=d.sample.unit.byteLength,v=Math.min(d.missing,f),g=f-v;d.sample.unit.set(h.subarray(0,v),g),u.samples.push(d.sample),l=d.missing}for(e=l,r=h.length;e<r-1&&!m(h,e);e++);if(e!==l&&(e<r-1?(n="AAC PES did not start with ADTS header,offset:"+e,s=!1):(n="no ADTS header found in AAC PES",s=!0),c.b.warn("parsing error:"+n),this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:s,reason:n}),s))return;if(b(u,this.observer,h,e,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!d)return void c.b.warn("[tsdemuxer]: AAC PES unknown PTS");var p=T(u.samplerate);o=d.sample.pts+p}for(var y=0;e<r;){if(m(h,e)){if(e+5<r){var S=E(u,h,e,o,y);if(S){if(!S.missing){e+=S.length,y++;continue}this.aacOverFlow=S}}break}e++}},e.parseMPEGPES=function(t){var e=t.data,r=e.length,i=0,a=0,n=t.pts;if(void 0!==n)for(;a<r;)if(F(e,a)){var s=O(this._audioTrack,e,a,n,i);if(!s)break;a+=s.length,i++}else a++;else c.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):c.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function j(t,e,r,i){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:i,length:0}}function K(t,e){return(31&t[e+10])<<8|t[e+11]}function H(t,e,r,i){var a={audio:-1,avc:-1,id3:-1,isAAC:!0},n=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<n;){var s=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!i){c.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=s);break;case 21:-1===a.id3&&(a.id3=s);break;case 219:if(!i){c.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=s);break;case 3:case 4:r?-1===a.audio&&(a.audio=s,a.isAAC=!1):c.b.log("MPEG audio found, not supported in this browser");break;case 36:c.b.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return a}function V(t){var e,r,i,a,n,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var u=e[7];192&u&&(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&u?a-(n=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(c.b.warn(Math.round((a-n)/9e4)+"s delta between PTS and DTS, align them"),a=n):n=a);var d=(i=e[8])+9;if(t.size<=d)return null;t.size-=d;for(var h=new Uint8Array(t.size),f=0,v=o.length;f<v;f++){var g=(e=o[f]).byteLength;if(d){if(d>g){d-=g;continue}e=e.subarray(d),g-=d,d=0}h.set(e,s),s+=g}return r&&(r-=i+3),{data:h,pts:a,dts:n,len:r}}return null}function W(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,i=r.length;if(!i)return void e.dropped++;var a=r[i-1];t.pts=a.pts,t.dts=a.dts}e.samples.push(t)}t.debug.length&&c.b.log(t.pts+"/"+t.dts+":"+t.debug)}function Y(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var i=r-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)}function X(t){for(var e=t.byteLength,r=[],i=1;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;var a=e-r.length,n=new Uint8Array(a),s=0;for(i=0;i<a;s++,i++)s===r[0]&&(s++,r.shift()),n[i]=t[s];return n}G.minProbeByteLength=188;var q=G;function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){var e,r;function i(){return t.apply(this,arguments)||this}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,z(e,r);var a=i.prototype;return a.resetInitSegment=function(e,r,i){t.prototype.resetInitSegment.call(this,e,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(t){if(!t)return!1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(M(t,e))return c.b.log("MPEG Audio sync word found !"),!0;return!1},a.canParse=function(t,e){return function(t,e){return P(t,e)&&4<=t.length-e}(t,e)},a.appendFrame=function(t,e,r){if(null!==this.initPTS)return O(t,e,r,this.initPTS,this.frameIndex)},i}(f);Q.minProbeByteLength=4;var $=Q,Z=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),J=Math.pow(2,32)-1,tt=function(){function t(){}return t.init=function(){var e;for(e in (t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]}, t.types))t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=n,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,a))},t.box=function(t){for(var e=8,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var n=i.length,s=n;n--;)e+=i[n].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),n=0,e=8;n<s;n++)o.set(i[n],e),e+=i[n].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(J+1)),a=Math.floor(r%(J+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(J+1)),a=Math.floor(r%(J+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,n)},t.sdtp=function(e){var r,i,a=e.samples||[],n=new Uint8Array(4+a.length);for(r=0;r<a.length;r++)i=a[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,n)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,i,a,n=[],s=[];for(r=0;r<e.sps.length;r++)a=(i=e.sps[r]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)a=(i=e.pps[r]).byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(i));var o=t.box(t.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(s))),l=e.width,u=e.height,d=e.pixelRatio[0],h=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,h>>24,h>>16&255,h>>8&255,255&h])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,a=e.width,n=e.height,s=Math.floor(i/(J+1)),o=Math.floor(i%(J+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,n>>8&255,255&n,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),a=e.id,n=Math.floor(r/(J+1)),s=Math.floor(r%(J+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i,a,n,s,o,l,u=e.samples||[],d=u.length,h=12+16*d,f=new Uint8Array(h);for(r+=8+h,f.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<d;i++)n=(a=u[i]).duration,s=a.size,o=a.flags,l=a.cts,f.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),i=new Uint8Array(t.FTYP.byteLength+r.byteLength);return i.set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t;}();tt.types=void 0,tt.HDLR_TYPES=void 0,tt.STTS=void 0,tt.STSC=void 0,tt.STCO=void 0,tt.STSZ=void 0,tt.VMHD=void 0,tt.SMHD=void 0,tt.STSD=void 0,tt.FTYP=void 0,tt.DINF=void 0;var et=tt,rt=r(4);function it(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var a=t*e*r;return i?Math.round(a):a}function at(t,e){return void 0===e&&(e=!1),it(t,1e3,1/9e4,e)}function nt(){return(nt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}var st=null,ot=null,lt=!1,ut=function(){function t(t,e,r,i){if(void 0===i&&(i=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===st){var a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);st=a?parseInt(a[1]):0}if(null===ot){var n=navigator.userAgent.match(/Safari\/(\d+)/i);ot=n?parseInt(n[1]):0}lt=!!st&&st<75||!!ot&&ot<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){c.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){c.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){c.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var i=r.pts-t;return i<-4294967296?(e=!0,dt(t,r.pts)):i>0?t:r.pts}),t[0].pts);return e&&c.b.debug("PTS rollover detected"),r},e.remux=function(t,e,r,i,a,n,s,o){var l,u,d,h,f,v,g=a,p=a,m=t.pid>-1,y=e.pid>-1,b=e.samples.length,T=t.samples.length>0,E=b>1;if((!m||T)&&(!y||E)||this.ISGenerated||s){this.ISGenerated||(d=this.generateIS(t,e,a));var S=this.isVideoContiguous,L=-1;if(E&&(L=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!S&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,L>0){c.b.warn("[mp4-remuxer]: Dropped "+L+" out of "+b+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(L),e.dropped+=L,p+=(e.samples[0].pts-A)/(e.timescale||9e4)}else-1===L&&(c.b.warn("[mp4-remuxer]: No keyframe found out of "+b+" video samples"),v=!1);if(this.ISGenerated){if(T&&E){var R=this.getVideoStartPts(e.samples),D=(dt(t.samples[0].pts,R)-R)/e.inputTimeScale;g+=Math.max(0,D),p+=Math.max(0,-D)}if(T){if(t.samplerate||(c.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(t,e,a)),u=this.remuxAudio(t,g,this.isAudioContiguous,n,y||E||o===rt.b.AUDIO?p:void 0),E){var _=u?u.endPTS-u.startPTS:0;e.inputTimeScale||(c.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(t,e,a)),l=this.remuxVideo(e,p,S,_)}}else E&&(l=this.remuxVideo(e,p,S,0));l&&(l.firstKeyFrame=L,l.independent=-1!==L)}}return this.ISGenerated&&(r.samples.length&&(f=this.remuxID3(r,a)),i.samples.length&&(h=this.remuxText(i,a))),{audio:u,video:l,initSegment:d,independent:v,text:h,id3:f}},e.generateIS=function(t,e,r){var i,a,n,o=t.samples,l=e.samples,u=this.typeSupported,d={},h=!Object(s.a)(this._initPTS),f="audio/mp4";if(h&&(i=a=1/0),t.config&&o.length&&(t.timescale=t.samplerate,t.isAAC||(u.mpeg?(f="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:f,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array(0):et.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(n=t.inputTimeScale,i=a=o[0].pts-Math.round(n*r))),e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:et.initSegment([e]),metadata:{width:e.width,height:e.height}},h)){n=e.inputTimeScale;var c=this.getVideoStartPts(l),v=Math.round(n*r);a=Math.min(a,dt(l[0].dts,c)-v),i=Math.min(i,c-v)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=i,this._initDTS=a),{tracks:d,initPTS:i,timescale:n}},e.remuxVideo=function(t,e,r,n){var s,o,l,u=t.inputTimeScale,d=t.samples,h=[],f=d.length,v=this._initPTS,g=this.nextAvcDts,p=8,m=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,b=0,T=!1;r&&null!==g||(g=e*u-(d[0].pts-dt(d[0].dts,d[0].pts)));for(var E=0;E<f;E++){var S=d[E];if(S.pts=dt(S.pts-v,g),S.dts=dt(S.dts-v,g),S.dts>S.pts){b=Math.max(Math.min(b,S.pts-S.dts),-18e3)}S.dts<d[E>0?E-1:E].dts&&(T=!0)}T&&d.sort((function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i})),o=d[0].dts,l=d[d.length-1].dts;var L=Math.round((l-o)/(f-1));if(b<0){if(b<-2*L){c.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+at(-L,!0)+" ms");for(var A=b,R=0;R<f;R++)d[R].dts=A=Math.max(A,d[R].pts-L),d[R].pts=Math.max(A,d[R].pts)}else{c.b.warn("PTS < DTS detected in video samples, shifting DTS by "+at(b,!0)+" ms to overcome this issue");for(var D=0;D<f;D++)d[D].dts=d[D].dts+b}o=d[0].dts}if(r){var _=o-g,k=_>L;if(k||_<-1){k?c.b.warn("AVC: "+at(_,!0)+" ms ("+_+"dts) hole between fragments detected, filling it"):c.b.warn("AVC: "+at(-_,!0)+" ms ("+_+"dts) overlapping between fragments detected"),o=g;var x=d[0].pts-_;d[0].dts=o,d[0].pts=x,c.b.log("Video: First PTS/DTS adjusted: "+at(x,!0)+"/"+at(o,!0)+", delta: "+at(_,!0)+" ms")}}lt&&(o=Math.max(0,o));for(var w=0,C=0,O=0;O<f;O++){for(var I=d[O],P=I.units,F=P.length,M=0,N=0;N<F;N++)M+=P[N].data.length;C+=M,w+=F,I.length=M,I.dts=Math.max(I.dts,o),I.pts=Math.max(I.pts,I.dts,0),m=Math.min(I.pts,m),y=Math.max(I.pts,y)}l=d[f-1].dts;var B,U=C+4*w+8;try{B=new Uint8Array(U)}catch(t){return void this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating video mdat "+U})}var G=new DataView(B.buffer);G.setUint32(0,U),B.set(et.types.mdat,4);for(var j=0;j<f;j++){for(var K=d[j],H=K.units,V=0,W=0,Y=H.length;W<Y;W++){var X=H[W],q=X.data,z=X.data.byteLength;G.setUint32(p,z),p+=4,B.set(q,p),p+=z,V+=4+z}if(j<f-1)s=d[j+1].dts-K.dts;else{var Q=this.config,$=K.dts-d[j>0?j-1:j].dts;if(Q.stretchShortVideoTrack&&null!==this.nextAudioPts){var Z=Math.floor(Q.maxBufferHole*u),J=(n?m+n*u:this.nextAudioPts)-K.pts;J>Z?((s=J-$)<0&&(s=$),c.b.log("[mp4-remuxer]: It is approximately "+J/90+" ms to the next segment; using duration "+s/90+" ms for the last video frame.")):s=$}else s=$}var tt=Math.round(K.pts-K.dts);h.push(new ht(K.key,s,V,tt))}if(h.length&&st&&st<70){var rt=h[0].flags;rt.dependsOn=2,rt.isNonSync=0}this.nextAvcDts=g=l+s,this.isVideoContiguous=!0;var it={data1:et.moof(t.sequenceNumber++,o,nt({},t,{samples:h})),data2:B,startPTS:m/u,endPTS:(y+s)/u,startDTS:o/u,endDTS:g/u,type:"video",hasAudio:!1,hasVideo:!0,nb:h.length,dropped:t.dropped};return t.samples=[],t.dropped=0,it},e.remuxAudio=function(t,e,r,n,s){var o=t.inputTimeScale,l=o/(t.samplerate?t.samplerate:o),u=t.isAAC?1024:1152,d=u*l,h=this._initPTS,f=!t.isAAC&&this.typeSupported.mpeg,v=[],g=t.samples,p=f?0:8,m=this.nextAudioPts||-1,y=e*o;if(this.isAudioContiguous=r=r||g.length&&m>0&&(n&&Math.abs(y-m)<9e3||Math.abs(dt(g[0].pts-h,y)-m)<20*d),g.forEach((function(t){t.pts=dt(t.pts-h,y)})),!r||m<0){if(!(g=g.filter((function(t){return t.pts>=0}))).length)return;m=0===s?0:n?Math.max(0,y):g[0].pts}if(t.isAAC)for(var b=void 0!==s,T=this.config.maxAudioFramesDrift,E=0,S=m;E<g.length;E++){var L=g[E],A=L.pts,R=A-S,D=Math.abs(1e3*R/o);if(R<=-T*d&&b)0===E&&(c.b.warn("Audio frame @ "+(A/o).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/o)+" ms."),this.nextAudioPts=m=S=A);else if(R>=T*d&&D<1e4&&b){var _=Math.round(R/d);(S=A-_*d)<0&&(_--,S+=d),0===E&&(this.nextAudioPts=m=S),c.b.warn("[mp4-remuxer]: Injecting "+_+" audio frame @ "+(S/o).toFixed(3)+"s due to "+Math.round(1e3*R/o)+" ms gap.");for(var k=0;k<_;k++){var x=Math.max(S,0),w=Z.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);w||(c.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),w=L.unit.subarray()),g.splice(E,0,{unit:w,pts:x}),S+=d,E++}}L.pts=S,S+=d}for(var C,O=null,I=null,P=0,F=g.length;F--;)P+=g[F].unit.byteLength;for(var M=0,N=g.length;M<N;M++){var B=g[M],U=B.unit,G=B.pts;if(null!==I){v[M-1].duration=Math.round((G-I)/l)}else{if(r&&t.isAAC&&(G=m),O=G,!(P>0))return;P+=p;try{C=new Uint8Array(P)}catch(t){return void this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:P,reason:"fail allocating audio mdat "+P})}f||(new DataView(C.buffer).setUint32(0,P),C.set(et.types.mdat,4))}C.set(U,p);var j=U.byteLength;p+=j,v.push(new ht(!0,u,j,0)),I=G}var K=v.length;if(K){var H=v[v.length-1];this.nextAudioPts=m=I+l*H.duration;var V=f?new Uint8Array(0):et.moof(t.sequenceNumber++,O/l,nt({},t,{samples:v}));t.samples=[];var W=O/o,Y=m/o,X={data1:V,data2:C,startPTS:W,endPTS:Y,startDTS:W,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.isAudioContiguous=!0,X}},e.remuxEmptyAudio=function(t,e,r,i){var a=t.inputTimeScale,n=a/(t.samplerate?t.samplerate:a),s=this.nextAudioPts,o=(null!==s?s:i.startDTS*a)+this._initDTS,l=i.endDTS*a+this._initDTS,u=1024*n,d=Math.ceil((l-o)/u),h=Z.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(c.b.warn("[mp4-remuxer]: remux empty Audio"),h){for(var f=[],v=0;v<d;v++){var g=o+v*u;f.push({unit:h,pts:g,dts:g})}return t.samples=f,this.remuxAudio(t,e,r,!1)}c.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var r=t.samples.length;if(r){for(var i=t.inputTimeScale,a=this._initPTS,n=this._initDTS,s=0;s<r;s++){var o=t.samples[s];o.pts=dt(o.pts-a,e*i)/i,o.dts=dt(o.dts-n,e*i)/i}var l=t.samples;return t.samples=[],{samples:l}}},e.remuxText=function(t,e){var r=t.samples.length;if(r){for(var i=t.inputTimeScale,a=this._initPTS,n=0;n<r;n++){var s=t.samples[n];s.pts=dt(s.pts-a,e*i)/i}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}},t}();function dt(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}var ht=function(t,e,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=i,this.flags=new ft(t)},ft=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1},ct=r(5),vt=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,r){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Object(l.f)(t);e||(e=pt(i.audio,ct.a.AUDIO)),r||(r=pt(i.video,ct.a.VIDEO));var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:c.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a},e.remux=function(t,e,r,i,a){var n=this.initPTS,o=this.lastEndDTS,u={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};Object(s.a)(o)||(o=this.lastEndDTS=a||0);var d=e.samples;if(!d||!d.length)return u;var h={initPTS:void 0,timescale:1},f=this.initData;if(f&&f.length||(this.generateInitSegment(d),f=this.initData),!f||!f.length)return c.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1),Object(s.a)(n)||(this.initPTS=h.initPTS=n=gt(f,d,o));var v=Object(l.c)(d,f),g=o,p=v+g;Object(l.e)(f,d,n),v>0?this.lastEndDTS=p:(c.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var m=!!f.audio,y=!!f.video,b="";m&&(b+="audio"),y&&(b+="video");var T={data1:d,startPTS:g,startDTS:g,endPTS:p,endDTS:p,type:b,hasAudio:m,hasVideo:y,nb:1,dropped:0};return u.audio="audio"===T.type?T:void 0,u.video="audio"!==T.type?T:void 0,u.text=i,u.id3=r,u.initSegment=h,u},t}(),gt=function(t,e,r){return Object(l.d)(t,e)-r};function pt(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===ct.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var mt,yt=vt,bt=r(16);try{mt=self.performance.now.bind(self.performance)}catch(t){c.b.debug("Unable to use Performance API on this environment"),mt=self.Date.now}var Tt=[{demux:q,remux:ut},{demux:D,remux:yt},{demux:A,remux:ut},{demux:$,remux:ut}],Et=1024;Tt.forEach((function(t){var e=t.demux;Et=Math.max(Et,e.minProbeByteLength)}));var St=function(){function t(t,e,r,i,a){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new bt.a,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=i,this.id=a}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,i){var a=this,n=r.transmuxing;n.executeStart=mt();var s=new Uint8Array(t),o=this.cache,u=this.config,d=this.currentTransmuxState,h=this.transmuxConfig;i&&(this.currentTransmuxState=i);var f=function(t,e){var r=null;t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e);return r}(s,e);if(f&&"AES-128"===f.method){var c=this.getDecrypter();if(!u.enableSoftwareAES)return this.decryptionPromise=c.webCryptoDecrypt(s,f.key.buffer,f.iv.buffer).then((function(t){var e=a.push(t,null,r);return a.decryptionPromise=null,e})),this.decryptionPromise;var v=c.softwareDecrypt(s,f.key.buffer,f.iv.buffer);if(!v)return n.executeEnd=mt(),Lt(r);s=new Uint8Array(v)}var g=i||d,p=g.contiguous,m=g.discontinuity,y=g.trackSwitch,b=g.accurateTimeOffset,T=g.timeOffset,E=h.audioCodec,S=h.videoCodec,L=h.defaultInitPts,A=h.duration,R=h.initSegmentData;if((m||y)&&this.resetInitSegment(R,E,S,A),m&&this.resetInitialTimestamp(L),p||this.resetContiguity(),this.needsProbing(s,m,y)){if(o.dataLength){var D=o.flush();s=Object(l.a)(D,s)}this.configureTransmuxer(s,h)}var _=this.transmux(s,f,T,b,r),k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,n.executeEnd=mt(),_},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=mt();var n=this.decrypter,s=this.cache,o=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var u=[],d=o.timeOffset;if(n){var h=n.flush();h&&u.push(this.push(h,null,t))}var f=s.dataLength;s.reset();var c=this.demuxer,v=this.remuxer;if(!c||!v)return f>=Et&&this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=mt(),[Lt(t)];var g=c.flush(d);return At(g)?g.then((function(r){return e.flushRemux(u,r,t),u})):(this.flushRemux(u,g,t),u)},e.flushRemux=function(t,e,r){var i=e.audioTrack,a=e.avcTrack,n=e.id3Track,s=e.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;c.b.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var d=this.remuxer.remux(i,a,n,s,u,l,!0,this.id);t.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=mt()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,i){var a=this.demuxer,n=this.remuxer;a&&n&&(a.resetInitSegment(e,r,i),n.resetInitSegment(t,e,r))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,i,a){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,i,a):this.transmuxUnencrypted(t,r,i,a)},e.transmuxUnencrypted=function(t,e,r,i){var a=this.demuxer.demux(t,e,!1,!this.config.progressive),n=a.audioTrack,s=a.avcTrack,o=a.id3Track,l=a.textTrack;return{remuxResult:this.remuxer.remux(n,s,o,l,e,r,!1,this.id),chunkMeta:i}},e.transmuxSampleAes=function(t,e,r,i,a){var n=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:n.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,r,i,!1,n.id),chunkMeta:a}}))},e.configureTransmuxer=function(t,e){for(var r,i=this.config,a=this.observer,n=this.typeSupported,s=this.vendor,o=e.audioCodec,l=e.defaultInitPts,u=e.duration,d=e.initSegmentData,h=e.videoCodec,f=0,v=Tt.length;f<v;f++)if(Tt[f].demux.probe(t)){r=Tt[f];break}r||(c.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),r={demux:D,remux:yt});var g=this.demuxer,p=this.remuxer,m=r.remux,y=r.demux;p&&p instanceof m||(this.remuxer=new m(a,i,n,s)),g&&g instanceof y||(this.demuxer=new y(a,i,n),this.probe=y.probe),this.resetInitSegment(d,o,h,u),this.resetInitialTimestamp(l)},e.needsProbing=function(t,e,r){return!this.demuxer||!this.remuxer||e||r},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new n.a(this.observer,this.config)),t},t}();var Lt=function(t){return{remuxResult:{},chunkMeta:t}};function At(t){return"then"in t&&t.then instanceof Function}var Rt=function(t,e,r,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=i,this.defaultInitPts=a},Dt=function(t,e,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=a}},function(t,e,r){var i,a,n,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,a=/^([^\/?#]*)([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var n=o.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=o.normalizePath(n.path),o.buildURLFromParts(n)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=a.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(u.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var d=s.path,h=d.substring(0,d.lastIndexOf("/")+1)+n.path;u.path=o.normalizePath(h)}else u.path=s.path,n.params||(u.params=s.params,n.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(n.path):n.path),o.buildURLFromParts(u)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o},function(t,e){t.exports=void 0},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,a="~";function n(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,r,i,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,i||t,n),l=a?a+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function u(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=a?a+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,n=r.length,s=new Array(n);i<n;i++)s[i]=r[i].fn;return s},u.prototype.listenerCount=function(t){var e=a?a+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,i,n,s){var o=a?a+t:t;if(!this._events[o])return!1;var l,u,d=this._events[o],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,r),!0;case 4:return d.fn.call(d.context,e,r,i),!0;case 5:return d.fn.call(d.context,e,r,i,n),!0;case 6:return d.fn.call(d.context,e,r,i,n,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];d.fn.apply(d.context,l)}else{var f,c=d.length;for(u=0;u<c;u++)switch(d[u].once&&this.removeListener(t,d[u].fn,void 0,!0),h){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,e);break;case 3:d[u].fn.call(d[u].context,e,r);break;case 4:d[u].fn.call(d[u].context,e,r,i);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];d[u].fn.apply(d[u].context,l)}}return!0},u.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,i){var n=a?a+t:t;if(!this._events[n])return this;if(!e)return l(this,n),this;var s=this._events[n];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||l(this,n);else{for(var o=0,u=[],d=s.length;o<d;o++)(s[o].fn!==e||i&&!s[o].once||r&&s[o].context!==r)&&u.push(s[o]);u.length?this._events[n]=1===u.length?u[0]:u:l(this,n)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&l(this,e)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=a,u.EventEmitter=u,t.exports=u},function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var i=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),a=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),n=r(8);var s=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],d=o[2],h=o[3],f=new Uint32Array(256),c=0,v=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var p=v^v<<1^v<<2^v<<3^v<<4;p=p>>>8^255&p^99,t[c]=p,e[p]=c;var m=f[c],y=f[m],b=f[y],T=257*f[p]^16843008*p;i[c]=T<<24|T>>>8,a[c]=T<<16|T>>>16,n[c]=T<<8|T>>>24,s[c]=T,T=16843009*b^65537*y^257*m^16843008*c,l[p]=T<<24|T>>>8,u[p]=T<<16|T>>>16,d[p]=T<<8|T>>>24,h[p]=T,c?(c=m^f[f[f[b^m]]],v^=f[f[v]]):c=v=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n,s,o,l,u=this.ksRows=4*(a+6+1),d=this.keySchedule=new Uint32Array(u),h=this.invKeySchedule=new Uint32Array(u),f=this.sBox,c=this.rcon,v=this.invSubMix,g=v[0],p=v[1],m=v[2],y=v[3];for(n=0;n<u;n++)n<a?o=d[n]=e[n]:(l=o,n%a==0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=c[n/a|0]<<24):a>6&&n%a==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),d[n]=o=(d[n-a]^l)>>>0);for(s=0;s<u;s++)n=u-s,l=3&s?d[n]:d[n-4],h[s]=s<4||n<=4?l:g[f[l>>>24]]^p[f[l>>>16&255]]^m[f[l>>>8&255]]^y[f[255&l]],h[s]=h[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var i,a,n,s,o,l,u,d,h,f,c,v,g,p,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,T=this.invSubMix,E=T[0],S=T[1],L=T[2],A=T[3],R=this.uint8ArrayToUint32Array_(r),D=R[0],_=R[1],k=R[2],x=R[3],w=new Int32Array(t),C=new Int32Array(w.length),O=this.networkToHostOrderSwap;e<w.length;){for(h=O(w[e]),f=O(w[e+1]),c=O(w[e+2]),v=O(w[e+3]),o=h^y[0],l=v^y[1],u=c^y[2],d=f^y[3],g=4,p=1;p<m;p++)i=E[o>>>24]^S[l>>16&255]^L[u>>8&255]^A[255&d]^y[g],a=E[l>>>24]^S[u>>16&255]^L[d>>8&255]^A[255&o]^y[g+1],n=E[u>>>24]^S[d>>16&255]^L[o>>8&255]^A[255&l]^y[g+2],s=E[d>>>24]^S[o>>16&255]^L[l>>8&255]^A[255&u]^y[g+3],o=i,l=a,u=n,d=s,g+=4;i=b[o>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&d]^y[g],a=b[l>>>24]<<24^b[u>>16&255]<<16^b[d>>8&255]<<8^b[255&o]^y[g+1],n=b[u>>>24]<<24^b[d>>16&255]<<16^b[o>>8&255]<<8^b[255&l]^y[g+2],s=b[d>>>24]<<24^b[o>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^y[g+3],C[e]=O(i^D),C[e+1]=O(s^_),C[e+2]=O(n^k),C[e+3]=O(a^x),D=h,_=f,k=c,x=v,e+=4}return C.buffer},t}(),o=r(1),l=r(6),u=function(){function t(t,e,r){var i=(void 0===r?{}:r).removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=a,a)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e,r,i,a=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(r=(e=a).byteLength,(i=r&&new DataView(e.buffer).getUint8(r-1))?Object(n.a)(e,0,r-i):e):a}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r,i){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,r);var a=this.flush();a&&i(a.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,r).then(i)},e.softwareDecrypt=function(t,e,r){var i=this.currentIV,a=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(t=Object(l.a)(o,t),this.remainderData=null);var u=this.getValidChunk(t);if(!u.length)return null;i&&(r=i);var d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new s),d.expandKey(e);var h=a;return this.currentResult=d.decrypt(u.buffer,0,r),this.currentIV=Object(n.a)(u,-16).buffer,h||null},e.webCryptoDecrypt=function(t,e,r){var n=this,s=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new a(s,e)),this.fastAesKey.expandKey().then((function(e){return s?new i(s,r).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return n.onWebCryptoError(i,t,e,r)}))},e.onWebCryptoError=function(t,e,r,i){return o.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,i)},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=Object(n.a)(t,0,r),this.remainderData=Object(n.a)(t,r)),e},e.logOnce=function(t){this.logEnabled&&(o.b.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var i=r(10);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(i.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e,r,n;return t.fromURL=function(e,r){return new t(e,r)},t.fromURI=function(e){return new t(e)},e=t,(r=[{key:"uri",get:function(){return this._uri}}])&&a(e.prototype,r),n&&a(e,n),t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var i=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),i=0,a=0;a<t.length;a++){var n=t[a];r.set(n,i),i+=n.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},function(t,e,r){function i(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw (console.error(t), t)};var i=r(r.s=ENTRY_MODULE);return i.default||i}function a(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(t,e,i){var n={};n[i]=[];var s=e.toString(),o=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return n;for(var l,u=o[1],d=new RegExp("(\\\\n|\\W)"+a(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=d.exec(s);)"dll-reference"!==l[3]&&n[i].push(l[3]);for(d=new RegExp("\\("+a(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=d.exec(s);)t[l[2]]||(n[i].push(l[1]),t[l[2]]=r(l[1]).m),n[l[2]]=n[l[2]]||[],n[l[2]].push(l[4]);for(var h,f=Object.keys(n),c=0;c<f.length;c++)for(var v=0;v<n[f[c]].length;v++)h=n[f[c]][v],isNaN(1*h)||(n[f[c]][v]=1*n[f[c]][v]);return n}function s(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var a={main:r.m},o=e.all?{main:Object.keys(a.main)}:function(t,e){for(var r={main:[e]},i={main:[]},a={main:{}};s(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var u=o[l],d=r[u].pop();if(a[u]=a[u]||{},!a[u][d]&&t[u][d]){a[u][d]=!0,i[u]=i[u]||[],i[u].push(d);for(var h=n(t,t[u][d],u),f=Object.keys(h),c=0;c<f.length;c++)r[f[c]]=r[f[c]]||[],r[f[c]]=r[f[c]].concat(h[f[c]])}}return i}(a,t),l="";Object.keys(o).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;o[t][e];)e++;o[t].push(e),a[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map((function(e){return JSON.stringify(e)+": "+a[t][e].toString()})).join(",")+"});\n"})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map((function(t){return JSON.stringify(t)+": "+a.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(e.bare)return u;var d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),h=new window.Worker(d);return h.objectURL=d,h}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var i=r(9),a=r(0),n=r(1),s=r(13);function o(t){var e=new s.EventEmitter,r=function(e,r){t.postMessage({event:e,data:r})};e.on(a.a.FRAG_DECRYPTED,r),e.on(a.a.ERROR,r),t.addEventListener("message",(function(a){var s=a.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.transmuxer=new i.c(e,s.typeSupported,o,s.vendor,s.id),Object(n.a)(o.debug),r("init",null);break;case"configure":t.transmuxer.configure(s.config);break;case"demux":var u=t.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);Object(i.d)(u)?u.then((function(e){l(t,e)})):l(t,u);break;case"flush":var h=s.chunkMeta,f=t.transmuxer.flush(h);Object(i.d)(f)?f.then((function(e){d(t,e,h)})):d(t,f,h)}}))}function l(t,e){if((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment){var r,i=[],a=e.remuxResult,n=a.audio,s=a.video;n&&u(i,n),s&&u(i,s),t.postMessage({event:"transmuxComplete",data:e},i)}}function u(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function d(t,e,r){e.forEach((function(e){l(t,e)})),t.postMessage({event:"flush",data:r})}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return we}));var i=r(10),a=r(3),n=r(0),s=r(2),o=r(1),l=r(6),u=r(5);function d(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e,r,i;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},e=t,(r=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(a.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&d(e.prototype,r),i&&d(e,i),t}(),f=r(15),c=/^(\d+)x(\d+)$/,v=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,g=function(){function t(e){for(var r in("string"==typeof e&&(e=t.parseAttrList(e)), e))e.hasOwnProperty(r)&&(this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=c.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(v.lastIndex=0;null!==(e=v.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},t}(),p={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function m(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var y=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,b=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),E=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),S=/\.(mp4|m4s|m4v|m4a)$/i;var L=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];if(i.id===e)return i}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return i.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var i,a=[],n={},s=!1;for(y.lastIndex=0;null!=(i=y.exec(e));)if(i[1]){var o=new g(i[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(i[2],r)},u=o.decimalResolution("RESOLUTION");u&&(l.width=u.width,l.height=u.height),A((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),a.push(l)}else if(i[3]){var d=new g(i[3]);d["DATA-ID"]&&(s=!0,n[d["DATA-ID"]]=d)}return{levels:a,sessionData:s?n:null}},t.parseMasterPlaylistMedia=function(e,r,i,a){var n;void 0===a&&(a=[]);var s=[],o=0;for(b.lastIndex=0;null!==(n=b.exec(e));){var l=new g(n[1]);if(l.TYPE===i){var u={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:i,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,r):""};if(a.length){var d=t.findGroup(a,u.groupId)||a[0];R(u,d,"audioCodec"),R(u,d,"textCodec")}s.push(u)}}return s},t.parseLevelPlaylist=function(t,e,r,n,s){var l,d,c,v=new h(e),p=v.fragments,m=null,y=0,b=0,L=0,A=0,R=null,_=new u.b(n,e),k=-1,x=!1;for(T.lastIndex=0,v.m3u8=t;null!==(l=T.exec(t));){x&&(x=!1,(_=new u.b(n,e)).start=L,_.sn=y,_.cc=A,_.level=r,m&&(_.initSegment=m,_.rawProgramDateTime=m.rawProgramDateTime));var w=l[1];if(w){_.duration=parseFloat(w);var C=(" "+l[2]).slice(1);_.title=C||null,_.tagList.push(C?["INF",w,C]:["INF",w])}else if(l[3])Object(a.a)(_.duration)&&(_.start=L,c&&(_.levelkey=c),_.sn=y,_.level=r,_.cc=A,_.urlId=s,p.push(_),_.relurl=(" "+l[3]).slice(1),D(_,R),R=_,L+=_.duration,y++,b=0,x=!0);else if(l[4]){var O=(" "+l[4]).slice(1);R?_.setByteRange(O,R):_.setByteRange(O)}else if(l[5])_.rawProgramDateTime=(" "+l[5]).slice(1),_.tagList.push(["PROGRAM-DATE-TIME",_.rawProgramDateTime]),-1===k&&(k=p.length);else{if(!(l=l[0].match(E))){o.b.warn("No matches on slow regex match for level playlist!");continue}for(d=1;d<l.length&&void 0===l[d];d++);var I=(" "+l[d]).slice(1),P=(" "+l[d+1]).slice(1),F=l[d+2]?(" "+l[d+2]).slice(1):"";switch(I){case"PLAYLIST-TYPE":v.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":y=v.startSN=parseInt(P);break;case"SKIP":var M=new g(P),N=M.decimalInteger("SKIPPED-SEGMENTS");if(Object(a.a)(N)){v.skippedSegments=N;for(var B=N;B--;)p.unshift(null);y+=N}var U=M.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(v.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":v.targetduration=parseFloat(P);break;case"VERSION":v.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(P||F)&&_.tagList.push(F?[P,F]:[P]);break;case"DIS":A++;case"GAP":_.tagList.push([I]);break;case"BITRATE":_.tagList.push([I,P]);break;case"DISCONTINUITY-SEQ":A=parseInt(P);break;case"KEY":var G,j=new g(P),K=j.enumeratedString("METHOD"),H=j.URI,V=j.hexadecimalInteger("IV"),W=j.enumeratedString("KEYFORMATVERSIONS"),Y=j.enumeratedString("KEYID"),X=null!=(G=j.enumeratedString("KEYFORMAT"))?G:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(X)>-1){o.b.warn("Keyformat "+X+" is not supported from the manifest");continue}if("identity"!==X)continue;K&&(c=f.a.fromURL(e,H),H&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(K)>=0&&(c.method=K,c.keyFormat=X,Y&&(c.keyID=Y),W&&(c.keyFormatVersions=W),c.iv=V));break;case"START":var q=new g(P).decimalFloatingPoint("TIME-OFFSET");Object(a.a)(q)&&(v.startTimeOffset=q);break;case"MAP":var z=new g(P);_.relurl=z.URI,z.BYTERANGE&&_.setByteRange(z.BYTERANGE),_.level=r,_.sn="initSegment",c&&(_.levelkey=c),_.initSegment=null,m=_,x=!0;break;case"SERVER-CONTROL":var Q=new g(P);v.canBlockReload=Q.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=Q.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&Q.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=Q.optionalFloat("PART-HOLD-BACK",0),v.holdBack=Q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var $=new g(P);v.partTarget=$.decimalFloatingPoint("PART-TARGET");break;case"PART":var Z=v.partList;Z||(Z=v.partList=[]);var J=b>0?Z[Z.length-1]:void 0,tt=b++,et=new u.c(new g(P),_,e,tt,J);Z.push(et),_.duration+=et.duration;break;case"PRELOAD-HINT":var rt=new g(P);v.preloadHint=rt;break;case"RENDITION-REPORT":var it=new g(P);v.renditionReports=v.renditionReports||[],v.renditionReports.push(it);break;default:o.b.warn("line parsed but not handled: "+l)}}}R&&!R.relurl?(p.pop(),L-=R.duration,v.partList&&(v.fragmentHint=R)):v.partList&&(D(_,R),_.cc=A,v.fragmentHint=_);var at=p.length,nt=p[0],st=p[at-1];if((L+=v.skippedSegments*v.targetduration)>0&&at&&st){v.averagetargetduration=L/at;var ot=st.sn;v.endSN="initSegment"!==ot?ot:0,nt&&(v.startCC=nt.cc,nt.initSegment||v.fragments.every((function(t){return t.relurl&&(e=t.relurl,S.test(null!=(r=null===(a=i.parseURL(e))||void 0===a?void 0:a.path)?r:""));var e,r,a}))&&(o.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(_=new u.b(n,e)).relurl=st.relurl,_.level=r,_.sn="initSegment",nt.initSegment=_,v.needSidxRanges=!0))}else v.endSN=0,v.startCC=0;return v.fragmentHint&&(L+=v.fragmentHint.duration),v.totalduration=L,v.endCC=A,k>0&&function(t,e){for(var r=t[e],i=e;i--;){var a=t[i];if(!a)return;a.programDateTime=r.programDateTime-1e3*a.duration,r=a}}(p,k),v},t}();function A(t,e){["video","audio","text"].forEach((function(r){var i=t.filter((function(t){return function(t,e){var r=p[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(i.length){var a=i.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=a.length>0?a[0]:i[0],t=t.filter((function(t){return-1===i.indexOf(t)}))}})),e.unknownCodecs=t}function R(t,e,r){var i=e[r];i&&(t[r]=i)}function D(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(a.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var _=r(4);function k(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var x=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(n.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(n.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(n.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(n.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,a=new(r||i)(e);return t.loader=a,this.loaders[t.type]=a,a},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var r=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:_.a.MANIFEST,url:r,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var r=e.id,i=e.level,a=e.url,n=e.deliveryDirectives;this.load({id:r,groupId:null,level:i,responseType:"text",type:_.a.LEVEL,url:a,deliveryDirectives:n})},e.onAudioTrackLoading=function(t,e){var r=e.id,i=e.groupId,a=e.url,n=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:_.a.AUDIO_TRACK,url:a,deliveryDirectives:n})},e.onSubtitleTrackLoading=function(t,e){var r=e.id,i=e.groupId,a=e.url,n=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:_.a.SUBTITLE_TRACK,url:a,deliveryDirectives:n})},e.load=function(t){var e,r,i,a,n,s,l=this.hls.config,u=this.getInternalLoader(t);if(u){var d=u.context;if(d&&d.url===t.url)return void o.b.trace("[playlist-loader]: playlist request ongoing");o.b.log("[playlist-loader]: aborting previous loader for type: "+t.type),u.abort()}switch(t.type){case _.a.MANIFEST:r=l.manifestLoadingMaxRetry,i=l.manifestLoadingTimeOut,a=l.manifestLoadingRetryDelay,n=l.manifestLoadingMaxRetryTimeout;break;case _.a.LEVEL:case _.a.AUDIO_TRACK:case _.a.SUBTITLE_TRACK:r=0,i=l.levelLoadingTimeOut;break;default:r=l.levelLoadingMaxRetry,i=l.levelLoadingTimeOut,a=l.levelLoadingRetryDelay,n=l.levelLoadingMaxRetryTimeout}if((u=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part)&&(t.type===_.a.LEVEL&&null!==t.level?s=this.hls.levels[t.level].details:t.type===_.a.AUDIO_TRACK&&null!==t.id?s=this.hls.audioTracks[t.id].details:t.type===_.a.SUBTITLE_TRACK&&null!==t.id&&(s=this.hls.subtitleTracks[t.id].details),s)){var h=s.partTarget,f=s.targetduration;h&&f&&(i=Math.min(1e3*Math.max(3*h,.8*f),i))}var c={timeout:i,maxRetry:r,retryDelay:a,maxRetryDelay:n,highWaterMark:0},v={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(t,c,v)},e.loadsuccess=function(t,e,r,i){if(void 0===i&&(i=null),r.isSidxRequest)return this.handleSidxRequest(t,r),void this.handlePlaylistLoaded(t,e,r,i);this.resetInternalLoader(r.type);var a=t.data;0===a.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,r,i):this.handleMasterPlaylist(t,e,r,i)):this.handleManifestParsingError(t,r,"no EXTM3U delimiter",i)},e.loaderror=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!1,t)},e.loadtimeout=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!0)},e.handleMasterPlaylist=function(t,e,r,i){var a=this.hls,s=t.data,l=k(t,r),u=L.parseMasterPlaylist(s,l),d=u.levels,h=u.sessionData;if(d.length){var f=d.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),c=d.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),v=L.parseMasterPlaylistMedia(s,l,"AUDIO",f),p=L.parseMasterPlaylistMedia(s,l,"SUBTITLES",c),m=L.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");if(v.length)v.some((function(t){return!t.url}))||!d[0].audioCodec||d[0].attrs.AUDIO||(o.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new g({}),bitrate:0,url:""}));a.trigger(n.a.MANIFEST_LOADED,{levels:d,audioTracks:v,subtitles:p,captions:m,url:l,stats:e,networkDetails:i,sessionData:h})}else this.handleManifestParsingError(t,r,"no level found in manifest",i)},e.handleTrackOrLevelPlaylist=function(t,e,r,i){var o=this.hls,l=r.id,u=r.level,d=r.type,h=k(t,r),f=Object(a.a)(l)?l:0,c=Object(a.a)(u)?u:f,v=function(t){switch(t.type){case _.a.AUDIO_TRACK:return _.b.AUDIO;case _.a.SUBTITLE_TRACK:return _.b.SUBTITLE;default:return _.b.MAIN}}(r),p=L.parseLevelPlaylist(t.data,h,c,v,f);if(p.fragments.length){if(d===_.a.MANIFEST){var m={attrs:new g({}),bitrate:0,details:p,name:"",url:h};o.trigger(n.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:h,stats:e,networkDetails:i,sessionData:null})}if(e.parsing.end=performance.now(),p.needSidxRanges){var y,b=null===(y=p.fragments[0].initSegment)||void 0===y?void 0:y.url;this.load({url:b,isSidxRequest:!0,type:d,level:u,levelDetails:p,id:l,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else r.levelDetails=p,this.handlePlaylistLoaded(t,e,r,i)}else o.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.LEVEL_EMPTY_ERROR,fatal:!1,url:h,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},e.handleSidxRequest=function(t,e){var r=Object(l.g)(new Uint8Array(t.data));if(r){var i=r.references,a=e.levelDetails;i.forEach((function(t,e){var i=t.info,n=a.fragments[e];0===n.byteRange.length&&n.setByteRange(String(1+i.end-i.start)+"@"+String(i.start)),n.initSegment&&n.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,r,i){this.hls.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:e.type===_.a.MANIFEST,url:t.url,reason:r,response:t,context:e,networkDetails:i})},e.handleNetworkError=function(t,e,r,i){void 0===r&&(r=!1),o.b.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var a=s.a.UNKNOWN,l=!1,u=this.getInternalLoader(t);switch(t.type){case _.a.MANIFEST:a=r?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,l=!0;break;case _.a.LEVEL:a=r?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,l=!1;break;case _.a.AUDIO_TRACK:a=r?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case _.a.SUBTITLE_TRACK:a=r?s.a.SUBTITLE_TRACK_LOAD_TIMEOUT:s.a.SUBTITLE_LOAD_ERROR,l=!1}u&&this.resetInternalLoader(t.type);var d={type:s.b.NETWORK_ERROR,details:a,fatal:l,url:t.url,loader:u,context:t,networkDetails:e};i&&(d.response=i),this.hls.trigger(n.a.ERROR,d)},e.handlePlaylistLoaded=function(t,e,r,i){var a=r.type,s=r.level,o=r.id,l=r.groupId,u=r.loader,d=r.levelDetails,h=r.deliveryDirectives;if(null!=d&&d.targetduration){if(u)switch(d.live&&(u.getCacheAge&&(d.ageHeader=u.getCacheAge()||0),u.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case _.a.MANIFEST:case _.a.LEVEL:this.hls.trigger(n.a.LEVEL_LOADED,{details:d,level:s||0,id:o||0,stats:e,networkDetails:i,deliveryDirectives:h});break;case _.a.AUDIO_TRACK:this.hls.trigger(n.a.AUDIO_TRACK_LOADED,{details:d,id:o||0,groupId:l||"",stats:e,networkDetails:i,deliveryDirectives:h});break;case _.a.SUBTITLE_TRACK:this.hls.trigger(n.a.SUBTITLE_TRACK_LOADED,{details:d,id:o||0,groupId:l||"",stats:e,networkDetails:i,deliveryDirectives:h})}}else this.handleManifestParsingError(t,r,"invalid target duration",i)},t}(),w=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(n.a.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(n.a.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in (this._unregisterListeners(), this.loaders)){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var r=e.frag,i=r.type,a=this.loaders[i];if(r.decryptdata){var s=r.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(a&&(o.b.warn("abort previous key loader for type:"+i),a.abort()),!s)return void o.b.warn("key uri is falsy");var u=l.loader,d=r.loader=this.loaders[i]=new u(l);this.decrypturl=s,this.decryptkey=null;var h={url:s,frag:r,responseType:"arraybuffer"},f={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(h,f,c)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(n.a.KEY_LOADED,{frag:r}))}else o.b.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,r){var i=r.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(n.a.KEY_LOADED,{frag:i})):o.b.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(n.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t;}();function C(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function O(t,e,r){var i=t.mode;if("disabled"===i&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var a=function(t,e,r){var i=[],a=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;var i=0,a=r;for(;i<=a;){var n=Math.floor((a+i)/2);if(e<t[n].startTime)a=n-1;else{if(!(e>t[n].startTime&&i<r))return n;i=n+1}}return t[i].startTime-e<e-t[a].startTime?i:a}(t,e);if(a>-1)for(var n=a,s=t.length;n<s;n++){var o=t[n];if(o.startTime>=e&&o.endTime<=r)i.push(o);else if(o.startTime>r)return i}return i}(t.cues,e,r),n=0;n<a.length;n++)t.removeCue(a[n]);"disabled"===i&&(t.mode=i)}var I=r(7),P=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(!function(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return C(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=e.frag,i=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var a=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,n=0;n<i.length;n++){var s=I.c(i[n].data);if(s){var o=i[n].pts,l=n<i.length-1?i[n+1].pts:r.end;l-o<=0&&(l=o+.25);for(var u=0;u<s.length;u++){var d=s[u];if(!I.e(d)){var h=new a(o,l,"");h.value=d,this.id3Track.addCue(h)}}}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,a=e.type;if(!a||"audio"===a){var n=this.id3Track;n&&O(n,r,i)}},t}();function F(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var M,N=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,r,i,a=t.prototype;return a.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},a.registerListeners=function(){this.hls.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(n.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(n.a.ERROR,this.onError,this)},a.unregisterListeners=function(){this.hls.off(n.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(n.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(n.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(n.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(n.a.ERROR,this.onError)},a.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},a.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},a.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},a.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},a.onError=function(t,e){e.details===s.a.BUFFER_STALLED_ERROR&&(this.stallCount++,o.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},a.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var i=this.config,a=i.lowLatencyMode,n=i.maxLiveSyncPlaybackRate;if(a&&1!==n){var s=this.targetLatency;if(null!==s){var o=r-s,l=o<Math.min(this.maxLatency,s+e.targetduration);if(e.live&&l&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,n)),d=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,d))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},a.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},a.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},e=t,(r=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,i=t.targetduration,a=this.config,n=a.liveSyncDuration,s=a.liveSyncDurationCount,o=a.lowLatencyMode,l=this.hls.userConfig,u=o&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==n?n:s*i);var d=i;return u+Math.min(1*this.stallCount,d)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var i=r.edge,a=t-e-this.edgeStalled,n=i-r.totalduration,s=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(n,a),s)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return r?t.buffered.end(r-1):e.edge-this.currentTime}}])&&F(e.prototype,r),i&&F(e,i),t}();function B(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}!function(t){t.No="",t.Yes="YES",t.v2="v2"}(M||(M={}));var U=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),G=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e,r,i;return e=t,(r=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&B(e.prototype,r),i&&B(e,i),t}();function j(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function K(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}function H(t,e){var r=e.startPTS;if(Object(a.a)(r)){var i,n=0;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&(i.duration=n)}else if(e.sn>t.sn){t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration}else e.start=Math.max(t.start-e.duration,0)}function V(t,e,r,i,n,s){i-r<=0&&(o.b.warn("Fragment should have a positive duration",e),i=r+e.duration,s=n+e.duration);var l=r,u=i,d=e.startPTS,h=e.endPTS;if(Object(a.a)(d)){var f=Math.abs(d-r);Object(a.a)(e.deltaPTS)?e.deltaPTS=Math.max(f,e.deltaPTS):e.deltaPTS=f,l=Math.max(r,d),r=Math.min(r,d),n=Math.min(n,e.startDTS),u=Math.min(i,h),i=Math.max(i,h),s=Math.max(s,e.endDTS)}e.duration=i-r;var c=r-e.start;e.appendedPTS=i,e.start=e.startPTS=r,e.maxStartPTS=l,e.startDTS=n,e.endPTS=i,e.minEndPTS=u,e.endDTS=s;var v,g=e.sn;if(!t||g<t.startSN||g>t.endSN)return 0;var p=g-t.startSN,m=t.fragments;for(m[p]=e,v=p;v>0;v--)H(m[v],m[v-1]);for(v=p;v<m.length-1;v++)H(m[v],m[v+1]);return t.fragmentHint&&H(m[m.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,c}function W(t,e){for(var r=null,i=t.fragments,n=i.length-1;n>=0;n--){var s=i[n].initSegment;if(s){r=s;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var l,u=0;if(function(t,e,r){for(var i=e.skippedSegments,a=Math.max(t.startSN,e.startSN)-e.startSN,n=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=a;u<=n;u++){var d=l[s+u],h=o[u];i&&!h&&u<i&&(h=e.fragments[u]=d),d&&h&&r(d,h)}}(t,e,(function(t,i){var n;t.relurl&&(u=t.cc-i.cc),Object(a.a)(t.startPTS)&&Object(a.a)(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.appendedPTS=t.appendedPTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(l=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,i.urlId=t.urlId,t.initSegment?(i.initSegment=t.initSegment,r=t.initSegment):i.initSegment&&i.initSegment.relurl!=(null===(n=r)||void 0===n?void 0:n.relurl)||(i.initSegment=r)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){o.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var d=e.skippedSegments;d--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var h=e.fragments;if(u){o.b.warn("discontinuity sliding from playlist, take drift into account");for(var f=0;f<h.length;f++)h[f].cc+=u}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var i=0,a=0,n=t.length;a<=n;a++){var s=t[a],o=e[a+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):i--}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),l?V(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):Y(t,e),h.length&&(e.totalduration=e.edge-h[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var c=e.advancedDateTime;if(e.advanced&&c){var v=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=v),e.driftEndTime=c,e.driftEnd=v}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function Y(t,e){var r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments;r<0||r>=i.length||function(t,e){if(e){for(var r=t.fragments,i=t.skippedSegments;i<r.length;i++)r[i].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}(e,i[r].start)}var X=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.b.log.bind(o.b,e+":"),this.warn=o.b.warn.bind(o.b,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===s.b.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r)for(var i=0;i<r.length;i++){var n=r[i],s=""+n.URI;if(s===t.substr(-s.length)){var o=parseInt(n["LAST-MSN"]),l=parseInt(n["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var u=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&u>e.partTarget&&(l+=1)}if(Object(a.a)(o))return new U(o,Object(a.a)(l)?l:void 0,M.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,r){var i=this,a=e.details,n=e.stats,s=n.loading.end?Math.max(0,self.performance.now()-n.loading.end):0;if(a.advancedDateTime=Date.now()-s,a.live||null!=r&&r.live){if(a.reloaded(r),r&&this.log("live playlist "+t+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),r&&a.fragments.length>0&&W(r,a),!this.canLoad||!a.live)return;var o,l=void 0,u=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var d=this.hls.config.lowLatencyMode,h=a.lastPartSn,f=a.endSN,c=a.lastPartIndex,v=h===f;-1!==c?(l=v?f+1:h,u=v?d?0:c:c+1):l=f+1;var g=a.age,p=g+a.ageHeader,m=Math.min(p-a.partTarget,1.5*a.targetduration);if(m>0){if(r&&m>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+m+" with playlist age: "+a.age),m=0;else{var y=Math.floor(m/a.targetduration);if(l+=y,void 0!==u)u+=Math.round(m%a.targetduration/a.partTarget);this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+m+" skip sn "+y+" to part "+u)}a.tuneInGoal=m}if(o=this.getDeliveryDirectives(a,e.deliveryDirectives,l,u),d||!v)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(a,e.deliveryDirectives,l,u);var b=function(t,e){var r,i=1e3*t.levelTargetDuration,a=i/2,n=t.age,s=n>0&&n<3*i,o=e.loading.end-e.loading.start,l=t.availabilityDelay;if(!1===t.updated)if(s){var u=333*t.misses;r=Math.max(Math.min(a,2*o),u),t.availabilityDelay=(t.availabilityDelay||0)+r}else r=a;else s?(l=Math.min(l||i/2,n),t.availabilityDelay=l,r=l+i-n):r=i-o;return Math.round(r)}(a,n);void 0!==l&&a.canBlockReload&&(b-=a.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(o)}),b)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,i){var a=function(t,e){var r=t.canSkipUntil,i=t.canSkipDateRanges,a=t.endSN;return r&&(void 0!==e?e-a:0)<r?i?M.v2:M.Yes:M.No}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,i=e.part,a=M.No),new U(r,i,a)},e.retryLoadingOrFail=function(t){var e,r=this,i=this.hls.config,a=this.retryCount<i.levelLoadingMaxRetry;if(a)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var n=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return r.loadPlaylist()}),n),this.warn("retry playlist loading #"+this.retryCount+" in "+n+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return a},t}();function q(){return(q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function z(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $,Z=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),J=function(t){var e,r;function i(e){var r;return(r=t.call(this,e,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,Q(e,r);var a,o,l,u=i.prototype;return u._registerListeners=function(){var t=this.hls;t.on(n.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this),t.on(n.a.ERROR,this.onError,this)},u._unregisterListeners=function(){var t=this.hls;t.off(n.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this),t.off(n.a.ERROR,this.onError,this)},u.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},u.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},u.onManifestLoaded=function(t,e){var r,i,a=[],o=[],l=[],u={},d=!1,h=!1,f=!1;if(e.levels.forEach((function(t){var e=t.attrs;d=d||!(!t.width||!t.height),h=h||!!t.videoCodec,f=f||!!t.audioCodec,Z&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var r=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(i=u[r])?i.url.push(t.url):(i=new G(t),u[r]=i,a.push(i)),e&&(e.AUDIO&&j(i,"audio",e.AUDIO),e.SUBTITLES&&j(i,"text",e.SUBTITLES))})),(d||h)&&f&&(a=a.filter((function(t){var e=t.videoCodec,r=t.width,i=t.height;return!!e||!(!r||!i)}))),a=a.filter((function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||m(e,"audio"))&&(!r||m(r,"video"))})),e.audioTracks&&K(o=e.audioTracks.filter((function(t){return!t.audioCodec||m(t.audioCodec,"audio")}))),e.subtitles&&K(l=e.subtitles),a.length>0){r=a[0].bitrate,a.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=a;for(var c=0;c<a.length;c++)if(a[c].bitrate===r){this._firstLevel=c,this.log("manifest loaded, "+a.length+" level(s) found, first bitrate: "+r);break}var v=f&&!h,g={levels:a,audioTracks:o,subtitleTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:f,video:h,altAudio:!v&&o.some((function(t){return!!t.url}))};this.hls.trigger(n.a.MANIFEST_PARSED,g),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},u.onError=function(e,r){if(t.prototype.onError.call(this,e,r),!r.fatal){var i=r.context,a=this._levels[this.currentLevelIndex];if(i&&(i.type===_.a.AUDIO_TRACK&&a.audioGroupIds&&i.groupId===a.audioGroupIds[a.urlId]||i.type===_.a.SUBTITLE_TRACK&&a.textGroupIds&&i.groupId===a.textGroupIds[a.urlId]))this.redundantFailover(this.currentLevelIndex);else{var n,o=!1,l=!0;switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(r.frag){var u=this._levels[r.frag.level];u?(u.fragmentError++,u.fragmentError>this.hls.config.fragLoadingMaxRetry&&(n=r.frag.level)):n=r.frag.level}break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(l=!1),n=i.level),o=!0;break;case s.a.REMUX_ALLOC_ERROR:n=r.level,o=!0}void 0!==n&&this.recoverLevel(r,n,o,l)}}},u.recoverLevel=function(t,e,r,i){var a=t.details,n=this._levels[e];if(n.loadError++,r){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(i){var s=n.url.length;if(s>1&&n.loadError<s)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var o=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(a+": switch to "+o),t.levelRetry=!0,this.hls.nextAutoLevel=o)}}},u.redundantFailover=function(t){var e=this._levels[t],r=e.url.length;if(r>1){var i=(e.urlId+1)%r;this.warn("Switching to redundant URL-id "+i),this._levels.forEach((function(t){t.urlId=i})),this.level=t}},u.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===_.b.MAIN){var i=this._levels[r.level];void 0!==i&&(i.fragmentError=0,i.loadError=0)}},u.onLevelLoaded=function(t,e){var r,i,a=e.level,n=e.details,s=this._levels[a];if(!s)return this.warn("Invalid level index "+a),void(null!==(i=e.deliveryDirectives)&&void 0!==i&&i.skip&&(n.deltaUpdateFailed=!0));a===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(a,e,s.details)):null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(n.deltaUpdateFailed=!0)},u.onAudioTrackSwitched=function(t,e){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var i=-1,a=this.hls.audioTracks[e.id].groupId,n=0;n<r.audioGroupIds.length;n++)if(r.audioGroupIds[n]===a){i=n;break}i!==r.urlId&&(r.urlId=i,this.startLoad())}},u.loadPlaylist=function(t){var e=this.currentLevelIndex,r=this._levels[e];if(this.canLoad&&r&&r.url.length>0){var i=r.urlId,a=r.url[i];if(t)try{a=t.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+i+" "+a),this.clearTimer(),this.hls.trigger(n.a.LEVEL_LOADING,{url:a,level:e,id:i,deliveryDirectives:t||null})}},u.removeLevel=function(t,e){var r=function(t,r){return r!==e},i=this._levels.filter((function(i,a){return a!==t||i.url.length>1&&void 0!==e&&(i.url=i.url.filter(r),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(r)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(r)),i.urlId=0,!0)})).map((function(t,e){var r=t.details;return null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e})),t}));this._levels=i,this.hls.trigger(n.a.LEVELS_UPDATED,{levels:i})},a=i,(o=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==t||null===(e=r[t])||void 0===e||!e.details)){if(t<0||t>=r.length){var i=t<0;if(this.hls.trigger(n.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:t,fatal:i,reason:"invalid level idx"}),i)return;t=Math.min(t,r.length-1)}this.clearTimer();var a=this.currentLevelIndex,o=r[a],l=r[t];this.log("switching to level "+t+" from "+a),this.currentLevelIndex=t;var u=q({},l,{level:t,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(n.a.LEVEL_SWITCHING,u);var d=l.details;if(!d||d.live){var h=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(h)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&z(a.prototype,o),l&&z(a,l),i}(X);!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}($||($={}));var tt=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(n.a.BUFFER_APPENDED,this.onBufferAppended,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(n.a.BUFFER_APPENDED,this.onBufferAppended,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===_.b.MAIN){var r=this.activeFragment,i=this.activeParts;if(!r)return null;if(i)for(var a=i.length;a--;){var n=i[a],s=n?n.end:r.appendedPTS;if(n.start<=t&&void 0!==s&&t<=s)return a>9&&(this.activeParts=i.slice(a-9)),n}else if(r.start<=t&&void 0!==r.appendedPTS&&t<=r.appendedPTS)return r}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,i=Object.keys(r),a=i.length;a--;){var n=r[i[a]];if((null==n?void 0:n.body.type)===e&&n.buffered){var s=n.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e,r){var i=this;Object.keys(this.fragments).forEach((function(a){var n=i.fragments[a];if(n)if(n.buffered){var s=n.range[t];s&&s.time.some((function(t){var r=!i.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&i.removeFragment(n.body),r}))}else n.body.type===r&&i.removeFragment(n.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,i=t.frag,a=t.part;if(r&&"initSegment"!==i.sn){var n=rt(i),s=this.fragments[n];s&&(Object.keys(r).forEach((function(t){var n=i.elementaryStreams[t];if(n){var o=r[t],l=null!==a||!0===n.partial;s.range[t]=e.getBufferedTimes(i,a,l,o)}})),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},e.fragBuffered=function(t){var e=rt(t),r=this.fragments[e];r&&(r.backtrack=r.loaded=null,r.buffered=!0)},e.getBufferedTimes=function(t,e,r,i){for(var a={time:[],partial:r},n=e?e.start:t.start,s=e?e.end:t.end,o=t.minEndPTS||s,l=t.maxStartPTS||n,u=0;u<i.length;u++){var d=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(l>=d&&o<=h){a.time.push({startPTS:Math.max(n,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(n<h&&s>d)a.partial=!0,a.time.push({startPTS:Math.max(n,i.start(u)),endPTS:Math.min(s,i.end(u))});else if(s<=d)break}return a},e.getPartialFragment=function(t){var e,r,i,a=null,n=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var u=o[l];u&&et(u)&&(r=u.body.start-s,i=u.body.end+s,t>=r&&t<=i&&(e=Math.min(t-r,i-t),n<=e&&(a=u.body,n=e)))})),a},e.getState=function(t){var e=rt(t),r=this.fragments[e];return r?r.buffered?et(r)?$.PARTIAL:$.OK:r.backtrack?$.BACKTRACKED:$.APPENDING:$.NOT_LOADED},e.backtrack=function(t,e){var r=rt(t),i=this.fragments[r];if(!i||i.backtrack)return null;var a=i.backtrack=e||i.loaded;return i.loaded=null,a},e.getBacktrackData=function(t){var e=rt(t),r=this.fragments[e];if(r){var i,a=r.backtrack;if(null!=a&&null!==(i=a.payload)&&void 0!==i&&i.byteLength)return a;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,r){for(var i,a,n=0;n<r.length;n++){if(i=r.start(n)-this.bufferPadding,a=r.end(n)+this.bufferPadding,t>=i&&e<=a)return!0;if(e<=i)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,i=e.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!i){var a=rt(r);this.fragments[a]={body:r,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,i=e.frag,a=e.part,n=e.timeRanges;if(i.type===_.b.MAIN)if(this.activeFragment=i,a){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(a)}else this.activeParts=null;this.timeRanges=n,Object.keys(n).forEach((function(t){var e=n[t];if(r.detectEvictedFragments(t,e),!a)for(var s=0;s<e.length;s++)i.appendedPTS=Math.max(e.end(s),i.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=rt(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,r){var i=this;Object.keys(this.fragments).forEach((function(a){var n=i.fragments[a];if(n&&n.buffered){var s=n.body;s.type===r&&s.start<e&&s.end>t&&i.removeFragment(s)}}))},e.removeFragment=function(t){var e=rt(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function et(t){var e,r;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(r=t.range.audio)||void 0===r?void 0:r.partial))}function rt(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var it=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),at={length:0,start:function(){return 0},end:function(){return 0}},nt=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var i=t.getBuffered(e),a=0;a<i.length;a++)if(r>=i.start(a)&&r<=i.end(a))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,i){try{if(e){var a,n=t.getBuffered(e),s=[];for(a=0;a<n.length;a++)s.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(s,r,i)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){var r=t.start-e.start;return r||e.end-t.end}));var i=[];if(r)for(var a=0;a<t.length;a++){var n=i.length;if(n){var s=i[n-1].end;t[a].start-s<r?t[a].end>s&&(i[n-1].end=t[a].end):i.push(t[a])}else i.push(t[a])}else i=t;for(var o,l=0,u=e,d=e,h=0;h<i.length;h++){var f=i[h].start,c=i[h].end;if(e+r>=f&&e<c)u=f,l=(d=c)-e;else if(e+r<f){o=f;break}}return{len:l,start:u||0,end:d||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(t){return o.b.log("failed to get media.buffered",t),at}},t}(),st=function(t,e,r,i,a,n){void 0===i&&(i=0),void 0===a&&(a=-1),void 0===n&&(n=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=i,this.part=a,this.partial=n};function ot(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function lt(t,e){for(var r=e.fragments,i=0,a=r.length;i<a;i++)ot(r[i],t);e.fragmentHint&&ot(e.fragmentHint,t),e.alignedSliding=!0}function ut(t,e,r){e&&(!function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var i=function(t,e){var r=t.fragments,i=e.fragments;if(i.length&&r.length){var a=function(t,e){for(var r=null,i=0,a=t.length;i<a;i++){var n=t[i];if(n&&n.cc===e){r=n;break}}return r}(r,i[0].cc);if(a&&(!a||a.startPTS))return a;o.b.log("No frag in previous level to align on")}else o.b.log("No fragments to align")}(r.details,e);i&&Object(a.a)(i.start)&&(o.b.log("Adjusting PTS using last level due to CC increase within current level "+e.url),lt(i.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(!e.fragments.length||!t.hasProgramDateTime||!e.hasProgramDateTime)return;var r=e.fragments[0].programDateTime,i=t.fragments[0].programDateTime,n=(i-r)/1e3+e.fragments[0].start;n&&Object(a.a)(n)&&(o.b.log("Adjusting PTS using programDateTime delta "+(i-r)+"ms, sliding:"+n.toFixed(3)+" "+t.url+" "),lt(n,t))}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||Y(e.details,r))}var dt={search:function(t,e){for(var r=0,i=t.length-1,a=null,n=null;r<=i;){var s=e(n=t[a=(r+i)/2|0]);if(s>0)r=a+1;else{if(!(s<0))return n;i=a-1}}return null}};function ht(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=t?1:r.start-i>t&&r.start?-1:0}function ft(t,e,r){var i=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>t}function ct(t){var e="function"==typeof Map?new Map:void 0;return(ct=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return vt(t,arguments,mt(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),pt(i,t)})(t)}function vt(t,e,r){return(vt=gt()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&pt(a,r.prototype),a}).apply(null,arguments)}function gt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yt=Math.pow(2,17),bt=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var r=this,i=t.url;if(!i)return Promise.reject(new Et({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,n=a.fLoader,o=a.loader;return new Promise((function(i,l){r.loader&&r.loader.destroy();var u=r.loader=t.loader=n?new n(a):new o(a),d=Tt(t),h={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:yt};t.stats=u.stats,u.load(d,h,{onSuccess:function(e,a,n,s){r.resetLoader(t,u),i({frag:t,part:null,payload:e.data,networkDetails:s})},onError:function(e,i,a){r.resetLoader(t,u),l(new Et({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:a}))},onAbort:function(e,i,a){r.resetLoader(t,u),l(new Et({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:a}))},onTimeout:function(e,i,a){r.resetLoader(t,u),l(new Et({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:a}))},onProgress:function(r,i,a,n){e&&e({frag:t,part:null,payload:a,networkDetails:n})}})}))},e.loadPart=function(t,e,r){var i=this;this.abort();var a=this.config,n=a.fLoader,o=a.loader;return new Promise((function(l,u){i.loader&&i.loader.destroy();var d=i.loader=t.loader=n?new n(a):new o(a),h=Tt(t,e),f={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:yt};e.stats=d.stats,d.load(h,f,{onSuccess:function(a,n,s,o){i.resetLoader(t,d),i.updateStatsFromPart(t,e);var u={frag:t,part:e,payload:a.data,networkDetails:o};r(u),l(u)},onError:function(r,a,n){i.resetLoader(t,d),u(new Et({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:r,networkDetails:n}))},onAbort:function(r,a,n){t.stats.aborted=e.stats.aborted,i.resetLoader(t,d),u(new Et({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:n}))},onTimeout:function(r,a,n){i.resetLoader(t,d),u(new Et({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:n}))}})}))},e.updateStatsFromPart=function(t,e){var r=t.stats,i=e.stats,a=i.total;if(r.loaded+=i.loaded,a){var n=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/a),n),o=(n-s)*Math.round(r.loaded/s);r.total=r.loaded+o}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function Tt(t,e){void 0===e&&(e=null);var r=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:r.url,rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,s=r.byteRangeEndOffset;return Object(a.a)(n)&&Object(a.a)(s)&&(i.rangeStart=n,i.rangeEnd=s),i}var Et=function(t){var e,r;function i(e){for(var r,i=arguments.length,a=new Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];return(r=t.call.apply(t,[this].concat(a))||this).data=void 0,r.data=e,r}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,pt(e,r),i}(ct(Error)),St=r(14),Lt={toString:function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}};function At(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dt="STOPPED",_t="IDLE",kt="KEY_LOADING",xt="FRAG_LOADING",wt="FRAG_LOADING_WAITING_RETRY",Ct="PARSING",Ot="PARSED",It="BACKTRACKING",Pt="ENDED",Ft="ERROR",Mt="WAITING_LEVEL",Nt=function(t){var e,r;function i(e,r,i){var a;return(a=t.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=Dt,a.media=void 0,a.mediaBuffer=void 0,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.loadedmetadata=!1,a.fragLoadError=0,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.logPrefix=i,a.log=o.b.log.bind(o.b,i+":"),a.warn=o.b.warn.bind(o.b,i+":"),a.hls=e,a.fragmentLoader=new bt(e.config),a.fragmentTracker=r,a.config=e.config,a.decrypter=new St.a(e,e.config),e.on(n.a.KEY_LOADED,a.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,Rt(e,r);var u,d,h,f=i.prototype;return f.doTick=function(){this.onTickEnd()},f.onTickEnd=function(){},f.startLoad=function(t){},f.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Dt},f._streamEnded=function(t,e){var r=this.fragCurrent,i=this.fragmentTracker;if(!e.live&&r&&r.sn===e.endSN&&!t.nextStart){var a=i.getState(r);return a===$.PARTIAL||a===$.OK}return!1},f.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Dt&&this.startLoad(i.startPosition)},f.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},f.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,i=this.mediaBuffer,n=this.state,s=r?r.currentTime:0,o=nt.bufferInfo(i||r,s,t.maxBufferHole);if(this.log("media seeking to "+(Object(a.a)(s)?s.toFixed(3):s)+", state: "+n),n===Pt)this.resetLoadingState();else if(e&&!o.len){var l=t.maxFragLookUpTolerance,u=e.start-l,d=s>e.start+e.duration+l;(s<u||d)&&(d&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}r&&(this.lastCurrentTime=s),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},f.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},f.onKeyLoaded=function(t,e){if(this.state===kt&&e.frag===this.fragCurrent&&this.levels){this.state=_t;var r=this.levels[e.frag.level].details;r&&this.loadFragment(e.frag,r,e.frag.start)}},f.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},f.onHandlerDestroyed=function(){this.state=Dt,this.hls.off(n.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},f.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=kt,this.fragCurrent=t,this.hls.trigger(n.a.KEY_LOADING,{frag:t})},f.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},f._loadFragForPlayback=function(t,e,r){var i=this;this._doFragLoad(t,e,r,(function(e){if(i.fragContextChanged(t))return i.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void i.fragmentTracker.removeFragment(t);t.stats.chunkCount++,i._handleFragmentLoadProgress(e)})).then((function(e){if(e){i.fragLoadError=0;var r=i.state;if(!i.fragContextChanged(t))return"payload"in e&&(i.log("Loaded fragment "+t.sn+" of level "+t.level),i.hls.trigger(n.a.FRAG_LOADED,e),i.state===It)?(i.fragmentTracker.backtrack(t,e),void i.resetFragmentLoading(t)):void i._handleFragmentLoadComplete(e);(r===xt||r===It||!i.fragCurrent&&r===Ct)&&(i.fragmentTracker.removeFragment(t),i.state=_t)}})).catch((function(e){i.warn(e),i.resetFragmentLoading(t)}))},f.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var i={startOffset:t,endOffset:e,type:r};this.fragLoadError=0,this.hls.trigger(n.a.BUFFER_FLUSHING,i)}},f._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(r){if(!r||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return r})).then((function(r){var i=e.hls,a=r.payload,s=t.decryptdata;if(a&&a.byteLength>0&&s&&s.key&&s.iv&&"AES-128"===s.method){var o=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(a),s.key.buffer,s.iv.buffer).then((function(e){var a=self.performance.now();return i.trigger(n.a.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:a}}),r.payload=e,r}))}return r})).then((function(r){var i=e.fragCurrent,a=e.hls,s=e.levels;if(!s)throw new Error("init load aborted, missing levels");s[t.level].details;var o=t.stats;e.state=_t,e.fragLoadError=0,t.data=new Uint8Array(r.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),r.frag===i&&a.trigger(n.a.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:t.type}),e.tick()})).catch((function(r){e.warn(r),e.resetFragmentLoading(t)}))},f.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},f.fragBufferedComplete=function(t,e){var r=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+Lt.toString(nt.getBuffered(r))),this.state=_t,this.tick()},f._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,i=t.part,a=t.partsLoaded,n=!a||0===a.length||a.some((function(t){return!t})),s=new st(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!n);e.flush(s)}},f._handleFragmentLoadProgress=function(t){},f._doFragLoad=function(t,e,r,i){var s=this;if(void 0===r&&(r=null),!this.levels)throw new Error("frag load aborted, missing levels");if(r=Math.max(t.start,r||0),this.config.lowLatencyMode&&e){var o=e.partList;if(o&&i){r>t.end&&e.fragmentHint&&(t=e.fragmentHint);var l=this.getNextPart(o,t,r);if(l>-1){var u=o[l];return this.log("Loading part sn: "+t.sn+" p: "+u.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+l+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=xt,this.hls.trigger(n.a.FRAG_LOADING,{frag:t,part:o[l],targetBufferTime:r}),this.doFragPartsLoad(t,o,l,i).catch((function(t){return s.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(o,r))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),Object(a.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=xt,this.hls.trigger(n.a.FRAG_LOADING,{frag:t,targetBufferTime:r}),this.fragmentLoader.load(t,i).catch((function(t){return s.handleFragLoadError(t)}))},f.doFragPartsLoad=function(t,e,r,i){var a=this;return new Promise((function(s,o){var l=[];!function r(u){var d=e[u];a.fragmentLoader.loadPart(t,d,i).then((function(i){l[d.index]=i;var o=i.part;a.hls.trigger(n.a.FRAG_LOADED,i);var h=e[u+1];if(!h||h.fragment!==t)return s({frag:t,part:o,partsLoaded:l});r(u+1)})).catch(o)}(r)}))},f.handleFragLoadError=function(t){var e=t.data;return e&&e.details===s.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(n.a.ERROR,e),null},f._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Ct){var r=e.frag,i=e.part,a=e.level,n=self.performance.now();r.stats.parsing.end=n,i&&(i.stats.parsing.end=n),this.updateLevelTiming(r,i,a,t.partial)}else this.fragCurrent||(this.state=_t)},f.getCurrentContext=function(t){var e=this.levels,r=t.level,i=t.sn,a=t.part;if(!e||!e[r])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+r+". The current chunk will not be buffered."),null;var n=e[r],s=a>-1?function(t,e,r){if(!t||!t.details)return null;var i=t.details.partList;if(i)for(var a=i.length;a--;){var n=i[a];if(n.index===r&&n.fragment.sn===e)return n}return null}(n,i,a):null,o=s?s.fragment:function(t,e,r){if(!t||!t.details)return null;var i=t.details,a=i.fragments[e-i.startSN];return a||((a=i.fragmentHint)&&a.sn===e?a:e<i.startSN&&r&&r.sn===e?r:null)}(n,i,this.fragCurrent);return o?{frag:o,part:s,level:n}:null},f.bufferFragmentData=function(t,e,r,i){if(t&&this.state===Ct){var a=t.data1,s=t.data2,o=a;if(a&&s&&(o=Object(l.a)(a,s)),o&&o.length){var u={type:t.type,frag:e,part:r,chunkMeta:i,parent:e.type,data:o};this.hls.trigger(n.a.BUFFER_APPENDING,u),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},f.flushBufferGap=function(t){var e=this.media;if(e)if(nt.isBuffered(e,e.currentTime)){var r=e.currentTime,i=nt.bufferInfo(e,r,0),a=t.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*a),s=Math.max(Math.min(t.start-n,i.end-n),r+n);t.start-s>n&&this.flushMainBuffer(s,t.start)}else this.flushMainBuffer(0,t.start)},f.getFwdBufferInfo=function(t,e){var r=this.config,i=this.getLoadPosition();if(!Object(a.a)(i))return null;var n=nt.bufferInfo(t,i,r.maxBufferHole);if(0===n.len&&void 0!==n.nextStart){var s=this.fragmentTracker.getBufferedFrag(i,e);if(s&&n.nextStart<s.end)return nt.bufferInfo(t,i,Math.max(n.nextStart,r.maxBufferHole))}return n},f.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},f.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},f.getNextFragment=function(t,e){var r,i,a=e.fragments,n=a.length;if(!n)return null;var s,o=this.config,l=a[0].start;if(e.live){var u=o.initialLiveManifestSize;if(n<u)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+u+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(e,a),this.startPosition=s?this.hls.liveSyncPosition||s.start:t)}else t<=l&&(s=a[0]);if(!s){var d=o.lowLatencyMode?e.partEnd:e.fragmentEnd;s=this.getFragmentAtPosition(t,d,e)}return null===(r=s)||void 0===r||!r.initSegment||null!==(i=s)&&void 0!==i&&i.initSegment.data||this.bitrateTest||(s=s.initSegment),s},f.getNextPart=function(t,e,r){for(var i=-1,a=!1,n=!0,s=0,o=t.length;s<o;s++){var l=t[s];if(n=n&&!l.independent,i>-1&&r<l.start)break;var u=l.loaded;!u&&(a||l.independent||n)&&l.fragment===e&&(i=s),a=u}return i},f.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},f.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,i=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!Object(a.a)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<t.length;++i){var n=t[i];if(ft(e,r,n))return n}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var n=r.sn+1;if(n>=t.startSN&&n<=t.endSN){var s=e[n-t.startSN];r.cc===s.cc&&(i=s,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=function(t,e){return dt.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(i=this.getFragmentAtPosition(o,this.bitrateTest?t.fragmentEnd:t.edge,t))}return i},f.getFragmentAtPosition=function(t,e,r){var i,a=this.config,n=this.fragPrevious,s=r.fragments,o=r.endSN,l=r.fragmentHint,u=a.maxFragLookUpTolerance,d=!!(a.lowLatencyMode&&r.partList&&l);(d&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),t<e)?i=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var a=null;if(t?a=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(a=e[0]),a&&0===ht(r,i,a))return a;var n=dt.search(e,ht.bind(null,r,i));return n||a}(n,s,t,t>e-u?0:u):i=s[s.length-1];if(i){var h=i.sn-r.startSN,f=n&&i.level===n.level,c=s[h+1];if(this.fragmentTracker.getState(i)===$.BACKTRACKED){i=null;for(var v=h;s[v]&&this.fragmentTracker.getState(s[v])===$.BACKTRACKED;)i=n?s[v--]:s[--v];i||(i=c)}else n&&i.sn===n.sn&&!d&&f&&(i.sn<o&&this.fragmentTracker.getState(c)!==$.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+c.sn),i=c):i=null)}return i},f.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var i=this.hls.liveSyncPosition,a=r.currentTime,n=t.fragments[0].start,s=t.edge,o=a>=n-e.maxFragLookUpTolerance&&a<=s;if(null!==i&&r.duration>i&&(a<i||!o)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||a<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn("Playback: "+a.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),r.currentTime=i))}}},f.alignPlaylists=function(t,e){var r=this.levels,i=this.levelLastLoaded,n=this.fragPrevious,s=null!==i?r[i]:null,o=t.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var l=t.fragments[0].start,u=!e,d=t.alignedSliding&&Object(a.a)(l);if(u||!d&&!l){ut(n,s,t);var h=t.fragments[0].start;return this.log("Live playlist sliding: "+h.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(n?n.sn:"na")+" fragments: "+o),h}return l},f.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},f.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var i=t.startTimeOffset;Object(a.a)(i)?(r=e+i,i<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},f.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},f.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},f.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=_t)},f.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var r=e.frag;if(r&&r.type===t){this.fragCurrent;var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+t+" "+r.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=wt}else e.levelRetry?(t===_.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=_t):(o.b.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=Ft)}}},f.afterBufferFlushed=function(t,e,r){if(t){var i=nt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,i,r),this.state===Pt&&this.resetLoadingState()}},f.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=_t},f.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},f.updateLevelTiming=function(t,e,r,i){var a=this,s=r.details;Object.keys(t.elementaryStreams).reduce((function(e,o){var l=t.elementaryStreams[o];if(l){var u=l.endPTS-l.startPTS;if(u<=0)return a.warn("Could not parse fragment "+t.sn+" "+o+" duration reliably ("+u+") resetting transmuxer to fallback to playlist timing"),a.resetTransmuxer(),e||!1;var d=i?0:V(s,t,l.startPTS,l.endPTS,l.startDTS,l.endDTS);return a.hls.trigger(n.a.LEVEL_PTS_UPDATED,{details:s,level:r,drift:d,type:o,frag:t,start:l.startPTS,end:l.endPTS}),!0}return e}),!1)?(this.state=Ot,this.hls.trigger(n.a.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},f.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},u=i,(d=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&At(u.prototype,d),h&&At(u,h),i}(it);function Bt(){return self.MediaSource||self.WebKitMediaSource}function Ut(){return self.SourceBuffer||self.WebKitSourceBuffer}var Gt=r(17),jt=r(9),Kt=r(13),Ht=Bt()||{isTypeSupported:function(){return!1}},Vt=function(){function t(t,e,r,i){var a=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=r,this.onFlush=i;var l=t.config,u=function(e,r){(r=r||{}).frag=a.frag,r.id=a.id,t.trigger(e,r)};this.observer=new Kt.EventEmitter,this.observer.on(n.a.FRAG_DECRYPTED,u),this.observer.on(n.a.ERROR,u);var d={mp4:Ht.isTypeSupported("video/mp4"),mpeg:Ht.isTypeSupported("audio/mpeg"),mp3:Ht.isTypeSupported('audio/mp4; codecs="mp3"')},h=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){var f;o.b.log("demuxing in webworker");try{f=this.worker=Gt(18),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(e){t.trigger(n.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},f.postMessage({cmd:"init",typeSupported:d,vendor:h,id:e,config:JSON.stringify(l)})}catch(t){o.b.warn("Error in worker:",t),o.b.error("Error while initializing DemuxerWorker, fallback to inline"),f&&self.URL.revokeObjectURL(f.objectURL),this.transmuxer=new jt.c(this.observer,d,l,h,e),this.worker=null}}else this.transmuxer=new jt.c(this.observer,d,l,h,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.observer=null},e.push=function(t,e,r,i,a,n,s,l,u,d){var h=this;u.transmuxing.start=self.performance.now();var f=this.transmuxer,c=this.worker,v=n?n.start:a.start,g=a.decryptdata,p=this.frag,m=!(p&&a.cc===p.cc),y=!(p&&u.level===p.level),b=p?u.sn-p.sn:-1,T=this.part?u.part-this.part.index:1,E=!y&&(1===b||0===b&&1===T),S=self.performance.now();(y||b||0===a.stats.parsing.start)&&(a.stats.parsing.start=S),!n||!T&&E||(n.stats.parsing.start=S);var L=new jt.b(m,E,l,y,v);if(!E||m){o.b.log("[transmuxer-interface, "+a.type+"]: Starting new transmux session for sn: "+u.sn+" p: "+u.part+" level: "+u.level+" id: "+u.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+y+"\n        contiguous: "+E+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+v);var A=new jt.a(r,i,e,s,d);this.configureTransmuxer(A)}if(this.frag=a,this.part=n,c)c.postMessage({cmd:"demux",data:t,decryptdata:g,chunkMeta:u,state:L},t instanceof ArrayBuffer?[t]:[]);else if(f){var R=f.push(t,g,u,L);Object(jt.d)(R)?R.then((function(t){h.handleTransmuxComplete(t)})):this.handleTransmuxComplete(R)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:t});else if(r){var a=r.flush(t);Object(jt.d)(a)?a.then((function(r){e.handleFlushResult(r,t)})):this.handleFlushResult(a,t)}},e.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,r=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):r&&r.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}(),Wt=function(){function t(t,e,r,i){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=i}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,r=this.media,i=this.stalled,a=r.currentTime,n=r.seeking,s=this.seeking&&!n,l=!this.seeking&&n;if(this.seeking=n,a===t){if((l||s)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&nt.getBuffered(r).length){var u=nt.bufferInfo(r,a,0),d=u.len>0,h=u.nextStart||0;if(d||h){if(n){var f=u.len>2,c=!h||h-a>2&&!this.fragmentTracker.getPartialFragment(a);if(f||c)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var v,g=Math.max(h,u.start||0)-a,p=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,m=(null==p||null===(v=p.details)||void 0===v?void 0:v.live)?2*p.details.targetduration:2;if(g>0&&g<=m)return void this._trySkipBufferHole(null)}var y=self.performance.now();if(null!==i){var b=y-i;!n&&b>=250&&this._reportStall(u.len);var T=nt.bufferInfo(r,a,e.maxBufferHole);this._tryFixBufferStall(T,b)}else this.stalled=y}}}else if(this.moved=!0,null!==i){if(this.stallReported){var E=self.performance.now()-i;o.b.warn("playback not stuck anymore @"+a+", after "+Math.round(E)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var r=this.config,i=this.fragmentTracker,a=this.media.currentTime,n=i.getPartialFragment(a);if(n&&this._trySkipBufferHole(n))return;t.len>r.maxBufferHole&&e>1e3*r.highBufferWatchdogPeriod&&(o.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,o.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,r=this.hls,i=this.media,a=i.currentTime,l=0,u=nt.getBuffered(i),d=0;d<u.length;d++){var h=u.start(d);if(a+e.maxBufferHole>=l&&a<h){var f=Math.max(h+.05,i.currentTime+.1);return o.b.warn("skipping hole, adjusting currentTime from "+a+" to "+f),this.moved=!0,this.stalled=null,i.currentTime=f,t&&r.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+f,frag:t}),f}l=u.end(d)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,i=r.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<t.nudgeMaxRetry){var l=i+a*t.nudgeOffset;o.b.warn("Nudging 'currentTime' from "+i+" to "+l),r.currentTime=l,e.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.b.error("Playhead still not moving while enough data buffered @"+i+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0})},t}();function Yt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){var e,r;function i(e,r){var i;return(i=t.call(this,e,r,"[stream-controller]")||this).audioCodecSwap=!1,i.gapController=null,i.level=-1,i._forceStartLoad=!1,i.altAudio=!1,i.audioOnly=!1,i.fragPlaying=null,i.onvplaying=null,i.onvseeked=null,i.fragLastKbps=0,i.stalled=!1,i.couldBacktrack=!1,i.audioCodecSwitch=!1,i.videoBuffer=null,i._registerListeners(),i}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,Xt(e,r);var l,d,h,f=i.prototype;return f._registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(n.a.ERROR,this.onError,this),t.on(n.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(n.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(n.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(n.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this)},f._unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(n.a.ERROR,this.onError,this),t.off(n.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(n.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(n.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(n.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(n.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this)},f.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},f.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=_t,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Dt},f.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},f.doTick=function(){switch(this.state){case _t:this.doTickIdle();break;case Mt:var t,e=this.levels,r=this.level,i=null==e||null===(t=e[r])||void 0===t?void 0:t.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=_t;break}break;case wt:var a,n=self.performance.now(),s=this.retryDate;(!s||n>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=_t)}this.onTickEnd()},f.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},f.doTickIdle=function(){var t,e,r=this.hls,i=this.levelLastLoaded,a=this.levels,s=this.media,o=r.config,l=r.nextLoadLevel;if(null!==i&&(s||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&a&&a[l]){var d=a[l];this.level=r.nextLoadLevel=l;var h=d.details;if(!h||this.state===Mt||h.live&&this.levelLastLoaded!==l)this.state=Mt;else{var f=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,_.b.MAIN);if(null!==f)if(!(f.len>=this.getMaxBufferLength(d.maxBitrate))){if(this._streamEnded(f,h)){var c={};return this.altAudio&&(c.type="video"),this.hls.trigger(n.a.BUFFER_EOS,c),void(this.state=Pt)}var v=f.end,g=this.getNextFragment(v,h);if(this.couldBacktrack&&!this.fragPrevious&&g&&"initSegment"!==g.sn){var p=g.sn-h.startSN;p>1&&(g=h.fragments[p-1],this.fragmentTracker.removeFragment(g))}if(g&&this.fragmentTracker.getState(g)===$.OK&&this.nextLoadPosition>v){var m=this.audioOnly&&!this.altAudio?u.a.AUDIO:u.a.VIDEO;this.afterBufferFlushed(s,m,_.b.MAIN),g=this.getNextFragment(this.nextLoadPosition,h)}g&&(!g.initSegment||g.initSegment.data||this.bitrateTest||(g=g.initSegment),"identity"!==(null===(t=g.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=g.decryptdata)&&void 0!==e&&e.key?this.loadFragment(g,h,v):this.loadKey(g,h))}}}},f.loadFragment=function(e,r,i){var a,n=this.fragmentTracker.getState(e);if(this.fragCurrent=e,n===$.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(e);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);n=$.NOT_LOADED}n===$.NOT_LOADED||n===$.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)):n===$.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(a=this.media)||void 0===a?void 0:a.buffered.length)&&this.fragmentTracker.removeAllFragments()},f.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,_.b.MAIN);return e&&"fragment"in e?e.fragment:e},f.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,_.b.MAIN)},f.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},f.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},f.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,i=this.getAppendedFrag(e.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!e.paused&&t){var a=t[this.hls.nextLoadLevel],n=this.fragLastKbps;r=n&&this.fragCurrent?this.fragCurrent.duration*a.maxBitrate/(1e3*n)+1:0}else r=0;var s=this.getBufferedFrag(e.currentTime+r);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,d=Math.max(s.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}},f.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===kt&&(this.state=_t),this.nextLoadPosition=this.getLoadPosition()},f.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},f.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var i=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new Wt(this.config,i,this.fragmentTracker,this.hls)},f.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},f.onMediaPlaying=function(){this.tick()},f.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(a.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},f.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(n.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},f.onManifestParsed=function(t,e){var r,i,a,n=!1,s=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(n=!0),-1!==r.indexOf("mp4a.40.5")&&(s=!0))})),this.audioCodecSwitch=n&&s&&!("function"==typeof(null==(a=Ut())||null===(i=a.prototype)||void 0===i?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},f.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===_t){var i=r[e.level];(!i.details||i.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(i.details))&&(this.state=Mt)}},f.onLevelLoaded=function(t,e){var r,i=this.levels,a=e.level,s=e.details,o=s.totalduration;if(i){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+o);var l=this.fragCurrent;!l||this.state!==xt&&this.state!==wt||l.level!==e.level&&l.loader&&(this.state=_t,l.loader.abort());var u=i[a],d=0;if(s.live||null!==(r=u.details)&&void 0!==r&&r.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,u.details)}if(u.details=s,this.levelLastLoaded=a,this.hls.trigger(n.a.LEVEL_UPDATED,{details:s,level:a}),this.state===Mt){if(this.waitForCdnTuneIn(s))return;this.state=_t}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},f._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,a=t.payload,n=this.levels;if(n){var s=n[r.level],o=s.details;if(o){var l=s.videoCodec,u=o.PTSKnown||!o.live,d=null===(e=r.initSegment)||void 0===e?void 0:e.data,h=this._getAudioCodec(s),f=this.transmuxer=this.transmuxer||new Vt(this.hls,_.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),c=i?i.index:-1,v=-1!==c,g=new st(r.level,r.sn,r.stats.chunkCount,a.byteLength,c,v),p=this.initPTS[r.cc];f.push(a,d,h,l,r,i,o.totalduration,u,g,p)}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},f.onAudioTrackSwitching=function(t,e){var r=this.altAudio,i=!!e.url,a=e.id;if(!i){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;null!=s&&s.loader&&(this.log("Switching to main audio track, cancel main fragment load"),s.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;r&&o.trigger(n.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(n.a.AUDIO_TRACK_SWITCHED,{id:a})}},f.onAudioTrackSwitched=function(t,e){var r=e.id,i=!!this.hls.audioTracks[r].url;if(i){var a=this.videoBuffer;a&&this.mediaBuffer!==a&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=a)}this.altAudio=i,this.tick()},f.onBufferCreated=function(t,e){var r,i,a=e.tracks,n=!1;for(var s in a){var o=a[s];if("main"===o.id){if(i=s,r=o,"video"===s){var l=a[s];l&&(this.videoBuffer=l.buffer)}}else n=!0}n&&r?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},f.onFragBuffered=function(t,e){var r=e.frag,i=e.part;if(!r||r.type===_.b.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Ot&&(this.state=_t));var a=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}},f.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(_.b.MAIN,e);break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==Ft&&(e.fatal?(this.warn(""+e.details),this.state=Ft):e.levelRetry||this.state!==Mt||(this.state=_t));break;case s.a.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===Ct||this.state===Ot)){var r=!0,i=this.getFwdBufferInfo(this.media,_.b.MAIN);i&&i.len>.5&&(r=!this.reduceMaxBufferLength(i.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},f.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var r=nt.getBuffered(t);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},f.onFragLoadEmergencyAborted=function(){this.state=_t,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},f.onBufferFlushed=function(t,e){var r=e.type;if(r!==u.a.AUDIO||this.audioOnly&&!this.altAudio){var i=(r===u.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r,_.b.MAIN)}},f.onLevelsUpdated=function(t,e){this.levels=e.levels},f.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},f.seekToStartPos=function(){var t=this.media,e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void o.b.log("could not seek to "+r+", already seeking at "+e);var i=nt.getBuffered(t),a=(i.length?i.start(0):0)-r;a>0&&a<this.config.maxBufferHole&&(o.b.log("adjusting start position by "+a+" to match buffer start"),r+=a,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}},f._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},f._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(r){var i=e.hls;if(r&&!i.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=_t,e.startFragRequested=!1,e.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(n.a.FRAG_LOADED,r)}}))},f._handleTransmuxComplete=function(t){var e,r="main",i=this.hls,s=t.remuxResult,o=t.chunkMeta,l=this.getCurrentContext(o);if(!l)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var d=l.frag,h=l.part,f=l.level,c=s.video,v=s.text,g=s.id3,p=s.initSegment,m=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(d)){if(this.state=Ct,p){p.tracks&&(this._bufferInitSegment(f,p.tracks,d,o),i.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:r,tracks:p.tracks}));var y=p.initPTS,b=p.timescale;Object(a.a)(y)&&(this.initPTS[d.cc]=y,i.trigger(n.a.INIT_PTS_FOUND,{frag:d,id:r,initPTS:y,timescale:b}))}if(c&&!1!==s.independent){if(f.details){var T=c.startPTS,E=c.endPTS,S=c.startDTS,L=c.endDTS;if(h)h.elementaryStreams[c.type]={startPTS:T,endPTS:E,startDTS:S,endDTS:L};else if(c.firstKeyFrame&&c.independent&&(this.couldBacktrack=!0),c.dropped&&c.independent){if(this.getLoadPosition()+this.config.maxBufferHole<T)return void this.backtrack(d);d.setElementaryStreamInfo(c.type,d.start,E,d.start,L,!0)}d.setElementaryStreamInfo(c.type,T,E,S,L),this.bufferFragmentData(c,d,h,o)}}else if(!1===s.independent)return void this.backtrack(d);if(m){var A=m.startPTS,R=m.endPTS,D=m.startDTS,_=m.endDTS;h&&(h.elementaryStreams[u.a.AUDIO]={startPTS:A,endPTS:R,startDTS:D,endDTS:_}),d.setElementaryStreamInfo(u.a.AUDIO,A,R,D,_),this.bufferFragmentData(m,d,h,o)}if(null!=g&&null!==(e=g.samples)&&void 0!==e&&e.length){var k={frag:d,id:r,samples:g.samples};i.trigger(n.a.FRAG_PARSING_METADATA,k)}if(v){var x={frag:d,id:r,samples:v.samples};i.trigger(n.a.FRAG_PARSING_USERDATA,x)}}},f._bufferInitSegment=function(t,e,r,i){var a=this;if(this.state===Ct){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var s=e.audio,o=e.video,l=e.audiovideo;if(s){var u=t.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===d.indexOf("firefox")&&(u="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==s.container&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),t.audioCodec&&t.audioCodec!==u&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+u+'"'),s.levelCodec=u,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(t.audioCodec||"")+"/"+s.codec+"]")}o&&(o.levelCodec=t.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+o.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(n.a.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var s=e[t].initSegment;null!=s&&s.byteLength&&a.hls.trigger(n.a.BUFFER_APPENDING,{type:t,data:s,frag:r,part:null,chunkMeta:i,parent:r.type})})),this.tick()}},f.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=It},f.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(nt.isBuffered(t,r)?e=this.getAppendedFrag(r):nt.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){var i=this.fragPlaying,a=e.level;i&&e.sn===i.sn&&i.level===a&&e.urlId===i.urlId||(this.hls.trigger(n.a.FRAG_CHANGED,{frag:e}),i&&i.level===a||this.hls.trigger(n.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=e)}}},l=i,(d=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&Yt(l.prototype,d),h&&Yt(l,h),i}(Nt),zt=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),Qt=function(){function t(t,e,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new zt(t),this.fast_=new zt(e)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,i=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new zt(t,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new zt(e,i.getEstimate(),i.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,i=8*e/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function $t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Zt=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new Qt(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,r,i,l=t.prototype;return l.registerListeners=function(){var t=this.hls;t.on(n.a.FRAG_LOADING,this.onFragLoading,this),t.on(n.a.FRAG_LOADED,this.onFragLoaded,this),t.on(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(n.a.ERROR,this.onError,this)},l.unregisterListeners=function(){var t=this.hls;t.off(n.a.FRAG_LOADING,this.onFragLoading,this),t.off(n.a.FRAG_LOADED,this.onFragLoaded,this),t.off(n.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(n.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(n.a.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},l.onFragLoading=function(t,e){var r,i=e.frag;i.type===_.b.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(r=e.part)?r:null,this.timer=self.setInterval(this.onCheck,100)))},l.onLevelLoaded=function(t,e){var r=this.hls.config;e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},l._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,s=r.config,l=r.media;if(t&&l){var u=e?e.stats:t.stats,d=e?e.duration:t.duration;if(u.aborted)return o.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!l.paused&&l.playbackRate&&l.readyState){var h=performance.now()-u.loading.start,f=Math.abs(l.playbackRate);if(!(h<=500*d/f)){var c=r.levels,v=r.minAutoLevel,g=c[t.level],p=u.total||Math.max(u.loaded,Math.round(d*g.maxBitrate/8)),m=Math.max(1,u.bwEstimate?u.bwEstimate/8:1e3*u.loaded/h),y=(p-u.loaded)/m,b=l.currentTime,T=(nt.bufferInfo(l,b,s.maxBufferHole).end-b)/f;if(!(T>=2*d/f||y<=T)){var E,S=Number.POSITIVE_INFINITY;for(E=t.level-1;E>v;E--){if((S=d*c[E].maxBitrate/(6.4*m))<T)break}if(!(S>=y)){var L=this.bwEstimator.getEstimate();o.b.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+E+"\n      Current BW estimate: "+(Object(a.a)(L)?(L/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+y.toFixed(3)+" s\n      Estimated load time for the next fragment: "+S.toFixed(3)+" s\n      Time to underbuffer: "+T.toFixed(3)+" s"),r.nextLoadLevel=E,this.bwEstimator.sample(h,u.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),r.trigger(n.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:u})}}}}}},l.onFragLoaded=function(t,e){var r=e.frag,i=e.part;if(r.type===_.b.MAIN&&Object(a.a)(r.sn)){var s=i?i.stats:r.stats,o=i?i.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[r.level],u=(l.loaded?l.loaded.bytes:0)+s.loaded,d=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:u,duration:d},l.realBitrate=Math.round(8*u/d)}if(r.bitrateTest){var h={stats:s,frag:r,part:i,id:r.type};this.onFragBuffered(n.a.FRAG_BUFFERED,h),r.bitrateTest=!1}}},l.onFragBuffered=function(t,e){var r=e.frag,i=e.part,a=i?i.stats:r.stats;if(!a.aborted&&r.type===_.b.MAIN&&"initSegment"!==r.sn){var n=a.parsing.end-a.loading.start;this.bwEstimator.sample(n,a.loaded),a.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},l.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},l.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},l.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.maxAutoLevel,a=r.config,n=r.minAutoLevel,s=r.media,l=e?e.duration:t?t.duration:0,u=s?s.currentTime:0,d=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,h=this.bwEstimator?this.bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,f=(nt.bufferInfo(s,u,a.maxBufferHole).end-u)/d,c=this.findBestLevel(h,n,i,f,a.abrBandWidthFactor,a.abrBandWidthUpFactor);if(c>=0)return c;o.b.trace((f?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var v=l?Math.min(l,a.maxStarvationDelay):a.maxStarvationDelay,g=a.abrBandWidthFactor,p=a.abrBandWidthUpFactor;if(!f){var m=this.bitrateTestDelay;if(m)v=(l?Math.min(l,a.maxLoadingDelay):a.maxLoadingDelay)-m,o.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=p=1}return c=this.findBestLevel(h,n,i,f+v,g,p),Math.max(c,0)},l.findBestLevel=function(t,e,r,i,a,n){for(var s,l=this.fragCurrent,u=this.partCurrent,d=this.lastLoadedFragLevel,h=this.hls.levels,f=h[d],c=!(null==f||null===(s=f.details)||void 0===s||!s.live),v=null==f?void 0:f.codecSet,g=u?u.duration:l?l.duration:0,p=r;p>=e;p--){var m=h[p];if(m&&(!v||m.codecSet===v)){var y=m.details,b=(u?null==y?void 0:y.partTarget:null==y?void 0:y.averagetargetduration)||g,T=void 0;T=p<=d?a*t:n*t;var E=h[p].maxBitrate,S=E*b/T;if(o.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+p+"/"+Math.round(T)+"/"+E+"/"+b+"/"+i+"/"+S),T>E&&(!S||c&&!this.bitrateTestDelay||S<i))return p}}return-1},e=t,(r=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this.getNextABRAutoLevel();return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}])&&$t(e.prototype,r),i&&$t(e,i),t}(),Jt=r(11),te=r.n(Jt),ee=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),i={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,i=e[t],a=r[t];if(a.length){var n=a[0];try{n.execute()}catch(e){o.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),n.onError(e),i&&i.updating||(a.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),re=Bt(),ie=/([ha]vc.)(?:\.[^.,]+)+/,ae=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,r=e.media,i=e.mediaSource;o.b.log("[buffer-controller]: Media source opened"),r&&(e.updateMediaElementDuration(),t.trigger(n.a.MEDIA_ATTACHED,{media:r})),i&&i.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){o.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){o.b.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.BUFFER_RESET,this.onBufferReset,this),t.on(n.a.BUFFER_APPENDING,this.onBufferAppending,this),t.on(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(n.a.BUFFER_EOS,this.onBufferEos,this),t.on(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(n.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(n.a.FRAG_PARSED,this.onFragParsed,this),t.on(n.a.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.BUFFER_RESET,this.onBufferReset,this),t.off(n.a.BUFFER_APPENDING,this.onBufferAppending,this),t.off(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(n.a.BUFFER_EOS,this.onBufferEos,this),t.off(n.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(n.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(n.a.FRAG_PARSED,this.onFragParsed,this),t.off(n.a.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ee(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,o.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&re){var i=this.mediaSource=new re;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(i),this._objectUrl=r.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(o.b.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){o.b.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):o.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(n.a.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){o.b.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,i=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(i){var a=r.tracks[t];if(a&&"function"==typeof a.buffer.changeType){var n=e[t],s=n.codec,o=n.levelCodec,l=n.container;if((a.levelCodec||a.codec).replace(ie,"$1")!==(o||s).replace(ie,"$1")){var u=l+";codecs="+(o||s);r.appendChangeType(t,u)}}}else r.pendingTracks[t]=e[t]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,i=this.operationQueue,a={execute:function(){var a=r.sourceBuffer[t];a&&(o.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),a.changeType(e)),i.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){o.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};i.append(a,t)},e.onBufferAppending=function(t,e){var r=this,i=this.hls,a=this.operationQueue,l=this.tracks,u=e.data,d=e.type,h=e.frag,f=e.part,c=e.chunkMeta,v=c.buffering[d],g=self.performance.now();v.start=g;var p=h.stats.buffering,m=f?f.stats.buffering:null;0===p.start&&(p.start=g),m&&0===m.start&&(m.start=g);var y=l.audio,b="audio"===d&&1===c.id&&"audio/mpeg"===(null==y?void 0:y.container),T={execute:function(){if(v.executeStart=self.performance.now(),b){var t=r.sourceBuffer[d];if(t){var e=h.start-t.timestampOffset;Math.abs(e)>=.1&&(o.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+h.start+" (delta: "+e+") sn: "+h.sn+")"),t.timestampOffset=h.start)}}r.appendExecutor(u,d)},onStart:function(){},onComplete:function(){var t=self.performance.now();v.executeEnd=v.end=t,0===p.first&&(p.first=t),m&&0===m.first&&(m.first=t);var e=r.sourceBuffer,i={};for(var a in e)i[a]=nt.getBuffered(e[a]);r.appendError=0,r.hls.trigger(n.a.BUFFER_APPENDED,{type:d,frag:h,part:f,chunkMeta:c,parent:h.type,timeRanges:i})},onError:function(t){o.b.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",t);var e={type:s.b.MEDIA_ERROR,parent:h.type,details:s.a.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=s.a.BUFFER_FULL_ERROR:(r.appendError++,e.details=s.a.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(o.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),i.trigger(n.a.ERROR,e)}};a.append(T,d)},e.onBufferFlushing=function(t,e){var r=this,i=this.operationQueue,a=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(n.a.BUFFER_FLUSHED,{type:t})},onError:function(e){o.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?i.append(a(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){i.append(a(t),t)}))},e.onFragParsed=function(t,e){var r=this,i=e.frag,a=e.part,s=[],l=a?a.elementaryStreams:i.elementaryStreams;l[u.a.AUDIOVIDEO]?s.push("audiovideo"):(l[u.a.AUDIO]&&s.push("audio"),l[u.a.VIDEO]&&s.push("video"));0===s.length&&o.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var t=self.performance.now();i.stats.buffering.end=t,a&&(a.stats.buffering.end=t);var e=a?a.stats:i.stats;r.hls.trigger(n.a.FRAG_BUFFERED,{frag:i,part:a,stats:e,id:i.type})}),s)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,i){var a=r.sourceBuffer[i];return e.type&&e.type!==i||a&&!a.ended&&(a.ended=!0,o.b.log("[buffer-controller]: "+i+" sourceBuffer now EOS")),t&&!(a&&!a.ended)}),!0)&&this.blockBuffers((function(){var t=r.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,i=this.sourceBuffer;if(r&&null!==e){var s=this.getSourceBufferTypes();if(s.length){var o=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(a.a)(o)&&!(o<0)){var l=r.currentTime,u=e.levelTargetDuration,d=Math.max(o,u),h=Math.floor(l/u)*u-d;s.forEach((function(r){var a=i[r];if(a){var s=nt.getBuffered(a);s.length>0&&h>s.start(0)&&(t.trigger(n.a.BACK_BUFFER_REACHED,{bufferEnd:h}),e.live&&t.trigger(n.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:h}),t.trigger(n.a.BUFFER_FLUSHING,{startOffset:0,endOffset:h,type:r}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,i=this.mediaSource,n=t.fragments[0].start+t.totalduration,s=r.duration,l=Object(a.a)(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(o.b.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(t)):(n>l&&n>s||!Object(a.a)(s))&&(o.b.log("[buffer-controller]: Updating Media Source duration to "+n.toFixed(3)),i.duration=n)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var i=Math.max(0,r[0].start),a=Math.max(i,i+t.totalduration);e.setLiveSeekableRange(i,a)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&!t||2===i){this.createSourceBuffers(r),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var a in t)if(!e[a]){var l=t[a];if(!l)throw Error("source buffer exists for track "+a+", however track does not");var u=l.levelCodec||l.codec,d=l.container+";codecs="+u;o.b.log("[buffer-controller]: creating sourceBuffer("+d+")");try{var h=e[a]=r.addSourceBuffer(d),f=a;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[a]={buffer:h,codec:u,container:l.container,levelCodec:l.levelCodec,id:l.id},i++}catch(t){o.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:d})}}i&&this.hls.trigger(n.a.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){o.b.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(n.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(t);r&&r.onError(e)},e.removeExecutor=function(t,e,r){var i=this.media,n=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[t];if(!i||!n||!l)return o.b.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(t);var u=Object(a.a)(i.duration)?i.duration:1/0,d=Object(a.a)(n.duration)?n.duration:1/0,h=Math.max(0,e),f=Math.min(r,u,d);f>h?(o.b.log("[buffer-controller]: Removing ["+h+","+f+"] from the "+t+" SourceBuffer"),l.remove(h,f)):s.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,i=this.sourceBuffer[e];if(!i)return o.b.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);i.ended=!1,i.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return o.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var i=this.operationQueue,a=e.map((function(t){return i.appendBlocker(t)}));Promise.all(a).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];e&&e.updating||i.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var i=this.sourceBuffer[t];if(i){var a=r.bind(this,t);this.listeners[t].push({event:e,listener:a}),i.addEventListener(e,a)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}();function ne(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var se=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,r,i,a=t.prototype;return a.setStreamController=function(t){this.streamController=t},a.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},a.registerListeners=function(){var t=this.hls;t.on(n.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(n.a.MEDIA_DETACHING,this.onMediaDetaching,this)},a.unregisterListener=function(){var t=this.hls;t.off(n.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(n.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(n.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(n.a.MEDIA_DETACHING,this.onMediaDetaching,this)},a.onFpsDropLevelCapping=function(e,r){t.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},a.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},a.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},a.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},a.onMediaDetaching=function(){this.stopCapping()},a.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},a.getMaxLevel=function(e){var r=this,i=this.hls.levels;if(!i.length)return-1;var a=i.filter((function(i,a){return t.isLevelAllowed(a,r.restrictedLevels)&&a<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(a,this.mediaWidth,this.mediaHeight)},a.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},a.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},a.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,r){if(!t||!t.length)return-1;for(var i,a,n=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=r)&&(i=o,!(a=t[s+1])||i.width!==a.width||i.height!==a.height)){n=s;break}}return n},e=t,i=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(t){}return t}}],(r=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&ne(e.prototype,r),i&&ne(e,i),t}(),oe=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(n.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(n.a.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var i=performance.now();if(e){if(this.lastTime){var a=i-this.lastTime,s=r-this.lastDroppedFrames,l=e-this.lastDecodedFrames,u=1e3*s/a,d=this.hls;if(d.trigger(n.a.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:r}),u>0&&s>d.config.fpsDroppedMonitoringThreshold*l){var h=d.currentLevel;o.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=h)&&(h-=1,d.trigger(n.a.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:d.currentLevel}),d.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}(),le=r(12),ue=/^age:\s*[\d.]+\s*$/m,de=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new le.a,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var a=this.xhrSetup;try{if(a)try{a(r,e.url)}catch(t){r.open("GET",e.url,!0),a(r,e.url)}r.readyState||r.open("GET",e.url,!0)}catch(t){return void this.callbacks.onError({code:r.status,text:t.message},e,r)}e.rangeEnd&&r.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),r.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var i=e.readyState,a=this.config;if(!r.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===i){e.onreadystatechange=null,e.onprogress=null;var n=e.status;if(n>=200&&n<300){var s,l;if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l="arraybuffer"===t.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,t,s,e),!this.callbacks)return;var d={url:e.responseURL,data:s};this.callbacks.onSuccess(d,r,t,e)}else r.retry>=a.maxRetry||n>=400&&n<499?(o.b.error(n+" while loading "+t.url),this.callbacks.onError({code:n,text:e.statusText},t,e)):(o.b.warn(n+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},e.loadtimeout=function(){o.b.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&ue.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}(),he=r(16);function fe(t){var e="function"==typeof Map?new Map:void 0;return(fe=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return ce(t,arguments,pe(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ge(i,t)})(t)}function ce(t,e,r){return(ce=ve()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&ge(a,r.prototype),a}).apply(null,arguments)}function ve(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var me=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||ye,this.controller=new self.AbortController,this.stats=new le.a}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var i=this,n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();var s=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e};t.rangeEnd&&(r.headers=new self.Headers({Range:"bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)}));return r}(t,this.controller.signal),o=r.onProgress,l="arraybuffer"===t.responseType,u=l?"byteLength":"length";this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,t,i.response)}),e.timeout),self.fetch(this.request).then((function(r){if(i.response=i.loader=r,!r.ok){var s=r.status,u=r.statusText;throw new Te(u||"fetch, bad network response",s,r)}return n.loading.first=Math.max(self.performance.now(),n.loading.start),n.total=parseInt(r.headers.get("Content-Length")||"0"),o&&Object(a.a)(e.highWaterMark)?i.loadProgressively(r,n,t,e.highWaterMark,o):l?r.arrayBuffer():r.text()})).then((function(s){var l=i.response;self.clearTimeout(i.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first),n.loaded=n.total=s[u];var d={url:l.url,data:s};o&&!Object(a.a)(e.highWaterMark)&&o(n,t,s,l),r.onSuccess(d,n,t,l)})).catch((function(e){if(self.clearTimeout(i.requestTimeout),!n.aborted){var a=e.code||0;r.onError({code:a,text:e.message},t,e.details)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,r,i,a){void 0===i&&(i=0);var n=new he.a,s=t.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return n.dataLength&&a(e,r,n.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return e.loaded+=u,u<i||n.dataLength?(n.push(l),n.dataLength>=i&&a(e,r,n.flush(),t)):a(e,r,l,t),o()})).catch((function(){return Promise.reject()}))}()},t}();function ye(t,e){return new self.Request(t.url,e)}var be,Te=function(t){var e,r;function i(e,r,i){var a;return(a=t.call(this,e)||this).code=void 0,a.details=void 0,a.code=r,a.details=i,a}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,ge(e,r),i}(fe(Error)),Ee=me;!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(be||(be={}));var Se="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Le(){return(Le=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach((function(e){De(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function De(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _e=Re(Re({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:de,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Zt,bufferController:ae,capLevelController:se,fpsController:oe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Se,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:te.a,enableCEA708Captions:!1,enableWebVTT:!1,enableIMSC1:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function ke(t){var e=t.loader;e!==Ee&&e!==de?(o.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Ee,t.progressive=!0,t.enableSoftwareAES=!0,o.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}function xe(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var we=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Kt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Le({},t,e)}(t.DefaultConfig,e);this.userConfig=e,Object(o.a)(r.debug),this._autoLevelCapping=-1,r.progressive&&ke(r);var i=r.abrController,a=r.bufferController,n=r.capLevelController,s=r.fpsController,l=this.abrController=new i(this),u=this.bufferController=new a(this),d=this.capLevelController=new n(this),h=new s(this),f=new x(this),c=new w(this),v=new P(this),g=this.levelController=new J(this),p=new tt(this),m=this.streamController=new qt(this,p);d.setStreamController(m),h.setStreamController(m);var y=[g,m];this.networkControllers=y;var b=[f,c,l,u,d,h,v,p];this.audioTrackController=this.createController(r.audioTrackController,null,y),this.createController(r.audioStreamController,p,y),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,y),this.createController(r.subtitleStreamController,p,y),this.createController(r.timelineController,null,b),this.emeController=this.createController(r.emeController,null,b),this.latencyController=this.createController(N,null,b),this.coreComponents=b}t.isSupported=function(){return function(){var t=Bt();if(!t)return!1;var e=Ut(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!i}()};var e,r,a,l=t.prototype;return l.createController=function(t,e,r){if(t){var i=e?new t(this,e):new t(this);return r&&r.push(i),i}return null},l.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},l.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},l.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},l.off=function(t,e,r,i){void 0===r&&(r=this),this._emitter.off(t,e,r,i)},l.listeners=function(t){return this._emitter.listeners(t)},l.emit=function(t,e,r){return this._emitter.emit(t,e,r)},l.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){o.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(n.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},l.listenerCount=function(t){return this._emitter.listenerCount(t)},l.destroy=function(){o.b.log("destroy"),this.trigger(n.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},l.attachMedia=function(t){o.b.log("attachMedia"),this._media=t,this.trigger(n.a.MEDIA_ATTACHING,{media:t})},l.detachMedia=function(){o.b.log("detachMedia"),this.trigger(n.a.MEDIA_DETACHING,void 0),this._media=null},l.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,a=this.url=i.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});o.b.log("loadSource:"+a),e&&r&&r!==a&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(n.a.MANIFEST_LOADING,{url:t})},l.startLoad=function(t){void 0===t&&(t=-1),o.b.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},l.stopLoad=function(){o.b.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},l.swapAudioCodec=function(){o.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},l.recoverMediaError=function(){o.b.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},l.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,a=[{key:"version",get:function(){return"1.0.7"}},{key:"Events",get:function(){return n.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:_e},set:function(e){t.defaultConfig=e}}],(r=[{key:"levels",get:function(){var t=this.levelController.levels;return t||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){o.b.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){o.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){o.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){o.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){o.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(o.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,i=0;i<r;i++)if(t[i].maxBitrate>e)return i;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&xe(e.prototype,r),a&&xe(e,a),t}();we.defaultConfig=void 0}]).default;}));
//# sourceMappingURL=hls.light.min.js.map
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add("immutability-helper",(function(t){SM.currentModule="immutability-helper";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},e=SM._requireShim;!function(){var t=e("invariant"),r=Object.prototype.hasOwnProperty,n=Array.prototype.splice,o=Object.prototype.toString,a=function(t){return o.call(t).slice(8,-1)},c=Object.assign||function(t,e){return u(e).forEach((function(n){r.call(e,n)&&(t[n]=e[n])})),t},u="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function i(t){if(Array.isArray(t))return c(t.constructor(t.length),t);if("Map"===a(t))return new Map(t);if("Set"===a(t))return new Set(t);if(t&&"object"==typeof t){var e=t.constructor&&t.constructor.prototype;return c(Object.create(e||null),t)}return t}function s(){var e=c({},p);return n.extend=function(t,r){e[t]=r},n.isEquals=function(t,e){return t===e},n;function n(o,c){if("function"==typeof c)return c(o);Array.isArray(o)&&Array.isArray(c)||t(!Array.isArray(c),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),t("object"==typeof c&&null!==c,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var s=o;return u(c).forEach((function(t){if(r.call(e,t)){var u=o===s;s=e[t](c[t],s,c,o),u&&n.isEquals(s,o)&&(s=o)}else{var p="Map"===a(o)?n(o.get(t),c[t]):n(o[t],c[t]);n.isEquals(p,s[t])&&(void 0!==p||r.call(o,t))||(s===o&&(s=i(o)),"Map"===a(s)?s.set(t,p):s[t]=p)}})),s}}var p={$push:function(t,e,r){return y(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return y(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(e,r,o,a){return function(e,r){t(Array.isArray(e),"Expected $splice target to be an array; got %s",e),d(r.$splice)}(r,o),e.forEach((function(t){d(t),r===a&&t.length&&(r=i(a)),n.apply(r,t)})),r},$set:function(e,r,n){return function(e){t(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(n),e},$toggle:function(t,e){l(t,"$toggle");var r=t.length?i(e):e;return t.forEach((function(t){r[t]=!e[t]})),r},$unset:function(t,e,r,n){return l(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===n&&(e=i(n)),delete e[t])})),e},$add:function(t,e,r,n){return g(e,"$add"),l(t,"$add"),"Map"===a(e)?t.forEach((function(t){var r=t[0],o=t[1];e===n&&e.get(r)!==o&&(e=i(n)),e.set(r,o)})):t.forEach((function(t){e!==n||e.has(t)||(e=i(n)),e.add(t)})),e},$remove:function(t,e,r,n){return g(e,"$remove"),l(t,"$remove"),t.forEach((function(t){e===n&&e.has(t)&&(e=i(n)),e.delete(t)})),e},$merge:function(e,r,n,o){var a,c;return a=r,t((c=e)&&"object"==typeof c,"update(): $merge expects a spec of type 'object'; got %s",c),t(a&&"object"==typeof a,"update(): $merge expects a target of type 'object'; got %s",a),u(e).forEach((function(t){e[t]!==r[t]&&(r===o&&(r=i(o)),r[t]=e[t])})),r},$apply:function(e,r){var n;return t("function"==typeof(n=e),"update(): expected spec of $apply to be a function; got %s.",n),e(r)}},f=s();function y(e,r,n){t(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e),l(r[n],n)}function l(e,r){t(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",r,e)}function d(e){t(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function g(e,r){var n=a(e);t("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",r,n)}module.exports=f,module.exports.default=f,module.exports.newContext=s}(),SM.currentModule=null}),"",{requires:["invariant"],node_modules:!0});
YUI.add('immutable', function (Y) {SM.currentModule = 'immutable';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/**
 *  Copyright (c) 2014-2015, Facebook, Inc.
 *  All rights reserved.
 *
 *  This source code is licensed under the BSD-style license found in the
 *  LICENSE file in the root directory of this source tree. An additional grant
 *  of patent rights can be found in the PATENTS file in the same directory.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Immutable=e()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:O(t)}function r(t){return u(t)?t:x(t)}function n(t){return s(t)?t:k(t)}function i(t){return o(t)&&!a(t)?t:A(t)}function o(t){return!(!t||!t[ar])}function u(t){return!(!t||!t[hr])}function s(t){return!(!t||!t[fr])}function a(t){return u(t)||s(t)}function h(t){return!(!t||!t[cr])}function f(t){return t.value=!1,t}function c(t){t&&(t.value=!0)}function _(){}function p(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=Array(r),i=0;r>i;i++)n[i]=t[i+e];return n}function v(t){return void 0===t.size&&(t.size=t.__iterate(y)),t.size}function l(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return 0>e?v(t)+e:e}function y(){return!0}function d(t,e,r){return(0===t||void 0!==r&&-r>=t)&&(void 0===e||void 0!==r&&e>=r)}function m(t,e){return w(t,e,0)}function g(t,e){return w(t,e,e)}function w(t,e,r){return void 0===t?r:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function S(t){this.next=t}function z(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function I(){return{value:void 0,done:!0}}function b(t){return!!M(t)}function q(t){return t&&"function"==typeof t.next}function D(t){var e=M(t);return e&&e.call(t)}function M(t){var e=t&&(zr&&t[zr]||t[Ir]);return"function"==typeof e?e:void 0}function E(t){return t&&"number"==typeof t.length}function O(t){return null===t||void 0===t?T():o(t)?t.toSeq():C(t)}function x(t){return null===t||void 0===t?T().toKeyedSeq():o(t)?u(t)?t.toSeq():t.fromEntrySeq():B(t)}function k(t){return null===t||void 0===t?T():o(t)?u(t)?t.entrySeq():t.toIndexedSeq():W(t)}function A(t){return(null===t||void 0===t?T():o(t)?u(t)?t.entrySeq():t:W(t)).toSetSeq()}function j(t){this._array=t,this.size=t.length}function R(t){var e=Object.keys(t);this._object=t,this._keys=e,
this.size=e.length}function U(t){this._iterable=t,this.size=t.length||t.size}function K(t){this._iterator=t,this._iteratorCache=[]}function L(t){return!(!t||!t[qr])}function T(){return Dr||(Dr=new j([]))}function B(t){var e=Array.isArray(t)?new j(t).fromEntrySeq():q(t)?new K(t).fromEntrySeq():b(t)?new U(t).fromEntrySeq():"object"==typeof t?new R(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function W(t){var e=J(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function C(t){var e=J(t)||"object"==typeof t&&new R(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function J(t){return E(t)?new j(t):q(t)?new K(t):b(t)?new U(t):void 0}function N(t,e,r,n){var i=t._cache;if(i){for(var o=i.length-1,u=0;o>=u;u++){var s=i[r?o-u:u];if(e(s[1],n?s[0]:u,t)===!1)return u+1}return u}return t.__iterateUncached(e,r)}function P(t,e,r,n){var i=t._cache;if(i){var o=i.length-1,u=0;return new S(function(){var t=i[r?o-u:u];return u++>o?I():z(e,n?t[0]:u-1,t[1])})}return t.__iteratorUncached(e,r)}function H(t,e){return e?V(e,t,"",{"":t}):Y(t)}function V(t,e,r,n){return Array.isArray(e)?t.call(n,r,k(e).map(function(r,n){return V(t,r,n,e)})):Q(e)?t.call(n,r,x(e).map(function(r,n){return V(t,r,n,e)})):e}function Y(t){return Array.isArray(t)?k(t).map(Y).toList():Q(t)?x(t).map(Y).toMap():t}function Q(t){return t&&(t.constructor===Object||void 0===t.constructor)}function X(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return"function"==typeof t.equals&&"function"==typeof e.equals&&t.equals(e)?!0:!1}function F(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||u(t)!==u(e)||s(t)!==s(e)||h(t)!==h(e))return!1;if(0===t.size&&0===e.size)return!0;
var r=!a(t);if(h(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&X(i[1],t)&&(r||X(i[0],e))})&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var f=t;t=e,e=f}var c=!0,_=e.__iterate(function(e,n){return(r?t.has(e):i?X(e,t.get(n,yr)):X(t.get(n,yr),e))?void 0:(c=!1,!1)});return c&&t.size===_}function G(t,e){if(!(this instanceof G))return new G(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Mr)return Mr;Mr=this}}function Z(t,e){if(!t)throw Error(e)}function $(t,e,r){if(!(this instanceof $))return new $(t,e,r);if(Z(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),t>e&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Er)return Er;Er=this}}function tt(){throw TypeError("Abstract")}function et(){}function rt(){}function nt(){}function it(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)t/=4294967295,r^=t;return it(r)}if("string"===e)return t.length>Kr?ut(t):st(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return at(t);if("function"==typeof t.toString)return st(""+t);throw Error("Value type "+e+" cannot be hashed.")}function ut(t){var e=Br[t];return void 0===e&&(e=st(t),Tr===Lr&&(Tr=0,Br={}),Tr++,Br[t]=e),e}function st(t){for(var e=0,r=0;t.length>r;r++)e=31*e+t.charCodeAt(r)|0;return it(e)}function at(t){var e;if(jr&&(e=Or.get(t),void 0!==e))return e;if(e=t[Ur],void 0!==e)return e;if(!Ar){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ur],void 0!==e)return e;if(e=ht(t),void 0!==e)return e}if(e=++Rr,1073741824&Rr&&(Rr=0),jr)Or.set(t,e);else{if(void 0!==kr&&kr(t)===!1)throw Error("Non-extensible objects are not allowed as keys.");
if(Ar)Object.defineProperty(t,Ur,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ur]=e;else{if(void 0===t.nodeType)throw Error("Unable to set a non-enumerable property on object.");t[Ur]=e}}return e}function ht(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function ft(t){Z(t!==1/0,"Cannot perform this action with an infinite size.")}function ct(t){return null===t||void 0===t?zt():_t(t)&&!h(t)?t:zt().withMutations(function(e){var n=r(t);ft(n.size),n.forEach(function(t,r){return e.set(r,t)})})}function _t(t){return!(!t||!t[Wr])}function pt(t,e){this.ownerID=t,this.entries=e}function vt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function lt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function yt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function dt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function mt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&wt(t._root)}function gt(t,e){return z(t,e[0],e[1])}function wt(t,e){return{node:t,index:0,__prev:e}}function St(t,e,r,n){var i=Object.create(Cr);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function zt(){return Jr||(Jr=St(0))}function It(t,e,r){var n,i;if(t._root){var o=f(dr),u=f(mr);if(n=bt(t._root,t.__ownerID,0,void 0,e,r,o,u),!u.value)return t;i=t.size+(o.value?r===yr?-1:1:0)}else{if(r===yr)return t;i=1,n=new pt(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?St(i,n):zt()}function bt(t,e,r,n,i,o,u,s){return t?t.update(e,r,n,i,o,u,s):o===yr?t:(c(s),c(u),new dt(e,n,[i,o]))}function qt(t){return t.constructor===dt||t.constructor===yt}function Dt(t,e,r,n,i){if(t.keyHash===n)return new yt(e,n,[t.entry,i]);var o,u=(0===r?t.keyHash:t.keyHash>>>r)&lr,s=(0===r?n:n>>>r)&lr,a=u===s?[Dt(t,e,r+pr,n,i)]:(o=new dt(e,n,i),
s>u?[t,o]:[o,t]);return new vt(e,1<<u|1<<s,a)}function Mt(t,e,r,n){t||(t=new _);for(var i=new dt(t,ot(r),[r,n]),o=0;e.length>o;o++){var u=e[o];i=i.update(t,0,void 0,u[0],u[1])}return i}function Et(t,e,r,n){for(var i=0,o=0,u=Array(r),s=0,a=1,h=e.length;h>s;s++,a<<=1){var f=e[s];void 0!==f&&s!==n&&(i|=a,u[o++]=f)}return new vt(t,i,u)}function Ot(t,e,r,n,i){for(var o=0,u=Array(vr),s=0;0!==r;s++,r>>>=1)u[s]=1&r?e[o++]:void 0;return u[n]=i,new lt(t,o+1,u)}function xt(t,e,n){for(var i=[],u=0;n.length>u;u++){var s=n[u],a=r(s);o(s)||(a=a.map(function(t){return H(t)})),i.push(a)}return jt(t,e,i)}function kt(t,e,r){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):X(t,e)?t:e}function At(t){return function(e,r,n){if(e&&e.mergeDeepWith&&o(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return X(e,i)?e:i}}function jt(t,e,r){return r=r.filter(function(t){return 0!==t.size}),0===r.length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var n=e?function(r,n){t.update(n,yr,function(t){return t===yr?r:e(t,r,n)})}:function(e,r){t.set(r,e)},i=0;r.length>i;i++)r[i].forEach(n)}):t.constructor(r[0])}function Rt(t,e,r,n){var i=t===yr,o=e.next();if(o.done){var u=i?r:t,s=n(u);return s===u?t:s}Z(i||t&&t.set,"invalid keyPath");var a=o.value,h=i?yr:t.get(a,yr),f=Rt(h,e,r,n);return f===h?t:f===yr?t.remove(a):(i?zt():t).set(a,f)}function Ut(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function Kt(t,e,r,n){var i=n?t:p(t);return i[e]=r,i}function Lt(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=Array(i),u=0,s=0;i>s;s++)s===e?(o[s]=r,u=-1):o[s]=t[s+u];return o}function Tt(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=Array(n),o=0,u=0;n>u;u++)u===e&&(o=1),i[u]=t[u+o];return i}function Bt(t){var e=Pt();if(null===t||void 0===t)return e;if(Wt(t))return t;var r=n(t),i=r.size;return 0===i?e:(ft(i),i>0&&vr>i?Nt(0,i,pr,null,new Ct(r.toArray())):e.withMutations(function(t){t.setSize(i),r.forEach(function(e,r){return t.set(r,e)})}))}function Wt(t){
return!(!t||!t[Vr])}function Ct(t,e){this.array=t,this.ownerID=e}function Jt(t,e){function r(t,e,r){return 0===e?n(t,r):i(t,e,r)}function n(t,r){var n=r===s?a&&a.array:t&&t.array,i=r>o?0:o-r,h=u-r;return h>vr&&(h=vr),function(){if(i===h)return Xr;var t=e?--h:i++;return n&&n[t]}}function i(t,n,i){var s,a=t&&t.array,h=i>o?0:o-i>>n,f=(u-i>>n)+1;return f>vr&&(f=vr),function(){for(;;){if(s){var t=s();if(t!==Xr)return t;s=null}if(h===f)return Xr;var o=e?--f:h++;s=r(a&&a[o],n-pr,i+(o<<n))}}}var o=t._origin,u=t._capacity,s=Gt(u),a=t._tail;return r(t._root,t._level,0)}function Nt(t,e,r,n,i,o,u){var s=Object.create(Yr);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=u,s.__altered=!1,s}function Pt(){return Qr||(Qr=Nt(0,0,pr))}function Ht(t,e,r){if(e=l(t,e),e!==e)return t;if(e>=t.size||0>e)return t.withMutations(function(t){0>e?Xt(t,e).set(0,r):Xt(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=f(mr);return e>=Gt(t._capacity)?n=Vt(n,t.__ownerID,0,e,r,o):i=Vt(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Nt(t._origin,t._capacity,t._level,i,n):t}function Vt(t,e,r,n,i,o){var u=n>>>r&lr,s=t&&t.array.length>u;if(!s&&void 0===i)return t;var a;if(r>0){var h=t&&t.array[u],f=Vt(h,e,r-pr,n,i,o);return f===h?t:(a=Yt(t,e),a.array[u]=f,a)}return s&&t.array[u]===i?t:(c(o),a=Yt(t,e),void 0===i&&u===a.array.length-1?a.array.pop():a.array[u]=i,a)}function Yt(t,e){return e&&t&&e===t.ownerID?t:new Ct(t?t.array.slice():[],e)}function Qt(t,e){if(e>=Gt(t._capacity))return t._tail;if(1<<t._level+pr>e){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&lr],n-=pr;return r}}function Xt(t,e,r){void 0!==e&&(e=0|e),void 0!==r&&(r=0|r);var n=t.__ownerID||new _,i=t._origin,o=t._capacity,u=i+e,s=void 0===r?o:0>r?o+r:i+r;if(u===i&&s===o)return t;if(u>=s)return t.clear();for(var a=t._level,h=t._root,f=0;0>u+f;)h=new Ct(h&&h.array.length?[void 0,h]:[],n),a+=pr,f+=1<<a;f&&(u+=f,i+=f,s+=f,o+=f);for(var c=Gt(o),p=Gt(s);p>=1<<a+pr;)h=new Ct(h&&h.array.length?[h]:[],n),
a+=pr;var v=t._tail,l=c>p?Qt(t,s-1):p>c?new Ct([],n):v;if(v&&p>c&&o>u&&v.array.length){h=Yt(h,n);for(var y=h,d=a;d>pr;d-=pr){var m=c>>>d&lr;y=y.array[m]=Yt(y.array[m],n)}y.array[c>>>pr&lr]=v}if(o>s&&(l=l&&l.removeAfter(n,0,s)),u>=p)u-=p,s-=p,a=pr,h=null,l=l&&l.removeBefore(n,0,u);else if(u>i||c>p){for(f=0;h;){var g=u>>>a&lr;if(g!==p>>>a&lr)break;g&&(f+=(1<<a)*g),a-=pr,h=h.array[g]}h&&u>i&&(h=h.removeBefore(n,a,u-f)),h&&c>p&&(h=h.removeAfter(n,a,p-f)),f&&(u-=f,s-=f)}return t.__ownerID?(t.size=s-u,t._origin=u,t._capacity=s,t._level=a,t._root=h,t._tail=l,t.__hash=void 0,t.__altered=!0,t):Nt(u,s,a,h,l)}function Ft(t,e,r){for(var i=[],u=0,s=0;r.length>s;s++){var a=r[s],h=n(a);h.size>u&&(u=h.size),o(a)||(h=h.map(function(t){return H(t)})),i.push(h)}return u>t.size&&(t=t.setSize(u)),jt(t,e,i)}function Gt(t){return vr>t?0:t-1>>>pr<<pr}function Zt(t){return null===t||void 0===t?ee():$t(t)?t:ee().withMutations(function(e){var n=r(t);ft(n.size),n.forEach(function(t,r){return e.set(r,t)})})}function $t(t){return _t(t)&&h(t)}function te(t,e,r,n){var i=Object.create(Zt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function ee(){return Fr||(Fr=te(zt(),Pt()))}function re(t,e,r){var n,i,o=t._map,u=t._list,s=o.get(e),a=void 0!==s;if(r===yr){if(!a)return t;u.size>=vr&&u.size>=2*o.size?(i=u.filter(function(t,e){return void 0!==t&&s!==e}),n=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=s===u.size-1?u.pop():u.set(s,void 0))}else if(a){if(r===u.get(s)[1])return t;n=o,i=u.set(s,[e,r])}else n=o.set(e,u.size),i=u.set(u.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):te(n,i)}function ne(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ue(t){this._iter=t,this.size=t.size}function se(t){var e=Ee(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);
return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Oe,e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return e(r,t,n)!==!1},r)},e.__iteratorUncached=function(e,r){if(e===Sr){var n=t.__iterator(e,r);return new S(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===wr?gr:wr,r)},e}function ae(t,e,r){var n=Ee(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var o=t.get(n,yr);return o===yr?i:e.call(r,o,n,t)},n.__iterateUncached=function(n,i){var o=this;return t.__iterate(function(t,i,u){return n(e.call(r,t,i,u),i,o)!==!1},i)},n.__iteratorUncached=function(n,i){var o=t.__iterator(Sr,i);return new S(function(){var i=o.next();if(i.done)return i;var u=i.value,s=u[0];return z(n,s,e.call(r,u[1],s,t),i)})},n}function he(t,e){var r=Ee(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=se(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=Oe,r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function fe(t,e,r,n){var i=Ee(t);return n&&(i.has=function(n){var i=t.get(n,yr);return i!==yr&&!!e.call(r,i,n,t)},i.get=function(n,i){var o=t.get(n,yr);return o!==yr&&e.call(r,o,n,t)?o:i}),i.__iterateUncached=function(i,o){var u=this,s=0;return t.__iterate(function(t,o,a){return e.call(r,t,o,a)?(s++,i(t,n?o:s-1,u)):void 0},o),s},i.__iteratorUncached=function(i,o){var u=t.__iterator(Sr,o),s=0;return new S(function(){for(;;){var o=u.next();if(o.done)return o;var a=o.value,h=a[0],f=a[1];if(e.call(r,f,h,t))return z(i,n?h:s++,f,o)}})},i}function ce(t,e,r){var n=ct().asMutable();return t.__iterate(function(i,o){n.update(e.call(r,i,o,t),0,function(t){
return t+1})}),n.asImmutable()}function _e(t,e,r){var n=u(t),i=(h(t)?Zt():ct()).asMutable();t.__iterate(function(o,u){i.update(e.call(r,o,u,t),function(t){return t=t||[],t.push(n?[u,o]:o),t})});var o=Me(t);return i.map(function(e){return be(t,o(e))})}function pe(t,e,r,n){var i=t.size;if(void 0!==e&&(e=0|e),void 0!==r&&(r=r===1/0?i:0|r),d(e,r,i))return t;var o=m(e,i),u=g(r,i);if(o!==o||u!==u)return pe(t.toSeq().cacheResult(),e,r,n);var s,a=u-o;a===a&&(s=0>a?0:a);var h=Ee(t);return h.size=0===s?s:t.size&&s||void 0,!n&&L(t)&&s>=0&&(h.get=function(e,r){return e=l(this,e),e>=0&&s>e?t.get(e+o,r):r}),h.__iterateUncached=function(e,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(e,r);var u=0,a=!0,h=0;return t.__iterate(function(t,r){return a&&(a=u++<o)?void 0:(h++,e(t,n?r:h-1,i)!==!1&&h!==s)}),h},h.__iteratorUncached=function(e,r){if(0!==s&&r)return this.cacheResult().__iterator(e,r);var i=0!==s&&t.__iterator(e,r),u=0,a=0;return new S(function(){for(;u++<o;)i.next();if(++a>s)return I();var t=i.next();return n||e===wr?t:e===gr?z(e,a-1,void 0,t):z(e,a-1,t.value[1],t)})},h}function ve(t,e,r){var n=Ee(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var u=0;return t.__iterate(function(t,i,s){return e.call(r,t,i,s)&&++u&&n(t,i,o)}),u},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var u=t.__iterator(Sr,i),s=!0;return new S(function(){if(!s)return I();var t=u.next();if(t.done)return t;var i=t.value,a=i[0],h=i[1];return e.call(r,h,a,o)?n===Sr?t:z(n,a,h,t):(s=!1,I())})},n}function le(t,e,r,n){var i=Ee(t);return i.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,a=0;return t.__iterate(function(t,o,h){return s&&(s=e.call(r,t,o,h))?void 0:(a++,i(t,n?o:a-1,u))}),a},i.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(Sr,o),a=!0,h=0;return new S(function(){var t,o,f;do{if(t=s.next(),t.done)return n||i===wr?t:i===gr?z(i,h++,void 0,t):z(i,h++,t.value[1],t);
var c=t.value;o=c[0],f=c[1],a&&(a=e.call(r,f,o,u))}while(a);return i===Sr?t:z(i,o,f,t)})},i}function ye(t,e){var n=u(t),i=[t].concat(e).map(function(t){return o(t)?n&&(t=r(t)):t=n?B(t):W(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var a=i[0];if(a===t||n&&u(a)||s(t)&&s(a))return a}var h=new j(i);return n?h=h.toKeyedSeq():s(t)||(h=h.toSetSeq()),h=h.flatten(!0),h.size=i.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),h}function de(t,e,r){var n=Ee(t);return n.__iterateUncached=function(n,i){function u(t,h){var f=this;t.__iterate(function(t,i){return(!e||e>h)&&o(t)?u(t,h+1):n(t,r?i:s++,f)===!1&&(a=!0),!a},i)}var s=0,a=!1;return u(t,0),s},n.__iteratorUncached=function(n,i){var u=t.__iterator(n,i),s=[],a=0;return new S(function(){for(;u;){var t=u.next();if(t.done===!1){var h=t.value;if(n===Sr&&(h=h[1]),e&&!(e>s.length)||!o(h))return r?t:z(n,a++,h,t);s.push(u),u=h.__iterator(n,i)}else u=s.pop()}return I()})},n}function me(t,e,r){var n=Me(t);return t.toSeq().map(function(i,o){return n(e.call(r,i,o,t))}).flatten(!0)}function ge(t,e){var r=Ee(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate(function(t,n){return(!o||r(e,o++,i)!==!1)&&r(t,o++,i)!==!1},n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(wr,n),u=0;return new S(function(){return(!i||u%2)&&(i=o.next(),i.done)?i:u%2?z(r,u++,e):z(r,u++,i.value,i)})},r}function we(t,e,r){e||(e=xe);var n=u(t),i=0,o=t.toSeq().map(function(e,n){return[n,e,i++,r?r(e,n,t):e]}).toArray();return o.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?x(o):s(t)?k(o):A(o)}function Se(t,e,r){if(e||(e=xe),r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return ze(e,t[1],r[1])?r:t});return n&&n[0]}return t.reduce(function(t,r){return ze(e,t,r)?r:t})}function ze(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(void 0===r||null===r||r!==r)||n>0}function Ie(t,r,n){
var i=Ee(t);return i.size=new j(n).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(wr,e),i=0;!(r=n.next()).done&&t(r.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=e(t),D(i?t.reverse():t)}),u=0,s=!1;return new S(function(){var e;return s||(e=o.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?I():z(t,u++,r.apply(null,e.map(function(t){return t.value})))})},i}function be(t,e){return L(t)?e:t.constructor(e)}function qe(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function De(t){return ft(t.size),v(t)}function Me(t){return u(t)?r:s(t)?n:i}function Ee(t){return Object.create((u(t)?x:s(t)?k:A).prototype)}function Oe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):O.prototype.cacheResult.call(this)}function xe(t,e){return t>e?1:e>t?-1:0}function ke(t){var r=D(t);if(!r){if(!E(t))throw new TypeError("Expected iterable or array-like: "+t);r=D(e(t))}return r}function Ae(t,e){var r,n=function(o){if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var u=Object.keys(t);Ue(i,u),i.size=u.length,i._name=e,i._keys=u,i._defaultValues=t}this._map=ct(o)},i=n.prototype=Object.create(Gr);return i.constructor=n,n}function je(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function Re(t){return t._name||t.constructor.name||"Record"}function Ue(t,e){try{e.forEach(Ke.bind(void 0,t))}catch(r){}}function Ke(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Z(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Le(t){return null===t||void 0===t?Ce():Te(t)&&!h(t)?t:Ce().withMutations(function(e){var r=i(t);ft(r.size),r.forEach(function(t){return e.add(t)})})}function Te(t){return!(!t||!t[Zr])}function Be(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function We(t,e){var r=Object.create($r);
return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Ce(){return tn||(tn=We(zt()))}function Je(t){return null===t||void 0===t?He():Ne(t)?t:He().withMutations(function(e){var r=i(t);ft(r.size),r.forEach(function(t){return e.add(t)})})}function Ne(t){return Te(t)&&h(t)}function Pe(t,e){var r=Object.create(en);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function He(){return rn||(rn=Pe(ee()))}function Ve(t){return null===t||void 0===t?Xe():Ye(t)?t:Xe().unshiftAll(t)}function Ye(t){return!(!t||!t[nn])}function Qe(t,e,r,n){var i=Object.create(on);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Xe(){return un||(un=Qe(0))}function Fe(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ge(t,e){return e}function Ze(t,e){return[e,t]}function $e(t){return function(){return!t.apply(this,arguments)}}function tr(t){return function(){return-t.apply(this,arguments)}}function er(t){return"string"==typeof t?JSON.stringify(t):t+""}function rr(){return p(arguments)}function nr(t,e){return e>t?1:t>e?-1:0}function ir(t){if(t.size===1/0)return 0;var e=h(t),r=u(t),n=e?1:0,i=t.__iterate(r?e?function(t,e){n=31*n+ur(ot(t),ot(e))|0}:function(t,e){n=n+ur(ot(t),ot(e))|0}:e?function(t){n=31*n+ot(t)|0}:function(t){n=n+ot(t)|0});return or(i,n)}function or(t,e){return e=xr(e,3432918353),e=xr(e<<15|e>>>-15,461845907),e=xr(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=xr(e^e>>>16,2246822507),e=xr(e^e>>>13,3266489909),e=it(e^e>>>16)}function ur(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var sr=Array.prototype.slice;t(r,e),t(n,e),t(i,e),e.isIterable=o,e.isKeyed=u,e.isIndexed=s,e.isAssociative=a,e.isOrdered=h,e.Keyed=r,e.Indexed=n,e.Set=i;var ar="@@__IMMUTABLE_ITERABLE__@@",hr="@@__IMMUTABLE_KEYED__@@",fr="@@__IMMUTABLE_INDEXED__@@",cr="@@__IMMUTABLE_ORDERED__@@",_r="delete",pr=5,vr=1<<pr,lr=vr-1,yr={},dr={value:!1},mr={value:!1},gr=0,wr=1,Sr=2,zr="function"==typeof Symbol&&Symbol.iterator,Ir="@@iterator",br=zr||Ir;
S.prototype.toString=function(){return"[Iterator]"},S.KEYS=gr,S.VALUES=wr,S.ENTRIES=Sr,S.prototype.inspect=S.prototype.toSource=function(){return""+this},S.prototype[br]=function(){return this},t(O,e),O.of=function(){return O(arguments)},O.prototype.toSeq=function(){return this},O.prototype.toString=function(){return this.__toString("Seq {","}")},O.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},O.prototype.__iterate=function(t,e){return N(this,t,e,!0)},O.prototype.__iterator=function(t,e){return P(this,t,e,!0)},t(x,O),x.prototype.toKeyedSeq=function(){return this},t(k,O),k.of=function(){return k(arguments)},k.prototype.toIndexedSeq=function(){return this},k.prototype.toString=function(){return this.__toString("Seq [","]")},k.prototype.__iterate=function(t,e){return N(this,t,e,!1)},k.prototype.__iterator=function(t,e){return P(this,t,e,!1)},t(A,O),A.of=function(){return A(arguments)},A.prototype.toSetSeq=function(){return this},O.isSeq=L,O.Keyed=x,O.Set=A,O.Indexed=k;var qr="@@__IMMUTABLE_SEQ__@@";O.prototype[qr]=!0,t(j,k),j.prototype.get=function(t,e){return this.has(t)?this._array[l(this,t)]:e},j.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;n>=i;i++)if(t(r[e?n-i:i],i,this)===!1)return i+1;return i},j.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new S(function(){return i>n?I():z(t,i,r[e?n-i++:i++])})},t(R,x),R.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},R.prototype.has=function(t){return this._object.hasOwnProperty(t)},R.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,o=0;i>=o;o++){var u=n[e?i-o:o];if(t(r[u],u,this)===!1)return o+1}return o},R.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,o=0;return new S(function(){var u=n[e?i-o:o];return o++>i?I():z(t,u,r[u])})},R.prototype[cr]=!0,t(U,k),U.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);
var r=this._iterable,n=D(r),i=0;if(q(n))for(var o;!(o=n.next()).done&&t(o.value,i++,this)!==!1;);return i},U.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=D(r);if(!q(n))return new S(I);var i=0;return new S(function(){var e=n.next();return e.done?e:z(t,i++,e.value)})},t(K,k),K.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;n.length>i;)if(t(n[i],i++,this)===!1)return i;for(var o;!(o=r.next()).done;){var u=o.value;if(n[i]=u,t(u,i++,this)===!1)break}return i},K.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new S(function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return z(t,i,n[i++])})};var Dr;t(G,k),G.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},G.prototype.get=function(t,e){return this.has(t)?this._value:e},G.prototype.includes=function(t){return X(this._value,t)},G.prototype.slice=function(t,e){var r=this.size;return d(t,e,r)?this:new G(this._value,g(e,r)-m(t,r))},G.prototype.reverse=function(){return this},G.prototype.indexOf=function(t){return X(this._value,t)?0:-1},G.prototype.lastIndexOf=function(t){return X(this._value,t)?this.size:-1},G.prototype.__iterate=function(t,e){for(var r=0;this.size>r;r++)if(t(this._value,r,this)===!1)return r+1;return r},G.prototype.__iterator=function(t,e){var r=this,n=0;return new S(function(){return r.size>n?z(t,n++,r._value):I()})},G.prototype.equals=function(t){return t instanceof G?X(this._value,t._value):F(t)};var Mr;t($,k),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(t,e){return this.has(t)?this._start+l(this,t)*this._step:e},$.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&this.size>e&&e===Math.floor(e);
},$.prototype.slice=function(t,e){return d(t,e,this.size)?this:(t=m(t,this.size),e=g(e,this.size),t>=e?new $(0,0):new $(this.get(t,this._end),this.get(e,this._end),this._step))},$.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&this.size>r)return r}return-1},$.prototype.lastIndexOf=function(t){return this.indexOf(t)},$.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;r>=o;o++){if(t(i,o,this)===!1)return o+1;i+=e?-n:n}return o},$.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;return new S(function(){var u=i;return i+=e?-n:n,o>r?I():z(t,o++,u)})},$.prototype.equals=function(t){return t instanceof $?this._start===t._start&&this._end===t._end&&this._step===t._step:F(this,t)};var Er;t(tt,e),t(et,tt),t(rt,tt),t(nt,tt),tt.Keyed=et,tt.Indexed=rt,tt.Set=nt;var Or,xr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var r=65535&t,n=65535&e;return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0},kr=Object.isExtensible,Ar=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),jr="function"==typeof WeakMap;jr&&(Or=new WeakMap);var Rr=0,Ur="__immutablehash__";"function"==typeof Symbol&&(Ur=Symbol(Ur));var Kr=16,Lr=255,Tr=0,Br={};t(ct,et),ct.of=function(){var t=sr.call(arguments,0);return zt().withMutations(function(e){for(var r=0;t.length>r;r+=2){if(r+1>=t.length)throw Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}})},ct.prototype.toString=function(){return this.__toString("Map {","}")},ct.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ct.prototype.set=function(t,e){return It(this,t,e)},ct.prototype.setIn=function(t,e){return this.updateIn(t,yr,function(){return e})},ct.prototype.remove=function(t){return It(this,t,yr)},ct.prototype.deleteIn=function(t){return this.updateIn(t,function(){return yr})},ct.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r);
},ct.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=Rt(this,ke(t),e,r);return n===yr?void 0:n},ct.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):zt()},ct.prototype.merge=function(){return xt(this,void 0,arguments)},ct.prototype.mergeWith=function(t){var e=sr.call(arguments,1);return xt(this,t,e)},ct.prototype.mergeIn=function(t){var e=sr.call(arguments,1);return this.updateIn(t,zt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ct.prototype.mergeDeep=function(){return xt(this,kt,arguments)},ct.prototype.mergeDeepWith=function(t){var e=sr.call(arguments,1);return xt(this,At(t),e)},ct.prototype.mergeDeepIn=function(t){var e=sr.call(arguments,1);return this.updateIn(t,zt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ct.prototype.sort=function(t){return Zt(we(this,t))},ct.prototype.sortBy=function(t,e){return Zt(we(this,e,t))},ct.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ct.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new _)},ct.prototype.asImmutable=function(){return this.__ensureOwner()},ct.prototype.wasAltered=function(){return this.__altered},ct.prototype.__iterator=function(t,e){return new mt(this,t,e)},ct.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},ct.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?St(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ct.isMap=_t;var Wr="@@__IMMUTABLE_MAP__@@",Cr=ct.prototype;Cr[Wr]=!0,Cr[_r]=Cr.remove,Cr.removeIn=Cr.deleteIn,pt.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,u=i.length;u>o;o++)if(X(r,i[o][0]))return i[o][1];return n},pt.prototype.update=function(t,e,r,n,i,o,u){for(var s=i===yr,a=this.entries,h=0,f=a.length;f>h&&!X(n,a[h][0]);h++);
var _=f>h;if(_?a[h][1]===i:s)return this;if(c(u),(s||!_)&&c(o),!s||1!==a.length){if(!_&&!s&&a.length>=Nr)return Mt(t,a,n,i);var v=t&&t===this.ownerID,l=v?a:p(a);return _?s?h===f-1?l.pop():l[h]=l.pop():l[h]=[n,i]:l.push([n,i]),v?(this.entries=l,this):new pt(t,l)}},vt.prototype.get=function(t,e,r,n){void 0===e&&(e=ot(r));var i=1<<((0===t?e:e>>>t)&lr),o=this.bitmap;return 0===(o&i)?n:this.nodes[Ut(o&i-1)].get(t+pr,e,r,n)},vt.prototype.update=function(t,e,r,n,i,o,u){void 0===r&&(r=ot(n));var s=(0===e?r:r>>>e)&lr,a=1<<s,h=this.bitmap,f=0!==(h&a);if(!f&&i===yr)return this;var c=Ut(h&a-1),_=this.nodes,p=f?_[c]:void 0,v=bt(p,t,e+pr,r,n,i,o,u);if(v===p)return this;if(!f&&v&&_.length>=Pr)return Ot(t,_,h,s,v);if(f&&!v&&2===_.length&&qt(_[1^c]))return _[1^c];if(f&&v&&1===_.length&&qt(v))return v;var l=t&&t===this.ownerID,y=f?v?h:h^a:h|a,d=f?v?Kt(_,c,v,l):Tt(_,c,l):Lt(_,c,v,l);return l?(this.bitmap=y,this.nodes=d,this):new vt(t,y,d)},lt.prototype.get=function(t,e,r,n){void 0===e&&(e=ot(r));var i=(0===t?e:e>>>t)&lr,o=this.nodes[i];return o?o.get(t+pr,e,r,n):n},lt.prototype.update=function(t,e,r,n,i,o,u){void 0===r&&(r=ot(n));var s=(0===e?r:r>>>e)&lr,a=i===yr,h=this.nodes,f=h[s];if(a&&!f)return this;var c=bt(f,t,e+pr,r,n,i,o,u);if(c===f)return this;var _=this.count;if(f){if(!c&&(_--,Hr>_))return Et(t,h,_,s)}else _++;var p=t&&t===this.ownerID,v=Kt(h,s,c,p);return p?(this.count=_,this.nodes=v,this):new lt(t,_,v)},yt.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,u=i.length;u>o;o++)if(X(r,i[o][0]))return i[o][1];return n},yt.prototype.update=function(t,e,r,n,i,o,u){void 0===r&&(r=ot(n));var s=i===yr;if(r!==this.keyHash)return s?this:(c(u),c(o),Dt(this,t,e,r,[n,i]));for(var a=this.entries,h=0,f=a.length;f>h&&!X(n,a[h][0]);h++);var _=f>h;if(_?a[h][1]===i:s)return this;if(c(u),(s||!_)&&c(o),s&&2===f)return new dt(t,this.keyHash,a[1^h]);var v=t&&t===this.ownerID,l=v?a:p(a);return _?s?h===f-1?l.pop():l[h]=l.pop():l[h]=[n,i]:l.push([n,i]),v?(this.entries=l,this):new yt(t,this.keyHash,l)},dt.prototype.get=function(t,e,r,n){return X(r,this.entry[0])?this.entry[1]:n;
},dt.prototype.update=function(t,e,r,n,i,o,u){var s=i===yr,a=X(n,this.entry[0]);return(a?i===this.entry[1]:s)?this:(c(u),s?void c(o):a?t&&t===this.ownerID?(this.entry[1]=i,this):new dt(t,this.keyHash,[n,i]):(c(o),Dt(this,t,e,ot(n),[n,i])))},pt.prototype.iterate=yt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;i>=n;n++)if(t(r[e?i-n:n])===!1)return!1},vt.prototype.iterate=lt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;i>=n;n++){var o=r[e?i-n:n];if(o&&o.iterate(t,e)===!1)return!1}},dt.prototype.iterate=function(t,e){return t(this.entry)},t(mt,S),mt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return gt(t,n.entry)}else if(n.entries){if(r=n.entries.length-1,r>=i)return gt(t,n.entries[this._reverse?r-i:i])}else if(r=n.nodes.length-1,r>=i){var o=n.nodes[this._reverse?r-i:i];if(o){if(o.entry)return gt(t,o.entry);e=this._stack=wt(o,e)}continue}e=this._stack=this._stack.__prev}return I()};var Jr,Nr=vr/4,Pr=vr/2,Hr=vr/4;t(Bt,rt),Bt.of=function(){return this(arguments)},Bt.prototype.toString=function(){return this.__toString("List [","]")},Bt.prototype.get=function(t,e){if(t=l(this,t),t>=0&&this.size>t){t+=this._origin;var r=Qt(this,t);return r&&r.array[t&lr]}return e},Bt.prototype.set=function(t,e){return Ht(this,t,e)},Bt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Bt.prototype.insert=function(t,e){return this.splice(t,0,e)},Bt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=pr,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Pt()},Bt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){Xt(r,0,e+t.length);for(var n=0;t.length>n;n++)r.set(e+n,t[n])})},Bt.prototype.pop=function(){return Xt(this,0,-1)},Bt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Xt(e,-t.length);for(var r=0;t.length>r;r++)e.set(r,t[r]);
})},Bt.prototype.shift=function(){return Xt(this,1)},Bt.prototype.merge=function(){return Ft(this,void 0,arguments)},Bt.prototype.mergeWith=function(t){var e=sr.call(arguments,1);return Ft(this,t,e)},Bt.prototype.mergeDeep=function(){return Ft(this,kt,arguments)},Bt.prototype.mergeDeepWith=function(t){var e=sr.call(arguments,1);return Ft(this,At(t),e)},Bt.prototype.setSize=function(t){return Xt(this,0,t)},Bt.prototype.slice=function(t,e){var r=this.size;return d(t,e,r)?this:Xt(this,m(t,r),g(e,r))},Bt.prototype.__iterator=function(t,e){var r=0,n=Jt(this,e);return new S(function(){var e=n();return e===Xr?I():z(t,r++,e)})},Bt.prototype.__iterate=function(t,e){for(var r,n=0,i=Jt(this,e);(r=i())!==Xr&&t(r,n++,this)!==!1;);return n},Bt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Nt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Bt.isList=Wt;var Vr="@@__IMMUTABLE_LIST__@@",Yr=Bt.prototype;Yr[Vr]=!0,Yr[_r]=Yr.remove,Yr.setIn=Cr.setIn,Yr.deleteIn=Yr.removeIn=Cr.removeIn,Yr.update=Cr.update,Yr.updateIn=Cr.updateIn,Yr.mergeIn=Cr.mergeIn,Yr.mergeDeepIn=Cr.mergeDeepIn,Yr.withMutations=Cr.withMutations,Yr.asMutable=Cr.asMutable,Yr.asImmutable=Cr.asImmutable,Yr.wasAltered=Cr.wasAltered,Ct.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&lr;if(n>=this.array.length)return new Ct([],t);var i,o=0===n;if(e>0){var u=this.array[n];if(i=u&&u.removeBefore(t,e-pr,r),i===u&&o)return this}if(o&&!i)return this;var s=Yt(this,t);if(!o)for(var a=0;n>a;a++)s.array[a]=void 0;return i&&(s.array[n]=i),s},Ct.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n=r-1>>>e&lr;if(n>=this.array.length)return this;var i;if(e>0){var o=this.array[n];if(i=o&&o.removeAfter(t,e-pr,r),i===o&&n===this.array.length-1)return this}var u=Yt(this,t);return u.array.splice(n+1),i&&(u.array[n]=i),u};var Qr,Xr={};t(Zt,ct),Zt.of=function(){return this(arguments)},Zt.prototype.toString=function(){return this.__toString("OrderedMap {","}");
},Zt.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},Zt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Zt.prototype.set=function(t,e){return re(this,t,e)},Zt.prototype.remove=function(t){return re(this,t,yr)},Zt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Zt.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},Zt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Zt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?te(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},Zt.isOrderedMap=$t,Zt.prototype[cr]=!0,Zt.prototype[_r]=Zt.prototype.remove;var Fr;t(ne,x),ne.prototype.get=function(t,e){return this._iter.get(t,e)},ne.prototype.has=function(t){return this._iter.has(t)},ne.prototype.valueSeq=function(){return this._iter.valueSeq()},ne.prototype.reverse=function(){var t=this,e=he(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ne.prototype.map=function(t,e){var r=this,n=ae(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},ne.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?De(this):0,function(i){return t(i,e?--r:r++,n)}),e)},ne.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(wr,e),n=e?De(this):0;return new S(function(){var i=r.next();return i.done?i:z(t,e?--n:n++,i.value,i)})},ne.prototype[cr]=!0,t(ie,k),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate(function(e){return t(e,n++,r)},e)},ie.prototype.__iterator=function(t,e){var r=this._iter.__iterator(wr,e),n=0;
return new S(function(){var e=r.next();return e.done?e:z(t,n++,e.value,e)})},t(oe,A),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)},oe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(wr,e);return new S(function(){var e=r.next();return e.done?e:z(t,e.value,e.value,e)})},t(ue,x),ue.prototype.entrySeq=function(){return this._iter.toSeq()},ue.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){qe(e);var n=o(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)},ue.prototype.__iterator=function(t,e){var r=this._iter.__iterator(wr,e);return new S(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){qe(n);var i=o(n);return z(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}})},ie.prototype.cacheResult=ne.prototype.cacheResult=oe.prototype.cacheResult=ue.prototype.cacheResult=Oe,t(Ae,et),Ae.prototype.toString=function(){return this.__toString(Re(this)+" {","}")},Ae.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Ae.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},Ae.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=je(this,zt()))},Ae.prototype.set=function(t,e){if(!this.has(t))throw Error('Cannot set unknown key "'+t+'" on '+Re(this));if(this._map&&!this._map.has(t)){var r=this._defaultValues[t];if(e===r)return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:je(this,n)},Ae.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:je(this,e)},Ae.prototype.wasAltered=function(){return this._map.wasAltered()},Ae.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},Ae.prototype.__iterate=function(t,e){
var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},Ae.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?je(this,e,t):(this.__ownerID=t,this._map=e,this)};var Gr=Ae.prototype;Gr[_r]=Gr.remove,Gr.deleteIn=Gr.removeIn=Cr.removeIn,Gr.merge=Cr.merge,Gr.mergeWith=Cr.mergeWith,Gr.mergeIn=Cr.mergeIn,Gr.mergeDeep=Cr.mergeDeep,Gr.mergeDeepWith=Cr.mergeDeepWith,Gr.mergeDeepIn=Cr.mergeDeepIn,Gr.setIn=Cr.setIn,Gr.update=Cr.update,Gr.updateIn=Cr.updateIn,Gr.withMutations=Cr.withMutations,Gr.asMutable=Cr.asMutable,Gr.asImmutable=Cr.asImmutable,t(Le,nt),Le.of=function(){return this(arguments)},Le.fromKeys=function(t){return this(r(t).keySeq())},Le.prototype.toString=function(){return this.__toString("Set {","}")},Le.prototype.has=function(t){return this._map.has(t)},Le.prototype.add=function(t){return Be(this,this._map.set(t,!0))},Le.prototype.remove=function(t){return Be(this,this._map.remove(t))},Le.prototype.clear=function(){return Be(this,this._map.clear())},Le.prototype.union=function(){var t=sr.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var r=0;t.length>r;r++)i(t[r]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Le.prototype.intersect=function(){var t=sr.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(r){e.forEach(function(e){t.every(function(t){return t.includes(e)})||r.remove(e)})})},Le.prototype.subtract=function(){var t=sr.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(r){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&r.remove(e)})})},Le.prototype.merge=function(){return this.union.apply(this,arguments)},Le.prototype.mergeWith=function(t){var e=sr.call(arguments,1);return this.union.apply(this,e)},
Le.prototype.sort=function(t){return Je(we(this,t))},Le.prototype.sortBy=function(t,e){return Je(we(this,e,t))},Le.prototype.wasAltered=function(){return this._map.wasAltered()},Le.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)},Le.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Le.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Le.isSet=Te;var Zr="@@__IMMUTABLE_SET__@@",$r=Le.prototype;$r[Zr]=!0,$r[_r]=$r.remove,$r.mergeDeep=$r.merge,$r.mergeDeepWith=$r.mergeWith,$r.withMutations=Cr.withMutations,$r.asMutable=Cr.asMutable,$r.asImmutable=Cr.asImmutable,$r.__empty=Ce,$r.__make=We;var tn;t(Je,Le),Je.of=function(){return this(arguments)},Je.fromKeys=function(t){return this(r(t).keySeq())},Je.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Je.isOrderedSet=Ne;var en=Je.prototype;en[cr]=!0,en.__empty=He,en.__make=Pe;var rn;t(Ve,rt),Ve.of=function(){return this(arguments)},Ve.prototype.toString=function(){return this.__toString("Stack [","]")},Ve.prototype.get=function(t,e){var r=this._head;for(t=l(this,t);r&&t--;)r=r.next;return r?r.value:e},Ve.prototype.peek=function(){return this._head&&this._head.value},Ve.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Qe(t,e)},Ve.prototype.pushAll=function(t){if(t=n(t),0===t.size)return this;ft(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Qe(e,r)},Ve.prototype.pop=function(){return this.slice(1)},Ve.prototype.unshift=function(){return this.push.apply(this,arguments)},Ve.prototype.unshiftAll=function(t){
return this.pushAll(t)},Ve.prototype.shift=function(){return this.pop.apply(this,arguments)},Ve.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Xe()},Ve.prototype.slice=function(t,e){if(d(t,e,this.size))return this;var r=m(t,this.size),n=g(e,this.size);if(n!==this.size)return rt.prototype.slice.call(this,t,e);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Qe(i,o)},Ve.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qe(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ve.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&t(n.value,r++,this)!==!1;)n=n.next;return r},Ve.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new S(function(){if(n){var e=n.value;return n=n.next,z(t,r++,e)}return I()})},Ve.isStack=Ye;var nn="@@__IMMUTABLE_STACK__@@",on=Ve.prototype;on[nn]=!0,on.withMutations=Cr.withMutations,on.asMutable=Cr.asMutable,on.asImmutable=Cr.asImmutable,on.wasAltered=Cr.wasAltered;var un;e.Iterator=S,Fe(e,{toArray:function(){ft(this.size);var t=Array(this.size||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ne(this,!0)},toMap:function(){return ct(this.toKeyedSeq())},toObject:function(){ft(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return Zt(this.toKeyedSeq())},toOrderedSet:function(){return Je(u(this)?this.valueSeq():this)},toSet:function(){return Le(u(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this);
},toSeq:function(){return s(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ve(u(this)?this.valueSeq():this)},toList:function(){return Bt(u(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=sr.call(arguments,0);return be(this,ye(this,t))},includes:function(t){return this.some(function(e){return X(e,t)})},entries:function(){return this.__iterator(Sr)},every:function(t,e){ft(this.size);var r=!0;return this.__iterate(function(n,i,o){return t.call(e,n,i,o)?void 0:(r=!1,!1)}),r},filter:function(t,e){return be(this,fe(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ft(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ft(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!==n&&void 0!==n?""+n:""}),e},keys:function(){return this.__iterator(gr)},map:function(t,e){return be(this,ae(this,t,e))},reduce:function(t,e,r){ft(this.size);var n,i;return arguments.length<2?i=!0:n=e,this.__iterate(function(e,o,u){i?(i=!1,n=e):n=t.call(r,n,e,o,u)}),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return be(this,he(this,!0))},slice:function(t,e){return be(this,pe(this,t,e,!0))},some:function(t,e){return!this.every($e(t),e)},sort:function(t){return be(this,we(this,t))},values:function(){return this.__iterator(wr)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return v(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return ce(this,t,e)},equals:function(t){return F(this,t)},entrySeq:function(){var t=this;if(t._cache)return new j(t._cache);var e=t.toSeq().map(Ze).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){
return this.filter($e(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?(n=[i,r],!1):void 0}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(y)},flatMap:function(t,e){return be(this,me(this,t,e))},flatten:function(t){return be(this,de(this,t,!0))},fromEntrySeq:function(){return new ue(this)},get:function(t,e){return this.find(function(e,r){return X(r,t)},void 0,e)},getIn:function(t,e){for(var r,n=this,i=ke(t);!(r=i.next()).done;){var o=r.value;if(n=n&&n.get?n.get(o,yr):yr,n===yr)return e}return n},groupBy:function(t,e){return _e(this,t,e)},has:function(t){return this.get(t,yr)!==yr},hasIn:function(t){return this.getIn(t,yr)!==yr},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return X(e,t)})},keySeq:function(){return this.toSeq().map(Ge).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Se(this,t)},maxBy:function(t,e){return Se(this,e,t)},min:function(t){return Se(this,t?tr(t):nr)},minBy:function(t,e){return Se(this,e?tr(e):nr,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return be(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return be(this,le(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($e(t),e)},sortBy:function(t,e){return be(this,we(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return be(this,this.toSeq().reverse().take(t).reverse());
},takeWhile:function(t,e){return be(this,ve(this,t,e))},takeUntil:function(t,e){return this.takeWhile($e(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ir(this))}});var sn=e.prototype;sn[ar]=!0,sn[br]=sn.values,sn.__toJS=sn.toArray,sn.__toStringMapper=er,sn.inspect=sn.toSource=function(){return""+this},sn.chain=sn.flatMap,sn.contains=sn.includes,Fe(r,{flip:function(){return be(this,se(this))},mapEntries:function(t,e){var r=this,n=0;return be(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return be(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var an=r.prototype;an[hr]=!0,an[br]=sn.entries,an.__toJS=sn.toObject,an.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+er(t)},Fe(n,{toKeyedSeq:function(){return new ne(this,!1)},filter:function(t,e){return be(this,fe(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return be(this,he(this,!1))},slice:function(t,e){return be(this,pe(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=m(t,0>t?this.count():this.size);var n=this.slice(0,t);return be(this,1===r?n:n.concat(p(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return be(this,de(this,t,!1))},get:function(t,e){return t=l(this,t),0>t||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,r){return r===t},void 0,e)},has:function(t){return t=l(this,t),t>=0&&(void 0!==this.size?this.size===1/0||this.size>t:-1!==this.indexOf(t))},interpose:function(t){return be(this,ge(this,t))},interleave:function(){var t=[this].concat(p(arguments)),e=Ie(this.toSeq(),k.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),
be(this,r)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return be(this,le(this,t,e,!1))},zip:function(){var t=[this].concat(p(arguments));return be(this,Ie(this,rr,t))},zipWith:function(t){var e=p(arguments);return e[0]=this,be(this,Ie(this,t,e))}}),n.prototype[fr]=!0,n.prototype[cr]=!0,Fe(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=sn.includes,i.prototype.contains=i.prototype.includes,Fe(x,r.prototype),Fe(k,n.prototype),Fe(A,i.prototype),Fe(et,r.prototype),Fe(rt,n.prototype),Fe(nt,i.prototype);var hn={Iterable:e,Seq:O,Collection:tt,Map:ct,OrderedMap:Zt,List:Bt,Stack:Ve,Set:Le,OrderedSet:Je,Record:Ae,Range:$,Repeat:G,is:X,fromJS:H};return hn});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add("intersection-observer-polyfill",(function(t){SM.currentModule="intersection-observer-polyfill";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e){if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)return void("isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var n=[];function o(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;this.intersectionRatio=n?i/n:this.isIntersecting?1:0}function i(t,e){var n,o,i,r=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),o))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" ")}function r(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function s(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function h(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(t,e){for(var n=e;n;){if(n==t)return!0;n=u(n)}return!1}function u(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},i.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},i.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(t,"resize",this._checkForIntersections,!0),r(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),n=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var r=i.element,s=h(r),c=this._rootContainsTarget(r),u=i.entry,a=e&&c&&this._computeTargetAndRootIntersection(r,n),l=i.entry=new o({time:t.performance&&performance.now&&performance.now(),target:r,boundingClientRect:s,rootBounds:n,intersectionRect:a});u?e&&c?this._hasCrossedThreshold(u,l)&&this._queuedEntries.push(l):u&&u.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(n,o){if("none"!=t.getComputedStyle(n).display){for(var i,r,s,c,a,l,p,d,f=h(n),g=u(n),_=!1;!_;){var v=null,m=1==g.nodeType?t.getComputedStyle(g):{};if("none"==m.display)return;if(g==this.root||g==e?(_=!0,v=o):g!=e.body&&g!=e.documentElement&&"visible"!=m.overflow&&(v=h(g)),v&&(i=v,r=f,s=void 0,c=void 0,a=void 0,l=void 0,p=void 0,d=void 0,s=Math.max(i.top,r.top),c=Math.min(i.bottom,r.bottom),a=Math.max(i.left,r.left),l=Math.min(i.right,r.right),d=c-s,!(f=(p=l-a)>=0&&d>=0&&{top:s,bottom:c,left:a,right:l,width:p,height:d})))break;g=u(g)}return f}},i.prototype._getRootRect=function(){var t;if(this.root)t=h(this.root);else{var n=e.documentElement,o=e.body;t={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},i.prototype._rootIsInDom=function(){return!this.root||c(e,this.root)},i.prototype._rootContainsTarget=function(t){return c(this.root||e,t)},i.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},i.prototype._unregisterInstance=function(){var t=n.indexOf(this);-1!=t&&n.splice(t,1)},t.IntersectionObserver=i,t.IntersectionObserverEntry=o}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("invariant",(function(r){SM.currentModule="invariant";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";module.exports=function(r,e,n,i,o,t,a,u){if(void 0===e)throw new Error("invariant requires an error message argument");if(!r){var d;if(void 0===e)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,i,o,t,a,u],l=0;(d=new Error(e.replace(/%s/g,(function(){return s[l++]})))).name="Invariant Violation"}throw d.framesToPop=1,d}}}(),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add("js-cookie",(function(e){SM.currentModule="js-cookie";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(e){var n;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}((function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function o(t){function r(){}function i(n,o,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var c=JSON.stringify(o);/^[\{\[]/.test(c)&&(o=c)}catch(e){}o=t.write?t.write(o,n):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var f in i)i[f]&&(u+="; "+f,!0!==i[f]&&(u+="="+i[f].split(";")[0]));return document.cookie=n+"="+o+u}}function c(e,o){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],c=0;c<i.length;c++){var u=i[c].split("="),f=u.slice(1).join("=");o||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var d=n(u[0]);if(f=(t.read||t)(f,d)||n(f),o)try{f=JSON.parse(f)}catch(e){}if(r[d]=f,e===d)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return c(e,!1)},r.getJSON=function(e){return c(e,!0)},r.remove=function(n,o){i(n,"",e(o,{expires:-1}))},r.defaults={},r.withConverter=o,r}((function(){}))})),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add("leaflet-markercluster",(function(t){SM.currentModule="leaflet-markercluster";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(t,e,i){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.addLayers(e)}if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this;if(!this._map)return this._needsClustering.push(t),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom);var n=t,s=this._map.getZoom();if(t.__parent)for(;n.__parent._zoom>=s;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,n):this._animationAddLayerNonAnimated(t,n)),this},removeLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.removeLayers(e)}return t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.setOpacity&&t.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push(t),this):(this._nonPointGroup.removeLayer(t),this)},addLayers:function(t){var e,i,n,s=this._map,r=this._featureGroup,o=this._nonPointGroup;for(e=0,i=t.length;e<i;e++)if((n=t[e]).getLatLng){if(!this.hasLayer(n))if(s){if(this._addLayer(n,this._maxZoom),n.__parent&&2===n.__parent.getChildCount()){var a=n.__parent.getAllChildMarkers(),h=a[0]===n?a[1]:a[0];r.removeLayer(h)}}else this._needsClustering.push(n)}else o.addLayer(n);return s&&(r.eachLayer((function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)),this},removeLayers:function(t){var e,i,n,s=this._featureGroup,r=this._nonPointGroup;if(!this._map){for(e=0,i=t.length;e<i;e++)n=t[e],this._arraySplice(this._needsClustering,n),r.removeLayer(n);return this}for(e=0,i=t.length;e<i;e++)(n=t[e]).__parent?(this._removeLayer(n,!0,!0),s.hasLayer(n)&&(s.removeLayer(n),n.setOpacity&&n.setOpacity(1))):r.removeLayer(n);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),s.eachLayer((function(t){t instanceof L.MarkerCluster&&t._updateIcon()})),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer((function(t){delete t.__parent})),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;if(this._topClusterLevel)t.extend(this._topClusterLevel._bounds);else for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),i=n.length-1;i>=0;i--)t.call(e,n[i]);this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer((function(e){t.push(e)})),t},getLayer:function(t){var e=null;return this.eachLayer((function(i){L.stamp(i)===t&&(e=i)})),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(e=(i=this._needsRemoving).length-1;e>=0;e--)if(i[e]===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=function(){if((t._icon||t.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon)e();else if(t.__parent._icon){var n=function(){this.off("spiderfied",n,this),e()};this.on("spiderfied",n,this),t.__parent.spiderfy()}};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",i,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),this._map.setView(t.getLatLng(),t.__parent._zoom+1),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,n;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(t),this._nonPointGroup.onAdd(t),this._gridClusters||this._generateInitialClusters(),e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n,!0);for(this._needsRemoving=[],e=0,i=this._needsClustering.length;e<i;e++)(n=this._needsClustering[e]).getLatLng?n.__parent||this._addLayer(n,this._maxZoom):this._featureGroup.addLayer(n);this._needsClustering=[],this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(t),this._nonPointGroup.onRemove(t),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeLayer:function(t,e,i){var n=this._gridClusters,s=this._gridUnclustered,r=this._featureGroup,o=this._map;if(e)for(var a=this._maxZoom;a>=0&&s[a].removeObject(t,o.project(t.getLatLng(),a));a--);var h,_=t.__parent,u=_._markers;for(this._arraySplice(u,t);_&&(_._childCount--,!(_._zoom<0));)e&&_._childCount<=1?(h=_._markers[0]===t?_._markers[1]:_._markers[0],n[_._zoom].removeObject(_,o.project(_._cLatLng,_._zoom)),s[_._zoom].addObject(h,o.project(h.getLatLng(),_._zoom)),this._arraySplice(_.__parent._childClusters,_),_.__parent._markers.push(h),h.__parent=_.__parent,_._icon&&(r.removeLayer(_),i||r.addLayer(h))):(_._recalculateBounds(),i&&_._icon||_._updateIcon()),_=_.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},_propagateEvent:function(t){if(t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;t.type="cluster"+t.type}this.fire(t.type,t)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=this._map;e.getMaxZoom()===e.getZoom()?this.options.spiderfyOnMaxZoom&&t.layer.spiderfy():this.options.zoomToBoundsOnClick&&t.layer.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&e._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),e=this.options.maxClusterRadius;this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var i=t;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(e),this._gridUnclustered[i]=new L.DistanceGrid(e);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(t,e){var i,n,s=this._gridClusters,r=this._gridUnclustered;for(this.options.singleMarkerMode&&(t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}}));e>=0;e--){i=this._map.project(t.getLatLng(),e);var o=s[e].getNearObject(i);if(o)return o._addChild(t),void(t.__parent=o);if(o=r[e].getNearObject(i)){var a=o.__parent;a&&this._removeLayer(o,!1);var h=new L.MarkerCluster(this,e,o,t);s[e].addObject(h,this._map.project(h._cLatLng,e)),o.__parent=h,t.__parent=h;var _=h;for(n=e-1;n>a._zoom;n--)_=new L.MarkerCluster(this,n,_),s[n].addObject(_,this._map.project(o.getLatLng(),n));for(a._addChild(_),n=e;n>=0&&r[n].removeObject(o,this._map.project(o.getLatLng(),n));n--);return}r[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.contains(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var t=this._map.getBounds(),e=t._southWest,i=t._northEast,n=L.Browser.mobile?0:Math.abs(e.lat-i.lat),s=L.Browser.mobile?0:Math.abs(e.lng-i.lng);return new L.LatLngBounds(new L.LatLng(e.lat-n,e.lng-s,!0),new L.LatLng(i.lat+n,i.lng+s,!0))},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),s=this._featureGroup;this._topClusterLevel._recursively(n,t,0,(function(r){var o,a=r._latlng,h=r._markers;for(n.contains(a)||(a=null),r._isSingleParent()&&t+1===e?(s.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,n)):(r.setOpacity(0),r._recursivelyAddChildrenToMap(a,e,n)),i=h.length-1;i>=0;i--)o=h[i],n.contains(o._latlng)||s.removeLayer(o)})),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),s.eachLayer((function(t){t instanceof L.MarkerCluster||!t._icon||t.setOpacity(1)})),this._topClusterLevel._recursively(n,t,e,(function(t){t._recursivelyRestoreChildPositions(e)})),this._enqueue((function(){this._topClusterLevel._recursively(n,t,0,(function(t){s.removeLayer(t),t.setOpacity(1)})),this._animationEnd()}))},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds();t._recursivelyAnimateChildrenInAndAddSelfToMap(n,e+1,i);var s=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue((function(){if(1===t._childCount){var r=t._markers[0];r.setLatLng(r.getLatLng()),r.setOpacity(1)}else t._recursively(n,i,0,(function(t){t._recursivelyRemoveChildrenFromMap(n,e+1)}));s._animationEnd()}))},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.setOpacity(0),this._enqueue((function(){n.removeLayer(t),t.setOpacity(1),i._animationEnd()}))):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(e.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds())},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)},L.MarkerCluster=L.Marker.extend({initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var i=this._markers.length-1;i>=0;i--)t.push(this._markers[i]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var t,e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),s=this._zoom+1,r=i.getZoom();e.length>0&&n>s;){s++;var o=[];for(t=0;t<e.length;t++)o=o.concat(e[t]._childClusters);e=o}n>s?this._group._map.setView(this._latlng,s):n<=r?this._group._map.setView(this._latlng,r+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._expandBounds(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_expandBounds:function(t){var e,i=t._wLatLng||t._latlng;t instanceof L.MarkerCluster?(this._bounds.extend(t._bounds),e=t._childCount):(this._bounds.extend(i),e=1),this._cLatLng||(this._cLatLng=t._cLatLng||i);var n=this._childCount+e;this._wLatLng?(this._wLatLng.lat=(i.lat*e+this._wLatLng.lat*this._childCount)/n,this._wLatLng.lng=(i.lng*e+this._wLatLng.lng*this._childCount)/n):this._latlng=this._wLatLng=new L.LatLng(i.lat,i.lng)},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,0,i-1,(function(t){var i,n,s=t._markers;for(i=s.length-1;i>=0;i--)(n=s[i])._icon&&(n._setPos(e),n.setOpacity(0))}),(function(t){var i,n,s=t._childClusters;for(i=s.length-1;i>=0;i--)(n=s[i])._icon&&(n._setPos(e),n.setOpacity(0))}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i){this._recursively(t,i,0,(function(n){n._recursivelyAnimateChildrenIn(t,n._group._map.latLngToLayerPoint(n.getLatLng()).round(),e),n._isSingleParent()&&e-1===i?(n.setOpacity(1),n._recursivelyRemoveChildrenFromMap(t,e)):n.setOpacity(0),n._addToMap()}))},_recursivelyBecomeVisible:function(t,e){this._recursively(t,0,e,null,(function(t){t.setOpacity(1)}))},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,-1,e,(function(n){if(e!==n._zoom)for(var s=n._markers.length-1;s>=0;s--){var r=n._markers[s];i.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.setOpacity&&r.setOpacity(0)),n._group._featureGroup.addLayer(r))}}),(function(e){e._addToMap(t)}))},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i){var n,s;this._recursively(t,-1,e-1,(function(t){for(s=t._markers.length-1;s>=0;s--)n=t._markers[s],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))}),(function(t){for(s=t._childClusters.length-1;s>=0;s--)n=t._childClusters[s],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))}))},_recursively:function(t,e,i,n,s){var r,o,a=this._childClusters,h=this._zoom;if(e>h)for(r=a.length-1;r>=0;r--)o=a[r],t.intersects(o._bounds)&&o._recursively(t,e,i,n,s);else if(n&&n(this),s&&this._zoom===i&&s(this),i>h)for(r=a.length-1;r>=0;r--)o=a[r],t.intersects(o._bounds)&&o._recursively(t,e,i,n,s)},_recalculateBounds:function(){var t,e=this._markers,i=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,t=e.length-1;t>=0;t--)this._expandBounds(e[t]);for(t=i.length-1;t>=0;t--)this._expandBounds(i[t])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),s=this._grid,r=s[n]=s[n]||{},o=r[i]=r[i]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,o.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,s=this._getCoord(e.x),r=this._getCoord(e.y),o=this._grid,a=o[r]=o[r]||{},h=a[s]=a[s]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=h.length;i<n;i++)if(h[i]===t)return h.splice(i,1),1===n&&delete a[s],!0},eachObject:function(t,e){var i,n,s,r,o,a,h=this._grid;for(i in h)for(n in o=h[i])for(s=0,r=(a=o[n]).length;s<r;s++)t.call(e,a[s])&&(s--,r--)},getNearObject:function(t){var e,i,n,s,r,o,a,h,_=this._getCoord(t.x),u=this._getCoord(t.y),l=this._objectPoint,d=this._sqCellSize,p=null;for(e=u-1;e<=u+1;e++)if(s=this._grid[e])for(i=_-1;i<=_+1;i++)if(r=s[i])for(n=0,o=r.length;n<o;n++)a=r[n],(h=this._sqDist(l[L.Util.stamp(a)],t))<d&&(d=h,p=a);return p},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,s,r=0,o=null,a=[];for(i=e.length-1;i>=0;i--)n=e[i],(s=this.getDistant(n,t))>0&&(a.push(n),s>r&&(r=s,o=n));return{maxPoint:o,newPoints:a}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints)):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,s=null,r=null;for(e=t.length-1;e>=0;e--){var o=t[e];(!1===i||o.lat>i)&&(s=o,i=o.lat),(!1===n||o.lat<n)&&(r=o,n=o.lat)}return[].concat(this.buildConvexHull([r,s],t),this.buildConvexHull([s,r],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,i):(i.y+=10,t=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,r=this._2PI/t,o=[];for(o.length=t,i=t-1;i>=0;i--)n=this._circleStartAngle+i*r,o[i]=new L.Point(e.x+s*Math.cos(n),e.y+s*Math.sin(n))._round();return o},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,s=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,r=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,o=0,a=[];for(a.length=t,i=t-1;i>=0;i--)o+=s/n+5e-4*i,a[i]=new L.Point(e.x+n*Math.cos(o),e.y+n*Math.sin(o))._round(),n+=this._2PI*r/o;return a},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,s=i._featureGroup,r=this.getAllChildMarkers();for(this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],s.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:e.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1,_animationSpiderfy:function(t,i){var n,s,r,o,a=this._group,h=a._map,_=a._featureGroup,u=h.latLngToLayerPoint(this._latlng);for(n=t.length-1;n>=0;n--)(s=t[n]).setOpacity?(s.setZIndexOffset(1e6),s.setOpacity(0),_.addLayer(s),s._setPos(u)):_.addLayer(s);a._forceLayout(),a._animationStart();var l=L.Path.SVG?0:.3,d=L.Path.SVG_NS;for(n=t.length-1;n>=0;n--)if(o=h.layerPointToLatLng(i[n]),(s=t[n])._preSpiderfyLatlng=s._latlng,s.setLatLng(o),s.setOpacity&&s.setOpacity(1),r=new L.Polyline([this._latlng,o],{weight:1.5,color:"#222",opacity:l}),h.addLayer(r),s._spiderLeg=r,L.Path.SVG&&this.SVG_ANIMATION){var p=r._path.getTotalLength();r._path.setAttribute("stroke-dasharray",p+","+p);var c=e.createElementNS(d,"animate");c.setAttribute("attributeName","stroke-dashoffset"),c.setAttribute("begin","indefinite"),c.setAttribute("from",p),c.setAttribute("to",0),c.setAttribute("dur",.25),r._path.appendChild(c),c.beginElement(),(c=e.createElementNS(d,"animate")).setAttribute("attributeName","stroke-opacity"),c.setAttribute("attributeName","stroke-opacity"),c.setAttribute("begin","indefinite"),c.setAttribute("from",0),c.setAttribute("to",.5),c.setAttribute("dur",.25),r._path.appendChild(c),c.beginElement()}if(this.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),n=t.length-1;n>=0;n--)(s=t[n]._spiderLeg).options.opacity=.5,s._path.setAttribute("stroke-opacity",.5);setTimeout((function(){a._animationEnd(),a.fire("spiderfied")}),200)},_animationUnspiderfy:function(t){var e,i,n,s=this._group,r=s._map,o=s._featureGroup,a=t?r._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):r.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(),_=L.Path.SVG&&this.SVG_ANIMATION;for(s._animationStart(),this.setOpacity(1),i=h.length-1;i>=0;i--)(e=h[i])._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,e.setOpacity?(e._setPos(a),e.setOpacity(0)):o.removeLayer(e),_&&((n=e._spiderLeg._path.childNodes[0]).setAttribute("to",n.getAttribute("from")),n.setAttribute("from",0),n.beginElement(),(n=e._spiderLeg._path.childNodes[1]).setAttribute("from",.5),n.setAttribute("to",0),n.setAttribute("stroke-opacity",0),n.beginElement(),e._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout((function(){var t=0;for(i=h.length-1;i>=0;i--)(e=h[i])._spiderLeg&&t++;for(i=h.length-1;i>=0;i--)(e=h[i])._spiderLeg&&(e.setOpacity&&(e.setOpacity(1),e.setZIndexOffset(0)),t>1&&o.removeLayer(e),r.removeLayer(e._spiderLeg),delete e._spiderLeg);s._animationEnd()}),200)}}:{_animationSpiderfy:function(t,e){var i,n,s,r,o=this._group,a=o._map,h=o._featureGroup;for(i=t.length-1;i>=0;i--)r=a.layerPointToLatLng(e[i]),(n=t[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.setZIndexOffset&&n.setZIndexOffset(1e6),h.addLayer(n),s=new L.Polyline([this._latlng,r],{weight:1.5,color:"#222"}),a.addLayer(s),n._spiderLeg=s;this.setOpacity(.3),o.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.setOpacity(1),t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}})}(window,document),SM.currentModule=null}),"",{requires:["leaflet"],node_modules:!0});
YUI.add("leaflet",(function(t){SM.currentModule="leaflet";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(t,e,i){var n,o,s=t.L,a={version:"0.7.7"};"object"==typeof module&&"object"==typeof module.exports?module.exports=a:"function"==typeof define&&define.amd&&define(a),a.noConflict=function(){return t.L=s,this},t.L=a,a.Util={extend:function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;i<n;i++)for(e in o=s[i]||{})o.hasOwnProperty(e)&&(t[e]=o[e]);return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:(n=0,o="_leaflet_id",function(t){return t[o]=t[o]||++n,t[o]}),invokeEach:function(t,e,i){var n,o;if("object"==typeof t){for(n in o=Array.prototype.slice.call(arguments,3),t)e.apply(i,[n,t[n]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,i){var n,o;return function s(){var a=arguments;n?o=!0:(n=!0,setTimeout((function(){n=!1,o&&(s.apply(i,a),o=!1)}),e),t.apply(i,a))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return a.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=a.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=t[o[i]+e];return n}var i=0;function n(e){var n=+new Date,o=Math.max(0,16-(n-i));return i=n+o,t.setTimeout(e,o)}var o=t.requestAnimationFrame||e("RequestAnimationFrame")||n,s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};a.Util.requestAnimFrame=function(e,i,s,r){if(e=a.bind(e,i),!s||o!==n)return o.call(t,e,r);e()},a.Util.cancelAnimFrame=function(e){e&&s.call(t,e)}}(),a.extend=a.Util.extend,a.bind=a.Util.bind,a.stamp=a.Util.stamp,a.setOptions=a.Util.setOptions,a.Class=function(){},a.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;for(var o in n.constructor=e,e.prototype=n,this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(a.extend(e,t.statics),delete t.statics),t.includes&&(a.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=a.extend({},n.options,t.options)),a.extend(n,t),n._initHooks=[];var s=this;return e.__super__=s.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},a.Class.include=function(t){a.extend(this.prototype,t)},a.Class.mergeOptions=function(t){a.extend(this.prototype.options,t)},a.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var r,h,l,u,c,d,p,_,m,f,g,v,y,P,L,x,w,T,D,b,E,M,C,S="_leaflet_events";a.Mixin={},a.Mixin.Events={addEventListener:function(t,e,i){if(a.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,o,s,r,h,l,u,c=this[S]=this[S]||{},d=i&&i!==this&&a.stamp(i);for(n=0,o=(t=a.Util.splitWords(t)).length;n<o;n++)s={action:e,context:i||this},r=t[n],d?(l=(h=r+"_idx")+"_len",(u=c[h]=c[h]||{})[d]||(u[d]=[],c[l]=(c[l]||0)+1),u[d].push(s)):(c[r]=c[r]||[],c[r].push(s));return this},hasEventListeners:function(t){var e=this[S];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[S])return this;if(!t)return this.clearAllEventListeners();if(a.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,o,s,r,h,l,u,c,d=this[S],p=i&&i!==this&&a.stamp(i);for(n=0,o=(t=a.Util.splitWords(t)).length;n<o;n++)if(u=(l=(s=t[n])+"_idx")+"_len",c=d[l],e){if(r=p&&c?c[p]:d[s]){for(h=r.length-1;h>=0;h--)r[h].action!==e||i&&r[h].context!==i||(r.splice(h,1)[0].action=a.Util.falseFn);i&&c&&0===r.length&&(delete c[p],d[u]--)}}else delete d[s],delete d[l],delete d[u];return this},clearAllEventListeners:function(){return delete this[S],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,o,s,r,h=a.Util.extend({},e,{type:t,target:this}),l=this[S];if(l[t])for(n=0,o=(i=l[t].slice()).length;n<o;n++)i[n].action.call(i[n].context,h);for(r in s=l[t+"_idx"])if(i=s[r].slice())for(n=0,o=i.length;n<o;n++)i[n].action.call(i[n].context,h);return this},addOneTimeEventListener:function(t,e,i){if(a.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=a.bind((function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)}),this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},a.Mixin.Events.on=a.Mixin.Events.addEventListener,a.Mixin.Events.off=a.Mixin.Events.removeEventListener,a.Mixin.Events.once=a.Mixin.Events.addOneTimeEventListener,a.Mixin.Events.fire=a.Mixin.Events.fireEvent,h=(r="ActiveXObject"in t)&&!e.addEventListener,l=navigator.userAgent.toLowerCase(),u=-1!==l.indexOf("webkit"),c=-1!==l.indexOf("chrome"),d=-1!==l.indexOf("phantom"),p=-1!==l.indexOf("android"),_=-1!==l.search("android [23]"),m=-1!==l.indexOf("gecko"),f=typeof orientation!=void 0+"",g=!t.PointerEvent&&t.MSPointerEvent,v=t.PointerEvent&&t.navigator.pointerEnabled||g,y="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,P=e.documentElement,L=r&&"transition"in P.style,x="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!_,w="MozPerspective"in P.style,T="OTransition"in P.style,D=!t.L_DISABLE_3D&&(L||x||w||T)&&!d,b=!t.L_NO_TOUCH&&!d&&(v||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),a.Browser={ie:r,ielt9:h,webkit:u,gecko:m&&!u&&!t.opera&&!r,android:p,android23:_,chrome:c,ie3d:L,webkit3d:x,gecko3d:w,opera3d:T,any3d:D,mobile:f,mobileWebkit:f&&u,mobileWebkit3d:f&&x,mobileOpera:f&&t.opera,touch:b,msPointer:g,pointer:v,retina:y},a.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},add:function(t){return this.clone()._add(a.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(a.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){var e=(t=a.point(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=a.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=a.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a.Util.formatNum(this.x)+", "+a.Util.formatNum(this.y)+")"}},a.point=function(t,e,i){return t instanceof a.Point?t:a.Util.isArray(t)?new a.Point(t[0],t[1]):null==t?t:new a.Point(t,e,i)},a.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},a.Bounds.prototype={extend:function(t){return t=a.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)},getTopRight:function(){return new a.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof a.Point?a.point(t):a.bounds(t))instanceof a.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=a.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},a.bounds=function(t,e){return!t||t instanceof a.Bounds?t:new a.Bounds(t,e)},a.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},a.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new a.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},a.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,n=0,o=0,s=t,r=e.body,h=e.documentElement;do{if(n+=s.offsetTop||0,o+=s.offsetLeft||0,n+=parseInt(a.DomUtil.getStyle(s,"borderTopWidth"),10)||0,o+=parseInt(a.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,i=a.DomUtil.getStyle(s,"position"),s.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||h.scrollTop||0,o+=r.scrollLeft||h.scrollLeft||0;break}if("relative"===i&&!s.offsetLeft){var l=a.DomUtil.getStyle(s,"width"),u=a.DomUtil.getStyle(s,"max-width"),c=s.getBoundingClientRect();"none"===l&&"none"===u||(o+=c.left+s.clientLeft),n+=c.top+(r.scrollTop||h.scrollTop||0);break}s=s.offsetParent}while(s);s=t;do{if(s===r)break;n-=s.scrollTop||0,o-=s.scrollLeft||0,s=s.parentNode}while(s);return new a.Point(o,n)},documentIsLtr:function(){return a.DomUtil._docIsLtrCached||(a.DomUtil._docIsLtrCached=!0,a.DomUtil._docIsLtr="ltr"===a.DomUtil.getStyle(e.body,"direction")),a.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},hasClass:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=a.DomUtil._getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(void 0!==t.classList)for(var i=a.Util.splitWords(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!a.DomUtil.hasClass(t,e)){var s=a.DomUtil._getClass(t);a.DomUtil._setClass(t,(s?s+" ":"")+e)}},removeClass:function(t,e){void 0!==t.classList?t.classList.remove(e):a.DomUtil._setClass(t,a.Util.trim((" "+a.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e},_getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=a.Browser.webkit3d,i=(e?",0":"")+")";return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){return a.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+" scale("+t+") "},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&a.Browser.any3d?t.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},a.DomUtil.TRANSFORM=a.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),a.DomUtil.TRANSITION=a.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),a.DomUtil.TRANSITION_END="webkitTransition"===a.DomUtil.TRANSITION||"OTransition"===a.DomUtil.TRANSITION?a.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in e)a.extend(a.DomUtil,{disableTextSelection:function(){a.DomEvent.on(t,"selectstart",a.DomEvent.preventDefault)},enableTextSelection:function(){a.DomEvent.off(t,"selectstart",a.DomEvent.preventDefault)}});else{var i=a.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);a.extend(a.DomUtil,{disableTextSelection:function(){if(i){var t=e.documentElement.style;this._userSelect=t[i],t[i]="none"}},enableTextSelection:function(){i&&(e.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}a.extend(a.DomUtil,{disableImageDrag:function(){a.DomEvent.on(t,"dragstart",a.DomEvent.preventDefault)},enableImageDrag:function(){a.DomEvent.off(t,"dragstart",a.DomEvent.preventDefault)}})}(),a.LatLng=function(t,e,i){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,void 0!==i&&(this.alt=parseFloat(i))},a.extend(a.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),a.LatLng.prototype={equals:function(t){return!!t&&(t=a.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=a.LatLng.MAX_MARGIN)},toString:function(t){return"LatLng("+a.Util.formatNum(this.lat,t)+", "+a.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=a.latLng(t);var e=a.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*e,n=(t.lng-this.lng)*e,o=this.lat*e,s=t.lat*e,r=Math.sin(i/2),h=Math.sin(n/2),l=r*r+h*h*Math.cos(o)*Math.cos(s);return 12756274*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))},wrap:function(t,e){var i=this.lng;return i=(i+(e=e||180))%(e-(t=t||-180))+(i<t||i===e?e:t),new a.LatLng(this.lat,i)}},a.latLng=function(t,e){return t instanceof a.LatLng?t:a.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new a.LatLng(t[0],t[1],t[2]):null:null==t?t:"object"==typeof t&&"lat"in t?new a.LatLng(t.lat,"lng"in t?t.lng:t.lon):void 0===e?null:new a.LatLng(t,e)},a.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},a.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=a.latLng(t);return(t=null!==e?e:a.latLngBounds(t))instanceof a.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new a.LatLng(t.lat,t.lng),this._northEast=new a.LatLng(t.lat,t.lng)):t instanceof a.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new a.LatLngBounds(new a.LatLng(e.lat-n,e.lng-o),new a.LatLng(i.lat+n,i.lng+o))},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new a.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new a.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof a.LatLng?a.latLng(t):a.latLngBounds(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof a.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=a.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=a.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},a.latLngBounds=function(t,e){return!t||t instanceof a.LatLngBounds?t:new a.LatLngBounds(t,e)},a.Projection={},a.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=a.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=t.lng*e,s=n*e;return s=Math.log(Math.tan(Math.PI/4+s/2)),new a.Point(o,s)},unproject:function(t){var e=a.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new a.LatLng(n,i)}},a.Projection.LonLat={project:function(t){return new a.Point(t.lng,t.lat)},unproject:function(t){return new a.LatLng(t.y,t.x)}},a.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return a.point(e,e)}},a.CRS.Simple=a.extend({},a.CRS,{projection:a.Projection.LonLat,transformation:new a.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),a.CRS.EPSG3857=a.extend({},a.CRS,{code:"EPSG:3857",projection:a.Projection.SphericalMercator,transformation:new a.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.projection.project(t).multiplyBy(6378137)}}),a.CRS.EPSG900913=a.extend({},a.CRS.EPSG3857,{code:"EPSG:900913"}),a.CRS.EPSG4326=a.extend({},a.CRS,{code:"EPSG:4326",projection:a.Projection.LonLat,transformation:new a.Transformation(1/360,.5,-1/360,.5)}),a.Map=a.Class.extend({includes:a.Mixin.Events,options:{crs:a.CRS.EPSG3857,fadeAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23,trackResize:!0,markerZoomAnimation:a.DomUtil.TRANSITION&&a.Browser.any3d},initialize:function(t,e){e=a.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=a.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&void 0!==e.zoom&&this.setView(a.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=void 0===e?this.getZoom():e,this._resetView(a.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof a.Point?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():a.latLngBounds(t);var i=a.point(e.paddingTopLeft||e.padding||[0,0]),n=a.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));o=e.maxZoom?Math.min(e.maxZoom,o):o;var s=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),h=this.project(t.getNorthEast(),o),l=this.unproject(r.add(h).divideBy(2).add(s),o);return this.setView(l,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(a.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=a.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,t);return i.equals(n)?this:this.panTo(n,e)},addLayer:function(t){var e=a.stamp(t);return this._layers[e]||(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&a.TileLayer&&t instanceof a.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t)),this},removeLayer:function(t){var e=a.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&a.TileLayer&&t instanceof a.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return!!t&&a.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=a.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),s=n.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=void 0}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new a.LatLngBounds(e,i)},getMinZoom:function(){return void 0===this.options.minZoom?void 0===this._layersMinZoom?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=a.latLngBounds(t);var n,o=this.getMinZoom()-(e?1:0),s=this.getMaxZoom(),r=this.getSize(),h=t.getNorthWest(),l=t.getSouthEast(),u=!0;i=a.point(i||[0,0]);do{o++,n=this.project(l,o).subtract(this.project(h,o)).add(i),u=e?n.x<r.x||n.y<r.y:r.contains(n)}while(u&&o<=s);return u&&e?null:e?o:o-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new a.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new a.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(a.latLng(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(a.point(t),e)},layerPointToLatLng:function(t){var e=a.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(a.latLng(t))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return a.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return a.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(a.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(t)))},mouseEventToContainerPoint:function(t){return a.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=a.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;a.DomUtil.addClass(t,"leaflet-container"+(a.Browser.touch?" leaflet-touch":"")+(a.Browser.retina?" leaflet-retina":"")+(a.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=a.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(a.DomUtil.addClass(t.markerPane,e),a.DomUtil.addClass(t.shadowPane,e),a.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return a.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){for(var e=0,i=(t=t?a.Util.isArray(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var o=this._zoom!==e;n||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):a.DomUtil.setPosition(this._mapPane,new a.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,n=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(i=Math.max(i,o.options.maxZoom))}void 0===t?this._layersMaxZoom=this._layersMinZoom=void 0:(this._layersMaxZoom=i,this._layersMinZoom=e),n!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(a.DomEvent){e=e||"on",a.DomEvent[e](this._container,"click",this._onMouseClick,this);var i,n,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=o.length;i<n;i++)a.DomEvent[e](this._container,o[i],this._fireMouseEvent,this);this.options.trackResize&&a.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=a.Util.requestAnimFrame((function(){this.invalidateSize({debounceMoveend:!0})}),this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||a.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!a.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&a.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),o=this.layerPointToLatLng(n);this.fire(e,{latlng:o,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new a.Bounds(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,i,e);return this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new a.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),o=this.project(e.getSouthEast(),i).subtract(t.max),s=this._rebound(n.x,-o.x),r=this._rebound(n.y,-o.y);return new a.Point(s,r)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),a.map=function(t,e){return new a.Map(t,e)},a.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=a.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=this.R_MAJOR,s=this.R_MINOR,r=t.lng*e*o,h=n*e,l=s/o,u=Math.sqrt(1-l*l),c=u*Math.sin(h);c=Math.pow((1-c)/(1+c),.5*u);var d=Math.tan(.5*(.5*Math.PI-h))/c;return h=-o*Math.log(d),new a.Point(r,h)},unproject:function(t){for(var e,i=a.LatLng.RAD_TO_DEG,n=this.R_MAJOR,o=this.R_MINOR,s=t.x*i/n,r=o/n,h=Math.sqrt(1-r*r),l=Math.exp(-t.y/n),u=Math.PI/2-2*Math.atan(l),c=15,d=.1;Math.abs(d)>1e-7&&--c>0;)e=h*Math.sin(u),u+=d=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*h))-u;return new a.LatLng(u*i,s)}},a.CRS.EPSG3395=a.extend({},a.CRS,{code:"EPSG:3395",projection:a.Projection.Mercator,transformation:(E=a.Projection.Mercator.R_MAJOR,M=.5/(Math.PI*E),new a.Transformation(M,.5,-M,.5))}),a.TileLayer=a.Class.extend({includes:a.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:a.Browser.mobile,updateWhenIdle:a.Browser.mobile},initialize:function(t,e){(e=a.setOptions(this,e)).detectRetina&&a.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=a.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=a.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,s=t.children,a=-e(1/0,-1/0);for(n=0,o=s.length;n<o;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)||(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(a.Browser.ielt9)for(t in e)a.DomUtil.setOpacity(e[t],this.options.opacity);else a.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;this._container||(this._container=a.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated?(this._bgBuffer=a.DomUtil.create("div","leaflet-tile-container",this._container),this._tileContainer=a.DomUtil.create("div","leaflet-tile-container",this._container)):this._tileContainer=this._container,t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity())},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&e>i&&(n=Math.round(t.getZoomScale(e)/t.getZoomScale(i)*n)),n},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),i=t.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var o=a.bounds(e.min.divideBy(n)._floor(),e.max.divideBy(n)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var i,n,o,s=[],r=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(n=t.min.x;n<=t.max.x;n++)o=new a.Point(n,i),this._tileShouldBeLoaded(o)&&s.push(o);var h=s.length;if(0!==h){s.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)}));var l=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=h,n=0;n<h;n++)this._addTile(s[n],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i.x)||t.y<0||t.y>=i.y)return!1}if(e.bounds){var n=this._getTileSize(),o=t.multiplyBy(n),s=o.add([n,n]),a=this._map.unproject(o),r=this._map.unproject(s);if(e.continuousWorld||e.noWrap||(a=a.wrap(),r=r.wrap()),!e.bounds.intersects([a,r]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(a.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),a.Browser.android||(e.onload=null,e.src=a.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();a.DomUtil.setPosition(n,i,a.Browser.chrome),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this._getTileSize();return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return a.Util.template(this._url,a.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=a.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=a.Util.falseFn,a.Browser.ielt9&&void 0!==this.options.opacity&&a.DomUtil.setOpacity(t,this.options.opacity),a.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&a.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(a.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==a.Util.emptyImageUrl&&(a.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),a.tileLayer=function(t,e){return new a.TileLayer(t,e)},a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=a.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;for(var o in e.detectRetina&&a.Browser.retina?i.width=i.height=2*n:i.width=i.height=n,e)this.options.hasOwnProperty(o)||"crs"===o||(i[o]=e[o]);this.wmsParams=i,a.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,a.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),o=n.add([i,i]),s=this._crs.project(e.unproject(n,t.z)),r=this._crs.project(e.unproject(o,t.z)),h=this._wmsVersion>=1.3&&this._crs===a.CRS.EPSG4326?[r.y,s.x,s.y,r.x].join(","):[s.x,r.y,r.x,s.y].join(","),l=a.Util.template(this._url,{s:this._getSubdomain(t)});return l+a.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+h},setParams:function(t,e){return a.extend(this.wmsParams,t),e||this.redraw(),this}}),a.tileLayer.wms=function(t,e){return new a.TileLayer.WMS(t,e)},a.TileLayer.Canvas=a.TileLayer.extend({options:{async:!1},initialize:function(t){a.setOptions(this,t)},redraw:function(){for(var t in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=a.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=a.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),a.tileLayer.canvas=function(t){return new a.TileLayer.Canvas(t)},a.ImageOverlay=a.Class.extend({includes:a.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=a.latLngBounds(e),a.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&a.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=a.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&a.Browser.any3d?a.DomUtil.addClass(this._image,"leaflet-zoom-animated"):a.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),a.extend(this._image,{galleryimg:"no",onselectstart:a.Util.falseFn,onmousemove:a.Util.falseFn,onload:a.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(o,t.zoom,t.center),h=e._latLngToNewLayerPoint(s,t.zoom,t.center)._subtract(r),l=r._add(h._multiplyBy(.5*(1-1/n)));i.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(l)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);a.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)}}),a.imageOverlay=function(t,e,i){return new a.ImageOverlay(t,e,i)},a.Icon=a.Class.extend({options:{className:""},initialize:function(t){a.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i,n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var i,n=this.options,o=a.point(n[e+"Size"]);!(i="shadow"===e?a.point(n.shadowAnchor||n.iconAnchor):a.point(n.iconAnchor))&&o&&(i=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,i){return(i=i||e.createElement("img")).src=t,i},_getIconUrl:function(t){return a.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),a.icon=function(t){return new a.Icon(t)},a.Icon.Default=a.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];a.Browser.retina&&"icon"===t&&(t+="-2x");var i=a.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),a.Icon.Default.imagePath=function(){var t,i,n,o,s=e.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=s.length;t<i;t++)if((n=s[t].src).match(a))return((o=n.split(a)[0])?o+"/":"")+"images"}(),a.Marker=a.Class.extend({includes:a.Mixin.Events,options:{icon:new a.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){a.setOptions(this,e),this._latlng=a.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=a.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),a.DomUtil.addClass(n,i),t.keyboard&&(n.tabIndex="0"),this._icon=n,this._initInteraction(),t.riseOnHover&&a.DomEvent.on(n,"mouseover",this._bringToFront,this).on(n,"mouseout",this._resetZIndex,this);var s=t.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&a.DomUtil.addClass(s,i),this._shadow=s,t.opacity<1&&this._updateOpacity();var h=this._map._panes;o&&h.markerPane.appendChild(this._icon),s&&r&&h.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&a.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){a.DomUtil.setPosition(this._icon,t),this._shadow&&a.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];a.DomUtil.addClass(t,"leaflet-clickable"),a.DomEvent.on(t,"click",this._onMouseClick,this),a.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)a.DomEvent.on(t,e[i],this._fireMouseEvent,this);a.Handler.MarkerDrag&&(this.dragging=new a.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&a.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&a.DomEvent.preventDefault(t),"mousedown"!==t.type?a.DomEvent.stopPropagation(t):a.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){a.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&a.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),a.marker=function(t,e){return new a.Marker(t,e)},a.DivIcon=a.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;return!1!==n.html?i.innerHTML=n.html:i.innerHTML="",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),a.divIcon=function(t){return new a.DivIcon(t)},a.Map.mergeOptions({closePopupOnClick:!0}),a.Popup=a.Class.extend({includes:a.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){a.setOptions(this,t),this._source=e,this._animated=a.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&a.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&a.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),a.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&a.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=a.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=a.DomUtil.create("div",i);this.options.closeButton&&((t=this._closeButton=a.DomUtil.create("a",e+"-close-button",n)).href="#close",t.innerHTML="&#215;",a.DomEvent.disableClickPropagation(t),a.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=a.DomUtil.create("div",e+"-content-wrapper",n);a.DomEvent.disableClickPropagation(o),this._contentNode=a.DomUtil.create("div",e+"-content",o),a.DomEvent.disableScrollPropagation(this._contentNode),a.DomEvent.on(o,"contextmenu",a.DomEvent.stopPropagation),this._tipContainer=a.DomUtil.create("div",e+"-tip-container",n),this._tip=a.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight;o&&n>o?(e.height=o+"px",a.DomUtil.addClass(t,"leaflet-popup-scrolled")):a.DomUtil.removeClass(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=a.point(this.options.offset);e&&a.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);a.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new a.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(a.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(n),s=a.point(this.options.autoPanPadding),r=a.point(this.options.autoPanPaddingTopLeft||s),h=a.point(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),u=0,c=0;o.x+i+h.x>l.x&&(u=o.x+i-l.x+h.x),o.x-u-r.x<0&&(u=o.x-r.x),o.y+e+h.y>l.y&&(c=o.y+e-l.y+h.y),o.y-c-r.y<0&&(c=o.y-r.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),a.DomEvent.stop(t)}}),a.popup=function(t,e){return new a.Popup(t,e)},a.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof a.Popup)){var n=t;t=new a.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),a.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=a.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(a.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=a.extend({offset:i},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof a.Popup?(a.setOptions(t,e),this._popup=t,t._source=this):this._popup=new a.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),a.LayerGroup=a.Class.extend({initialize:function(t){var e,i;if(this._layers={},t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a.stamp(t)}}),a.layerGroup=function(t){return new a.LayerGroup(t)},a.FeatureGroup=a.LayerGroup.extend({includes:a.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(a.FeatureGroup.EVENTS,this._propagateEvent,this),a.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(a.FeatureGroup.EVENTS,this._propagateEvent,this),a.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new a.LatLngBounds;return this.eachLayer((function(e){t.extend(e instanceof a.Marker?e.getLatLng():e.getBounds())})),t},_propagateEvent:function(t){t=a.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),a.featureGroup=function(t){return new a.FeatureGroup(t)},a.Path=a.Class.extend({includes:[a.Mixin.Events],statics:{CLIP_PADDING:(C=((a.Browser.mobile?1280:2e3)/Math.max(t.outerWidth,t.outerHeight)-1)/2,Math.max(0,Math.min(.5,C)))},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){a.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,a.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return a.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),a.Map.include({_updatePathViewport:function(){var t=a.Path.CLIP_PADDING,e=this.getSize(),i=a.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),n=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new a.Bounds(i,n)}}),a.Path.SVG_NS="http://www.w3.org/2000/svg",a.Browser.svg=!(!e.createElementNS||!e.createElementNS(a.Path.SVG_NS,"svg").createSVGRect),a.Path=a.Path.extend({statics:{SVG:a.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(a.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&a.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!a.Browser.svg&&a.Browser.vml||a.DomUtil.addClass(this._path,"leaflet-clickable"),a.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)a.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),o=e.layerPointToLatLng(n);this.fire(t.type,{latlng:o,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&a.DomEvent.preventDefault(t),"mousemove"!==t.type&&a.DomEvent.stopPropagation(t)}}}),a.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=a.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&a.Browser.any3d?(a.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):a.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,o=i.y-e.y,s=this._pathRoot,r=this._panes.overlayPane;a.Browser.mobileWebkit&&r.removeChild(s),a.DomUtil.setPosition(s,e),s.setAttribute("width",n),s.setAttribute("height",o),s.setAttribute("viewBox",[e.x,e.y,n,o].join(" ")),a.Browser.mobileWebkit&&r.appendChild(s)}}}),a.Path.include({bindPopup:function(t,e){return t instanceof a.Popup?this._popup=t:(this._popup&&!e||(this._popup=new a.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),a.Browser.vml=!a.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}(),a.Path=a.Browser.svg||!a.Browser.vml?a.Path:a.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");a.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&a.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||((t=this._stroke=this._createElement("stroke")).endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=a.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",i.lineCap&&(t.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(t.joinstyle=i.lineJoin)):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),a.Map.include(a.Browser.svg||!a.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),a.Browser.canvas=!!e.createElement("canvas").getContext,a.Path=a.Path.SVG&&!t.L_PREFER_CANVAS||!a.Browser.canvas?a.Path:a.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return a.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!a.Path._updateRequest&&(a.Path._updateRequest=a.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){a.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,i,n,o,s;for(this._ctx.beginPath(),t=0,i=this._parts.length;t<i;t++){for(e=0,n=this._parts[t].length;e<n;e++)o=this._parts[t][e],s=(0===e?"move":"line")+"To",this._ctx[s](o.x,o.y);this instanceof a.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),a.Map.include(a.Path.SVG&&!t.L_PREFER_CANVAS||!a.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||((i=this._pathRoot=e.createElement("canvas")).style.position="absolute",(t=this._canvasCtx=i.getContext("2d")).lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;a.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),a.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,this._simplifyDPStep(t,n,e,0,i-1);var o,s=[];for(o=0;o<i;o++)n[o]&&s.push(t[o]);return s},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,h=0;for(a=n+1;a<=o-1;a++)(r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0))>h&&(s=a,h=r);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o,s,a,r=n?this._lastCode:this._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(r|h))return[t,e];if(r&h)return!1;o=r||h,s=this._getEdgeIntersection(t,e,o,i),a=this._getBitCode(s,i),o===r?(t=s,r=a):(e=s,h=a)}},_getEdgeIntersection:function(t,e,i,n){var o=e.x-t.x,s=e.y-t.y,r=n.min,h=n.max;return 8&i?new a.Point(t.x+o*(h.y-t.y)/s,h.y):4&i?new a.Point(t.x+o*(r.y-t.y)/s,r.y):2&i?new a.Point(h.x,t.y+s*(h.x-t.x)/o):1&i?new a.Point(r.x,t.y+s*(r.x-t.x)/o):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var o,s=e.x,r=e.y,h=i.x-s,l=i.y-r,u=h*h+l*l;return u>0&&((o=((t.x-s)*h+(t.y-r)*l)/u)>1?(s=i.x,r=i.y):o>0&&(s+=h*o,r+=l*o)),h=t.x-s,l=t.y-r,n?h*h+l*l:new a.Point(s,r)}},a.Polyline=a.Path.extend({initialize:function(t,e){a.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";t<e;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(a.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,o=this._parts,s=null,r=0,h=o.length;r<h;r++)for(var l=o[r],u=1,c=l.length;u<c;u++){e=l[u-1],i=l[u];var d=a.LineUtil._sqClosestPointOnSegment(t,e,i,!0);d<n&&(n=d,s=a.LineUtil._sqClosestPointOnSegment(t,e,i))}return s&&(s.distance=Math.sqrt(n)),s},getBounds:function(){return new a.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,o=e?t:[];for(i=0,n=t.length;i<n;i++){if(a.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;o[i]=a.latLng(t[i])}return o},_initEvents:function(){a.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=a.Path.VML,n=0,o=t.length,s="";n<o;n++)e=t[n],i&&e._round(),s+=(n?"L":"M")+e.x+" "+e.y;return s},_clipPoints:function(){var t,e,i,n=this._originalPoints,o=n.length;if(this.options.noClip)this._parts=[n];else{this._parts=[];var s=this._parts,r=this._map._pathViewport,h=a.LineUtil;for(t=0,e=0;t<o-1;t++)(i=h.clipSegment(n[t],n[t+1],r,t))&&(s[e]=s[e]||[],s[e].push(i[0]),i[1]===n[t+1]&&t!==o-2||(s[e].push(i[1]),e++))}},_simplifyPoints:function(){for(var t=this._parts,e=a.LineUtil,i=0,n=t.length;i<n;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),a.Path.prototype._updatePath.call(this))}}),a.polyline=function(t,e){return new a.Polyline(t,e)},a.PolyUtil={},a.PolyUtil.clipPolygon=function(t,e){var i,n,o,s,r,h,l,u,c,d=[1,4,2,8],p=a.LineUtil;for(n=0,l=t.length;n<l;n++)t[n]._code=p._getBitCode(t[n],e);for(s=0;s<4;s++){for(u=d[s],i=[],n=0,o=(l=t.length)-1;n<l;o=n++)r=t[n],h=t[o],r._code&u?h._code&u||((c=p._getEdgeIntersection(h,r,u,e))._code=p._getBitCode(c,e),i.push(c)):(h._code&u&&((c=p._getEdgeIntersection(h,r,u,e))._code=p._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},a.Polygon=a.Polyline.extend({options:{fill:!0},initialize:function(t,e){a.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,i,n;if(t&&a.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,i=this._holes.length;e<i;e++)(n=this._holes[e]=this._convertLatLngs(this._holes[e]))[0].equals(n[n.length-1])&&n.pop();(t=this._latlngs).length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){var t,e,i,n;if(a.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(t=0,i=this._holes.length;t<i;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;e<n;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])},setLatLngs:function(t){return t&&a.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):a.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;i<n;i++){var o=a.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){return a.Polyline.prototype._getPathPartStr.call(this,t)+(a.Browser.svg?"z":"x")}}),a.polygon=function(t,e){return new a.Polygon(t,e)},function(){function t(t){return a.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer((function(t){i<n?t.setLatLngs(e[i++]):this.removeLayer(t)}),this);i<n;)this.addLayer(new t(e[i++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer((function(e){t.push(e.getLatLngs())})),t}})}a.MultiPolyline=t(a.Polyline),a.MultiPolygon=t(a.Polygon),a.multiPolyline=function(t,e){return new a.MultiPolyline(t,e)},a.multiPolygon=function(t,e){return new a.MultiPolygon(t,e)}}(),a.Rectangle=a.Polygon.extend({initialize:function(t,e){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=a.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),a.rectangle=function(t,e){return new a.Rectangle(t,e)},a.Circle=a.Path.extend({initialize:function(t,e,i){a.Path.prototype.initialize.call(this,i),this._latlng=a.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=a.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new a.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":a.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(a.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),a.circle=function(t,e,i){return new a.Circle(t,e,i)},a.CircleMarker=a.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){a.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){a.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return a.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),a.circleMarker=function(t,e){return new a.CircleMarker(t,e)},a.Polyline.include(a.Path.CANVAS?{_containsPoint:function(t,e){var i,n,o,s,r,h,l=this.options.weight/2;for(a.Browser.touch&&(l+=10),i=0,s=this._parts.length;i<s;i++)for(n=0,o=(r=(h=this._parts[i]).length)-1;n<r;o=n++)if((e||0!==n)&&a.LineUtil.pointToSegmentDistance(t,h[o],h[n])<=l)return!0;return!1}}:{}),a.Polygon.include(a.Path.CANVAS?{_containsPoint:function(t){var e,i,n,o,s,r,h,l,u=!1;if(a.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,h=this._parts.length;o<h;o++)for(s=0,r=(l=(e=this._parts[o]).length)-1;s<l;r=s++)i=e[s],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u}}:{}),a.Circle.include(a.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),a.CircleMarker.include(a.Path.CANVAS?{_updateStyle:function(){a.Path.prototype._updateStyle.call(this)}}:{}),a.GeoJSON=a.FeatureGroup.extend({initialize:function(t,e){a.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=a.Util.isArray(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(o[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var r=a.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng,s);return r.feature=a.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)}},resetStyle:function(t){var e=this.options.style;e&&(a.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),a.extend(a.GeoJSON,{geometryToLayer:function(t,e,i,n){var o,s,r,h,l="Feature"===t.type?t.geometry:t,u=l.coordinates,c=[];switch(i=i||this.coordsToLatLng,l.type){case"Point":return o=i(u),e?e(t,o):new a.Marker(o);case"MultiPoint":for(r=0,h=u.length;r<h;r++)o=i(u[r]),c.push(e?e(t,o):new a.Marker(o));return new a.FeatureGroup(c);case"LineString":return s=this.coordsToLatLngs(u,0,i),new a.Polyline(s,n);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(u,1,i),new a.Polygon(s,n);case"MultiLineString":return s=this.coordsToLatLngs(u,1,i),new a.MultiPolyline(s,n);case"MultiPolygon":return s=this.coordsToLatLngs(u,2,i),new a.MultiPolygon(s,n);case"GeometryCollection":for(r=0,h=l.geometries.length;r<h;r++)c.push(this.geometryToLayer({geometry:l.geometries[r],type:"Feature",properties:t.properties},e,i,n));return new a.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new a.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;o<s;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),a.push(n);return a},latLngToCoords:function(t){var e=[t.lng,t.lat];return void 0!==t.alt&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(a.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?a.extend({},t.feature,{geometry:e}):a.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var k={toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"Point",coordinates:a.GeoJSON.latLngToCoords(this.getLatLng())})}};a.Marker.include(k),a.Circle.include(k),a.CircleMarker.include(k),a.Polyline.include({toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"LineString",coordinates:a.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),a.Polygon.include({toGeoJSON:function(){var t,e,i,n=[a.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)(i=a.GeoJSON.latLngsToCoords(this._holes[t])).push(i[0]),n.push(i);return a.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t){return function(){var e=[];return this.eachLayer((function(t){e.push(t.toGeoJSON().geometry.coordinates)})),a.GeoJSON.getFeature(this,{type:t,coordinates:e})}}a.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),a.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),a.LayerGroup.include({toGeoJSON:function(){var e,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return t("MultiPoint").call(this);var o=i&&"GeometryCollection"===i.type;return this.eachLayer((function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(o?e.geometry:a.GeoJSON.asFeature(e)))})),o?a.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),a.geoJson=function(t,e){return new a.GeoJSON(t,e)},a.DomEvent={addListener:function(t,e,i,n){var o,s,r,h=a.stamp(i),l="_leaflet_"+e+h;return t[l]?this:(o=function(e){return i.call(n||t,e||a.DomEvent._getEvent())},a.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,o,h):(a.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,o,h),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(s=o,r="mouseenter"===e?"mouseover":"mouseout",o=function(e){if(a.DomEvent._checkMouse(t,e))return s(e)},t.addEventListener(r,o,!1)):"click"===e&&a.Browser.android?(s=o,o=function(t){return a.DomEvent._filterClick(t,s)},t.addEventListener(e,o,!1)):t.addEventListener(e,o,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[l]=o,this))},removeListener:function(t,e,i){var n=a.stamp(i),o="_leaflet_"+e+n,s=t[o];return s?(a.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,n):a.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,a.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=a.DomEvent.stopPropagation;return a.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=a.DomEvent.stopPropagation,i=a.Draggable.START.length-1;i>=0;i--)a.DomEvent.on(t,a.Draggable.START[i],e);return a.DomEvent.on(t,"click",a.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return a.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new a.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new a.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){a.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(!(e=i.arguments[0])||t.Event!==e.constructor);)i=i.caller;return e},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=a.DomEvent._lastClick&&i-a.DomEvent._lastClick;if(!(n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated))return a.DomEvent._lastClick=i,e(t);a.DomEvent.stop(t)}},a.DomEvent.on=a.DomEvent.addListener,a.DomEvent.off=a.DomEvent.removeListener,a.Draggable=a.Class.extend({includes:a.Mixin.Events,statics:{START:a.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=a.Draggable.START.length-1;t>=0;t--)a.DomEvent.on(this._dragStartTarget,a.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=a.Draggable.START.length-1;t>=0;t--)a.DomEvent.off(this._dragStartTarget,a.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(a.DomEvent.stopPropagation(t),!a.Draggable._disabled&&(a.DomUtil.disableImageDrag(),a.DomUtil.disableTextSelection(),!this._moving))){var i=t.touches?t.touches[0]:t;this._startPoint=new a.Point(i.clientX,i.clientY),this._startPos=this._newPos=a.DomUtil.getPosition(this._element),a.DomEvent.on(e,a.Draggable.MOVE[t.type],this._onMove,this).on(e,a.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)this._moved=!0;else{var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=new a.Point(i.clientX,i.clientY).subtract(this._startPoint);(n.x||n.y)&&(a.Browser.touch&&Math.abs(n.x)+Math.abs(n.y)<3||(a.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=a.DomUtil.getPosition(this._element).subtract(n),a.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,a.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,a.Util.cancelAnimFrame(this._animRequest),this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))}},_updatePosition:function(){this.fire("predrag"),a.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var t in a.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(a.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),a.Draggable.MOVE)a.DomEvent.off(e,a.Draggable.MOVE[t],this._onMove).off(e,a.Draggable.END[t],this._onUp);a.DomUtil.enableImageDrag(),a.DomUtil.enableTextSelection(),this._moved&&this._moving&&(a.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),a.Handler=a.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),a.Map.mergeOptions({dragging:!0,inertia:!a.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:a.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new a.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=+new Date-this._lastTime,o=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+n-this._times[0])/1e3,h=i.easeLinearity,l=s.multiplyBy(h/r),u=l.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,u),d=l.multiplyBy(c/u),p=c/(i.inertiaDeceleration*h),_=d.multiplyBy(-p/2).round();_.x&&_.y?(_=e._limitOffset(_,e.options.maxBounds),a.Util.requestAnimFrame((function(){e.panBy(_,{duration:p,easeLinearity:h,noMoveStart:!0})}))):e.fire("moveend")}}}),a.Map.addInitHook("addHandler","dragging",a.Map.Drag),a.Map.mergeOptions({doubleClickZoom:!0}),a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),a.Map.addInitHook("addHandler","doubleClickZoom",a.Map.DoubleClickZoom),a.Map.mergeOptions({scrollWheelZoom:!0}),a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),a.DomEvent.on(this._map._container,"MozMousePixelScroll",a.DomEvent.preventDefault),this._delta=0},removeHooks:function(){a.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),a.DomEvent.off(this._map._container,"MozMousePixelScroll",a.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=a.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a.bind(this._performZoom,this),i),a.DomEvent.preventDefault(t),a.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(i+e):t.setZoomAround(this._lastMousePos,i+e))}}),a.Map.addInitHook("addHandler","scrollWheelZoom",a.Map.ScrollWheelZoom),a.extend(a.DomEvent,{_touchstart:a.Browser.msPointer?"MSPointerDown":a.Browser.pointer?"pointerdown":"touchstart",_touchend:a.Browser.msPointer?"MSPointerUp":a.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,i,n){var o,s,r=!1,h=this._touchstart,l=this._touchend,u=[];function c(t){var e;if(a.Browser.pointer?(u.push(t.pointerId),e=u.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(o||i);s=t.touches?t.touches[0]:t,r=n>0&&n<=250,o=i}}function d(t){if(a.Browser.pointer){var e=u.indexOf(t.pointerId);if(-1===e)return;u.splice(e,1)}if(r){if(a.Browser.pointer){var n,h={};for(var l in s)n=s[l],h[l]="function"==typeof n?n.bind(s):n;s=h}s.type="dblclick",i(s),o=null}}t["_leaflet_"+h+n]=c,t["_leaflet_"+l+n]=d;var p=a.Browser.pointer?e.documentElement:t;return t.addEventListener(h,c,!1),p.addEventListener(l,d,!1),a.Browser.pointer&&p.addEventListener(a.DomEvent.POINTER_CANCEL,d,!1),this},removeDoubleTapListener:function(t,i){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+i],!1),(a.Browser.pointer?e.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+i],!1),a.Browser.pointer&&e.documentElement.removeEventListener(a.DomEvent.POINTER_CANCEL,t[n+this._touchend+i],!1),this}}),a.extend(a.DomEvent,{POINTER_DOWN:a.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:a.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:a.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:a.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,i,n){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,i,n);case"touchend":return this.addPointerListenerEnd(t,e,i,n);case"touchmove":return this.addPointerListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,i,n,o){var s=this._pointers,r=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&a.DomEvent.preventDefault(t);for(var e=!1,i=0;i<s.length;i++)if(s[i].pointerId===t.pointerId){e=!0;break}e||s.push(t),t.touches=s.slice(),t.changedTouches=[t],n(t)};if(t["_leaflet_touchstart"+o]=r,t.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocumentListener){var h=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}};e.documentElement.addEventListener(this.POINTER_UP,h,!1),e.documentElement.addEventListener(this.POINTER_CANCEL,h,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,i,n){var o=this._pointers;function s(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o[e]=t;break}t.touches=o.slice(),t.changedTouches=[t],i(t)}}return t["_leaflet_touchmove"+n]=s,t.addEventListener(this.POINTER_MOVE,s,!1),this},addPointerListenerEnd:function(t,e,i,n){var o=this._pointers,s=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],i(t)};return t["_leaflet_touchend"+n]=s,t.addEventListener(this.POINTER_UP,s,!1),t.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,n,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,n,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)}return this}}),a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23,bounceAtZoomLimits:!0}),a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(t.touches[0]),o=i.mouseEventToLayerPoint(t.touches[1]),s=i._getCenterLayerPoint();this._startCenter=n.add(o)._divideBy(2),this._startDist=n.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),a.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),a.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1)||(this._moved||(a.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),a.Util.cancelAnimFrame(this._animRequest),this._animRequest=a.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),a.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,a.DomUtil.removeClass(t._mapPane,"leaflet-touching"),a.Util.cancelAnimFrame(this._animRequest),a.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=t.layerPointToLatLng(i),o=t.getZoom(),s=t.getScaleZoom(this._scale)-o,r=s>0?Math.ceil(s):Math.floor(s),h=t._limitZoom(o+r),l=t.getZoomScale(h)/this._scale;t._animateZoom(n,h,i,l)}else this._zooming=!1},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),a.Map.addInitHook("addHandler","touchZoom",a.Map.TouchZoom),a.Map.mergeOptions({tap:!0,tapTolerance:15}),a.Map.Tap=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(a.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new a.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&a.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(a.bind((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))}),this),1e3),a.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),a.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&a.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new a.Point(e.clientX,e.clientY)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),a.Browser.touch&&!a.Browser.pointer&&a.Map.addInitHook("addHandler","tap",a.Map.Tap),a.Map.mergeOptions({boxZoom:!0}),a.Map.BoxZoom=a.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){a.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){a.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){if(this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button)return!1;a.DomUtil.disableTextSelection(),a.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),a.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this)},_onMouseMove:function(t){this._moved||(this._box=a.DomUtil.create("div","leaflet-zoom-box",this._pane),a.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),o=n.subtract(e),s=new a.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));a.DomUtil.setPosition(i,s),this._moved=!0,i.style.width=Math.max(0,Math.abs(o.x)-4)+"px",i.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),a.DomUtil.enableTextSelection(),a.DomUtil.enableImageDrag(),a.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new a.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),a.Map.addInitHook("addHandler","boxZoom",a.Map.BoxZoom),a.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),a.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;a.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){a.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){a.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}a.DomEvent.stop(t)}}),a.Map.addInitHook("addHandler","keyboard",a.Map.Keyboard),a.Handler.MarkerDrag=a.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new a.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),a.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),a.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=a.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&a.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),a.Control=a.Class.extend({options:{position:"topright"},initialize:function(t){a.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return a.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),a.control=function(t){return new a.Control(t)},a.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=a.DomUtil.create("div",e+"control-container",this._container);function n(n,o){var s=e+n+" "+e+o;t[n+o]=a.DomUtil.create("div",s,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),a.Control.Zoom=a.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=a.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",i,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,o,s){var r=a.DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e;var h=a.DomEvent.stopPropagation;return a.DomEvent.on(r,"click",h).on(r,"mousedown",h).on(r,"dblclick",h).on(r,"click",a.DomEvent.preventDefault).on(r,"click",o,s).on(r,"click",this._refocusOnMap,s),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";a.DomUtil.removeClass(this._zoomInButton,e),a.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&a.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&a.DomUtil.addClass(this._zoomInButton,e)}}),a.Map.mergeOptions({zoomControl:!0}),a.Map.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new a.Control.Zoom,this.addControl(this.zoomControl))})),a.control.zoom=function(t){return new a.Control.Zoom(t)},a.Control.Attribution=a.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){a.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in this._container=a.DomUtil.create("div","leaflet-control-attribution"),a.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),a.Map.mergeOptions({attributionControl:!0}),a.Map.addInitHook((function(){this.options.attributionControl&&(this.attributionControl=(new a.Control.Attribution).addTo(this))})),a.control.attribution=function(t){return new a.Control.Attribution(t)},a.Control.Scale=a.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e=a.DomUtil.create("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale",e),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=a.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=a.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,n=this._map.getSize(),o=this.options,s=0;n.x>0&&(s=i*(o.maxWidth/n.x)),this._updateScales(o,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),a.control.scale=function(t){return new a.Control.Scale(t)},a.Control.Layers=a.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){for(var n in a.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=a.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=a.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),a.Browser.touch?a.DomEvent.on(e,"click",a.DomEvent.stopPropagation):a.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var i=this._form=a.DomUtil.create("form",t+"-list");if(this.options.collapsed){a.Browser.android||a.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=a.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",a.Browser.touch?a.DomEvent.on(n,"click",a.DomEvent.stop).on(n,"click",this._expand,this):a.DomEvent.on(n,"focus",this._expand,this),a.DomEvent.on(i,"click",(function(){setTimeout(a.bind(this._onInputClick,this),0)}),this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=a.DomUtil.create("div",t+"-base",i),this._separator=a.DomUtil.create("div",t+"-separator",i),this._overlaysList=a.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=a.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[a.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((i=e.createElement("input")).type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=o):i=this._createRadioElement("leaflet-base-layers",o),i.layerId=a.stamp(t.layer),a.DomEvent.on(i,"click",this._onInputClick,this);var s=e.createElement("span");return s.innerHTML=" "+t.name,n.appendChild(i),n.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,t=0;t<o;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),a.control.layers=function(t,e,i){return new a.Control.Layers(t,e,i)},a.PosAnimation=a.Class.extend({includes:a.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[a.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",a.DomEvent.on(t,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this),a.DomUtil.setPosition(t,e),a.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(a.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(a.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),a.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();t?(this._el._leaflet_pos=t,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,o=this._el,s=t.getComputedStyle(o);if(a.Browser.any3d){if(!(n=s[a.DomUtil.TRANSFORM].match(this._transformRe)))return;e=parseFloat(n[1]),i=parseFloat(n[2])}else e=parseFloat(s.left),i=parseFloat(s.top);return new a.Point(e,i,!0)},_onTransitionEnd:function(){a.DomEvent.off(this._el,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[a.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),a.Map.include({setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(a.latLng(t),e,this.options.maxBounds),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=a.extend({animate:i.animate},i.zoom),i.pan=a.extend({animate:i.animate},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},panBy:function(t,e){if(e=e||{},!(t=a.point(t).round()).x&&!t.y)return this;if(this._panAnim||(this._panAnim=new a.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){a.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))}}),a.PosAnimation=a.DomUtil.TRANSITION?a.PosAnimation:a.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=a.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=a.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));a.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){a.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),a.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),a.DomUtil.TRANSITION&&a.Map.addInitHook((function(){this._zoomAnimated=this.options.zoomAnimation&&a.DomUtil.TRANSITION&&a.Browser.any3d&&!a.Browser.android23&&!a.Browser.mobileOpera,this._zoomAnimated&&a.DomEvent.on(this._mapPane,a.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)})),a.Map.include(a.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n),s=this._getCenterLayerPoint()._add(o);return!(!0!==i.animate&&!this.getSize().contains(o)||(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,s,n,null,!0),0))},_animateZoom:function(t,e,i,n,o,s,r){r||(this._animatingZoom=!0),a.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,a.Draggable&&(a.Draggable._disabled=!0),a.Util.requestAnimFrame((function(){this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:o,backwards:s}),setTimeout(a.bind(this._onZoomTransitionEnd,this),250)}),this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,a.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),a.Util.requestAnimFrame((function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),a.Draggable&&(a.Draggable._disabled=!1)}),this))}}:{}),a.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=a.DomUtil.TRANSFORM,n=t.delta?a.DomUtil.getTranslateString(t.delta):e.style[i],o=a.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?o+" "+n:n+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),a.Util.falseFn(e.offsetWidth);var i=this._map.getZoom();(i>this.options.maxZoom||i<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[a.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);if(e&&i>.5&&n<.5)return t.style.visibility="hidden",void this._stopLoadingImages(t);e.style.visibility="hidden",e.style[a.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;e<i;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,n,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=o.length;e<i;e++)(n=o[e]).complete||(n.onload=a.Util.falseFn,n.onerror=a.Util.falseFn,n.src=a.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),a.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=a.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=a.bind(this._handleGeolocationResponse,this),i=a.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new a.LatLng(e,i),o=180*t.coords.accuracy/40075017,s=o/Math.cos(a.LatLng.DEG_TO_RAD*e),r=a.latLngBounds([e-o,i-s],[e+o,i+s]),h=this._locateOptions;if(h.setView){var l=Math.min(this.getBoundsZoom(r),h.maxZoom);this.setView(n,l)}var u={latlng:n,bounds:r,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add('localforage', function (Y) {SM.currentModule = 'localforage';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/*!
    localForage -- Offline Storage, Improved
    Version 1.9.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.localforage=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw (j.code="MODULE_NOT_FOUND", j)}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||void 0===a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a(1),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){g(c,this.state===r?a:b,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{1:1}],3:[function(a,b,c){(function(b){"use strict";"function"!=typeof b.Promise&&(b.Promise=a(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(a){return}}function f(){try{if(!ua||!ua.open)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(a){return!1}}function g(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(var c="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function h(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}function i(a,b,c){"function"==typeof b&&a.then(b),"function"==typeof c&&a.catch(c)}function j(a){return"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function k(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function l(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}function m(a){return new va(function(b){var c=a.transaction(wa,Ba),d=g([""]);c.objectStore(wa).put(d,"key"),c.onabort=function(a){a.preventDefault(),a.stopPropagation(),b(!1)},c.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);b(c||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function n(a){return"boolean"==typeof xa?va.resolve(xa):m(a).then(function(a){return xa=a})}function o(a){var b=ya[a.name],c={};c.promise=new va(function(a,b){c.resolve=a,c.reject=b}),b.deferredOperations.push(c),b.dbReady?b.dbReady=b.dbReady.then(function(){return c.promise}):b.dbReady=c.promise}function p(a){var b=ya[a.name],c=b.deferredOperations.pop();if(c)return c.resolve(),c.promise}function q(a,b){var c=ya[a.name],d=c.deferredOperations.pop();if(d)return d.reject(b),d.promise}function r(a,b){return new va(function(c,d){if(ya[a.name]=ya[a.name]||B(),a.db){if(!b)return c(a.db);o(a),a.db.close()}var e=[a.name];b&&e.push(a.version);var f=ua.open.apply(ua,e);b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),b.oldVersion<=1&&c.createObjectStore(wa)}catch(c){if("ConstraintError"!==c.name)throw c;console.warn('The database "'+a.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(a){a.preventDefault(),d(f.error)},f.onsuccess=function(){c(f.result),p(a)}})}function s(a){return r(a,!1)}function t(a){return r(a,!0)}function u(a,b){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version;if(d&&(a.version!==b&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),e||c){if(c){var f=a.db.version+1;f>a.version&&(a.version=f)}return!0}return!1}function v(a){return new va(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function w(a){return g([l(atob(a.data))],{type:a.type})}function x(a){return a&&a.__local_forage_encoded_blob}function y(a){var b=this,c=b._initReady().then(function(){var a=ya[b._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return i(c,a,a),c}function z(a){o(a);for(var b=ya[a.name],c=b.forages,d=0;d<c.length;d++){var e=c[d];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return a.db=null,s(a).then(function(b){return a.db=b,u(a)?t(a):b}).then(function(d){a.db=b.db=d;for(var e=0;e<c.length;e++)c[e]._dbInfo.db=d}).catch(function(b){throw (q(a,b), b)});}function A(a,b,c,d){void 0===d&&(d=1);try{var e=a.db.transaction(a.storeName,b);c(null,e)}catch(e){if(d>0&&(!a.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return va.resolve().then(function(){if(!a.db||"NotFoundError"===e.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),t(a)}).then(function(){return z(a).then(function(){A(a,b,c,d-1)})}).catch(c);c(e)}}function B(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function C(a){function b(){return va.resolve()}var c=this,d={db:null};if(a)for(var e in a)d[e]=a[e];var f=ya[d.name];f||(f=B(),ya[d.name]=f),f.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=y);for(var g=[],h=0;h<f.forages.length;h++){var i=f.forages[h];i!==c&&g.push(i._initReady().catch(b))}var j=f.forages.slice(0);return va.all(g).then(function(){return d.db=f.db,s(d)}).then(function(a){return d.db=a,u(d,c._defaultConfig.version)?t(d):a}).then(function(a){d.db=f.db=a,c._dbInfo=d;for(var b=0;b<j.length;b++){var e=j[b];e!==c&&(e._dbInfo.db=d.db,e._dbInfo.version=d.version)}})}function D(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){A(c._dbInfo,Aa,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.get(a);h.onsuccess=function(){var a=h.result;void 0===a&&(a=null),x(a)&&(a=w(a)),b(a)},h.onerror=function(){d(h.error)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function E(a,b){var c=this,d=new va(function(b,d){c.ready().then(function(){A(c._dbInfo,Aa,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.openCursor(),i=1;h.onsuccess=function(){var c=h.result;if(c){var d=c.value;x(d)&&(d=w(d));var e=a(d,c.key,i++);void 0!==e?b(e):c.continue()}else b()},h.onerror=function(){d(h.error)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function F(a,b,c){var d=this;a=j(a);var e=new va(function(c,e){var f;d.ready().then(function(){return f=d._dbInfo,"[object Blob]"===za.call(b)?n(f.db).then(function(a){return a?b:v(b)}):b}).then(function(b){A(d._dbInfo,Ba,function(f,g){if(f)return e(f);try{var h=g.objectStore(d._dbInfo.storeName);null===b&&(b=void 0);var i=h.put(b,a);g.oncomplete=function(){void 0===b&&(b=null),c(b)},g.onabort=g.onerror=function(){var a=i.error?i.error:i.transaction.error;e(a)}}catch(a){e(a)}})}).catch(e)});return h(e,c),e}function G(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){A(c._dbInfo,Ba,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){d(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;d(a)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function H(a){var b=this,c=new va(function(a,c){b.ready().then(function(){A(b._dbInfo,Ba,function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}catch(a){c(a)}})}).catch(c)});return h(c,a),c}function I(a){var b=this,c=new va(function(a,c){b.ready().then(function(){A(b._dbInfo,Aa,function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.count();g.onsuccess=function(){a(g.result)},g.onerror=function(){c(g.error)}}catch(a){c(a)}})}).catch(c)});return h(c,a),c}function J(a,b){var c=this,d=new va(function(b,d){if(a<0)return void b(null);c.ready().then(function(){A(c._dbInfo,Aa,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=!1,i=g.openKeyCursor();i.onsuccess=function(){var c=i.result;if(!c)return void b(null);0===a?b(c.key):h?b(c.key):(h=!0,c.advance(a))},i.onerror=function(){d(i.error)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function K(a){var b=this,c=new va(function(a,c){b.ready().then(function(){A(b._dbInfo,Aa,function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.openKeyCursor(),h=[];g.onsuccess=function(){var b=g.result;if(!b)return void a(h);h.push(b.key),b.continue()},g.onerror=function(){c(g.error)}}catch(a){c(a)}})}).catch(c)});return h(c,a),c}function L(a,b){b=k.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{},a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;if(a.name){var f=a.name===c.name&&e._dbInfo.db,g=f?va.resolve(e._dbInfo.db):s(a).then(function(b){var c=ya[a.name],d=c.forages;c.db=b;for(var e=0;e<d.length;e++)d[e]._dbInfo.db=b;return b});d=a.storeName?g.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;o(a);var d=ya[a.name],e=d.forages;b.close();for(var f=0;f<e.length;f++){var g=e[f];g._dbInfo.db=null,g._dbInfo.version=c}return new va(function(b,d){var e=ua.open(a.name,c);e.onerror=function(a){e.result.close(),d(a)},e.onupgradeneeded=function(){e.result.deleteObjectStore(a.storeName)},e.onsuccess=function(){var a=e.result;a.close(),b(a)}}).then(function(a){d.db=a;for(var b=0;b<e.length;b++){var c=e[b];c._dbInfo.db=a,p(c._dbInfo)}}).catch(function(b){throw((q(a,b)||va.resolve()).catch(function(){}), b)});}}):g.then(function(b){o(a);var c=ya[a.name],d=c.forages;b.close();for(var e=0;e<d.length;e++){d[e]._dbInfo.db=null}return new va(function(b,c){var d=ua.deleteDatabase(a.name);d.onerror=d.onblocked=function(a){var b=d.result;b&&b.close(),c(a)},d.onsuccess=function(){var a=d.result;a&&a.close(),b(a)}}).then(function(a){c.db=a;for(var b=0;b<d.length;b++)p(d[b]._dbInfo)}).catch(function(b){throw((q(a,b)||va.resolve()).catch(function(){}), b)});})}else d=va.reject("Invalid arguments");return h(d,b),d}function M(){return"function"==typeof openDatabase}function N(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j=new ArrayBuffer(g),k=new Uint8Array(j);for(b=0;b<h;b+=4)c=Da.indexOf(a[b]),d=Da.indexOf(a[b+1]),e=Da.indexOf(a[b+2]),f=Da.indexOf(a[b+3]),k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j}function O(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+=Da[c[b]>>2],d+=Da[(3&c[b])<<4|c[b+1]>>4],d+=Da[(15&c[b+1])<<2|c[b+2]>>6],d+=Da[63&c[b+2]];return c.length%3==2?d=d.substring(0,d.length-1)+"=":c.length%3==1&&(d=d.substring(0,d.length-2)+"=="),d}function P(a,b){var c="";if(a&&(c=Ua.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===Ua.call(a.buffer))){var d,e=Ga;a instanceof ArrayBuffer?(d=a,e+=Ia):(d=a.buffer,"[object Int8Array]"===c?e+=Ka:"[object Uint8Array]"===c?e+=La:"[object Uint8ClampedArray]"===c?e+=Ma:"[object Int16Array]"===c?e+=Na:"[object Uint16Array]"===c?e+=Pa:"[object Int32Array]"===c?e+=Oa:"[object Uint32Array]"===c?e+=Qa:"[object Float32Array]"===c?e+=Ra:"[object Float64Array]"===c?e+=Sa:b(new Error("Failed to get type for BinaryArray"))),b(e+O(d))}else if("[object Blob]"===c){var f=new FileReader;f.onload=function(){var c=Ea+a.type+"~"+O(this.result);b(Ga+Ja+c)},f.readAsArrayBuffer(a)}else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}}function Q(a){if(a.substring(0,Ha)!==Ga)return JSON.parse(a);var b,c=a.substring(Ta),d=a.substring(Ha,Ta);if(d===Ja&&Fa.test(c)){var e=c.match(Fa);b=e[1],c=c.substring(e[0].length)}var f=N(c);switch(d){case Ia:return f;case Ja:return g([f],{type:b});case Ka:return new Int8Array(f);case La:return new Uint8Array(f);case Ma:return new Uint8ClampedArray(f);case Na:return new Int16Array(f);case Pa:return new Uint16Array(f);case Oa:return new Int32Array(f);case Qa:return new Uint32Array(f);case Ra:return new Float32Array(f);case Sa:return new Float64Array(f);default:throw new Error("Unkown type: "+d)}}function R(a,b,c,d){a.executeSql("CREATE TABLE IF NOT EXISTS "+b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],c,d)}function S(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];var e=new va(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(a){return d(a)}c.db.transaction(function(e){R(e,c,function(){b._dbInfo=c,a()},function(a,b){d(b)})},d)});return c.serializer=Va,e}function T(a,b,c,d,e,f){a.executeSql(c,d,e,function(a,g){g.code===g.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,h){h.rows.length?f(a,g):R(a,b,function(){a.executeSql(c,d,e,f)},f)},f):f(a,g)},f)}function U(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),b(d)},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function V(a,b){var c=this,d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"SELECT * FROM "+e.storeName,[],function(c,d){for(var f=d.rows,g=f.length,h=0;h<g;h++){var i=f.item(h),j=i.value;if(j&&(j=e.serializer.deserialize(j)),void 0!==(j=a(j,i.key,h+1)))return void b(j)}b()},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function W(a,b,c,d){var e=this;a=j(a);var f=new va(function(f,g){e.ready().then(function(){void 0===b&&(b=null);var h=b,i=e._dbInfo;i.serializer.serialize(b,function(b,j){j?g(j):i.db.transaction(function(c){T(c,i,"INSERT OR REPLACE INTO "+i.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){f(h)},function(a,b){g(b)})},function(b){if(b.code===b.QUOTA_ERR){if(d>0)return void f(W.apply(e,[a,h,c,d-1]));g(b)}})})}).catch(g)});return h(f,c),f}function X(a,b,c){return W.apply(this,[a,b,c,1])}function Y(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function Z(a){var b=this,c=new va(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){T(b,d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return h(c,a),c}function $(a){var b=this,c=new va(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){T(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return h(c,a),c}function _(a,b){var c=this,d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function aa(a){var b=this,c=new va(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){T(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){for(var d=[],e=0;e<c.rows.length;e++)d.push(c.rows.item(e).key);a(d)},function(a,b){c(b)})})}).catch(c)});return h(c,a),c}function ba(a){return new va(function(b,c){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,d){for(var e=[],f=0;f<d.rows.length;f++)e.push(d.rows.item(f).name);b({db:a,storeNames:e})},function(a,b){c(b)})},function(a){c(a)})})}function ca(a,b){b=k.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{},a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?new va(function(b){var d;d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0),b(a.storeName?{db:d,storeNames:[a.storeName]}:ba(d))}).then(function(a){return new va(function(b,c){a.db.transaction(function(d){function e(a){return new va(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var f=[],g=0,h=a.storeNames.length;g<h;g++)f.push(e(a.storeNames[g]));va.all(f).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):va.reject("Invalid arguments"),h(d,b),d}function da(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(a){return!1}}function ea(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function fa(){var a="_localforage_support_test";try{return localStorage.setItem(a,!0),localStorage.removeItem(a),!1}catch(a){return!0}}function ga(){return!fa()||localStorage.length>0}function ha(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return c.keyPrefix=ea(a,b._defaultConfig),ga()?(b._dbInfo=c,c.serializer=Va,va.resolve()):va.reject()}function ia(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return h(c,a),c}function ja(a,b){var c=this;a=j(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return h(d,b),d}function ka(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,f=localStorage.length,g=1,h=0;h<f;h++){var i=localStorage.key(h);if(0===i.indexOf(d)){var j=localStorage.getItem(i);if(j&&(j=b.serializer.deserialize(j)),void 0!==(j=a(j,i.substring(e),g++)))return j}}});return h(d,b),d}function la(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=localStorage.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return h(d,b),d}function ma(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++){var f=localStorage.key(e);0===f.indexOf(a.keyPrefix)&&d.push(f.substring(a.keyPrefix.length))}return d});return h(c,a),c}function na(a){var b=this,c=b.keys().then(function(a){return a.length});return h(c,a),c}function oa(a,b){var c=this;a=j(a);var d=c.ready().then(function(){var b=c._dbInfo;localStorage.removeItem(b.keyPrefix+a)});return h(d,b),d}function pa(a,b,c){var d=this;a=j(a);var e=d.ready().then(function(){void 0===b&&(b=null);var c=b;return new va(function(e,f){var g=d._dbInfo;g.serializer.serialize(b,function(b,d){if(d)f(d);else try{localStorage.setItem(g.keyPrefix+a,b),e(c)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||f(a),f(a)}})})});return h(e,c),e}function qa(a,b){if(b=k.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name,a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?new va(function(b){b(a.storeName?ea(a,e._defaultConfig):a.name+"/")}).then(function(a){for(var b=localStorage.length-1;b>=0;b--){var c=localStorage.key(b);0===c.indexOf(a)&&localStorage.removeItem(c)}}):va.reject("Invalid arguments"),h(d,b),d}function ra(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function sa(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&&($a(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}var ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ua=e();"undefined"==typeof Promise&&a(3);var va=Promise,wa="local-forage-detect-blob-support",xa=void 0,ya={},za=Object.prototype.toString,Aa="readonly",Ba="readwrite",Ca={_driver:"asyncStorage",_initStorage:C,_support:f(),iterate:E,getItem:D,setItem:F,removeItem:G,clear:H,length:I,key:J,keys:K,dropInstance:L},Da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ea="~~local_forage_type~",Fa=/^~~local_forage_type~([^~]+)~/,Ga="__lfsc__:",Ha=Ga.length,Ia="arbf",Ja="blob",Ka="si08",La="ui08",Ma="uic8",Na="si16",Oa="si32",Pa="ur16",Qa="ui32",Ra="fl32",Sa="fl64",Ta=Ha+Ia.length,Ua=Object.prototype.toString,Va={serialize:P,deserialize:Q,stringToBuffer:N,bufferToString:O},Wa={_driver:"webSQLStorage",_initStorage:S,_support:M(),iterate:V,getItem:U,setItem:X,removeItem:Y,clear:Z,length:$,key:_,keys:aa,dropInstance:ca},Xa={_driver:"localStorageWrapper",_initStorage:ha,_support:da(),iterate:ka,getItem:ja,setItem:pa,removeItem:oa,clear:ia,length:na,key:la,keys:ma,dropInstance:qa},Ya=function(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)},Za=function(a,b){for(var c=a.length,d=0;d<c;){if(Ya(a[d],b))return!0;d++}return!1},$a=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},_a={},ab={},bb={INDEXEDDB:Ca,WEBSQL:Wa,LOCALSTORAGE:Xa},cb=[bb.INDEXEDDB._driver,bb.WEBSQL._driver,bb.LOCALSTORAGE._driver],db=["dropInstance"],eb=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(db),fb={description:"",driver:cb.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},gb=function(){function a(b){d(this,a);for(var c in bb)if(bb.hasOwnProperty(c)){var e=bb[c],f=e._driver;this[c]=f,_a[f]||this.defineDriver(e)}this._defaultConfig=sa({},fb),this._config=sa({},this._defaultConfig,b),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":ta(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return new Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new va(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=eb.concat("_initStorage"),g=0,i=f.length;g<i;g++){var j=f[g];if((!Za(db,j)||a[j])&&"function"!=typeof a[j])return void c(e)}(function(){for(var b=function(a){return function(){var b=new Error("Method "+a+" is not implemented by the current driver"),c=va.reject(b);return h(c,arguments[arguments.length-1]),c}},c=0,d=db.length;c<d;c++){var e=db[c];a[e]||(a[e]=b(e))}})();var k=function(c){_a[d]&&console.info("Redefining LocalForage driver: "+d),_a[d]=a,ab[d]=c,b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(k,c):k(!!a._support):k(!0)}catch(a){c(a)}});return i(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){var d=_a[a]?va.resolve(_a[a]):va.reject(new Error("Driver not found."));return i(d,b,c),d},a.prototype.getSerializer=function(a){var b=va.resolve(Va);return i(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return i(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){g._config.driver=g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(e).catch(b)}d();var h=new Error("No available storage method found.");return g._driverSet=va.reject(h),g._driverSet}var c=0;return b()}}var g=this;$a(a)||(a=[a]);var h=this._getSupportedDrivers(a),j=null!==this._driverSet?this._driverSet.catch(function(){return va.resolve()}):va.resolve();return this._driverSet=j.then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver,d(),g._wrapLibraryMethodsWithReady(),g._initDriver=f(h)})}).catch(function(){d();var a=new Error("No available storage method found.");return g._driverSet=va.reject(a),g._driverSet}),i(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!ab[a]},a.prototype._extend=function(a){sa(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=eb.length;a<b;a++)ra(this,eb[a])},a.prototype.createInstance=function(b){return new a(b)},a}(),hb=new gb;b.exports=hb},{3:3}]},{},[4])(4);});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('lodash', function (Y) {SM.currentModule = 'lodash';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function e(n,t){for(var r=null==n?0:n.length;r--&&t(n[r],r,n)!==!1;);return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;
return!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!!(null==n?0:n.length)&&y(n,t,0)>-1}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);
return r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n){return n.split("")}function _(n){return n.match($t)||[]}function v(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function g(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function y(n,t,r){return t===t?Z(n,t,r):g(n,b,r)}function d(n,t,r,e){
for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function b(n){return n!==n}function w(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:Cn}function m(n){return function(t){return null==t?X:t[n]}}function x(n){return function(t){return null==n?X:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function A(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==X&&(r=r===X?i:r+i);
}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function I(n,t){return c(t,function(t){return[t,n[t]]})}function R(n){return n?n.slice(0,H(n)+1).replace(Lt,""):n}function z(n){return function(t){return n(t)}}function E(n,t){return c(t,function(t){return n[t]})}function S(n,t){return n.has(t)}function W(n,t){for(var r=-1,e=n.length;++r<e&&y(t,n[r],0)>-1;);return r}function L(n,t){for(var r=n.length;r--&&y(t,n[r],0)>-1;);return r}function C(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;
return e}function U(n){return"\\"+Yr[n]}function B(n,t){return null==n?X:n[t]}function T(n){return Nr.test(n)}function $(n){return Pr.test(n)}function D(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function M(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function F(n,t){return function(r){return n(t(r))}}function N(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==cn||(n[r]=cn,i[u++]=r)}return i}function P(n){var t=-1,r=Array(n.size);
return n.forEach(function(n){r[++t]=n}),r}function q(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function Z(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function K(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}function V(n){return T(n)?J(n):_e(n)}function G(n){return T(n)?Y(n):p(n)}function H(n){for(var t=n.length;t--&&Ct.test(n.charAt(t)););return t}function J(n){for(var t=Mr.lastIndex=0;Mr.test(n);)++t;return t}function Y(n){return n.match(Mr)||[];
}function Q(n){return n.match(Fr)||[]}var X,nn="4.17.21",tn=200,rn="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",en="Expected a function",un="Invalid `variable` option passed into `_.template`",on="__lodash_hash_undefined__",fn=500,cn="__lodash_placeholder__",an=1,ln=2,sn=4,hn=1,pn=2,_n=1,vn=2,gn=4,yn=8,dn=16,bn=32,wn=64,mn=128,xn=256,jn=512,An=30,kn="...",On=800,In=16,Rn=1,zn=2,En=3,Sn=1/0,Wn=9007199254740991,Ln=1.7976931348623157e308,Cn=NaN,Un=4294967295,Bn=Un-1,Tn=Un>>>1,$n=[["ary",mn],["bind",_n],["bindKey",vn],["curry",yn],["curryRight",dn],["flip",jn],["partial",bn],["partialRight",wn],["rearg",xn]],Dn="[object Arguments]",Mn="[object Array]",Fn="[object AsyncFunction]",Nn="[object Boolean]",Pn="[object Date]",qn="[object DOMException]",Zn="[object Error]",Kn="[object Function]",Vn="[object GeneratorFunction]",Gn="[object Map]",Hn="[object Number]",Jn="[object Null]",Yn="[object Object]",Qn="[object Promise]",Xn="[object Proxy]",nt="[object RegExp]",tt="[object Set]",rt="[object String]",et="[object Symbol]",ut="[object Undefined]",it="[object WeakMap]",ot="[object WeakSet]",ft="[object ArrayBuffer]",ct="[object DataView]",at="[object Float32Array]",lt="[object Float64Array]",st="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",_t="[object Uint8Array]",vt="[object Uint8ClampedArray]",gt="[object Uint16Array]",yt="[object Uint32Array]",dt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,jt=RegExp(mt.source),At=RegExp(xt.source),kt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zt=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Wt=RegExp(St.source),Lt=/^\s+/,Ct=/\s/,Ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,$t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/[()=,{}\[\]\/\s]/,Mt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,Pt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Zt=/^\[object .+?Constructor\]$/,Kt=/^0o[0-7]+$/i,Vt=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ht=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",Qt="\\u0300-\\u036f",Xt="\\ufe20-\\ufe2f",nr="\\u20d0-\\u20ff",tr=Qt+Xt+nr,rr="\\u2700-\\u27bf",er="a-z\\xdf-\\xf6\\xf8-\\xff",ur="\\xac\\xb1\\xd7\\xf7",ir="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",or="\\u2000-\\u206f",fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",ar="\\ufe0e\\ufe0f",lr=ur+ir+or+fr,sr="['\u2019]",hr="["+Yt+"]",pr="["+lr+"]",_r="["+tr+"]",vr="\\d+",gr="["+rr+"]",yr="["+er+"]",dr="[^"+Yt+lr+vr+rr+er+cr+"]",br="\\ud83c[\\udffb-\\udfff]",wr="(?:"+_r+"|"+br+")",mr="[^"+Yt+"]",xr="(?:\\ud83c[\\udde6-\\uddff]){2}",jr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ar="["+cr+"]",kr="\\u200d",Or="(?:"+yr+"|"+dr+")",Ir="(?:"+Ar+"|"+dr+")",Rr="(?:"+sr+"(?:d|ll|m|re|s|t|ve))?",zr="(?:"+sr+"(?:D|LL|M|RE|S|T|VE))?",Er=wr+"?",Sr="["+ar+"]?",Wr="(?:"+kr+"(?:"+[mr,xr,jr].join("|")+")"+Sr+Er+")*",Lr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ur=Sr+Er+Wr,Br="(?:"+[gr,xr,jr].join("|")+")"+Ur,Tr="(?:"+[mr+_r+"?",_r,xr,jr,hr].join("|")+")",$r=RegExp(sr,"g"),Dr=RegExp(_r,"g"),Mr=RegExp(br+"(?="+br+")|"+Tr+Ur,"g"),Fr=RegExp([Ar+"?"+yr+"+"+Rr+"(?="+[pr,Ar,"$"].join("|")+")",Ir+"+"+zr+"(?="+[pr,Ar+Or,"$"].join("|")+")",Ar+"?"+Or+"+"+Rr,Ar+"+"+zr,Cr,Lr,vr,Br].join("|"),"g"),Nr=RegExp("["+kr+Yt+tr+ar+"]"),Pr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zr=-1,Kr={};
Kr[at]=Kr[lt]=Kr[st]=Kr[ht]=Kr[pt]=Kr[_t]=Kr[vt]=Kr[gt]=Kr[yt]=!0,Kr[Dn]=Kr[Mn]=Kr[ft]=Kr[Nn]=Kr[ct]=Kr[Pn]=Kr[Zn]=Kr[Kn]=Kr[Gn]=Kr[Hn]=Kr[Yn]=Kr[nt]=Kr[tt]=Kr[rt]=Kr[it]=!1;var Vr={};Vr[Dn]=Vr[Mn]=Vr[ft]=Vr[ct]=Vr[Nn]=Vr[Pn]=Vr[at]=Vr[lt]=Vr[st]=Vr[ht]=Vr[pt]=Vr[Gn]=Vr[Hn]=Vr[Yn]=Vr[nt]=Vr[tt]=Vr[rt]=Vr[et]=Vr[_t]=Vr[vt]=Vr[gt]=Vr[yt]=!0,Vr[Zn]=Vr[Kn]=Vr[it]=!1;var Gr={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a",
"\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae",
"\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g",
"\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O",
"\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w",
"\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Hr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qr=parseFloat,Xr=parseInt,ne="object"==typeof global&&global&&global.Object===Object&&global,te="object"==typeof self&&self&&self.Object===Object&&self,re=ne||te||Function("return this")(),ee="object"==typeof exports&&exports&&!exports.nodeType&&exports,ue=ee&&"object"==typeof module&&module&&!module.nodeType&&module,ie=ue&&ue.exports===ee,oe=ie&&ne.process,fe=function(){
try{var n=ue&&ue.require&&ue.require("util").types;return n?n:oe&&oe.binding&&oe.binding("util")}catch(n){}}(),ce=fe&&fe.isArrayBuffer,ae=fe&&fe.isDate,le=fe&&fe.isMap,se=fe&&fe.isRegExp,he=fe&&fe.isSet,pe=fe&&fe.isTypedArray,_e=m("length"),ve=x(Gr),ge=x(Hr),ye=x(Jr),de=function p(x){function Z(n){if(cc(n)&&!bh(n)&&!(n instanceof Ct)){if(n instanceof Y)return n;if(bl.call(n,"__wrapped__"))return eo(n)}return new Y(n)}function J(){}function Y(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,
this.__index__=0,this.__values__=X}function Ct(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Un,this.__views__=[]}function $t(){var n=new Ct(this.__wrapped__);return n.__actions__=Tu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Tu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Tu(this.__views__),n}function Yt(){if(this.__filtered__){var n=new Ct(this);n.__dir__=-1,
n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Qt(){var n=this.__wrapped__.value(),t=this.__dir__,r=bh(n),e=t<0,u=r?n.length:0,i=Oi(0,u,this.__views__),o=i.start,f=i.end,c=f-o,a=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Hl(c,this.__takeCount__);if(!r||!e&&u==c&&p==c)return wu(n,this.__actions__);var _=[];n:for(;c--&&h<p;){a+=t;for(var v=-1,g=n[a];++v<s;){var y=l[v],d=y.iteratee,b=y.type,w=d(g);if(b==zn)g=w;else if(!w){if(b==Rn)continue n;break n}}_[h++]=g}return _}function Xt(n){
var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function nr(){this.__data__=is?is(null):{},this.size=0}function tr(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function rr(n){var t=this.__data__;if(is){var r=t[n];return r===on?X:r}return bl.call(t,n)?t[n]:X}function er(n){var t=this.__data__;return is?t[n]!==X:bl.call(t,n)}function ur(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=is&&t===X?on:t,this}function ir(n){
var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function or(){this.__data__=[],this.size=0}function fr(n){var t=this.__data__,r=Wr(t,n);return!(r<0)&&(r==t.length-1?t.pop():Ll.call(t,r,1),--this.size,!0)}function cr(n){var t=this.__data__,r=Wr(t,n);return r<0?X:t[r][1]}function ar(n){return Wr(this.__data__,n)>-1}function lr(n,t){var r=this.__data__,e=Wr(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this}function sr(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){
var e=n[t];this.set(e[0],e[1])}}function hr(){this.size=0,this.__data__={hash:new Xt,map:new(ts||ir),string:new Xt}}function pr(n){var t=xi(this,n).delete(n);return this.size-=t?1:0,t}function _r(n){return xi(this,n).get(n)}function vr(n){return xi(this,n).has(n)}function gr(n,t){var r=xi(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this}function yr(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new sr;++t<r;)this.add(n[t])}function dr(n){return this.__data__.set(n,on),this}function br(n){
return this.__data__.has(n)}function wr(n){this.size=(this.__data__=new ir(n)).size}function mr(){this.__data__=new ir,this.size=0}function xr(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function jr(n){return this.__data__.get(n)}function Ar(n){return this.__data__.has(n)}function kr(n,t){var r=this.__data__;if(r instanceof ir){var e=r.__data__;if(!ts||e.length<tn-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new sr(e)}return r.set(n,t),this.size=r.size,this}function Or(n,t){
var r=bh(n),e=!r&&dh(n),u=!r&&!e&&mh(n),i=!r&&!e&&!u&&Oh(n),o=r||e||u||i,f=o?O(n.length,hl):[],c=f.length;for(var a in n)!t&&!bl.call(n,a)||o&&("length"==a||u&&("offset"==a||"parent"==a)||i&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||Ci(a,c))||f.push(a);return f}function Ir(n){var t=n.length;return t?n[tu(0,t-1)]:X}function Rr(n,t){return Xi(Tu(n),Mr(t,0,n.length))}function zr(n){return Xi(Tu(n))}function Er(n,t,r){(r===X||Gf(n[t],r))&&(r!==X||t in n)||Br(n,t,r)}function Sr(n,t,r){var e=n[t];
bl.call(n,t)&&Gf(e,r)&&(r!==X||t in n)||Br(n,t,r)}function Wr(n,t){for(var r=n.length;r--;)if(Gf(n[r][0],t))return r;return-1}function Lr(n,t,r,e){return ys(n,function(n,u,i){t(e,n,r(n),i)}),e}function Cr(n,t){return n&&$u(t,Pc(t),n)}function Ur(n,t){return n&&$u(t,qc(t),n)}function Br(n,t,r){"__proto__"==t&&Tl?Tl(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Tr(n,t){for(var r=-1,e=t.length,u=il(e),i=null==n;++r<e;)u[r]=i?X:Mc(n,t[r]);return u}function Mr(n,t,r){return n===n&&(r!==X&&(n=n<=r?n:r),
t!==X&&(n=n>=t?n:t)),n}function Fr(n,t,e,u,i,o){var f,c=t&an,a=t&ln,l=t&sn;if(e&&(f=i?e(n,u,i,o):e(n)),f!==X)return f;if(!fc(n))return n;var s=bh(n);if(s){if(f=zi(n),!c)return Tu(n,f)}else{var h=zs(n),p=h==Kn||h==Vn;if(mh(n))return Iu(n,c);if(h==Yn||h==Dn||p&&!i){if(f=a||p?{}:Ei(n),!c)return a?Mu(n,Ur(f,n)):Du(n,Cr(f,n))}else{if(!Vr[h])return i?n:{};f=Si(n,h,c)}}o||(o=new wr);var _=o.get(n);if(_)return _;o.set(n,f),kh(n)?n.forEach(function(r){f.add(Fr(r,t,e,r,n,o))}):jh(n)&&n.forEach(function(r,u){
f.set(u,Fr(r,t,e,u,n,o))});var v=l?a?di:yi:a?qc:Pc,g=s?X:v(n);return r(g||n,function(r,u){g&&(u=r,r=n[u]),Sr(f,u,Fr(r,t,e,u,n,o))}),f}function Nr(n){var t=Pc(n);return function(r){return Pr(r,n,t)}}function Pr(n,t,r){var e=r.length;if(null==n)return!e;for(n=ll(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===X&&!(u in n)||!i(o))return!1}return!0}function Gr(n,t,r){if("function"!=typeof n)throw new pl(en);return Ws(function(){n.apply(X,r)},t)}function Hr(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;
if(!l)return s;r&&(t=c(t,z(r))),e?(i=f,a=!1):t.length>=tn&&(i=S,a=!1,t=new yr(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p);if(p=e||0!==p?p:0,a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function Jr(n,t){var r=!0;return ys(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Yr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===X?o===o&&!bc(o):r(o,f)))var f=o,c=i}return c}function ne(n,t,r,e){var u=n.length;for(r=kc(r),r<0&&(r=-r>u?0:u+r),
e=e===X||e>u?u:kc(e),e<0&&(e+=u),e=r>e?0:Oc(e);r<e;)n[r++]=t;return n}function te(n,t){var r=[];return ys(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function ee(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Li),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?ee(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function ue(n,t){return n&&bs(n,t,Pc)}function oe(n,t){return n&&ws(n,t,Pc)}function fe(n,t){return i(t,function(t){return uc(n[t])})}function _e(n,t){t=ku(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[no(t[r++])];
return r&&r==e?n:X}function de(n,t,r){var e=t(n);return bh(n)?e:a(e,r(n))}function we(n){return null==n?n===X?ut:Jn:Bl&&Bl in ll(n)?ki(n):Ki(n)}function me(n,t){return n>t}function xe(n,t){return null!=n&&bl.call(n,t)}function je(n,t){return null!=n&&t in ll(n)}function Ae(n,t,r){return n>=Hl(t,r)&&n<Gl(t,r)}function ke(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=il(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,z(t))),s=Hl(p.length,s),l[a]=!r&&(t||u>=120&&p.length>=120)?new yr(a&&p):X}p=n[0];
var _=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],y=t?t(g):g;if(g=r||0!==g?g:0,!(v?S(v,y):e(h,y,r))){for(a=i;--a;){var d=l[a];if(!(d?S(d,y):e(n[a],y,r)))continue n}v&&v.push(y),h.push(g)}}return h}function Oe(n,t,r,e){return ue(n,function(n,u,i){t(e,r(n),u,i)}),e}function Ie(t,r,e){r=ku(r,t),t=Gi(t,r);var u=null==t?t:t[no(jo(r))];return null==u?X:n(u,t,e)}function Re(n){return cc(n)&&we(n)==Dn}function ze(n){return cc(n)&&we(n)==ft}function Ee(n){return cc(n)&&we(n)==Pn}function Se(n,t,r,e,u){
return n===t||(null==n||null==t||!cc(n)&&!cc(t)?n!==n&&t!==t:We(n,t,r,e,Se,u))}function We(n,t,r,e,u,i){var o=bh(n),f=bh(t),c=o?Mn:zs(n),a=f?Mn:zs(t);c=c==Dn?Yn:c,a=a==Dn?Yn:a;var l=c==Yn,s=a==Yn,h=c==a;if(h&&mh(n)){if(!mh(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new wr),o||Oh(n)?pi(n,t,r,e,u,i):_i(n,t,c,r,e,u,i);if(!(r&hn)){var p=l&&bl.call(n,"__wrapped__"),_=s&&bl.call(t,"__wrapped__");if(p||_){var v=p?n.value():n,g=_?t.value():t;return i||(i=new wr),u(v,g,r,e,i)}}return!!h&&(i||(i=new wr),vi(n,t,r,e,u,i));
}function Le(n){return cc(n)&&zs(n)==Gn}function Ce(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=ll(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===X&&!(c in n))return!1}else{var s=new wr;if(e)var h=e(a,l,c,n,t,s);if(!(h===X?Se(l,a,hn|pn,e,s):h))return!1}}return!0}function Ue(n){return!(!fc(n)||Di(n))&&(uc(n)?kl:Zt).test(to(n))}function Be(n){return cc(n)&&we(n)==nt}function Te(n){return cc(n)&&zs(n)==tt;
}function $e(n){return cc(n)&&oc(n.length)&&!!Kr[we(n)]}function De(n){return"function"==typeof n?n:null==n?La:"object"==typeof n?bh(n)?Ze(n[0],n[1]):qe(n):Fa(n)}function Me(n){if(!Mi(n))return Vl(n);var t=[];for(var r in ll(n))bl.call(n,r)&&"constructor"!=r&&t.push(r);return t}function Fe(n){if(!fc(n))return Zi(n);var t=Mi(n),r=[];for(var e in n)("constructor"!=e||!t&&bl.call(n,e))&&r.push(e);return r}function Ne(n,t){return n<t}function Pe(n,t){var r=-1,e=Hf(n)?il(n.length):[];return ys(n,function(n,u,i){
e[++r]=t(n,u,i)}),e}function qe(n){var t=ji(n);return 1==t.length&&t[0][2]?Ni(t[0][0],t[0][1]):function(r){return r===n||Ce(r,n,t)}}function Ze(n,t){return Bi(n)&&Fi(t)?Ni(no(n),t):function(r){var e=Mc(r,n);return e===X&&e===t?Nc(r,n):Se(t,e,hn|pn)}}function Ke(n,t,r,e,u){n!==t&&bs(t,function(i,o){if(u||(u=new wr),fc(i))Ve(n,t,o,r,Ke,e,u);else{var f=e?e(Ji(n,o),i,o+"",n,t,u):X;f===X&&(f=i),Er(n,o,f)}},qc)}function Ve(n,t,r,e,u,i,o){var f=Ji(n,r),c=Ji(t,r),a=o.get(c);if(a)return Er(n,r,a),X;var l=i?i(f,c,r+"",n,t,o):X,s=l===X;
if(s){var h=bh(c),p=!h&&mh(c),_=!h&&!p&&Oh(c);l=c,h||p||_?bh(f)?l=f:Jf(f)?l=Tu(f):p?(s=!1,l=Iu(c,!0)):_?(s=!1,l=Wu(c,!0)):l=[]:gc(c)||dh(c)?(l=f,dh(f)?l=Rc(f):fc(f)&&!uc(f)||(l=Ei(c))):s=!1}s&&(o.set(c,l),u(l,c,e,i,o),o.delete(c)),Er(n,r,l)}function Ge(n,t){var r=n.length;if(r)return t+=t<0?r:0,Ci(t,r)?n[t]:X}function He(n,t,r){t=t.length?c(t,function(n){return bh(n)?function(t){return _e(t,1===n.length?n[0]:n)}:n}):[La];var e=-1;return t=c(t,z(mi())),A(Pe(n,function(n,r,u){return{criteria:c(t,function(t){
return t(n)}),index:++e,value:n}}),function(n,t){return Cu(n,t,r)})}function Je(n,t){return Ye(n,t,function(t,r){return Nc(n,r)})}function Ye(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=_e(n,o);r(f,o)&&fu(i,ku(o,n),f)}return i}function Qe(n){return function(t){return _e(t,n)}}function Xe(n,t,r,e){var u=e?d:y,i=-1,o=t.length,f=n;for(n===t&&(t=Tu(t)),r&&(f=c(n,z(r)));++i<o;)for(var a=0,l=t[i],s=r?r(l):l;(a=u(f,s,a,e))>-1;)f!==n&&Ll.call(f,a,1),Ll.call(n,a,1);return n}function nu(n,t){for(var r=n?t.length:0,e=r-1;r--;){
var u=t[r];if(r==e||u!==i){var i=u;Ci(u)?Ll.call(n,u,1):yu(n,u)}}return n}function tu(n,t){return n+Nl(Ql()*(t-n+1))}function ru(n,t,r,e){for(var u=-1,i=Gl(Fl((t-n)/(r||1)),0),o=il(i);i--;)o[e?i:++u]=n,n+=r;return o}function eu(n,t){var r="";if(!n||t<1||t>Wn)return r;do t%2&&(r+=n),t=Nl(t/2),t&&(n+=n);while(t);return r}function uu(n,t){return Ls(Vi(n,t,La),n+"")}function iu(n){return Ir(ra(n))}function ou(n,t){var r=ra(n);return Xi(r,Mr(t,0,r.length))}function fu(n,t,r,e){if(!fc(n))return n;t=ku(t,n);
for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=no(t[u]),a=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(u!=o){var l=f[c];a=e?e(l,c,f):X,a===X&&(a=fc(l)?l:Ci(t[u+1])?[]:{})}Sr(f,c,a),f=f[c]}return n}function cu(n){return Xi(ra(n))}function au(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=il(u);++e<u;)i[e]=n[e+t];return i}function lu(n,t){var r;return ys(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function su(n,t,r){
var e=0,u=null==n?e:n.length;if("number"==typeof t&&t===t&&u<=Tn){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!bc(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return hu(n,t,La,r)}function hu(n,t,r,e){var u=0,i=null==n?0:n.length;if(0===i)return 0;t=r(t);for(var o=t!==t,f=null===t,c=bc(t),a=t===X;u<i;){var l=Nl((u+i)/2),s=r(n[l]),h=s!==X,p=null===s,_=s===s,v=bc(s);if(o)var g=e||_;else g=a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):!p&&!v&&(e?s<=t:s<t);g?u=l+1:i=l}return Hl(i,Bn)}function pu(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){
var o=n[r],f=t?t(o):o;if(!r||!Gf(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function _u(n){return"number"==typeof n?n:bc(n)?Cn:+n}function vu(n){if("string"==typeof n)return n;if(bh(n))return c(n,vu)+"";if(bc(n))return vs?vs.call(n):"";var t=n+"";return"0"==t&&1/n==-Sn?"-0":t}function gu(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(i>=tn){var s=t?null:ks(n);if(s)return P(s);c=!1,u=S,l=new yr}else l=t?[]:a;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,c&&p===p){for(var _=l.length;_--;)if(l[_]===p)continue n;
t&&l.push(p),a.push(h)}else u(l,p,r)||(l!==a&&l.push(p),a.push(h))}return a}function yu(n,t){return t=ku(t,n),n=Gi(n,t),null==n||delete n[no(jo(t))]}function du(n,t,r,e){return fu(n,t,r(_e(n,t)),e)}function bu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?au(n,e?0:i,e?i+1:u):au(n,e?i+1:0,e?u:i)}function wu(n,t){var r=n;return r instanceof Ct&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mu(n,t,r){var e=n.length;if(e<2)return e?gu(n[0]):[];
for(var u=-1,i=il(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Hr(i[u]||o,n[f],t,r));return gu(ee(i,1),t,r)}function xu(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){r(o,n[e],e<i?t[e]:X)}return o}function ju(n){return Jf(n)?n:[]}function Au(n){return"function"==typeof n?n:La}function ku(n,t){return bh(n)?n:Bi(n,t)?[n]:Cs(Ec(n))}function Ou(n,t,r){var e=n.length;return r=r===X?e:r,!t&&r>=e?n:au(n,t,r)}function Iu(n,t){if(t)return n.slice();var r=n.length,e=zl?zl(r):new n.constructor(r);
return n.copy(e),e}function Ru(n){var t=new n.constructor(n.byteLength);return new Rl(t).set(new Rl(n)),t}function zu(n,t){return new n.constructor(t?Ru(n.buffer):n.buffer,n.byteOffset,n.byteLength)}function Eu(n){var t=new n.constructor(n.source,Nt.exec(n));return t.lastIndex=n.lastIndex,t}function Su(n){return _s?ll(_s.call(n)):{}}function Wu(n,t){return new n.constructor(t?Ru(n.buffer):n.buffer,n.byteOffset,n.length)}function Lu(n,t){if(n!==t){var r=n!==X,e=null===n,u=n===n,i=bc(n),o=t!==X,f=null===t,c=t===t,a=bc(t);
if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Cu(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var c=Lu(u[e],i[e]);if(c){if(e>=f)return c;return c*("desc"==r[e]?-1:1)}}return n.index-t.index}function Uu(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Gl(i-o,0),l=il(c+a),s=!e;++f<c;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l;
}function Bu(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Gl(i-f,0),s=il(l+a),h=!e;++u<l;)s[u]=n[u];for(var p=u;++c<a;)s[p+c]=t[c];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function Tu(n,t){var r=-1,e=n.length;for(t||(t=il(e));++r<e;)t[r]=n[r];return t}function $u(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):X;c===X&&(c=n[f]),u?Br(r,f,c):Sr(r,f,c)}return r}function Du(n,t){return $u(n,Is(n),t)}function Mu(n,t){return $u(n,Rs(n),t);
}function Fu(n,r){return function(e,u){var i=bh(e)?t:Lr,o=r?r():{};return i(e,n,mi(u,2),o)}}function Nu(n){return uu(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:X,o=u>2?r[2]:X;for(i=n.length>3&&"function"==typeof i?(u--,i):X,o&&Ui(r[0],r[1],o)&&(i=u<3?X:i,u=1),t=ll(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Pu(n,t){return function(r,e){if(null==r)return r;if(!Hf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=ll(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function qu(n){return function(t,r,e){
for(var u=-1,i=ll(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(r(i[c],c,i)===!1)break}return t}}function Zu(n,t,r){function e(){return(this&&this!==re&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=t&_n,i=Gu(n);return e}function Ku(n){return function(t){t=Ec(t);var r=T(t)?G(t):X,e=r?r[0]:t.charAt(0),u=r?Ou(r,1).join(""):t.slice(1);return e[n]()+u}}function Vu(n){return function(t){return l(Ra(ca(t).replace($r,"")),n,"")}}function Gu(n){return function(){var t=arguments;switch(t.length){
case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=gs(n.prototype),e=n.apply(r,t);return fc(e)?e:r}}function Hu(t,r,e){function u(){for(var o=arguments.length,f=il(o),c=o,a=wi(u);c--;)f[c]=arguments[c];var l=o<3&&f[0]!==a&&f[o-1]!==a?[]:N(f,a);
return o-=l.length,o<e?oi(t,r,Qu,u.placeholder,X,f,l,X,X,e-o):n(this&&this!==re&&this instanceof u?i:t,this,f)}var i=Gu(t);return u}function Ju(n){return function(t,r,e){var u=ll(t);if(!Hf(t)){var i=mi(r,3);t=Pc(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:X}}function Yu(n){return gi(function(t){var r=t.length,e=r,u=Y.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new pl(en);if(u&&!o&&"wrapper"==bi(i))var o=new Y([],!0)}for(e=o?e:r;++e<r;){
i=t[e];var f=bi(i),c="wrapper"==f?Os(i):X;o=c&&$i(c[0])&&c[1]==(mn|yn|bn|xn)&&!c[4].length&&1==c[9]?o[bi(c[0])].apply(o,c[3]):1==i.length&&$i(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&bh(e))return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function Qu(n,t,r,e,u,i,o,f,c,a){function l(){for(var y=arguments.length,d=il(y),b=y;b--;)d[b]=arguments[b];if(_)var w=wi(l),m=C(d,w);if(e&&(d=Uu(d,e,u,_)),i&&(d=Bu(d,i,o,_)),
y-=m,_&&y<a){return oi(n,t,Qu,l.placeholder,r,d,N(d,w),f,c,a-y)}var x=h?r:this,j=p?x[n]:n;return y=d.length,f?d=Hi(d,f):v&&y>1&&d.reverse(),s&&c<y&&(d.length=c),this&&this!==re&&this instanceof l&&(j=g||Gu(j)),j.apply(x,d)}var s=t&mn,h=t&_n,p=t&vn,_=t&(yn|dn),v=t&jn,g=p?X:Gu(n);return l}function Xu(n,t){return function(r,e){return Oe(r,n,t(e),{})}}function ni(n,t){return function(r,e){var u;if(r===X&&e===X)return t;if(r!==X&&(u=r),e!==X){if(u===X)return e;"string"==typeof r||"string"==typeof e?(r=vu(r),
e=vu(e)):(r=_u(r),e=_u(e)),u=n(r,e)}return u}}function ti(t){return gi(function(r){return r=c(r,z(mi())),uu(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ri(n,t){t=t===X?" ":vu(t);var r=t.length;if(r<2)return r?eu(t,n):t;var e=eu(t,Fl(n/V(t)));return T(t)?Ou(G(e),0,n).join(""):e.slice(0,n)}function ei(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=il(l+c),h=this&&this!==re&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];
return n(h,o?e:this,s)}var o=r&_n,f=Gu(t);return i}function ui(n){return function(t,r,e){return e&&"number"!=typeof e&&Ui(t,r,e)&&(r=e=X),t=Ac(t),r===X?(r=t,t=0):r=Ac(r),e=e===X?t<r?1:-1:Ac(e),ru(t,r,e,n)}}function ii(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Ic(t),r=Ic(r)),n(t,r)}}function oi(n,t,r,e,u,i,o,f,c,a){var l=t&yn,s=l?o:X,h=l?X:o,p=l?i:X,_=l?X:i;t|=l?bn:wn,t&=~(l?wn:bn),t&gn||(t&=~(_n|vn));var v=[n,t,u,p,s,_,h,f,c,a],g=r.apply(X,v);return $i(n)&&Ss(g,v),g.placeholder=e,
Yi(g,n,t)}function fi(n){var t=al[n];return function(n,r){if(n=Ic(n),r=null==r?0:Hl(kc(r),292),r&&Zl(n)){var e=(Ec(n)+"e").split("e");return e=(Ec(t(e[0]+"e"+(+e[1]+r)))+"e").split("e"),+(e[0]+"e"+(+e[1]-r))}return t(n)}}function ci(n){return function(t){var r=zs(t);return r==Gn?M(t):r==tt?q(t):I(t,n(t))}}function ai(n,t,r,e,u,i,o,f){var c=t&vn;if(!c&&"function"!=typeof n)throw new pl(en);var a=e?e.length:0;if(a||(t&=~(bn|wn),e=u=X),o=o===X?o:Gl(kc(o),0),f=f===X?f:kc(f),a-=u?u.length:0,t&wn){var l=e,s=u;
e=u=X}var h=c?X:Os(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&qi(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=p[9]===X?c?0:n.length:Gl(p[9]-a,0),!f&&t&(yn|dn)&&(t&=~(yn|dn)),t&&t!=_n)_=t==yn||t==dn?Hu(n,t,f):t!=bn&&t!=(_n|bn)||u.length?Qu.apply(X,p):ei(n,t,r,e);else var _=Zu(n,t,r);return Yi((h?ms:Ss)(_,p),n,t)}function li(n,t,r,e){return n===X||Gf(n,gl[r])&&!bl.call(e,r)?t:n}function si(n,t,r,e,u,i){return fc(n)&&fc(t)&&(i.set(t,n),Ke(n,t,X,si,i),i.delete(t)),n}function hi(n){return gc(n)?X:n}function pi(n,t,r,e,u,i){
var o=r&hn,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;var a=i.get(n),l=i.get(t);if(a&&l)return a==t&&l==n;var s=-1,p=!0,_=r&pn?new yr:X;for(i.set(n,t),i.set(t,n);++s<f;){var v=n[s],g=t[s];if(e)var y=o?e(g,v,s,t,n,i):e(v,g,s,n,t,i);if(y!==X){if(y)continue;p=!1;break}if(_){if(!h(t,function(n,t){if(!S(_,t)&&(v===n||u(v,n,r,e,i)))return _.push(t)})){p=!1;break}}else if(v!==g&&!u(v,g,r,e,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function _i(n,t,r,e,u,i,o){switch(r){case ct:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;
n=n.buffer,t=t.buffer;case ft:return!(n.byteLength!=t.byteLength||!i(new Rl(n),new Rl(t)));case Nn:case Pn:case Hn:return Gf(+n,+t);case Zn:return n.name==t.name&&n.message==t.message;case nt:case rt:return n==t+"";case Gn:var f=M;case tt:var c=e&hn;if(f||(f=P),n.size!=t.size&&!c)return!1;var a=o.get(n);if(a)return a==t;e|=pn,o.set(n,t);var l=pi(f(n),f(t),e,u,i,o);return o.delete(n),l;case et:if(_s)return _s.call(n)==_s.call(t)}return!1}function vi(n,t,r,e,u,i){var o=r&hn,f=yi(n),c=f.length;if(c!=yi(t).length&&!o)return!1;
for(var a=c;a--;){var l=f[a];if(!(o?l in t:bl.call(t,l)))return!1}var s=i.get(n),h=i.get(t);if(s&&h)return s==t&&h==n;var p=!0;i.set(n,t),i.set(t,n);for(var _=o;++a<c;){l=f[a];var v=n[l],g=t[l];if(e)var y=o?e(g,v,l,t,n,i):e(v,g,l,n,t,i);if(!(y===X?v===g||u(v,g,r,e,i):y)){p=!1;break}_||(_="constructor"==l)}if(p&&!_){var d=n.constructor,b=t.constructor;d!=b&&"constructor"in n&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(n),
i.delete(t),p}function gi(n){return Ls(Vi(n,X,_o),n+"")}function yi(n){return de(n,Pc,Is)}function di(n){return de(n,qc,Rs)}function bi(n){for(var t=n.name+"",r=fs[t],e=bl.call(fs,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function wi(n){return(bl.call(Z,"placeholder")?Z:n).placeholder}function mi(){var n=Z.iteratee||Ca;return n=n===Ca?De:n,arguments.length?n(arguments[0],arguments[1]):n}function xi(n,t){var r=n.__data__;return Ti(t)?r["string"==typeof t?"string":"hash"]:r.map;
}function ji(n){for(var t=Pc(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Fi(u)]}return t}function Ai(n,t){var r=B(n,t);return Ue(r)?r:X}function ki(n){var t=bl.call(n,Bl),r=n[Bl];try{n[Bl]=X;var e=!0}catch(n){}var u=xl.call(n);return e&&(t?n[Bl]=r:delete n[Bl]),u}function Oi(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Hl(t,n+o);break;case"takeRight":n=Gl(n,t-o)}}return{start:n,end:t}}function Ii(n){var t=n.match(Bt);
return t?t[1].split(Tt):[]}function Ri(n,t,r){t=ku(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=no(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&oc(u)&&Ci(o,u)&&(bh(n)||dh(n)))}function zi(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&bl.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ei(n){return"function"!=typeof n.constructor||Mi(n)?{}:gs(El(n))}function Si(n,t,r){var e=n.constructor;switch(t){case ft:return Ru(n);
case Nn:case Pn:return new e(+n);case ct:return zu(n,r);case at:case lt:case st:case ht:case pt:case _t:case vt:case gt:case yt:return Wu(n,r);case Gn:return new e;case Hn:case rt:return new e(n);case nt:return Eu(n);case tt:return new e;case et:return Su(n)}}function Wi(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?"& ":"")+t[e],t=t.join(r>2?", ":" "),n.replace(Ut,"{\n/* [wrapped with "+t+"] */\n")}function Li(n){return bh(n)||dh(n)||!!(Cl&&n&&n[Cl])}function Ci(n,t){var r=typeof n;
return t=null==t?Wn:t,!!t&&("number"==r||"symbol"!=r&&Vt.test(n))&&n>-1&&n%1==0&&n<t}function Ui(n,t,r){if(!fc(r))return!1;var e=typeof t;return!!("number"==e?Hf(r)&&Ci(t,r.length):"string"==e&&t in r)&&Gf(r[t],n)}function Bi(n,t){if(bh(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!bc(n))||(zt.test(n)||!Rt.test(n)||null!=t&&n in ll(t))}function Ti(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}function $i(n){
var t=bi(n),r=Z[t];if("function"!=typeof r||!(t in Ct.prototype))return!1;if(n===r)return!0;var e=Os(r);return!!e&&n===e[0]}function Di(n){return!!ml&&ml in n}function Mi(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||gl)}function Fi(n){return n===n&&!fc(n)}function Ni(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==X||n in ll(r)))}}function Pi(n){var t=Cf(n,function(n){return r.size===fn&&r.clear(),n}),r=t.cache;return t}function qi(n,t){var r=n[1],e=t[1],u=r|e,i=u<(_n|vn|mn),o=e==mn&&r==yn||e==mn&&r==xn&&n[7].length<=t[8]||e==(mn|xn)&&t[7].length<=t[8]&&r==yn;
if(!i&&!o)return n;e&_n&&(n[2]=t[2],u|=r&_n?0:gn);var f=t[3];if(f){var c=n[3];n[3]=c?Uu(c,f,t[4]):f,n[4]=c?N(n[3],cn):t[4]}return f=t[5],f&&(c=n[5],n[5]=c?Bu(c,f,t[6]):f,n[6]=c?N(n[5],cn):t[6]),f=t[7],f&&(n[7]=f),e&mn&&(n[8]=null==n[8]?t[8]:Hl(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Zi(n){var t=[];if(null!=n)for(var r in ll(n))t.push(r);return t}function Ki(n){return xl.call(n)}function Vi(t,r,e){return r=Gl(r===X?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Gl(u.length-r,0),f=il(o);++i<o;)f[i]=u[r+i];
i=-1;for(var c=il(r+1);++i<r;)c[i]=u[i];return c[r]=e(f),n(t,this,c)}}function Gi(n,t){return t.length<2?n:_e(n,au(t,0,-1))}function Hi(n,t){for(var r=n.length,e=Hl(t.length,r),u=Tu(n);e--;){var i=t[e];n[e]=Ci(i,r)?u[i]:X}return n}function Ji(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}function Yi(n,t,r){var e=t+"";return Ls(n,Wi(e,ro(Ii(e),r)))}function Qi(n){var t=0,r=0;return function(){var e=Jl(),u=In-(e-r);if(r=e,u>0){if(++t>=On)return arguments[0]}else t=0;
return n.apply(X,arguments)}}function Xi(n,t){var r=-1,e=n.length,u=e-1;for(t=t===X?e:t;++r<t;){var i=tu(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function no(n){if("string"==typeof n||bc(n))return n;var t=n+"";return"0"==t&&1/n==-Sn?"-0":t}function to(n){if(null!=n){try{return dl.call(n)}catch(n){}try{return n+""}catch(n){}}return""}function ro(n,t){return r($n,function(r){var e="_."+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function eo(n){if(n instanceof Ct)return n.clone();var t=new Y(n.__wrapped__,n.__chain__);
return t.__actions__=Tu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function uo(n,t,r){t=(r?Ui(n,t,r):t===X)?1:Gl(kc(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=il(Fl(e/t));u<e;)o[i++]=au(n,u,u+=t);return o}function io(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function oo(){var n=arguments.length;if(!n)return[];for(var t=il(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return a(bh(r)?Tu(r):[r],ee(t,1));
}function fo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),au(n,t<0?0:t,e)):[]}function co(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),t=e-t,au(n,0,t<0?0:t)):[]}function ao(n,t){return n&&n.length?bu(n,mi(t,3),!0,!0):[]}function lo(n,t){return n&&n.length?bu(n,mi(t,3),!0):[]}function so(n,t,r,e){var u=null==n?0:n.length;return u?(r&&"number"!=typeof r&&Ui(n,t,r)&&(r=0,e=u),ne(n,t,r,e)):[]}function ho(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:kc(r);
return u<0&&(u=Gl(e+u,0)),g(n,mi(t,3),u)}function po(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==X&&(u=kc(r),u=r<0?Gl(e+u,0):Hl(u,e-1)),g(n,mi(t,3),u,!0)}function _o(n){return(null==n?0:n.length)?ee(n,1):[]}function vo(n){return(null==n?0:n.length)?ee(n,Sn):[]}function go(n,t){return(null==n?0:n.length)?(t=t===X?1:kc(t),ee(n,t)):[]}function yo(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function bo(n){return n&&n.length?n[0]:X}function wo(n,t,r){
var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:kc(r);return u<0&&(u=Gl(e+u,0)),y(n,t,u)}function mo(n){return(null==n?0:n.length)?au(n,0,-1):[]}function xo(n,t){return null==n?"":Kl.call(n,t)}function jo(n){var t=null==n?0:n.length;return t?n[t-1]:X}function Ao(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==X&&(u=kc(r),u=u<0?Gl(e+u,0):Hl(u,e-1)),t===t?K(n,t,u):g(n,b,u,!0)}function ko(n,t){return n&&n.length?Ge(n,kc(t)):X}function Oo(n,t){return n&&n.length&&t&&t.length?Xe(n,t):n;
}function Io(n,t,r){return n&&n.length&&t&&t.length?Xe(n,t,mi(r,2)):n}function Ro(n,t,r){return n&&n.length&&t&&t.length?Xe(n,t,X,r):n}function zo(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=mi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return nu(n,u),r}function Eo(n){return null==n?n:Xl.call(n)}function So(n,t,r){var e=null==n?0:n.length;return e?(r&&"number"!=typeof r&&Ui(n,t,r)?(t=0,r=e):(t=null==t?0:kc(t),r=r===X?e:kc(r)),au(n,t,r)):[]}function Wo(n,t){
return su(n,t)}function Lo(n,t,r){return hu(n,t,mi(r,2))}function Co(n,t){var r=null==n?0:n.length;if(r){var e=su(n,t);if(e<r&&Gf(n[e],t))return e}return-1}function Uo(n,t){return su(n,t,!0)}function Bo(n,t,r){return hu(n,t,mi(r,2),!0)}function To(n,t){if(null==n?0:n.length){var r=su(n,t,!0)-1;if(Gf(n[r],t))return r}return-1}function $o(n){return n&&n.length?pu(n):[]}function Do(n,t){return n&&n.length?pu(n,mi(t,2)):[]}function Mo(n){var t=null==n?0:n.length;return t?au(n,1,t):[]}function Fo(n,t,r){
return n&&n.length?(t=r||t===X?1:kc(t),au(n,0,t<0?0:t)):[]}function No(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),t=e-t,au(n,t<0?0:t,e)):[]}function Po(n,t){return n&&n.length?bu(n,mi(t,3),!1,!0):[]}function qo(n,t){return n&&n.length?bu(n,mi(t,3)):[]}function Zo(n){return n&&n.length?gu(n):[]}function Ko(n,t){return n&&n.length?gu(n,mi(t,2)):[]}function Vo(n,t){return t="function"==typeof t?t:X,n&&n.length?gu(n,X,t):[]}function Go(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){
if(Jf(n))return t=Gl(n.length,t),!0}),O(t,function(t){return c(n,m(t))})}function Ho(t,r){if(!t||!t.length)return[];var e=Go(t);return null==r?e:c(e,function(t){return n(r,X,t)})}function Jo(n,t){return xu(n||[],t||[],Sr)}function Yo(n,t){return xu(n||[],t||[],fu)}function Qo(n){var t=Z(n);return t.__chain__=!0,t}function Xo(n,t){return t(n),n}function nf(n,t){return t(n)}function tf(){return Qo(this)}function rf(){return new Y(this.value(),this.__chain__)}function ef(){this.__values__===X&&(this.__values__=jc(this.value()));
var n=this.__index__>=this.__values__.length;return{done:n,value:n?X:this.__values__[this.__index__++]}}function uf(){return this}function of(n){for(var t,r=this;r instanceof J;){var e=eo(r);e.__index__=0,e.__values__=X,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function ff(){var n=this.__wrapped__;if(n instanceof Ct){var t=n;return this.__actions__.length&&(t=new Ct(this)),t=t.reverse(),t.__actions__.push({func:nf,args:[Eo],thisArg:X}),new Y(t,this.__chain__)}return this.thru(Eo);
}function cf(){return wu(this.__wrapped__,this.__actions__)}function af(n,t,r){var e=bh(n)?u:Jr;return r&&Ui(n,t,r)&&(t=X),e(n,mi(t,3))}function lf(n,t){return(bh(n)?i:te)(n,mi(t,3))}function sf(n,t){return ee(yf(n,t),1)}function hf(n,t){return ee(yf(n,t),Sn)}function pf(n,t,r){return r=r===X?1:kc(r),ee(yf(n,t),r)}function _f(n,t){return(bh(n)?r:ys)(n,mi(t,3))}function vf(n,t){return(bh(n)?e:ds)(n,mi(t,3))}function gf(n,t,r,e){n=Hf(n)?n:ra(n),r=r&&!e?kc(r):0;var u=n.length;return r<0&&(r=Gl(u+r,0)),
dc(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&y(n,t,r)>-1}function yf(n,t){return(bh(n)?c:Pe)(n,mi(t,3))}function df(n,t,r,e){return null==n?[]:(bh(t)||(t=null==t?[]:[t]),r=e?X:r,bh(r)||(r=null==r?[]:[r]),He(n,t,r))}function bf(n,t,r){var e=bh(n)?l:j,u=arguments.length<3;return e(n,mi(t,4),r,u,ys)}function wf(n,t,r){var e=bh(n)?s:j,u=arguments.length<3;return e(n,mi(t,4),r,u,ds)}function mf(n,t){return(bh(n)?i:te)(n,Uf(mi(t,3)))}function xf(n){return(bh(n)?Ir:iu)(n)}function jf(n,t,r){return t=(r?Ui(n,t,r):t===X)?1:kc(t),
(bh(n)?Rr:ou)(n,t)}function Af(n){return(bh(n)?zr:cu)(n)}function kf(n){if(null==n)return 0;if(Hf(n))return dc(n)?V(n):n.length;var t=zs(n);return t==Gn||t==tt?n.size:Me(n).length}function Of(n,t,r){var e=bh(n)?h:lu;return r&&Ui(n,t,r)&&(t=X),e(n,mi(t,3))}function If(n,t){if("function"!=typeof t)throw new pl(en);return n=kc(n),function(){if(--n<1)return t.apply(this,arguments)}}function Rf(n,t,r){return t=r?X:t,t=n&&null==t?n.length:t,ai(n,mn,X,X,X,X,t)}function zf(n,t){var r;if("function"!=typeof t)throw new pl(en);
return n=kc(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=X),r}}function Ef(n,t,r){t=r?X:t;var e=ai(n,yn,X,X,X,X,X,t);return e.placeholder=Ef.placeholder,e}function Sf(n,t,r){t=r?X:t;var e=ai(n,dn,X,X,X,X,X,t);return e.placeholder=Sf.placeholder,e}function Wf(n,t,r){function e(t){var r=h,e=p;return h=p=X,d=t,v=n.apply(e,r)}function u(n){return d=n,g=Ws(f,t),b?e(n):v}function i(n){var r=n-y,e=n-d,u=t-r;return w?Hl(u,_-e):u}function o(n){var r=n-y,e=n-d;return y===X||r>=t||r<0||w&&e>=_;
}function f(){var n=fh();return o(n)?c(n):(g=Ws(f,i(n)),X)}function c(n){return g=X,m&&h?e(n):(h=p=X,v)}function a(){g!==X&&As(g),d=0,h=y=p=g=X}function l(){return g===X?v:c(fh())}function s(){var n=fh(),r=o(n);if(h=arguments,p=this,y=n,r){if(g===X)return u(y);if(w)return As(g),g=Ws(f,t),e(y)}return g===X&&(g=Ws(f,t)),v}var h,p,_,v,g,y,d=0,b=!1,w=!1,m=!0;if("function"!=typeof n)throw new pl(en);return t=Ic(t)||0,fc(r)&&(b=!!r.leading,w="maxWait"in r,_=w?Gl(Ic(r.maxWait)||0,t):_,m="trailing"in r?!!r.trailing:m),
s.cancel=a,s.flush=l,s}function Lf(n){return ai(n,jn)}function Cf(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new pl(en);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(Cf.Cache||sr),r}function Uf(n){if("function"!=typeof n)throw new pl(en);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:
return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function Bf(n){return zf(2,n)}function Tf(n,t){if("function"!=typeof n)throw new pl(en);return t=t===X?t:kc(t),uu(n,t)}function $f(t,r){if("function"!=typeof t)throw new pl(en);return r=null==r?0:Gl(kc(r),0),uu(function(e){var u=e[r],i=Ou(e,0,r);return u&&a(i,u),n(t,this,i)})}function Df(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new pl(en);return fc(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),
Wf(n,t,{leading:e,maxWait:t,trailing:u})}function Mf(n){return Rf(n,1)}function Ff(n,t){return ph(Au(t),n)}function Nf(){if(!arguments.length)return[];var n=arguments[0];return bh(n)?n:[n]}function Pf(n){return Fr(n,sn)}function qf(n,t){return t="function"==typeof t?t:X,Fr(n,sn,t)}function Zf(n){return Fr(n,an|sn)}function Kf(n,t){return t="function"==typeof t?t:X,Fr(n,an|sn,t)}function Vf(n,t){return null==t||Pr(n,t,Pc(t))}function Gf(n,t){return n===t||n!==n&&t!==t}function Hf(n){return null!=n&&oc(n.length)&&!uc(n);
}function Jf(n){return cc(n)&&Hf(n)}function Yf(n){return n===!0||n===!1||cc(n)&&we(n)==Nn}function Qf(n){return cc(n)&&1===n.nodeType&&!gc(n)}function Xf(n){if(null==n)return!0;if(Hf(n)&&(bh(n)||"string"==typeof n||"function"==typeof n.splice||mh(n)||Oh(n)||dh(n)))return!n.length;var t=zs(n);if(t==Gn||t==tt)return!n.size;if(Mi(n))return!Me(n).length;for(var r in n)if(bl.call(n,r))return!1;return!0}function nc(n,t){return Se(n,t)}function tc(n,t,r){r="function"==typeof r?r:X;var e=r?r(n,t):X;return e===X?Se(n,t,X,r):!!e;
}function rc(n){if(!cc(n))return!1;var t=we(n);return t==Zn||t==qn||"string"==typeof n.message&&"string"==typeof n.name&&!gc(n)}function ec(n){return"number"==typeof n&&Zl(n)}function uc(n){if(!fc(n))return!1;var t=we(n);return t==Kn||t==Vn||t==Fn||t==Xn}function ic(n){return"number"==typeof n&&n==kc(n)}function oc(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Wn}function fc(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function cc(n){return null!=n&&"object"==typeof n}function ac(n,t){
return n===t||Ce(n,t,ji(t))}function lc(n,t,r){return r="function"==typeof r?r:X,Ce(n,t,ji(t),r)}function sc(n){return vc(n)&&n!=+n}function hc(n){if(Es(n))throw new fl(rn);return Ue(n)}function pc(n){return null===n}function _c(n){return null==n}function vc(n){return"number"==typeof n||cc(n)&&we(n)==Hn}function gc(n){if(!cc(n)||we(n)!=Yn)return!1;var t=El(n);if(null===t)return!0;var r=bl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&dl.call(r)==jl}function yc(n){
return ic(n)&&n>=-Wn&&n<=Wn}function dc(n){return"string"==typeof n||!bh(n)&&cc(n)&&we(n)==rt}function bc(n){return"symbol"==typeof n||cc(n)&&we(n)==et}function wc(n){return n===X}function mc(n){return cc(n)&&zs(n)==it}function xc(n){return cc(n)&&we(n)==ot}function jc(n){if(!n)return[];if(Hf(n))return dc(n)?G(n):Tu(n);if(Ul&&n[Ul])return D(n[Ul]());var t=zs(n);return(t==Gn?M:t==tt?P:ra)(n)}function Ac(n){if(!n)return 0===n?n:0;if(n=Ic(n),n===Sn||n===-Sn){return(n<0?-1:1)*Ln}return n===n?n:0}function kc(n){
var t=Ac(n),r=t%1;return t===t?r?t-r:t:0}function Oc(n){return n?Mr(kc(n),0,Un):0}function Ic(n){if("number"==typeof n)return n;if(bc(n))return Cn;if(fc(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=fc(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=R(n);var r=qt.test(n);return r||Kt.test(n)?Xr(n.slice(2),r?2:8):Pt.test(n)?Cn:+n}function Rc(n){return $u(n,qc(n))}function zc(n){return n?Mr(kc(n),-Wn,Wn):0===n?n:0}function Ec(n){return null==n?"":vu(n)}function Sc(n,t){var r=gs(n);return null==t?r:Cr(r,t);
}function Wc(n,t){return v(n,mi(t,3),ue)}function Lc(n,t){return v(n,mi(t,3),oe)}function Cc(n,t){return null==n?n:bs(n,mi(t,3),qc)}function Uc(n,t){return null==n?n:ws(n,mi(t,3),qc)}function Bc(n,t){return n&&ue(n,mi(t,3))}function Tc(n,t){return n&&oe(n,mi(t,3))}function $c(n){return null==n?[]:fe(n,Pc(n))}function Dc(n){return null==n?[]:fe(n,qc(n))}function Mc(n,t,r){var e=null==n?X:_e(n,t);return e===X?r:e}function Fc(n,t){return null!=n&&Ri(n,t,xe)}function Nc(n,t){return null!=n&&Ri(n,t,je);
}function Pc(n){return Hf(n)?Or(n):Me(n)}function qc(n){return Hf(n)?Or(n,!0):Fe(n)}function Zc(n,t){var r={};return t=mi(t,3),ue(n,function(n,e,u){Br(r,t(n,e,u),n)}),r}function Kc(n,t){var r={};return t=mi(t,3),ue(n,function(n,e,u){Br(r,e,t(n,e,u))}),r}function Vc(n,t){return Gc(n,Uf(mi(t)))}function Gc(n,t){if(null==n)return{};var r=c(di(n),function(n){return[n]});return t=mi(t),Ye(n,r,function(n,r){return t(n,r[0])})}function Hc(n,t,r){t=ku(t,n);var e=-1,u=t.length;for(u||(u=1,n=X);++e<u;){var i=null==n?X:n[no(t[e])];
i===X&&(e=u,i=r),n=uc(i)?i.call(n):i}return n}function Jc(n,t,r){return null==n?n:fu(n,t,r)}function Yc(n,t,r,e){return e="function"==typeof e?e:X,null==n?n:fu(n,t,r,e)}function Qc(n,t,e){var u=bh(n),i=u||mh(n)||Oh(n);if(t=mi(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:fc(n)&&uc(o)?gs(El(n)):{}}return(i?r:ue)(n,function(n,r,u){return t(e,n,r,u)}),e}function Xc(n,t){return null==n||yu(n,t)}function na(n,t,r){return null==n?n:du(n,t,Au(r))}function ta(n,t,r,e){return e="function"==typeof e?e:X,
null==n?n:du(n,t,Au(r),e)}function ra(n){return null==n?[]:E(n,Pc(n))}function ea(n){return null==n?[]:E(n,qc(n))}function ua(n,t,r){return r===X&&(r=t,t=X),r!==X&&(r=Ic(r),r=r===r?r:0),t!==X&&(t=Ic(t),t=t===t?t:0),Mr(Ic(n),t,r)}function ia(n,t,r){return t=Ac(t),r===X?(r=t,t=0):r=Ac(r),n=Ic(n),Ae(n,t,r)}function oa(n,t,r){if(r&&"boolean"!=typeof r&&Ui(n,t,r)&&(t=r=X),r===X&&("boolean"==typeof t?(r=t,t=X):"boolean"==typeof n&&(r=n,n=X)),n===X&&t===X?(n=0,t=1):(n=Ac(n),t===X?(t=n,n=0):t=Ac(t)),n>t){
var e=n;n=t,t=e}if(r||n%1||t%1){var u=Ql();return Hl(n+u*(t-n+Qr("1e-"+((u+"").length-1))),t)}return tu(n,t)}function fa(n){return Qh(Ec(n).toLowerCase())}function ca(n){return n=Ec(n),n&&n.replace(Gt,ve).replace(Dr,"")}function aa(n,t,r){n=Ec(n),t=vu(t);var e=n.length;r=r===X?e:Mr(kc(r),0,e);var u=r;return r-=t.length,r>=0&&n.slice(r,u)==t}function la(n){return n=Ec(n),n&&At.test(n)?n.replace(xt,ge):n}function sa(n){return n=Ec(n),n&&Wt.test(n)?n.replace(St,"\\$&"):n}function ha(n,t,r){n=Ec(n),t=kc(t);
var e=t?V(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return ri(Nl(u),r)+n+ri(Fl(u),r)}function pa(n,t,r){n=Ec(n),t=kc(t);var e=t?V(n):0;return t&&e<t?n+ri(t-e,r):n}function _a(n,t,r){n=Ec(n),t=kc(t);var e=t?V(n):0;return t&&e<t?ri(t-e,r)+n:n}function va(n,t,r){return r||null==t?t=0:t&&(t=+t),Yl(Ec(n).replace(Lt,""),t||0)}function ga(n,t,r){return t=(r?Ui(n,t,r):t===X)?1:kc(t),eu(Ec(n),t)}function ya(){var n=arguments,t=Ec(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function da(n,t,r){return r&&"number"!=typeof r&&Ui(n,t,r)&&(t=r=X),
(r=r===X?Un:r>>>0)?(n=Ec(n),n&&("string"==typeof t||null!=t&&!Ah(t))&&(t=vu(t),!t&&T(n))?Ou(G(n),0,r):n.split(t,r)):[]}function ba(n,t,r){return n=Ec(n),r=null==r?0:Mr(kc(r),0,n.length),t=vu(t),n.slice(r,r+t.length)==t}function wa(n,t,r){var e=Z.templateSettings;r&&Ui(n,t,r)&&(t=X),n=Ec(n),t=Sh({},t,e,li);var u,i,o=Sh({},t.imports,e.imports,li),f=Pc(o),c=E(o,f),a=0,l=t.interpolate||Ht,s="__p += '",h=sl((t.escape||Ht).source+"|"+l.source+"|"+(l===It?Ft:Ht).source+"|"+(t.evaluate||Ht).source+"|$","g"),p="//# sourceURL="+(bl.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zr+"]")+"\n";
n.replace(h,function(t,r,e,o,f,c){return e||(e=o),s+=n.slice(a,c).replace(Jt,U),r&&(u=!0,s+="' +\n__e("+r+") +\n'"),f&&(i=!0,s+="';\n"+f+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),a=c+t.length,t}),s+="';\n";var _=bl.call(t,"variable")&&t.variable;if(_){if(Dt.test(_))throw new fl(un)}else s="with (obj) {\n"+s+"\n}\n";s=(i?s.replace(dt,""):s).replace(bt,"$1").replace(wt,"$1;"),s="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";
var v=Xh(function(){return cl(f,p+"return "+s).apply(X,c)});if(v.source=s,rc(v))throw v;return v}function ma(n){return Ec(n).toLowerCase()}function xa(n){return Ec(n).toUpperCase()}function ja(n,t,r){if(n=Ec(n),n&&(r||t===X))return R(n);if(!n||!(t=vu(t)))return n;var e=G(n),u=G(t);return Ou(e,W(e,u),L(e,u)+1).join("")}function Aa(n,t,r){if(n=Ec(n),n&&(r||t===X))return n.slice(0,H(n)+1);if(!n||!(t=vu(t)))return n;var e=G(n);return Ou(e,0,L(e,G(t))+1).join("")}function ka(n,t,r){if(n=Ec(n),n&&(r||t===X))return n.replace(Lt,"");
if(!n||!(t=vu(t)))return n;var e=G(n);return Ou(e,W(e,G(t))).join("")}function Oa(n,t){var r=An,e=kn;if(fc(t)){var u="separator"in t?t.separator:u;r="length"in t?kc(t.length):r,e="omission"in t?vu(t.omission):e}n=Ec(n);var i=n.length;if(T(n)){var o=G(n);i=o.length}if(r>=i)return n;var f=r-V(e);if(f<1)return e;var c=o?Ou(o,0,f).join(""):n.slice(0,f);if(u===X)return c+e;if(o&&(f+=c.length-f),Ah(u)){if(n.slice(f).search(u)){var a,l=c;for(u.global||(u=sl(u.source,Ec(Nt.exec(u))+"g")),u.lastIndex=0;a=u.exec(l);)var s=a.index;
c=c.slice(0,s===X?f:s)}}else if(n.indexOf(vu(u),f)!=f){var h=c.lastIndexOf(u);h>-1&&(c=c.slice(0,h))}return c+e}function Ia(n){return n=Ec(n),n&&jt.test(n)?n.replace(mt,ye):n}function Ra(n,t,r){return n=Ec(n),t=r?X:t,t===X?$(n)?Q(n):_(n):n.match(t)||[]}function za(t){var r=null==t?0:t.length,e=mi();return t=r?c(t,function(n){if("function"!=typeof n[1])throw new pl(en);return[e(n[0]),n[1]]}):[],uu(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})}function Ea(n){
return Nr(Fr(n,an))}function Sa(n){return function(){return n}}function Wa(n,t){return null==n||n!==n?t:n}function La(n){return n}function Ca(n){return De("function"==typeof n?n:Fr(n,an))}function Ua(n){return qe(Fr(n,an))}function Ba(n,t){return Ze(n,Fr(t,an))}function Ta(n,t,e){var u=Pc(t),i=fe(t,u);null!=e||fc(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=fe(t,Pc(t)));var o=!(fc(e)&&"chain"in e&&!e.chain),f=uc(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;
if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Tu(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function $a(){return re._===this&&(re._=Al),this}function Da(){}function Ma(n){return n=kc(n),uu(function(t){return Ge(t,n)})}function Fa(n){return Bi(n)?m(no(n)):Qe(n)}function Na(n){return function(t){return null==n?X:_e(n,t)}}function Pa(){return[]}function qa(){return!1}function Za(){return{}}function Ka(){return"";
}function Va(){return!0}function Ga(n,t){if(n=kc(n),n<1||n>Wn)return[];var r=Un,e=Hl(n,Un);t=mi(t),n-=Un;for(var u=O(e,t);++r<n;)t(r);return u}function Ha(n){return bh(n)?c(n,no):bc(n)?[n]:Tu(Cs(Ec(n)))}function Ja(n){var t=++wl;return Ec(n)+t}function Ya(n){return n&&n.length?Yr(n,La,me):X}function Qa(n,t){return n&&n.length?Yr(n,mi(t,2),me):X}function Xa(n){return w(n,La)}function nl(n,t){return w(n,mi(t,2))}function tl(n){return n&&n.length?Yr(n,La,Ne):X}function rl(n,t){return n&&n.length?Yr(n,mi(t,2),Ne):X;
}function el(n){return n&&n.length?k(n,La):0}function ul(n,t){return n&&n.length?k(n,mi(t,2)):0}x=null==x?re:be.defaults(re.Object(),x,be.pick(re,qr));var il=x.Array,ol=x.Date,fl=x.Error,cl=x.Function,al=x.Math,ll=x.Object,sl=x.RegExp,hl=x.String,pl=x.TypeError,_l=il.prototype,vl=cl.prototype,gl=ll.prototype,yl=x["__core-js_shared__"],dl=vl.toString,bl=gl.hasOwnProperty,wl=0,ml=function(){var n=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),xl=gl.toString,jl=dl.call(ll),Al=re._,kl=sl("^"+dl.call(bl).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ol=ie?x.Buffer:X,Il=x.Symbol,Rl=x.Uint8Array,zl=Ol?Ol.allocUnsafe:X,El=F(ll.getPrototypeOf,ll),Sl=ll.create,Wl=gl.propertyIsEnumerable,Ll=_l.splice,Cl=Il?Il.isConcatSpreadable:X,Ul=Il?Il.iterator:X,Bl=Il?Il.toStringTag:X,Tl=function(){
try{var n=Ai(ll,"defineProperty");return n({},"",{}),n}catch(n){}}(),$l=x.clearTimeout!==re.clearTimeout&&x.clearTimeout,Dl=ol&&ol.now!==re.Date.now&&ol.now,Ml=x.setTimeout!==re.setTimeout&&x.setTimeout,Fl=al.ceil,Nl=al.floor,Pl=ll.getOwnPropertySymbols,ql=Ol?Ol.isBuffer:X,Zl=x.isFinite,Kl=_l.join,Vl=F(ll.keys,ll),Gl=al.max,Hl=al.min,Jl=ol.now,Yl=x.parseInt,Ql=al.random,Xl=_l.reverse,ns=Ai(x,"DataView"),ts=Ai(x,"Map"),rs=Ai(x,"Promise"),es=Ai(x,"Set"),us=Ai(x,"WeakMap"),is=Ai(ll,"create"),os=us&&new us,fs={},cs=to(ns),as=to(ts),ls=to(rs),ss=to(es),hs=to(us),ps=Il?Il.prototype:X,_s=ps?ps.valueOf:X,vs=ps?ps.toString:X,gs=function(){
function n(){}return function(t){if(!fc(t))return{};if(Sl)return Sl(t);n.prototype=t;var r=new n;return n.prototype=X,r}}();Z.templateSettings={escape:kt,evaluate:Ot,interpolate:It,variable:"",imports:{_:Z}},Z.prototype=J.prototype,Z.prototype.constructor=Z,Y.prototype=gs(J.prototype),Y.prototype.constructor=Y,Ct.prototype=gs(J.prototype),Ct.prototype.constructor=Ct,Xt.prototype.clear=nr,Xt.prototype.delete=tr,Xt.prototype.get=rr,Xt.prototype.has=er,Xt.prototype.set=ur,ir.prototype.clear=or,ir.prototype.delete=fr,
ir.prototype.get=cr,ir.prototype.has=ar,ir.prototype.set=lr,sr.prototype.clear=hr,sr.prototype.delete=pr,sr.prototype.get=_r,sr.prototype.has=vr,sr.prototype.set=gr,yr.prototype.add=yr.prototype.push=dr,yr.prototype.has=br,wr.prototype.clear=mr,wr.prototype.delete=xr,wr.prototype.get=jr,wr.prototype.has=Ar,wr.prototype.set=kr;var ys=Pu(ue),ds=Pu(oe,!0),bs=qu(),ws=qu(!0),ms=os?function(n,t){return os.set(n,t),n}:La,xs=Tl?function(n,t){return Tl(n,"toString",{configurable:!0,enumerable:!1,value:Sa(t),
writable:!0})}:La,js=uu,As=$l||function(n){return re.clearTimeout(n)},ks=es&&1/P(new es([,-0]))[1]==Sn?function(n){return new es(n)}:Da,Os=os?function(n){return os.get(n)}:Da,Is=Pl?function(n){return null==n?[]:(n=ll(n),i(Pl(n),function(t){return Wl.call(n,t)}))}:Pa,Rs=Pl?function(n){for(var t=[];n;)a(t,Is(n)),n=El(n);return t}:Pa,zs=we;(ns&&zs(new ns(new ArrayBuffer(1)))!=ct||ts&&zs(new ts)!=Gn||rs&&zs(rs.resolve())!=Qn||es&&zs(new es)!=tt||us&&zs(new us)!=it)&&(zs=function(n){var t=we(n),r=t==Yn?n.constructor:X,e=r?to(r):"";
if(e)switch(e){case cs:return ct;case as:return Gn;case ls:return Qn;case ss:return tt;case hs:return it}return t});var Es=yl?uc:qa,Ss=Qi(ms),Ws=Ml||function(n,t){return re.setTimeout(n,t)},Ls=Qi(xs),Cs=Pi(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(Et,function(n,r,e,u){t.push(e?u.replace(Mt,"$1"):r||n)}),t}),Us=uu(function(n,t){return Jf(n)?Hr(n,ee(t,1,Jf,!0)):[]}),Bs=uu(function(n,t){var r=jo(t);return Jf(r)&&(r=X),Jf(n)?Hr(n,ee(t,1,Jf,!0),mi(r,2)):[]}),Ts=uu(function(n,t){
var r=jo(t);return Jf(r)&&(r=X),Jf(n)?Hr(n,ee(t,1,Jf,!0),X,r):[]}),$s=uu(function(n){var t=c(n,ju);return t.length&&t[0]===n[0]?ke(t):[]}),Ds=uu(function(n){var t=jo(n),r=c(n,ju);return t===jo(r)?t=X:r.pop(),r.length&&r[0]===n[0]?ke(r,mi(t,2)):[]}),Ms=uu(function(n){var t=jo(n),r=c(n,ju);return t="function"==typeof t?t:X,t&&r.pop(),r.length&&r[0]===n[0]?ke(r,X,t):[]}),Fs=uu(Oo),Ns=gi(function(n,t){var r=null==n?0:n.length,e=Tr(n,t);return nu(n,c(t,function(n){return Ci(n,r)?+n:n}).sort(Lu)),e}),Ps=uu(function(n){
return gu(ee(n,1,Jf,!0))}),qs=uu(function(n){var t=jo(n);return Jf(t)&&(t=X),gu(ee(n,1,Jf,!0),mi(t,2))}),Zs=uu(function(n){var t=jo(n);return t="function"==typeof t?t:X,gu(ee(n,1,Jf,!0),X,t)}),Ks=uu(function(n,t){return Jf(n)?Hr(n,t):[]}),Vs=uu(function(n){return mu(i(n,Jf))}),Gs=uu(function(n){var t=jo(n);return Jf(t)&&(t=X),mu(i(n,Jf),mi(t,2))}),Hs=uu(function(n){var t=jo(n);return t="function"==typeof t?t:X,mu(i(n,Jf),X,t)}),Js=uu(Go),Ys=uu(function(n){var t=n.length,r=t>1?n[t-1]:X;return r="function"==typeof r?(n.pop(),
r):X,Ho(n,r)}),Qs=gi(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Ct&&Ci(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:nf,args:[u],thisArg:X}),new Y(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(X),n})):this.thru(u)}),Xs=Fu(function(n,t,r){bl.call(n,r)?++n[r]:Br(n,r,1)}),nh=Ju(ho),th=Ju(po),rh=Fu(function(n,t,r){bl.call(n,r)?n[r].push(t):Br(n,r,[t])}),eh=uu(function(t,r,e){var u=-1,i="function"==typeof r,o=Hf(t)?il(t.length):[];
return ys(t,function(t){o[++u]=i?n(r,t,e):Ie(t,r,e)}),o}),uh=Fu(function(n,t,r){Br(n,r,t)}),ih=Fu(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),oh=uu(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Ui(n,t[0],t[1])?t=[]:r>2&&Ui(t[0],t[1],t[2])&&(t=[t[0]]),He(n,ee(t,1),[])}),fh=Dl||function(){return re.Date.now()},ch=uu(function(n,t,r){var e=_n;if(r.length){var u=N(r,wi(ch));e|=bn}return ai(n,e,t,r,u)}),ah=uu(function(n,t,r){var e=_n|vn;if(r.length){var u=N(r,wi(ah));e|=bn;
}return ai(t,e,n,r,u)}),lh=uu(function(n,t){return Gr(n,1,t)}),sh=uu(function(n,t,r){return Gr(n,Ic(t)||0,r)});Cf.Cache=sr;var hh=js(function(t,r){r=1==r.length&&bh(r[0])?c(r[0],z(mi())):c(ee(r,1),z(mi()));var e=r.length;return uu(function(u){for(var i=-1,o=Hl(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),ph=uu(function(n,t){return ai(n,bn,X,t,N(t,wi(ph)))}),_h=uu(function(n,t){return ai(n,wn,X,t,N(t,wi(_h)))}),vh=gi(function(n,t){return ai(n,xn,X,X,X,t)}),gh=ii(me),yh=ii(function(n,t){
return n>=t}),dh=Re(function(){return arguments}())?Re:function(n){return cc(n)&&bl.call(n,"callee")&&!Wl.call(n,"callee")},bh=il.isArray,wh=ce?z(ce):ze,mh=ql||qa,xh=ae?z(ae):Ee,jh=le?z(le):Le,Ah=se?z(se):Be,kh=he?z(he):Te,Oh=pe?z(pe):$e,Ih=ii(Ne),Rh=ii(function(n,t){return n<=t}),zh=Nu(function(n,t){if(Mi(t)||Hf(t))return $u(t,Pc(t),n),X;for(var r in t)bl.call(t,r)&&Sr(n,r,t[r])}),Eh=Nu(function(n,t){$u(t,qc(t),n)}),Sh=Nu(function(n,t,r,e){$u(t,qc(t),n,e)}),Wh=Nu(function(n,t,r,e){$u(t,Pc(t),n,e);
}),Lh=gi(Tr),Ch=uu(function(n,t){n=ll(n);var r=-1,e=t.length,u=e>2?t[2]:X;for(u&&Ui(t[0],t[1],u)&&(e=1);++r<e;)for(var i=t[r],o=qc(i),f=-1,c=o.length;++f<c;){var a=o[f],l=n[a];(l===X||Gf(l,gl[a])&&!bl.call(n,a))&&(n[a]=i[a])}return n}),Uh=uu(function(t){return t.push(X,si),n(Mh,X,t)}),Bh=Xu(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=xl.call(t)),n[t]=r},Sa(La)),Th=Xu(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=xl.call(t)),bl.call(n,t)?n[t].push(r):n[t]=[r]},mi),$h=uu(Ie),Dh=Nu(function(n,t,r){
Ke(n,t,r)}),Mh=Nu(function(n,t,r,e){Ke(n,t,r,e)}),Fh=gi(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=ku(t,n),e||(e=t.length>1),t}),$u(n,di(n),r),e&&(r=Fr(r,an|ln|sn,hi));for(var u=t.length;u--;)yu(r,t[u]);return r}),Nh=gi(function(n,t){return null==n?{}:Je(n,t)}),Ph=ci(Pc),qh=ci(qc),Zh=Vu(function(n,t,r){return t=t.toLowerCase(),n+(r?fa(t):t)}),Kh=Vu(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Vh=Vu(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Gh=Ku("toLowerCase"),Hh=Vu(function(n,t,r){
return n+(r?"_":"")+t.toLowerCase()}),Jh=Vu(function(n,t,r){return n+(r?" ":"")+Qh(t)}),Yh=Vu(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Qh=Ku("toUpperCase"),Xh=uu(function(t,r){try{return n(t,X,r)}catch(n){return rc(n)?n:new fl(n)}}),np=gi(function(n,t){return r(t,function(t){t=no(t),Br(n,t,ch(n[t],n))}),n}),tp=Yu(),rp=Yu(!0),ep=uu(function(n,t){return function(r){return Ie(r,n,t)}}),up=uu(function(n,t){return function(r){return Ie(n,r,t)}}),ip=ti(c),op=ti(u),fp=ti(h),cp=ui(),ap=ui(!0),lp=ni(function(n,t){
return n+t},0),sp=fi("ceil"),hp=ni(function(n,t){return n/t},1),pp=fi("floor"),_p=ni(function(n,t){return n*t},1),vp=fi("round"),gp=ni(function(n,t){return n-t},0);return Z.after=If,Z.ary=Rf,Z.assign=zh,Z.assignIn=Eh,Z.assignInWith=Sh,Z.assignWith=Wh,Z.at=Lh,Z.before=zf,Z.bind=ch,Z.bindAll=np,Z.bindKey=ah,Z.castArray=Nf,Z.chain=Qo,Z.chunk=uo,Z.compact=io,Z.concat=oo,Z.cond=za,Z.conforms=Ea,Z.constant=Sa,Z.countBy=Xs,Z.create=Sc,Z.curry=Ef,Z.curryRight=Sf,Z.debounce=Wf,Z.defaults=Ch,Z.defaultsDeep=Uh,
Z.defer=lh,Z.delay=sh,Z.difference=Us,Z.differenceBy=Bs,Z.differenceWith=Ts,Z.drop=fo,Z.dropRight=co,Z.dropRightWhile=ao,Z.dropWhile=lo,Z.fill=so,Z.filter=lf,Z.flatMap=sf,Z.flatMapDeep=hf,Z.flatMapDepth=pf,Z.flatten=_o,Z.flattenDeep=vo,Z.flattenDepth=go,Z.flip=Lf,Z.flow=tp,Z.flowRight=rp,Z.fromPairs=yo,Z.functions=$c,Z.functionsIn=Dc,Z.groupBy=rh,Z.initial=mo,Z.intersection=$s,Z.intersectionBy=Ds,Z.intersectionWith=Ms,Z.invert=Bh,Z.invertBy=Th,Z.invokeMap=eh,Z.iteratee=Ca,Z.keyBy=uh,Z.keys=Pc,Z.keysIn=qc,
Z.map=yf,Z.mapKeys=Zc,Z.mapValues=Kc,Z.matches=Ua,Z.matchesProperty=Ba,Z.memoize=Cf,Z.merge=Dh,Z.mergeWith=Mh,Z.method=ep,Z.methodOf=up,Z.mixin=Ta,Z.negate=Uf,Z.nthArg=Ma,Z.omit=Fh,Z.omitBy=Vc,Z.once=Bf,Z.orderBy=df,Z.over=ip,Z.overArgs=hh,Z.overEvery=op,Z.overSome=fp,Z.partial=ph,Z.partialRight=_h,Z.partition=ih,Z.pick=Nh,Z.pickBy=Gc,Z.property=Fa,Z.propertyOf=Na,Z.pull=Fs,Z.pullAll=Oo,Z.pullAllBy=Io,Z.pullAllWith=Ro,Z.pullAt=Ns,Z.range=cp,Z.rangeRight=ap,Z.rearg=vh,Z.reject=mf,Z.remove=zo,Z.rest=Tf,
Z.reverse=Eo,Z.sampleSize=jf,Z.set=Jc,Z.setWith=Yc,Z.shuffle=Af,Z.slice=So,Z.sortBy=oh,Z.sortedUniq=$o,Z.sortedUniqBy=Do,Z.split=da,Z.spread=$f,Z.tail=Mo,Z.take=Fo,Z.takeRight=No,Z.takeRightWhile=Po,Z.takeWhile=qo,Z.tap=Xo,Z.throttle=Df,Z.thru=nf,Z.toArray=jc,Z.toPairs=Ph,Z.toPairsIn=qh,Z.toPath=Ha,Z.toPlainObject=Rc,Z.transform=Qc,Z.unary=Mf,Z.union=Ps,Z.unionBy=qs,Z.unionWith=Zs,Z.uniq=Zo,Z.uniqBy=Ko,Z.uniqWith=Vo,Z.unset=Xc,Z.unzip=Go,Z.unzipWith=Ho,Z.update=na,Z.updateWith=ta,Z.values=ra,Z.valuesIn=ea,
Z.without=Ks,Z.words=Ra,Z.wrap=Ff,Z.xor=Vs,Z.xorBy=Gs,Z.xorWith=Hs,Z.zip=Js,Z.zipObject=Jo,Z.zipObjectDeep=Yo,Z.zipWith=Ys,Z.entries=Ph,Z.entriesIn=qh,Z.extend=Eh,Z.extendWith=Sh,Ta(Z,Z),Z.add=lp,Z.attempt=Xh,Z.camelCase=Zh,Z.capitalize=fa,Z.ceil=sp,Z.clamp=ua,Z.clone=Pf,Z.cloneDeep=Zf,Z.cloneDeepWith=Kf,Z.cloneWith=qf,Z.conformsTo=Vf,Z.deburr=ca,Z.defaultTo=Wa,Z.divide=hp,Z.endsWith=aa,Z.eq=Gf,Z.escape=la,Z.escapeRegExp=sa,Z.every=af,Z.find=nh,Z.findIndex=ho,Z.findKey=Wc,Z.findLast=th,Z.findLastIndex=po,
Z.findLastKey=Lc,Z.floor=pp,Z.forEach=_f,Z.forEachRight=vf,Z.forIn=Cc,Z.forInRight=Uc,Z.forOwn=Bc,Z.forOwnRight=Tc,Z.get=Mc,Z.gt=gh,Z.gte=yh,Z.has=Fc,Z.hasIn=Nc,Z.head=bo,Z.identity=La,Z.includes=gf,Z.indexOf=wo,Z.inRange=ia,Z.invoke=$h,Z.isArguments=dh,Z.isArray=bh,Z.isArrayBuffer=wh,Z.isArrayLike=Hf,Z.isArrayLikeObject=Jf,Z.isBoolean=Yf,Z.isBuffer=mh,Z.isDate=xh,Z.isElement=Qf,Z.isEmpty=Xf,Z.isEqual=nc,Z.isEqualWith=tc,Z.isError=rc,Z.isFinite=ec,Z.isFunction=uc,Z.isInteger=ic,Z.isLength=oc,Z.isMap=jh,
Z.isMatch=ac,Z.isMatchWith=lc,Z.isNaN=sc,Z.isNative=hc,Z.isNil=_c,Z.isNull=pc,Z.isNumber=vc,Z.isObject=fc,Z.isObjectLike=cc,Z.isPlainObject=gc,Z.isRegExp=Ah,Z.isSafeInteger=yc,Z.isSet=kh,Z.isString=dc,Z.isSymbol=bc,Z.isTypedArray=Oh,Z.isUndefined=wc,Z.isWeakMap=mc,Z.isWeakSet=xc,Z.join=xo,Z.kebabCase=Kh,Z.last=jo,Z.lastIndexOf=Ao,Z.lowerCase=Vh,Z.lowerFirst=Gh,Z.lt=Ih,Z.lte=Rh,Z.max=Ya,Z.maxBy=Qa,Z.mean=Xa,Z.meanBy=nl,Z.min=tl,Z.minBy=rl,Z.stubArray=Pa,Z.stubFalse=qa,Z.stubObject=Za,Z.stubString=Ka,
Z.stubTrue=Va,Z.multiply=_p,Z.nth=ko,Z.noConflict=$a,Z.noop=Da,Z.now=fh,Z.pad=ha,Z.padEnd=pa,Z.padStart=_a,Z.parseInt=va,Z.random=oa,Z.reduce=bf,Z.reduceRight=wf,Z.repeat=ga,Z.replace=ya,Z.result=Hc,Z.round=vp,Z.runInContext=p,Z.sample=xf,Z.size=kf,Z.snakeCase=Hh,Z.some=Of,Z.sortedIndex=Wo,Z.sortedIndexBy=Lo,Z.sortedIndexOf=Co,Z.sortedLastIndex=Uo,Z.sortedLastIndexBy=Bo,Z.sortedLastIndexOf=To,Z.startCase=Jh,Z.startsWith=ba,Z.subtract=gp,Z.sum=el,Z.sumBy=ul,Z.template=wa,Z.times=Ga,Z.toFinite=Ac,Z.toInteger=kc,
Z.toLength=Oc,Z.toLower=ma,Z.toNumber=Ic,Z.toSafeInteger=zc,Z.toString=Ec,Z.toUpper=xa,Z.trim=ja,Z.trimEnd=Aa,Z.trimStart=ka,Z.truncate=Oa,Z.unescape=Ia,Z.uniqueId=Ja,Z.upperCase=Yh,Z.upperFirst=Qh,Z.each=_f,Z.eachRight=vf,Z.first=bo,Ta(Z,function(){var n={};return ue(Z,function(t,r){bl.call(Z.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),Z.VERSION=nn,r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Z[n].placeholder=Z}),r(["drop","take"],function(n,t){Ct.prototype[n]=function(r){
r=r===X?1:Gl(kc(r),0);var e=this.__filtered__&&!t?new Ct(this):this.clone();return e.__filtered__?e.__takeCount__=Hl(r,e.__takeCount__):e.__views__.push({size:Hl(r,Un),type:n+(e.__dir__<0?"Right":"")}),e},Ct.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),r(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==Rn||r==En;Ct.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:mi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r(["head","last"],function(n,t){
var r="take"+(t?"Right":"");Ct.prototype[n]=function(){return this[r](1).value()[0]}}),r(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Ct.prototype[n]=function(){return this.__filtered__?new Ct(this):this[r](1)}}),Ct.prototype.compact=function(){return this.filter(La)},Ct.prototype.find=function(n){return this.filter(n).head()},Ct.prototype.findLast=function(n){return this.reverse().find(n)},Ct.prototype.invokeMap=uu(function(n,t){return"function"==typeof n?new Ct(this):this.map(function(r){
return Ie(r,n,t)})}),Ct.prototype.reject=function(n){return this.filter(Uf(mi(n)))},Ct.prototype.slice=function(n,t){n=kc(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Ct(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==X&&(t=kc(t),r=t<0?r.dropRight(-t):r.take(t-n)),r)},Ct.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Ct.prototype.toArray=function(){return this.take(Un)},ue(Ct.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=Z[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);
u&&(Z.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Ct,c=o[0],l=f||bh(t),s=function(n){var t=u.apply(Z,a([n],o));return e&&h?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(f=l=!1);var h=this.__chain__,p=!!this.__actions__.length,_=i&&!h,v=f&&!p;if(!i&&l){t=v?t:new Ct(this);var g=n.apply(t,o);return g.__actions__.push({func:nf,args:[s],thisArg:X}),new Y(g,h)}return _&&v?n.apply(this,o):(g=this.thru(s),_?e?g.value()[0]:g.value():g)})}),r(["pop","push","shift","sort","splice","unshift"],function(n){
var t=_l[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);Z.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(bh(u)?u:[],n)}return this[r](function(r){return t.apply(bh(r)?r:[],n)})}}),ue(Ct.prototype,function(n,t){var r=Z[t];if(r){var e=r.name+"";bl.call(fs,e)||(fs[e]=[]),fs[e].push({name:t,func:r})}}),fs[Qu(X,vn).name]=[{name:"wrapper",func:X}],Ct.prototype.clone=$t,Ct.prototype.reverse=Yt,Ct.prototype.value=Qt,Z.prototype.at=Qs,
Z.prototype.chain=tf,Z.prototype.commit=rf,Z.prototype.next=ef,Z.prototype.plant=of,Z.prototype.reverse=ff,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=cf,Z.prototype.first=Z.prototype.head,Ul&&(Z.prototype[Ul]=uf),Z},be=de();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(re._=be,define(function(){return be})):ue?((ue.exports=be)._=be,ee._=be):re._=be}).call(this);
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('mediaelement-plugin-airplay', function (Y) {SM.currentModule = 'mediaelement-plugin-airplay';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/** @module mediaelement-plugin-airplay */

/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!(function e(t,i,a) {function r(l,o) {if (!i[l]) {if (!t[l]) {var s='function'===typeof require&&require;if (!o&&s) {return s(l,!0);} if (n) {return n(l,!0);} var d=new Error("Cannot find module '"+l+"'");throw (d.code='MODULE_NOT_FOUND', d);} var c=i[l]={exports:{}};t[l][0].call(c.exports,function (e) {var i=t[l][1][e];return r(i||e);},c,c.exports,e,t,i,a);} return i[l].exports;} for (var n='function'===typeof require&&require,l=0;l<a.length;l++) {r(a[l]);} return r;}({1:[function (e,t,i) {'use strict';Object.assign(mejs.MepDefaults,{airPlayText:null}),Object.assign(MediaElementPlayer.prototype,{buildairplay:function () {if (window.WebKitPlaybackTargetAvailabilityEvent) {var e=this,t=mejs.Utils.isString(e.options.airPlayText)?e.options.airPlayText:'AirPlay',i=document.createElement('div');i.className=e.options.classPrefix+'button '+e.options.classPrefix+'airplay-button',i.innerHTML='<button type="button" aria-controls="'+e.id+'" title="'+t+'" aria-label="'+t+'" tabindex="0"></button>',i.addEventListener('click',function () {e.media.originalNode.webkitShowPlaybackTargetPicker();});var a=e.media.originalNode.getAttribute('x-webkit-airplay');a&&'allow'===a||e.media.originalNode.setAttribute('x-webkit-airplay','allow'),e.media.originalNode.addEventListener('webkitcurrentplaybacktargetiswirelesschanged',function () {var t=e.media.originalNode.webkitCurrentPlaybackTargetIsWireless?'Started':'Stopped',a=e.media.originalNode.webkitCurrentPlaybackTargetIsWireless?'active':'',r=i.querySelector('button'),n=mejs.Utils.createEvent('airplay'+t,e.media);e.media.dispatchEvent(n),'active'===a?mejs.Utils.addClass(r,'active'):mejs.Utils.removeClass(r,'active');}),e.media.originalNode.addEventListener('webkitplaybacktargetavailabilitychanged',function (t) {'available'===t.availability&&e.addControlElement(i,'airplay');});}}});},{}]},{},[1]));
}());SM.currentModule = null;}, '', {"requires":["mediaelement"]});
YUI.add('mediaelement', function (Y) {SM.currentModule = 'mediaelement';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function r(a,s,l){function d(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var o=new Error("Cannot find module '"+n+"'");throw (o.code="MODULE_NOT_FOUND", o)}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return d(t||e)},i,i.exports,r,a,s,l)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,n){},{}],2:[function(i,r,e){(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},o=i(1);"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=o),r.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],3:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,n,t){!function(e){var t=setTimeout;function o(){}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function i(n,o){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var e=1===n._state?o.onFulfilled:o.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void s(o.promise,e)}a(o.promise,t)}else(1===n._state?a:s)(o.promise,n._value)})):n._deferreds.push(o)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void d((o=n,i=e,function(){o.apply(i,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}var o,i}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return i(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},r.all=function(e){var s=Array.prototype.slice.call(e);return new r(function(o,i){if(0===s.length)return o([]);var r=s.length;function a(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){a(t,e)},i)}s[t]=e,0==--r&&o(s)}catch(e){i(e)}}for(var e=0;e<s.length;e++)a(e,s[e])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(i){return new r(function(e,t){for(var n=0,o=i.length;n<o;n++)i[n].then(e,t)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==n&&n.exports?n.exports=r:e.Promise||(e.Promise=r)}(this)},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e(7),r=(o=i)&&o.__esModule?o:{default:o},s=e(15),l=e(27);var d={lang:"en",en:s.EN,language:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(null!=t&&t.length){if("string"!=typeof t[0])throw new TypeError("Language code must be a string value");if(!/^[a-z]{2,3}((\-|_)[a-z]{2})?$/i.test(t[0]))throw new TypeError("Language code must have format 2-3 letters and. optionally, hyphen, underscore followed by 2 more letters");d.lang=t[0],void 0===d[t[0]]?(t[1]=null!==t[1]&&void 0!==t[1]&&"object"===a(t[1])?t[1]:{},d[t[0]]=(0,l.isObjectEmpty)(t[1])?s.EN:t[1]):null!==t[1]&&void 0!==t[1]&&"object"===a(t[1])&&(d[t[0]]=t[1])}return d.lang},t:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e&&e.length){var n=void 0,o=void 0,i=d.language(),r=function(e,t,n){return"object"!==(void 0===e?"undefined":a(e))||"number"!=typeof t||"number"!=typeof n?e:[function(){return arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 0===(arguments.length<=0?void 0:arguments[0])||1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:0!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])||11===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])||12===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2<(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||0<(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<=4?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%100==1?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])%100==2?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])%100==3||(arguments.length<=0?void 0:arguments[0])%100==4?arguments.length<=4?void 0:arguments[4]:arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2<(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<7?arguments.length<=3?void 0:arguments[3]:6<(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<11?arguments.length<=4?void 0:arguments[4]:arguments.length<=5?void 0:arguments[5]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:3<=(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<=10?arguments.length<=4?void 0:arguments[4]:11<=(arguments.length<=0?void 0:arguments[0])%100?arguments.length<=5?void 0:arguments[5]:arguments.length<=6?void 0:arguments[6]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||1<(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<11?arguments.length<=2?void 0:arguments[2]:10<(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10==2?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 11!==(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])%10==1?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:8!==(arguments.length<=0?void 0:arguments[0])&&11!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:3===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]}][n].apply(null,[t].concat(e))};return void 0!==d[i]&&(n=d[i][e],null!==t&&"number"==typeof t&&(o=d[i]["mejs.plural-form"],n=r.apply(null,[n,t,o]))),!n&&d.en&&(n=d.en[e],null!==t&&"number"==typeof t&&(o=d.en["mejs.plural-form"],n=r.apply(null,[n,t,o]))),n=n||e,null!==t&&"number"==typeof t&&(n=n.replace("%1",t)),(0,l.escapeHTML)(n)}return e}};r.default.i18n=d,"undefined"!=typeof mejsL10n&&r.default.i18n.language(mejsL10n.language,mejsL10n.strings),n.default=d},{15:15,27:27,7:7}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=o(e(3)),j=o(e(2)),I=o(e(7)),M=e(27),O=e(28),D=e(8),R=e(25);function o(e){return e&&e.__esModule?e:{default:e}}var i=function e(t,n,o){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var f=this;o=Array.isArray(o)?o:null,f.defaults={renderers:[],fakeNodeName:"mediaelementwrapper",pluginPath:"build/",shimScriptAccess:"sameDomain"},n=Object.assign(f.defaults,n),f.mediaElement=j.default.createElement(n.fakeNodeName);var i=t,r=!1;if("string"==typeof t?f.mediaElement.originalNode=j.default.getElementById(t):i=(f.mediaElement.originalNode=t).id,void 0===f.mediaElement.originalNode||null===f.mediaElement.originalNode)return null;f.mediaElement.options=n,i=i||"mejs_"+Math.random().toString().slice(2),f.mediaElement.originalNode.setAttribute("id",i+"_from_mejs");var a=f.mediaElement.originalNode.tagName.toLowerCase();-1<["video","audio"].indexOf(a)&&!f.mediaElement.originalNode.getAttribute("preload")&&f.mediaElement.originalNode.setAttribute("preload","none"),f.mediaElement.originalNode.parentNode.insertBefore(f.mediaElement,f.mediaElement.originalNode),f.mediaElement.appendChild(f.mediaElement.originalNode);var s=function(t,e){if("https:"===F.default.location.protocol&&0===t.indexOf("http:")&&R.IS_IOS&&-1<I.default.html5media.mediaTypes.indexOf(e)){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=(F.default.URL||F.default.webkitURL).createObjectURL(this.response);return f.mediaElement.originalNode.setAttribute("src",e),e}return t},n.open("GET",t),n.responseType="blob",n.send()}return t},l=void 0;if(null!==o)l=o;else if(null!==f.mediaElement.originalNode)switch(l=[],f.mediaElement.originalNode.nodeName.toLowerCase()){case"iframe":l.push({type:"",src:f.mediaElement.originalNode.getAttribute("src")});break;case"audio":case"video":var d=f.mediaElement.originalNode.children.length,u=f.mediaElement.originalNode.getAttribute("src");if(u){var p=f.mediaElement.originalNode,m=(0,O.formatType)(u,p.getAttribute("type"));l.push({type:m,src:s(u,m)})}for(var h=0;h<d;h++){var v=f.mediaElement.originalNode.children[h];if("source"===v.tagName.toLowerCase()){var g=v.getAttribute("src"),y=(0,O.formatType)(g,v.getAttribute("type"));l.push({type:y,src:s(g,y)})}}}f.mediaElement.id=i,f.mediaElement.renderers={},f.mediaElement.events={},f.mediaElement.promises=[],f.mediaElement.renderer=null,f.mediaElement.rendererName=null,f.mediaElement.changeRenderer=function(e,t){var n=c,o=2<Object.keys(t[0]).length?t[0]:t[0].src;if(void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&n.mediaElement.renderer.name===e)return n.mediaElement.renderer.pause(),n.mediaElement.renderer.stop&&n.mediaElement.renderer.stop(),n.mediaElement.renderer.show(),n.mediaElement.renderer.setSrc(o),!0;void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&(n.mediaElement.renderer.pause(),n.mediaElement.renderer.stop&&n.mediaElement.renderer.stop(),n.mediaElement.renderer.hide());var i=n.mediaElement.renderers[e],r=null;if(null!=i)return i.show(),i.setSrc(o),n.mediaElement.renderer=i,n.mediaElement.rendererName=e,!0;for(var a=n.mediaElement.options.renderers.length?n.mediaElement.options.renderers:D.renderer.order,s=0,l=a.length;s<l;s++){var d=a[s];if(d===e){r=D.renderer.renderers[d];var u=Object.assign(r.options,n.mediaElement.options);return(i=r.create(n.mediaElement,u,t)).name=e,n.mediaElement.renderers[r.name]=i,n.mediaElement.renderer=i,n.mediaElement.rendererName=e,i.show(),!0}}return!1},f.mediaElement.setSize=function(e,t){void 0!==f.mediaElement.renderer&&null!==f.mediaElement.renderer&&f.mediaElement.renderer.setSize(e,t)},f.mediaElement.generateError=function(e,t){e=e||"",t=Array.isArray(t)?t:[];var n=(0,M.createEvent)("error",f.mediaElement);n.message=e,n.urls=t,f.mediaElement.dispatchEvent(n),r=!0};var E=I.default.html5media.properties,b=I.default.html5media.methods,S=function(t,e,n,o){var i=t[e];Object.defineProperty(t,e,{get:function(){return n.apply(t,[i])},set:function(e){return i=o.apply(t,[e])}})},x=function(e){if("src"!==e){var t=""+e.substring(0,1).toUpperCase()+e.substring(1),n=function(){return void 0!==f.mediaElement.renderer&&null!==f.mediaElement.renderer&&"function"==typeof f.mediaElement.renderer["get"+t]?f.mediaElement.renderer["get"+t]():null},o=function(e){void 0!==f.mediaElement.renderer&&null!==f.mediaElement.renderer&&"function"==typeof f.mediaElement.renderer["set"+t]&&f.mediaElement.renderer["set"+t](e)};S(f.mediaElement,e,n,o),f.mediaElement["get"+t]=n,f.mediaElement["set"+t]=o}},w=function(){return void 0!==f.mediaElement.renderer&&null!==f.mediaElement.renderer?f.mediaElement.renderer.getSrc():null},P=function(e){var t=[];if("string"==typeof e)t.push({src:e,type:e?(0,O.getTypeFromFile)(e):""});else if("object"===(void 0===e?"undefined":L(e))&&void 0!==e.src){var n=(0,O.absolutizeUrl)(e.src),o=e.type,i=Object.assign(e,{src:n,type:""!==o&&null!=o||!n?o:(0,O.getTypeFromFile)(n)});t.push(i)}else if(Array.isArray(e))for(var r=0,a=e.length;r<a;r++){var s=(0,O.absolutizeUrl)(e[r].src),l=e[r].type,d=Object.assign(e[r],{src:s,type:""!==l&&null!=l||!s?l:(0,O.getTypeFromFile)(s)});t.push(d)}var u=D.renderer.select(t,f.mediaElement.options.renderers.length?f.mediaElement.options.renderers:[]),c=void 0;if(f.mediaElement.paused||null==f.mediaElement.src||""===f.mediaElement.src||(f.mediaElement.pause(),c=(0,M.createEvent)("pause",f.mediaElement),f.mediaElement.dispatchEvent(c)),f.mediaElement.originalNode.src=t[0].src||"",null!==u||!t[0].src)return!(null==t[0].src||""===t[0].src)?f.mediaElement.changeRenderer(u.rendererName,t):null;f.mediaElement.generateError("No renderer found",t)},T=function(e,t){try{if("play"!==e||"native_dash"!==f.mediaElement.rendererName&&"native_hls"!==f.mediaElement.rendererName&&"vimeo_iframe"!==f.mediaElement.rendererName)f.mediaElement.renderer[e](t);else{var n=f.mediaElement.renderer[e](t);n&&"function"==typeof n.then&&n.catch(function(){f.mediaElement.paused&&setTimeout(function(){var e=f.mediaElement.renderer.play();void 0!==e&&e.catch(function(){f.mediaElement.renderer.paused||f.mediaElement.renderer.pause()})},150)})}}catch(e){f.mediaElement.generateError(e,l)}},C=function(o){f.mediaElement[o]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return void 0!==f.mediaElement.renderer&&null!==f.mediaElement.renderer&&"function"==typeof f.mediaElement.renderer[o]&&(f.mediaElement.promises.length?Promise.all(f.mediaElement.promises).then(function(){T(o,t)}).catch(function(e){f.mediaElement.generateError(e,l)}):T(o,t)),null}};S(f.mediaElement,"src",w,P),f.mediaElement.getSrc=w,f.mediaElement.setSrc=P;for(var k=0,_=E.length;k<_;k++)x(E[k]);for(var N=0,A=b.length;N<A;N++)C(b[N]);return f.mediaElement.addEventListener=function(e,t){f.mediaElement.events[e]=f.mediaElement.events[e]||[],f.mediaElement.events[e].push(t)},f.mediaElement.removeEventListener=function(e,t){if(!e)return f.mediaElement.events={},!0;var n=f.mediaElement.events[e];if(!n)return!0;if(!t)return f.mediaElement.events[e]=[],!0;for(var o=0;o<n.length;o++)if(n[o]===t)return f.mediaElement.events[e].splice(o,1),!0;return!1},f.mediaElement.dispatchEvent=function(e){var t=f.mediaElement.events[e.type];if(t)for(var n=0;n<t.length;n++)t[n].apply(null,[e])},f.mediaElement.destroy=function(){var e=f.mediaElement.originalNode.cloneNode(!0),t=f.mediaElement.parentElement;e.removeAttribute("id"),e.remove(),f.mediaElement.remove(),t.appendChild(e)},l.length&&(f.mediaElement.src=l),f.mediaElement.promises.length?Promise.all(f.mediaElement.promises).then(function(){f.mediaElement.options.success&&f.mediaElement.options.success(f.mediaElement,f.mediaElement.originalNode)}).catch(function(){r&&f.mediaElement.options.error&&f.mediaElement.options.error(f.mediaElement,f.mediaElement.originalNode)}):(f.mediaElement.options.success&&f.mediaElement.options.success(f.mediaElement,f.mediaElement.originalNode),r&&f.mediaElement.options.error&&f.mediaElement.options.error(f.mediaElement,f.mediaElement.originalNode)),f.mediaElement};F.default.MediaElement=i,I.default.MediaElement=i,n.default=i},{2:2,25:25,27:27,28:28,3:3,7:7,8:8}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=e(3);var r={version:"4.2.16",html5media:{properties:["volume","src","currentTime","muted","duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable","currentSrc","preload","bufferedBytes","bufferedTime","initialTime","startOffsetTime","defaultPlaybackRate","playbackRate","played","autoplay","loop","controls"],readOnlyProperties:["duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable"],methods:["load","play","pause","canPlayType"],events:["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"],mediaTypes:["audio/mp3","audio/ogg","audio/oga","audio/wav","audio/x-wav","audio/wave","audio/x-pn-wav","audio/mpeg","audio/mp4","video/mp4","video/webm","video/ogg","video/ogv"]}};((o=i)&&o.__esModule?o:{default:o}).default.mejs=r,n.default=r},{3:3}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.renderer=void 0;var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e(7),s=(o=a)&&o.__esModule?o:{default:o};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderers={},this.order=[]}return r(e,[{key:"add",value:function(e){if(void 0===e.name)throw new TypeError("renderer must contain at least `name` property");this.renderers[e.name]=e,this.order.push(e.name)}},{key:"select",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=t.length;if(t=t.length?t:this.order,!n){var o=[/^(html5|native)/i,/^flash/i,/iframe$/i],i=function(e){for(var t=0,n=o.length;t<n;t++)if(o[t].test(e))return t;return o.length};t.sort(function(e,t){return i(e)-i(t)})}for(var r=0,a=t.length;r<a;r++){var s=t[r],l=this.renderers[s];if(null!=l)for(var d=0,u=e.length;d<u;d++)if("function"==typeof l.canPlayType&&"string"==typeof e[d].type&&l.canPlayType(e[d].type))return{rendererName:l.name,src:e[d].src}}return null}},{key:"order",set:function(e){if(!Array.isArray(e))throw new TypeError("order must be an array of strings.");this._order=e},get:function(){return this._order}},{key:"renderers",set:function(e){if(null!==e&&"object"!==(void 0===e?"undefined":i(e)))throw new TypeError("renderers must be an array of objects.");this._renderers=e},get:function(){return this._renderers}}]),e}(),d=n.renderer=new l;s.default.Renderers=d},{7:7}],9:[function(e,t,n){"use strict";var f=a(e(3)),p=a(e(2)),i=a(e(5)),o=e(16),r=a(o),m=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e(25)),h=e(27),v=e(26),g=e(28);function a(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.config,{usePluginFullScreen:!0,fullscreenText:null,useFakeFullscreen:!1}),Object.assign(r.default.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,isPluginClickThroughCreated:!1,fullscreenMode:"",containerSizeTimeout:null,buildfullscreen:function(n){if(n.isVideo){n.isInIframe=f.default.location!==f.default.parent.location,n.detectFullscreenMode();var o=this,e=(0,h.isString)(o.options.fullscreenText)?o.options.fullscreenText:i.default.t("mejs.fullscreen"),t=p.default.createElement("div");if(t.className=o.options.classPrefix+"button "+o.options.classPrefix+"fullscreen-button",t.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+e+'" aria-label="'+e+'" tabindex="0"></button>',o.addControlElement(t,"fullscreen"),t.addEventListener("click",function(){m.HAS_TRUE_NATIVE_FULLSCREEN&&m.IS_FULLSCREEN||n.isFullScreen?n.exitFullScreen():n.enterFullScreen()}),n.fullscreenBtn=t,o.options.keyActions.push({keys:[70],action:function(e,t,n,o){o.ctrlKey||void 0!==e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}),o.exitFullscreenCallback=function(e){var t=e.which||e.keyCode||0;o.options.enableKeyboard&&27===t&&(m.HAS_TRUE_NATIVE_FULLSCREEN&&m.IS_FULLSCREEN||o.isFullScreen)&&n.exitFullScreen()},o.globalBind("keydown",o.exitFullscreenCallback),o.normalHeight=0,o.normalWidth=0,m.HAS_TRUE_NATIVE_FULLSCREEN){n.globalBind(m.FULLSCREEN_EVENT_NAME,function(){n.isFullScreen&&(m.isFullScreen()?(n.isNativeFullScreen=!0,n.setControlsSize()):(n.isNativeFullScreen=!1,n.exitFullScreen()))})}}},cleanfullscreen:function(e){e.exitFullScreen(),e.globalUnbind("keydown",e.exitFullscreenCallback)},detectFullscreenMode:function(){var e=null!==this.media.rendererName&&/(native|html5)/i.test(this.media.rendererName),t="";return m.HAS_TRUE_NATIVE_FULLSCREEN&&e?t="native-native":m.HAS_TRUE_NATIVE_FULLSCREEN&&!e?t="plugin-native":this.usePluginFullScreen&&m.SUPPORT_POINTER_EVENTS&&(t="plugin-click"),this.fullscreenMode=t},enterFullScreen:function(){var o=this,e=null!==o.media.rendererName&&/(html5|native)/i.test(o.media.rendererName),t=getComputedStyle(o.getElement(o.container));if(o.isVideo)if(!1===o.options.useFakeFullscreen&&m.IS_IOS&&m.HAS_IOS_FULLSCREEN&&"function"==typeof o.media.originalNode.webkitEnterFullscreen&&o.media.originalNode.canPlayType((0,g.getTypeFromFile)(o.media.getSrc())))o.media.originalNode.webkitEnterFullscreen();else{if((0,v.addClass)(p.default.documentElement,o.options.classPrefix+"fullscreen"),(0,v.addClass)(o.getElement(o.container),o.options.classPrefix+"container-fullscreen"),o.normalHeight=parseFloat(t.height),o.normalWidth=parseFloat(t.width),"native-native"!==o.fullscreenMode&&"plugin-native"!==o.fullscreenMode||(m.requestFullScreen(o.getElement(o.container)),o.isInIframe&&setTimeout(function e(){if(o.isNativeFullScreen){var t=f.default.innerWidth||p.default.documentElement.clientWidth||p.default.body.clientWidth,n=screen.width;.002*n<Math.abs(n-t)?o.exitFullScreen():setTimeout(e,500)}},1e3)),o.getElement(o.container).style.width="100%",o.getElement(o.container).style.height="100%",o.containerSizeTimeout=setTimeout(function(){o.getElement(o.container).style.width="100%",o.getElement(o.container).style.height="100%",o.setControlsSize()},500),e)o.node.style.width="100%",o.node.style.height="100%";else for(var n=o.getElement(o.container).querySelectorAll("embed, object, video"),i=n.length,r=0;r<i;r++)n[r].style.width="100%",n[r].style.height="100%";o.options.setDimensions&&"function"==typeof o.media.setSize&&o.media.setSize(screen.width,screen.height);for(var a=o.getElement(o.layers).children,s=a.length,l=0;l<s;l++)a[l].style.width="100%",a[l].style.height="100%";o.fullscreenBtn&&((0,v.removeClass)(o.fullscreenBtn,o.options.classPrefix+"fullscreen"),(0,v.addClass)(o.fullscreenBtn,o.options.classPrefix+"unfullscreen")),o.setControlsSize(),o.isFullScreen=!0;var d=Math.min(screen.width/o.width,screen.height/o.height),u=o.getElement(o.container).querySelector("."+o.options.classPrefix+"captions-text");u&&(u.style.fontSize=100*d+"%",u.style.lineHeight="normal",o.getElement(o.container).querySelector("."+o.options.classPrefix+"captions-position").style.bottom=(screen.height-o.normalHeight)/2-o.getElement(o.controls).offsetHeight/2+d+15+"px");var c=(0,h.createEvent)("enteredfullscreen",o.getElement(o.container));o.getElement(o.container).dispatchEvent(c)}},exitFullScreen:function(){var e=this,t=null!==e.media.rendererName&&/(native|html5)/i.test(e.media.rendererName);if(e.isVideo){if(clearTimeout(e.containerSizeTimeout),m.HAS_TRUE_NATIVE_FULLSCREEN&&(m.IS_FULLSCREEN||e.isFullScreen)&&m.cancelFullScreen(),(0,v.removeClass)(p.default.documentElement,e.options.classPrefix+"fullscreen"),(0,v.removeClass)(e.getElement(e.container),e.options.classPrefix+"container-fullscreen"),e.options.setDimensions){if(e.getElement(e.container).style.width=e.normalWidth+"px",e.getElement(e.container).style.height=e.normalHeight+"px",t)e.node.style.width=e.normalWidth+"px",e.node.style.height=e.normalHeight+"px";else for(var n=e.getElement(e.container).querySelectorAll("embed, object, video"),o=n.length,i=0;i<o;i++)n[i].style.width=e.normalWidth+"px",n[i].style.height=e.normalHeight+"px";"function"==typeof e.media.setSize&&e.media.setSize(e.normalWidth,e.normalHeight);for(var r=e.getElement(e.layers).children,a=r.length,s=0;s<a;s++)r[s].style.width=e.normalWidth+"px",r[s].style.height=e.normalHeight+"px"}e.fullscreenBtn&&((0,v.removeClass)(e.fullscreenBtn,e.options.classPrefix+"unfullscreen"),(0,v.addClass)(e.fullscreenBtn,e.options.classPrefix+"fullscreen")),e.setControlsSize(),e.isFullScreen=!1;var l=e.getElement(e.container).querySelector("."+e.options.classPrefix+"captions-text");l&&(l.style.fontSize="",l.style.lineHeight="",e.getElement(e.container).querySelector("."+e.options.classPrefix+"captions-position").style.bottom="");var d=(0,h.createEvent)("exitedfullscreen",e.getElement(e.container));e.getElement(e.container).dispatchEvent(d)}}})},{16:16,2:2,25:25,26:26,27:27,28:28,3:3,5:5}],10:[function(e,t,n){"use strict";var c=r(e(2)),o=e(16),i=r(o),f=r(e(5)),p=e(27),m=e(26);function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.config,{playText:null,pauseText:null}),Object.assign(i.default.prototype,{buildplaypause:function(e,t,n,o){var i=this,r=i.options,a=(0,p.isString)(r.playText)?r.playText:f.default.t("mejs.play"),s=(0,p.isString)(r.pauseText)?r.pauseText:f.default.t("mejs.pause"),l=c.default.createElement("div");l.className=i.options.classPrefix+"button "+i.options.classPrefix+"playpause-button "+i.options.classPrefix+"play",l.innerHTML='<button type="button" aria-controls="'+i.id+'" title="'+a+'" aria-label="'+s+'" tabindex="0"></button>',l.addEventListener("click",function(){i.paused?i.play():i.pause()});var d=l.querySelector("button");function u(e){"play"===e?((0,m.removeClass)(l,i.options.classPrefix+"play"),(0,m.removeClass)(l,i.options.classPrefix+"replay"),(0,m.addClass)(l,i.options.classPrefix+"pause"),d.setAttribute("title",s),d.setAttribute("aria-label",s)):((0,m.removeClass)(l,i.options.classPrefix+"pause"),(0,m.removeClass)(l,i.options.classPrefix+"replay"),(0,m.addClass)(l,i.options.classPrefix+"play"),d.setAttribute("title",a),d.setAttribute("aria-label",a))}i.addControlElement(l,"playpause"),u("pse"),o.addEventListener("loadedmetadata",function(){-1===o.rendererName.indexOf("flash")&&u("pse")}),o.addEventListener("play",function(){u("play")}),o.addEventListener("playing",function(){u("play")}),o.addEventListener("pause",function(){u("pse")}),o.addEventListener("ended",function(){e.options.loop||((0,m.removeClass)(l,i.options.classPrefix+"pause"),(0,m.removeClass)(l,i.options.classPrefix+"play"),(0,m.addClass)(l,i.options.classPrefix+"replay"),d.setAttribute("title",a),d.setAttribute("aria-label",a))})}})},{16:16,2:2,26:26,27:27,5:5}],11:[function(e,t,n){"use strict";var p=r(e(2)),o=e(16),i=r(o),m=r(e(5)),y=e(25),E=e(30),b=e(26);function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.config,{enableProgressTooltip:!0,useSmoothHover:!0,forceLive:!1}),Object.assign(i.default.prototype,{buildprogress:function(h,s,e,d){var u=0,v=!1,c=!1,g=this,t=h.options.autoRewind,n=h.options.enableProgressTooltip?'<span class="'+g.options.classPrefix+'time-float"><span class="'+g.options.classPrefix+'time-float-current">00:00</span><span class="'+g.options.classPrefix+'time-float-corner"></span></span>':"",o=p.default.createElement("div");o.className=g.options.classPrefix+"time-rail",o.innerHTML='<span class="'+g.options.classPrefix+"time-total "+g.options.classPrefix+'time-slider"><span class="'+g.options.classPrefix+'time-buffering"></span><span class="'+g.options.classPrefix+'time-loaded"></span><span class="'+g.options.classPrefix+'time-current"></span><span class="'+g.options.classPrefix+'time-hovered no-hover"></span><span class="'+g.options.classPrefix+'time-handle"><span class="'+g.options.classPrefix+'time-handle-content"></span></span>'+n+"</span>",g.addControlElement(o,"progress"),g.options.keyActions.push({keys:[37,227],action:function(e){if(!isNaN(e.duration)&&0<e.duration){e.isVideo&&(e.showControls(),e.startControlsTimer());var t=e.getElement(e.container).querySelector("."+g.options.classPrefix+"time-total");t&&t.focus();var n=Math.max(e.currentTime-e.options.defaultSeekBackwardInterval(e),0);e.paused||e.pause(),setTimeout(function(){e.setCurrentTime(n)},0),setTimeout(function(){e.play()},0)}}},{keys:[39,228],action:function(e){if(!isNaN(e.duration)&&0<e.duration){e.isVideo&&(e.showControls(),e.startControlsTimer());var t=e.getElement(e.container).querySelector("."+g.options.classPrefix+"time-total");t&&t.focus();var n=Math.min(e.currentTime+e.options.defaultSeekForwardInterval(e),e.duration);e.paused||e.pause(),setTimeout(function(){e.setCurrentTime(n)},0),setTimeout(function(){e.play()},0)}}}),g.rail=s.querySelector("."+g.options.classPrefix+"time-rail"),g.total=s.querySelector("."+g.options.classPrefix+"time-total"),g.loaded=s.querySelector("."+g.options.classPrefix+"time-loaded"),g.current=s.querySelector("."+g.options.classPrefix+"time-current"),g.handle=s.querySelector("."+g.options.classPrefix+"time-handle"),g.timefloat=s.querySelector("."+g.options.classPrefix+"time-float"),g.timefloatcurrent=s.querySelector("."+g.options.classPrefix+"time-float-current"),g.slider=s.querySelector("."+g.options.classPrefix+"time-slider"),g.hovered=s.querySelector("."+g.options.classPrefix+"time-hovered"),g.buffer=s.querySelector("."+g.options.classPrefix+"time-buffering"),g.newTime=0,g.forcedHandlePause=!1,g.setTransformStyle=function(e,t){e.style.transform=t,e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t},g.buffer.style.display="none";var i=function(e){var t=getComputedStyle(g.total),n=(0,b.offset)(g.total),o=g.total.offsetWidth,i=void 0!==t.webkitTransform?"webkitTransform":void 0!==t.mozTransform?"mozTransform ":void 0!==t.oTransform?"oTransform":void 0!==t.msTransform?"msTransform":"transform",r="WebKitCSSMatrix"in window?"WebKitCSSMatrix":"MSCSSMatrix"in window?"MSCSSMatrix":"CSSMatrix"in window?"CSSMatrix":void 0,a=0,s=0,l=0,d=void 0;if(d=e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,g.getDuration()){if(d<n.left?d=n.left:d>o+n.left&&(d=o+n.left),a=(l=d-n.left)/o,g.newTime=a*g.getDuration(),v&&null!==g.getCurrentTime()&&g.newTime.toFixed(4)!==g.getCurrentTime().toFixed(4)&&(g.setCurrentRailHandle(g.newTime),g.updateCurrent(g.newTime)),!y.IS_IOS&&!y.IS_ANDROID){if(l<0&&(l=0),g.options.useSmoothHover&&null!==r&&void 0!==window[r]){var u=new window[r](getComputedStyle(g.handle)[i]).m41,c=l/parseFloat(getComputedStyle(g.total).width)-u/parseFloat(getComputedStyle(g.total).width);g.hovered.style.left=u+"px",g.setTransformStyle(g.hovered,"scaleX("+c+")"),g.hovered.setAttribute("pos",l),0<=c?(0,b.removeClass)(g.hovered,"negative"):(0,b.addClass)(g.hovered,"negative")}if(g.timefloat){var f=g.timefloat.offsetWidth/2,p=mejs.Utils.offset(g.getElement(g.container)),m=getComputedStyle(g.timefloat);s=d-p.left<g.timefloat.offsetWidth?f:d-p.left>=g.getElement(g.container).offsetWidth-f?g.total.offsetWidth-f:l,(0,b.hasClass)(g.getElement(g.container),g.options.classPrefix+"long-video")&&(s+=parseFloat(m.marginLeft)/2+g.timefloat.offsetWidth/2),g.timefloat.style.left=s+"px",g.timefloatcurrent.innerHTML=(0,E.secondsToTimeCode)(g.newTime,h.options.alwaysShowHours,h.options.showTimecodeFrameCount,h.options.framesPerSecond,h.options.secondsDecimalLength,h.options.timeFormat),g.timefloat.style.display="block"}}}else y.IS_IOS||y.IS_ANDROID||!g.timefloat||(s=g.timefloat.offsetWidth+o>=g.getElement(g.container).offsetWidth?g.timefloat.offsetWidth/2:0,g.timefloat.style.left=s+"px",g.timefloat.style.left=s+"px",g.timefloat.style.display="block")},f=function(){1e3<=new Date-u&&g.play()};g.slider.addEventListener("focus",function(){h.options.autoRewind=!1}),g.slider.addEventListener("blur",function(){h.options.autoRewind=t}),g.slider.addEventListener("keydown",function(e){if(1e3<=new Date-u&&(c=g.paused),g.options.enableKeyboard&&g.options.keyActions.length){var t=e.which||e.keyCode||0,n=g.getDuration(),o=h.options.defaultSeekForwardInterval(d),i=h.options.defaultSeekBackwardInterval(d),r=g.getCurrentTime(),a=g.getElement(g.container).querySelector("."+g.options.classPrefix+"volume-slider");if(38===t||40===t){a&&(a.style.display="block"),g.isVideo&&(g.showControls(),g.startControlsTimer());var s=38===t?Math.min(g.volume+.1,1):Math.max(g.volume-.1,0),l=s<=0;return g.setVolume(s),void g.setMuted(l)}switch(a&&(a.style.display="none"),t){case 37:g.getDuration()!==1/0&&(r-=i);break;case 39:g.getDuration()!==1/0&&(r+=o);break;case 36:r=0;break;case 35:r=n;break;case 13:case 32:return void(y.IS_FIREFOX&&(g.paused?g.play():g.pause()));default:return}r=r<0||isNaN(r)?0:n<=r?n:Math.floor(r),u=new Date,c||h.pause(),setTimeout(function(){g.setCurrentTime(r)},0),r<g.getDuration()&&!c&&setTimeout(f,1100),h.showControls(),e.preventDefault(),e.stopPropagation()}});var r=["mousedown","touchstart"];g.slider.addEventListener("dragstart",function(){return!1});for(var a=0,l=r.length;a<l;a++)g.slider.addEventListener(r[a],function(e){if(g.forcedHandlePause=!1,g.getDuration()!==1/0&&(1===e.which||0===e.which)){g.paused||(g.pause(),g.forcedHandlePause=!0),v=!0,i(e);for(var t=["mouseup","touchend"],n=0,o=t.length;n<o;n++)g.getElement(g.container).addEventListener(t[n],function(e){var t=e.target;(t===g.slider||t.closest("."+g.options.classPrefix+"time-slider"))&&i(e)});g.globalBind("mouseup.dur touchend.dur",function(){v&&null!==g.getCurrentTime()&&g.newTime.toFixed(4)!==g.getCurrentTime().toFixed(4)&&(g.setCurrentTime(g.newTime),g.setCurrentRailHandle(g.newTime),g.updateCurrent(g.newTime)),g.forcedHandlePause&&(g.slider.focus(),g.play()),g.forcedHandlePause=!1,v=!1,g.timefloat&&(g.timefloat.style.display="none")})}},!(!y.SUPPORT_PASSIVE_EVENT||"touchstart"!==r[a])&&{passive:!0});g.slider.addEventListener("mouseenter",function(e){e.target===g.slider&&g.getDuration()!==1/0&&(g.getElement(g.container).addEventListener("mousemove",function(e){var t=e.target;(t===g.slider||t.closest("."+g.options.classPrefix+"time-slider"))&&i(e)}),!g.timefloat||y.IS_IOS||y.IS_ANDROID||(g.timefloat.style.display="block"),g.hovered&&!y.IS_IOS&&!y.IS_ANDROID&&g.options.useSmoothHover&&(0,b.removeClass)(g.hovered,"no-hover"))}),g.slider.addEventListener("mouseleave",function(){g.getDuration()!==1/0&&(v||(g.timefloat&&(g.timefloat.style.display="none"),g.hovered&&g.options.useSmoothHover&&(0,b.addClass)(g.hovered,"no-hover")))}),g.broadcastCallback=function(e){var t,n,o,i,r=s.querySelector("."+g.options.classPrefix+"broadcast");if(g.options.forceLive||g.getDuration()===1/0){if(!r&&g.options.forceLive){var a=p.default.createElement("span");a.className=g.options.classPrefix+"broadcast",a.innerText=m.default.t("mejs.live-broadcast"),g.slider.style.display="none",g.rail.appendChild(a)}}else r&&(g.slider.style.display="",r.remove()),h.setProgressRail(e),g.forcedHandlePause||h.setCurrentRail(e),t=g.getCurrentTime(),n=m.default.t("mejs.time-slider"),o=(0,E.secondsToTimeCode)(t,h.options.alwaysShowHours,h.options.showTimecodeFrameCount,h.options.framesPerSecond,h.options.secondsDecimalLength,h.options.timeFormat),i=g.getDuration(),g.slider.setAttribute("role","slider"),g.slider.tabIndex=0,d.paused?(g.slider.setAttribute("aria-label",n),g.slider.setAttribute("aria-valuemin",0),g.slider.setAttribute("aria-valuemax",isNaN(i)?0:i),g.slider.setAttribute("aria-valuenow",t),g.slider.setAttribute("aria-valuetext",o)):(g.slider.removeAttribute("aria-label"),g.slider.removeAttribute("aria-valuemin"),g.slider.removeAttribute("aria-valuemax"),g.slider.removeAttribute("aria-valuenow"),g.slider.removeAttribute("aria-valuetext"))},d.addEventListener("progress",g.broadcastCallback),d.addEventListener("timeupdate",g.broadcastCallback),d.addEventListener("play",function(){g.buffer.style.display="none"}),d.addEventListener("playing",function(){g.buffer.style.display="none"}),d.addEventListener("seeking",function(){g.buffer.style.display=""}),d.addEventListener("seeked",function(){g.buffer.style.display="none"}),d.addEventListener("pause",function(){g.buffer.style.display="none"}),d.addEventListener("waiting",function(){g.buffer.style.display=""}),d.addEventListener("loadeddata",function(){g.buffer.style.display=""}),d.addEventListener("canplay",function(){g.buffer.style.display="none"}),d.addEventListener("error",function(){g.buffer.style.display="none"}),g.getElement(g.container).addEventListener("controlsresize",function(e){g.getDuration()!==1/0&&(h.setProgressRail(e),g.forcedHandlePause||h.setCurrentRail(e))})},cleanprogress:function(e,t,n,o){o.removeEventListener("progress",e.broadcastCallback),o.removeEventListener("timeupdate",e.broadcastCallback),e.rail&&e.rail.remove()},setProgressRail:function(e){var t=this,n=void 0!==e?e.detail.target||e.target:t.media,o=null;n&&n.buffered&&0<n.buffered.length&&n.buffered.end&&t.getDuration()?o=n.buffered.end(n.buffered.length-1)/t.getDuration():n&&void 0!==n.bytesTotal&&0<n.bytesTotal&&void 0!==n.bufferedBytes?o=n.bufferedBytes/n.bytesTotal:e&&e.lengthComputable&&0!==e.total&&(o=e.loaded/e.total),null!==o&&(o=Math.min(1,Math.max(0,o)),t.loaded&&t.setTransformStyle(t.loaded,"scaleX("+o+")"))},setCurrentRailHandle:function(e){this.setCurrentRailMain(this,e)},setCurrentRail:function(){this.setCurrentRailMain(this)},setCurrentRailMain:function(e,t){if(void 0!==e.getCurrentTime()&&e.getDuration()){var n=void 0===t?e.getCurrentTime():t;if(e.total&&e.handle){var o=parseFloat(getComputedStyle(e.total).width),i=Math.round(o*n/e.getDuration()),r=i-Math.round(e.handle.offsetWidth/2);if(r=r<0?0:r,e.setTransformStyle(e.current,"scaleX("+i/o+")"),e.setTransformStyle(e.handle,"translateX("+r+"px)"),e.options.useSmoothHover&&!(0,b.hasClass)(e.hovered,"no-hover")){var a=parseInt(e.hovered.getAttribute("pos"),10),s=(a=isNaN(a)?0:a)/o-r/o;e.hovered.style.left=r+"px",e.setTransformStyle(e.hovered,"scaleX("+s+")"),0<=s?(0,b.removeClass)(e.hovered,"negative"):(0,b.addClass)(e.hovered,"negative")}}}}})},{16:16,2:2,25:25,26:26,30:30,5:5}],12:[function(e,t,n){"use strict";var a=r(e(2)),o=e(16),i=r(o),s=e(30),l=e(26);function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.config,{duration:0,timeAndDurationSeparator:"<span> | </span>"}),Object.assign(i.default.prototype,{buildcurrent:function(e,t,n,o){var i=this,r=a.default.createElement("div");r.className=i.options.classPrefix+"time",r.setAttribute("role","timer"),r.setAttribute("aria-live","off"),r.innerHTML='<span class="'+i.options.classPrefix+'currenttime">'+(0,s.secondsToTimeCode)(0,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength,e.options.timeFormat)+"</span>",i.addControlElement(r,"current"),e.updateCurrent(),i.updateTimeCallback=function(){i.controlsAreVisible&&e.updateCurrent()},o.addEventListener("timeupdate",i.updateTimeCallback)},cleancurrent:function(e,t,n,o){o.removeEventListener("timeupdate",e.updateTimeCallback)},buildduration:function(e,t,n,o){var i=this;if(t.lastChild.querySelector("."+i.options.classPrefix+"currenttime"))t.querySelector("."+i.options.classPrefix+"time").innerHTML+=i.options.timeAndDurationSeparator+'<span class="'+i.options.classPrefix+'duration">'+(0,s.secondsToTimeCode)(i.options.duration,i.options.alwaysShowHours,i.options.showTimecodeFrameCount,i.options.framesPerSecond,i.options.secondsDecimalLength,i.options.timeFormat)+"</span>";else{t.querySelector("."+i.options.classPrefix+"currenttime")&&(0,l.addClass)(t.querySelector("."+i.options.classPrefix+"currenttime").parentNode,i.options.classPrefix+"currenttime-container");var r=a.default.createElement("div");r.className=i.options.classPrefix+"time "+i.options.classPrefix+"duration-container",r.innerHTML='<span class="'+i.options.classPrefix+'duration">'+(0,s.secondsToTimeCode)(i.options.duration,i.options.alwaysShowHours,i.options.showTimecodeFrameCount,i.options.framesPerSecond,i.options.secondsDecimalLength,i.options.timeFormat)+"</span>",i.addControlElement(r,"duration")}i.updateDurationCallback=function(){i.controlsAreVisible&&e.updateDuration()},o.addEventListener("timeupdate",i.updateDurationCallback)},cleanduration:function(e,t,n,o){o.removeEventListener("timeupdate",e.updateDurationCallback)},updateCurrent:function(){var e=this,t=e.getCurrentTime();isNaN(t)&&(t=0);var n=(0,s.secondsToTimeCode)(t,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength,e.options.timeFormat);5<n.length?(0,l.addClass)(e.getElement(e.container),e.options.classPrefix+"long-video"):(0,l.removeClass)(e.getElement(e.container),e.options.classPrefix+"long-video"),e.getElement(e.controls).querySelector("."+e.options.classPrefix+"currenttime")&&(e.getElement(e.controls).querySelector("."+e.options.classPrefix+"currenttime").innerText=n)},updateDuration:function(){var e=this,t=e.getDuration();void 0!==e.media&&(isNaN(t)||t===1/0||t<0)&&(e.media.duration=e.options.duration=t=0),0<e.options.duration&&(t=e.options.duration);var n=(0,s.secondsToTimeCode)(t,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength,e.options.timeFormat);5<n.length?(0,l.addClass)(e.getElement(e.container),e.options.classPrefix+"long-video"):(0,l.removeClass)(e.getElement(e.container),e.options.classPrefix+"long-video"),e.getElement(e.controls).querySelector("."+e.options.classPrefix+"duration")&&0<t&&(e.getElement(e.controls).querySelector("."+e.options.classPrefix+"duration").innerHTML=n)}})},{16:16,2:2,26:26,30:30}],13:[function(e,t,n){"use strict";var L=r(e(2)),d=r(e(7)),F=r(e(5)),o=e(16),i=r(o),m=e(30),j=e(27),I=e(26);function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.config,{startLanguage:"",tracksText:null,chaptersText:null,tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),Object.assign(i.default.prototype,{hasChapters:!1,buildtracks:function(o,e,t,n){if(this.findTracks(),o.tracks.length||o.trackFiles&&0!==!o.trackFiles.length){var i=this,r=i.options.tracksAriaLive?' role="log" aria-live="assertive" aria-atomic="false"':"",a=(0,j.isString)(i.options.tracksText)?i.options.tracksText:F.default.t("mejs.captions-subtitles"),s=(0,j.isString)(i.options.chaptersText)?i.options.chaptersText:F.default.t("mejs.captions-chapters"),l=null===o.trackFiles?o.tracks.length:o.trackFiles.length;if(i.domNode.textTracks)for(var d=i.domNode.textTracks.length-1;0<=d;d--)i.domNode.textTracks[d].mode="hidden";i.cleartracks(o),o.captions=L.default.createElement("div"),o.captions.className=i.options.classPrefix+"captions-layer "+i.options.classPrefix+"layer",o.captions.innerHTML='<div class="'+i.options.classPrefix+"captions-position "+i.options.classPrefix+'captions-position-hover"'+r+'><span class="'+i.options.classPrefix+'captions-text"></span></div>',o.captions.style.display="none",t.insertBefore(o.captions,t.firstChild),o.captionsText=o.captions.querySelector("."+i.options.classPrefix+"captions-text"),o.captionsButton=L.default.createElement("div"),o.captionsButton.className=i.options.classPrefix+"button "+i.options.classPrefix+"captions-button",o.captionsButton.innerHTML='<button type="button" aria-controls="'+i.id+'" title="'+a+'" aria-label="'+a+'" tabindex="0"></button><div class="'+i.options.classPrefix+"captions-selector "+i.options.classPrefix+'offscreen"><ul class="'+i.options.classPrefix+'captions-selector-list"><li class="'+i.options.classPrefix+'captions-selector-list-item"><input type="radio" class="'+i.options.classPrefix+'captions-selector-input" name="'+o.id+'_captions" id="'+o.id+'_captions_none" value="none" checked disabled><label class="'+i.options.classPrefix+"captions-selector-label "+i.options.classPrefix+'captions-selected" for="'+o.id+'_captions_none">'+F.default.t("mejs.none")+"</label></li></ul></div>",i.addControlElement(o.captionsButton,"tracks"),o.captionsButton.querySelector("."+i.options.classPrefix+"captions-selector-input").disabled=!1,o.chaptersButton=L.default.createElement("div"),o.chaptersButton.className=i.options.classPrefix+"button "+i.options.classPrefix+"chapters-button",o.chaptersButton.innerHTML='<button type="button" aria-controls="'+i.id+'" title="'+s+'" aria-label="'+s+'" tabindex="0"></button><div class="'+i.options.classPrefix+"chapters-selector "+i.options.classPrefix+'offscreen"><ul class="'+i.options.classPrefix+'chapters-selector-list"></ul></div>';for(var u=0,c=0;c<l;c++){var f=o.tracks[c].kind;o.tracks[c].src.trim()&&("subtitles"===f||"captions"===f?u++:"chapters"!==f||e.querySelector("."+i.options.classPrefix+"chapter-selector")||o.captionsButton.parentNode.insertBefore(o.chaptersButton,o.captionsButton))}o.trackToLoad=-1,o.selectedTrack=null,o.isLoadingTrack=!1;for(var p=0;p<l;p++){var m=o.tracks[p].kind;!o.tracks[p].src.trim()||"subtitles"!==m&&"captions"!==m||o.addTrackButton(o.tracks[p].trackId,o.tracks[p].srclang,o.tracks[p].label)}o.loadNextTrack();var h=["mouseenter","focusin"],v=["mouseleave","focusout"];if(i.options.toggleCaptionsButtonWhenOnlyOne&&1===u)o.captionsButton.addEventListener("click",function(e){var t="none";null===o.selectedTrack&&(t=o.tracks[0].trackId);var n=e.keyCode||e.which;o.setTrack(t,void 0!==n)});else{for(var g=o.captionsButton.querySelectorAll("."+i.options.classPrefix+"captions-selector-label"),y=o.captionsButton.querySelectorAll("input[type=radio]"),E=0,b=h.length;E<b;E++)o.captionsButton.addEventListener(h[E],function(){(0,I.removeClass)(this.querySelector("."+i.options.classPrefix+"captions-selector"),i.options.classPrefix+"offscreen")});for(var S=0,x=v.length;S<x;S++)o.captionsButton.addEventListener(v[S],function(){(0,I.addClass)(this.querySelector("."+i.options.classPrefix+"captions-selector"),i.options.classPrefix+"offscreen")});for(var w=0,P=y.length;w<P;w++)y[w].addEventListener("click",function(e){var t=e.keyCode||e.which;o.setTrack(this.value,void 0!==t)});for(var T=0,C=g.length;T<C;T++)g[T].addEventListener("click",function(e){var t=(0,I.siblings)(this,function(e){return"INPUT"===e.tagName})[0],n=(0,j.createEvent)("click",t);t.dispatchEvent(n),e.preventDefault()});o.captionsButton.addEventListener("keydown",function(e){e.stopPropagation()})}for(var k=0,_=h.length;k<_;k++)o.chaptersButton.addEventListener(h[k],function(){this.querySelector("."+i.options.classPrefix+"chapters-selector-list").children.length&&(0,I.removeClass)(this.querySelector("."+i.options.classPrefix+"chapters-selector"),i.options.classPrefix+"offscreen")});for(var N=0,A=v.length;N<A;N++)o.chaptersButton.addEventListener(v[N],function(){(0,I.addClass)(this.querySelector("."+i.options.classPrefix+"chapters-selector"),i.options.classPrefix+"offscreen")});o.chaptersButton.addEventListener("keydown",function(e){e.stopPropagation()}),o.options.alwaysShowControls?(0,I.addClass)(o.getElement(o.container).querySelector("."+i.options.classPrefix+"captions-position"),i.options.classPrefix+"captions-position-hover"):(o.getElement(o.container).addEventListener("controlsshown",function(){(0,I.addClass)(o.getElement(o.container).querySelector("."+i.options.classPrefix+"captions-position"),i.options.classPrefix+"captions-position-hover")}),o.getElement(o.container).addEventListener("controlshidden",function(){n.paused||(0,I.removeClass)(o.getElement(o.container).querySelector("."+i.options.classPrefix+"captions-position"),i.options.classPrefix+"captions-position-hover")})),n.addEventListener("timeupdate",function(){o.displayCaptions()}),""!==o.options.slidesSelector&&(o.slidesContainer=L.default.querySelectorAll(o.options.slidesSelector),n.addEventListener("timeupdate",function(){o.displaySlides()}))}},cleartracks:function(e){e&&(e.captions&&e.captions.remove(),e.chapters&&e.chapters.remove(),e.captionsText&&e.captionsText.remove(),e.captionsButton&&e.captionsButton.remove(),e.chaptersButton&&e.chaptersButton.remove())},rebuildtracks:function(){var e=this;e.findTracks(),e.buildtracks(e,e.getElement(e.controls),e.getElement(e.layers),e.media)},findTracks:function(){var e=this,t=null===e.trackFiles?e.node.querySelectorAll("track"):e.trackFiles,n=t.length;e.tracks=[];for(var o=0;o<n;o++){var i=t[o],r=i.getAttribute("srclang").toLowerCase()||"",a=e.id+"_track_"+o+"_"+i.getAttribute("kind")+"_"+r;e.tracks.push({trackId:a,srclang:r,src:i.getAttribute("src"),kind:i.getAttribute("kind"),label:i.getAttribute("label")||"",entries:[],isLoaded:!1})}},setTrack:function(e,t){for(var n=this,o=n.captionsButton.querySelectorAll('input[type="radio"]'),i=n.captionsButton.querySelectorAll("."+n.options.classPrefix+"captions-selected"),r=n.captionsButton.querySelector('input[value="'+e+'"]'),a=0,s=o.length;a<s;a++)o[a].checked=!1;for(var l=0,d=i.length;l<d;l++)(0,I.removeClass)(i[l],n.options.classPrefix+"captions-selected");r.checked=!0;for(var u=(0,I.siblings)(r,function(e){return(0,I.hasClass)(e,n.options.classPrefix+"captions-selector-label")}),c=0,f=u.length;c<f;c++)(0,I.addClass)(u[c],n.options.classPrefix+"captions-selected");if("none"===e)n.selectedTrack=null,(0,I.removeClass)(n.captionsButton,n.options.classPrefix+"captions-enabled");else for(var p=0,m=n.tracks.length;p<m;p++){var h=n.tracks[p];if(h.trackId===e){null===n.selectedTrack&&(0,I.addClass)(n.captionsButton,n.options.classPrefix+"captions-enabled"),n.selectedTrack=h,n.captions.setAttribute("lang",n.selectedTrack.srclang),n.displayCaptions();break}}var v=(0,j.createEvent)("captionschange",n.media);v.detail.caption=n.selectedTrack,n.media.dispatchEvent(v),t||setTimeout(function(){n.getElement(n.container).focus()},500)},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(e){var t=this,n=t.tracks[e];void 0===n||void 0===n.src&&""===n.src||(0,I.ajax)(n.src,"text",function(e){n.entries="string"==typeof e&&/<tt\s+xml/gi.exec(e)?d.default.TrackFormatParser.dfxp.parse(e):d.default.TrackFormatParser.webvtt.parse(e),n.isLoaded=!0,t.enableTrackButton(n),t.loadNextTrack(),"slides"===n.kind?t.setupSlides(n):"chapters"!==n.kind||t.hasChapters||(t.drawChapters(n),t.hasChapters=!0)},function(){t.removeTrackButton(n.trackId),t.loadNextTrack()})},enableTrackButton:function(e){var t=this,n=e.srclang,o=L.default.getElementById(""+e.trackId);if(o){var i=e.label;""===i&&(i=F.default.t(d.default.language.codes[n])||n),o.disabled=!1;for(var r=(0,I.siblings)(o,function(e){return(0,I.hasClass)(e,t.options.classPrefix+"captions-selector-label")}),a=0,s=r.length;a<s;a++)r[a].innerHTML=i;if(t.options.startLanguage===n){o.checked=!0;var l=(0,j.createEvent)("click",o);o.dispatchEvent(l)}}},removeTrackButton:function(e){var t=L.default.getElementById(""+e);if(t){var n=t.closest("li");n&&n.remove()}},addTrackButton:function(e,t,n){var o=this;""===n&&(n=F.default.t(d.default.language.codes[t])||t),o.captionsButton.querySelector("ul").innerHTML+='<li class="'+o.options.classPrefix+'captions-selector-list-item"><input type="radio" class="'+o.options.classPrefix+'captions-selector-input" name="'+o.id+'_captions" id="'+e+'" value="'+e+'" disabled><label class="'+o.options.classPrefix+'captions-selector-label"for="'+e+'">'+n+" (loading)</label></li>"},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(var n=0,o=e.tracks.length;n<o;n++){var i=e.tracks[n].kind;if(("subtitles"===i||"captions"===i)&&e.tracks[n].isLoaded){t=!0;break}}e.captionsButton.style.display=t?"":"none",e.setControlsSize()}},displayCaptions:function(){if(void 0!==this.tracks){var e=this,t=e.selectedTrack;if(null!==t&&t.isLoaded){var n=e.searchTrackPosition(t.entries,e.media.currentTime);if(-1<n){var o=t.entries[n].text;return"function"==typeof e.options.captionTextPreprocessor&&(o=e.options.captionTextPreprocessor(o)),e.captionsText.innerHTML=function(e){var t=L.default.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),o=n.length;o--;)n[o].remove();for(var i=t.getElementsByTagName("*"),r=0,a=i.length;r<a;r++)for(var s=i[r].attributes,l=Array.prototype.slice.call(s),d=0,u=l.length;d<u;d++)l[d].name.startsWith("on")||l[d].value.startsWith("javascript")?i[r].remove():"style"===l[d].name&&i[r].removeAttribute(l[d].name);return t.innerHTML}(o),e.captionsText.className=e.options.classPrefix+"captions-text "+(t.entries[n].identifier||""),e.captions.style.display="",void(e.captions.style.height="0px")}e.captions.style.display="none"}else e.captions.style.display="none"}},setupSlides:function(e){this.slides=e,this.slides.entries.imgs=[this.slides.entries.length],this.showSlide(0)},showSlide:function(e){var i=this,r=this;if(void 0!==r.tracks&&void 0!==r.slidesContainer){var t=r.slides.entries[e].text,n=r.slides.entries[e].imgs;if(void 0===n||void 0===n.fadeIn){var a=L.default.createElement("img");a.src=t,a.addEventListener("load",function(){var e=i,t=(0,I.siblings)(e,function(e){return t(e)});e.style.display="none",r.slidesContainer.innerHTML+=e.innerHTML,(0,I.fadeIn)(r.slidesContainer.querySelector(a));for(var n=0,o=t.length;n<o;n++)(0,I.fadeOut)(t[n],400)}),r.slides.entries[e].imgs=n=a}else if(!(0,I.visible)(n)){var o=(0,I.siblings)(self,function(e){return o(e)});(0,I.fadeIn)(r.slidesContainer.querySelector(n));for(var s=0,l=o.length;s<l;s++)(0,I.fadeOut)(o[s])}}},displaySlides:function(){if(void 0!==this.slides){var e=this.slides,t=this.searchTrackPosition(e.entries,this.media.currentTime);-1<t&&this.showSlide(t)}},drawChapters:function(e){var r=this,t=e.entries.length;if(t){r.chaptersButton.querySelector("ul").innerHTML="";for(var n=0;n<t;n++)r.chaptersButton.querySelector("ul").innerHTML+='<li class="'+r.options.classPrefix+'chapters-selector-list-item" role="menuitemcheckbox" aria-live="polite" aria-disabled="false" aria-checked="false"><input type="radio" class="'+r.options.classPrefix+'captions-selector-input" name="'+r.id+'_chapters" id="'+r.id+"_chapters_"+n+'" value="'+e.entries[n].start+'" disabled><label class="'+r.options.classPrefix+'chapters-selector-label"for="'+r.id+"_chapters_"+n+'">'+e.entries[n].text+"</label></li>";for(var o=r.chaptersButton.querySelectorAll('input[type="radio"]'),i=r.chaptersButton.querySelectorAll("."+r.options.classPrefix+"chapters-selector-label"),a=0,s=o.length;a<s;a++)o[a].disabled=!1,o[a].checked=!1,o[a].addEventListener("click",function(e){var t=r.chaptersButton.querySelectorAll("li"),n=(0,I.siblings)(this,function(e){return(0,I.hasClass)(e,r.options.classPrefix+"chapters-selector-label")})[0];this.checked=!0,this.parentNode.setAttribute("aria-checked",!0),(0,I.addClass)(n,r.options.classPrefix+"chapters-selected"),(0,I.removeClass)(r.chaptersButton.querySelector("."+r.options.classPrefix+"chapters-selected"),r.options.classPrefix+"chapters-selected");for(var o=0,i=t.length;o<i;o++)t[o].setAttribute("aria-checked",!1);void 0===(e.keyCode||e.which)&&setTimeout(function(){r.getElement(r.container).focus()},500),r.media.setCurrentTime(parseFloat(this.value)),r.media.paused&&r.media.play()});for(var l=0,d=i.length;l<d;l++)i[l].addEventListener("click",function(e){var t=(0,I.siblings)(this,function(e){return"INPUT"===e.tagName})[0],n=(0,j.createEvent)("click",t);t.dispatchEvent(n),e.preventDefault()})}},searchTrackPosition:function(e,t){for(var n=0,o=e.length-1,i=void 0,r=void 0,a=void 0;n<=o;){if(r=e[i=n+o>>1].start,a=e[i].stop,r<=t&&t<a)return i;r<t?n=i+1:t<r&&(o=i-1)}return-1}}),d.default.language={codes:{af:"mejs.afrikaans",sq:"mejs.albanian",ar:"mejs.arabic",be:"mejs.belarusian",bg:"mejs.bulgarian",ca:"mejs.catalan",zh:"mejs.chinese","zh-cn":"mejs.chinese-simplified","zh-tw":"mejs.chines-traditional",hr:"mejs.croatian",cs:"mejs.czech",da:"mejs.danish",nl:"mejs.dutch",en:"mejs.english",et:"mejs.estonian",fl:"mejs.filipino",fi:"mejs.finnish",fr:"mejs.french",gl:"mejs.galician",de:"mejs.german",el:"mejs.greek",ht:"mejs.haitian-creole",iw:"mejs.hebrew",hi:"mejs.hindi",hu:"mejs.hungarian",is:"mejs.icelandic",id:"mejs.indonesian",ga:"mejs.irish",it:"mejs.italian",ja:"mejs.japanese",ko:"mejs.korean",lv:"mejs.latvian",lt:"mejs.lithuanian",mk:"mejs.macedonian",ms:"mejs.malay",mt:"mejs.maltese",no:"mejs.norwegian",fa:"mejs.persian",pl:"mejs.polish",pt:"mejs.portuguese",ro:"mejs.romanian",ru:"mejs.russian",sr:"mejs.serbian",sk:"mejs.slovak",sl:"mejs.slovenian",es:"mejs.spanish",sw:"mejs.swahili",sv:"mejs.swedish",tl:"mejs.tagalog",th:"mejs.thai",tr:"mejs.turkish",uk:"mejs.ukrainian",vi:"mejs.vietnamese",cy:"mejs.welsh",yi:"mejs.yiddish"}},d.default.TrackFormatParser={webvtt:{pattern:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(e){for(var t=e.split(/\r?\n/),n=[],o=void 0,i=void 0,r=void 0,a=0,s=t.length;a<s;a++){if((o=this.pattern.exec(t[a]))&&a<t.length){for(0<=a-1&&""!==t[a-1]&&(r=t[a-1]),i=t[++a],a++;""!==t[a]&&a<t.length;)i=i+"\n"+t[a],a++;i=null===i?"":i.trim().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),n.push({identifier:r,start:0===(0,m.convertSMPTEtoSeconds)(o[1])?.2:(0,m.convertSMPTEtoSeconds)(o[1]),stop:(0,m.convertSMPTEtoSeconds)(o[3]),text:i,settings:o[5]})}r=""}return n}},dfxp:{parse:function(e){var t=(e=$(e).filter("tt")).firstChild,n=t.querySelectorAll("p"),o=e.getElementById(""+t.attr("style")),i=[],r=void 0;if(o.length){o.removeAttribute("id");var a=o.attributes;if(a.length){r={};for(var s=0,l=a.length;s<l;s++)r[a[s].name.split(":")[1]]=a[s].value}}for(var d=0,u=n.length;d<u;d++){var c=void 0,f={start:null,stop:null,style:null,text:null};if(n.eq(d).attr("begin")&&(f.start=(0,m.convertSMPTEtoSeconds)(n.eq(d).attr("begin"))),!f.start&&n.eq(d-1).attr("end")&&(f.start=(0,m.convertSMPTEtoSeconds)(n.eq(d-1).attr("end"))),n.eq(d).attr("end")&&(f.stop=(0,m.convertSMPTEtoSeconds)(n.eq(d).attr("end"))),!f.stop&&n.eq(d+1).attr("begin")&&(f.stop=(0,m.convertSMPTEtoSeconds)(n.eq(d+1).attr("begin"))),r)for(var p in (c="", r))c+=p+":"+r[p]+";";c&&(f.style=c),0===f.start&&(f.start=.2),f.text=n.eq(d).innerHTML.trim().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),i.push(f)}return i}}}},{16:16,2:2,26:26,27:27,30:30,5:5,7:7}],14:[function(e,t,n){"use strict";var x=r(e(2)),o=e(16),i=r(o),w=r(e(5)),P=e(25),T=e(27),C=e(26);function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(o.config,{muteText:null,unmuteText:null,allyVolumeControlText:null,hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical",startVolume:.8}),Object.assign(i.default.prototype,{buildvolume:function(e,t,n,o){if(!P.IS_ANDROID&&!P.IS_IOS||!this.options.hideVolumeOnTouchDevices){var a=this,s=a.isVideo?a.options.videoVolume:a.options.audioVolume,r=(0,T.isString)(a.options.muteText)?a.options.muteText:w.default.t("mejs.mute"),l=(0,T.isString)(a.options.unmuteText)?a.options.unmuteText:w.default.t("mejs.unmute"),i=(0,T.isString)(a.options.allyVolumeControlText)?a.options.allyVolumeControlText:w.default.t("mejs.volume-help-text"),d=x.default.createElement("div");if(d.className=a.options.classPrefix+"button "+a.options.classPrefix+"volume-button "+a.options.classPrefix+"mute",d.innerHTML="horizontal"===s?'<button type="button" aria-controls="'+a.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0"></button>':'<button type="button" aria-controls="'+a.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0"></button><a href="javascript:void(0);" class="'+a.options.classPrefix+'volume-slider" aria-label="'+w.default.t("mejs.volume-slider")+'" aria-valuemin="0" aria-valuemax="100" role="slider" aria-orientation="vertical"><span class="'+a.options.classPrefix+'offscreen">'+i+'</span><div class="'+a.options.classPrefix+'volume-total"><div class="'+a.options.classPrefix+'volume-current"></div><div class="'+a.options.classPrefix+'volume-handle"></div></div></a>',a.addControlElement(d,"volume"),a.options.keyActions.push({keys:[38],action:function(e){var t=e.getElement(e.container).querySelector("."+a.options.classPrefix+"volume-slider");t&&t.matches(":focus")&&(t.style.display="block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.min(e.volume+.1,1);e.setVolume(n),0<n&&e.setMuted(!1)}},{keys:[40],action:function(e){var t=e.getElement(e.container).querySelector("."+a.options.classPrefix+"volume-slider");t&&(t.style.display="block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.max(e.volume-.1,0);e.setVolume(n),n<=.1&&e.setMuted(!0)}},{keys:[77],action:function(e){var t=e.getElement(e.container).querySelector("."+a.options.classPrefix+"volume-slider");t&&(t.style.display="block"),e.isVideo&&(e.showControls(),e.startControlsTimer()),e.media.muted?e.setMuted(!1):e.setMuted(!0)}}),"horizontal"===s){var u=x.default.createElement("a");u.className=a.options.classPrefix+"horizontal-volume-slider",u.href="javascript:void(0);",u.setAttribute("aria-label",w.default.t("mejs.volume-slider")),u.setAttribute("aria-valuemin",0),u.setAttribute("aria-valuemax",100),u.setAttribute("aria-valuenow",100),u.setAttribute("role","slider"),u.innerHTML+='<span class="'+a.options.classPrefix+'offscreen">'+i+'</span><div class="'+a.options.classPrefix+'horizontal-volume-total"><div class="'+a.options.classPrefix+'horizontal-volume-current"></div><div class="'+a.options.classPrefix+'horizontal-volume-handle"></div></div>',d.parentNode.insertBefore(u,d.nextSibling)}var c=!1,f=!1,p=!1,m="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-slider"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-slider"),h="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-total"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-total"),v="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-current"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-current"),g="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-handle"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-handle"),y=function(e){if(null!==e&&!isNaN(e)&&void 0!==e){if(e=Math.max(0,e),0===(e=Math.min(e,1))){(0,C.removeClass)(d,a.options.classPrefix+"mute"),(0,C.addClass)(d,a.options.classPrefix+"unmute");var t=d.firstElementChild;t.setAttribute("title",l),t.setAttribute("aria-label",l)}else{(0,C.removeClass)(d,a.options.classPrefix+"unmute"),(0,C.addClass)(d,a.options.classPrefix+"mute");var n=d.firstElementChild;n.setAttribute("title",r),n.setAttribute("aria-label",r)}var o=100*e+"%",i=getComputedStyle(g);"vertical"===s?(v.style.bottom=0,v.style.height=o,g.style.bottom=o,g.style.marginBottom=-parseFloat(i.height)/2+"px"):(v.style.left=0,v.style.width=o,g.style.left=o,g.style.marginLeft=-parseFloat(i.width)/2+"px")}},E=function(e){var t=(0,C.offset)(h),n=getComputedStyle(h);p=!0;var o=null;if("vertical"===s){var i=parseFloat(n.height);if(o=(i-(e.pageY-t.top))/i,0===t.top||0===t.left)return}else{var r=parseFloat(n.width);o=(e.pageX-t.left)/r}o=Math.max(0,o),o=Math.min(o,1),y(o),a.setMuted(0===o),a.setVolume(o),e.preventDefault(),e.stopPropagation()},b=function(){a.muted?(y(0),(0,C.removeClass)(d,a.options.classPrefix+"mute"),(0,C.addClass)(d,a.options.classPrefix+"unmute")):(y(o.volume),(0,C.removeClass)(d,a.options.classPrefix+"unmute"),(0,C.addClass)(d,a.options.classPrefix+"mute"))};e.getElement(e.container).addEventListener("keydown",function(e){!!e.target.closest("."+a.options.classPrefix+"container")||"vertical"!==s||(m.style.display="none")}),d.addEventListener("mouseenter",function(e){e.target===d&&(m.style.display="block",f=!0,e.preventDefault(),e.stopPropagation())}),d.addEventListener("focusin",function(){m.style.display="block",f=!0}),d.addEventListener("focusout",function(e){e.relatedTarget&&(!e.relatedTarget||e.relatedTarget.matches("."+a.options.classPrefix+"volume-slider"))||"vertical"!==s||(m.style.display="none")}),d.addEventListener("mouseleave",function(){f=!1,c||"vertical"!==s||(m.style.display="none")}),d.addEventListener("focusout",function(){f=!1}),d.addEventListener("keydown",function(e){if(a.options.enableKeyboard&&a.options.keyActions.length){var t=e.which||e.keyCode||0,n=o.volume;switch(t){case 38:n=Math.min(n+.1,1);break;case 40:n=Math.max(0,n-.1);break;default:return!0}c=!1,y(n),o.setVolume(n),e.preventDefault(),e.stopPropagation()}}),d.querySelector("button").addEventListener("click",function(){o.setMuted(!o.muted);var e=(0,T.createEvent)("volumechange",o);o.dispatchEvent(e)}),m.addEventListener("dragstart",function(){return!1}),m.addEventListener("mouseover",function(){f=!0}),m.addEventListener("focusin",function(){m.style.display="block",f=!0}),m.addEventListener("focusout",function(){f=!1,c||"vertical"!==s||(m.style.display="none")}),m.addEventListener("mousedown",function(e){E(e),a.globalBind("mousemove.vol",function(e){var t=e.target;c&&(t===m||t.closest("vertical"===s?"."+a.options.classPrefix+"volume-slider":"."+a.options.classPrefix+"horizontal-volume-slider"))&&E(e)}),a.globalBind("mouseup.vol",function(){c=!1,f||"vertical"!==s||(m.style.display="none")}),c=!0,e.preventDefault(),e.stopPropagation()}),o.addEventListener("volumechange",function(e){var t;c||b(),t=Math.floor(100*o.volume),m.setAttribute("aria-valuenow",t),m.setAttribute("aria-valuetext",t+"%")});var S=!1;o.addEventListener("rendererready",function(){p||setTimeout(function(){S=!0,(0===e.options.startVolume||o.originalNode.muted)&&(o.setMuted(!0),e.options.startVolume=0),o.setVolume(e.options.startVolume),a.setControlsSize()},250)}),o.addEventListener("loadedmetadata",function(){setTimeout(function(){p||S||((0===e.options.startVolume||o.originalNode.muted)&&o.setMuted(!0),o.setVolume(e.options.startVolume),a.setControlsSize()),S=!1},250)}),(0===e.options.startVolume||o.originalNode.muted)&&(o.setMuted(!0),e.options.startVolume=0,b()),a.getElement(a.container).addEventListener("controlsresize",function(){b()})}}})},{16:16,2:2,25:25,26:26,27:27,5:5}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.EN={"mejs.plural-form":1,"mejs.download-file":"Download File","mejs.install-flash":"You are using a browser that does not have Flash player enabled or installed. Please turn on your Flash player plugin or download the latest version from https://get.adobe.com/flashplayer/","mejs.fullscreen":"Fullscreen","mejs.play":"Play","mejs.pause":"Pause","mejs.time-slider":"Time Slider","mejs.time-help-text":"Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.","mejs.live-broadcast":"Live Broadcast","mejs.volume-help-text":"Use Up/Down Arrow keys to increase or decrease volume.","mejs.unmute":"Unmute","mejs.mute":"Mute","mejs.volume-slider":"Volume Slider","mejs.video-player":"Video Player","mejs.audio-player":"Audio Player","mejs.captions-subtitles":"Captions/Subtitles","mejs.captions-chapters":"Chapters","mejs.none":"None","mejs.afrikaans":"Afrikaans","mejs.albanian":"Albanian","mejs.arabic":"Arabic","mejs.belarusian":"Belarusian","mejs.bulgarian":"Bulgarian","mejs.catalan":"Catalan","mejs.chinese":"Chinese","mejs.chinese-simplified":"Chinese (Simplified)","mejs.chinese-traditional":"Chinese (Traditional)","mejs.croatian":"Croatian","mejs.czech":"Czech","mejs.danish":"Danish","mejs.dutch":"Dutch","mejs.english":"English","mejs.estonian":"Estonian","mejs.filipino":"Filipino","mejs.finnish":"Finnish","mejs.french":"French","mejs.galician":"Galician","mejs.german":"German","mejs.greek":"Greek","mejs.haitian-creole":"Haitian Creole","mejs.hebrew":"Hebrew","mejs.hindi":"Hindi","mejs.hungarian":"Hungarian","mejs.icelandic":"Icelandic","mejs.indonesian":"Indonesian","mejs.irish":"Irish","mejs.italian":"Italian","mejs.japanese":"Japanese","mejs.korean":"Korean","mejs.latvian":"Latvian","mejs.lithuanian":"Lithuanian","mejs.macedonian":"Macedonian","mejs.malay":"Malay","mejs.maltese":"Maltese","mejs.norwegian":"Norwegian","mejs.persian":"Persian","mejs.polish":"Polish","mejs.portuguese":"Portuguese","mejs.romanian":"Romanian","mejs.russian":"Russian","mejs.serbian":"Serbian","mejs.slovak":"Slovak","mejs.slovenian":"Slovenian","mejs.spanish":"Spanish","mejs.swahili":"Swahili","mejs.swedish":"Swedish","mejs.tagalog":"Tagalog","mejs.thai":"Thai","mejs.turkish":"Turkish","mejs.ukrainian":"Ukrainian","mejs.vietnamese":"Vietnamese","mejs.welsh":"Welsh","mejs.yiddish":"Yiddish"}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.config=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),S=r(e(3)),x=r(e(2)),f=r(e(7)),d=r(e(6)),a=r(e(17)),u=r(e(5)),w=e(25),m=e(27),c=e(30),p=e(28),P=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e(26));function r(e){return e&&e.__esModule?e:{default:e}}f.default.mepIndex=0,f.default.players={};var s=n.config={poster:"",showPosterWhenEnded:!1,showPosterWhenPaused:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:40,defaultSeekBackwardInterval:function(e){return.05*e.getDuration()},defaultSeekForwardInterval:function(e){return.05*e.getDuration()},setDimensions:!0,audioWidth:-1,audioHeight:-1,loop:!1,autoRewind:!0,enableAutosize:!0,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,hideVideoControlsOnPause:!1,clickToPlayPause:!0,controlsTimeoutDefault:1500,controlsTimeoutMouseEnter:2500,controlsTimeoutMouseLeave:1e3,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],useDefaultControls:!1,isVideo:!0,stretching:"auto",classPrefix:"mejs__",enableKeyboard:!0,pauseOtherPlayers:!0,secondsDecimalLength:0,customError:null,keyActions:[{keys:[32,179],action:function(e){w.IS_FIREFOX||(e.paused||e.ended?e.play():e.pause())}}]};f.default.MepDefaults=s;var l=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=this,o="string"==typeof e?x.default.getElementById(e):e;if(!(n instanceof r))return new r(o,t);if(n.node=n.media=o,n.node){if(n.media.player)return n.media.player;if(n.hasFocus=!1,n.controlsAreVisible=!0,n.controlsEnabled=!0,n.controlsTimer=null,n.currentMediaTime=0,n.proxy=null,void 0===t){var i=n.node.getAttribute("data-mejsoptions");t=i?JSON.parse(i):{}}return n.options=Object.assign({},s,t),n.options.loop&&!n.media.getAttribute("loop")?(n.media.loop=!0,n.node.loop=!0):n.media.loop&&(n.options.loop=!0),n.options.timeFormat||(n.options.timeFormat="mm:ss",n.options.alwaysShowHours&&(n.options.timeFormat="hh:mm:ss"),n.options.showTimecodeFrameCount&&(n.options.timeFormat+=":ff")),(0,c.calculateTimeFormat)(0,n.options,n.options.framesPerSecond||25),n.id="mep_"+f.default.mepIndex++,(f.default.players[n.id]=n).init(),n}}return o(r,[{key:"getElement",value:function(e){return e}},{key:"init",value:function(){var n=this,e=Object.assign({},n.options,{success:function(e,t){n._meReady(e,t)},error:function(e){n._handleError(e)}}),t=n.node.tagName.toLowerCase();if(n.isDynamic="audio"!==t&&"video"!==t&&"iframe"!==t,n.isVideo=n.isDynamic?n.options.isVideo:"audio"!==t&&n.options.isVideo,n.mediaFiles=null,n.trackFiles=null,w.IS_IPAD&&n.options.iPadUseNativeControls||w.IS_IPHONE&&n.options.iPhoneUseNativeControls)n.node.setAttribute("controls",!0),w.IS_IPAD&&n.node.getAttribute("autoplay")&&n.play();else if(!n.isVideo&&(n.isVideo||!n.options.features.length&&!n.options.useDefaultControls)||w.IS_ANDROID&&n.options.AndroidUseNativeControls)n.isVideo||n.options.features.length||n.options.useDefaultControls||(n.node.style.display="none");else{n.node.removeAttribute("controls");var o=n.isVideo?u.default.t("mejs.video-player"):u.default.t("mejs.audio-player"),i=x.default.createElement("span");if(i.className=n.options.classPrefix+"offscreen",i.innerText=o,n.media.parentNode.insertBefore(i,n.media),n.container=x.default.createElement("div"),n.getElement(n.container).id=n.id,n.getElement(n.container).className=n.options.classPrefix+"container "+n.options.classPrefix+"container-keyboard-inactive "+n.media.className,n.getElement(n.container).tabIndex=0,n.getElement(n.container).setAttribute("role","application"),n.getElement(n.container).setAttribute("aria-label",o),n.getElement(n.container).innerHTML='<div class="'+n.options.classPrefix+'inner"><div class="'+n.options.classPrefix+'mediaelement"></div><div class="'+n.options.classPrefix+'layers"></div><div class="'+n.options.classPrefix+'controls"></div></div>',n.getElement(n.container).addEventListener("focus",function(e){if(!n.controlsAreVisible&&!n.hasFocus&&n.controlsEnabled){n.showControls(!0);var t=(0,m.isNodeAfter)(e.relatedTarget,n.getElement(n.container))?"."+n.options.classPrefix+"controls ."+n.options.classPrefix+"button:last-child > button":"."+n.options.classPrefix+"playpause-button > button";n.getElement(n.container).querySelector(t).focus()}}),n.node.parentNode.insertBefore(n.getElement(n.container),n.node),n.options.features.length||n.options.useDefaultControls||(n.getElement(n.container).style.background="transparent",n.getElement(n.container).querySelector("."+n.options.classPrefix+"controls").style.display="none"),n.isVideo&&"fill"===n.options.stretching&&!P.hasClass(n.getElement(n.container).parentNode,n.options.classPrefix+"fill-container")){n.outerContainer=n.media.parentNode;var r=x.default.createElement("div");r.className=n.options.classPrefix+"fill-container",n.getElement(n.container).parentNode.insertBefore(r,n.getElement(n.container)),r.appendChild(n.getElement(n.container))}w.IS_ANDROID&&P.addClass(n.getElement(n.container),n.options.classPrefix+"android"),w.IS_IOS&&P.addClass(n.getElement(n.container),n.options.classPrefix+"ios"),w.IS_IPAD&&P.addClass(n.getElement(n.container),n.options.classPrefix+"ipad"),w.IS_IPHONE&&P.addClass(n.getElement(n.container),n.options.classPrefix+"iphone"),P.addClass(n.getElement(n.container),n.isVideo?n.options.classPrefix+"video":n.options.classPrefix+"audio"),n.getElement(n.container).querySelector("."+n.options.classPrefix+"mediaelement").appendChild(n.node),(n.media.player=n).controls=n.getElement(n.container).querySelector("."+n.options.classPrefix+"controls"),n.layers=n.getElement(n.container).querySelector("."+n.options.classPrefix+"layers");var a=n.isVideo?"video":"audio",s=a.substring(0,1).toUpperCase()+a.substring(1);0<n.options[a+"Width"]||-1<n.options[a+"Width"].toString().indexOf("%")?n.width=n.options[a+"Width"]:""!==n.node.style.width&&null!==n.node.style.width?n.width=n.node.style.width:n.node.getAttribute("width")?n.width=n.node.getAttribute("width"):n.width=n.options["default"+s+"Width"],0<n.options[a+"Height"]||-1<n.options[a+"Height"].toString().indexOf("%")?n.height=n.options[a+"Height"]:""!==n.node.style.height&&null!==n.node.style.height?n.height=n.node.style.height:n.node.getAttribute("height")?n.height=n.node.getAttribute("height"):n.height=n.options["default"+s+"Height"],n.initialAspectRatio=n.height>=n.width?n.width/n.height:n.height/n.width,n.setPlayerSize(n.width,n.height),e.pluginWidth=n.width,e.pluginHeight=n.height}if(f.default.MepDefaults=e,new d.default(n.media,e,n.mediaFiles),void 0!==n.getElement(n.container)&&n.options.features.length&&n.controlsAreVisible&&!n.options.hideVideoControlsOnLoad){var l=(0,m.createEvent)("controlsshown",n.getElement(n.container));n.getElement(n.container).dispatchEvent(l)}}},{key:"showControls",value:function(e){var i=this;if(e=void 0===e||e,!i.controlsAreVisible&&i.isVideo){if(e)!function(){P.fadeIn(i.getElement(i.controls),200,function(){P.removeClass(i.getElement(i.controls),i.options.classPrefix+"offscreen");var e=(0,m.createEvent)("controlsshown",i.getElement(i.container));i.getElement(i.container).dispatchEvent(e)});for(var n=i.getElement(i.container).querySelectorAll("."+i.options.classPrefix+"control"),e=function(e,t){P.fadeIn(n[e],200,function(){P.removeClass(n[e],i.options.classPrefix+"offscreen")})},t=0,o=n.length;t<o;t++)e(t)}();else{P.removeClass(i.getElement(i.controls),i.options.classPrefix+"offscreen"),i.getElement(i.controls).style.display="",i.getElement(i.controls).style.opacity=1;for(var t=i.getElement(i.container).querySelectorAll("."+i.options.classPrefix+"control"),n=0,o=t.length;n<o;n++)P.removeClass(t[n],i.options.classPrefix+"offscreen"),t[n].style.display="";var r=(0,m.createEvent)("controlsshown",i.getElement(i.container));i.getElement(i.container).dispatchEvent(r)}i.controlsAreVisible=!0,i.setControlsSize()}}},{key:"hideControls",value:function(e,t){var i=this;if(e=void 0===e||e,!0===t||!(!i.controlsAreVisible||i.options.alwaysShowControls||i.paused&&4===i.readyState&&(!i.options.hideVideoControlsOnLoad&&i.currentTime<=0||!i.options.hideVideoControlsOnPause&&0<i.currentTime)||i.isVideo&&!i.options.hideVideoControlsOnLoad&&!i.readyState||i.ended)){if(e)!function(){P.fadeOut(i.getElement(i.controls),200,function(){P.addClass(i.getElement(i.controls),i.options.classPrefix+"offscreen"),i.getElement(i.controls).style.display="";var e=(0,m.createEvent)("controlshidden",i.getElement(i.container));i.getElement(i.container).dispatchEvent(e)});for(var n=i.getElement(i.container).querySelectorAll("."+i.options.classPrefix+"control"),e=function(e,t){P.fadeOut(n[e],200,function(){P.addClass(n[e],i.options.classPrefix+"offscreen"),n[e].style.display=""})},t=0,o=n.length;t<o;t++)e(t)}();else{P.addClass(i.getElement(i.controls),i.options.classPrefix+"offscreen"),i.getElement(i.controls).style.display="",i.getElement(i.controls).style.opacity=0;for(var n=i.getElement(i.container).querySelectorAll("."+i.options.classPrefix+"control"),o=0,r=n.length;o<r;o++)P.addClass(n[o],i.options.classPrefix+"offscreen"),n[o].style.display="";var a=(0,m.createEvent)("controlshidden",i.getElement(i.container));i.getElement(i.container).dispatchEvent(a)}i.controlsAreVisible=!1}}},{key:"startControlsTimer",value:function(e){var t=this;e=void 0!==e?e:t.options.controlsTimeoutDefault,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)}},{key:"killControlsTimer",value:function(){null!==this.controlsTimer&&(clearTimeout(this.controlsTimer),delete this.controlsTimer,this.controlsTimer=null)}},{key:"disableControls",value:function(){this.killControlsTimer(),this.controlsEnabled=!1,this.hideControls(!1,!0)}},{key:"enableControls",value:function(){this.controlsEnabled=!0,this.showControls(!1)}},{key:"_setDefaultPlayer",value:function(){var e=this;e.proxy&&e.proxy.pause(),e.proxy=new a.default(e),e.media.addEventListener("loadedmetadata",function(){0<e.getCurrentTime()&&0<e.currentMediaTime&&(e.setCurrentTime(e.currentMediaTime),w.IS_IOS||w.IS_ANDROID||e.play())})}},{key:"_meReady",value:function(e,t){var n=this,o=t.getAttribute("autoplay"),i=!(null==o||"false"===o),r=null!==e.rendererName&&/(native|html5)/i.test(n.media.rendererName);if(n.getElement(n.controls)&&n.enableControls(),n.getElement(n.container)&&n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-play")&&(n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-play").style.display=""),!n.created){if(n.created=!0,n.media=e,n.domNode=t,!(w.IS_ANDROID&&n.options.AndroidUseNativeControls||w.IS_IPAD&&n.options.iPadUseNativeControls||w.IS_IPHONE&&n.options.iPhoneUseNativeControls)){if(!n.isVideo&&!n.options.features.length&&!n.options.useDefaultControls)return i&&r&&n.play(),void(n.options.success&&("string"==typeof n.options.success?S.default[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n)));if(n.featurePosition={},n._setDefaultPlayer(),n.buildposter(n,n.getElement(n.controls),n.getElement(n.layers),n.media),n.buildkeyboard(n,n.getElement(n.controls),n.getElement(n.layers),n.media),n.buildoverlays(n,n.getElement(n.controls),n.getElement(n.layers),n.media),n.options.useDefaultControls){var a=["playpause","current","progress","duration","tracks","volume","fullscreen"];n.options.features=a.concat(n.options.features.filter(function(e){return-1===a.indexOf(e)}))}n.buildfeatures(n,n.getElement(n.controls),n.getElement(n.layers),n.media);var s=(0,m.createEvent)("controlsready",n.getElement(n.container));n.getElement(n.container).dispatchEvent(s),n.setPlayerSize(n.width,n.height),n.setControlsSize(),n.isVideo&&(n.clickToPlayPauseCallback=function(){if(n.options.clickToPlayPause){var e=n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-button"),t=e.getAttribute("aria-pressed");n.paused&&t?n.pause():n.paused?n.play():n.pause(),e.setAttribute("aria-pressed",!t),n.getElement(n.container).focus()}},n.createIframeLayer(),n.media.addEventListener("click",n.clickToPlayPauseCallback),!w.IS_ANDROID&&!w.IS_IOS||n.options.alwaysShowControls?(n.getElement(n.container).addEventListener("mouseenter",function(){n.controlsEnabled&&(n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(n.options.controlsTimeoutMouseEnter)))}),n.getElement(n.container).addEventListener("mousemove",function(){n.controlsEnabled&&(n.controlsAreVisible||n.showControls(),n.options.alwaysShowControls||n.startControlsTimer(n.options.controlsTimeoutMouseEnter))}),n.getElement(n.container).addEventListener("mouseleave",function(){n.controlsEnabled&&(n.paused||n.options.alwaysShowControls||n.startControlsTimer(n.options.controlsTimeoutMouseLeave))})):n.node.addEventListener("touchstart",function(){n.controlsAreVisible?n.hideControls(!1):n.controlsEnabled&&n.showControls(!1)},!!w.SUPPORT_PASSIVE_EVENT&&{passive:!0}),n.options.hideVideoControlsOnLoad&&n.hideControls(!1),n.options.enableAutosize&&n.media.addEventListener("loadedmetadata",function(e){var t=void 0!==e?e.detail.target||e.target:n.media;n.options.videoHeight<=0&&!n.domNode.getAttribute("height")&&!n.domNode.style.height&&null!==t&&!isNaN(t.videoHeight)&&(n.setPlayerSize(t.videoWidth,t.videoHeight),n.setControlsSize(),n.media.setSize(t.videoWidth,t.videoHeight))})),n.media.addEventListener("play",function(){for(var e in (n.hasFocus=!0, f.default.players))if(f.default.players.hasOwnProperty(e)){var t=f.default.players[e];t.id===n.id||!n.options.pauseOtherPlayers||t.paused||t.ended||!0===t.options.ignorePauseOtherPlayersOption||(t.pause(),t.hasFocus=!1)}w.IS_ANDROID||w.IS_IOS||n.options.alwaysShowControls||!n.isVideo||n.hideControls()}),n.media.addEventListener("ended",function(){if(n.options.autoRewind)try{n.setCurrentTime(0),setTimeout(function(){var e=n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-loading");e&&e.parentNode&&(e.parentNode.style.display="none")},20)}catch(e){}"function"==typeof n.media.renderer.stop?n.media.renderer.stop():n.pause(),n.setProgressRail&&n.setProgressRail(),n.setCurrentRail&&n.setCurrentRail(),n.options.loop?n.play():!n.options.alwaysShowControls&&n.controlsEnabled&&n.showControls()}),n.media.addEventListener("loadedmetadata",function(){(0,c.calculateTimeFormat)(n.getDuration(),n.options,n.options.framesPerSecond||25),n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.isFullScreen||(n.setPlayerSize(n.width,n.height),n.setControlsSize())});var l=null;n.media.addEventListener("timeupdate",function(){isNaN(n.getDuration())||l===n.getDuration()||(l=n.getDuration(),(0,c.calculateTimeFormat)(l,n.options,n.options.framesPerSecond||25),n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.setControlsSize())}),n.getElement(n.container).addEventListener("click",function(e){P.addClass(e.currentTarget,n.options.classPrefix+"container-keyboard-inactive")}),n.getElement(n.container).addEventListener("focusin",function(e){P.removeClass(e.currentTarget,n.options.classPrefix+"container-keyboard-inactive"),!n.isVideo||w.IS_ANDROID||w.IS_IOS||!n.controlsEnabled||n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(n.options.controlsTimeoutMouseEnter))}),n.getElement(n.container).addEventListener("focusout",function(e){setTimeout(function(){e.relatedTarget&&n.keyboardAction&&!e.relatedTarget.closest("."+n.options.classPrefix+"container")&&(n.keyboardAction=!1,!n.isVideo||n.options.alwaysShowControls||n.paused||n.startControlsTimer(n.options.controlsTimeoutMouseLeave))},0)}),setTimeout(function(){n.setPlayerSize(n.width,n.height),n.setControlsSize()},0),n.globalResizeCallback=function(){n.isFullScreen||w.HAS_TRUE_NATIVE_FULLSCREEN&&x.default.webkitIsFullScreen||n.setPlayerSize(n.width,n.height),n.setControlsSize()},n.globalBind("resize",n.globalResizeCallback)}i&&r&&n.play(),n.options.success&&("string"==typeof n.options.success?S.default[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n))}}},{key:"_handleError",value:function(e,t,n){var o=this,i=o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-play");i&&(i.style.display="none"),o.options.error&&o.options.error(e,t,n),o.getElement(o.container).querySelector("."+o.options.classPrefix+"cannotplay")&&o.getElement(o.container).querySelector("."+o.options.classPrefix+"cannotplay").remove();var r=x.default.createElement("div");r.className=o.options.classPrefix+"cannotplay",r.style.width="100%",r.style.height="100%";var a="function"==typeof o.options.customError?o.options.customError(o.media,o.media.originalNode):o.options.customError,s="";if(!a){var l=o.media.originalNode.getAttribute("poster");if(l&&(s='<img src="'+l+'" alt="'+f.default.i18n.t("mejs.download-file")+'">'),e.message&&(a="<p>"+e.message+"</p>"),e.urls)for(var d=0,u=e.urls.length;d<u;d++){var c=e.urls[d];a+='<a href="'+c.src+'" data-type="'+c.type+'"><span>'+f.default.i18n.t("mejs.download-file")+": "+c.src+"</span></a>"}}a&&o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-error")&&(r.innerHTML=a,o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-error").innerHTML=""+s+r.outerHTML,o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-error").parentNode.style.display="block"),o.controlsEnabled&&o.disableControls()}},{key:"setPlayerSize",value:function(e,t){var n=this;if(!n.options.setDimensions)return!1;switch(void 0!==e&&(n.width=e),void 0!==t&&(n.height=t),n.options.stretching){case"fill":n.isVideo?n.setFillMode():n.setDimensions(n.width,n.height);break;case"responsive":n.setResponsiveMode();break;case"none":n.setDimensions(n.width,n.height);break;default:!0===n.hasFluidMode()?n.setResponsiveMode():n.setDimensions(n.width,n.height)}}},{key:"hasFluidMode",value:function(){var e=this;return-1!==e.height.toString().indexOf("%")||e.node&&e.node.style.maxWidth&&"none"!==e.node.style.maxWidth&&e.node.style.maxWidth!==e.width||e.node&&e.node.currentStyle&&"100%"===e.node.currentStyle.maxWidth}},{key:"setResponsiveMode",value:function(){var e,o=this,t=function(){for(var t=void 0,n=o.getElement(o.container);n;){try{if(w.IS_FIREFOX&&"html"===n.tagName.toLowerCase()&&S.default.self!==S.default.top&&null!==S.default.frameElement)return S.default.frameElement;t=n.parentElement}catch(e){t=n.parentElement}if(t&&P.visible(t))return t;n=t}return null}(),n=t?getComputedStyle(t,null):getComputedStyle(x.default.body,null),i=o.isVideo?o.node.videoWidth&&0<o.node.videoWidth?o.node.videoWidth:o.node.getAttribute("width")?o.node.getAttribute("width"):o.options.defaultVideoWidth:o.options.defaultAudioWidth,r=o.isVideo?o.node.videoHeight&&0<o.node.videoHeight?o.node.videoHeight:o.node.getAttribute("height")?o.node.getAttribute("height"):o.options.defaultVideoHeight:o.options.defaultAudioHeight,a=(e=1,o.isVideo&&(e=o.node.videoWidth&&0<o.node.videoWidth&&o.node.videoHeight&&0<o.node.videoHeight?o.height>=o.width?o.node.videoWidth/o.node.videoHeight:o.node.videoHeight/o.node.videoWidth:o.initialAspectRatio,(isNaN(e)||e<.01||100<e)&&(e=1)),e),s=parseFloat(n.height),l=void 0,d=parseFloat(n.width);if(l=o.isVideo?"100%"===o.height?parseFloat(d*r/i,10):o.height>=o.width?parseFloat(d/a,10):parseFloat(d*a,10):r,isNaN(l)&&(l=s),0<o.getElement(o.container).parentNode.length&&"body"===o.getElement(o.container).parentNode.tagName.toLowerCase()&&(d=S.default.innerWidth||x.default.documentElement.clientWidth||x.default.body.clientWidth,l=S.default.innerHeight||x.default.documentElement.clientHeight||x.default.body.clientHeight),l&&d){o.getElement(o.container).style.width=d+"px",o.getElement(o.container).style.height=l+"px",o.node.style.width="100%",o.node.style.height="100%",o.isVideo&&o.media.setSize&&o.media.setSize(d,l);for(var u=o.getElement(o.layers).children,c=0,f=u.length;c<f;c++)u[c].style.width="100%",u[c].style.height="100%"}}},{key:"setFillMode",value:function(){var e=this,t=S.default.self!==S.default.top&&null!==S.default.frameElement,n=function(){for(var t=void 0,n=e.getElement(e.container);n;){try{if(w.IS_FIREFOX&&"html"===n.tagName.toLowerCase()&&S.default.self!==S.default.top&&null!==S.default.frameElement)return S.default.frameElement;t=n.parentElement}catch(e){t=n.parentElement}if(t&&P.visible(t))return t;n=t}return null}(),o=n?getComputedStyle(n,null):getComputedStyle(x.default.body,null);"none"!==e.node.style.height&&e.node.style.height!==e.height&&(e.node.style.height="auto"),"none"!==e.node.style.maxWidth&&e.node.style.maxWidth!==e.width&&(e.node.style.maxWidth="none"),"none"!==e.node.style.maxHeight&&e.node.style.maxHeight!==e.height&&(e.node.style.maxHeight="none"),e.node.currentStyle&&("100%"===e.node.currentStyle.height&&(e.node.currentStyle.height="auto"),"100%"===e.node.currentStyle.maxWidth&&(e.node.currentStyle.maxWidth="none"),"100%"===e.node.currentStyle.maxHeight&&(e.node.currentStyle.maxHeight="none")),t||parseFloat(o.width)||(n.style.width=e.media.offsetWidth+"px"),t||parseFloat(o.height)||(n.style.height=e.media.offsetHeight+"px"),o=getComputedStyle(n);var i=parseFloat(o.width),r=parseFloat(o.height);e.setDimensions("100%","100%");var a=e.getElement(e.container).querySelector("."+e.options.classPrefix+"poster>img");a&&(a.style.display="");for(var s=e.getElement(e.container).querySelectorAll("object, embed, iframe, video"),l=e.height,d=e.width,u=i,c=l*i/d,f=d*r/l,p=r,m=i<f==!1,h=m?Math.floor(u):Math.floor(f),v=m?Math.floor(c):Math.floor(p),g=m?i+"px":h+"px",y=m?v+"px":r+"px",E=0,b=s.length;E<b;E++)s[E].style.height=y,s[E].style.width=g,e.media.setSize&&e.media.setSize(g,y),s[E].style.marginLeft=Math.floor((i-h)/2)+"px",s[E].style.marginTop=0}},{key:"setDimensions",value:function(e,t){var n=this;e=(0,m.isString)(e)&&-1<e.indexOf("%")?e:parseFloat(e)+"px",t=(0,m.isString)(t)&&-1<t.indexOf("%")?t:parseFloat(t)+"px",n.getElement(n.container).style.width=e,n.getElement(n.container).style.height=t;for(var o=n.getElement(n.layers).children,i=0,r=o.length;i<r;i++)o[i].style.width=e,o[i].style.height=t}},{key:"setControlsSize",value:function(){var t=this;if(P.visible(t.getElement(t.container)))if(t.rail&&P.visible(t.rail)){for(var e=t.total?getComputedStyle(t.total,null):null,n=e?parseFloat(e.marginLeft)+parseFloat(e.marginRight):0,o=getComputedStyle(t.rail),i=parseFloat(o.marginLeft)+parseFloat(o.marginRight),r=0,a=P.siblings(t.rail,function(e){return e!==t.rail}),s=a.length,l=0;l<s;l++)r+=a[l].offsetWidth;r+=n+(0===n?2*i:i)+1,t.getElement(t.container).style.minWidth=r+"px";var d=(0,m.createEvent)("controlsresize",t.getElement(t.container));t.getElement(t.container).dispatchEvent(d)}else{for(var u=t.getElement(t.controls).children,c=0,f=0,p=u.length;f<p;f++)c+=u[f].offsetWidth;t.getElement(t.container).style.minWidth=c+"px"}}},{key:"addControlElement",value:function(e,t){var n=this;if(void 0!==n.featurePosition[t]){var o=n.getElement(n.controls).children[n.featurePosition[t]-1];o.parentNode.insertBefore(e,o.nextSibling)}else{n.getElement(n.controls).appendChild(e);for(var i=n.getElement(n.controls).children,r=0,a=i.length;r<a;r++)if(e===i[r]){n.featurePosition[t]=r;break}}}},{key:"createIframeLayer",value:function(){var t=this;if(t.isVideo&&null!==t.media.rendererName&&-1<t.media.rendererName.indexOf("iframe")&&!x.default.getElementById(t.media.id+"-iframe-overlay")){var e=x.default.createElement("div"),n=x.default.getElementById(t.media.id+"_"+t.media.rendererName);e.id=t.media.id+"-iframe-overlay",e.className=t.options.classPrefix+"iframe-overlay",e.addEventListener("click",function(e){t.options.clickToPlayPause&&(t.paused?t.play():t.pause(),e.preventDefault(),e.stopPropagation())}),n.parentNode.insertBefore(e,n)}}},{key:"resetSize",value:function(){var e=this;setTimeout(function(){e.setPlayerSize(e.width,e.height),e.setControlsSize()},50)}},{key:"setPoster",value:function(e){var t=this;if(t.getElement(t.container)){var n=t.getElement(t.container).querySelector("."+t.options.classPrefix+"poster");n||((n=x.default.createElement("div")).className=t.options.classPrefix+"poster "+t.options.classPrefix+"layer",t.getElement(t.layers).appendChild(n));var o=n.querySelector("img");!o&&e&&((o=x.default.createElement("img")).className=t.options.classPrefix+"poster-img",o.width="100%",o.height="100%",n.style.display="",n.appendChild(o)),e?(o.setAttribute("src",e),n.style.backgroundImage='url("'+e+'")',n.style.display=""):o?(n.style.backgroundImage="none",n.style.display="none",o.remove()):n.style.display="none"}else(w.IS_IPAD&&t.options.iPadUseNativeControls||w.IS_IPHONE&&t.options.iPhoneUseNativeControls||w.IS_ANDROID&&t.options.AndroidUseNativeControls)&&(t.media.originalNode.poster=e)}},{key:"changeSkin",value:function(e){var t=this;t.getElement(t.container).className=t.options.classPrefix+"container "+e,t.setPlayerSize(t.width,t.height),t.setControlsSize()}},{key:"globalBind",value:function(e,n){var o=this.node?this.node.ownerDocument:x.default;if((e=(0,m.splitEvents)(e,this.id)).d)for(var t=e.d.split(" "),i=0,r=t.length;i<r;i++)t[i].split(".").reduce(function(e,t){return o.addEventListener(t,n,!1),t},"");if(e.w)for(var a=e.w.split(" "),s=0,l=a.length;s<l;s++)a[s].split(".").reduce(function(e,t){return S.default.addEventListener(t,n,!1),t},"")}},{key:"globalUnbind",value:function(e,n){var o=this.node?this.node.ownerDocument:x.default;if((e=(0,m.splitEvents)(e,this.id)).d)for(var t=e.d.split(" "),i=0,r=t.length;i<r;i++)t[i].split(".").reduce(function(e,t){return o.removeEventListener(t,n,!1),t},"");if(e.w)for(var a=e.w.split(" "),s=0,l=a.length;s<l;s++)a[s].split(".").reduce(function(e,t){return S.default.removeEventListener(t,n,!1),t},"")}},{key:"buildfeatures",value:function(e,t,n,o){for(var i=0,r=this.options.features.length;i<r;i++){var a=this.options.features[i];if(this["build"+a])try{this["build"+a](e,t,n,o)}catch(e){console.error("error building "+a,e)}}}},{key:"buildposter",value:function(e,t,n,o){var i=this,r=x.default.createElement("div");r.className=i.options.classPrefix+"poster "+i.options.classPrefix+"layer",n.appendChild(r);var a=o.originalNode.getAttribute("poster");""!==e.options.poster&&(a&&w.IS_IOS&&o.originalNode.removeAttribute("poster"),a=e.options.poster),a?i.setPoster(a):null!==i.media.renderer&&"function"==typeof i.media.renderer.getPosterUrl?i.setPoster(i.media.renderer.getPosterUrl()):r.style.display="none",o.addEventListener("play",function(){r.style.display="none"}),o.addEventListener("playing",function(){r.style.display="none"}),e.options.showPosterWhenEnded&&e.options.autoRewind&&o.addEventListener("ended",function(){r.style.display=""}),o.addEventListener("error",function(){r.style.display="none"}),e.options.showPosterWhenPaused&&o.addEventListener("pause",function(){e.ended||(r.style.display="")})}},{key:"buildoverlays",value:function(t,e,n,o){if(t.isVideo){var i=this,r=x.default.createElement("div"),a=x.default.createElement("div"),s=x.default.createElement("div");r.style.display="none",r.className=i.options.classPrefix+"overlay "+i.options.classPrefix+"layer",r.innerHTML='<div class="'+i.options.classPrefix+'overlay-loading"><span class="'+i.options.classPrefix+'overlay-loading-bg-img"></span></div>',n.appendChild(r),a.style.display="none",a.className=i.options.classPrefix+"overlay "+i.options.classPrefix+"layer",a.innerHTML='<div class="'+i.options.classPrefix+'overlay-error"></div>',n.appendChild(a),s.className=i.options.classPrefix+"overlay "+i.options.classPrefix+"layer "+i.options.classPrefix+"overlay-play",s.innerHTML='<div class="'+i.options.classPrefix+'overlay-button" role="button" tabindex="0" aria-label="'+u.default.t("mejs.play")+'" aria-pressed="false"></div>',s.addEventListener("click",function(){if(i.options.clickToPlayPause){var e=i.getElement(i.container).querySelector("."+i.options.classPrefix+"overlay-button"),t=e.getAttribute("aria-pressed");i.paused?i.play():i.pause(),e.setAttribute("aria-pressed",!!t),i.getElement(i.container).focus()}}),s.addEventListener("keydown",function(e){var t=e.keyCode||e.which||0;if(13===t||w.IS_FIREFOX&&32===t){var n=(0,m.createEvent)("click",s);return s.dispatchEvent(n),!1}}),n.appendChild(s),null!==i.media.rendererName&&(/(youtube|facebook)/i.test(i.media.rendererName)&&!(i.media.originalNode.getAttribute("poster")||t.options.poster||"function"==typeof i.media.renderer.getPosterUrl&&i.media.renderer.getPosterUrl())||w.IS_STOCK_ANDROID||i.media.originalNode.getAttribute("autoplay"))&&(s.style.display="none");var l=!1;o.addEventListener("play",function(){s.style.display="none",r.style.display="none",a.style.display="none",l=!1}),o.addEventListener("playing",function(){s.style.display="none",r.style.display="none",a.style.display="none",l=!1}),o.addEventListener("seeking",function(){s.style.display="none",r.style.display="",l=!1}),o.addEventListener("seeked",function(){s.style.display=i.paused&&!w.IS_STOCK_ANDROID?"":"none",r.style.display="none",l=!1}),o.addEventListener("pause",function(){r.style.display="none",w.IS_STOCK_ANDROID||l||(s.style.display=""),l=!1}),o.addEventListener("waiting",function(){r.style.display="",l=!1}),o.addEventListener("loadeddata",function(){r.style.display="",w.IS_ANDROID&&(o.canplayTimeout=setTimeout(function(){if(x.default.createEvent){var e=x.default.createEvent("HTMLEvents");return e.initEvent("canplay",!0,!0),o.dispatchEvent(e)}},300)),l=!1}),o.addEventListener("canplay",function(){r.style.display="none",clearTimeout(o.canplayTimeout),l=!1}),o.addEventListener("error",function(e){i._handleError(e,i.media,i.node),r.style.display="none",s.style.display="none",l=!0}),o.addEventListener("loadedmetadata",function(){i.controlsEnabled||i.enableControls()}),o.addEventListener("keydown",function(e){i.onkeydown(t,o,e),l=!1})}}},{key:"buildkeyboard",value:function(o,e,t,i){var r=this;r.getElement(r.container).addEventListener("keydown",function(){r.keyboardAction=!0}),r.globalKeydownCallback=function(e){var t=x.default.activeElement.closest("."+r.options.classPrefix+"container"),n=r.media.closest("."+r.options.classPrefix+"container");return r.hasFocus=!(!t||!n||t.id!==n.id),r.onkeydown(o,i,e)},r.globalClickCallback=function(e){r.hasFocus=!!e.target.closest("."+r.options.classPrefix+"container")},r.globalBind("keydown",r.globalKeydownCallback),r.globalBind("click",r.globalClickCallback)}},{key:"onkeydown",value:function(e,t,n){if(e.hasFocus&&e.options.enableKeyboard)for(var o=0,i=e.options.keyActions.length;o<i;o++)for(var r=e.options.keyActions[o],a=0,s=r.keys.length;a<s;a++)if(n.keyCode===r.keys[a])return r.action(e,t,n.keyCode,n),n.preventDefault(),void n.stopPropagation();return!0}},{key:"play",value:function(){this.proxy.play()}},{key:"pause",value:function(){this.proxy.pause()}},{key:"load",value:function(){this.proxy.load()}},{key:"setCurrentTime",value:function(e){this.proxy.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){return this.proxy.currentTime}},{key:"getDuration",value:function(){return this.proxy.duration}},{key:"setVolume",value:function(e){this.proxy.volume=e}},{key:"getVolume",value:function(){return this.proxy.getVolume()}},{key:"setMuted",value:function(e){this.proxy.setMuted(e)}},{key:"setSrc",value:function(e){this.controlsEnabled||this.enableControls(),this.proxy.setSrc(e)}},{key:"getSrc",value:function(){return this.proxy.getSrc()}},{key:"canPlayType",value:function(e){return this.proxy.canPlayType(e)}},{key:"remove",value:function(){var l=this,d=l.media.rendererName,u=l.media.originalNode.src;for(var e in l.options.features){var t=l.options.features[e];if(l["clean"+t])try{l["clean"+t](l,l.getElement(l.layers),l.getElement(l.controls),l.media)}catch(e){console.error("error cleaning "+t,e)}}var n=l.node.getAttribute("width"),o=l.node.getAttribute("height");(n?-1===n.indexOf("%")&&(n+="px"):n="auto",o?-1===o.indexOf("%")&&(o+="px"):o="auto",l.node.style.width=n,l.node.style.height=o,l.setPlayerSize(0,0),l.isDynamic?l.getElement(l.container).parentNode.insertBefore(l.node,l.getElement(l.container)):function(){l.node.setAttribute("controls",!0),l.node.setAttribute("id",l.node.getAttribute("id").replace("_"+d,"").replace("_from_mejs",""));var e=l.getElement(l.container).querySelector("."+l.options.classPrefix+"poster>img");(e&&l.node.setAttribute("poster",e.src),delete l.node.autoplay,l.node.setAttribute("src",""),""!==l.media.canPlayType((0,p.getTypeFromFile)(u))&&l.node.setAttribute("src",u),d&&-1<d.indexOf("iframe"))&&x.default.getElementById(l.media.id+"-iframe-overlay").remove();var i=l.node.cloneNode();if(i.style.display="",l.getElement(l.container).parentNode.insertBefore(i,l.getElement(l.container)),l.node.remove(),l.mediaFiles)for(var t=0,n=l.mediaFiles.length;t<n;t++){var o=x.default.createElement("source");o.setAttribute("src",l.mediaFiles[t].src),o.setAttribute("type",l.mediaFiles[t].type),i.appendChild(o)}if(l.trackFiles)for(var r=function(e,t){var n=l.trackFiles[e],o=x.default.createElement("track");o.kind=n.kind,o.label=n.label,o.srclang=n.srclang,o.src=n.src,i.appendChild(o),o.addEventListener("load",function(){this.mode="showing",i.textTracks[e].mode="showing"})},a=0,s=l.trackFiles.length;a<s;a++)r(a);delete l.node,delete l.mediaFiles,delete l.trackFiles}(),l.media.renderer&&"function"==typeof l.media.renderer.destroy&&l.media.renderer.destroy(),delete f.default.players[l.id],"object"===i(l.getElement(l.container)))&&(l.getElement(l.container).parentNode.querySelector("."+l.options.classPrefix+"offscreen").remove(),l.getElement(l.container).remove());l.globalUnbind("resize",l.globalResizeCallback),l.globalUnbind("keydown",l.globalKeydownCallback),l.globalUnbind("click",l.globalClickCallback),delete l.media.player}},{key:"paused",get:function(){return this.proxy.paused}},{key:"muted",get:function(){return this.proxy.muted},set:function(e){this.setMuted(e)}},{key:"ended",get:function(){return this.proxy.ended}},{key:"readyState",get:function(){return this.proxy.readyState}},{key:"currentTime",set:function(e){this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"volume",set:function(e){this.setVolume(e)},get:function(){return this.getVolume()}},{key:"src",set:function(e){this.setSrc(e)},get:function(){return this.getSrc()}}]),r;}();S.default.MediaElementPlayer=l,f.default.MediaElementPlayer=l,n.default=l},{17:17,2:2,25:25,26:26,27:27,28:28,3:3,30:30,5:5,6:6,7:7}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e(3),a=(o=r)&&o.__esModule?o:{default:o};var s=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.media=t.media,this.isVideo=t.isVideo,this.classPrefix=t.options.classPrefix,this.createIframeLayer=function(){return t.createIframeLayer()},this.setPoster=function(e){return t.setPoster(e)},this}return i(e,[{key:"play",value:function(){this.media.play()}},{key:"pause",value:function(){this.media.pause()}},{key:"load",value:function(){this.isLoaded||this.media.load(),this.isLoaded=!0}},{key:"setCurrentTime",value:function(e){this.media.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){return this.media.currentTime}},{key:"getDuration",value:function(){var e=this.media.getDuration();return e===1/0&&this.media.seekable&&this.media.seekable.length&&(e=this.media.seekable.end(0)),e}},{key:"setVolume",value:function(e){this.media.setVolume(e)}},{key:"getVolume",value:function(){return this.media.getVolume()}},{key:"setMuted",value:function(e){this.media.setMuted(e)}},{key:"setSrc",value:function(e){var t=this,n=document.getElementById(t.media.id+"-iframe-overlay");n&&n.remove(),t.media.setSrc(e),t.createIframeLayer(),null!==t.media.renderer&&"function"==typeof t.media.renderer.getPosterUrl&&t.setPoster(t.media.renderer.getPosterUrl())}},{key:"getSrc",value:function(){return this.media.getSrc()}},{key:"canPlayType",value:function(e){return this.media.canPlayType(e)}},{key:"paused",get:function(){return this.media.paused}},{key:"muted",set:function(e){this.setMuted(e)},get:function(){return this.media.muted}},{key:"ended",get:function(){return this.media.ended}},{key:"readyState",get:function(){return this.media.readyState}},{key:"currentTime",set:function(e){this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"remainingTime",get:function(){return this.getDuration()-this.currentTime()}},{key:"volume",set:function(e){this.setVolume(e)},get:function(){return this.getVolume()}},{key:"src",set:function(e){this.setSrc(e)},get:function(){return this.getSrc()}}]),e}();n.default=s,a.default.DefaultPlayer=s},{3:3}],18:[function(e,t,n){"use strict";a(e(3));var o,i=a(e(7)),r=a(e(16));function a(e){return e&&e.__esModule?e:{default:e}}"undefined"!=typeof jQuery?i.default.$=jQuery:"undefined"!=typeof Zepto?i.default.$=Zepto:"undefined"!=typeof ender&&(i.default.$=ender),void 0!==(o=i.default.$)&&(o.fn.mediaelementplayer=function(e){return!1===e?this.each(function(){var e=o(this).data("mediaelementplayer");e&&e.remove(),o(this).removeData("mediaelementplayer")}):this.each(function(){o(this).data("mediaelementplayer",new r.default(this,e))}),this},o(document).ready(function(){o("."+i.default.MepDefaults.classPrefix+"player").mediaelementplayer()}))},{16:16,3:3,7:7}],19:[function(e,t,n){"use strict";var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=a(e(3)),x=a(e(7)),w=e(8),P=e(27),o=e(28),i=e(25),r=e(26);function a(e){return e&&e.__esModule?e:{default:e}}var T={promise:null,load:function(e){return"undefined"!=typeof dashjs?T.promise=new Promise(function(e){e()}).then(function(){T._createPlayer(e)}):(e.options.path="string"==typeof e.options.path?e.options.path:"https://cdn.dashjs.org/latest/dash.all.min.js",T.promise=T.promise||(0,r.loadScript)(e.options.path),T.promise.then(function(){T._createPlayer(e)})),T.promise},_createPlayer:function(e){var t=dashjs.MediaPlayer().create();return S.default["__ready__"+e.id](t),t}},s={name:"native_dash",options:{prefix:"native_dash",dash:{path:"https://cdn.dashjs.org/latest/dash.all.min.js",debug:!1,drm:{},robustnessLevel:""}},canPlayType:function(e){return i.HAS_MSE&&-1<["application/dash+xml"].indexOf(e.toLowerCase())},create:function(s,l,e){var t=s.originalNode,r=s.id+"_"+l.prefix,a=t.autoplay,n=t.children,d=null,u=null;t.removeAttribute("type");for(var o=0,i=n.length;o<i;o++)n[o].removeAttribute("type");d=t.cloneNode(!0),l=Object.assign(l,s.options);for(var c=x.default.html5media.properties,f=x.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),p=function(e){var t=(0,P.createEvent)(e.type,s);s.dispatchEvent(t)},m=function(i){var e=""+i.substring(0,1).toUpperCase()+i.substring(1);d["get"+e]=function(){return null!==u?d[i]:null},d["set"+e]=function(e){if(-1===x.default.html5media.readOnlyProperties.indexOf(i))if("src"===i){var t="object"===(void 0===e?"undefined":b(e))&&e.src?e.src:e;if(d[i]=t,null!==u){u.reset();for(var n=0,o=f.length;n<o;n++)d.removeEventListener(f[n],p);u=T._createPlayer({options:l.dash,id:r}),e&&"object"===(void 0===e?"undefined":b(e))&&"object"===b(e.drm)&&(u.setProtectionData(e.drm),(0,P.isString)(l.dash.robustnessLevel)&&l.dash.robustnessLevel&&u.getProtectionController().setRobustnessLevel(l.dash.robustnessLevel)),u.attachSource(t),a&&u.play()}}else d[i]=e}},h=0,v=c.length;h<v;h++)m(c[h]);if(S.default["__ready__"+r]=function(e){s.dashPlayer=u=e;for(var t,n=dashjs.MediaPlayer.events,o=0,i=f.length;o<i;o++)"loadedmetadata"===(t=f[o])&&(u.initialize(),u.attachView(d),u.setAutoPlay(!1),"object"!==b(l.dash.drm)||x.default.Utils.isObjectEmpty(l.dash.drm)||(u.setProtectionData(l.dash.drm),(0,P.isString)(l.dash.robustnessLevel)&&l.dash.robustnessLevel&&u.getProtectionController().setRobustnessLevel(l.dash.robustnessLevel)),u.attachSource(d.getSrc())),d.addEventListener(t,p);var r=function(e){if("error"===e.type.toLowerCase())s.generateError(e.message,d.src),console.error(e);else{var t=(0,P.createEvent)(e.type,s);t.data=e,s.dispatchEvent(t)}};for(var a in n)n.hasOwnProperty(a)&&u.on(n[a],function(e){return r(e)})},e&&0<e.length)for(var g=0,y=e.length;g<y;g++)if(w.renderer.renderers[l.prefix].canPlayType(e[g].type)){d.setAttribute("src",e[g].src),void 0!==e[g].drm&&(l.dash.drm=e[g].drm);break}d.setAttribute("id",r),t.parentNode.insertBefore(d,t),t.autoplay=!1,t.style.display="none",d.setSize=function(e,t){return d.style.width=e+"px",d.style.height=t+"px",d},d.hide=function(){return d.pause(),d.style.display="none",d},d.show=function(){return d.style.display="",d},d.destroy=function(){null!==u&&u.reset()};var E=(0,P.createEvent)("rendererready",d);return s.dispatchEvent(E),s.promises.push(T.load({options:l.dash,id:r})),d}};o.typeChecks.push(function(e){return~e.toLowerCase().indexOf(".mpd")?"application/dash+xml":null}),w.renderer.add(s)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PluginDetector=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=o(e(3)),k=o(e(2)),_=o(e(7)),N=o(e(5)),A=e(8),L=e(27),F=e(25),j=e(28);function o(e){return e&&e.__esModule?e:{default:e}}var r=n.PluginDetector={plugins:[],hasPluginVersion:function(e,t){var n=r.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,n[0]>t[0]||n[0]===t[0]&&n[1]>t[1]||n[0]===t[0]&&n[1]===t[1]&&n[2]>=t[2]},addPlugin:function(e,t,n,o,i){r.plugins[e]=r.detectPlugin(t,n,o,i)},detectPlugin:function(e,t,n,o){var i=[0,0,0],r=void 0,a=void 0;if(null!==F.NAV.plugins&&void 0!==F.NAV.plugins&&"object"===d(F.NAV.plugins[e])){if((r=F.NAV.plugins[e].description)&&(void 0===F.NAV.mimeTypes||!F.NAV.mimeTypes[t]||F.NAV.mimeTypes[t].enabledPlugin))for(var s=0,l=(i=r.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".")).length;s<l;s++)i[s]=parseInt(i[s].match(/\d+/),10)}else if(void 0!==C.default.ActiveXObject)try{(a=new ActiveXObject(n))&&(i=o(a))}catch(e){}return i}};r.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],n=e.GetVariable("$version");return n&&(n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]),t});var i={create:function(e,t,n){var r={},o=!1;r.options=t,r.id=e.id+"_"+r.options.prefix,r.mediaElement=e,r.flashState={},r.flashApi=null,r.flashApiStack=[];for(var i=_.default.html5media.properties,a=function(t){r.flashState[t]=null;var e=""+t.substring(0,1).toUpperCase()+t.substring(1);r["get"+e]=function(){if(null!==r.flashApi){if("function"==typeof r.flashApi["get_"+t]){var e=r.flashApi["get_"+t]();return"buffered"===t?{start:function(){return 0},end:function(){return e},length:1}:e}return null}return null},r["set"+e]=function(e){if("src"===t&&(e=(0,j.absolutizeUrl)(e)),null!==r.flashApi&&void 0!==r.flashApi["set_"+t])try{r.flashApi["set_"+t](e)}catch(e){}else r.flashApiStack.push({type:"set",propName:t,value:e})}},s=0,l=i.length;s<l;s++)a(i[s]);var d=_.default.html5media.methods,u=function(e){r[e]=function(){if(o)if(null!==r.flashApi){if(r.flashApi["fire_"+e])try{r.flashApi["fire_"+e]()}catch(e){}}else r.flashApiStack.push({type:"call",methodName:e})}};d.push("stop");for(var c=0,f=d.length;c<f;c++)u(d[c]);for(var p=["rendererready"],m=0,h=p.length;m<h;m++){var v=(0,L.createEvent)(p[m],r);e.dispatchEvent(v)}C.default["__ready__"+r.id]=function(){if(r.flashReady=!0,r.flashApi=k.default.getElementById("__"+r.id),r.flashApiStack.length)for(var e=0,t=r.flashApiStack.length;e<t;e++){var n=r.flashApiStack[e];if("set"===n.type){var o=n.propName,i=""+o.substring(0,1).toUpperCase()+o.substring(1);r["set"+i](n.value)}else"call"===n.type&&r[n.methodName]()}},C.default["__event__"+r.id]=function(e,t){var n=(0,L.createEvent)(e,r);if(t)try{n.data=JSON.parse(t),n.details.data=JSON.parse(t)}catch(e){n.message=t}r.mediaElement.dispatchEvent(n)},r.flashWrapper=k.default.createElement("div"),-1===["always","sameDomain"].indexOf(r.options.shimScriptAccess)&&(r.options.shimScriptAccess="sameDomain");var g=e.originalNode.autoplay,y=["uid="+r.id,"autoplay="+g,"allowScriptAccess="+r.options.shimScriptAccess,"preload="+(e.originalNode.getAttribute("preload")||"")],E=null!==e.originalNode&&"video"===e.originalNode.tagName.toLowerCase(),b=E?e.originalNode.height:1,S=E?e.originalNode.width:1;e.originalNode.getAttribute("src")&&y.push("src="+e.originalNode.getAttribute("src")),!0===r.options.enablePseudoStreaming&&(y.push("pseudostreamstart="+r.options.pseudoStreamingStartQueryParam),y.push("pseudostreamtype="+r.options.pseudoStreamingType)),r.options.streamDelimiter&&y.push("streamdelimiter="+encodeURIComponent(r.options.streamDelimiter)),r.options.proxyType&&y.push("proxytype="+r.options.proxyType),e.appendChild(r.flashWrapper),e.originalNode.style.display="none";var x=[];if(F.IS_IE||F.IS_EDGE){var w=k.default.createElement("div");r.flashWrapper.appendChild(w),x=F.IS_EDGE?['type="application/x-shockwave-flash"','data="'+r.options.pluginPath+r.options.filename+'"','id="__'+r.id+'"','width="'+S+'"','height="'+b+"'\""]:['classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"','codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"','id="__'+r.id+'"','width="'+S+'"','height="'+b+'"'],E||x.push('style="clip: rect(0 0 0 0); position: absolute;"'),w.outerHTML="<object "+x.join(" ")+'><param name="movie" value="'+r.options.pluginPath+r.options.filename+"?x="+new Date+'" /><param name="flashvars" value="'+y.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+r.options.shimScriptAccess+'" /><param name="allowFullScreen" value="true" /><div>'+N.default.t("mejs.install-flash")+"</div></object>"}else x=['id="__'+r.id+'"','name="__'+r.id+'"','play="true"','loop="false"','quality="high"','bgcolor="#000000"','wmode="transparent"','allowScriptAccess="'+r.options.shimScriptAccess+'"','allowFullScreen="true"','type="application/x-shockwave-flash"','pluginspage="//www.macromedia.com/go/getflashplayer"','src="'+r.options.pluginPath+r.options.filename+'"','flashvars="'+y.join("&")+'"'],E?(x.push('width="'+S+'"'),x.push('height="'+b+'"')):x.push('style="position: fixed; left: -9999em; top: -9999em;"'),r.flashWrapper.innerHTML="<embed "+x.join(" ")+">";if(r.flashNode=r.flashWrapper.lastChild,r.hide=function(){o=!1,E&&(r.flashNode.style.display="none")},r.show=function(){o=!0,E&&(r.flashNode.style.display="")},r.setSize=function(e,t){r.flashNode.style.width=e+"px",r.flashNode.style.height=t+"px",null!==r.flashApi&&"function"==typeof r.flashApi.fire_setSize&&r.flashApi.fire_setSize(e,t)},r.destroy=function(){r.flashNode.remove()},n&&0<n.length)for(var P=0,T=n.length;P<T;P++)if(A.renderer.renderers[t.prefix].canPlayType(n[P].type)){r.setSrc(n[P].src);break}return r}};if(r.hasPluginVersion("flash",[10,0,0])){j.typeChecks.push(function(e){return(e=e.toLowerCase()).startsWith("rtmp")?~e.indexOf(".mp3")?"audio/rtmp":"video/rtmp":/\.og(a|g)/i.test(e)?"audio/ogg":~e.indexOf(".m3u8")?"application/x-mpegURL":~e.indexOf(".mpd")?"application/dash+xml":~e.indexOf(".flv")?"video/flv":null});var a={name:"flash_video",options:{prefix:"flash_video",filename:"mediaelement-flash-video.swf",enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",pseudoStreamingType:"byte",proxyType:"",streamDelimiter:""},canPlayType:function(e){return~["video/mp4","video/rtmp","audio/rtmp","rtmp/mp4","audio/mp4","video/flv","video/x-flv"].indexOf(e.toLowerCase())},create:i.create};A.renderer.add(a);var s={name:"flash_hls",options:{prefix:"flash_hls",filename:"mediaelement-flash-video-hls.swf"},canPlayType:function(e){return~["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(e.toLowerCase())},create:i.create};A.renderer.add(s);var l={name:"flash_dash",options:{prefix:"flash_dash",filename:"mediaelement-flash-video-mdash.swf"},canPlayType:function(e){return~["application/dash+xml"].indexOf(e.toLowerCase())},create:i.create};A.renderer.add(l);var u={name:"flash_audio",options:{prefix:"flash_audio",filename:"mediaelement-flash-audio.swf"},canPlayType:function(e){return~["audio/mp3"].indexOf(e.toLowerCase())},create:i.create};A.renderer.add(u);var c={name:"flash_audio_ogg",options:{prefix:"flash_audio_ogg",filename:"mediaelement-flash-audio-ogg.swf"},canPlayType:function(e){return~["audio/ogg","audio/oga","audio/ogv"].indexOf(e.toLowerCase())},create:i.create};A.renderer.add(c)}},{2:2,25:25,27:27,28:28,3:3,5:5,7:7,8:8}],21:[function(e,t,n){"use strict";var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=a(e(3)),b=a(e(7)),S=e(8),x=e(27),o=e(25),i=e(28),r=e(26);function a(e){return e&&e.__esModule?e:{default:e}}var w={promise:null,load:function(e){return"undefined"!=typeof flvjs?w.promise=new Promise(function(e){e()}).then(function(){w._createPlayer(e)}):(e.options.path="string"==typeof e.options.path?e.options.path:"https://cdn.jsdelivr.net/npm/flv.js@latest",w.promise=w.promise||(0,r.loadScript)(e.options.path),w.promise.then(function(){w._createPlayer(e)})),w.promise},_createPlayer:function(e){flvjs.LoggingControl.enableDebug=e.options.debug,flvjs.LoggingControl.enableVerbose=e.options.debug;var t=flvjs.createPlayer(e.options,e.configs);return E.default["__ready__"+e.id](t),t}},s={name:"native_flv",options:{prefix:"native_flv",flv:{path:"https://cdn.jsdelivr.net/npm/flv.js@latest",cors:!0,debug:!1}},canPlayType:function(e){return o.HAS_MSE&&-1<["video/x-flv","video/flv"].indexOf(e.toLowerCase())},create:function(s,a,e){var t=s.originalNode,l=s.id+"_"+a.prefix,d=null,u=null;d=t.cloneNode(!0),a=Object.assign(a,s.options);for(var n=b.default.html5media.properties,c=b.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),f=function(e){var t=(0,x.createEvent)(e.type,s);s.dispatchEvent(t)},o=function(r){var e=""+r.substring(0,1).toUpperCase()+r.substring(1);d["get"+e]=function(){return null!==u?d[r]:null},d["set"+e]=function(e){if(-1===b.default.html5media.readOnlyProperties.indexOf(r))if("src"===r){if(d[r]="object"===(void 0===e?"undefined":y(e))&&e.src?e.src:e,null!==u){var t={type:"flv"};t.url=e,t.cors=a.flv.cors,t.debug=a.flv.debug,t.path=a.flv.path;var n=a.flv.configs;u.destroy();for(var o=0,i=c.length;o<i;o++)d.removeEventListener(c[o],f);(u=w._createPlayer({options:t,configs:n,id:l})).attachMediaElement(d),u.load()}}else d[r]=e}},i=0,r=n.length;i<r;i++)o(n[i]);if(E.default["__ready__"+l]=function(e){s.flvPlayer=u=e;for(var t,i=flvjs.Events,n=0,o=c.length;n<o;n++)"loadedmetadata"===(t=c[n])&&(u.unload(),u.detachMediaElement(),u.attachMediaElement(d),u.load()),d.addEventListener(t,f);var r=function(o){i.hasOwnProperty(o)&&u.on(i[o],function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t){if("error"===e){var n=t[0]+": "+t[1]+" "+t[2].msg;s.generateError(n,d.src)}else{var o=(0,x.createEvent)(e,s);o.data=t,s.dispatchEvent(o)}}(i[o],t)})};for(var a in i)r(a)},e&&0<e.length)for(var p=0,m=e.length;p<m;p++)if(S.renderer.renderers[a.prefix].canPlayType(e[p].type)){d.setAttribute("src",e[p].src);break}d.setAttribute("id",l),t.parentNode.insertBefore(d,t),t.autoplay=!1,t.style.display="none";var h={type:"flv"};h.url=d.src,h.cors=a.flv.cors,h.debug=a.flv.debug,h.path=a.flv.path;var v=a.flv.configs;d.setSize=function(e,t){return d.style.width=e+"px",d.style.height=t+"px",d},d.hide=function(){return null!==u&&u.pause(),d.style.display="none",d},d.show=function(){return d.style.display="",d},d.destroy=function(){null!==u&&u.destroy()};var g=(0,x.createEvent)("rendererready",d);return s.dispatchEvent(g),s.promises.push(w.load({options:h,configs:v,id:l})),d}};i.typeChecks.push(function(e){return~e.toLowerCase().indexOf(".flv")?"video/flv":null}),S.renderer.add(s)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],22:[function(e,t,n){"use strict";var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=a(e(3)),b=a(e(7)),S=e(8),x=e(27),o=e(25),i=e(28),r=e(26);function a(e){return e&&e.__esModule?e:{default:e}}var w={promise:null,load:function(e){return"undefined"!=typeof Hls?w.promise=new Promise(function(e){e()}).then(function(){w._createPlayer(e)}):(e.options.path="string"==typeof e.options.path?e.options.path:"https://cdn.jsdelivr.net/npm/hls.js@latest",w.promise=w.promise||(0,r.loadScript)(e.options.path),w.promise.then(function(){w._createPlayer(e)})),w.promise},_createPlayer:function(e){var t=new Hls(e.options);return E.default["__ready__"+e.id](t),t}},s={name:"native_hls",options:{prefix:"native_hls",hls:{path:"https://cdn.jsdelivr.net/npm/hls.js@latest",autoStartLoad:!1,debug:!1}},canPlayType:function(e){return o.HAS_MSE&&-1<["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(e.toLowerCase())},create:function(d,i,u){var e=d.originalNode,r=d.id+"_"+i.prefix,t=e.getAttribute("preload"),n=e.autoplay,c=null,f=null,p=0,m=u.length;f=e.cloneNode(!0),(i=Object.assign(i,d.options)).hls.autoStartLoad=t&&"none"!==t||n;for(var o=b.default.html5media.properties,h=b.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),v=function(e){var t=(0,x.createEvent)(e.type,d);d.dispatchEvent(t)},a=function(o){var e=""+o.substring(0,1).toUpperCase()+o.substring(1);f["get"+e]=function(){return null!==c?f[o]:null},f["set"+e]=function(e){if(-1===b.default.html5media.readOnlyProperties.indexOf(o))if("src"===o){if(f[o]="object"===(void 0===e?"undefined":y(e))&&e.src?e.src:e,null!==c){c.destroy();for(var t=0,n=h.length;t<n;t++)f.removeEventListener(h[t],v);(c=w._createPlayer({options:i.hls,id:r})).loadSource(e),c.attachMedia(f)}}else f[o]=e}},s=0,l=o.length;s<l;s++)a(o[s]);if(E.default["__ready__"+r]=function(e){d.hlsPlayer=c=e;for(var i=Hls.Events,t=function(e){if("loadedmetadata"===e){var t=d.originalNode.src;c.detachMedia(),c.loadSource(t),c.attachMedia(f)}f.addEventListener(e,v)},n=0,o=h.length;n<o;n++)t(h[n]);var s=void 0,l=void 0,r=function(o){i.hasOwnProperty(o)&&c.on(i[o],function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t){if("hlsError"===e&&(console.warn(t),(t=t[1]).fatal))switch(t.type){case"mediaError":var n=(new Date).getTime();if(!s||3e3<n-s)s=(new Date).getTime(),c.recoverMediaError();else if(!l||3e3<n-l)l=(new Date).getTime(),console.warn("Attempting to swap Audio Codec and recover from media error"),c.swapAudioCodec(),c.recoverMediaError();else{var o="Cannot recover, last media error recovery failed";d.generateError(o,f.src),console.error(o)}break;case"networkError":if("manifestLoadError"===t.details)if(p<m&&void 0!==u[p+1])f.setSrc(u[p++].src),f.load(),f.play();else{var i="Network error";d.generateError(i,u),console.error(i)}else{var r="Network error";d.generateError(r,u),console.error(r)}break;default:c.destroy()}else{var a=(0,x.createEvent)(e,d);a.data=t,d.dispatchEvent(a)}}(i[o],t)})};for(var a in i)r(a)},0<m)for(;p<m;p++)if(S.renderer.renderers[i.prefix].canPlayType(u[p].type)){f.setAttribute("src",u[p].src);break}"auto"===t||n||(f.addEventListener("play",function(){null!==c&&c.startLoad()}),f.addEventListener("pause",function(){null!==c&&c.stopLoad()})),f.setAttribute("id",r),e.parentNode.insertBefore(f,e),e.autoplay=!1,e.style.display="none",f.setSize=function(e,t){return f.style.width=e+"px",f.style.height=t+"px",f},f.hide=function(){return f.pause(),f.style.display="none",f},f.show=function(){return f.style.display="",f},f.destroy=function(){null!==c&&(c.stopLoad(),c.destroy())};var g=(0,x.createEvent)("rendererready",f);return d.dispatchEvent(g),d.promises.push(w.load({options:i.hls,id:r})),f}};i.typeChecks.push(function(e){return~e.toLowerCase().indexOf(".m3u8")?"application/x-mpegURL":null}),S.renderer.add(s)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],23:[function(e,t,n){"use strict";var o=r(e(3)),g=r(e(2)),y=r(e(7)),E=e(8),b=e(27),i=e(25);function r(e){return e&&e.__esModule?e:{default:e}}var a={name:"html5",options:{prefix:"html5"},canPlayType:function(e){var t=g.default.createElement("video");return i.IS_ANDROID&&/\/mp(3|4)$/i.test(e)||~["application/x-mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(e.toLowerCase())&&i.SUPPORTS_NATIVE_HLS?"yes":t.canPlayType?t.canPlayType(e.toLowerCase()).replace(/no/,""):""},create:function(n,e,t){var o=n.id+"_"+e.prefix,i=!1,r=null;void 0===n.originalNode||null===n.originalNode?(r=g.default.createElement("audio"),n.appendChild(r)):r=n.originalNode,r.setAttribute("id",o);for(var a=y.default.html5media.properties,s=function(t){var e=""+t.substring(0,1).toUpperCase()+t.substring(1);r["get"+e]=function(){return r[t]},r["set"+e]=function(e){-1===y.default.html5media.readOnlyProperties.indexOf(t)&&(r[t]=e)}},l=0,d=a.length;l<d;l++)s(a[l]);for(var u,c=y.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),f=0,p=c.length;f<p;f++)u=c[f],r.addEventListener(u,function(e){if(i){var t=(0,b.createEvent)(e.type,e.target);n.dispatchEvent(t)}});r.setSize=function(e,t){return r.style.width=e+"px",r.style.height=t+"px",r},r.hide=function(){return i=!1,r.style.display="none",r},r.show=function(){return i=!0,r.style.display="",r};var m=0,h=t.length;if(0<h)for(;m<h;m++)if(E.renderer.renderers[e.prefix].canPlayType(t[m].type)){r.setAttribute("src",t[m].src);break}r.addEventListener("error",function(e){e&&e.target&&e.target.error&&4===e.target.error.code&&i&&(m<h&&void 0!==t[m+1]?(r.src=t[m++].src,r.load(),r.play()):n.generateError("Media error: Format(s) not supported or source(s) not found",t))});var v=(0,b.createEvent)("rendererready",r);return n.dispatchEvent(v),r}};o.default.HtmlMediaElement=y.default.HtmlMediaElement=a,E.renderer.add(a)},{2:2,25:25,27:27,3:3,7:7,8:8}],24:[function(e,t,n){"use strict";var w=a(e(3)),P=a(e(2)),T=a(e(7)),o=e(8),C=e(27),i=e(28),r=e(26);function a(e){return e&&e.__esModule?e:{default:e}}var k={isIframeStarted:!1,isIframeLoaded:!1,iframeQueue:[],enqueueIframe:function(e){k.isLoaded="undefined"!=typeof YT&&YT.loaded,k.isLoaded?k.createIframe(e):(k.loadIframeApi(),k.iframeQueue.push(e))},loadIframeApi:function(){k.isIframeStarted||((0,r.loadScript)("https://www.youtube.com/player_api"),k.isIframeStarted=!0)},iFrameReady:function(){for(k.isLoaded=!0,k.isIframeLoaded=!0;0<k.iframeQueue.length;){var e=k.iframeQueue.pop();k.createIframe(e)}},createIframe:function(e){return new YT.Player(e.containerId,e)},getYouTubeId:function(e){var t="";return 0<e.indexOf("?")?""===(t=k.getYouTubeIdFromParam(e))&&(t=k.getYouTubeIdFromUrl(e)):t=k.getYouTubeIdFromUrl(e),(t=t.substring(t.lastIndexOf("/")+1).split("?"))[0]},getYouTubeIdFromParam:function(e){if(null==e||!e.trim().length)return null;for(var t=e.split("?")[1].split("&"),n="",o=0,i=t.length;o<i;o++){var r=t[o].split("=");if("v"===r[0]){n=r[1];break}}return n},getYouTubeIdFromUrl:function(e){return null!=e&&e.trim().length?(e=e.split("?")[0]).substring(e.lastIndexOf("/")+1):null},getYouTubeNoCookieUrl:function(e){if(null==e||!e.trim().length||-1===e.indexOf("//www.youtube"))return e;var t=e.split("/");return t[2]=t[2].replace(".com","-nocookie.com"),t.join("/")}},s={name:"youtube_iframe",options:{prefix:"youtube_iframe",youtube:{autoplay:0,controls:0,disablekb:1,end:0,loop:0,modestbranding:0,playsinline:0,rel:0,showinfo:0,start:0,iv_load_policy:3,nocookie:!1,imageQuality:null}},canPlayType:function(e){return~["video/youtube","video/x-youtube"].indexOf(e.toLowerCase())},create:function(m,n,o){var h={},v=[],g=null,r=!0,a=!1,y=null;h.options=n,h.id=m.id+"_"+n.prefix,h.mediaElement=m;for(var e=T.default.html5media.properties,t=function(i){var e=""+i.substring(0,1).toUpperCase()+i.substring(1);h["get"+e]=function(){if(null!==g){switch(i){case"currentTime":return g.getCurrentTime();case"duration":return g.getDuration();case"volume":return g.getVolume()/100;case"playbackRate":return g.getPlaybackRate();case"paused":return r;case"ended":return a;case"muted":return g.isMuted();case"buffered":var e=g.getVideoLoadedFraction(),t=g.getDuration();return{start:function(){return 0},end:function(){return e*t},length:1};case"src":return g.getVideoUrl();case"readyState":return 4}return null}return null},h["set"+e]=function(e){if(null!==g)switch(i){case"src":var t="string"==typeof e?e:e[0].src,n=k.getYouTubeId(t);m.originalNode.autoplay?g.loadVideoById(n):g.cueVideoById(n);break;case"currentTime":g.seekTo(e);break;case"muted":e?g.mute():g.unMute(),setTimeout(function(){var e=(0,C.createEvent)("volumechange",h);m.dispatchEvent(e)},50);break;case"volume":e,g.setVolume(100*e),setTimeout(function(){var e=(0,C.createEvent)("volumechange",h);m.dispatchEvent(e)},50);break;case"playbackRate":g.setPlaybackRate(e),setTimeout(function(){var e=(0,C.createEvent)("ratechange",h);m.dispatchEvent(e)},50);break;case"readyState":var o=(0,C.createEvent)("canplay",h);m.dispatchEvent(o)}else v.push({type:"set",propName:i,value:e})}},i=0,s=e.length;i<s;i++)t(e[i]);for(var l=T.default.html5media.methods,d=function(e){h[e]=function(){if(null!==g)switch(e){case"play":return r=!1,g.playVideo();case"pause":return r=!0,g.pauseVideo();case"load":return null}else v.push({type:"call",methodName:e})}},u=0,c=l.length;u<c;u++)d(l[u]);var f=P.default.createElement("div");f.id=h.id,h.options.youtube.nocookie&&(m.originalNode.src=k.getYouTubeNoCookieUrl(o[0].src)),m.originalNode.parentNode.insertBefore(f,m.originalNode),m.originalNode.style.display="none";var p="audio"===m.originalNode.tagName.toLowerCase(),E=p?"1":m.originalNode.height,b=p?"1":m.originalNode.width,S=k.getYouTubeId(o[0].src),x={id:h.id,containerId:f.id,videoId:S,height:E,width:b,playerVars:Object.assign({controls:0,rel:0,disablekb:1,showinfo:0,modestbranding:0,html5:1,iv_load_policy:3},h.options.youtube),origin:w.default.location.host,events:{onReady:function(e){if(m.youTubeApi=g=e.target,m.youTubeState={paused:!0,ended:!1},v.length)for(var t=0,n=v.length;t<n;t++){var o=v[t];if("set"===o.type){var i=o.propName,r=""+i.substring(0,1).toUpperCase()+i.substring(1);h["set"+r](o.value)}else"call"===o.type&&h[o.methodName]()}y=g.getIframe(),m.originalNode.muted&&g.mute();for(var a=["mouseover","mouseout"],s=function(e){var t=(0,C.createEvent)(e.type,h);m.dispatchEvent(t)},l=0,d=a.length;l<d;l++)y.addEventListener(a[l],s,!1);for(var u=["rendererready","loadedmetadata","loadeddata","canplay"],c=0,f=u.length;c<f;c++){var p=(0,C.createEvent)(u[c],h);m.dispatchEvent(p)}},onStateChange:function(e){var t=[];switch(e.data){case-1:t=["loadedmetadata"],r=!0,a=!1;break;case 0:t=["ended"],r=!1,a=!h.options.youtube.loop,h.options.youtube.loop||h.stopInterval();break;case 1:t=["play","playing"],a=r=!1,h.startInterval();break;case 2:t=["pause"],r=!0,a=!1,h.stopInterval();break;case 3:t=["progress"],a=!1;break;case 5:t=["loadeddata","loadedmetadata","canplay"],r=!0,a=!1}for(var n=0,o=t.length;n<o;n++){var i=(0,C.createEvent)(t[n],h);m.dispatchEvent(i)}},onError:function(e){return function(e){var t="";switch(e.data){case 2:t="The request contains an invalid parameter value. Verify that video ID has 11 characters and that contains no invalid characters, such as exclamation points or asterisks.";break;case 5:t="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";break;case 100:t="The video requested was not found. Either video has been removed or has been marked as private.";break;case 101:case 105:t="The owner of the requested video does not allow it to be played in embedded players.";break;default:t="Unknown error."}m.generateError("Code "+e.data+": "+t,o)}(e)}}};return(p||m.originalNode.hasAttribute("playsinline"))&&(x.playerVars.playsinline=1),m.originalNode.controls&&(x.playerVars.controls=1),m.originalNode.autoplay&&(x.playerVars.autoplay=1),m.originalNode.loop&&(x.playerVars.loop=1),(x.playerVars.loop&&1===parseInt(x.playerVars.loop,10)||-1<m.originalNode.src.indexOf("loop="))&&!x.playerVars.playlist&&-1===m.originalNode.src.indexOf("playlist=")&&(x.playerVars.playlist=k.getYouTubeId(m.originalNode.src)),k.enqueueIframe(x),h.onEvent=function(e,t,n){null!=n&&(m.youTubeState=n)},h.setSize=function(e,t){null!==g&&g.setSize(e,t)},h.hide=function(){h.stopInterval(),h.pause(),y&&(y.style.display="none")},h.show=function(){y&&(y.style.display="")},h.destroy=function(){g.destroy()},h.interval=null,h.startInterval=function(){h.interval=setInterval(function(){var e=(0,C.createEvent)("timeupdate",h);m.dispatchEvent(e)},250)},h.stopInterval=function(){h.interval&&clearInterval(h.interval)},h.getPosterUrl=function(){var e=n.youtube.imageQuality,t=k.getYouTubeId(m.originalNode.src);return e&&-1<["default","hqdefault","mqdefault","sddefault","maxresdefault"].indexOf(e)&&t?"https://img.youtube.com/vi/"+t+"/"+e+".jpg":""},h}};w.default.onYouTubePlayerAPIReady=function(){k.iFrameReady()},i.typeChecks.push(function(e){return/\/\/(www\.youtube|youtu\.?be)/i.test(e)?"video/x-youtube":null}),o.renderer.add(s)},{2:2,26:26,27:27,28:28,3:3,7:7,8:8}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cancelFullScreen=n.requestFullScreen=n.isFullScreen=n.FULLSCREEN_EVENT_NAME=n.HAS_NATIVE_FULLSCREEN_ENABLED=n.HAS_TRUE_NATIVE_FULLSCREEN=n.HAS_IOS_FULLSCREEN=n.HAS_MS_NATIVE_FULLSCREEN=n.HAS_MOZ_NATIVE_FULLSCREEN=n.HAS_WEBKIT_NATIVE_FULLSCREEN=n.HAS_NATIVE_FULLSCREEN=n.SUPPORTS_NATIVE_HLS=n.SUPPORT_PASSIVE_EVENT=n.SUPPORT_POINTER_EVENTS=n.HAS_MSE=n.IS_STOCK_ANDROID=n.IS_SAFARI=n.IS_FIREFOX=n.IS_CHROME=n.IS_EDGE=n.IS_IE=n.IS_ANDROID=n.IS_IOS=n.IS_IPOD=n.IS_IPHONE=n.IS_IPAD=n.UA=n.NAV=void 0;var i=a(e(3)),r=a(e(2)),o=a(e(7));function a(e){return e&&e.__esModule?e:{default:e}}for(var s=n.NAV=i.default.navigator,l=n.UA=s.userAgent.toLowerCase(),d=n.IS_IPAD=/ipad/i.test(l)&&!i.default.MSStream,u=n.IS_IPHONE=/iphone/i.test(l)&&!i.default.MSStream,c=n.IS_IPOD=/ipod/i.test(l)&&!i.default.MSStream,f=(n.IS_IOS=/ipad|iphone|ipod/i.test(l)&&!i.default.MSStream,n.IS_ANDROID=/android/i.test(l)),p=n.IS_IE=/(trident|microsoft)/i.test(s.appName),m=(n.IS_EDGE="msLaunchUri"in s&&!("documentMode"in r.default)),h=n.IS_CHROME=/chrome/i.test(l),v=n.IS_FIREFOX=/firefox/i.test(l),g=n.IS_SAFARI=/safari/i.test(l)&&!h,y=n.IS_STOCK_ANDROID=/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(l),E=(n.HAS_MSE="MediaSource"in i.default),b=n.SUPPORT_POINTER_EVENTS=function(){var e=r.default.createElement("x"),t=r.default.documentElement,n=i.default.getComputedStyle;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e);var o=n&&"auto"===(n(e,"")||{}).pointerEvents;return e.remove(),!!o}(),S=n.SUPPORT_PASSIVE_EVENT=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});i.default.addEventListener("test",null,t)}catch(e){}return e}(),x=["source","track","audio","video"],w=void 0,P=0,T=x.length;P<T;P++)w=r.default.createElement(x[P]);var C=n.SUPPORTS_NATIVE_HLS=g||p&&/edge/i.test(l),k=void 0!==w.webkitEnterFullscreen,_=void 0!==w.requestFullscreen;k&&/mac os x 10_5/i.test(l)&&(k=_=!1);var N=void 0!==w.webkitRequestFullScreen,A=void 0!==w.mozRequestFullScreen,L=void 0!==w.msRequestFullscreen,F=N||A||L,j=F,I="",M=void 0,O=void 0,D=void 0;A?j=r.default.mozFullScreenEnabled:L&&(j=r.default.msFullscreenEnabled),h&&(k=!1),F&&(N?I="webkitfullscreenchange":A?I="fullscreenchange":L&&(I="MSFullscreenChange"),n.isFullScreen=M=function(){return A?r.default.mozFullScreen:N?r.default.webkitIsFullScreen:L?null!==r.default.msFullscreenElement:void 0},n.requestFullScreen=O=function(e){N?e.webkitRequestFullScreen():A?e.mozRequestFullScreen():L&&e.msRequestFullscreen()},n.cancelFullScreen=D=function(){N?r.default.webkitCancelFullScreen():A?r.default.mozCancelFullScreen():L&&r.default.msExitFullscreen()});var R=n.HAS_NATIVE_FULLSCREEN=_,V=n.HAS_WEBKIT_NATIVE_FULLSCREEN=N,H=n.HAS_MOZ_NATIVE_FULLSCREEN=A,U=n.HAS_MS_NATIVE_FULLSCREEN=L,q=n.HAS_IOS_FULLSCREEN=k,B=n.HAS_TRUE_NATIVE_FULLSCREEN=F,z=n.HAS_NATIVE_FULLSCREEN_ENABLED=j,W=n.FULLSCREEN_EVENT_NAME=I;n.isFullScreen=M,n.requestFullScreen=O,n.cancelFullScreen=D,o.default.Features=o.default.Features||{},o.default.Features.isiPad=d,o.default.Features.isiPod=c,o.default.Features.isiPhone=u,o.default.Features.isiOS=o.default.Features.isiPhone||o.default.Features.isiPad,o.default.Features.isAndroid=f,o.default.Features.isIE=p,o.default.Features.isEdge=m,o.default.Features.isChrome=h,o.default.Features.isFirefox=v,o.default.Features.isSafari=g,o.default.Features.isStockAndroid=y,o.default.Features.hasMSE=E,o.default.Features.supportsNativeHLS=C,o.default.Features.supportsPointerEvents=b,o.default.Features.supportsPassiveEvent=S,o.default.Features.hasiOSFullScreen=q,o.default.Features.hasNativeFullscreen=R,o.default.Features.hasWebkitNativeFullScreen=V,o.default.Features.hasMozNativeFullScreen=H,o.default.Features.hasMsNativeFullScreen=U,o.default.Features.hasTrueNativeFullScreen=B,o.default.Features.nativeFullScreenEnabled=z,o.default.Features.fullScreenEventName=W,o.default.Features.isFullScreen=M,o.default.Features.requestFullScreen=O,o.default.Features.cancelFullScreen=D},{2:2,3:3,7:7}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.removeClass=n.addClass=n.hasClass=void 0,n.loadScript=a,n.offset=s,n.toggleClass=h,n.fadeOut=v,n.fadeIn=g,n.siblings=y,n.visible=E,n.ajax=b;var l=r(e(3)),i=r(e(2)),o=r(e(7));function r(e){return e&&e.__esModule?e:{default:e}}function a(o){return new Promise(function(e,t){var n=i.default.createElement("script");n.src=o,n.async=!0,n.onload=function(){n.remove(),e()},n.onerror=function(){n.remove(),t()},i.default.head.appendChild(n)})}function s(e){var t=e.getBoundingClientRect(),n=l.default.pageXOffset||i.default.documentElement.scrollLeft,o=l.default.pageYOffset||i.default.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}var d=void 0,u=void 0,c=void 0;"classList"in i.default.documentElement?(d=function(e,t){return void 0!==e.classList&&e.classList.contains(t)},u=function(e,t){return e.classList.add(t)},c=function(e,t){return e.classList.remove(t)}):(d=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},u=function(e,t){f(e,t)||(e.className+=" "+t)},c=function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")});var f=n.hasClass=d,p=n.addClass=u,m=n.removeClass=c;function h(e,t){f(e,t)?m(e,t):p(e,t)}function v(i){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:400,a=arguments[2];i.style.opacity||(i.style.opacity=1);var s=null;l.default.requestAnimationFrame(function e(t){var n=t-(s=s||t),o=parseFloat(1-n/r,2);i.style.opacity=o<0?0:o,r<n?a&&"function"==typeof a&&a():l.default.requestAnimationFrame(e)})}function g(i){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:400,a=arguments[2];i.style.opacity||(i.style.opacity=0);var s=null;l.default.requestAnimationFrame(function e(t){var n=t-(s=s||t),o=parseFloat(n/r,2);i.style.opacity=1<o?1:o,r<n?a&&"function"==typeof a&&a():l.default.requestAnimationFrame(e)})}function y(e,t){var n=[];for(e=e.parentNode.firstChild;t&&!t(e)||n.push(e),e=e.nextSibling;);return n}function E(e){return void 0!==e.getClientRects&&"function"===e.getClientRects?!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length):!(!e.offsetWidth&&!e.offsetHeight)}function b(e,t,n,o){var i=l.default.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r="application/x-www-form-urlencoded; charset=UTF-8",a=!1,s="*/".concat("*");switch(t){case"text":r="text/plain";break;case"json":r="application/json, text/javascript";break;case"html":r="text/html";break;case"xml":r="application/xml, text/xml"}"application/x-www-form-urlencoded"!==r&&(s=r+", */*; q=0.01"),i&&(i.open("GET",e,!0),i.setRequestHeader("Accept",s),i.onreadystatechange=function(){if(!a&&4===i.readyState)if(200===i.status){a=!0;var e=void 0;switch(t){case"json":e=JSON.parse(i.responseText);break;case"xml":e=i.responseXML;break;default:e=i.responseText}n(e)}else"function"==typeof o&&o(i.status)},i.send())}o.default.Utils=o.default.Utils||{},o.default.Utils.offset=s,o.default.Utils.hasClass=f,o.default.Utils.addClass=p,o.default.Utils.removeClass=m,o.default.Utils.toggleClass=h,o.default.Utils.fadeIn=g,o.default.Utils.fadeOut=v,o.default.Utils.siblings=y,o.default.Utils.visible=E,o.default.Utils.ajax=b,o.default.Utils.loadScript=a},{2:2,3:3,7:7}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.escapeHTML=a,n.debounce=s,n.isObjectEmpty=l,n.splitEvents=d,n.createEvent=u,n.isNodeAfter=c,n.isString=f;var o,i=e(7),r=(o=i)&&o.__esModule?o:{default:o};function a(e){if("string"!=typeof e)throw new Error("Argument passed must be a string");var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return e.replace(/[&<>"]/g,function(e){return t[e]})}function s(o,i){var r=this,a=arguments,s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof o)throw new Error("First argument must be a function");if("number"!=typeof i)throw new Error("Second argument must be a numeric value");var l=void 0;return function(){var e=r,t=a,n=s&&!l;clearTimeout(l),l=setTimeout(function(){l=null,s||o.apply(e,t)},i),n&&o.apply(e,t)}}function l(e){return Object.getOwnPropertyNames(e).length<=0}function d(e,n){var o=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/,i={d:[],w:[]};return(e||"").split(" ").forEach(function(e){var t=e+(n?"."+n:"");t.startsWith(".")?(i.d.push(t),i.w.push(t)):i[o.test(e)?"w":"d"].push(t)}),i.d=i.d.join(" "),i.w=i.w.join(" "),i}function u(e,t){if("string"!=typeof e)throw new Error("Event name must be a string");var n=e.match(/([a-z]+\.([a-z]+))/i),o={target:t};return null!==n&&(e=n[1],o.namespace=n[2]),new window.CustomEvent(e,{detail:o})}function c(e,t){return!!(e&&t&&2&e.compareDocumentPosition(t))}function f(e){return"string"==typeof e}r.default.Utils=r.default.Utils||{},r.default.Utils.escapeHTML=a,r.default.Utils.debounce=s,r.default.Utils.isObjectEmpty=l,r.default.Utils.splitEvents=d,r.default.Utils.createEvent=u,r.default.Utils.isNodeAfter=c,r.default.Utils.isString=f},{7:7}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.typeChecks=void 0,n.absolutizeUrl=l,n.formatType=d,n.getMimeFromType=u,n.getTypeFromFile=c,n.getExtension=f,n.normalizeExtension=p;var o,i=e(7),r=(o=i)&&o.__esModule?o:{default:o},a=e(27);var s=n.typeChecks=[];function l(e){if("string"!=typeof e)throw new Error("`url` argument must be a string");var t=document.createElement("div");return t.innerHTML='<a href="'+(0,a.escapeHTML)(e)+'">x</a>',t.firstChild.href}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return e&&!t?c(e):t}function u(e){if("string"!=typeof e)throw new Error("`type` argument must be a string");return e&&-1<e.indexOf(";")?e.substr(0,e.indexOf(";")):e}function c(e){if("string"!=typeof e)throw new Error("`url` argument must be a string");for(var t=0,n=s.length;t<n;t++){var o=s[t](e);if(o)return o}var i=p(f(e)),r="video/mp4";return i&&(~["mp4","m4v","ogg","ogv","webm","flv","mpeg","mov"].indexOf(i)?r="video/"+i:~["mp3","oga","wav","mid","midi"].indexOf(i)&&(r="audio/"+i)),r}function f(e){if("string"!=typeof e)throw new Error("`url` argument must be a string");var t=e.split("?")[0].split("\\").pop().split("/").pop();return~t.indexOf(".")?t.substring(t.lastIndexOf(".")+1):""}function p(e){if("string"!=typeof e)throw new Error("`extension` argument must be a string");switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}}r.default.Utils=r.default.Utils||{},r.default.Utils.typeChecks=s,r.default.Utils.absolutizeUrl=l,r.default.Utils.formatType=d,r.default.Utils.getMimeFromType=u,r.default.Utils.getTypeFromFile=c,r.default.Utils.getExtension=f,r.default.Utils.normalizeExtension=p},{27:27,7:7}],29:[function(e,t,n){"use strict";var o,i=a(e(2)),r=a(e(4));function a(e){return e&&e.__esModule?e:{default:e}}if([Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=i.default.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;n++){var i=arguments[n];if(null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length-1;0<=--n&&t.item(n)!==this;);return-1<n}),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e),n=void 0,o=this;do{for(n=t.length;0<=--n&&t.item(n)!==o;);}while(n<0&&(o=o.parentElement));return o}),function(){for(var i=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-i)),o=window.setTimeout(function(){e(t+n)},n);return i=t+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),/firefox/i.test(navigator.userAgent)){var s=window.getComputedStyle;window.getComputedStyle=function(e,t){var n=s(e,t);return null===n?{getPropertyValue:function(){}}:n}}window.Promise||(window.Promise=r.default),(o=window.Node||window.Element)&&o.prototype&&null===o.prototype.children&&Object.defineProperty(o.prototype,"children",{get:function(){for(var e=0,t=void 0,n=this.childNodes,o=[];t=n[e++];)1===t.nodeType&&o.push(t);return o}})},{2:2,4:4}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isDropFrame=C,n.secondsToTimeCode=a,n.timeCodeToSeconds=s,n.calculateTimeFormat=l,n.convertSMPTEtoSeconds=d;var o,i=e(7),r=(o=i)&&o.__esModule?o:{default:o};function C(){return!((0<arguments.length&&void 0!==arguments[0]?arguments[0]:25)%1==0)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:25,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"hh:mm:ss";e=!e||"number"!=typeof e||e<0?0:e;var a=Math.round(.066666*o),s=Math.round(o),l=24*Math.round(3600*o),d=Math.round(600*o),u=C(o)?";":":",c=void 0,f=void 0,p=void 0,m=void 0,h=Math.round(e*o);if(C(o)){h<0&&(h=l+h);var v=(h%=l)%d;h+=9*a*Math.floor(h/d),a<v&&(h+=a*Math.floor((v-a)/Math.round(60*s-a)));var g=Math.floor(h/s);c=Math.floor(Math.floor(g/60)/60),f=Math.floor(g/60)%60,p=n?g%60:Math.floor(h/s%60).toFixed(i)}else c=Math.floor(e/3600)%24,f=Math.floor(e/60)%60,p=n?Math.floor(e%60):Math.floor(e%60).toFixed(i);c=c<=0?0:c,p=60===(p=p<=0?0:p)?0:p,f=60===(f=f<=0?0:f)?0:f;for(var y=r.split(":"),E={},b=0,S=y.length;b<S;++b){for(var x="",w=0,P=y[b].length;w<P;w++)x.indexOf(y[b][w])<0&&(x+=y[b][w]);~["f","s","m","h"].indexOf(x)&&(E[x]=y[b].length)}var T=t||0<c?(c<10&&1<E.h?"0"+c:c)+":":"";return T+=(f<10&&1<E.m?"0"+f:f)+":",T+=""+(p<10&&1<E.s?"0"+p:p),n&&(T+=(m=(m=(h%s).toFixed(0))<=0?0:m)<10&&E.f?u+"0"+m:""+u+m),T}function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:25;if("string"!=typeof e)throw new TypeError("Time must be a string");if(0<e.indexOf(";")&&(e=e.replace(";",":")),!/\d{2}(\:\d{2}){0,3}/i.test(e))throw new TypeError("Time code must have the format `00:00:00`");var n=e.split(":"),o=void 0,i=0,r=0,a=0,s=0,l=0,d=Math.round(.066666*t),u=Math.round(t),c=3600*u,f=60*u;switch(n.length){default:case 1:a=parseInt(n[0],10);break;case 2:r=parseInt(n[0],10),a=parseInt(n[1],10);break;case 3:i=parseInt(n[0],10),r=parseInt(n[1],10),a=parseInt(n[2],10);break;case 4:i=parseInt(n[0],10),r=parseInt(n[1],10),a=parseInt(n[2],10),s=parseInt(n[3],10)}return o=C(t)?c*i+f*r+u*a+s-d*((l=60*i+r)-Math.floor(l/10)):(c*i+f*r+t*a+s)/t,parseFloat(o.toFixed(3))}function l(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:25;e=!e||"number"!=typeof e||e<0?0:e;for(var o=Math.floor(e/3600)%24,i=Math.floor(e/60)%60,r=Math.floor(e%60),a=[[Math.floor((e%1*n).toFixed(3)),"f"],[r,"s"],[i,"m"],[o,"h"]],s=t.timeFormat,l=s[1]===s[0],d=l?2:1,u=s.length<d?s[d]:":",c=s[0],f=!1,p=0,m=a.length;p<m;p++)if(~s.indexOf(a[p][1]))f=!0;else if(f){for(var h=!1,v=p;v<m;v++)if(0<a[v][0]){h=!0;break}if(!h)break;l||(s=c+s),s=a[p][1]+u+s,l&&(s=a[p][1]+s),c=a[p][1]}t.timeFormat=s}function d(e){if("string"!=typeof e)throw new TypeError("Argument must be a string value");for(var t=~(e=e.replace(",",".")).indexOf(".")?e.split(".")[1].length:0,n=0,o=1,i=0,r=(e=e.split(":").reverse()).length;i<r;i++)o=1,0<i&&(o=Math.pow(60,i)),n+=Number(e[i])*o;return Number(n.toFixed(t))}r.default.Utils=r.default.Utils||{},r.default.Utils.secondsToTimeCode=a,r.default.Utils.timeCodeToSeconds=s,r.default.Utils.calculateTimeFormat=l,r.default.Utils.convertSMPTEtoSeconds=d},{7:7}]},{},[29,6,5,15,23,20,19,21,22,24,16,18,17,9,10,11,12,13,14]);
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('memoize-one', function (Y) {SM.currentModule = 'memoize-one';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).memoizeOne=n()}(this,function(){"use strict";function e(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}return function(n,t){var r;void 0===t&&(t=e);var i,f=[],o=!1;return function(){for(var e=[],u=0;u<arguments.length;u++)e[u]=arguments[u];return o&&r===this&&t(e,f)?i:(i=n.apply(this,e),o=!0,r=this,f=e,i)}}});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add("model-relate",(function(e){SM.currentModule="model-relate";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var t=e.ModelStore;function i(){}i.ATTRS={id:{valueFn:function(){return this.get("clientId")}}},i.prototype={initializer:function(t){t=t||{},this._registered=!1,this._relationships={},this._modelRelateHandles=[e.Do.before(this._doBeforeDestroy,this,"destroy",this)],e.Object.each(this._aggregateRelationships(),this._addRelationshipConfig,this),!1!==t.register&&this.onceAfter("initializedChange",this.register,this)},destructor:function(){new e.EventHandle(this._modelRelateHandles).detach(),this._modelRelateHandles=null,this._destroyRelationships()},addRelationship:function(e,t){return this._addRelationshipConfig(t,e),this},getRelated:function(e){var t=this.getRelationship(e);return t&&t.related},getRelationship:function(t){var i=this._relationships[t];return i&&!i.initialized&&(i=new e.ModelRelationship(i),this._relationships[t]=i),i},isNew:function(){return this.get("clientId")===this.get("id")},isRegistered:function(){return this._registered},register:function(){return t&&(this.isRegistered()||(this._registered=t.registerModel(this)===this)),this},removeRelationship:function(e){var t=this.getRelationship(e);return t&&(t.destroy(),t=null),delete this._relationships[e],this},toString:function(){return this.name+"["+this.get("id")+":"+e.stamp(this,!0)+"]"},unregister:function(){return t&&this.isRegistered()&&(this._registered=t.unregisterModel(this)===this),this._destroyRelationships(),this},_addRelationshipConfig:function(t,i){this._relationships[i]=e.merge(t,{name:i,model:this})},_aggregateRelationships:function(){for(var t=this.constructor,i={};t;)t.RELATIONSHIPS&&e.mix(i,t.RELATIONSHIPS),t=t.superclass?t.superclass.constructor:null;return i},_destroyRelationships:function(){e.Object.each(this._relationships,(function(e,t){this.removeRelationship(t)}),this)},_doBeforeDestroy:function(t,i){var s;if("function"==typeof t&&(i=t,t={}),t&&(t.unregister||t.remove||t.delete))return this.deleted=!0,s=e.bind((function(e){e?this.deleted=!1:this._destroyRelationships(),i&&i.apply(null,arguments)}),this),new e.Do.AlterArgs(this.toString()+" deleted, modifying callback to destroy model relationships",[t,s])}},e.ModelRelate=i;t=e.ModelStore;function s(i){t||e.error("Cannot create relationship. ModelStore not found."),e.stamp(this),this.init(i)}s.toOne="toOne",s.toMany="toMany",s.prototype={initialized:!1,init:function(i){this.name=i.name,this.model=i.model,this.key=i.key||i.model.idAttribute||"id",this.relatedModel=t._getModelCtor(i.relatedModel),this.relatedKey=i.relatedKey||this.key,"toMany"===i.type?(this.listType=i.listType||e.ModelList,e.mix(this,r,!0)):"toOne"===i.type?e.mix(this,n,!0):e.error("Cannot create relationship. "+i.type+" is not a valid relationship type."),this._handles=[],this._storeList=t.getList(this.relatedModel),this._initRelated(),this._initEvents(),this.initialized=!0},destroy:function(){this._detachEvents(),this._storeList=null,this._destroyRelated(),this.related=null},toString:function(){return this.model.toString()+" "+this.type+" relationship "+this.name+"["+e.stamp(this,!0)+"]"},_checkRelationship:function(e){return e.get(this.relatedKey)==this.model.get(this.key)},_destroyRelated:function(){},_detachEvents:function(){e.each(this._handles,(function(e){e.detach()})),this._handles=[]},_findRelated:function(){return this._storeList.filter(e.bind(this._checkRelationship,this))},_initEvents:function(){var e=this._handles,t={bubbles:!0,emitFacade:!0,prefix:"modelRelationship",preventable:!1};this.publish("add",t),this.publish("remove",t),e.push(this.model.on(this.key+"Change",this._onKeyChange,this)),e.push(this.model.after(this.key+"Change",this._afterKeyChange,this)),e.push(this._storeList.after("*:"+this.relatedKey+"Change",this._afterRelatedKeyChange,this)),e.push(this._storeList.on("error",(function(e){}))),e.push(this._storeList.after("add",this._afterStoreAdd,this)),e.push(this._storeList.after("remove",this._afterStoreRemove,this))},_initRelated:function(){},_refreshRelationship:function(){this._setRelated(this._findRelated())},_setRelated:function(e){},_setRelatedAttr:function(e,t,i){},_afterKeyChange:function(e){"create"===e.src?this._setRelatedAttr(e.attrName,e.newVal,{src:"create",silent:!0}):this._refreshRelationship()},_afterStoreAdd:function(e){},_afterStoreRemove:function(e){},_afterRelatedKeyChange:function(e){},_onKeyChange:function(e){var t=e.target;e.attrName===t.idAttribute&&t.isNew()&&(e.src="create")}},e.ModelRelationship=e.augment(s,e.EventTarget);var n={type:s.toOne,_initRelated:function(){this._refreshRelationship()},_setRelated:function(t){var i;i=(t=e.Array(t))[0]||null,this.related&&this.fire("remove",{model:this.related}),this.related=i,this.related&&this.fire("add",{model:this.related})},_setRelatedAttr:function(e,t,i){this.related&&this.related.set(e,t,i)},_afterStoreAdd:function(e){var t=e.model;!this.related&&this._checkRelationship(t)&&this._setRelated(t)},_afterStoreRemove:function(e){e.model===this.related&&this._refreshRelationship()},_afterRelatedKeyChange:function(e){e.model=e.target,"create"!==e.src&&(this.related===e.model?(e.unregister=!0,this._afterStoreRemove(e)):this._afterStoreAdd(e))}},r={type:s.toMany,_initRelated:function(){var t="string"==typeof this.listType?e.namespace(this.listType):this.listType;this.related=new t({model:this.relatedModel}),this._handles.push(this.related.on("remove",this._onRelatedRemove,this)),this._refreshRelationship()},_destroyRelated:function(){this.related.destroy()},_setRelated:function(e){var t=this.related,i=t.isEmpty()?"add":"reset";t[i](e)},_setRelatedAttr:function(e,t,i){this.related.each((function(s){s.set(e,t,i)}))},_afterStoreAdd:function(e){var t=e.model;this._checkRelationship(t)&&(delete e.index,this.related.add(t,e),this.fire("add",e))},_afterStoreRemove:function(e){var t=e.model;-1!==this.related.indexOf(t)&&(this.related.remove(t,e),this.fire("remove",e))},_afterRelatedKeyChange:function(e){e.model=e.target,"create"!==e.src&&(-1!==this.related.indexOf(e.model)?(e.unregister=!0,this._afterStoreRemove(e)):this._afterStoreAdd(e))},_onRelatedRemove:function(e){e.unregister||e.remove||e.delete||e.preventDefault()}}}(),SM.currentModule=null}),"",{requires:["array-extras","base","event-custom","model-list","model-store"]});
YUI.add("model-store",(function(t){SM.currentModule="model-store";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e={_yuid:t.guid(),_lists:{},find:function(t,e){var r=this.getList(t,!1);return r&&r.getById(e)},getList:function(t,e){let r=this._lists[this._getModelName(t)];return r||!1===e||(r=this._createList(t)),r},toString:function(){return"ModelStore["+this._yuid+"]"},registerModel:function(t){return this.getList(t).add(t)},unregisterAll:function(){t.each(this._lists,(function(t){t.destroy()})),this._lists={}},unregisterModel:function(t){return this.getList(t).remove(t,{unregister:!0}),t},_createList:function(e){var r=this._getModelCtor(e),n=null;return r&&(n=new t.ModelList({model:r}),this._lists[r.NAME]=n,this._initList(n)),n},_getModelCtor:function(e){var r=null;return t.Lang.isString(e)&&(e=t.namespace(e)),e instanceof t.Model?r=e.constructor:e.superclass&&e.superclass.constructor instanceof t.Model.constructor&&(r=e),r},_getModelName:function(t){var e=this._getModelCtor(t);return e?e.NAME:"unknown"},_initList:function(t){return t.store=!0,t.on("error",(function(t){})),t.on("remove",(function(t){t.unregister||t.delete||t.preventDefault()})),t}};t.ModelStore=e;var r=e;exports.default=r}(),SM.currentModule=null}),"",{requires:["base","model","model-list"]});
YUI.add('prop-types', function (Y) {SM.currentModule = 'prop-types';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PropTypes=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw (f.code="MODULE_NOT_FOUND", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function emptyFunction(){}function emptyFunctionWithReset(){}var ReactPropTypesSecret=require(3);emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function e(e,t,n,r,o,p){if(p!==ReactPropTypesSecret){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw (c.name="Invariant Violation", c)}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return n.PropTypes=n,n}},{3:3}],2:[function(require,module,exports){module.exports=require(1)()},{1:1}],3:[function(require,module,exports){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[2])(2);});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('react-dom', function (Y) {SM.currentModule = 'react-dom';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(da,pb){"object"===typeof exports&&"undefined"!==typeof module?module.exports=pb(require("react")):"function"===typeof define&&define.amd?define(["react"],pb):da.ReactDOM=pb(da.React)})(this,function(da){function pb(a,b,c,d,e,f,g,h){if(!a){a=void 0;if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[c,d,e,f,g,h],k=0;a=Error(b.replace(/%s/g,function(){return l[k++]}));
a.name="Invariant Violation"}a.framesToPop=1;throw a;}}function n(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);pb(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}function rh(a,b,c,d,e,f,g,h,l){qb=!1;$b=null;sh.apply(th,arguments)}function uh(a,b,c,d,e,f,g,h,l){rh.apply(this,arguments);
if(qb){if(qb){var k=$b;qb=!1;$b=null}else n("198"),k=void 0;ac||(ac=!0,Yc=k)}}function Ee(){if(bc)for(var a in Na){var b=Na[a],c=bc.indexOf(a);-1<c?void 0:n("96",a);if(!cc[c]){b.extractEvents?void 0:n("97",a);cc[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;Zc.hasOwnProperty(h)?n("99",h):void 0;Zc[h]=f;var l=f.phasedRegistrationNames;if(l){for(e in l)l.hasOwnProperty(e)&&Fe(l[e],g,h);e=!0}else f.registrationName?(Fe(f.registrationName,g,h),e=!0):e=!1;e?void 0:n("98",d,a)}}}}
function Fe(a,b,c){Oa[a]?n("100",a):void 0;Oa[a]=b;$c[a]=b.eventTypes[c].dependencies}function Ge(a,b,c){var d=a.type||"unknown-event";a.currentTarget=He(c);uh(d,b,void 0,a);a.currentTarget=null}function Pa(a,b){null==b?n("30"):void 0;if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function ad(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function Ie(a,b){var c=a.stateNode;if(!c)return null;
var d=bd(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":(d=!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;c&&"function"!==typeof c?n("231",b,typeof c):void 0;return c}function cd(a){null!==a&&(rb=Pa(rb,a));a=rb;
rb=null;if(a&&(ad(a,vh),rb?n("95"):void 0,ac))throw (a=Yc, ac=!1, Yc=null, a);}function dc(a){if(a[ea])return a[ea];for(;!a[ea];)if(a.parentNode)a=a.parentNode;else return null;a=a[ea];return 5===a.tag||6===a.tag?a:null}function Je(a){a=a[ea];return!a||5!==a.tag&&6!==a.tag?null:a}function Da(a){if(5===a.tag||6===a.tag)return a.stateNode;n("33")}function dd(a){return a[ec]||null}function fa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function Ke(a,b,c){if(b=Ie(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=
Pa(c._dispatchListeners,b),c._dispatchInstances=Pa(c._dispatchInstances,a)}function wh(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=fa(b);for(b=c.length;0<b--;)Ke(c[b],"captured",a);for(b=0;b<c.length;b++)Ke(c[b],"bubbled",a)}}function ed(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Ie(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=Pa(c._dispatchListeners,b),c._dispatchInstances=Pa(c._dispatchInstances,a))}function xh(a){a&&a.dispatchConfig.registrationName&&
ed(a._targetInst,null,a)}function Qa(a){ad(a,wh)}function fc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function gc(a){if(fd[a])return fd[a];if(!Ra[a])return a;var b=Ra[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Le)return fd[a]=b[c];return a}function Me(){if(hc)return hc;var a,b=gd,c=b.length,d,e="value"in qa?qa.value:qa.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return hc=e.slice(a,
1<d?1-d:void 0)}function ic(){return!0}function jc(){return!1}function J(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?ic:jc;this.isPropagationStopped=jc;return this}function yh(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);
return e}return new this(a,b,c,d)}function zh(a){a instanceof this?void 0:n("279");a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function Ne(a){a.eventPool=[];a.getPooled=yh;a.release=zh}function Oe(a,b){switch(a){case "keyup":return-1!==Ah.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function Pe(a){a=a.detail;return"object"===typeof a&&"data"in a?a.data:null}function Bh(a,b){switch(a){case "compositionend":return Pe(b);
case "keypress":if(32!==b.which)return null;Qe=!0;return Re;case "textInput":return a=b.data,a===Re&&Qe?null:a;default:return null}}function Ch(a,b){if(Sa)return"compositionend"===a||!hd&&Oe(a,b)?(a=Me(),hc=gd=qa=null,Sa=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case "compositionend":return Se&&"ko"!==b.locale?null:b.data;
default:return null}}function Te(a){if(a=Ue(a)){"function"!==typeof id?n("280"):void 0;var b=bd(a.stateNode);id(a.stateNode,a.type,b)}}function Ve(a){Ta?Ua?Ua.push(a):Ua=[a]:Ta=a}function We(){if(Ta){var a=Ta,b=Ua;Ua=Ta=null;Te(a);if(b)for(a=0;a<b.length;a++)Te(b[a])}}function Xe(a,b){if(jd)return a(b);jd=!0;try{return Ye(a,b)}finally{if(jd=!1,null!==Ta||null!==Ua)Ze(),We()}}function $e(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Dh[a.type]:"textarea"===b?!0:!1}function kd(a){a=
a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function af(a){if(!ra)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function bf(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function Eh(a){var b=bf(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=
""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function kc(a){a._valueTracker||(a._valueTracker=Eh(a))}function cf(a){if(!a)return!1;
var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=bf(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function sb(a){if(null===a||"object"!==typeof a)return null;a=df&&a[df]||a["@@iterator"];return"function"===typeof a?a:null}function sa(a){if(null==a)return null;if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case ld:return"ConcurrentMode";case ta:return"Fragment";case Va:return"Portal";case lc:return"Profiler";
case md:return"StrictMode";case nd:return"Suspense"}if("object"===typeof a)switch(a.$$typeof){case ef:return"Context.Consumer";case ff:return"Context.Provider";case od:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case pd:return sa(a.type);case gf:if(a=1===a._status?a._result:null)return sa(a)}return null}function qd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=
a._debugSource,f=sa(a.type);c=null;d&&(c=sa(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(Fh,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function Gh(a){if(hf.call(jf,a))return!0;if(hf.call(kf,a))return!1;if(Hh.test(a))return jf[a]=!0;kf[a]=!0;return!1}function Ih(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;
a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function Jh(a,b,c,d){if(null===b||"undefined"===typeof b||Ih(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function K(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b}function rd(a,b,c,d){var e=A.hasOwnProperty(b)?
A[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(Jh(b,c,e,d)&&(c=null),d||null===e?Gh(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function ua(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function sd(a,b){var c=b.checked;return B({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function lf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=ua(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function mf(a,b){b=b.checked;null!=b&&rd(a,"checked",b,!1)}function td(a,
b){mf(a,b);var c=ua(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?ud(a,b.type,c):b.hasOwnProperty("defaultValue")&&ud(a,b.type,ua(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function nf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;
if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function ud(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function of(a,b,c){a=J.getPooled(pf.change,a,b,
c);a.type="change";Ve(c);Qa(a);return a}function Kh(a){cd(a)}function mc(a){var b=Da(a);if(cf(b))return a}function Lh(a,b){if("change"===a)return b}function qf(){tb&&(tb.detachEvent("onpropertychange",rf),ub=tb=null)}function rf(a){"value"===a.propertyName&&mc(ub)&&(a=of(ub,a,kd(a)),Xe(Kh,a))}function Mh(a,b,c){"focus"===a?(qf(),tb=b,ub=c,tb.attachEvent("onpropertychange",rf)):"blur"===a&&qf()}function Nh(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return mc(ub)}function Oh(a,b){if("click"===
a)return mc(b)}function Ph(a,b){if("input"===a||"change"===a)return mc(b)}function Qh(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Rh[a])?!!b[a]:!1}function vd(a){return Qh}function Ea(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function vb(a,b){if(Ea(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Sh.call(b,c[d])||!Ea(a[c[d]],
b[c[d]]))return!1;return!0}function wb(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!==(b.effectTag&2))return 1;for(;b.return;)if(b=b.return,0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function sf(a){2!==wb(a)?n("188"):void 0}function Th(a){var b=a.alternate;if(!b)return b=wb(a),3===b?n("188"):void 0,1===b?null:a;for(var c=a,d=b;;){var e=c.return,f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return sf(e),a;if(g===d)return sf(e),b;g=
g.sibling}n("188")}if(c.return!==d.return)c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}g?void 0:n("189")}}c.alternate!==d?n("190"):void 0}3!==c.tag?n("188"):void 0;return c.stateNode.current===c?a:b}function tf(a){a=Th(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;
for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function nc(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function uf(a,b){var c=a[0];a=a[1];var d="on"+(a[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+"Capture"},dependencies:[c],isInteractive:b};vf[a]=b;wd[c]=b}function Uh(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);
break}var d;for(d=c;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo;if(!d)break;a.ancestors.push(c);c=dc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=kd(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,g=null,h=0;h<cc.length;h++){var l=cc[h];l&&(l=l.extractEvents(d,b,f,e))&&(g=Pa(g,l))}cd(g)}}function r(a,b){if(!b)return null;var c=(wf(a)?xf:oc).bind(null,a);b.addEventListener(a,c,!1)}function pc(a,b){if(!b)return null;var c=(wf(a)?xf:oc).bind(null,a);
b.addEventListener(a,c,!0)}function xf(a,b){yf(oc,a,b)}function oc(a,b){if(qc){var c=kd(b);c=dc(c);null===c||"number"!==typeof c.tag||2===wb(c)||(c=null);if(rc.length){var d=rc.pop();d.topLevelType=a;d.nativeEvent=b;d.targetInst=c;a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{Xe(Uh,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>rc.length&&rc.push(a)}}}function zf(a){Object.prototype.hasOwnProperty.call(a,sc)||(a[sc]=Vh++,Af[a[sc]]=
{});return Af[a[sc]]}function xd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function Bf(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Cf(a,b){var c=Bf(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Bf(c)}}function Df(a,b){return a&&b?a===
b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Df(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function Ef(){for(var a=window,b=xd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=xd(a.document)}return b}function yd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||
"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function Wh(){var a=Ef();if(yd(a)){if("selectionStart"in a)var b={start:a.selectionStart,end:a.selectionEnd};else a:{b=(b=a.ownerDocument)&&b.defaultView||window;var c=b.getSelection&&b.getSelection();if(c&&0!==c.rangeCount){b=c.anchorNode;var d=c.anchorOffset,e=c.focusNode;c=c.focusOffset;try{b.nodeType,e.nodeType}catch(cj){b=null;break a}var f=0,g=-1,h=-1,l=0,k=0,m=a,n=null;b:for(;;){for(var p;;){m!==b||0!==d&&3!==
m.nodeType||(g=f+d);m!==e||0!==c&&3!==m.nodeType||(h=f+c);3===m.nodeType&&(f+=m.nodeValue.length);if(null===(p=m.firstChild))break;n=m;m=p}for(;;){if(m===a)break b;n===b&&++l===d&&(g=f);n===e&&++k===c&&(h=f);if(null!==(p=m.nextSibling))break;m=n;n=m.parentNode}m=p}b=-1===g||-1===h?null:{start:g,end:h}}else b=null}b=b||{start:0,end:0}}else b=null;return{focusedElem:a,selectionRange:b}}function Xh(a){var b=Ef(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Df(c.ownerDocument.documentElement,
c)){if(null!==d&&yd(c))if(b=d.start,a=d.end,void 0===a&&(a=b),"selectionStart"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Cf(c,f);var g=Cf(c,d);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&
(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});"function"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}function Gf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(zd||null==Wa||Wa!==xd(c))return null;c=
Wa;"selectionStart"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return xb&&vb(xb,c)?null:(xb=c,a=J.getPooled(Hf.select,Ad,a,b),a.type="select",a.target=Wa,Qa(a),a)}function Yh(a){var b="";da.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Bd(a,b){a=B({children:void 0},b);if(b=Yh(b.children))a.children=
b;return a}function Xa(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+ua(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Cd(a,b){null!=b.dangerouslySetInnerHTML?n("91"):void 0;return B({},b,{value:void 0,defaultValue:void 0,
children:""+a._wrapperState.initialValue})}function If(a,b){var c=b.value;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?n("92"):void 0,Array.isArray(b)&&(1>=b.length?void 0:n("93"),b=b[0]),c=b),null==c&&(c=""));a._wrapperState={initialValue:ua(c)}}function Jf(a,b){var c=ua(b.value),d=ua(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Kf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";
case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Kf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function Lf(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||yb.hasOwnProperty(a)&&yb[a]?(""+b).trim():b+"px"}function Mf(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),
e=Lf(c,b[c],d);"float"===c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ed(a,b){b&&(Zh[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?n("137",a,""):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?n("60"):void 0,"object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML?void 0:n("61")),null!=b.style&&"object"!==typeof b.style?n("62",""):void 0)}function Fd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function ha(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=zf(a);b=$c[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case "scroll":pc("scroll",a);break;case "focus":case "blur":pc("focus",a);pc("blur",a);c.blur=!0;c.focus=!0;break;case "cancel":case "close":af(e)&&pc(e,a);break;case "invalid":case "submit":case "reset":break;default:-1===zb.indexOf(e)&&r(e,a)}c[e]=!0}}}function tc(){}function Nf(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}
function Gd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function $h(a,b,c,d,e,f){a[ec]=e;"input"===c&&"radio"===e.type&&null!=e.name&&mf(a,e);Fd(c,d);d=Fd(c,e);for(f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];"style"===g?Mf(a,h):"dangerouslySetInnerHTML"===g?Of(a,h):"children"===g?Ab(a,h):rd(a,g,h,d)}switch(c){case "input":td(a,
e);break;case "textarea":Jf(a,e);break;case "select":b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?Xa(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?Xa(a,!!e.multiple,e.defaultValue,!0):Xa(a,!!e.multiple,e.multiple?[]:"",!1))}}function Hd(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function Pf(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function D(a,b){0>Ya||(a.current=
Id[Ya],Id[Ya]=null,Ya--)}function L(a,b,c){Ya++;Id[Ya]=a.current;a.current=b}function Za(a,b){var c=a.type.contextTypes;if(!c)return va;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function E(a){a=a.childContextTypes;return null!==a&&void 0!==a}function uc(a){D(M,a);
D(F,a)}function Jd(a){D(M,a);D(F,a)}function Qf(a,b,c){F.current!==va?n("168"):void 0;L(F,b,a);L(M,c,a)}function Rf(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)e in a?void 0:n("108",sa(b)||"Unknown",e);return B({},c,d)}function vc(a){var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||va;Fa=F.current;L(F,b,a);L(M,M.current,a);return!0}function Sf(a,b,c){var d=a.stateNode;d?void 0:n("169");c?(b=
Rf(a,b,Fa),d.__reactInternalMemoizedMergedChildContext=b,D(M,a),D(F,a),L(F,b,a)):D(M,a);L(M,c,a)}function Tf(a){return function(b){try{return a(b)}catch(c){}}}function ai(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Kd=Tf(function(a){return b.onCommitFiberRoot(c,a)});Ld=Tf(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0}function bi(a,b,c,d){this.tag=a;this.key=
c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Md(a){a=a.prototype;return!(!a||!a.isReactComponent)}function ci(a){if("function"===typeof a)return Md(a)?1:0;if(void 0!==a&&
null!==a){a=a.$$typeof;if(a===od)return 11;if(a===pd)return 14}return 2}function Ga(a,b,c){c=a.alternate;null===c?(c=S(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;
c.contextDependencies=a.contextDependencies;c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function wc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Md(a)&&(g=1);else if("string"===typeof a)g=5;else a:switch(a){case ta:return wa(c.children,e,f,b);case ld:return Uf(c,e|3,f,b);case md:return Uf(c,e|2,f,b);case lc:return a=S(12,c,b,e|4),a.elementType=lc,a.type=lc,a.expirationTime=f,a;case nd:return a=S(13,c,b,e),b=nd,a.elementType=b,a.type=b,a.expirationTime=f,a;default:if("object"===typeof a&&
null!==a)switch(a.$$typeof){case ff:g=10;break a;case ef:g=9;break a;case od:g=11;break a;case pd:g=14;break a;case gf:g=16;d=null;break a}n("130",null==a?a:typeof a,"")}b=S(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function wa(a,b,c,d){a=S(7,a,d,b);a.expirationTime=c;return a}function Uf(a,b,c,d){a=S(8,a,d,b);b=0===(b&1)?md:ld;a.elementType=b;a.type=b;a.expirationTime=c;return a}function Nd(a,b,c){a=S(6,a,null,b);a.expirationTime=c;return a}function Od(a,b,c){b=S(4,null!==a.children?
a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Bb(a,b){a.didError=!1;var c=a.earliestPendingTime;0===c?a.earliestPendingTime=a.latestPendingTime=b:c<b?a.earliestPendingTime=b:a.latestPendingTime>b&&(a.latestPendingTime=b);xc(b,a)}function di(a,b){a.didError=!1;if(0===b)a.earliestPendingTime=0,a.latestPendingTime=0,a.earliestSuspendedTime=0,a.latestSuspendedTime=0,a.latestPingedTime=0;else{b<
a.latestPingedTime&&(a.latestPingedTime=0);var c=a.latestPendingTime;0!==c&&(c>b?a.earliestPendingTime=a.latestPendingTime=0:a.earliestPendingTime>b&&(a.earliestPendingTime=a.latestPendingTime));c=a.earliestSuspendedTime;0===c?Bb(a,b):b<a.latestSuspendedTime?(a.earliestSuspendedTime=0,a.latestSuspendedTime=0,a.latestPingedTime=0,Bb(a,b)):b>c&&Bb(a,b)}xc(0,a)}function Vf(a,b){a.didError=!1;a.latestPingedTime>=b&&(a.latestPingedTime=0);var c=a.earliestPendingTime,d=a.latestPendingTime;c===b?a.earliestPendingTime=
d===b?a.latestPendingTime=0:d:d===b&&(a.latestPendingTime=c);c=a.earliestSuspendedTime;d=a.latestSuspendedTime;0===c?a.earliestSuspendedTime=a.latestSuspendedTime=b:c<b?a.earliestSuspendedTime=b:d>b&&(a.latestSuspendedTime=b);xc(b,a)}function Wf(a,b){var c=a.earliestPendingTime;a=a.earliestSuspendedTime;c>b&&(b=c);a>b&&(b=a);return b}function xc(a,b){var c=b.earliestSuspendedTime,d=b.latestSuspendedTime,e=b.earliestPendingTime,f=b.latestPingedTime;e=0!==e?e:f;0===e&&(0===a||d<a)&&(e=d);a=e;0!==a&&
c>a&&(a=c);b.nextExpirationTimeToWorkOn=e;b.expirationTime=a}function P(a,b){if(a&&a.defaultProps){b=B({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function ei(a){var b=a._result;switch(a._status){case 1:return b;case 2:throw b;case 0:throw b;default:a._status=0;b=a._ctor;b=b();b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)});switch(a._status){case 1:return a._result;case 2:throw a._result;
}a._result=b;throw b;}}function yc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:B({},b,c);a.memoizedState=c;d=a.updateQueue;null!==d&&0===a.expirationTime&&(d.baseState=c)}function Xf(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!vb(c,d)||!vb(e,f):!0}function Yf(a,b,c,d){var e=!1;d=va;var f=b.contextType;"object"===typeof f&&null!==f?f=T(f):(d=E(b)?Fa:F.current,e=b.contextTypes,
f=(e=null!==e&&void 0!==e)?Za(a,d):va);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=zc;a.stateNode=b;b._reactInternalFiber=a;e&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zf(a,b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==
a&&zc.enqueueReplaceState(b,b.state,null)}function Pd(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$f;var f=b.contextType;"object"===typeof f&&null!==f?e.context=T(f):(f=E(b)?Fa:F.current,e.context=Za(a,f));f=a.updateQueue;null!==f&&(Cb(a,f,c,e,d),e.state=a.memoizedState);f=b.getDerivedStateFromProps;"function"===typeof f&&(yc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&
"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&zc.enqueueReplaceState(e,e.state,null),f=a.updateQueue,null!==f&&(Cb(a,f,c,e,d),e.state=a.memoizedState));"function"===typeof e.componentDidMount&&(a.effectTag|=4)}function Db(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;var d=void 0;c&&(1!==
c.tag?n("309"):void 0,d=c.stateNode);d?void 0:n("147",a);var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$f&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}"string"!==typeof a?n("284"):void 0;c._owner?void 0:n("290",a)}return a}function Ac(a,b){"textarea"!==a.type&&n("31","[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,"")}function ag(a){function b(b,
c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=Ga(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=
2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Nd(c,a.mode,d),b.return=a,b;b=e(b,c,d);b.return=a;return b}function l(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props,d),d.ref=Db(a,b,c),d.return=a,d;d=wc(c.type,c.key,c.props,null,a.mode,d);d.ref=Db(a,b,c);d.return=a;return d}function k(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=
Od(c,a.mode,d),b.return=a,b;b=e(b,c.children||[],d);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=wa(c,a.mode,d,f),b.return=a,b;b=e(b,c,d);b.return=a;return b}function Ff(a,b,c){if("string"===typeof b||"number"===typeof b)return b=Nd(""+b,a.mode,c),b.return=a,b;if("object"===typeof b&&null!==b){switch(b.$$typeof){case Bc:return c=wc(b.type,b.key,b.props,null,a.mode,c),c.ref=Db(a,null,b),c.return=a,c;case Va:return b=Od(b,a.mode,c),b.return=a,b}if(Cc(b)||sb(b))return b=
wa(b,a.mode,c,null),b.return=a,b;Ac(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Bc:return c.key===e?c.type===ta?m(a,b,c.props.children,d,e):l(a,b,c,d):null;case Va:return c.key===e?k(a,b,c,d):null}if(Cc(c)||sb(c))return null!==e?null:m(a,b,c,d,null);Ac(a,c)}return null}function r(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=
a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Bc:return a=a.get(null===d.key?c:d.key)||null,d.type===ta?m(b,a,d.props.children,e,d.key):l(b,a,d,e);case Va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e)}if(Cc(d)||sb(d))return a=a.get(c)||null,m(b,a,d,e,null);Ac(b,d)}return null}function u(e,g,h,k){for(var l=null,m=null,n=g,q=g=0,v=null;null!==n&&q<h.length;q++){n.index>q?(v=n,n=null):v=n.sibling;var Q=p(e,n,h[q],k);if(null===Q){null===n&&(n=v);break}a&&
n&&null===Q.alternate&&b(e,n);g=f(Q,g,q);null===m?l=Q:m.sibling=Q;m=Q;n=v}if(q===h.length)return c(e,n),l;if(null===n){for(;q<h.length;q++)if(n=Ff(e,h[q],k))g=f(n,g,q),null===m?l=n:m.sibling=n,m=n;return l}for(n=d(e,n);q<h.length;q++)if(v=r(n,e,q,h[q],k))a&&null!==v.alternate&&n.delete(null===v.key?q:v.key),g=f(v,g,q),null===m?l=v:m.sibling=v,m=v;a&&n.forEach(function(a){return b(e,a)});return l}function x(e,g,h,k){var l=sb(h);"function"!==typeof l?n("150"):void 0;h=l.call(h);null==h?n("151"):void 0;
for(var m=l=null,q=g,v=g=0,Q=null,t=h.next();null!==q&&!t.done;v++,t=h.next()){q.index>v?(Q=q,q=null):Q=q.sibling;var u=p(e,q,t.value,k);if(null===u){q||(q=Q);break}a&&q&&null===u.alternate&&b(e,q);g=f(u,g,v);null===m?l=u:m.sibling=u;m=u;q=Q}if(t.done)return c(e,q),l;if(null===q){for(;!t.done;v++,t=h.next())t=Ff(e,t.value,k),null!==t&&(g=f(t,g,v),null===m?l=t:m.sibling=t,m=t);return l}for(q=d(e,q);!t.done;v++,t=h.next())t=r(q,e,v,t.value,k),null!==t&&(a&&null!==t.alternate&&q.delete(null===t.key?
v:t.key),g=f(t,g,v),null===m?l=t:m.sibling=t,m=t);a&&q.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k="object"===typeof f&&null!==f&&f.type===ta&&null===f.key;k&&(f=f.props.children);var l="object"===typeof f&&null!==f;if(l)switch(f.$$typeof){case Bc:a:{l=f.key;for(k=d;null!==k;){if(k.key===l)if(7===k.tag?f.type===ta:k.elementType===f.type){c(a,k.sibling);d=e(k,f.type===ta?f.props.children:f.props,h);d.ref=Db(a,k,f);d.return=a;a=d;break a}else{c(a,k);break}else b(a,k);
k=k.sibling}f.type===ta?(d=wa(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=wc(f.type,f.key,f.props,null,a.mode,h),h.ref=Db(a,d,f),h.return=a,a=h)}return g(a);case Va:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[],h);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Od(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===
typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,h),d.return=a,a=d):(c(a,d),d=Nd(f,a.mode,h),d.return=a,a=d),g(a);if(Cc(f))return u(a,d,f,h);if(sb(f))return x(a,d,f,h);l&&Ac(a,f);if("undefined"===typeof f&&!k)switch(a.tag){case 1:case 0:h=a.type,n("152",h.displayName||h.name||"Component")}return c(a,d)}}function Ha(a){a===Eb?n("174"):void 0;return a}function Qd(a,b){L(Fb,b,a);L(Gb,a,a);L(U,Eb,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Dd(null,
"");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=Dd(b,c)}D(U,a);L(U,b,a)}function $a(a){D(U,a);D(Gb,a);D(Fb,a)}function bg(a){Ha(Fb.current);var b=Ha(U.current);var c=Dd(b,a.type);b!==c&&(L(Gb,a,a),L(U,c,a))}function Rd(a){Gb.current===a&&(D(U,a),D(Gb,a))}function V(){n("321")}function Sd(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Ea(a[c],b[c]))return!1;return!0}function Td(a,b,c,d,e,f){Hb=f;xa=b;W=null!==a?a.memoizedState:null;Dc.current=null===
W?fi:cg;b=c(d,e);if(Ib){do Ib=!1,Jb+=1,W=null!==a?a.memoizedState:null,ab=bb,X=G=y=null,Dc.current=cg,b=c(d,e);while(Ib);ia=null;Jb=0}Dc.current=Ud;a=xa;a.memoizedState=bb;a.expirationTime=Kb;a.updateQueue=X;a.effectTag|=Lb;a=null!==y&&null!==y.next;Hb=0;ab=G=bb=W=y=xa=null;Kb=0;X=null;Lb=0;a?n("300"):void 0;return b}function Vd(){Dc.current=Ud;Hb=0;ab=G=bb=W=y=xa=null;Kb=0;X=null;Lb=0;Ib=!1;ia=null;Jb=0}function cb(){var a={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};
null===G?bb=G=a:G=G.next=a;return G}function Mb(){if(null!==ab)G=ab,ab=G.next,y=W,W=null!==y?y.next:null;else{null===W?n("310"):void 0;y=W;var a={memoizedState:y.memoizedState,baseState:y.baseState,queue:y.queue,baseUpdate:y.baseUpdate,next:null};G=null===G?bb=a:G.next=a;W=y.next}return G}function dg(a,b){return"function"===typeof b?b(a):b}function eg(a,b,c){b=Mb();c=b.queue;null===c?n("311"):void 0;c.lastRenderedReducer=a;if(0<Jb){var d=c.dispatch;if(null!==ia){var e=ia.get(c);if(void 0!==e){ia.delete(c);
var f=b.memoizedState;do f=a(f,e.action),e=e.next;while(null!==e);Ea(f,b.memoizedState)||(ja=!0);b.memoizedState=f;b.baseUpdate===c.last&&(b.baseState=f);c.lastRenderedState=f;return[f,d]}}return[b.memoizedState,d]}d=c.last;var g=b.baseUpdate;f=b.baseState;null!==g?(null!==d&&(d.next=null),d=g.next):d=null!==d?d.next:null;if(null!==d){var h=e=null,l=d,k=!1;do{var m=l.expirationTime;m<Hb?(k||(k=!0,h=g,e=f),m>Kb&&(Kb=m)):f=l.eagerReducer===a?l.eagerState:a(f,l.action);g=l;l=l.next}while(null!==l&&l!==
d);k||(h=g,e=f);Ea(f,b.memoizedState)||(ja=!0);b.memoizedState=f;b.baseUpdate=h;b.baseState=e;c.lastRenderedState=f}return[b.memoizedState,c.dispatch]}function Wd(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};null===X?(X={lastEffect:null},X.lastEffect=a.next=a):(b=X.lastEffect,null===b?X.lastEffect=a.next=a:(c=b.next,b.next=a,a.next=c,X.lastEffect=a));return a}function Xd(a,b,c,d){var e=cb();Lb|=a;e.memoizedState=Wd(b,c,void 0,void 0===d?null:d)}function Yd(a,b,c,d){var e=Mb();d=void 0===
d?null:d;var f=void 0;if(null!==y){var g=y.memoizedState;f=g.destroy;if(null!==d&&Sd(d,g.deps)){Wd(db,c,f,d);return}}Lb|=a;e.memoizedState=Wd(b,c,f,d)}function fg(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function gg(a,b){}function hg(a,b,c){25>Jb?void 0:n("301");var d=a.alternate;if(a===xa||null!==d&&d===xa)if(Ib=!0,a={expirationTime:Hb,action:c,eagerReducer:null,eagerState:null,next:null},null===
ia&&(ia=new Map),c=ia.get(b),void 0===c)ia.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}else{eb();var e=ka();e=fb(e,a);var f={expirationTime:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.last;if(null===g)f.next=f;else{var h=g.next;null!==h&&(f.next=h);g.next=f}b.last=f;if(0===a.expirationTime&&(null===d||0===d.expirationTime)&&(d=b.lastRenderedReducer,null!==d))try{var l=b.lastRenderedState,k=d(l,c);f.eagerReducer=d;f.eagerState=k;if(Ea(k,l))return}catch(m){}finally{}ya(a,
e)}}function ig(a,b){var c=S(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function jg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function kg(a){if(Ia){var b=
gb;if(b){var c=b;if(!jg(a,b)){b=Hd(c);if(!b||!jg(a,b)){a.effectTag|=2;Ia=!1;la=a;return}ig(la,c)}la=a;gb=Pf(b)}else a.effectTag|=2,Ia=!1,la=a}}function lg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&18!==a.tag;)a=a.return;la=a}function Zd(a){if(a!==la)return!1;if(!Ia)return lg(a),Ia=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!Gd(b,a.memoizedProps))for(b=gb;b;)ig(a,b),b=Hd(b);lg(a);gb=la?Hd(a.stateNode):null;return!0}function $d(){gb=la=null;Ia=!1}function N(a,b,c,d){b.child=null===
a?ae(b,null,c,d):hb(b,a.child,c,d)}function mg(a,b,c,d,e){c=c.render;var f=b.ref;ib(b,e);d=Td(a,b,c,d,f,e);if(null!==a&&!ja)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),ma(a,b,e);b.effectTag|=1;N(a,b,d,e);return b.child}function ng(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Md(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,og(a,b,g,d,e,f);a=wc(c.type,null,d,null,b.mode,f);a.ref=
b.ref;a.return=b;return b.child=a}g=a.child;if(e<f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:vb,c(e,d)&&a.ref===b.ref))return ma(a,b,f);b.effectTag|=1;a=Ga(g,d,f);a.ref=b.ref;a.return=b;return b.child=a}function og(a,b,c,d,e,f){return null!==a&&vb(a.memoizedProps,d)&&a.ref===b.ref&&(ja=!1,e<f)?ma(a,b,f):be(a,b,c,d,f)}function pg(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function be(a,b,c,d,e){var f=E(c)?Fa:F.current;f=Za(b,f);ib(b,e);c=Td(a,b,c,d,f,e);if(null!==
a&&!ja)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),ma(a,b,e);b.effectTag|=1;N(a,b,c,e);return b.child}function qg(a,b,c,d,e){if(E(c)){var f=!0;vc(b)}else f=!1;ib(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yf(b,c,d,e),Pd(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var l=g.context,k=c.contextType;"object"===typeof k&&null!==k?k=T(k):(k=E(c)?Fa:F.current,k=Za(b,k));var m=
c.getDerivedStateFromProps,n="function"===typeof m||"function"===typeof g.getSnapshotBeforeUpdate;n||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||l!==k)&&Zf(b,g,d,k);za=!1;var p=b.memoizedState;l=g.state=p;var r=b.updateQueue;null!==r&&(Cb(b,r,d,g,e),l=b.memoizedState);h!==d||p!==l||M.current||za?("function"===typeof m&&(yc(b,c,m,d),l=b.memoizedState),(h=za||Xf(b,c,h,d,p,l,k))?(n||"function"!==typeof g.UNSAFE_componentWillMount&&
"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=l),g.props=d,g.state=l,g.context=k,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,h=b.memoizedProps,g.props=b.type===b.elementType?
h:P(b.type,h),l=g.context,k=c.contextType,"object"===typeof k&&null!==k?k=T(k):(k=E(c)?Fa:F.current,k=Za(b,k)),m=c.getDerivedStateFromProps,(n="function"===typeof m||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||l!==k)&&Zf(b,g,d,k),za=!1,l=b.memoizedState,p=g.state=l,r=b.updateQueue,null!==r&&(Cb(b,r,d,g,e),p=b.memoizedState),h!==d||l!==p||M.current||za?("function"===typeof m&&(yc(b,
c,m,d),p=b.memoizedState),(m=za||Xf(b,c,h,d,l,p,k))?(n||"function"!==typeof g.UNSAFE_componentWillUpdate&&"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,k),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,k)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&l===
a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=k,d=m):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=256),d=!1);return ce(a,b,c,d,f,e)}function ce(a,b,c,d,e,f){pg(a,b);var g=0!==(b.effectTag&
64);if(!d&&!g)return e&&Sf(b,c,!1),ma(a,b,f);d=b.stateNode;gi.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?null:d.render();b.effectTag|=1;null!==a&&g?(b.child=hb(b,a.child,null,f),b.child=hb(b,null,h,f)):N(a,b,h,f);b.memoizedState=d.state;e&&Sf(b,c,!0);return b.child}function rg(a){var b=a.stateNode;b.pendingContext?Qf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Qf(a,b.context,!1);Qd(a,b.containerInfo)}function sg(a,b,c){var d=b.mode,e=b.pendingProps,f=b.memoizedState;
if(0===(b.effectTag&64)){f=null;var g=!1}else f={timedOutAt:null!==f?f.timedOutAt:0},g=!0,b.effectTag&=-65;if(null===a)if(g){var h=e.fallback;a=wa(null,d,0,null);0===(b.mode&1)&&(a.child=null!==b.memoizedState?b.child.child:b.child);d=wa(h,d,c,null);a.sibling=d;c=a;c.return=d.return=b}else c=d=ae(b,null,e.children,c);else null!==a.memoizedState?(d=a.child,h=d.sibling,g?(c=e.fallback,e=Ga(d,d.pendingProps,0),0===(b.mode&1)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==d.child&&(e.child=g)),
d=e.sibling=Ga(h,c,h.expirationTime),c=e,e.childExpirationTime=0,c.return=d.return=b):c=d=hb(b,d.child,e.children,c)):(h=a.child,g?(g=e.fallback,e=wa(null,d,0,null),e.child=h,0===(b.mode&1)&&(e.child=null!==b.memoizedState?b.child.child:b.child),d=e.sibling=wa(g,d,c,null),d.effectTag|=2,c=e,e.childExpirationTime=0,c.return=d.return=b):d=c=hb(b,h,e.children,c)),b.stateNode=a.stateNode;b.memoizedState=f;b.child=c;return d}function ma(a,b,c){null!==a&&(b.contextDependencies=a.contextDependencies);if(b.childExpirationTime<
c)return null;null!==a&&b.child!==a.child?n("153"):void 0;if(null!==b.child){a=b.child;c=Ga(a,a.pendingProps,a.expirationTime);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Ga(a,a.pendingProps,a.expirationTime),c.return=b;c.sibling=null}return b.child}function hi(a,b,c){var d=b.expirationTime;if(null!==a)if(a.memoizedProps!==b.pendingProps||M.current)ja=!0;else{if(d<c){ja=!1;switch(b.tag){case 3:rg(b);$d();break;case 5:bg(b);break;case 1:E(b.type)&&vc(b);break;case 4:Qd(b,b.stateNode.containerInfo);
break;case 10:tg(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;if(0!==d&&d>=c)return sg(a,b,c);b=ma(a,b,c);return null!==b?b.sibling:null}}return ma(a,b,c)}}else ja=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.elementType;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;var e=Za(b,F.current);ib(b,c);e=Td(null,b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=
1;Vd();if(E(d)){var f=!0;vc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var g=d.getDerivedStateFromProps;"function"===typeof g&&yc(b,d,g,a);e.updater=zc;b.stateNode=e;e._reactInternalFiber=b;Pd(b,d,a,c);b=ce(null,b,d,!0,f,c)}else b.tag=0,N(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);f=b.pendingProps;a=ei(e);b.type=a;e=b.tag=ci(a);f=P(a,f);g=void 0;switch(e){case 0:g=be(null,b,a,f,c);break;case 1:g=
qg(null,b,a,f,c);break;case 11:g=mg(null,b,a,f,c);break;case 14:g=ng(null,b,a,P(a.type,f),d,c);break;default:n("306",a,"")}return g;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:P(d,e),be(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:P(d,e),qg(a,b,d,e,c);case 3:rg(b);d=b.updateQueue;null===d?n("282"):void 0;e=b.memoizedState;e=null!==e?e.element:null;Cb(b,d,b.pendingProps,null,c);d=b.memoizedState.element;if(d===e)$d(),b=ma(a,b,c);else{e=b.stateNode;if(e=
(null===a||null===a.child)&&e.hydrate)gb=Pf(b.stateNode.containerInfo),la=b,e=Ia=!0;e?(b.effectTag|=2,b.child=ae(b,null,d,c)):(N(a,b,d,c),$d());b=b.child}return b;case 5:return bg(b),null===a&&kg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Gd(d,e)?g=null:null!==f&&Gd(d,f)&&(b.effectTag|=16),pg(a,b),1!==c&&b.mode&1&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(N(a,b,g,c),b=b.child),b;case 6:return null===a&&kg(b),null;case 13:return sg(a,b,c);case 4:return Qd(b,
b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=hb(b,null,d,c):N(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:P(d,e),mg(a,b,d,e,c);case 7:return N(a,b,b.pendingProps,c),b.child;case 8:return N(a,b,b.pendingProps.children,c),b.child;case 12:return N(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;tg(b,f);if(null!==g){var h=g.value;f=Ea(h,f)?0:("function"===typeof d._calculateChangedBits?
d._calculateChangedBits(h,f):1073741823)|0;if(0===f){if(g.children===e.children&&!M.current){b=ma(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var l=h.contextDependencies;if(null!==l){g=h.child;for(var k=l.first;null!==k;){if(k.context===d&&0!==(k.observedBits&f)){1===h.tag&&(k=Aa(c),k.tag=Ec,na(h,k));h.expirationTime<c&&(h.expirationTime=c);k=h.alternate;null!==k&&k.expirationTime<c&&(k.expirationTime=c);k=c;for(var m=h.return;null!==m;){var p=m.alternate;if(m.childExpirationTime<
k)m.childExpirationTime=k,null!==p&&p.childExpirationTime<k&&(p.childExpirationTime=k);else if(null!==p&&p.childExpirationTime<k)p.childExpirationTime=k;else break;m=m.return}l.expirationTime<c&&(l.expirationTime=c);break}k=k.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}}N(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,
d=f.children,ib(b,c),e=T(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,N(a,b,d,c),b.child;case 14:return e=b.type,f=P(e,b.pendingProps),f=P(e.type,f),ng(a,b,e,f,d,c);case 15:return og(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:P(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,E(d)?(a=!0,vc(b)):a=!1,ib(b,c),Yf(b,d,e,c),Pd(b,d,e,c),ce(null,b,d,!0,a,c)}n("156")}function tg(a,b){var c=a.type._context;L(de,c._currentValue,
a);c._currentValue=b}function ee(a){var b=de.current;D(de,a);a.type._context._currentValue=b}function ib(a,b){Nb=a;Ob=Ja=null;var c=a.contextDependencies;null!==c&&c.expirationTime>=b&&(ja=!0);a.contextDependencies=null}function T(a,b){if(Ob!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Ob=a,b=1073741823;b={context:a,observedBits:b,next:null};null===Ja?(null===Nb?n("308"):void 0,Ja=b,Nb.contextDependencies={first:b,expirationTime:0}):Ja=Ja.next=b}return a._currentValue}function Fc(a){return{baseState:a,
firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function fe(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Aa(a){return{expirationTime:a,tag:ug,payload:null,callback:null,next:null,nextEffect:null}}function Gc(a,
b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}function na(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue;var e=null;null===d&&(d=a.updateQueue=Fc(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=Fc(a.memoizedState),e=c.updateQueue=Fc(c.memoizedState)):d=a.updateQueue=fe(e):null===e&&(e=c.updateQueue=fe(d));null===e||d===e?Gc(d,b):null===d.lastUpdate||null===e.lastUpdate?(Gc(d,b),Gc(e,b)):(Gc(d,b),e.lastUpdate=
b)}function vg(a,b){var c=a.updateQueue;c=null===c?a.updateQueue=Fc(a.memoizedState):wg(a,c);null===c.lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function wg(a,b){var c=a.alternate;null!==c&&b===c.updateQueue&&(b=a.updateQueue=fe(b));return b}function xg(a,b,c,d,e,f){switch(c.tag){case yg:return a=c.payload,"function"===typeof a?a.call(f,d,e):a;case ge:a.effectTag=a.effectTag&-2049|64;case ug:a=c.payload;e="function"===typeof a?
a.call(f,d,e):a;if(null===e||void 0===e)break;return B({},d,e);case Ec:za=!0}return d}function Cb(a,b,c,d,e){za=!1;b=wg(a,b);for(var f=b.baseState,g=null,h=0,l=b.firstUpdate,k=f;null!==l;){var m=l.expirationTime;m<e?(null===g&&(g=l,f=k),h<m&&(h=m)):(k=xg(a,b,l,k,c,d),null!==l.callback&&(a.effectTag|=32,l.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=l:(b.lastEffect.nextEffect=l,b.lastEffect=l)));l=l.next}m=null;for(l=b.firstCapturedUpdate;null!==l;){var n=l.expirationTime;n<e?(null===
m&&(m=l,null===g&&(f=k)),h<n&&(h=n)):(k=xg(a,b,l,k,c,d),null!==l.callback&&(a.effectTag|=32,l.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=l:(b.lastCapturedEffect.nextEffect=l,b.lastCapturedEffect=l)));l=l.next}null===g&&(b.lastUpdate=null);null===m?b.lastCapturedUpdate=null:a.effectTag|=32;null===g&&null===m&&(f=k);b.baseState=f;b.firstUpdate=g;b.firstCapturedUpdate=m;a.expirationTime=h;a.memoizedState=k}function zg(a,b,c,d){null!==b.firstCapturedUpdate&&
(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null);Ag(b.firstEffect,c);b.firstEffect=b.lastEffect=null;Ag(b.firstCapturedEffect,c);b.firstCapturedEffect=b.lastCapturedEffect=null}function Ag(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;"function"!==typeof c?n("191",c):void 0;c.call(d)}a=a.nextEffect}}function Hc(a,b){return{value:a,source:b,stack:qd(b)}}function Pb(a){a.effectTag|=
4}function Bg(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=qd(c));null!==c&&sa(c.type);b=b.value;null!==a&&1===a.tag&&sa(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function Cg(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Ka(a,c)}else b.current=null}function Qb(a,b,c){c=c.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do{if((d.tag&a)!==db){var e=d.destroy;d.destroy=void 0;void 0!==e&&e()}(d.tag&b)!==db&&(e=d.create,
d.destroy=e());d=d.next}while(d!==c)}}function ii(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d.style.display="none";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null;d.style.display=Lf("display",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?"":c.memoizedProps;else if(13===c.tag&&null!==c.memoizedState){d=c.child.sibling;d.return=c;c=d;continue}else if(null!==c.child){c.child.return=c;c=c.child;continue}if(c===a)break;for(;null===
c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}function Dg(a){"function"===typeof Ld&&Ld(a);switch(a.tag){case 0:case 11:case 14:case 15:var b=a.updateQueue;if(null!==b&&(b=b.lastEffect,null!==b)){var c=b=b.next;do{var d=c.destroy;if(void 0!==d){var e=a;try{d()}catch(f){Ka(e,f)}}c=c.next}while(c!==b)}break;case 1:Cg(a);b=a.stateNode;if("function"===typeof b.componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(f){Ka(a,
f)}break;case 5:Cg(a);break;case 4:Eg(a)}}function Fg(a){return 5===a.tag||3===a.tag||4===a.tag}function Gg(a){a:{for(var b=a.return;null!==b;){if(Fg(b)){var c=b;break a}b=b.return}n("160");c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode;d=!1;break;case 3:b=c.stateNode.containerInfo;d=!0;break;case 4:b=c.stateNode.containerInfo;d=!0;break;default:n("161")}c.effectTag&16&&(Ab(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fg(c.return)){c=null;break a}c=
c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)if(c)if(d){var f=b,g=e.stateNode,h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(e.stateNode,c);else d?(g=b,h=e.stateNode,8===g.nodeType?(f=g.parentNode,f.insertBefore(h,g)):(f=g,f.appendChild(h)),
g=g._reactRootContainer,null!==g&&void 0!==g||null!==f.onclick||(f.onclick=tc)):b.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e;e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return;e=e.sibling}}function Eg(a){for(var b=a,c=!1,d=void 0,e=void 0;;){if(!c){c=b.return;a:for(;;){null===c?n("160"):void 0;switch(c.tag){case 5:d=c.stateNode;e=!1;break a;case 3:d=c.stateNode.containerInfo;e=!0;
break a;case 4:d=c.stateNode.containerInfo;e=!0;break a}c=c.return}c=!0}if(5===b.tag||6===b.tag){a:for(var f=b,g=f;;)if(Dg(g),null!==g.child&&4!==g.tag)g.child.return=g,g=g.child;else{if(g===f)break;for(;null===g.sibling;){if(null===g.return||g.return===f)break a;g=g.return}g.sibling.return=g.return;g=g.sibling}e?(f=d,g=b.stateNode,8===f.nodeType?f.parentNode.removeChild(g):f.removeChild(g)):d.removeChild(b.stateNode)}else if(4===b.tag){if(null!==b.child){d=b.stateNode.containerInfo;e=!0;b.child.return=
b;b=b.child;continue}}else if(Dg(b),null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return;b=b.return;4===b.tag&&(c=!1)}b.sibling.return=b.return;b=b.sibling}}function Hg(a,b){switch(b.tag){case 0:case 11:case 14:case 15:Qb(Rb,ji,b);break;case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&$h(c,f,e,a,d,b)}break;case 6:null===
b.stateNode?n("162"):void 0;b.stateNode.nodeValue=b.memoizedProps;break;case 3:break;case 12:break;case 13:c=b.memoizedState;d=void 0;a=b;null===c?d=!1:(d=!0,a=b.child,0===c.timedOutAt&&(c.timedOutAt=ka()));null!==a&&ii(a,d);c=b.updateQueue;if(null!==c){b.updateQueue=null;var g=b.stateNode;null===g&&(g=b.stateNode=new ki);c.forEach(function(a){var c=li.bind(null,b,a);g.has(a)||(g.add(a),a.then(c,c))})}break;case 17:break;default:n("163")}}function he(a,b,c){c=Aa(c);c.tag=ge;c.payload={element:null};
var d=b.value;c.callback=function(){ie(d);Bg(a,b)};return c}function Ig(a,b,c){c=Aa(c);c.tag=ge;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&(null===Ba?Ba=new Set([this]):Ba.add(this));var c=b.value,e=b.stack;Bg(a,b);this.componentDidCatch(c,{componentStack:null!==e?e:""})});return c}function mi(a,b){switch(a.tag){case 1:return E(a.type)&&
uc(a),b=a.effectTag,b&2048?(a.effectTag=b&-2049|64,a):null;case 3:return $a(a),Jd(a),b=a.effectTag,0!==(b&64)?n("285"):void 0,a.effectTag=b&-2049|64,a;case 5:return Rd(a),null;case 13:return b=a.effectTag,b&2048?(a.effectTag=b&-2049|64,a):null;case 18:return null;case 4:return $a(a),null;case 10:return ee(a),null;default:return null}}function Jg(){if(null!==x)for(var a=x.return;null!==a;){var b=a;switch(b.tag){case 1:var c=b.type.childContextTypes;null!==c&&void 0!==c&&uc(b);break;case 3:$a(b);Jd(b);
break;case 5:Rd(b);break;case 4:$a(b);break;case 10:ee(b)}a=a.return}Y=null;H=0;La=-1;je=!1;x=null}function ni(){for(;null!==p;){var a=p.effectTag;a&16&&Ab(p.stateNode,"");if(a&128){var b=p.alternate;null!==b&&(b=b.ref,null!==b&&("function"===typeof b?b(null):b.current=null))}switch(a&14){case 2:Gg(p);p.effectTag&=-3;break;case 6:Gg(p);p.effectTag&=-3;Hg(p.alternate,p);break;case 4:Hg(p.alternate,p);break;case 8:a=p,Eg(a),a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a=a.alternate,
null!==a&&(a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null)}p=p.nextEffect}}function oi(){for(;null!==p;){if(p.effectTag&256)a:{var a=p.alternate,b=p;switch(b.tag){case 0:case 11:case 15:Qb(pi,db,b);break a;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:P(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}break a;case 3:case 5:case 6:case 4:case 17:break a;default:n("163")}}p=p.nextEffect}}
function qi(a,b){for(;null!==p;){var c=p.effectTag;if(c&36){var d=p.alternate,e=p,f=b;switch(e.tag){case 0:case 11:case 15:Qb(ri,Sb,e);break;case 1:var g=e.stateNode;if(e.effectTag&4)if(null===d)g.componentDidMount();else{var h=e.elementType===e.type?d.memoizedProps:P(e.type,d.memoizedProps);g.componentDidUpdate(h,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}d=e.updateQueue;null!==d&&zg(e,d,g,f);break;case 3:d=e.updateQueue;if(null!==d){g=null;if(null!==e.child)switch(e.child.tag){case 5:g=
e.child.stateNode;break;case 1:g=e.child.stateNode}zg(e,d,g,f)}break;case 5:f=e.stateNode;null===d&&e.effectTag&4&&Nf(e.type,e.memoizedProps)&&f.focus();break;case 6:break;case 4:break;case 12:break;case 13:break;case 17:break;default:n("163")}}c&128&&(e=p.ref,null!==e&&(f=p.stateNode,"function"===typeof e?e(f):e.current=f));c&512&&(ke=a);p=p.nextEffect}}function si(a,b){Ic=Jc=ke=null;var c=w;w=!0;do{if(b.effectTag&512){var d=!1,e=void 0;try{var f=b;Qb(le,db,f);Qb(db,me,f)}catch(g){d=!0,e=g}d&&Ka(b,
e)}b=b.nextEffect}while(null!==b);w=c;c=a.expirationTime;0!==c&&Kc(a,c);z||w||Z(1073741823,!1)}function eb(){null!==Jc&&ti(Jc);null!==Ic&&Ic()}function ui(a,b){Lc=Ca=!0;a.current===b?n("177"):void 0;var c=a.pendingCommitExpirationTime;0===c?n("261"):void 0;a.pendingCommitExpirationTime=0;var d=b.expirationTime,e=b.childExpirationTime;di(a,e>d?e:d);Kg.current=null;d=void 0;1<b.effectTag?null!==b.lastEffect?(b.lastEffect.nextEffect=b,d=b.firstEffect):d=b:d=b.firstEffect;ne=qc;oe=Wh();qc=!1;for(p=d;null!==
p;){e=!1;var f=void 0;try{oi()}catch(h){e=!0,f=h}e&&(null===p?n("178"):void 0,Ka(p,f),null!==p&&(p=p.nextEffect))}for(p=d;null!==p;){e=!1;f=void 0;try{ni()}catch(h){e=!0,f=h}e&&(null===p?n("178"):void 0,Ka(p,f),null!==p&&(p=p.nextEffect))}Xh(oe);oe=null;qc=!!ne;ne=null;a.current=b;for(p=d;null!==p;){e=!1;f=void 0;try{qi(a,c)}catch(h){e=!0,f=h}e&&(null===p?n("178"):void 0,Ka(p,f),null!==p&&(p=p.nextEffect))}if(null!==d&&null!==ke){var g=si.bind(null,a,d);Jc=Mc(Lg,function(){return vi(g)});Ic=g}Ca=
Lc=!1;"function"===typeof Kd&&Kd(b.stateNode);c=b.expirationTime;b=b.childExpirationTime;b=b>c?b:c;0===b&&(Ba=null);wi(a,b)}function Mg(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0===(a.effectTag&1024)){x=a;a:{var e=b;b=a;var f=H;var g=b.pendingProps;switch(b.tag){case 2:break;case 16:break;case 15:case 0:break;case 1:E(b.type)&&uc(b);break;case 3:$a(b);Jd(b);g=b.stateNode;g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null);if(null===e||null===e.child)Zd(b),b.effectTag&=
-3;pe(b);break;case 5:Rd(b);var h=Ha(Fb.current);f=b.type;if(null!==e&&null!=b.stateNode)Ng(e,b,f,g,h),e.ref!==b.ref&&(b.effectTag|=128);else if(g){var l=Ha(U.current);if(Zd(b)){g=b;e=g.stateNode;var k=g.type,m=g.memoizedProps,p=h;e[ea]=g;e[ec]=m;f=void 0;h=k;switch(h){case "iframe":case "object":r("load",e);break;case "video":case "audio":for(k=0;k<zb.length;k++)r(zb[k],e);break;case "source":r("error",e);break;case "img":case "image":case "link":r("error",e);r("load",e);break;case "form":r("reset",
e);r("submit",e);break;case "details":r("toggle",e);break;case "input":lf(e,m);r("invalid",e);ha(p,"onChange");break;case "select":e._wrapperState={wasMultiple:!!m.multiple};r("invalid",e);ha(p,"onChange");break;case "textarea":If(e,m),r("invalid",e),ha(p,"onChange")}Ed(h,m);k=null;for(f in m)m.hasOwnProperty(f)&&(l=m[f],"children"===f?"string"===typeof l?e.textContent!==l&&(k=["children",l]):"number"===typeof l&&e.textContent!==""+l&&(k=["children",""+l]):Oa.hasOwnProperty(f)&&null!=l&&ha(p,f));
switch(h){case "input":kc(e);nf(e,m,!0);break;case "textarea":kc(e);f=e.textContent;f===e._wrapperState.initialValue&&(e.value=f);break;case "select":case "option":break;default:"function"===typeof m.onClick&&(e.onclick=tc)}f=k;g.updateQueue=f;g=null!==f?!0:!1;g&&Pb(b)}else{m=b;p=f;e=g;k=9===h.nodeType?h:h.ownerDocument;"http://www.w3.org/1999/xhtml"===l&&(l=Kf(p));"http://www.w3.org/1999/xhtml"===l?"script"===p?(e=k.createElement("div"),e.innerHTML="<script>\x3c/script>",k=e.removeChild(e.firstChild)):
"string"===typeof e.is?k=k.createElement(p,{is:e.is}):(k=k.createElement(p),"select"===p&&(p=k,e.multiple?p.multiple=!0:e.size&&(p.size=e.size))):k=k.createElementNS(l,p);e=k;e[ea]=m;e[ec]=g;Og(e,b,!1,!1);m=e;k=f;p=g;var t=h,y=Fd(k,p);switch(k){case "iframe":case "object":r("load",m);h=p;break;case "video":case "audio":for(h=0;h<zb.length;h++)r(zb[h],m);h=p;break;case "source":r("error",m);h=p;break;case "img":case "image":case "link":r("error",m);r("load",m);h=p;break;case "form":r("reset",m);r("submit",
m);h=p;break;case "details":r("toggle",m);h=p;break;case "input":lf(m,p);h=sd(m,p);r("invalid",m);ha(t,"onChange");break;case "option":h=Bd(m,p);break;case "select":m._wrapperState={wasMultiple:!!p.multiple};h=B({},p,{value:void 0});r("invalid",m);ha(t,"onChange");break;case "textarea":If(m,p);h=Cd(m,p);r("invalid",m);ha(t,"onChange");break;default:h=p}Ed(k,h);l=void 0;var u=k,w=m,v=h;for(l in v)if(v.hasOwnProperty(l)){var q=v[l];"style"===l?Mf(w,q):"dangerouslySetInnerHTML"===l?(q=q?q.__html:void 0,
null!=q&&Of(w,q)):"children"===l?"string"===typeof q?("textarea"!==u||""!==q)&&Ab(w,q):"number"===typeof q&&Ab(w,""+q):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(Oa.hasOwnProperty(l)?null!=q&&ha(t,l):null!=q&&rd(w,l,q,y))}switch(k){case "input":kc(m);nf(m,p,!1);break;case "textarea":kc(m);h=m.textContent;h===m._wrapperState.initialValue&&(m.value=h);break;case "option":null!=p.value&&m.setAttribute("value",""+ua(p.value));break;case "select":h=m;m=p;h.multiple=
!!m.multiple;p=m.value;null!=p?Xa(h,!!m.multiple,p,!1):null!=m.defaultValue&&Xa(h,!!m.multiple,m.defaultValue,!0);break;default:"function"===typeof h.onClick&&(m.onclick=tc)}(g=Nf(f,g))&&Pb(b);b.stateNode=e}null!==b.ref&&(b.effectTag|=128)}else null===b.stateNode?n("166"):void 0;break;case 6:e&&null!=b.stateNode?Pg(e,b,e.memoizedProps,g):("string"!==typeof g&&(null===b.stateNode?n("166"):void 0),e=Ha(Fb.current),Ha(U.current),Zd(b)?(g=b,f=g.stateNode,e=g.memoizedProps,f[ea]=g,(g=f.nodeValue!==e)&&
Pb(b)):(f=b,g=(9===e.nodeType?e:e.ownerDocument).createTextNode(g),g[ea]=b,f.stateNode=g));break;case 11:break;case 13:g=b.memoizedState;if(0!==(b.effectTag&64)){b.expirationTime=f;x=b;break a}g=null!==g;f=null!==e&&null!==e.memoizedState;null!==e&&!g&&f&&(e=e.child.sibling,null!==e&&(h=b.firstEffect,null!==h?(b.firstEffect=e,e.nextEffect=h):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8));if(g||f)b.effectTag|=4;break;case 7:break;case 8:break;case 12:break;case 4:$a(b);pe(b);break;
case 10:ee(b);break;case 9:break;case 14:break;case 17:E(b.type)&&uc(b);break;case 18:break;default:n("156")}x=null}b=a;if(1===H||1!==b.childExpirationTime){g=0;for(f=b.child;null!==f;)e=f.expirationTime,h=f.childExpirationTime,e>g&&(g=e),h>g&&(g=h),f=f.sibling;b.childExpirationTime=g}if(null!==x)return x;null!==c&&0===(c.effectTag&1024)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),
1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a))}else{a=mi(a,H);if(null!==a)return a.effectTag&=1023,a;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=1024)}if(null!==d)return d;if(null!==c)a=c;else break}return null}function Qg(a){var b=hi(a.alternate,a,H);a.memoizedProps=a.pendingProps;null===b&&(b=Mg(a));Kg.current=null;return b}function Rg(a,b){Ca?n("243"):void 0;eb();Ca=!0;var c=qe.current;qe.current=Ud;var d=a.nextExpirationTimeToWorkOn;
if(d!==H||a!==Y||null===x)Jg(),Y=a,H=d,x=Ga(Y.current,null,H),a.pendingCommitExpirationTime=0;var e=!1;do{try{if(b)for(;null!==x&&!Nc();)x=Qg(x);else for(;null!==x;)x=Qg(x)}catch(v){if(Ob=Ja=Nb=null,Vd(),null===x)e=!0,ie(v);else{null===x?n("271"):void 0;var f=x,g=f.return;if(null===g)e=!0,ie(v);else{a:{var h=a,l=g,k=f,m=v;g=H;k.effectTag|=1024;k.firstEffect=k.lastEffect=null;if(null!==m&&"object"===typeof m&&"function"===typeof m.then){var p=m;m=l;var t=-1,r=-1;do{if(13===m.tag){var u=m.alternate;
if(null!==u&&(u=u.memoizedState,null!==u)){r=10*(1073741822-u.timedOutAt);break}u=m.pendingProps.maxDuration;if("number"===typeof u)if(0>=u)t=0;else if(-1===t||u<t)t=u}m=m.return}while(null!==m);m=l;do{if(u=13===m.tag)u=void 0===m.memoizedProps.fallback?!1:null===m.memoizedState;if(u){l=m.updateQueue;null===l?(l=new Set,l.add(p),m.updateQueue=l):l.add(p);if(0===(m.mode&1)){m.effectTag|=64;k.effectTag&=-1957;1===k.tag&&(null===k.alternate?k.tag=17:(g=Aa(1073741823),g.tag=Ec,na(k,g)));k.expirationTime=
1073741823;break a}k=h;l=g;var w=k.pingCache;null===w?(w=k.pingCache=new xi,u=new Set,w.set(p,u)):(u=w.get(p),void 0===u&&(u=new Set,w.set(p,u)));u.has(l)||(u.add(l),k=yi.bind(null,k,p,l),p.then(k,k));-1===t?h=1073741823:(-1===r&&(r=10*(1073741822-Wf(h,g))-5E3),h=r+t);0<=h&&La<h&&(La=h);m.effectTag|=2048;m.expirationTime=g;break a}m=m.return}while(null!==m);m=Error((sa(k.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
qd(k))}je=!0;m=Hc(m,k);h=l;do{switch(h.tag){case 3:h.effectTag|=2048;h.expirationTime=g;g=he(h,m,g);vg(h,g);break a;case 1:if(t=m,r=h.type,k=h.stateNode,0===(h.effectTag&64)&&("function"===typeof r.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ba||!Ba.has(k)))){h.effectTag|=2048;h.expirationTime=g;g=Ig(h,t,g);vg(h,g);break a}}h=h.return}while(null!==h)}x=Mg(f);continue}}}break}while(1);Ca=!1;qe.current=c;Ob=Ja=Nb=null;Vd();if(e)Y=null,a.finishedWork=null;else if(null!==
x)a.finishedWork=null;else{c=a.current.alternate;null===c?n("281"):void 0;Y=null;if(je){e=a.latestPendingTime;f=a.latestSuspendedTime;g=a.latestPingedTime;if(0!==e&&e<d||0!==f&&f<d||0!==g&&g<d){Vf(a,d);re(a,c,d,a.expirationTime,-1);return}if(!a.didError&&b){a.didError=!0;d=a.nextExpirationTimeToWorkOn=d;b=a.expirationTime=1073741823;re(a,c,d,b,-1);return}}b&&-1!==La?(Vf(a,d),b=10*(1073741822-Wf(a,d)),b<La&&(La=b),b=10*(1073741822-ka()),b=La-b,re(a,c,d,a.expirationTime,0>b?0:b)):(a.pendingCommitExpirationTime=
d,a.finishedWork=c)}}function Ka(a,b){for(var c=a.return;null!==c;){switch(c.tag){case 1:var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===Ba||!Ba.has(d))){a=Hc(b,a);a=Ig(c,a,1073741823);na(c,a);ya(c,1073741823);return}break;case 3:a=Hc(b,a);a=he(c,a,1073741823);na(c,a);ya(c,1073741823);return}c=c.return}3===a.tag&&(c=Hc(b,a),c=he(a,c,1073741823),na(a,c),ya(a,1073741823))}function fb(a,b){var c=zi(),d=void 0;if(0===(b.mode&1))d=
1073741823;else if(Ca&&!Lc)d=H;else{switch(c){case se:d=1073741823;break;case te:d=1073741822-10*(((1073741822-a+15)/10|0)+1);break;case Lg:d=1073741822-25*(((1073741822-a+500)/25|0)+1);break;case Ai:case Bi:d=1;break;default:n("313")}null!==Y&&d===H&&--d}c===te&&(0===oa||d<oa)&&(oa=d);return d}function yi(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);if(null!==Y&&H===c)Y=null;else if(b=a.earliestSuspendedTime,d=a.latestSuspendedTime,0!==b&&c<=b&&c>=d){a.didError=!1;b=a.latestPingedTime;if(0===b||
b>c)a.latestPingedTime=c;xc(c,a);c=a.expirationTime;0!==c&&Kc(a,c)}}function li(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=ka();b=fb(b,a);a=Sg(a,b);null!==a&&(Bb(a,b),b=a.expirationTime,0!==b&&Kc(a,b))}function Sg(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<
b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return e}function ya(a,b){a=Sg(a,b);null!==a&&(!Ca&&0!==H&&b>H&&Jg(),Bb(a,b),Ca&&!Lc&&Y===a||Kc(a,a.expirationTime),Tb>Ci&&(Tb=0,n("185")))}function Tg(a,b,c,d,e){return Mc(se,function(){return a(b,c,d,e)})}function Ub(){aa=1073741822-((ue()-ve)/10|0)}function Ug(a,b){if(0!==Oc){if(b<Oc)return;null!==Pc&&Vg(Pc)}Oc=b;a=ue()-ve;Pc=Wg(Di,{timeout:10*(1073741822-b)-a})}function re(a,b,c,d,e){a.expirationTime=d;
0!==e||Nc()?0<e&&(a.timeoutHandle=Ei(Fi.bind(null,a,b,c),e)):(a.pendingCommitExpirationTime=c,a.finishedWork=b)}function Fi(a,b,c){a.pendingCommitExpirationTime=c;a.finishedWork=b;Ub();jb=aa;Xg(a,c)}function wi(a,b){a.expirationTime=b;a.finishedWork=null}function ka(){if(w)return jb;Qc();if(0===C||1===C)Ub(),jb=aa;return jb}function Kc(a,b){null===a.nextScheduledRoot?(a.expirationTime=b,null===I?(ba=I=a,a.nextScheduledRoot=a):(I=I.nextScheduledRoot=a,I.nextScheduledRoot=ba)):b>a.expirationTime&&(a.expirationTime=
b);w||(z?Rc&&(ca=a,C=1073741823,Sc(a,1073741823,!1)):1073741823===b?Z(1073741823,!1):Ug(a,b))}function Qc(){var a=0,b=null;if(null!==I)for(var c=I,d=ba;null!==d;){var e=d.expirationTime;if(0===e){null===c||null===I?n("244"):void 0;if(d===d.nextScheduledRoot){ba=I=d.nextScheduledRoot=null;break}else if(d===ba)ba=e=d.nextScheduledRoot,I.nextScheduledRoot=e,d.nextScheduledRoot=null;else if(d===I){I=c;I.nextScheduledRoot=ba;d.nextScheduledRoot=null;break}else c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=
null;d=c.nextScheduledRoot}else{e>a&&(a=e,b=d);if(d===I)break;if(1073741823===a)break;c=d;d=d.nextScheduledRoot}}ca=b;C=a}function Nc(){return Tc?!0:Gi()?Tc=!0:!1}function Di(){try{if(!Nc()&&null!==ba){Ub();var a=ba;do{var b=a.expirationTime;0!==b&&aa<=b&&(a.nextExpirationTimeToWorkOn=aa);a=a.nextScheduledRoot}while(a!==ba)}Z(0,!0)}finally{Tc=!1}}function Z(a,b){Qc();if(b)for(Ub(),jb=aa;null!==ca&&0!==C&&a<=C&&!(Tc&&aa>C);)Sc(ca,C,aa>C),Qc(),Ub(),jb=aa;else for(;null!==ca&&0!==C&&a<=C;)Sc(ca,C,!1),
Qc();b&&(Oc=0,Pc=null);0!==C&&Ug(ca,C);Tb=0;we=null;if(null!==kb)for(a=kb,kb=null,b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(d){lb||(lb=!0,Uc=d)}}if(lb)throw (a=Uc, Uc=null, lb=!1, a);}function Xg(a,b){w?n("253"):void 0;ca=a;C=b;Sc(a,b,!1);Z(1073741823,!1)}function Sc(a,b,c){w?n("245"):void 0;w=!0;if(c){var d=a.finishedWork;null!==d?Vc(a,d,b):(a.finishedWork=null,d=a.timeoutHandle,-1!==d&&(a.timeoutHandle=-1,Yg(d)),Rg(a,c),d=a.finishedWork,null!==d&&(Nc()?a.finishedWork=d:Vc(a,d,b)))}else d=
a.finishedWork,null!==d?Vc(a,d,b):(a.finishedWork=null,d=a.timeoutHandle,-1!==d&&(a.timeoutHandle=-1,Yg(d)),Rg(a,c),d=a.finishedWork,null!==d&&Vc(a,d,b));w=!1}function Vc(a,b,c){var d=a.firstBatch;if(null!==d&&d._expirationTime>=c&&(null===kb?kb=[d]:kb.push(d),d._defer)){a.finishedWork=b;a.expirationTime=0;return}a.finishedWork=null;a===we?Tb++:(we=a,Tb=0);Mc(se,function(){ui(a,b)})}function ie(a){null===ca?n("246"):void 0;ca.expirationTime=0;lb||(lb=!0,Uc=a)}function Zg(a,b){var c=z;z=!0;try{return a(b)}finally{(z=
c)||w||Z(1073741823,!1)}}function $g(a,b){if(z&&!Rc){Rc=!0;try{return a(b)}finally{Rc=!1}}return a(b)}function ah(a,b,c){z||w||0===oa||(Z(oa,!1),oa=0);var d=z;z=!0;try{return Mc(te,function(){return a(b,c)})}finally{(z=d)||w||Z(1073741823,!1)}}function bh(a,b,c,d,e){var f=b.current;a:if(c){c=c._reactInternalFiber;b:{2===wb(c)&&1===c.tag?void 0:n("170");var g=c;do{switch(g.tag){case 3:g=g.stateNode.context;break b;case 1:if(E(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}}g=
g.return}while(null!==g);n("171");g=void 0}if(1===c.tag){var h=c.type;if(E(h)){c=Rf(c,h,g);break a}}c=g}else c=va;null===b.context?b.context=c:b.pendingContext=c;b=e;e=Aa(d);e.payload={element:a};b=void 0===b?null:b;null!==b&&(e.callback=b);eb();na(f,e);ya(f,d);return d}function xe(a,b,c,d){var e=b.current,f=ka();e=fb(f,e);return bh(a,b,c,e,d)}function ye(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Hi(a,b,c){var d=
3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Va,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Vb(a){var b=1073741822-25*(((1073741822-ka()+500)/25|0)+1);b>=ze&&(b=ze-1);this._expirationTime=ze=b;this._root=a;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}function mb(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}function nb(a,b,c){b=S(3,null,null,
b?3:0);a={current:b,containerInfo:a,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:c,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null};this._internalRoot=b.stateNode=a}function ob(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||
" react-mount-point-unstable "!==a.nodeValue))}function Ii(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new nb(a,!1,b)}function Wc(a,b,c,d,e){var f=c._reactRootContainer;if(f){if("function"===typeof e){var g=e;e=function(){var a=ye(f._internalRoot);g.call(a)}}null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)}else{f=c._reactRootContainer=Ii(c,d);if("function"===
typeof e){var h=e;e=function(){var a=ye(f._internalRoot);h.call(a)}}$g(function(){null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)})}return ye(f._internalRoot)}function ch(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;ob(b)?void 0:n("200");return Hi(a,b,null,c)}da?void 0:n("227");var sh=function(a,b,c,d,e,f,g,h,l){var k=Array.prototype.slice.call(arguments,3);try{b.apply(c,k)}catch(m){this.onError(m)}},qb=!1,$b=null,ac=!1,Yc=null,th={onError:function(a){qb=
!0;$b=a}},bc=null,Na={},cc=[],Zc={},Oa={},$c={},bd=null,Ue=null,He=null,rb=null,vh=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)Ge(a,b[d],c[d]);else b&&Ge(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},Ae={injectEventPluginOrder:function(a){bc?n("101"):void 0;bc=Array.prototype.slice.call(a);Ee()},injectEventPluginsByName:function(a){var b=!1,c;
for(c in a)if(a.hasOwnProperty(c)){var d=a[c];Na.hasOwnProperty(c)&&Na[c]===d||(Na[c]?n("102",c):void 0,Na[c]=d,b=!0)}b&&Ee()}},dh=Math.random().toString(36).slice(2),ea="__reactInternalInstance$"+dh,ec="__reactEventHandlers$"+dh,ra=!("undefined"===typeof window||!window.document||!window.document.createElement),Ra={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},
fd={},Le={};ra&&(Le=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);var eh=gc("animationend"),fh=gc("animationiteration"),gh=gc("animationstart"),hh=gc("transitionend"),zb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),
qa=null,gd=null,hc=null,B=da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign;B(J.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){this.isPersistent=
ic},isPersistent:jc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=jc;this._dispatchInstances=this._dispatchListeners=null}});J.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};J.extend=function(a){function b(){return c.apply(this,
arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;B(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=B({},c.Interface,a);b.extend=c.extend;Ne(b);return b};Ne(J);var Ji=J.extend({data:null}),Ki=J.extend({data:null}),Ah=[9,13,27,32],hd=ra&&"CompositionEvent"in window,Wb=null;ra&&"documentMode"in document&&(Wb=document.documentMode);var Li=ra&&"TextEvent"in window&&!Wb,Se=ra&&(!hd||Wb&&8<Wb&&11>=Wb),Re=String.fromCharCode(32),pa={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",
captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",
captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Qe=!1,Sa=!1,Mi={eventTypes:pa,extractEvents:function(a,b,c,d){var e=void 0;var f=void 0;if(hd)b:{switch(a){case "compositionstart":e=pa.compositionStart;break b;case "compositionend":e=pa.compositionEnd;break b;case "compositionupdate":e=pa.compositionUpdate;break b}e=void 0}else Sa?Oe(a,c)&&(e=pa.compositionEnd):"keydown"===a&&229===c.keyCode&&(e=pa.compositionStart);e?(Se&&
"ko"!==c.locale&&(Sa||e!==pa.compositionStart?e===pa.compositionEnd&&Sa&&(f=Me()):(qa=d,gd="value"in qa?qa.value:qa.textContent,Sa=!0)),e=Ji.getPooled(e,b,c,d),f?e.data=f:(f=Pe(c),null!==f&&(e.data=f)),Qa(e),f=e):f=null;(a=Li?Bh(a,c):Ch(a,c))?(b=Ki.getPooled(pa.beforeInput,b,c,d),b.data=a,Qa(b)):b=null;return null===f?b:null===b?f:[f,b]}},id=null,Ta=null,Ua=null,Ye=function(a,b){return a(b)},yf=function(a,b,c){return a(b,c)},Ze=function(){},jd=!1,Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,
email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ma=da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ma.hasOwnProperty("ReactCurrentDispatcher")||(Ma.ReactCurrentDispatcher={current:null});var Fh=/^(.*)[\\\/]/,O="function"===typeof Symbol&&Symbol.for,Bc=O?Symbol.for("react.element"):60103,Va=O?Symbol.for("react.portal"):60106,ta=O?Symbol.for("react.fragment"):60107,md=O?Symbol.for("react.strict_mode"):60108,lc=O?Symbol.for("react.profiler"):60114,
ff=O?Symbol.for("react.provider"):60109,ef=O?Symbol.for("react.context"):60110,ld=O?Symbol.for("react.concurrent_mode"):60111,od=O?Symbol.for("react.forward_ref"):60112,nd=O?Symbol.for("react.suspense"):60113,pd=O?Symbol.for("react.memo"):60115,gf=O?Symbol.for("react.lazy"):60116,df="function"===typeof Symbol&&Symbol.iterator,Hh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
hf=Object.prototype.hasOwnProperty,kf={},jf={},A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){A[a]=new K(a,0,!1,a,null)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];A[b]=new K(b,1,!1,a[1],null)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){A[a]=new K(a,2,!1,
a.toLowerCase(),null)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){A[a]=new K(a,2,!1,a,null)});"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){A[a]=new K(a,3,!1,a.toLowerCase(),null)});["checked","multiple","muted","selected"].forEach(function(a){A[a]=new K(a,3,!0,a,null)});["capture",
"download"].forEach(function(a){A[a]=new K(a,4,!1,a,null)});["cols","rows","size","span"].forEach(function(a){A[a]=new K(a,6,!1,a,null)});["rowSpan","start"].forEach(function(a){A[a]=new K(a,5,!1,a.toLowerCase(),null)});var Be=/[\-:]([a-z])/g,Ce=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(Be,Ce);A[b]=new K(b,1,!1,a,null)});"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(Be,Ce);A[b]=new K(b,1,!1,a,"http://www.w3.org/1999/xlink")});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(Be,Ce);A[b]=new K(b,1,!1,a,"http://www.w3.org/XML/1998/namespace")});["tabIndex","crossOrigin"].forEach(function(a){A[a]=new K(a,1,!1,a.toLowerCase(),null)});var pf={change:{phasedRegistrationNames:{bubbled:"onChange",
captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},tb=null,ub=null,De=!1;ra&&(De=af("input")&&(!document.documentMode||9<document.documentMode));var Ni={eventTypes:pf,_isInputEventSupported:De,extractEvents:function(a,b,c,d){var e=b?Da(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();"select"===h||"input"===h&&"file"===e.type?f=Lh:$e(e)?De?f=Ph:(f=Nh,g=Mh):(h=e.nodeName)&&"input"===h.toLowerCase()&&("checkbox"===e.type||
"radio"===e.type)&&(f=Oh);if(f&&(f=f(a,b)))return of(f,c,d);g&&g(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&ud(e,"number",e.value)}},Xb=J.extend({view:null,detail:null}),Rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},ih=0,jh=0,kh=!1,lh=!1,Yb=Xb.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:vd,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||
(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=ih;ih=a.screenX;return kh?"mousemove"===a.type?a.screenX-b:0:(kh=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=jh;jh=a.screenY;return lh?"mousemove"===a.type?a.screenY-b:0:(lh=!0,0)}}),mh=Yb.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Zb={mouseEnter:{registrationName:"onMouseEnter",
dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Oi={eventTypes:Zb,extractEvents:function(a,b,c,d){var e="mouseover"===a||"pointerover"===a,f="mouseout"===a||"pointerout"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;e=d.window===
d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window;f?(f=b,b=(b=c.relatedTarget||c.toElement)?dc(b):null):f=null;if(f===b)return null;var g=void 0,h=void 0,l=void 0,k=void 0;if("mouseout"===a||"mouseover"===a)g=Yb,h=Zb.mouseLeave,l=Zb.mouseEnter,k="mouse";else if("pointerout"===a||"pointerover"===a)g=mh,h=Zb.pointerLeave,l=Zb.pointerEnter,k="pointer";var m=null==f?e:Da(f);e=null==b?e:Da(b);a=g.getPooled(h,f,c,d);a.type=k+"leave";a.target=m;a.relatedTarget=e;c=g.getPooled(l,b,c,d);c.type=
k+"enter";c.target=e;c.relatedTarget=m;d=b;if(f&&d)a:{b=f;e=d;k=0;for(g=b;g;g=fa(g))k++;g=0;for(l=e;l;l=fa(l))g++;for(;0<k-g;)b=fa(b),k--;for(;0<g-k;)e=fa(e),g--;for(;k--;){if(b===e||b===e.alternate)break a;b=fa(b);e=fa(e)}b=null}else b=null;e=b;for(b=[];f&&f!==e;){k=f.alternate;if(null!==k&&k===e)break;b.push(f);f=fa(f)}for(f=[];d&&d!==e;){k=d.alternate;if(null!==k&&k===e)break;f.push(d);d=fa(d)}for(d=0;d<b.length;d++)ed(b[d],"bubbled",a);for(d=f.length;0<d--;)ed(f[d],"captured",c);return[a,c]}},
Sh=Object.prototype.hasOwnProperty,Pi=J.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qi=J.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ri=Xb.extend({relatedTarget:null}),Si={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ti={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",
16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui=Xb.extend({key:function(a){if(a.key){var b=Si[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=nc(a),13===a?"Enter":
String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?Ti[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:vd,charCode:function(a){return"keypress"===a.type?nc(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?nc(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),Vi=Yb.extend({dataTransfer:null}),Wi=Xb.extend({touches:null,targetTouches:null,
changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:vd}),Xi=J.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Yi=Yb.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),Zi=[["abort","abort"],[eh,"animationEnd"],[fh,"animationIteration"],[gh,"animationStart"],["canplay",
"canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],
["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[hh,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],vf={},wd={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu",
"contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset",
"reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(a){uf(a,!0)});Zi.forEach(function(a){uf(a,!1)});var nh={eventTypes:vf,isInteractiveTopLevelEventType:function(a){a=wd[a];return void 0!==a&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=wd[a];if(!e)return null;switch(a){case "keypress":if(0===nc(c))return null;case "keydown":case "keyup":a=Ui;break;case "blur":case "focus":a=
Ri;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=Yb;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=Vi;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=Wi;break;case eh:case fh:case gh:a=Pi;break;case hh:a=Xi;break;case "scroll":a=Xb;break;case "wheel":a=
Yi;break;case "copy":case "cut":case "paste":a=Qi;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=mh;break;default:a=J}b=a.getPooled(e,b,c,d);Qa(b);return b}},wf=nh.isInteractiveTopLevelEventType,rc=[],qc=!0,Af={},Vh=0,sc="_reactListenersID"+(""+Math.random()).slice(2),$i=ra&&"documentMode"in document&&11>=document.documentMode,Hf={select:{phasedRegistrationNames:{bubbled:"onSelect",
captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Wa=null,Ad=null,xb=null,zd=!1,aj={eventTypes:Hf,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=zf(e);f=$c.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;e=b?Da(b):window;switch(a){case "focus":if($e(e)||"true"===e.contentEditable)Wa=
e,Ad=b,xb=null;break;case "blur":xb=Ad=Wa=null;break;case "mousedown":zd=!0;break;case "contextmenu":case "mouseup":case "dragend":return zd=!1,Gf(c,d);case "selectionchange":if($i)break;case "keydown":case "keyup":return Gf(c,d)}return null}};Ae.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){bd=a;Ue=b;He=c})(dd,Je,Da);Ae.injectEventPluginsByName({SimpleEventPlugin:nh,EnterLeaveEventPlugin:Oi,
ChangeEventPlugin:Ni,SelectEventPlugin:aj,BeforeInputEventPlugin:Mi});var Xc=void 0,Of=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{Xc=Xc||document.createElement("div");Xc.innerHTML="<svg>"+b+"</svg>";for(b=Xc.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),
Ab=function(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},yb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,
lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bj=["Webkit","ms","Moz","O"];Object.keys(yb).forEach(function(a){bj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);yb[b]=yb[a]})});var Zh=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,
source:!0,track:!0,wbr:!0}),R=da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Vg=R.unstable_cancelCallback,ue=R.unstable_now,Wg=R.unstable_scheduleCallback,Gi=R.unstable_shouldYield,Mc=R.unstable_runWithPriority,zi=R.unstable_getCurrentPriorityLevel,se=R.unstable_ImmediatePriority,te=R.unstable_UserBlockingPriority,Lg=R.unstable_NormalPriority,Ai=R.unstable_LowPriority,Bi=R.unstable_IdlePriority,ne=null,oe=null,Ei="function"===typeof setTimeout?setTimeout:void 0,Yg="function"===typeof clearTimeout?
clearTimeout:void 0,vi=Wg,ti=Vg;new Set;var Id=[],Ya=-1,va={},F={current:va},M={current:!1},Fa=va,Kd=null,Ld=null,S=function(a,b,c,d){return new bi(a,b,c,d)},$f=(new da.Component).refs,zc={isMounted:function(a){return(a=a._reactInternalFiber)?2===wb(a):!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka();d=fb(d,a);var e=Aa(d);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);eb();na(a,e);ya(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka();d=fb(d,a);var e=
Aa(d);e.tag=yg;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);eb();na(a,e);ya(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka();c=fb(c,a);var d=Aa(c);d.tag=Ec;void 0!==b&&null!==b&&(d.callback=b);eb();na(a,d);ya(a,c)}},Cc=Array.isArray,hb=ag(!0),ae=ag(!1),Eb={},U={current:Eb},Gb={current:Eb},Fb={current:Eb},db=0,pi=2,Rb=4,ji=8,ri=16,Sb=32,me=64,le=128,Dc=Ma.ReactCurrentDispatcher,Hb=0,xa=null,y=null,W=null,bb=null,G=null,ab=null,Kb=0,X=null,Lb=0,Ib=!1,ia=null,Jb=0,Ud={readContext:T,
useCallback:V,useContext:V,useEffect:V,useImperativeHandle:V,useLayoutEffect:V,useMemo:V,useReducer:V,useRef:V,useState:V,useDebugValue:V},fi={readContext:T,useCallback:function(a,b){cb().memoizedState=[a,void 0===b?null:b];return a},useContext:T,useEffect:function(a,b){return Xd(516,le|me,a,b)},useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Xd(4,Rb|Sb,fg.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Xd(4,Rb|Sb,a,b)},useMemo:function(a,b){var c=cb();
b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=cb();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={last:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=hg.bind(null,xa,a);return[d.memoizedState,a]},useRef:function(a){var b=cb();a={current:a};return b.memoizedState=a},useState:function(a){var b=cb();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={last:null,dispatch:null,lastRenderedReducer:dg,
lastRenderedState:a};a=a.dispatch=hg.bind(null,xa,a);return[b.memoizedState,a]},useDebugValue:gg},cg={readContext:T,useCallback:function(a,b){var c=Mb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Sd(b,d[1]))return d[0];c.memoizedState=[a,b];return a},useContext:T,useEffect:function(a,b){return Yd(516,le|me,a,b)},useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Yd(4,Rb|Sb,fg.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Yd(4,Rb|Sb,
a,b)},useMemo:function(a,b){var c=Mb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Sd(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a},useReducer:eg,useRef:function(a){return Mb().memoizedState},useState:function(a){return eg(dg,a)},useDebugValue:gg},la=null,gb=null,Ia=!1,gi=Ma.ReactCurrentOwner,ja=!1,de={current:null},Nb=null,Ja=null,Ob=null,ug=0,yg=1,Ec=2,ge=3,za=!1,Og=void 0,pe=void 0,Ng=void 0,Pg=void 0;Og=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||
6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};pe=function(a){};Ng=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ha(U.current);a=null;switch(c){case "input":f=sd(g,f);d=sd(g,d);a=[];break;case "option":f=Bd(g,f);d=Bd(g,d);a=[];break;case "select":f=B({},f,{value:void 0});d=B({},d,{value:void 0});
a=[];break;case "textarea":f=Cd(g,f);d=Cd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=tc)}Ed(c,d);g=c=void 0;var h=null;for(c in f)if(!d.hasOwnProperty(c)&&f.hasOwnProperty(c)&&null!=f[c])if("style"===c){var l=f[c];for(g in l)l.hasOwnProperty(g)&&(h||(h={}),h[g]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Oa.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,
null));for(c in d){var k=d[c];l=null!=f?f[c]:void 0;if(d.hasOwnProperty(c)&&k!==l&&(null!=k||null!=l))if("style"===c)if(l){for(g in l)!l.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(h||(h={}),h[g]="");for(g in k)k.hasOwnProperty(g)&&l[g]!==k[g]&&(h||(h={}),h[g]=k[g])}else h||(a||(a=[]),a.push(c,h)),h=k;else"dangerouslySetInnerHTML"===c?(k=k?k.__html:void 0,l=l?l.__html:void 0,null!=k&&l!==k&&(a=a||[]).push(c,""+k)):"children"===c?l===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(c,""+
k):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Oa.hasOwnProperty(c)?(null!=k&&ha(e,c),a||l===k||(a=[])):(a=a||[]).push(c,k))}h&&(a=a||[]).push("style",h);e=a;(b.updateQueue=e)&&Pb(b)}};Pg=function(a,b,c,d){c!==d&&Pb(b)};var ki="function"===typeof WeakSet?WeakSet:Set,xi="function"===typeof WeakMap?WeakMap:Map,qe=Ma.ReactCurrentDispatcher,Kg=Ma.ReactCurrentOwner,ze=1073741822,Ca=!1,x=null,Y=null,H=0,La=-1,je=!1,p=null,Lc=!1,ke=null,Jc=null,Ic=null,Ba=null,ba=null,I=null,Oc=
0,Pc=void 0,w=!1,ca=null,C=0,oa=0,lb=!1,Uc=null,z=!1,Rc=!1,kb=null,ve=ue(),aa=1073741822-(ve/10|0),jb=aa,Ci=50,Tb=0,we=null,Tc=!1;id=function(a,b,c){switch(b){case "input":td(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=dd(d);e?void 0:n("90");cf(d);td(d,e)}}}break;case "textarea":Jf(a,c);break;case "select":b=c.value,null!=
b&&Xa(a,!!c.multiple,b,!1)}};Vb.prototype.render=function(a){this._defer?void 0:n("250");this._hasChildren=!0;this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new mb;bh(a,b,null,c,d._onCommit);return d};Vb.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};Vb.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;this._defer&&null!==b?void 0:n("251");if(this._hasChildren){var c=this._expirationTime;
if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;null===d?n("251"):void 0;d._next=e._next;this._next=b;a.firstBatch=this}this._defer=!1;Xg(a,c);b=this._next;this._next=null;b=a.firstBatch=b;null!==b&&b._hasChildren&&b.render(b._children)}else this._next=null,this._defer=!1};Vb.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}};
mb.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};mb.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];"function"!==typeof c?n("191",c):void 0;c()}}};nb.prototype.render=function(a,b){var c=this._internalRoot,d=new mb;b=void 0===b?null:b;null!==b&&d.then(b);xe(a,c,null,d._onCommit);return d};nb.prototype.unmount=function(a){var b=
this._internalRoot,c=new mb;a=void 0===a?null:a;null!==a&&c.then(a);xe(null,b,null,c._onCommit);return c};nb.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new mb;c=void 0===c?null:c;null!==c&&e.then(c);xe(b,d,a,e._onCommit);return e};nb.prototype.createBatch=function(){var a=new Vb(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime>=b;)c=d,d=d._next;a._next=d;null!==
c&&(c._next=a)}return a};(function(a,b,c){Ye=a;yf=b;Ze=c})(Zg,ah,function(){w||0===oa||(Z(oa,!1),oa=0)});var oh={createPortal:ch,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;void 0===b&&("function"===typeof a.render?n("188"):n("268",Object.keys(a)));a=tf(b);a=null===a?null:a.stateNode;return a},hydrate:function(a,b,c){ob(b)?void 0:n("200");return Wc(null,a,b,!0,c)},render:function(a,b,c){ob(b)?void 0:n("200");return Wc(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,
b,c,d){ob(c)?void 0:n("200");null==a||void 0===a._reactInternalFiber?n("38"):void 0;return Wc(a,b,c,!1,d)},unmountComponentAtNode:function(a){ob(a)?void 0:n("40");return a._reactRootContainer?($g(function(){Wc(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return ch.apply(void 0,arguments)},unstable_batchedUpdates:Zg,unstable_interactiveUpdates:ah,flushSync:function(a,b){w?n("187"):void 0;var c=z;z=!0;try{return Tg(a,b)}finally{z=c,Z(1073741823,!1)}},
unstable_createRoot:function(a,b){ob(a)?void 0:n("299","unstable_createRoot");return new nb(a,!0,null!=b&&!0===b.hydrate)},unstable_flushControlled:function(a){var b=z;z=!0;try{Tg(a)}finally{(z=b)||w||Z(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Je,Da,dd,Ae.injectEventPluginsByName,Zc,Qa,function(a){ad(a,xh)},Ve,We,oc,cd]}};(function(a){var b=a.findFiberByHostInstance;return ai(B({},a,{overrideProps:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=
tf(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))})({findFiberByHostInstance:dc,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var ph={default:oh},qh=ph&&oh||ph;return qh.default||qh});
}());SM.currentModule = null;}, '', {"requires":["sm","react"],"node_modules":true});
YUI.add('react-input-mask', function (Y) {SM.currentModule = 'react-input-mask';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],n):e.ReactInputMask=n(e.React,e.ReactDOM)}(this,function(l,f){"use strict";function u(){return(u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function t(e,n){e.prototype=Object.create(n.prototype),function s(e,n){for(var t=Object.getOwnPropertyNames(n),o=0;o<t.length;o++){var a=t[o],r=Object.getOwnPropertyDescriptor(n,a);r&&r.configurable&&e[a]===undefined&&Object.defineProperty(e,a,r)}return e}(e.prototype.constructor=e,n)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}l=l&&l.hasOwnProperty("default")?l["default"]:l;var p=function(e,n,t,o,a,r,s,i){if(!e){var l;if(n===undefined)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[t,o,a,r,s,i],c=0;(l=new Error(n.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw (l.framesToPop=1, l)}};function d(e,n,t){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=n,e.selectionEnd=t;else{var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",t-n),o.select()}}var c={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},m="_";function k(e,n,t){var o="",a="",r=null,s=[];if(n===undefined&&(n=m),null==t&&(t=c),!e||"string"!=typeof e)return{maskChar:n,formatChars:t,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var i=!1;return e.split("").forEach(function(e){i=!i&&"\\"===e||(i||!t[e]?(s.push(o.length),o.length===s.length-1&&(a+=e)):r=o.length+1,o+=e,!1)}),{maskChar:n,formatChars:t,prefix:a,mask:o,lastEditablePosition:r,permanents:s}}function v(e,n){return-1!==e.permanents.indexOf(n)}function g(e,n,t){var o=e.mask,a=e.formatChars;if(!t)return!1;if(v(e,n))return o[n]===t;var r=a[o[n]];return new RegExp(r).test(t)}function w(t,e){return e.split("").every(function(e,n){return v(t,n)||!g(t,n,e)})}function C(e,n){var t=e.maskChar,o=e.prefix;if(!t){for(;n.length>o.length&&v(e,n.length-1);)n=n.slice(0,n.length-1);return n.length}for(var a=o.length,r=n.length;r>=o.length;r--){var s=n[r];if(!v(e,r)&&g(e,r,s)){a=r+1;break}}return a}function S(e,n){return C(e,n)===e.mask.length}function O(e,n){var t=e.maskChar,o=e.mask,a=e.prefix;if(!t){for((n=M(e,"",n,0)).length<a.length&&(n=a);n.length<o.length&&v(e,n.length);)n+=o[n.length];return n}if(n)return M(e,O(e,""),n,0);for(var r=0;r<o.length;r++)v(e,r)?n+=o[r]:n+=t;return n}function M(r,s,e,i){var l=r.mask,u=r.maskChar,c=r.prefix,n=e.split(""),f=S(r,s);return!u&&i>s.length&&(s+=l.slice(s.length,i)),n.every(function(e){for(;a=e,v(r,o=i)&&a!==l[o];){if(i>=s.length&&(s+=l[i]),n=e,t=i,u&&v(r,t)&&n===u)return!0;if(++i>=l.length)return!1}var n,t,o,a;return!g(r,i,e)&&e!==u||(i<s.length?s=u||f||i<c.length?s.slice(0,i)+e+s.slice(i+1):(s=s.slice(0,i)+e+s.slice(i),O(r,s)):u||(s+=e),++i<l.length)}),s}function I(e,n){for(var t=e.mask,o=n;o<t.length;++o)if(!v(e,o))return o;return null}function D(e){return e||0===e?e+"":""}function b(e,n,t,o,a){var r=e.mask,s=e.prefix,i=e.lastEditablePosition,l=n,u="",c=0,f=0,p=Math.min(a.start,t.start);if(t.end>a.start?f=(c=function h(o,e,n,a){var r=o.mask,s=o.maskChar,t=n.split(""),i=a;return t.every(function(e){for(;t=e,v(o,n=a)&&t!==r[n];)if(++a>=r.length)return!1;var n,t;return(g(o,a,e)||e===s)&&a++,a<r.length}),a-i}(e,0,u=l.slice(a.start,t.end),p))?a.length:0:l.length<o.length&&(f=o.length-l.length),l=o,f){if(1===f&&!a.length)p=a.start===t.start?I(e,t.start):function d(e,n){for(var t=n;0<=t;--t)if(!v(e,t))return t;return null}(e,t.start);l=function m(t,e,o,n){var a=o+n,r=t.maskChar,s=t.mask,i=t.prefix,l=e.split("");if(r)return l.map(function(e,n){return n<o||a<=n?e:v(t,n)?s[n]:r}).join("");for(var u=a;u<l.length;u++)v(t,u)&&(l[u]="");return o=Math.max(i.length,o),l.splice(o,a-o),e=l.join(""),O(t,e)}(e,l,p,f)}return l=M(e,l,u,p),(p+=c)>=r.length?p=r.length:p<s.length&&!c?p=s.length:p>=s.length&&p<i&&c&&(p=I(e,p)),u||(u=null),{value:l=O(e,l),enteredString:u,selection:{start:p,end:p}}}function y(e){return"function"==typeof e}function o(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function V(e){return(!!o()?function n(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}():function(){return setTimeout(e,1e3/60)})(e)}function E(e){(o()||clearTimeout)(e)}return function(c){function e(e){var p=c.call(this,e)||this;p.focused=!1,p.mounted=!1,p.previousSelection=null,p.selectionDeferId=null,p.saveSelectionLoopDeferId=null,p.saveSelectionLoop=function(){p.previousSelection=p.getSelection(),p.saveSelectionLoopDeferId=V(p.saveSelectionLoop)},p.runSaveSelectionLoop=function(){null===p.saveSelectionLoopDeferId&&p.saveSelectionLoop()},p.stopSaveSelectionLoop=function(){null!==p.saveSelectionLoopDeferId&&(E(p.saveSelectionLoopDeferId),p.saveSelectionLoopDeferId=null,p.previousSelection=null)},p.getInputDOMNode=function(){if(!p.mounted)return null;var e=f.findDOMNode(h(h(p))),n="undefined"!=typeof window&&e instanceof window.Element;if(e&&!n)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e},p.getInputValue=function(){var e=p.getInputDOMNode();return e?e.value:null},p.setInputValue=function(e){var n=p.getInputDOMNode();n&&(p.value=e,n.value=e)},p.setCursorToEnd=function(){var e=C(p.maskOptions,p.value),n=I(p.maskOptions,e);null!==n&&p.setCursorPosition(n)},p.setSelection=function(e,n,t){void 0===t&&(t={});var o=p.getInputDOMNode(),a=p.isFocused();o&&a&&(t.deferred||d(o,e,n),null!==p.selectionDeferId&&E(p.selectionDeferId),p.selectionDeferId=V(function(){p.selectionDeferId=null,d(o,e,n)}),p.previousSelection={start:e,end:n,length:Math.abs(n-e)})},p.getSelection=function(){return function a(e){var n=0,t=0;if("selectionStart"in e&&"selectionEnd"in e)n=e.selectionStart,t=e.selectionEnd;else{var o=document.selection.createRange();o.parentElement()===e&&(n=-o.moveStart("character",-e.value.length),t=-o.moveEnd("character",-e.value.length))}return{start:n,end:t,length:t-n}}(p.getInputDOMNode())},p.getCursorPosition=function(){return p.getSelection().start},p.setCursorPosition=function(e){p.setSelection(e,e)},p.isFocused=function(){return p.focused},p.getBeforeMaskedValueChangeConfig=function(){var e=p.maskOptions,n=e.mask,t=e.maskChar,o=e.permanents,a=e.formatChars;return{mask:n,maskChar:t,permanents:o,alwaysShowMask:!!p.props.alwaysShowMask,formatChars:a}},p.isInputAutofilled=function(e,n,t,o){var a=p.getInputDOMNode();try{if(a.matches(":-webkit-autofill"))return!0}catch(r){}return!p.focused||o.end<t.length&&n.end===e.length},p.onChange=function(e){var n=h(h(p)).beforePasteState,t=h(h(p)).previousSelection,o=p.props.beforeMaskedValueChange,a=p.getInputValue(),r=p.value,s=p.getSelection();p.isInputAutofilled(a,s,r,t)&&(r=O(p.maskOptions,""),t={start:0,end:0,length:0}),n&&(t=n.selection,r=n.value,s={start:t.start+a.length,end:t.start+a.length,length:0},a=r.slice(0,t.start)+a+r.slice(t.end),p.beforePasteState=null);var i=b(p.maskOptions,a,s,r,t),l=i.enteredString,u=i.selection,c=i.value;if(y(o)){var f=o({value:c,selection:u},{value:r,selection:t},l,p.getBeforeMaskedValueChangeConfig());c=f.value,u=f.selection}p.setInputValue(c),y(p.props.onChange)&&p.props.onChange(e),p.isWindowsPhoneBrowser?p.setSelection(u.start,u.end,{deferred:!0}):p.setSelection(u.start,u.end)},p.onFocus=function(e){var n=p.props.beforeMaskedValueChange,t=p.maskOptions,o=t.mask,a=t.prefix;if(p.focused=!0,p.mounted=!0,o){if(p.value)C(p.maskOptions,p.value)<p.maskOptions.mask.length&&p.setCursorToEnd();else{var r=O(p.maskOptions,a),s=O(p.maskOptions,r),i=C(p.maskOptions,s),l=I(p.maskOptions,i),u={start:l,end:l};if(y(n)){var c=n({value:s,selection:u},{value:p.value,selection:null},null,p.getBeforeMaskedValueChangeConfig());s=c.value,u=c.selection}var f=s!==p.getInputValue();f&&p.setInputValue(s),f&&y(p.props.onChange)&&p.props.onChange(e),p.setSelection(u.start,u.end)}p.runSaveSelectionLoop()}y(p.props.onFocus)&&p.props.onFocus(e)},p.onBlur=function(e){var n=p.props.beforeMaskedValueChange,t=p.maskOptions.mask;if(p.stopSaveSelectionLoop(),p.focused=!1,t&&!p.props.alwaysShowMask&&w(p.maskOptions,p.value)){var o="";if(y(n))o=n({value:o,selection:null},{value:p.value,selection:p.previousSelection},null,p.getBeforeMaskedValueChangeConfig()).value;var a=o!==p.getInputValue();a&&p.setInputValue(o),a&&y(p.props.onChange)&&p.props.onChange(e)}y(p.props.onBlur)&&p.props.onBlur(e)},p.onMouseDown=function(e){if(!p.focused&&document.addEventListener){p.mouseDownX=e.clientX,p.mouseDownY=e.clientY,p.mouseDownTime=(new Date).getTime();var r=function r(e){if(document.removeEventListener("mouseup",r),p.focused){var n=Math.abs(e.clientX-p.mouseDownX),t=Math.abs(e.clientY-p.mouseDownY),o=Math.max(n,t),a=(new Date).getTime()-p.mouseDownTime;(o<=10&&a<=200||o<=5&&a<=300)&&p.setCursorToEnd()}};document.addEventListener("mouseup",r)}y(p.props.onMouseDown)&&p.props.onMouseDown(e)},p.onPaste=function(e){y(p.props.onPaste)&&p.props.onPaste(e),e.defaultPrevented||(p.beforePasteState={value:p.getInputValue(),selection:p.getSelection()},p.setInputValue(""))},p.handleRef=function(e){null==p.props.children&&y(p.props.inputRef)&&p.props.inputRef(e)};var n=e.mask,t=e.maskChar,o=e.formatChars,a=e.alwaysShowMask,r=e.beforeMaskedValueChange,s=e.defaultValue,i=e.value;p.maskOptions=k(n,t,o),null==s&&(s=""),null==i&&(i=s);var l=D(i);if(p.maskOptions.mask&&(a||l)&&(l=O(p.maskOptions,l),y(r))){var u=e.value;null==e.value&&(u=s),l=r({value:l,selection:null},{value:u=D(u),selection:null},null,p.getBeforeMaskedValueChangeConfig()).value}return p.value=l,p}t(e,c);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=function o(){var e=new RegExp("windows","i"),n=new RegExp("phone","i"),t=navigator.userAgent;return e.test(t)&&n.test(t)}(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},n.componentDidUpdate=function(){var e=this.previousSelection,n=this.props,t=n.beforeMaskedValueChange,o=n.alwaysShowMask,a=n.mask,r=n.maskChar,s=n.formatChars,i=this.maskOptions,l=o||this.isFocused(),u=null!=this.props.value,c=u?D(this.props.value):this.value,f=e?e.start:null;if(this.maskOptions=k(a,r,s),this.maskOptions.mask){!i.mask&&this.isFocused()&&this.runSaveSelectionLoop();var p=this.maskOptions.mask&&this.maskOptions.mask!==i.mask;if(i.mask||u||(c=this.getInputValue()),(p||this.maskOptions.mask&&(c||l))&&(c=O(this.maskOptions,c)),p){var h=C(this.maskOptions,c);(null===f||h<f)&&(f=S(this.maskOptions,c)?h:I(this.maskOptions,h))}!this.maskOptions.mask||!w(this.maskOptions,c)||l||u&&this.props.value||(c="");var d={start:f,end:f};if(y(t)){var m=t({value:c,selection:d},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());c=m.value,d=m.selection}this.value=c;var v=this.getInputValue()!==this.value;v?(this.setInputValue(this.value),this.forceUpdate()):p&&this.forceUpdate();var g=!1;null!=d.start&&null!=d.end&&(g=!e||e.start!==d.start||e.end!==d.end),(g||v)&&this.setSelection(d.start,d.end)}else i.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},n.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&E(this.selectionDeferId),this.stopSaveSelectionLoop()},n.render=function(){var n,e=this.props,t=(e.mask,e.alwaysShowMask,e.maskChar,e.formatChars,e.inputRef,e.beforeMaskedValueChange,e.children),o=function i(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],0<=n.indexOf(t)||(a[t]=e[t]);return a}(e,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(t){y(t)||p(!1);var a=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],r=u({},o);a.forEach(function(e){return delete r[e]}),n=t(r),a.filter(function(e){return null!=n.props[e]&&n.props[e]!==o[e]}).length&&p(!1)}else n=l.createElement("input",u({ref:this.handleRef},o));var s={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(o.disabled||o.readOnly||(s.onChange=this.onChange,s.onPaste=this.onPaste,s.onMouseDown=this.onMouseDown),null!=o.value&&(s.value=this.value)),n=l.cloneElement(n,s)},e}(l.Component)});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add('react-redux', function (Y) {SM.currentModule = 'react-redux';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactRedux={},e.React,e.ReactDOM)}(this,(function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t);function u(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}function a(){}function i(){}i.resetWarningCache=a;u((function(e){e.exports=function(){function e(e,t,r,n,o,u){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==u){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw (a.name="Invariant Violation", a)}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}()}));var c=o.default.createContext(null);var s=function(e){e()},f=function(){return s},p={notify:function(){}};var l=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=p,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return!!this.unsubscribe},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=f(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,o=r={callback:e,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){n&&null!==t&&(n=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=p)},e}(),d="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function y(){return(y=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;u.length>n;n++)0>t.indexOf(r=u[n])&&(o[r]=e[r]);return o}
/** @license React v16.13.1
	 * react-is.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */var m="function"==typeof Symbol&&Symbol.for,b=m?Symbol.for("react.element"):60103,h=m?Symbol.for("react.portal"):60106,S=m?Symbol.for("react.fragment"):60107,P=m?Symbol.for("react.strict_mode"):60108,g=m?Symbol.for("react.profiler"):60114,O=m?Symbol.for("react.provider"):60109,w=m?Symbol.for("react.context"):60110,C=m?Symbol.for("react.async_mode"):60111,x=m?Symbol.for("react.concurrent_mode"):60111,E=m?Symbol.for("react.forward_ref"):60112,T=m?Symbol.for("react.suspense"):60113,M=m?Symbol.for("react.suspense_list"):60120,R=m?Symbol.for("react.memo"):60115,$=m?Symbol.for("react.lazy"):60116,N=m?Symbol.for("react.block"):60121,j=m?Symbol.for("react.fundamental"):60117,q=m?Symbol.for("react.responder"):60118,D=m?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case b:switch(e=e.type){case C:case x:case S:case g:case P:case T:return e;default:switch(e=e&&e.$$typeof){case w:case E:case $:case R:case O:return e;default:return t}}case h:return t}}}function F(e){return _(e)===x}var k={AsyncMode:C,ConcurrentMode:x,ContextConsumer:w,ContextProvider:O,Element:b,ForwardRef:E,Fragment:S,Lazy:$,Memo:R,Portal:h,Profiler:g,StrictMode:P,Suspense:T,isAsyncMode:function(e){return F(e)||_(e)===C},isConcurrentMode:F,isContextConsumer:function(e){return _(e)===w},isContextProvider:function(e){return _(e)===O},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===b},isForwardRef:function(e){return _(e)===E},isFragment:function(e){return _(e)===S},isLazy:function(e){return _(e)===$},isMemo:function(e){return _(e)===R},isPortal:function(e){return _(e)===h},isProfiler:function(e){return _(e)===g},isStrictMode:function(e){return _(e)===P},isSuspense:function(e){return _(e)===T},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===S||e===x||e===g||e===P||e===T||e===M||"object"==typeof e&&null!==e&&(e.$$typeof===$||e.$$typeof===R||e.$$typeof===O||e.$$typeof===w||e.$$typeof===E||e.$$typeof===j||e.$$typeof===q||e.$$typeof===D||e.$$typeof===N)},typeOf:_},W=u((function(e){e.exports=k})),H={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},U={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},A={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},I={};function L(e){return W.isMemo(e)?A:I[e.$$typeof]||H}I[W.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},I[W.Memo]=A;var z=Object.defineProperty,K=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,B=Object.getOwnPropertyDescriptor,Y=Object.getPrototypeOf,G=Object.prototype;var J=function e(t,r,n){if("string"!=typeof r){if(G){var o=Y(r);o&&o!==G&&e(t,o,n)}var u=K(r);V&&(u=u.concat(V(r)));for(var a=L(t),i=L(r),c=0;u.length>c;++c){var s=u[c];if(!(U[s]||n&&n[s]||i&&i[s]||a&&a[s])){var f=B(r,s);try{z(t,s,f)}catch(e){}}}}return t},Q=[],X=[null,null];function Z(e,t){return[t.payload,e[1]+1]}function ee(e,t,r){d((function(){return e.apply(void 0,t)}),r)}function te(e,t,r,n,o,u,a){e.current=n,t.current=o,r.current=!1,u.current&&(u.current=null,a())}function re(e,t,r,n,o,u,a,i,c,s){if(e){var f=!1,p=null,l=function(){if(!f){var e,r,l=t.getState();try{e=n(l,o.current)}catch(e){r=e,p=e}r||(p=null),e===u.current?a.current||c():(u.current=e,i.current=e,a.current=!0,s({type:"STORE_UPDATED",payload:{error:r}}))}};r.onStateChange=l,r.trySubscribe(),l();return function(){if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}}var ne=function(){return[null,0]};function oe(e,r){void 0===r&&(r={});var n=r.getDisplayName,u=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,a=r.methodName,i=void 0===a?"connectAdvanced":a,s=r.renderCountProp,f=void 0===s?void 0:s,p=r.shouldHandleStateChanges,d=void 0===p||p,m=r.storeKey,b=void 0===m?"store":m,h=r.forwardRef,S=void 0!==h&&h,P=r.context,g=void 0===P?c:P,O=v(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),w=g;return function(r){var n=r.displayName||r.name||"Component",a=u(n),c=y({},O,{getDisplayName:u,methodName:i,renderCountProp:f,shouldHandleStateChanges:d,storeKey:b,displayName:a,wrappedComponentName:n,WrappedComponent:r}),s=O.pure;var p=s?t.useMemo:function(e){return e()};function m(n){var u=t.useMemo((function(){var e=n.reactReduxForwardedRef,t=v(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),a=u[0],i=u[1],s=u[2],f=t.useMemo((function(){return a&&a.Consumer&&W.isContextConsumer(o.default.createElement(a.Consumer,null))?a:w}),[a,w]),m=t.useContext(f),b=!!n.store&&!!n.store.getState&&!!n.store.dispatch,h=b?n.store:m.store,S=t.useMemo((function(){return function(t){return e(t.dispatch,c)}(h)}),[h]),P=t.useMemo((function(){if(!d)return X;var e=new l(h,b?null:m.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[h,b,m]),g=P[0],O=P[1],C=t.useMemo((function(){return b?m:y({},m,{subscription:g})}),[b,m,g]),x=t.useReducer(Z,Q,ne),E=x[0][0],T=x[1];if(E&&E.error)throw E.error;var M=t.useRef(),R=t.useRef(s),$=t.useRef(),N=t.useRef(!1),j=p((function(){return $.current&&s===R.current?$.current:S(h.getState(),s)}),[h,E,s]);ee(te,[R,M,N,s,j,$,O]),ee(re,[d,h,g,S,R,M,N,$,O,T],[h,g,S]);var q=t.useMemo((function(){return o.default.createElement(r,y({},j,{ref:i}))}),[i,r,j]);return t.useMemo((function(){return d?o.default.createElement(f.Provider,{value:C},q):q}),[f,q,C])}var h=s?o.default.memo(m):m;if(h.WrappedComponent=r,h.displayName=m.displayName=a,S){var P=o.default.forwardRef((function(e,t){return o.default.createElement(h,y({},e,{reactReduxForwardedRef:t}))}));return P.displayName=a,P.WrappedComponent=r,J(P,r)}return J(h,r)}}function ue(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function ae(e,t){if(ue(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(var n=0;r.length>n;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!ue(e[r[n]],t[r[n]]))return!1;return!0}function ie(e){return function(t,r){var n=e(t,r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function ce(e){return null!=e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function se(e,t){return function(t,r){var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=ce(e);var o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=ce(o),o=n(t,r)),o},n}}var fe=[function(e){return"function"==typeof e?se(e):void 0},function(e){return e?void 0:ie((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?ie((function(t){return function(e,t){var r={},n=function(n){var o=e[n];"function"==typeof o&&(r[n]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)n(o);return r}(e,t)})):void 0}];var pe=[function(e){return"function"==typeof e?se(e):void 0},function(e){return e?void 0:ie((function(){return{}}))}];function le(e,t,r){return y({},r,e,t)}var de=[function(e){return"function"==typeof e?function(e){return function(t,r){var n,o=r.pure,u=r.areMergedPropsEqual,a=!1;return function(t,r,i){var c=e(t,r,i);return a?o&&u(c,n)||(n=c):(a=!0,n=c),n}}}(e):void 0},function(e){return e?void 0:function(){return le}}];function ye(e,t,r,n){return function(o,u){return r(e(o,u),t(n,u),u)}}function ve(e,t,r,n,o){var u,a,i,c,s,f=o.areStatesEqual,p=o.areOwnPropsEqual,l=o.areStatePropsEqual,d=!1;function y(o,d){var y,v,m=!p(d,a),b=!f(o,u);return u=o,a=d,m&&b?(i=e(u,a),t.dependsOnOwnProps&&(c=t(n,a)),s=r(i,c,a)):m?(e.dependsOnOwnProps&&(i=e(u,a)),t.dependsOnOwnProps&&(c=t(n,a)),s=r(i,c,a)):b?(y=e(u,a),v=!l(y,i),i=y,v&&(s=r(i,c,a)),s):s}return function(o,f){return d?y(o,f):(i=e(u=o,a=f),c=t(n,a),s=r(i,c,a),d=!0,s)}}function me(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,o=t.initMergeProps,u=v(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=r(e,u),i=n(e,u),c=o(e,u);return(u.pure?ve:ye)(a,i,c,e,u)}function be(e,t,r){for(var n=t.length-1;n>=0;n--){var o=t[n](e);if(o)return o}return function(t,n){throw Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function he(e,t){return e===t}function Se(e){var t=void 0===e?{}:e,r=t.connectHOC,n=void 0===r?oe:r,o=t.mapStateToPropsFactories,u=void 0===o?pe:o,a=t.mapDispatchToPropsFactories,i=void 0===a?fe:a,c=t.mergePropsFactories,s=void 0===c?de:c,f=t.selectorFactory,p=void 0===f?me:f;return function(e,t,r,o){void 0===o&&(o={});var a=o.pure,c=void 0===a||a,f=o.areStatesEqual,l=void 0===f?he:f,d=o.areOwnPropsEqual,m=void 0===d?ae:d,b=o.areStatePropsEqual,h=void 0===b?ae:b,S=o.areMergedPropsEqual,P=void 0===S?ae:S,g=v(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),O=be(e,u,"mapStateToProps"),w=be(t,i,"mapDispatchToProps"),C=be(r,s,"mergeProps");return n(p,y({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:O,initMapDispatchToProps:w,initMergeProps:C,pure:c,areStatesEqual:l,areOwnPropsEqual:m,areStatePropsEqual:h,areMergedPropsEqual:P},g))}}var Pe=Se();function ge(){return t.useContext(c)}function Oe(e){void 0===e&&(e=c);var r=e===c?ge:function(){return t.useContext(e)};return function(){return r().store}}var we=Oe();function Ce(e){void 0===e&&(e=c);var t=e===c?we:Oe(e);return function(){return t().dispatch}}var xe=Ce(),Ee=function(e,t){return e===t};function Te(e){void 0===e&&(e=c);var r=e===c?ge:function(){return t.useContext(e)};return function(e,n){void 0===n&&(n=Ee);var o=r(),u=function(e,r,n,o){var u,a=t.useReducer((function(e){return e+1}),0)[1],i=t.useMemo((function(){return new l(n,o)}),[n,o]),c=t.useRef(),s=t.useRef(),f=t.useRef(),p=t.useRef(),y=n.getState();try{if(e!==s.current||y!==f.current||c.current){var v=e(y);u=void 0!==p.current&&r(v,p.current)?p.current:v}else u=p.current}catch(e){throw (c.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"), e)}return d((function(){s.current=e,f.current=y,p.current=u,c.current=void 0})),d((function(){function e(){try{var e=n.getState(),t=s.current(e);if(r(t,p.current))return;p.current=t,f.current=e}catch(e){c.current=e}a()}return i.onStateChange=e,i.trySubscribe(),e(),function(){return i.tryUnsubscribe()}}),[n,i]),u}(e,n,o.store,o.subscription);return t.useDebugValue(u),u};}var Me=Te();s=r.unstable_batchedUpdates,Object.defineProperty(e,"batch",{enumerable:!0,get:function(){return r.unstable_batchedUpdates}}),e.Provider=function(e){var r=e.store,n=e.context,u=e.children,a=t.useMemo((function(){var e=new l(r);return e.onStateChange=e.notifyNestedSubs,{store:r,subscription:e}}),[r]),i=t.useMemo((function(){return r.getState()}),[r]);return d((function(){var e=a.subscription;return e.trySubscribe(),i!==r.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,i]),o.default.createElement((n||c).Provider,{value:a},u)},e.ReactReduxContext=c,e.connect=Pe,e.connectAdvanced=oe,e.createDispatchHook=Ce,e.createSelectorHook=Te,e.createStoreHook=Oe,e.shallowEqual=ae,e.useDispatch=xe,e.useSelector=Me,e.useStore=we,Object.defineProperty(e,"__esModule",{value:!0})}));
}());SM.currentModule = null;}, '', {"requires":["redux"],"node_modules":true});
YUI.add('react-router-dom', function (Y) {SM.currentModule = 'react-router-dom';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.ReactRouterDOM={},t.React)}(this,function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n=function(){};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function o(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t};var a=i,c=function(t){};var s=function(t,e,n,o,r,i,a,s){if(c(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,o,r,i,a,s],l=0;(u=new Error(e.replace(/%s/g,function(){return p[l++]}))).name="Invariant Violation"}throw (u.framesToPop=1, u)}},u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}})()&&Object.assign;var f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",h=o(function(t){t.exports=function(){function t(t,e,n,o,r,i){i!==f&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=a,n.PropTypes=n,n}()}),d=function(t,e,n,o,r,i,a,c){if(!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,r,i,a,c],p=0;(s=new Error(e.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw (s.framesToPop=1, s)}};function y(t){return"/"===t.charAt(0)}function v(t,e){for(var n=e,o=n+1,r=t.length;o<r;n+=1,o+=1)t[n]=t[o];t.pop()}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var b=function(t){return"/"===t.charAt(0)?t:"/"+t},g=function(t){return"/"===t.charAt(0)?t.substr(1):t},w=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)},O=function(t,e){return w(t,e)?t.substr(e.length):t},x=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},R=function(t){var e=t.pathname,n=t.search,o=t.hash,r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:"#"+o),r},P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},j=function(t,e,n,o){var r=void 0;"string"==typeof t?(r=function(t){var e=t||"/",n="",o="",r=e.indexOf("#");-1!==r&&(o=e.substr(r),e=e.substr(0,r));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===o?"":o}}(t)).state=e:(void 0===(r=P({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==e&&void 0===r.state&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(r.key=n),o?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],r=t&&y(t),i=e&&y(e),a=r||i;if(t&&y(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var c=void 0;if(o.length){var s=o[o.length-1];c="."===s||".."===s||""===s}else c=!1;for(var u=0,p=o.length;p>=0;p--){var l=o[p];"."===l?v(o,p):".."===l?(v(o,p),u++):u&&(v(o,p),u--)}if(!a)for(;u--;u)o.unshift("..");!a||""===o[0]||o[0]&&y(o[0])||o.unshift("");var f=o.join("/");return c&&"/"!==f.substr(-1)&&(f+="/"),f}(r.pathname,o.pathname)):r.pathname=o.pathname:r.pathname||(r.pathname="/"),r},E=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,o){return t(e,n[o])});var o=void 0===e?"undefined":m(e);if(o!==(void 0===n?"undefined":m(n)))return!1;if("object"===o){var r=e.valueOf(),i=n.valueOf();if(r!==e||i!==n)return t(r,i);var a=Object.keys(e),c=Object.keys(n);return a.length===c.length&&a.every(function(o){return t(e[o],n[o])})}return!1}(t.state,e.state)},T=function(){var t=null,e=[];return{setPrompt:function(e){return n(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,o,r,i){if(null!=t){var a="function"==typeof t?t(e,o):t;"string"==typeof a?"function"==typeof r?r(a,i):(n(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},appendListener:function(t){var n=!0,o=function(){n&&t.apply(void 0,arguments)};return e.push(o),function(){n=!1,e=e.filter(function(t){return t!==o})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];e.forEach(function(t){return t.apply(void 0,n)})}}},C=!("undefined"==typeof window||!window.document||!window.document.createElement),S=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},k=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},A=function(t,e){return e(window.confirm(t))},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},L=function(){try{return window.history.state||{}}catch(t){return{}}},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(C,"Browser history needs a DOM");var e,o=window.history,r=(-1===(e=window.navigator.userAgent).indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=t.forceRefresh,c=void 0!==a&&a,s=t.getUserConfirmation,u=void 0===s?A:s,p=t.keyLength,l=void 0===p?6:p,f=t.basename?x(b(t.basename)):"",h=function(t){var e=t||{},o=e.key,r=e.state,i=window.location,a=i.pathname+i.search+i.hash;return n(!f||w(a,f),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+f+'".'),f&&(a=O(a,f)),j(a,r,o)},y=function(){return Math.random().toString(36).substr(2,l)},v=T(),m=function(t){M($,t),$.length=o.length,v.notifyListeners($.location,$.action)},g=function(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||q(h(t.state))},P=function(){q(h(L()))},E=!1,q=function(t){if(E)E=!1,m();else{v.confirmTransitionTo(t,"POP",u,function(e){e?m({action:"POP",location:t}):U(t)})}},U=function(t){var e=$.location,n=Y.indexOf(e.key);-1===n&&(n=0);var o=Y.indexOf(t.key);-1===o&&(o=0);var r=n-o;r&&(E=!0,I(r))},H=h(L()),Y=[H.key],W=function(t){return f+R(t)},I=function(t){o.go(t)},N=0,B=function(t){1===(N+=t)?(S(window,"popstate",g),i&&S(window,"hashchange",P)):0===N&&(k(window,"popstate",g),i&&k(window,"hashchange",P))},D=!1,$={length:o.length,action:"POP",location:H,createHref:W,push:function(t,e){n(!("object"===(void 0===t?"undefined":_(t))&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=j(t,e,y(),$.location);v.confirmTransitionTo(i,"PUSH",u,function(t){if(t){var e=W(i),a=i.key,s=i.state;if(r)if(o.pushState({key:a,state:s},null,e),c)window.location.href=e;else{var u=Y.indexOf($.location.key),p=Y.slice(0,-1===u?0:u+1);p.push(i.key),Y=p,m({action:"PUSH",location:i})}else n(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},replace:function(t,e){n(!("object"===(void 0===t?"undefined":_(t))&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=j(t,e,y(),$.location);v.confirmTransitionTo(i,"REPLACE",u,function(t){if(t){var e=W(i),a=i.key,s=i.state;if(r)if(o.replaceState({key:a,state:s},null,e),c)window.location.replace(e);else{var u=Y.indexOf($.location.key);-1!==u&&(Y[u]=i.key),m({action:"REPLACE",location:i})}else n(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},go:I,goBack:function(){return I(-1)},goForward:function(){return I(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=v.setPrompt(t);return D||(B(1),D=!0),function(){return D&&(D=!1,B(-1)),e()}},listen:function(t){var e=v.appendListener(t);return B(1),function(){B(-1),e()}}};return $},U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},H={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+g(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:g,decodePath:b},slash:{encodePath:b,decodePath:b}},Y=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},W=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(C,"Hash history needs a DOM");var e=window.history,o=-1===window.navigator.userAgent.indexOf("Firefox"),r=t.getUserConfirmation,i=void 0===r?A:r,a=t.hashType,c=void 0===a?"slash":a,s=t.basename?x(b(t.basename)):"",u=H[c],p=u.encodePath,l=u.decodePath,f=function(){var t=l(Y());return n(!s||w(t,s),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+s+'".'),s&&(t=O(t,s)),j(t)},h=T(),y=function(t){U(F,t),F.length=e.length,h.notifyListeners(F.location,F.action)},v=!1,m=null,g=function(){var t=Y(),e=p(t);if(t!==e)W(e);else{var n=f(),o=F.location;if(!v&&E(o,n))return;if(m===R(n))return;m=null,P(n)}},P=function(t){if(v)v=!1,y();else{h.confirmTransitionTo(t,"POP",i,function(e){e?y({action:"POP",location:t}):_(t)})}},_=function(t){var e=F.location,n=I.lastIndexOf(R(e));-1===n&&(n=0);var o=I.lastIndexOf(R(t));-1===o&&(o=0);var r=n-o;r&&(v=!0,N(r))},M=Y(),L=p(M);M!==L&&W(L);var q=f(),I=[R(q)],N=function(t){n(o,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},B=0,D=function(t){1===(B+=t)?S(window,"hashchange",g):0===B&&k(window,"hashchange",g)},$=!1,F={length:e.length,action:"POP",location:q,createHref:function(t){return"#"+p(s+R(t))},push:function(t,e){n(void 0===e,"Hash history cannot push state; it is ignored");var o=j(t,void 0,void 0,F.location);h.confirmTransitionTo(o,"PUSH",i,function(t){if(t){var e=R(o),r=p(s+e);if(Y()!==r){m=e,function(t){window.location.hash=t}(r);var i=I.lastIndexOf(R(F.location)),a=I.slice(0,-1===i?0:i+1);a.push(e),I=a,y({action:"PUSH",location:o})}else n(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),y()}})},replace:function(t,e){n(void 0===e,"Hash history cannot replace state; it is ignored");var o=j(t,void 0,void 0,F.location);h.confirmTransitionTo(o,"REPLACE",i,function(t){if(t){var e=R(o),n=p(s+e);Y()!==n&&(m=e,W(n));var r=I.indexOf(R(F.location));-1!==r&&(I[r]=e),y({action:"REPLACE",location:o})}})},go:N,goBack:function(){return N(-1)},goForward:function(){return N(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=h.setPrompt(t);return $||(D(1),$=!0),function(){return $&&($=!1,D(-1)),e()}},listen:function(t){var e=h.appendListener(t);return D(1),function(){D(-1),e()}}};return F},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},D=function(t,e,n){return Math.min(Math.max(t,e),n)},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,o=t.initialEntries,r=void 0===o?["/"]:o,i=t.initialIndex,a=void 0===i?0:i,c=t.keyLength,s=void 0===c?6:c,u=T(),p=function(t){B(v,t),v.length=v.entries.length,u.notifyListeners(v.location,v.action)},l=function(){return Math.random().toString(36).substr(2,s)},f=D(a,0,r.length-1),h=r.map(function(t){return j(t,void 0,"string"==typeof t?l():t.key||l())}),d=R,y=function(t){var n=D(v.index+t,0,v.entries.length-1),o=v.entries[n];u.confirmTransitionTo(o,"POP",e,function(t){t?p({action:"POP",location:o,index:n}):p()})},v={length:h.length,action:"POP",location:h[f],index:f,entries:h,createHref:d,push:function(t,o){n(!("object"===(void 0===t?"undefined":N(t))&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=j(t,o,l(),v.location);u.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=v.index+1,n=v.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),p({action:"PUSH",location:r,index:e,entries:n})}})},replace:function(t,o){n(!("object"===(void 0===t?"undefined":N(t))&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=j(t,o,l(),v.location);u.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(v.entries[v.index]=r,p({action:"REPLACE",location:r}))})},go:y,goBack:function(){return y(-1)},goForward:function(){return y(1)},canGo:function(t){var e=v.index+t;return e>=0&&e<v.entries.length},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.setPrompt(t)},listen:function(t){return u.appendListener(t)}};return v},F=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};function K(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var V=function(t){function o(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=n=K(this,t.call.apply(t,[this].concat(i))),n.state={match:n.computeMatch(n.props.history.location.pathname)},K(n,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,t),o.prototype.getChildContext=function(){return{router:F({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},o.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},o.prototype.componentWillMount=function(){var t=this,n=this.props,o=n.children,r=n.history;d(null==o||1===e.Children.count(o),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){t.setState({match:t.computeMatch(r.location.pathname)})})},o.prototype.componentWillReceiveProps=function(t){n(this.props.history===t.history,"You cannot change <Router history>")},o.prototype.componentWillUnmount=function(){this.unlisten()},o.prototype.render=function(){var t=this.props.children;return t?e.Children.only(t):null},o}(e.Component);V.propTypes={history:h.object.isRequired,children:h.node},V.contextTypes={router:h.object},V.childContextTypes={router:h.object.isRequired};var J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Q=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},X=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},Z=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},tt=function(t){function n(){var e,o;G(this,n);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=o=Z(this,t.call.apply(t,[this].concat(i))),o.history=q(o.props),Z(o,e)}return Q(n,t),n.prototype.componentWillMount=function(){},n.prototype.render=function(){return e.createElement(V,{history:this.history,children:this.props.children})},n}(e.Component),et=function(t){function n(){var e,o;G(this,n);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=o=Z(this,t.call.apply(t,[this].concat(i))),o.history=I(o.props),Z(o,e)}return Q(n,t),n.prototype.componentWillMount=function(){},n.prototype.render=function(){return e.createElement(V,{history:this.history,children:this.props.children})},n}(e.Component),nt=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},ot=function(t){function n(){var e,o;G(this,n);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=o=Z(this,t.call.apply(t,[this].concat(i))),o.handleClick=function(t){if(o.props.onClick&&o.props.onClick(t),!t.defaultPrevented&&0===t.button&&!o.props.target&&!nt(t)){t.preventDefault();var e=o.context.router.history,n=o.props,r=n.replace,i=n.to;r?e.replace(i):e.push(i)}},Z(o,e)}return Q(n,t),n.prototype.render=function(){var t=this.props,n=(t.replace,t.to),o=t.innerRef,r=X(t,["replace","to","innerRef"]);this.context.router||d(!1),void 0===n&&d(!1);var i=this.context.router.history,a="string"==typeof n?j(n,null,null,i.location):n,c=i.createHref(a);return e.createElement("a",z({},r,{onClick:this.handleClick,href:c,ref:o}))},n}(e.Component);function rt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}ot.defaultProps={replace:!1},ot.contextTypes={router:h.shape({history:h.shape({push:h.func.isRequired,replace:h.func.isRequired,createHref:h.func.isRequired}).isRequired}).isRequired};var it=function(t){function o(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=n=rt(this,t.call.apply(t,[this].concat(i))),n.history=$(n.props),rt(n,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,t),o.prototype.componentWillMount=function(){n(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},o.prototype.render=function(){return e.createElement(V,{history:this.history,children:this.props.children})},o}(e.Component);it.propTypes={initialEntries:h.array,initialIndex:h.number,getUserConfirmation:h.func,keyLength:h.number,children:h.node};var at={}.toString,ct=Array.isArray||function(t){return"[object Array]"==at.call(t)},st=xt,ut=dt,pt=function(t,e){return vt(dt(t,e))},lt=vt,ft=Ot,ht=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function dt(t,e){for(var n,o=[],r=0,i=0,a="",c=e&&e.delimiter||"/";null!=(n=ht.exec(t));){var s=n[0],u=n[1],p=n.index;if(a+=t.slice(i,p),i=p+s.length,u)a+=u[1];else{var l=t[i],f=n[2],h=n[3],d=n[4],y=n[5],v=n[6],m=n[7];a&&(o.push(a),a="");var b=null!=f&&null!=l&&l!==f,g="+"===v||"*"===v,w="?"===v||"*"===v,O=n[2]||c,x=d||y;o.push({name:h||r++,prefix:f||"",delimiter:O,optional:w,repeat:g,partial:b,asterisk:!!m,pattern:x?bt(x):m?".*":"[^"+mt(O)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&o.push(a),o}function yt(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function vt(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,o){for(var r="",i=n||{},a=(o||{}).pretty?yt:encodeURIComponent,c=0;c<t.length;c++){var s=t[c];if("string"!=typeof s){var u,p=i[s.name];if(null==p){if(s.optional){s.partial&&(r+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be defined')}if(ct(p)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<p.length;l++){if(u=a(p[l]),!e[c].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===l?s.prefix:s.delimiter)+u}}else{if(u=s.asterisk?encodeURI(p).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):a(p),!e[c].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+u+'"');r+=s.prefix+u}}else r+=s}return r}}function mt(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function bt(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function gt(t,e){return t.keys=e,t}function wt(t){return t.sensitive?"":"i"}function Ot(t,e,n){ct(e)||(n=e||n,e=[]);for(var o=(n=n||{}).strict,r=!1!==n.end,i="",a=0;a<t.length;a++){var c=t[a];if("string"==typeof c)i+=mt(c);else{var s=mt(c.prefix),u="(?:"+c.pattern+")";e.push(c),c.repeat&&(u+="(?:"+s+u+")*"),i+=u=c.optional?c.partial?s+"("+u+")?":"(?:"+s+"("+u+"))?":s+"("+u+")"}}var p=mt(n.delimiter||"/"),l=i.slice(-p.length)===p;return o||(i=(l?i.slice(0,-p.length):i)+"(?:"+p+"(?=$))?"),i+=r?"$":o&&l?"":"(?="+p+"|$)",gt(new RegExp("^"+i,wt(n)),e)}function xt(t,e,n){return ct(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)e.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return gt(t,e)}(t,e):ct(t)?function(t,e,n){for(var o=[],r=0;r<t.length;r++)o.push(xt(t[r],e,n).source);return gt(new RegExp("(?:"+o.join("|")+")",wt(n)),e)}(t,e,n):function(t,e,n){return Ot(dt(t,n),e,n)}(t,e,n)}st.parse=ut,st.compile=pt,st.tokensToFunction=lt,st.tokensToRegExp=ft;var Rt={},Pt=0,jt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof e&&(e={path:e});var o=e,r=o.path,i=o.exact,a=void 0!==i&&i,c=o.strict,s=void 0!==c&&c,u=o.sensitive,p=void 0!==u&&u;if(null==r)return n;var l=function(t,e){var n=""+e.end+e.strict+e.sensitive,o=Rt[n]||(Rt[n]={});if(o[t])return o[t];var r=[],i={re:st(t,r,e),keys:r};return Pt<1e4&&(o[t]=i,Pt++),i}(r,{end:a,strict:s,sensitive:p}),f=l.re,h=l.keys,d=f.exec(t);if(!d)return null;var y=d[0],v=d.slice(1),m=t===y;return a&&!m?null:{path:r,url:"/"===r&&""===y?"/":y,isExact:m,params:h.reduce(function(t,e,n){return t[e.name]=v[n],t},{})}},Et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};function Tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var Ct=function(t){return 0===e.Children.count(t)},St=function(t){function o(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=n=Tt(this,t.call.apply(t,[this].concat(i))),n.state={match:n.computeMatch(n.props,n.context.router)},Tt(n,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,t),o.prototype.getChildContext=function(){return{router:Et({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},o.prototype.computeMatch=function(t,e){var n=t.computedMatch,o=t.location,r=t.path,i=t.strict,a=t.exact,c=t.sensitive;if(n)return n;d(e,"You should not use <Route> or withRouter() outside a <Router>");var s=e.route,u=(o||s.location).pathname;return jt(u,{path:r,strict:i,exact:a,sensitive:c},s.match)},o.prototype.componentWillMount=function(){n(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),n(!(this.props.component&&this.props.children&&!Ct(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),n(!(this.props.render&&this.props.children&&!Ct(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},o.prototype.componentWillReceiveProps=function(t,e){n(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),n(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},o.prototype.render=function(){var t=this.state.match,n=this.props,o=n.children,r=n.component,i=n.render,a=this.context.router,c=a.history,s=a.route,u=a.staticContext,p={match:t,location:this.props.location||s.location,history:c,staticContext:u};return r?t?e.createElement(r,p):null:i?t?i(p):null:"function"==typeof o?o(p):o&&!Ct(o)?e.Children.only(o):null},o}(e.Component);St.propTypes={computedMatch:h.object,path:h.string,exact:h.bool,strict:h.bool,sensitive:h.bool,component:h.func,render:h.func,children:h.oneOfType([h.func,h.node]),location:h.object},St.contextTypes={router:h.shape({history:h.object.isRequired,route:h.object.isRequired,staticContext:h.object})},St.childContextTypes={router:h.object.isRequired};var kt=function(t){var n=t.to,o=t.exact,r=t.strict,i=t.location,a=t.activeClassName,c=t.className,s=t.activeStyle,u=t.style,p=t.isActive,l=t["aria-current"],f=X(t,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),h="object"===(void 0===n?"undefined":J(n))?n.pathname:n,d=h&&h.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return e.createElement(St,{path:d,exact:o,strict:r,location:i,children:function(t){var o=t.location,r=t.match,i=!!(p?p(r,o):r);return e.createElement(ot,z({to:n,className:i?[c,a].filter(function(t){return t}).join(" "):c,style:i?z({},u,s):u,"aria-current":i&&l||null},f))}})};kt.defaultProps={activeClassName:"active","aria-current":"page"};var At=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){d(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(e.Component);At.propTypes={when:h.bool,message:h.oneOfType([h.func,h.string]).isRequired},At.defaultProps={when:!0},At.contextTypes={router:h.shape({history:h.shape({block:h.func.isRequired}).isRequired}).isRequired};var _t={},Mt=0,Lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===t?t:function(t){var e=t,n=_t[e]||(_t[e]={});if(n[t])return n[t];var o=st.compile(t);return Mt<1e4&&(n[t]=o,Mt++),o}(t)(e,{pretty:!0})},qt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};var Ut=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){d(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=j(t.to),o=j(this.props.to);E(e,o)?n(!1,"You tried to redirect to the same route you're currently on: \""+o.pathname+o.search+'"'):this.perform()},e.prototype.computeTo=function(t){var e=t.computedMatch,n=t.to;return e?"string"==typeof n?Lt(n,e.params):qt({},n,{pathname:Lt(n.pathname,e.params)}):n},e.prototype.perform=function(){var t=this.context.router.history,e=this.props.push,n=this.computeTo(this.props);e?t.push(n):t.replace(n)},e.prototype.render=function(){return null},e}(e.Component);Ut.propTypes={computedMatch:h.object,push:h.bool,from:h.string,to:h.oneOfType([h.string,h.object]).isRequired},Ut.defaultProps={push:!1},Ut.contextTypes={router:h.shape({history:h.shape({push:h.func.isRequired,replace:h.func.isRequired}).isRequired,staticContext:h.object}).isRequired};var Ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};function Yt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var Wt=function(t){return"/"===t.charAt(0)?t:"/"+t},It=function(t,e){return t?Ht({},e,{pathname:Wt(t)+e.pathname}):e},Nt=function(t){return"string"==typeof t?t:R(t)},Bt=function(t){return function(){d(!1,"You cannot %s with <StaticRouter>",t)}},Dt=function(){},$t=function(t){function o(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=n=Yt(this,t.call.apply(t,[this].concat(i))),n.createHref=function(t){return Wt(n.props.basename+Nt(t))},n.handlePush=function(t){var e=n.props,o=e.basename,r=e.context;r.action="PUSH",r.location=It(o,j(t)),r.url=Nt(r.location)},n.handleReplace=function(t){var e=n.props,o=e.basename,r=e.context;r.action="REPLACE",r.location=It(o,j(t)),r.url=Nt(r.location)},n.handleListen=function(){return Dt},n.handleBlock=function(){return Dt},Yt(n,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,t),o.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},o.prototype.componentWillMount=function(){n(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},o.prototype.render=function(){var t=this.props,n=t.basename,o=(t.context,t.location),r=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}(t,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(t,e){if(!t)return e;var n=Wt(t);return 0!==e.pathname.indexOf(n)?e:Ht({},e,{pathname:e.pathname.substr(n.length)})}(n,j(o)),push:this.handlePush,replace:this.handleReplace,go:Bt("go"),goBack:Bt("goBack"),goForward:Bt("goForward"),listen:this.handleListen,block:this.handleBlock};return e.createElement(V,Ht({},r,{history:i}))},o}(e.Component);$t.propTypes={basename:h.string,context:h.object.isRequired,location:h.oneOfType([h.string,h.object])},$t.defaultProps={basename:"",location:"/"},$t.childContextTypes={router:h.object.isRequired};var Ft=function(t){function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,t),o.prototype.componentWillMount=function(){d(this.context.router,"You should not use <Switch> outside a <Router>")},o.prototype.componentWillReceiveProps=function(t){n(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),n(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},o.prototype.render=function(){var t=this.context.router.route,n=this.props.children,o=this.props.location||t.location,r=void 0,i=void 0;return e.Children.forEach(n,function(n){if(null==r&&e.isValidElement(n)){var a=n.props,c=a.path,s=a.exact,u=a.strict,p=a.sensitive,l=a.from,f=c||l;i=n,r=jt(o.pathname,{path:f,exact:s,strict:u,sensitive:p},t.match)}}),r?e.cloneElement(i,{location:o,computedMatch:r}):null},o}(e.Component);Ft.contextTypes={router:h.shape({route:h.object.isRequired}).isRequired},Ft.propTypes={children:h.node,location:h.object};var Kt=o(function(t,e){var n,o,r,i,a,c,s,u;t.exports=(n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r=Object.defineProperty,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,u=s&&s(Object),function t(e,p,l){if("string"!=typeof p){if(u){var f=s(p);f&&f!==u&&t(e,f,l)}var h=i(p);a&&(h=h.concat(a(p)));for(var d=0;d<h.length;++d){var y=h[d];if(!(n[y]||o[y]||l&&l[y])){var v=c(p,y);try{r(e,y,v)}catch(t){}}}return e}return e})}),Vt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};t.BrowserRouter=tt,t.HashRouter=et,t.Link=ot,t.MemoryRouter=it,t.NavLink=kt,t.Prompt=At,t.Redirect=Ut,t.Route=St,t.Router=V,t.StaticRouter=$t,t.Switch=Ft,t.generatePath=Lt,t.matchPath=jt,t.withRouter=function(t){var n=function(n){var o=n.wrappedComponentRef,r=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}(n,["wrappedComponentRef"]);return e.createElement(St,{children:function(n){return e.createElement(t,Vt({},r,n,{ref:o}))}})};return n.displayName="withRouter("+(t.displayName||t.name)+")",n.WrappedComponent=t,n.propTypes={wrappedComponentRef:h.func},Kt(n,t)},Object.defineProperty(t,"__esModule",{value:!0})});
}());SM.currentModule = null;}, '', {"requires":["react"],"node_modules":true});
YUI.add('react-router', function (Y) {SM.currentModule = 'react-router';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.ReactRouter={},t.React)}(this,function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t){return function(){return t}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t};var i=o,a=function(t){};var c=function(t,e,n,r,o,i,c,u){if(a(e),!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,r,o,i,c,u],l=0;(s=new Error(e.replace(/%s/g,function(){return p[l++]}))).name="Invariant Violation"}throw (s.framesToPop=1, s)}},u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}})()&&Object.assign;var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",h=n(function(t){t.exports=function(){function t(t,e,n,r,o,i){i!==l&&c(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}()}),f=function(){},d=function(t,e,n,r,o,i,a,c){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,c],p=0;(u=new Error(e.replace(/%s/g,function(){return s[p++]}))).name="Invariant Violation"}throw (u.framesToPop=1, u)}};function y(t){return"/"===t.charAt(0)}function m(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var g=function(t){var e=t.pathname,n=t.search,r=t.hash,o=e||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o},b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x=function(t,e,n,r){var o=void 0;"string"==typeof t?(o=function(t){var e=t||"/",n="",r="",o=e.indexOf("#");-1!==o&&(r=e.substr(o),e=e.substr(0,o));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(o=b({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],r=e&&e.split("/")||[],o=t&&y(t),i=e&&y(e),a=o||i;if(t&&y(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var c=void 0;if(r.length){var u=r[r.length-1];c="."===u||".."===u||""===u}else c=!1;for(var s=0,p=r.length;p>=0;p--){var l=r[p];"."===l?m(r,p):".."===l?(m(r,p),s++):s&&(m(r,p),s--)}if(!a)for(;s--;s)r.unshift("..");!a||""===r[0]||r[0]&&y(r[0])||r.unshift("");var h=r.join("/");return c&&"/"!==h.substr(-1)&&(h+="/"),h}(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o},w=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,r){return t(e,n[r])});var r=void 0===e?"undefined":v(e);if(r!==(void 0===n?"undefined":v(n)))return!1;if("object"===r){var o=e.valueOf(),i=n.valueOf();if(o!==e||i!==n)return t(o,i);var a=Object.keys(e),c=Object.keys(n);return a.length===c.length&&a.every(function(r){return t(e[r],n[r])})}return!1}(t.state,e.state)},O=("undefined"==typeof window||!window.document||window.document.createElement,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P=function(t,e,n){return Math.min(Math.max(t,e),n)},j=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.getUserConfirmation,o=n.initialEntries,i=void 0===o?["/"]:o,a=n.initialIndex,c=void 0===a?0:a,u=n.keyLength,s=void 0===u?6:u,p=(t=null,e=[],{setPrompt:function(e){return f(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,o){if(null!=t){var i="function"==typeof t?t(e,n):t;"string"==typeof i?"function"==typeof r?r(i,o):(f(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==i)}else o(!0)},appendListener:function(t){var n=!0,r=function(){n&&t.apply(void 0,arguments)};return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}),l=function(t){R(b,t),b.length=b.entries.length,p.notifyListeners(b.location,b.action)},h=function(){return Math.random().toString(36).substr(2,s)},d=P(c,0,i.length-1),y=i.map(function(t){return x(t,void 0,"string"==typeof t?h():t.key||h())}),m=g,v=function(t){var e=P(b.index+t,0,b.entries.length-1),n=b.entries[e];p.confirmTransitionTo(n,"POP",r,function(t){t?l({action:"POP",location:n,index:e}):l()})},b={length:y.length,action:"POP",location:y[d],index:d,entries:y,createHref:m,push:function(t,e){f(!("object"===(void 0===t?"undefined":O(t))&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var n=x(t,e,h(),b.location);p.confirmTransitionTo(n,"PUSH",r,function(t){if(t){var e=b.index+1,r=b.entries.slice(0);r.length>e?r.splice(e,r.length-e,n):r.push(n),l({action:"PUSH",location:n,index:e,entries:r})}})},replace:function(t,e){f(!("object"===(void 0===t?"undefined":O(t))&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var n=x(t,e,h(),b.location);p.confirmTransitionTo(n,"REPLACE",r,function(t){t&&(b.entries[b.index]=n,l({action:"REPLACE",location:n}))})},go:v,goBack:function(){return v(-1)},goForward:function(){return v(1)},canGo:function(t){var e=b.index+t;return e>=0&&e<b.entries.length},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.setPrompt(t)},listen:function(t){return p.appendListener(t)}};return b},E=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},k=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},S=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},A=function(t){function n(){var e,r;E(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=r=S(this,t.call.apply(t,[this].concat(i))),r.state={match:r.computeMatch(r.props.history.location.pathname)},S(r,e)}return T(n,t),n.prototype.getChildContext=function(){return{router:C({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},n.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},n.prototype.componentWillMount=function(){var t=this,n=this.props,r=n.children,o=n.history;null!=r&&1!==e.Children.count(r)&&d(!1),this.unlisten=o.listen(function(){t.setState({match:t.computeMatch(o.location.pathname)})})},n.prototype.componentWillReceiveProps=function(t){},n.prototype.componentWillUnmount=function(){this.unlisten()},n.prototype.render=function(){var t=this.props.children;return t?e.Children.only(t):null},n}(e.Component);A.contextTypes={router:h.object},A.childContextTypes={router:h.object.isRequired};var M=function(t){function n(){var e,r;E(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=r=S(this,t.call.apply(t,[this].concat(i))),r.history=j(r.props),S(r,e)}return T(n,t),n.prototype.componentWillMount=function(){},n.prototype.render=function(){return e.createElement(A,{history:this.history,children:this.props.children})},n}(e.Component),q=function(t){function e(){return E(this,e),S(this,t.apply(this,arguments))}return T(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){this.context.router||d(!1),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(e.Component);q.defaultProps={when:!0},q.contextTypes={router:h.shape({history:h.shape({block:h.func.isRequired}).isRequired}).isRequired};var U=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},_=z,W=$,I=function(t,e){return F($(t,e))},L=F,N=G,H=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function $(t,e){for(var n,r=[],o=0,i=0,a="",c=e&&e.delimiter||"/";null!=(n=H.exec(t));){var u=n[0],s=n[1],p=n.index;if(a+=t.slice(i,p),i=p+u.length,s)a+=s[1];else{var l=t[i],h=n[2],f=n[3],d=n[4],y=n[5],m=n[6],v=n[7];a&&(r.push(a),a="");var g=null!=h&&null!=l&&l!==h,b="+"===m||"*"===m,x="?"===m||"*"===m,w=n[2]||c,O=d||y;r.push({name:f||o++,prefix:h||"",delimiter:w,optional:x,repeat:b,partial:g,asterisk:!!v,pattern:O?V(O):v?".*":"[^"+B(w)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&r.push(a),r}function D(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function F(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=n||{},a=(r||{}).pretty?D:encodeURIComponent,c=0;c<t.length;c++){var u=t[c];if("string"!=typeof u){var s,p=i[u.name];if(null==p){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(U(p)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var l=0;l<p.length;l++){if(s=a(p[l]),!e[c].test(s))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===l?u.prefix:u.delimiter)+s}}else{if(s=u.asterisk?encodeURI(p).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):a(p),!e[c].test(s))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+s+'"');o+=u.prefix+s}}else o+=u}return o}}function B(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function V(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function Y(t,e){return t.keys=e,t}function J(t){return t.sensitive?"":"i"}function G(t,e,n){U(e)||(n=e||n,e=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,i="",a=0;a<t.length;a++){var c=t[a];if("string"==typeof c)i+=B(c);else{var u=B(c.prefix),s="(?:"+c.pattern+")";e.push(c),c.repeat&&(s+="(?:"+u+s+")*"),i+=s=c.optional?c.partial?u+"("+s+")?":"(?:"+u+"("+s+"))?":u+"("+s+")"}}var p=B(n.delimiter||"/"),l=i.slice(-p.length)===p;return r||(i=(l?i.slice(0,-p.length):i)+"(?:"+p+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+p+"|$)",Y(new RegExp("^"+i,J(n)),e)}function z(t,e,n){return U(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Y(t,e)}(t,e):U(t)?function(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(z(t[o],e,n).source);return Y(new RegExp("(?:"+r.join("|")+")",J(n)),e)}(t,e,n):function(t,e,n){return G($(t,n),e,n)}(t,e,n)}_.parse=W,_.compile=I,_.tokensToFunction=L,_.tokensToRegExp=N;var K={},Q=0,X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===t?t:function(t){var e=t,n=K[e]||(K[e]={});if(n[t])return n[t];var r=_.compile(t);return Q<1e4&&(n[t]=r,Q++),r}(t)(e,{pretty:!0})},Z=function(t){function e(){return E(this,e),S(this,t.apply(this,arguments))}return T(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){this.context.router||d(!1),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=x(t.to),n=x(this.props.to);w(e,n)||this.perform()},e.prototype.computeTo=function(t){var e=t.computedMatch,n=t.to;return e?"string"==typeof n?X(n,e.params):C({},n,{pathname:X(n.pathname,e.params)}):n},e.prototype.perform=function(){var t=this.context.router.history,e=this.props.push,n=this.computeTo(this.props);e?t.push(n):t.replace(n)},e.prototype.render=function(){return null},e}(e.Component);Z.defaultProps={push:!1},Z.contextTypes={router:h.shape({history:h.shape({push:h.func.isRequired,replace:h.func.isRequired}).isRequired,staticContext:h.object}).isRequired};var tt={},et=0,nt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof e&&(e={path:e});var r=e,o=r.path,i=r.exact,a=void 0!==i&&i,c=r.strict,u=void 0!==c&&c,s=r.sensitive,p=void 0!==s&&s;if(null==o)return n;var l=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=tt[n]||(tt[n]={});if(r[t])return r[t];var o=[],i={re:_(t,o,e),keys:o};return et<1e4&&(r[t]=i,et++),i}(o,{end:a,strict:u,sensitive:p}),h=l.re,f=l.keys,d=h.exec(t);if(!d)return null;var y=d[0],m=d.slice(1),v=t===y;return a&&!v?null:{path:o,url:"/"===o&&""===y?"/":y,isExact:v,params:f.reduce(function(t,e,n){return t[e.name]=m[n],t},{})}},rt=function(t){function n(){var e,r;E(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=r=S(this,t.call.apply(t,[this].concat(i))),r.state={match:r.computeMatch(r.props,r.context.router)},S(r,e)}return T(n,t),n.prototype.getChildContext=function(){return{router:C({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},n.prototype.computeMatch=function(t,e){var n=t.computedMatch,r=t.location,o=t.path,i=t.strict,a=t.exact,c=t.sensitive;if(n)return n;e||d(!1);var u=e.route,s=(r||u.location).pathname;return nt(s,{path:o,strict:i,exact:a,sensitive:c},u.match)},n.prototype.componentWillMount=function(){},n.prototype.componentWillReceiveProps=function(t,e){this.setState({match:this.computeMatch(t,e.router)})},n.prototype.render=function(){var t=this.state.match,n=this.props,r=n.children,o=n.component,i=n.render,a=this.context.router,c=a.history,u=a.route,s=a.staticContext,p={match:t,location:this.props.location||u.location,history:c,staticContext:s};return o?t?e.createElement(o,p):null:i?t?i(p):null:"function"==typeof r?r(p):r&&!function(t){return 0===e.Children.count(t)}(r)?e.Children.only(r):null},n}(e.Component);rt.contextTypes={router:h.shape({history:h.object.isRequired,route:h.object.isRequired,staticContext:h.object})},rt.childContextTypes={router:h.object.isRequired};var ot=function(t){return"/"===t.charAt(0)?t:"/"+t},it=function(t,e){return t?C({},e,{pathname:ot(t)+e.pathname}):e},at=function(t){return"string"==typeof t?t:g(t)},ct=function(t){return function(){d(!1)}},ut=function(){},st=function(t){function n(){var e,r;E(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=r=S(this,t.call.apply(t,[this].concat(i))),r.createHref=function(t){return ot(r.props.basename+at(t))},r.handlePush=function(t){var e=r.props,n=e.basename,o=e.context;o.action="PUSH",o.location=it(n,x(t)),o.url=at(o.location)},r.handleReplace=function(t){var e=r.props,n=e.basename,o=e.context;o.action="REPLACE",o.location=it(n,x(t)),o.url=at(o.location)},r.handleListen=function(){return ut},r.handleBlock=function(){return ut},S(r,e)}return T(n,t),n.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},n.prototype.componentWillMount=function(){},n.prototype.render=function(){var t=this.props,n=t.basename,r=(t.context,t.location),o=k(t,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(t,e){if(!t)return e;var n=ot(t);return 0!==e.pathname.indexOf(n)?e:C({},e,{pathname:e.pathname.substr(n.length)})}(n,x(r)),push:this.handlePush,replace:this.handleReplace,go:ct(),goBack:ct(),goForward:ct(),listen:this.handleListen,block:this.handleBlock};return e.createElement(A,C({},o,{history:i}))},n}(e.Component);st.defaultProps={basename:"",location:"/"},st.childContextTypes={router:h.object.isRequired};var pt=function(t){function n(){return E(this,n),S(this,t.apply(this,arguments))}return T(n,t),n.prototype.componentWillMount=function(){this.context.router||d(!1)},n.prototype.componentWillReceiveProps=function(t){},n.prototype.render=function(){var t=this.context.router.route,n=this.props.children,r=this.props.location||t.location,o=void 0,i=void 0;return e.Children.forEach(n,function(n){if(null==o&&e.isValidElement(n)){var a=n.props,c=a.path,u=a.exact,s=a.strict,p=a.sensitive,l=a.from,h=c||l;i=n,o=nt(r.pathname,{path:h,exact:u,strict:s,sensitive:p},t.match)}}),o?e.cloneElement(i,{location:r,computedMatch:o}):null},n}(e.Component);pt.contextTypes={router:h.shape({route:h.object.isRequired}).isRequired};var lt=n(function(t,e){var n,r,o,i,a,c,u,s;t.exports=(n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,s=u&&u(Object),function t(e,p,l){if("string"!=typeof p){if(s){var h=u(p);h&&h!==s&&t(e,h,l)}var f=i(p);a&&(f=f.concat(a(p)));for(var d=0;d<f.length;++d){var y=f[d];if(!(n[y]||r[y]||l&&l[y])){var m=c(p,y);try{o(e,y,m)}catch(t){}}}return e}return e})});t.MemoryRouter=M,t.Prompt=q,t.Redirect=Z,t.Route=rt,t.Router=A,t.StaticRouter=st,t.Switch=pt,t.generatePath=X,t.matchPath=nt,t.withRouter=function(t){var n=function(n){var r=n.wrappedComponentRef,o=k(n,["wrappedComponentRef"]);return e.createElement(rt,{children:function(n){return e.createElement(t,C({},o,n,{ref:r}))}})};return n.displayName="withRouter("+(t.displayName||t.name)+")",n.WrappedComponent=t,lt(n,t)},Object.defineProperty(t,"__esModule",{value:!0})});
}());SM.currentModule = null;}, '', {"requires":["react"],"node_modules":true});
YUI.add('react-transition-group', function (Y) {SM.currentModule = 'react-transition-group';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t((e=e||self).ReactTransitionGroup={},e.React,e.ReactDOM)}(this,function(e,t,n){"use strict";var r="default"in t?t.default:t,i="default"in n?n.default:n;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e,t){return e(t={exports:{}},t.exports),t.exports}var u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function h(){}var E=c(function(e){e.exports=function(){function e(e,t,n,r,i,o){if(o!==f){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw (a.name="Invariant Violation", a)}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=h,n.PropTypes=n,n}()}),x=(E.object,E.oneOfType,E.element,E.bool,E.func,c(function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}}));l(x);var m=c(function(e,t){t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default});l(m);var v=l(c(function(e,t){t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var n=x(m);e.exports=t.default}));function y(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var g=r.createContext(null),b="unmounted",C="exited",O="entering",N="entered",S=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=C,r.appearStatus=O):i=N:i=t.unmountOnExit||t.mountOnEnter?b:C,r.state={status:i},r.nextCallback=null,r}s(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===b?{status:C}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==O&&n!==N&&(t=O):n!==O&&n!==N||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.findDOMNode(this);t===O?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===C&&this.setState({status:b})},n.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context?this.context.isMounting:t,o=this.getTimeouts(),a=i?o.appear:o.enter;t||r?(this.props.onEnter(e,i),this.safeSetState({status:O},function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,function(){n.safeSetState({status:N},function(){n.props.onEntered(e,i)})})})):this.safeSetState({status:N},function(){n.props.onEntered(e)})},n.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:C},function(){t.props.onExited(e)})})})):this.safeSetState({status:C},function(){t.props.onExited(e)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===b)return null;var t=this.props,n=t.children,i=a(t,["children"]);if(delete i.in,delete i.mountOnEnter,delete i.unmountOnExit,delete i.appear,delete i.enter,delete i.exit,delete i.timeout,delete i.addEndListener,delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,"function"==typeof n)return r.createElement(g.Provider,{value:null},n(e,i));var o=r.Children.only(n);return r.createElement(g.Provider,{value:null},r.cloneElement(o,i))},t}(r.Component);function T(){}S.contextType=g,S.propTypes={},S.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:T,onEntering:T,onEntered:T,onExit:T,onExiting:T,onExited:T},S.UNMOUNTED=0,S.EXITED=1,S.ENTERING=2,S.ENTERED=3,S.EXITING=4;var k=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=y(n.className,r):n.setAttribute("class",y(n.className&&n.className.baseVal||"",r)));var n,r})},j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){t.removeClasses(e,"exit"),t.addClass(e,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=n?"appear":"enter";t.addClass(e,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=n?"appear":"enter";t.removeClasses(e,r),t.addClass(e,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),t.addClass(e,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){t.addClass(e,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){t.removeClasses(e,"exit"),t.addClass(e,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}s(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(r+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach(function(t){return v(e,t)})}(e,r)},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&k(e,r),i&&k(e,i),o&&k(e,o)},n.render=function(){var e=this.props,t=(e.classNames,a(e,["classNames"]));return r.createElement(S,o({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(r.Component);function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,n){var r=Object.create(null);return e&&t.Children.map(e,function(e){return e}).forEach(function(e){r[e.key]=function(e){return n&&t.isValidElement(e)?n(e):e}(e)}),r}function w(e,t,n){return null!=n[t]?n[t]:e.props[t]}function L(e,n,r){var i=P(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach(function(a){var s=o[a];if(t.isValidElement(s)){var l=a in n,c=a in i,u=n[a],p=t.isValidElement(u)&&!u.props.in;!c||l&&!p?c||!l||p?c&&l&&t.isValidElement(u)&&(o[a]=t.cloneElement(s,{onExited:r.bind(null,s),in:u.props.in,exit:w(s,"exit",e),enter:w(s,"enter",e)})):o[a]=t.cloneElement(s,{in:!1}):o[a]=t.cloneElement(s,{onExited:r.bind(null,s),in:!0,exit:w(s,"exit",e),enter:w(s,"enter",e)})}}),o}j.defaultProps={classNames:""},j.propTypes={};var R=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},M=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(_(_(r)));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}s(n,e);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,P(r.children,function(e){return t.cloneElement(e,{onExited:i.bind(null,e),in:!0,appear:w(e,"appear",r),enter:w(e,"enter",r),exit:w(e,"exit",r)})})):L(e,o,a),firstRender:!1}},i.handleExited=function(e,t){var n=P(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=o({},t.children);return delete n[e.key],{children:n}}))},i.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=a(e,["component","childFactory"]),o=this.state.contextValue,s=R(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(g.Provider,{value:o},s):r.createElement(g.Provider,{value:o},r.createElement(t,i,s))},n}(r.Component);M.propTypes={},M.defaultProps={component:"div",childFactory:function(e){return e}};var A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}s(t,e);var i=t.prototype;return i.handleLifecycle=function(e,t,i){var o,a=this.props.children,s=r.Children.toArray(a)[t];s.props[e]&&(o=s.props)[e].apply(o,i),this.props[e]&&this.props[e](n.findDOMNode(this))},i.render=function(){var e=this.props,t=e.children,n=e.in,i=a(e,["children","in"]),o=r.Children.toArray(t),s=o[0],l=o[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.createElement(M,i,n?r.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(r.Component);A.propTypes={},e.CSSTransition=j,e.ReplaceTransition=A,e.Transition=S,e.TransitionGroup=M,Object.defineProperty(e,"__esModule",{value:!0})});
}());SM.currentModule = null;}, '', {"requires":["react"],"node_modules":true});
YUI.add("react-virtualized",(function(e){SM.currentModule="react-virtualized";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule},t=SM._requireShim;!function(){!function(e,o){"object"==typeof exports&&void 0!==module?o(exports,t("react"),t("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],o):o((e=e||self).ReactVirtualized={},e.React,e.ReactDOM)}(this,(function(exports,e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(o,!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var o,n;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(o=e,n=t,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(o,n))}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],0<=t.indexOf(o)||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function p(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function m(e){this.setState(function(t){var o=this.constructor.getDerivedStateFromProps(e,t);return null!=o?o:null}.bind(this))}function g(e,t){try{var o=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(o,n)}finally{this.props=o,this.state=n}}function v(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var o=null,n=null,i=null;if("function"==typeof t.componentWillMount?o="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(o="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==o||null!==n||null!==i){var r=e.displayName||e.name,l="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+r+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==o?"\n  "+o:"")+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=p,t.componentWillReceiveProps=m),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=g;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,o){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:o;s.call(this,e,t,n)}}return e}g.__suppressDeprecationWarning=m.__suppressDeprecationWarning=p.__suppressDeprecationWarning=!0;var _=function(){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(n=f(this,(e=d(t)).call.apply(e,[this].concat(l)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),r(h(n),"_columnStartIndex",0),r(h(n),"_columnStopIndex",0),r(h(n),"_rowStartIndex",0),r(h(n),"_rowStopIndex",0),r(h(n),"_onKeyDown",(function(e){var t=n.props,o=t.columnCount,i=t.disabled,r=t.mode,l=t.rowCount;if(!i){var s=n._getScrollState(),a=s.scrollToColumn,c=s.scrollToRow,d=n._getScrollState(),u=d.scrollToColumn,h=d.scrollToRow;switch(e.key){case"ArrowDown":h="cells"===r?Math.min(h+1,l-1):Math.min(n._rowStopIndex+1,l-1);break;case"ArrowLeft":u="cells"===r?Math.max(u-1,0):Math.max(n._columnStartIndex-1,0);break;case"ArrowRight":u="cells"===r?Math.min(u+1,o-1):Math.min(n._columnStopIndex+1,o-1);break;case"ArrowUp":h="cells"===r?Math.max(h-1,0):Math.max(n._rowStartIndex-1,0)}u===a&&h===c||(e.preventDefault(),n._updateScrollState({scrollToColumn:u,scrollToRow:h}))}})),r(h(n),"_onSectionRendered",(function(e){var t=e.columnStartIndex,o=e.columnStopIndex,i=e.rowStartIndex,r=e.rowStopIndex;n._columnStartIndex=t,n._columnStopIndex=o,n._rowStartIndex=i,n._rowStopIndex=r})),n}return c(t,e.PureComponent),i(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,o=e.scrollToRow;this.setState({scrollToRow:o,scrollToColumn:t})}},{key:"render",value:function(){var t=this.props,o=t.className,n=t.children,i=this._getScrollState(),r=i.scrollToColumn,l=i.scrollToRow;return e.createElement("div",{className:o,onKeyDown:this._onKeyDown},n({onSectionRendered:this._onSectionRendered,scrollToColumn:r,scrollToRow:l}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,o=e.scrollToRow,n=this.props,i=n.isControlled,r=n.onScrollToChange;"function"==typeof r&&r({scrollToColumn:t,scrollToRow:o}),i||this.setState({scrollToColumn:t,scrollToRow:o})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?a({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}();function S(e,t){var o,n,i,r=void 0!==(o=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global).document&&o.document.attachEvent;if(!r){var l=(i=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||function(e){return o.setTimeout(e,20)},function(e){return i(e)}),s=(n=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.clearTimeout,function(e){return n(e)}),a=function(e){var t=e.__resizeTriggers__,o=t.firstElementChild,n=t.lastElementChild,i=o.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=o.offsetWidth+1+"px",i.style.height=o.offsetHeight+1+"px",o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight},c=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;a(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=l((function(){!function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}(t)||(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(o){o.call(t,e)})))}))}},d=!1,u="",h="animationstart",f="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=o.document.createElement("fakeelement");if(void 0!==m.style.animationName&&(d=!0),!1===d)for(var g=0;g<f.length;g++)if(void 0!==m.style[f[g]+"AnimationName"]){u="-"+f[g].toLowerCase()+"-",h=p[g],d=!0;break}var v="resizeanim",_="@"+u+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",S=u+"animation: 1ms "+v+"; "}return{addResizeListener:function(t,n){if(r)t.attachEvent("onresize",n);else{if(!t.__resizeTriggers__){var i=t.ownerDocument,l=o.getComputedStyle(t);l&&"static"==l.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var o=(_||"")+".resize-triggers { "+(S||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=o:i.appendChild(t.createTextNode(o)),n.appendChild(i)}}(i),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=i.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),a(t),t.addEventListener("scroll",c,!0),h&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==v&&a(t)},t.__resizeTriggers__.addEventListener(h,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(r)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(h,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}r(_,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),v(_);var y=function(){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(n=f(this,(e=d(t)).call.apply(e,[this].concat(l)))),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),r(h(n),"_parentNode",void 0),r(h(n),"_autoSizer",void 0),r(h(n),"_window",void 0),r(h(n),"_detectElementResize",void 0),r(h(n),"_onResize",(function(){var e=n.props,t=e.disableHeight,o=e.disableWidth,i=e.onResize;if(n._parentNode){var r=n._parentNode.offsetHeight||0,l=n._parentNode.offsetWidth||0,s=(n._window||window).getComputedStyle(n._parentNode)||{},a=parseInt(s.paddingLeft,10)||0,c=parseInt(s.paddingRight,10)||0,d=parseInt(s.paddingTop,10)||0,u=parseInt(s.paddingBottom,10)||0,h=r-d-u,f=l-a-c;(!t&&n.state.height!==h||!o&&n.state.width!==f)&&(n.setState({height:r-d-u,width:l-a-c}),i({height:r,width:l}))}})),r(h(n),"_setRef",(function(e){n._autoSizer=e})),n}return c(t,e.Component),i(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=S(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var t=this.props,o=t.children,n=t.className,i=t.disableHeight,r=t.disableWidth,l=t.style,s=this.state,c=s.height,d=s.width,u={overflow:"visible"},h={};return i||(u.height=0,h.height=c),r||(u.width=0,h.width=d),e.createElement("div",{className:n,ref:this._setRef,style:a({},u,{},l)},o(h))}}]),t}();r(y,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var C=function(){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(t=f(this,(e=d(n)).call.apply(e,[this].concat(l)))),"_child",void 0),r(h(t),"_measure",(function(){var e=t.props,o=e.cache,n=e.columnIndex,i=void 0===n?0:n,r=e.parent,l=e.rowIndex,s=void 0===l?t.props.index||0:l,a=t._getCellMeasurements(),c=a.height,d=a.width;c===o.getHeight(s,i)&&d===o.getWidth(s,i)||(o.set(s,i,d,c),r&&"function"==typeof r.recomputeGridSize&&r.recomputeGridSize({columnIndex:i,rowIndex:s}))})),r(h(t),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),(t._child=e)&&t._maybeMeasureCell()})),t}return c(n,e.PureComponent),i(n,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,o=this._child||t.findDOMNode(this);if(o&&o.ownerDocument&&o.ownerDocument.defaultView&&o instanceof o.ownerDocument.defaultView.HTMLElement){var n=o.style.width,i=o.style.height;e.hasFixedWidth()||(o.style.width="auto"),e.hasFixedHeight()||(o.style.height="auto");var r=Math.ceil(o.offsetHeight),l=Math.ceil(o.offsetWidth);return n&&(o.style.width=n),i&&(o.style.height=i),{height:r,width:l}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,o=e.columnIndex,n=void 0===o?0:o,i=e.parent,r=e.rowIndex,l=void 0===r?this.props.index||0:r;if(!t.has(l,n)){var s=this._getCellMeasurements(),a=s.height,c=s.width;t.set(l,n,c,a),i&&"function"==typeof i.invalidateCellSizeAfterRender&&i.invalidateCellSizeAfterRender({columnIndex:n,rowIndex:l})}}}]),n}();r(C,"__internalCellMeasurerFlag",!1),C.__internalCellMeasurerFlag=!0;var w=function(){function e(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,e),r(this,"_cellHeightCache",{}),r(this,"_cellWidthCache",{}),r(this,"_columnWidthCache",{}),r(this,"_rowHeightCache",{}),r(this,"_defaultHeight",void 0),r(this,"_defaultWidth",void 0),r(this,"_minHeight",void 0),r(this,"_minWidth",void 0),r(this,"_keyMapper",void 0),r(this,"_hasFixedHeight",void 0),r(this,"_hasFixedWidth",void 0),r(this,"_columnCount",0),r(this,"_rowCount",0),r(this,"columnWidth",(function(e){var o=e.index,n=t._keyMapper(0,o);return void 0!==t._columnWidthCache[n]?t._columnWidthCache[n]:t._defaultWidth})),r(this,"rowHeight",(function(e){var o=e.index,n=t._keyMapper(o,0);return void 0!==t._rowHeightCache[n]?t._rowHeightCache[n]:t._defaultHeight}));var i=n.defaultHeight,l=n.defaultWidth,s=n.fixedHeight,a=n.fixedWidth,c=n.keyMapper,d=n.minHeight,u=n.minWidth;this._hasFixedHeight=!0===s,this._hasFixedWidth=!0===a,this._minHeight=d||0,this._minWidth=u||0,this._keyMapper=c||x,this._defaultHeight=Math.max(this._minHeight,"number"==typeof i?i:30),this._defaultWidth=Math.max(this._minWidth,"number"==typeof l?l:100),!1===this._hasFixedHeight&&!1===this._hasFixedWidth&&console.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),!1===this._hasFixedHeight&&0===this._defaultHeight&&console.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),!1===this._hasFixedWidth&&0===this._defaultWidth&&console.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return i(e,[{key:"clear",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0,n=this._keyMapper(e,o);delete this._cellHeightCache[n],delete this._cellWidthCache[n],this._updateCachedColumnAndRowSizes(e,o)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0;if(this._hasFixedHeight)return this._defaultHeight;var n=this._keyMapper(e,o);return void 0!==this._cellHeightCache[n]?Math.max(this._minHeight,this._cellHeightCache[n]):this._defaultHeight}},{key:"getWidth",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0;if(this._hasFixedWidth)return this._defaultWidth;var n=this._keyMapper(e,o);return void 0!==this._cellWidthCache[n]?Math.max(this._minWidth,this._cellWidthCache[n]):this._defaultWidth}},{key:"has",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0,n=this._keyMapper(e,o);return void 0!==this._cellHeightCache[n]}},{key:"set",value:function(e,t,o,n){var i=this._keyMapper(e,t);t>=this._columnCount&&(this._columnCount=t+1),e>=this._rowCount&&(this._rowCount=e+1),this._cellHeightCache[i]=n,this._cellWidthCache[i]=o,this._updateCachedColumnAndRowSizes(e,t)}},{key:"_updateCachedColumnAndRowSizes",value:function(e,t){if(!this._hasFixedWidth){for(var o=0,n=0;n<this._rowCount;n++)o=Math.max(o,this.getWidth(n,t));var i=this._keyMapper(0,t);this._columnWidthCache[i]=o}if(!this._hasFixedHeight){for(var r=0,l=0;l<this._columnCount;l++)r=Math.max(r,this.getHeight(e,l));var s=this._keyMapper(e,0);this._rowHeightCache[s]=r}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),e}();function x(e,t){return"".concat(e,"-").concat(t)}function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b(e,module){return e(module={exports:{}},module.exports),module.exports}var T=b((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var h=e.$$typeof;switch(h){case t:switch(e=e.type){case a:case c:case n:case r:case i:case u:return e;default:switch(e=e&&e.$$typeof){case s:case d:case l:return e;default:return h}}case p:case f:case o:return h}}}function S(e){return _(e)===c}exports.typeOf=_,exports.AsyncMode=a,exports.ConcurrentMode=c,exports.ContextConsumer=s,exports.ContextProvider=l,exports.Element=t,exports.ForwardRef=d,exports.Fragment=n,exports.Lazy=p,exports.Memo=f,exports.Portal=o,exports.Profiler=r,exports.StrictMode=i,exports.Suspense=u,exports.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===r||e===i||e===u||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===l||e.$$typeof===s||e.$$typeof===d||e.$$typeof===m||e.$$typeof===g||e.$$typeof===v)},exports.isAsyncMode=function(e){return S(e)||_(e)===a},exports.isConcurrentMode=S,exports.isContextConsumer=function(e){return _(e)===s},exports.isContextProvider=function(e){return _(e)===l},exports.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},exports.isForwardRef=function(e){return _(e)===d},exports.isFragment=function(e){return _(e)===n},exports.isLazy=function(e){return _(e)===p},exports.isMemo=function(e){return _(e)===f},exports.isPortal=function(e){return _(e)===o},exports.isProfiler=function(e){return _(e)===r},exports.isStrictMode=function(e){return _(e)===i},exports.isSuspense=function(e){return _(e)===u}}));R(T),T.typeOf,T.AsyncMode,T.ConcurrentMode,T.ContextConsumer,T.ContextProvider,T.Element,T.ForwardRef,T.Fragment,T.Lazy,T.Memo,T.Portal,T.Profiler,T.StrictMode,T.Suspense,T.isValidElementType,T.isAsyncMode,T.isConcurrentMode,T.isContextConsumer,T.isContextProvider,T.isElement,T.isForwardRef,T.isFragment,T.isLazy,T.isMemo,T.isPortal,T.isProfiler,T.isStrictMode,T.isSuspense;var z=b((function(module,exports){!function(){Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var h=e.$$typeof;switch(h){case t:var m=e.type;switch(m){case a:case c:case n:case r:case i:case u:return m;default:var g=m&&m.$$typeof;switch(g){case s:case d:case l:return g;default:return h}}case p:case f:case o:return h}}}var S=a,y=c,C=s,w=l,x=t,R=d,b=n,T=p,z=f,I=o,M=r,k=i,P=u,O=!1;function L(e){return _(e)===c}exports.typeOf=_,exports.AsyncMode=S,exports.ConcurrentMode=y,exports.ContextConsumer=C,exports.ContextProvider=w,exports.Element=x,exports.ForwardRef=R,exports.Fragment=b,exports.Lazy=T,exports.Memo=z,exports.Portal=I,exports.Profiler=M,exports.StrictMode=k,exports.Suspense=P,exports.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===r||e===i||e===u||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===l||e.$$typeof===s||e.$$typeof===d||e.$$typeof===m||e.$$typeof===g||e.$$typeof===v)},exports.isAsyncMode=function(e){return O||function(e,t){if(void 0===t)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!e){for(var o=arguments.length,n=new Array(2<o?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];(function(e){for(var t=arguments.length,o=new Array(1<t?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];var i=0,r="Warning: "+e.replace(/%s/g,(function(){return o[i++]}));"undefined"!=typeof console&&console.warn(r);try{throw new Error(r)}catch(e){}}).apply(void 0,[t].concat(n))}}(!(O=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),L(e)||_(e)===a},exports.isConcurrentMode=L,exports.isContextConsumer=function(e){return _(e)===s},exports.isContextProvider=function(e){return _(e)===l},exports.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},exports.isForwardRef=function(e){return _(e)===d},exports.isFragment=function(e){return _(e)===n},exports.isLazy=function(e){return _(e)===p},exports.isMemo=function(e){return _(e)===f},exports.isPortal=function(e){return _(e)===o},exports.isProfiler=function(e){return _(e)===r},exports.isStrictMode=function(e){return _(e)===i},exports.isSuspense=function(e){return _(e)===u}}()}));R(z),z.typeOf,z.AsyncMode,z.ConcurrentMode,z.ContextConsumer,z.ContextProvider,z.Element,z.ForwardRef,z.Fragment,z.Lazy,z.Memo,z.Portal,z.Profiler,z.StrictMode,z.Suspense,z.isValidElementType,z.isAsyncMode,z.isConcurrentMode,z.isContextConsumer,z.isContextProvider,z.isElement,z.isForwardRef,z.isFragment,z.isLazy,z.isMemo,z.isPortal,z.isProfiler,z.isStrictMode,z.isSuspense;var I,M=b((function(module){module.exports=z})),k=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,L=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},o=0;o<10;o++)t["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var o,n,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var l in o=Object(arguments[r]))P.call(o,l)&&(i[l]=o[l]);if(k){n=k(o);for(var s=0;s<n.length;s++)O.call(o,n[s])&&(i[n[s]]=o[n[s]])}}return i},G="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",A={},W=Function.call.bind(Object.prototype.hasOwnProperty);function E(e,t,o,n,i){for(var r in e)if(W(e,r)){var l;try{if("function"!=typeof e[r]){var s=Error((n||"React class")+": "+o+" type `"+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[r]+"`.");throw s.name="Invariant Violation",s}l=e[r](t,r,n,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){l=e}if(!l||l instanceof Error||I((n||"React class")+": type specification of "+o+" `"+r+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in A)){A[l.message]=!0;var a=i?i():"";I("Failed "+o+" type: "+l.message+(null!=a?a:""))}}}I=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},E.resetWarningCache=function(){A={}};var H,F=E,D=Function.call.bind(Object.prototype.hasOwnProperty);function N(){return null}H=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}};var j=b((function(module){var e=M;module.exports=function(e,t){var o="function"==typeof Symbol&&Symbol.iterator,n={array:s("array"),bool:s("boolean"),func:s("function"),number:s("number"),object:s("object"),string:s("string"),symbol:s("symbol"),any:l(N),arrayOf:function(e){return l((function(t,o,n,i,l){if("function"!=typeof e)return new r("Property `"+l+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var s=t[o];if(!Array.isArray(s))return new r("Invalid "+i+" `"+l+"` of type `"+c(s)+"` supplied to `"+n+"`, expected an array.");for(var a=0;a<s.length;a++){var d=e(s,a,n,i,l+"["+a+"]",G);if(d instanceof Error)return d}return null}))},element:l((function(t,o,n,i,l){var s=t[o];return e(s)?null:new r("Invalid "+i+" `"+l+"` of type `"+c(s)+"` supplied to `"+n+"`, expected a single ReactElement.")})),elementType:l((function(e,t,o,n,i){var l=e[t];return M.isValidElementType(l)?null:new r("Invalid "+n+" `"+i+"` of type `"+c(l)+"` supplied to `"+o+"`, expected a single ReactElement type.")})),instanceOf:function(e){return l((function(t,o,n,i,l){if(t[o]instanceof e)return null;var s,a=e.name||"<<anonymous>>";return new r("Invalid "+i+" `"+l+"` of type `"+(((s=t[o]).constructor&&s.constructor.name?s.constructor.name:"<<anonymous>>")+"` supplied to `")+n+"`, expected instance of `"+a+"`.")}))},node:l((function(e,t,o,n,i){return a(e[t])?null:new r("Invalid "+n+" `"+i+"` supplied to `"+o+"`, expected a ReactNode.")})),objectOf:function(e){return l((function(t,o,n,i,l){if("function"!=typeof e)return new r("Property `"+l+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var s=t[o],a=c(s);if("object"!==a)return new r("Invalid "+i+" `"+l+"` of type `"+a+"` supplied to `"+n+"`, expected an object.");for(var d in s)if(D(s,d)){var u=e(s,d,n,i,l+"."+d,G);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?l((function(t,o,n,l,s){for(var a=t[o],c=0;c<e.length;c++)if(i(a,e[c]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===d(t)?String(t):t}));return new r("Invalid "+l+" `"+s+"` of value `"+String(a)+"` supplied to `"+n+"`, expected one of "+u+".")})):(H(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),N)},oneOfType:function(e){if(!Array.isArray(e))return H("Invalid argument supplied to oneOfType, expected an instance of array."),N;for(var t=0;t<e.length;t++){var o=e[t];if("function"!=typeof o)return H("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+u(o)+" at index "+t+"."),N}return l((function(t,o,n,i,l){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,o,n,i,l,G))return null;return new r("Invalid "+i+" `"+l+"` supplied to `"+n+"`.")}))},shape:function(e){return l((function(t,o,n,i,l){var s=t[o],a=c(s);if("object"!==a)return new r("Invalid "+i+" `"+l+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");for(var d in e){var u=e[d];if(u){var h=u(s,d,n,i,l+"."+d,G);if(h)return h}}return null}))},exact:function(e){return l((function(t,o,n,i,l){var s=t[o],a=c(s);if("object"!==a)return new r("Invalid "+i+" `"+l+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");var d=L({},t[o],e);for(var u in d){var h=e[u];if(!h)return new r("Invalid "+i+" `"+l+"` key `"+u+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[o],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=h(s,u,n,i,l+"."+u,G);if(f)return f}return null}))}};function i(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function r(e){this.message=e,this.stack=""}function l(e){var o={},n=0;function i(i,l,s,a,c,d,u){if(a=a||"<<anonymous>>",d=d||s,u!==G){if(t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("undefined"!=typeof console){var f=a+":"+s;!o[f]&&n<3&&(H("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+a+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),o[f]=!0,n++)}}return null==l[s]?i?null===l[s]?new r("The "+c+" `"+d+"` is marked as required in `"+a+"`, but its value is `null`."):new r("The "+c+" `"+d+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:e(l,s,a,c,d)}var l=i.bind(null,!1);return l.isRequired=i.bind(null,!0),l}function s(e){return l((function(t,o,n,i,l,s){var a=t[o];return c(a)===e?null:new r("Invalid "+i+" `"+l+"` of type `"+d(a)+"` supplied to `"+n+"`, expected `"+e+"`.")}))}function a(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(a);if(null===t||e(t))return!0;var n=function(e){var t=e&&(o&&e[o]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var i,r=n.call(t);if(n!==t.entries){for(;!(i=r.next()).done;)if(!a(i.value))return!1}else for(;!(i=r.next()).done;){var l=i.value;if(l&&!a(l[1]))return!1}return!0;default:return!1}}function c(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function d(e){if(null==e)return""+e;var t=c(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function u(e){var t=d(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return r.prototype=Error.prototype,n.checkPropTypes=F,n.resetWarningCache=F.resetWarningCache,n.PropTypes=n}(e.isElement,!0)}));function U(e){var t,o,n="";if(e)if("object"==typeof e)if(e.push)for(t=0;t<e.length;t++)e[t]&&(o=U(e[t]))&&(n&&(n+=" "),n+=o);else for(t in e)e[t]&&(o=U(t))&&(n&&(n+=" "),n+=o);else"boolean"==typeof e||e.call||(n&&(n+=" "),n+=e);return n}function q(){for(var e,t=0,o="";t<arguments.length;)(e=U(arguments[t++]))&&(o&&(o+=" "),o+=e);return o}function B(e){var t=!(0<arguments.length&&void 0!==e)||e,o={};return function(e){var n=e.callback,i=e.indices,r=Object.keys(i),l=!t||r.every((function(e){var t=i[e];return Array.isArray(t)?0<t.length:0<=t})),s=r.length!==Object.keys(o).length||r.some((function(e){var t=o[e],n=i[e];return Array.isArray(n)?t.join(",")!==n.join(","):t!==n}));o=i,l&&s&&n(i)}}var V,$=!("undefined"==typeof window||!window.document||!window.document.createElement);function K(e){if((!V&&0!==V||e)&&$){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),V=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return V}var Y=function(){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(n=f(this,(e=d(t)).call.apply(e,[this].concat(l)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),r(h(n),"_calculateSizeAndPositionDataOnNextUpdate",!1),r(h(n),"_onSectionRenderedMemoizer",B()),r(h(n),"_onScrollMemoizer",B(!1)),r(h(n),"_invokeOnSectionRenderedHelper",(function(){var e=n.props,t=e.cellLayoutManager,o=e.onSectionRendered;n._onSectionRenderedMemoizer({callback:o,indices:{indices:t.getLastRenderedIndices()}})})),r(h(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),r(h(n),"_updateScrollPositionForScrollToCell",(function(){var e=n.props,t=e.cellLayoutManager,o=e.height,i=e.scrollToAlignment,r=e.scrollToCell,l=e.width,s=n.state,a=s.scrollLeft,c=s.scrollTop;if(0<=r){var d=t.getScrollPositionForCell({align:i,cellIndex:r,height:o,scrollLeft:a,scrollTop:c,width:l});d.scrollLeft===a&&d.scrollTop===c||n._setScrollPosition(d)}})),r(h(n),"_onScroll",(function(e){if(e.target===n._scrollingContainer){n._enablePointerEventsAfterDelay();var t=n.props,o=t.cellLayoutManager,i=t.height,r=t.isScrollingChange,l=t.width,s=n._scrollbarSize,a=o.getTotalSize(),c=a.height,d=a.width,u=Math.max(0,Math.min(d-l+s,e.target.scrollLeft)),h=Math.max(0,Math.min(c-i+s,e.target.scrollTop));if(n.state.scrollLeft!==u||n.state.scrollTop!==h){var f=e.cancelable?"observed":"requested";n.state.isScrolling||r(!0),n.setState({isScrolling:!0,scrollLeft:u,scrollPositionChangeReason:f,scrollTop:h})}n._invokeOnScrollMemoizer({scrollLeft:u,scrollTop:h,totalWidth:d,totalHeight:c})}})),n._scrollbarSize=K(),void 0===n._scrollbarSize?(n._scrollbarSizeMeasured=!1,n._scrollbarSize=0):n._scrollbarSizeMeasured=!0,n}return c(t,e.PureComponent),i(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,o=e.scrollLeft,n=e.scrollToCell,i=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=K(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=n?this._updateScrollPositionForScrollToCell():(0<=o||0<=i)&&this._setScrollPosition({scrollLeft:o,scrollTop:i}),this._invokeOnSectionRenderedHelper();var r=t.getTotalSize(),l=r.height,s=r.width;this._invokeOnScrollMemoizer({scrollLeft:o||0,scrollTop:i||0,totalHeight:l,totalWidth:s})}},{key:"componentDidUpdate",value:function(e,t){var o=this.props,n=o.height,i=o.scrollToAlignment,r=o.scrollToCell,l=o.width,s=this.state,a=s.scrollLeft,c=s.scrollPositionChangeReason,d=s.scrollTop;"requested"===c&&(0<=a&&a!==t.scrollLeft&&a!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=a),0<=d&&d!==t.scrollTop&&d!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=d)),n===e.height&&i===e.scrollToAlignment&&r===e.scrollToCell&&l===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var t=this.props,o=t.autoHeight,n=t.cellCount,i=t.cellLayoutManager,r=t.className,l=t.height,s=t.horizontalOverscanSize,c=t.id,d=t.noContentRenderer,u=t.style,h=t.verticalOverscanSize,f=t.width,p=this.state,m=p.isScrolling,g=p.scrollLeft,v=p.scrollTop;this._lastRenderedCellCount===n&&this._lastRenderedCellLayoutManager===i&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=n,this._lastRenderedCellLayoutManager=i,this._calculateSizeAndPositionDataOnNextUpdate=!1,i.calculateSizeAndPositionData());var _=i.getTotalSize(),S=_.height,y=_.width,C=Math.max(0,g-s),w=Math.max(0,v-h),x=Math.min(y,g+f+s),R=Math.min(S,v+l+h),b=0<l&&0<f?i.cellRenderers({height:R-w,isScrolling:m,width:x-C,x:C,y:w}):[],T={boxSizing:"border-box",direction:"ltr",height:o?"auto":l,position:"relative",WebkitOverflowScrolling:"touch",width:f,willChange:"transform"},z=l<S?this._scrollbarSize:0,I=f<y?this._scrollbarSize:0;return T.overflowX=y+z<=f?"hidden":"auto",T.overflowY=S+I<=l?"hidden":"auto",e.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:q("ReactVirtualized__Collection",r),id:c,onScroll:this._onScroll,role:"grid",style:a({},T,{},u),tabIndex:0},0<n&&e.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:S,maxHeight:S,maxWidth:y,overflow:"hidden",pointerEvents:m?"none":"",width:y}},b),0===n&&d())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,o=e.scrollLeft,n=e.scrollTop,i=e.totalHeight,r=e.totalWidth;this._onScrollMemoizer({callback:function(e){var o=e.scrollLeft,n=e.scrollTop,l=t.props,s=l.height;(0,l.onScroll)({clientHeight:s,clientWidth:l.width,scrollHeight:i,scrollLeft:o,scrollTop:n,scrollWidth:r})},indices:{scrollLeft:o,scrollTop:n}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,o=e.scrollTop,n={scrollPositionChangeReason:"requested"};0<=t&&(n.scrollLeft=t),0<=o&&(n.scrollTop=o),(0<=t&&t!==this.state.scrollLeft||0<=o&&o!==this.state.scrollTop)&&this.setState(n)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:"requested"}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:"requested"}}}]),t}();r(Y,"propTypes",{"aria-label":j.string,autoHeight:j.bool,cellCount:j.number.isRequired,cellLayoutManager:j.object.isRequired,className:j.string,height:j.number.isRequired,id:j.string,horizontalOverscanSize:j.number.isRequired,isScrollingChange:j.func,noContentRenderer:j.func.isRequired,onScroll:j.func.isRequired,onSectionRendered:j.func.isRequired,scrollLeft:j.number,scrollToAlignment:j.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:j.number.isRequired,scrollTop:j.number,style:j.object,verticalOverscanSize:j.number.isRequired,width:j.number.isRequired}),r(Y,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),v(Y);var X=function(){function e(t){var n=t.height,i=t.width,r=t.x,l=t.y;o(this,e),this.height=n,this.width=i,this.x=r,this.y=l,this._indexMap={},this._indices=[]}return i(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),J=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;o(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return i(e,[{key:"getCellIndices",value:function(e){var t=e.height,o=e.width,n=e.x,i=e.y,r={};return this.getSections({height:t,width:o,x:n,y:i}).forEach((function(e){return e.getCellIndices().forEach((function(e){r[e]=e}))})),Object.keys(r).map((function(e){return r[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,o=e.width,n=e.x,i=e.y,r=Math.floor(n/this._sectionSize),l=Math.floor((n+o-1)/this._sectionSize),s=Math.floor(i/this._sectionSize),a=Math.floor((i+t-1)/this._sectionSize),c=[],d=r;d<=l;d++)for(var u=s;u<=a;u++){var h="".concat(d,".").concat(u);this._sections[h]||(this._sections[h]=new X({height:this._sectionSize,width:this._sectionSize,x:d*this._sectionSize,y:u*this._sectionSize})),c.push(this._sections[h])}return c}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,o=e.index;this._cellMetadata[o]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:o})}))}}]),e}();function Z(e){var t=e.align,o=void 0===t?"auto":t,n=e.cellOffset,i=e.cellSize,r=e.containerSize,l=e.currentOffset,s=n,a=s-r+i;switch(o){case"start":return s;case"end":return a;case"center":return s-(r-i)/2;default:return Math.max(a,Math.min(s,l))}}var Q=function(){function t(e,n){var i;return o(this,t),(i=f(this,d(t).call(this,e,n)))._cellMetadata=[],i._lastRenderedCellIndices=[],i._cellCache=[],i._isScrollingChange=i._isScrollingChange.bind(h(i)),i._setCollectionViewRef=i._setCollectionViewRef.bind(h(i)),i}return c(t,e.PureComponent),i(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var t=l({},this.props);return e.createElement(Y,l({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},t))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,o=e.cellSizeAndPositionGetter,n=[],i=new J(e.sectionSize),r=0,l=0,s=0;s<t;s++){var a=o({index:s});if(null==a.height||isNaN(a.height)||null==a.width||isNaN(a.width)||null==a.x||isNaN(a.x)||null==a.y||isNaN(a.y))throw Error("Invalid metadata returned for cell ".concat(s,":\n        x:").concat(a.x,", y:").concat(a.y,", width:").concat(a.width,", height:").concat(a.height));r=Math.max(r,a.y+a.height),l=Math.max(l,a.x+a.width),n[s]=a,i.registerCell({cellMetadatum:a,index:s})}return{cellMetadata:n,height:r,sectionManager:i,width:l}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,o=e.cellIndex,n=e.height,i=e.scrollLeft,r=e.scrollTop,l=e.width,s=this.props.cellCount;if(0<=o&&o<s){var a=this._cellMetadata[o];i=Z({align:t,cellOffset:a.x,cellSize:a.width,containerSize:l,currentOffset:i,targetIndex:o}),r=Z({align:t,cellOffset:a.y,cellSize:a.height,containerSize:n,currentOffset:r,targetIndex:o})}return{scrollLeft:i,scrollTop:r}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,o=e.height,n=e.isScrolling,i=e.width,r=e.x,l=e.y,s=this.props,a=s.cellGroupRenderer,c=s.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:o,width:i,x:r,y:l}),a({cellCache:this._cellCache,cellRenderer:c,cellSizeAndPositionGetter:function(e){var o=e.index;return t._sectionManager.getCellMetadata({index:o})},indices:this._lastRenderedCellIndices,isScrolling:n})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}();r(Q,"propTypes",{"aria-label":j.string,cellCount:j.number.isRequired,cellGroupRenderer:j.func.isRequired,cellRenderer:j.func.isRequired,cellSizeAndPositionGetter:j.func.isRequired,sectionSize:j.number}),r(Q,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,o=e.cellRenderer,n=e.cellSizeAndPositionGetter,i=e.indices,r=e.isScrolling;return i.map((function(e){var i=n({index:e}),l={index:e,isScrolling:r,key:e,style:{height:i.height,left:i.x,position:"absolute",top:i.y,width:i.width}};return r?(e in t||(t[e]=o(l)),t[e]):o(l)})).filter((function(e){return!!e}))}});var ee=function(){function t(e,n){var i;return o(this,t),(i=f(this,d(t).call(this,e,n)))._registerChild=i._registerChild.bind(h(i)),i}return c(t,e.PureComponent),i(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,o=t.columnMaxWidth,n=t.columnMinWidth,i=t.columnCount,r=t.width;o===e.columnMaxWidth&&n===e.columnMinWidth&&i===e.columnCount&&r===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.columnMaxWidth,n=e.columnMinWidth,i=e.columnCount,r=e.width,l=n||1,s=o?Math.min(o,r):r,a=r/i;return a=Math.max(l,a),a=Math.min(s,a),a=Math.floor(a),t({adjustedWidth:Math.min(r,a*i),columnWidth:a,getColumnWidth:function(){return a},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!=typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}();function te(e){var t=e.cellCount,o=e.cellSize,n=e.computeMetadataCallback,i=e.computeMetadataCallbackProps,r=e.nextCellsCount,l=e.nextCellSize,s=e.nextScrollToIndex,a=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===r&&("number"!=typeof o&&"number"!=typeof l||o===l)||(n(i),0<=a&&a===s&&c())}r(ee,"propTypes",{children:j.func.isRequired,columnMaxWidth:j.number,columnMinWidth:j.number,columnCount:j.number.isRequired,width:j.number.isRequired});var oe,ne=function(){function e(t){var n=t.cellCount,i=t.cellSizeGetter,l=t.estimatedCellSize;o(this,e),r(this,"_cellSizeAndPositionData",{}),r(this,"_lastMeasuredIndex",-1),r(this,"_lastBatchedIndex",-1),r(this,"_cellCount",void 0),r(this,"_cellSizeGetter",void 0),r(this,"_estimatedCellSize",void 0),this._cellSizeGetter=i,this._cellCount=n,this._estimatedCellSize=l}return i(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,o=e.estimatedCellSize,n=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=o,this._cellSizeGetter=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),o=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var i=this._cellSizeGetter({index:n});if(void 0===i||isNaN(i))throw Error("Invalid size returned for cell ".concat(n," of value ").concat(i));null===i?(this._cellSizeAndPositionData[n]={offset:o,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[n]={offset:o,size:i},o+=i,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,o=void 0===t?"auto":t,n=e.containerSize,i=e.currentOffset,r=e.targetIndex;if(n<=0)return 0;var l,s=this.getSizeAndPositionOfCell(r),a=s.offset,c=a-n+s.size;switch(o){case"start":l=a;break;case"end":l=c;break;case"center":l=a-(n-s.size)/2;break;default:l=Math.max(c,Math.min(a,i))}var d=this.getTotalSize();return Math.max(0,Math.min(d-n,l))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,o=e.offset;if(0===this.getTotalSize())return{};var n=o+t,i=this._findNearestCell(o),r=this.getSizeAndPositionOfCell(i);o=r.offset+r.size;for(var l=i;o<n&&l<this._cellCount-1;)l++,o+=this.getSizeAndPositionOfCell(l).size;return{start:i,stop:l}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,o){for(;t<=e;){var n=t+Math.floor((e-t)/2),i=this.getSizeAndPositionOfCell(n).offset;if(i===o)return n;i<o?t=n+1:o<i&&(e=n-1)}return 0<t?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var o=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=o,o*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),o=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(o,0,e):this._exponentialSearch(o,e)}}]),e}(),ie=function(){function e(t){var n=t.maxScrollSize,i=void 0===n?"undefined"!=typeof window&&window.chrome?16777100:15e5:n,l=u(t,["maxScrollSize"]);o(this,e),r(this,"_cellSizeAndPositionManager",void 0),r(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new ne(l),this._maxScrollSize=i}return i(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize(),r=this._getOffsetPercentage({containerSize:t,offset:o,totalSize:i});return Math.round(r*(i-n))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,o=void 0===t?"auto":t,n=e.containerSize,i=e.currentOffset,r=e.targetIndex;i=this._safeOffsetToOffset({containerSize:n,offset:i});var l=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:n,currentOffset:i,targetIndex:r});return this._offsetToSafeOffset({containerSize:n,offset:l})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,o=e.offset;return o=this._safeOffsetToOffset({containerSize:t,offset:o}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:o})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,o=e.offset,n=e.totalSize;return n<=t?0:o/(n-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(n===i)return o;var r=this._getOffsetPercentage({containerSize:t,offset:o,totalSize:n});return Math.round(r*(i-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(n===i)return o;var r=this._getOffsetPercentage({containerSize:t,offset:o,totalSize:i});return Math.round(r*(n-t))}}]),e}();function re(e){var t=e.cellCount,o=e.overscanCellsCount,n=e.scrollDirection,i=e.startIndex,r=e.stopIndex;return 1===n?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(t-1,r+o)}:{overscanStartIndex:Math.max(0,i-o),overscanStopIndex:Math.min(t-1,r)}}function le(e){var t=e.cellSize,o=e.cellSizeAndPositionManager,n=e.previousCellsCount,i=e.previousCellSize,r=e.previousScrollToAlignment,l=e.previousScrollToIndex,s=e.previousSize,a=e.scrollOffset,c=e.scrollToAlignment,d=e.scrollToIndex,u=e.size,h=e.sizeJustIncreasedFromZero,f=e.updateScrollIndexCallback,p=o.getCellCount(),m=0<=d&&d<p;m&&(u!==s||h||!i||"number"==typeof t&&t!==i||c!==r||d!==l)?f(d):!m&&0<p&&(u<s||p<n)&&a>o.getTotalSize()-u&&f(p-1)}function se(e){for(var t=e.cellCache,o=e.cellRenderer,n=e.columnSizeAndPositionManager,i=e.columnStartIndex,r=e.columnStopIndex,l=e.deferredMeasurementCache,s=e.horizontalOffsetAdjustment,a=e.isScrolling,c=e.isScrollingOptOut,d=e.parent,u=e.rowSizeAndPositionManager,h=e.rowStartIndex,f=e.rowStopIndex,p=e.styleCache,m=e.verticalOffsetAdjustment,g=e.visibleColumnIndices,v=e.visibleRowIndices,_=[],S=n.areOffsetsAdjusted()||u.areOffsetsAdjusted(),y=!a&&!S,C=h;C<=f;C++)for(var w=u.getSizeAndPositionOfCell(C),x=i;x<=r;x++){var R=n.getSizeAndPositionOfCell(x),b=x>=g.start&&x<=g.stop&&C>=v.start&&C<=v.stop,T="".concat(C,"-").concat(x),z=void 0;y&&p[T]?z=p[T]:l&&!l.has(C,x)?z={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(z={height:w.size,left:R.offset+s,position:"absolute",top:w.offset+m,width:R.size},p[T]=z);var I,M={columnIndex:x,isScrolling:a,isVisible:b,key:T,parent:d,rowIndex:C,style:z};null!=(I=!c&&!a||s||m?o(M):(t[T]||(t[T]=o(M)),t[T]))&&!1!==I&&(ae(d,I),_.push(I))}return _}function ae(e,t){t&&(t.type&&t.type.__internalCellMeasurerFlag&&(t=t.props.children),t&&t.props&&void 0===t.props.style&&!0!==e.__warnedAboutMissingStyle&&(e.__warnedAboutMissingStyle=!0,console.warn("Rendered cell should include style property for positioning.")))}var ce=(oe="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||oe.webkitRequestAnimationFrame||oe.mozRequestAnimationFrame||oe.oRequestAnimationFrame||oe.msRequestAnimationFrame||function(e){return oe.setTimeout(e,1e3/60)},de=oe.cancelAnimationFrame||oe.webkitCancelAnimationFrame||oe.mozCancelAnimationFrame||oe.oCancelAnimationFrame||oe.msCancelAnimationFrame||function(e){oe.clearTimeout(e)},ue=ce,he=de,fe=function(e){return he(e.id)},pe=function(e,t){var o;Promise.resolve().then((function(){o=Date.now()}));var n={id:ue((function i(){Date.now()-o>=t?e.call():n.id=ue(i)}))};return n},me=function(){function t(e){var n;o(this,t),r(h(n=f(this,d(t).call(this,e))),"_onGridRenderedMemoizer",B()),r(h(n),"_onScrollMemoizer",B(!1)),r(h(n),"_deferredInvalidateColumnIndex",null),r(h(n),"_deferredInvalidateRowIndex",null),r(h(n),"_recomputeScrollLeftFlag",!1),r(h(n),"_recomputeScrollTopFlag",!1),r(h(n),"_horizontalScrollBarSize",0),r(h(n),"_verticalScrollBarSize",0),r(h(n),"_scrollbarPresenceChanged",!1),r(h(n),"_scrollingContainer",void 0),r(h(n),"_childrenToDisplay",void 0),r(h(n),"_columnStartIndex",void 0),r(h(n),"_columnStopIndex",void 0),r(h(n),"_rowStartIndex",void 0),r(h(n),"_rowStopIndex",void 0),r(h(n),"_renderedColumnStartIndex",0),r(h(n),"_renderedColumnStopIndex",0),r(h(n),"_renderedRowStartIndex",0),r(h(n),"_renderedRowStopIndex",0),r(h(n),"_initialScrollTop",void 0),r(h(n),"_initialScrollLeft",void 0),r(h(n),"_disablePointerEventsTimeoutId",void 0),r(h(n),"_styleCache",{}),r(h(n),"_cellCache",{}),r(h(n),"_debounceScrollEndedCallback",(function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})})),r(h(n),"_invokeOnGridRenderedHelper",(function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})})),r(h(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),r(h(n),"_onScroll",(function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)}));var i=new ie({cellCount:e.columnCount,cellSizeGetter:function(o){return t._wrapSizeGetter(e.columnWidth)(o)},estimatedCellSize:t._getEstimatedColumnSize(e)}),l=new ie({cellCount:e.rowCount,cellSizeGetter:function(o){return t._wrapSizeGetter(e.rowHeight)(o)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:i,rowSizeAndPositionManager:l,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<e.scrollToRow&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),0<e.scrollToColumn&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return c(t,e.PureComponent),i(t,[{key:"getOffsetForCell",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.alignment,n=void 0===o?this.props.scrollToAlignment:o,i=t.columnIndex,r=void 0===i?this.props.scrollToColumn:i,l=t.rowIndex,s=void 0===l?this.props.scrollToRow:l,c=a({},this.props,{scrollToAlignment:n,scrollToColumn:r,scrollToRow:s});return{scrollLeft:this._getCalculatedScrollLeft(c),scrollTop:this._getCalculatedScrollTop(c)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,o=void 0===t?0:t,n=e.scrollTop,i=void 0===n?0:n;if(!(i<0)){this._debounceScrollEnded();var r=this.props,l=r.autoHeight,s=r.autoWidth,a=r.height,c=r.width,d=this.state.instanceProps,u=d.scrollbarSize,h=d.rowSizeAndPositionManager.getTotalSize(),f=d.columnSizeAndPositionManager.getTotalSize(),p=Math.min(Math.max(0,f-c+u),o),m=Math.min(Math.max(0,h-a+u),i);if(this.state.scrollLeft!==p||this.state.scrollTop!==m){var g={isScrolling:!0,scrollDirectionHorizontal:p!==this.state.scrollLeft?p>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:m!==this.state.scrollTop?m>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};l||(g.scrollTop=m),s||(g.scrollLeft=p),g.needToResetStyleCache=!1,this.setState(g)}this._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:m,totalColumnsWidth:f,totalRowsHeight:h})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,o=e.rowCount,n=this.state.instanceProps;n.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),n.rowSizeAndPositionManager.getSizeAndPositionOfCell(o-1)}},{key:"recomputeGridSize",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.columnIndex,n=void 0===o?0:o,i=t.rowIndex,r=void 0===i?0:i,l=this.props,s=l.scrollToColumn,a=l.scrollToRow,c=this.state.instanceProps;c.columnSizeAndPositionManager.resetCell(n),c.rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=0<=s&&(1===this.state.scrollDirectionHorizontal?n<=s:s<=n),this._recomputeScrollTopFlag=0<=a&&(1===this.state.scrollDirectionVertical?r<=a:a<=r),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,o=e.rowIndex,n=this.props.columnCount,i=this.props;1<n&&void 0!==t&&this._updateScrollLeftForScrollToColumn(a({},i,{scrollToColumn:t})),void 0!==o&&this._updateScrollTopForScrollToRow(a({},i,{scrollToRow:o}))}},{key:"componentDidMount",value:function(){var e=this.props,o=e.getScrollbarSize,n=e.height,i=e.scrollLeft,r=e.scrollToColumn,l=e.scrollTop,s=e.scrollToRow,c=e.width,d=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),d.scrollbarSizeMeasured||this.setState((function(e){var t=a({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=o(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof i&&0<=i||"number"==typeof l&&0<=l){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:i,scrollTop:l});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var h=0<n&&0<c;0<=r&&h&&this._updateScrollLeftForScrollToColumn(),0<=s&&h&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:i||0,scrollTop:l||0,totalColumnsWidth:d.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:d.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var o=this,n=this.props,i=n.autoHeight,r=n.autoWidth,l=n.columnCount,s=n.height,a=n.rowCount,c=n.scrollToAlignment,d=n.scrollToColumn,u=n.scrollToRow,h=n.width,f=this.state,p=f.scrollLeft,m=f.scrollPositionChangeReason,g=f.scrollTop,v=f.instanceProps;this._handleInvalidatedGridSize();var _=0<l&&0===e.columnCount||0<a&&0===e.rowCount;"requested"===m&&(!r&&0<=p&&(p!==this._scrollingContainer.scrollLeft||_)&&(this._scrollingContainer.scrollLeft=p),!i&&0<=g&&(g!==this._scrollingContainer.scrollTop||_)&&(this._scrollingContainer.scrollTop=g));var S=(0===e.width||0===e.height)&&0<s&&0<h;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):le({cellSizeAndPositionManager:v.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:p,scrollToAlignment:c,scrollToIndex:d,size:h,sizeJustIncreasedFromZero:S,updateScrollIndexCallback:function(){return o._updateScrollLeftForScrollToColumn(o.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):le({cellSizeAndPositionManager:v.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:g,scrollToAlignment:c,scrollToIndex:u,size:s,sizeJustIncreasedFromZero:S,updateScrollIndexCallback:function(){return o._updateScrollTopForScrollToRow(o.props)}}),this._invokeOnGridRenderedHelper(),p!==t.scrollLeft||g!==t.scrollTop){var y=v.rowSizeAndPositionManager.getTotalSize(),C=v.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:g,totalColumnsWidth:C,totalRowsHeight:y})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&fe(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var t=this.props,o=t.autoContainerWidth,n=t.autoHeight,i=t.autoWidth,r=t.className,s=t.containerProps,c=t.containerRole,d=t.containerStyle,u=t.height,h=t.id,f=t.noContentRenderer,p=t.role,m=t.style,g=t.tabIndex,v=t.width,_=this.state,S=_.instanceProps,y=_.needToResetStyleCache,C=this._isScrolling(),w={boxSizing:"border-box",direction:"ltr",height:n?"auto":u,position:"relative",width:i?"auto":v,WebkitOverflowScrolling:"touch",willChange:"transform"};y&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var x=S.columnSizeAndPositionManager.getTotalSize(),R=S.rowSizeAndPositionManager.getTotalSize(),b=u<R?S.scrollbarSize:0,T=v<x?S.scrollbarSize:0;T===this._horizontalScrollBarSize&&b===this._verticalScrollBarSize||(this._horizontalScrollBarSize=T,this._verticalScrollBarSize=b,this._scrollbarPresenceChanged=!0),w.overflowX=x+b<=v?"hidden":"auto",w.overflowY=R+T<=u?"hidden":"auto";var z=this._childrenToDisplay,I=0===z.length&&0<u&&0<v;return e.createElement("div",l({ref:this._setScrollingContainerRef},s,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:q("ReactVirtualized__Grid",r),id:h,onScroll:this._onScroll,role:p,style:a({},w,{},m),tabIndex:g}),0<z.length&&e.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:c,style:a({width:o?"auto":x,height:R,maxWidth:x,maxHeight:R,overflow:"hidden",pointerEvents:C?"none":"",position:"relative"},d)},z),I&&f())}},{key:"_calculateChildrenToRender",value:function(e,t){var o=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state,i=o.cellRenderer,r=o.cellRangeRenderer,l=o.columnCount,s=o.deferredMeasurementCache,a=o.height,c=o.overscanColumnCount,d=o.overscanIndicesGetter,u=o.overscanRowCount,h=o.rowCount,f=o.width,p=o.isScrollingOptOut,m=n.scrollDirectionHorizontal,g=n.scrollDirectionVertical,v=n.instanceProps,_=0<this._initialScrollTop?this._initialScrollTop:n.scrollTop,S=0<this._initialScrollLeft?this._initialScrollLeft:n.scrollLeft,y=this._isScrolling(o,n);if(this._childrenToDisplay=[],0<a&&0<f){var C=v.columnSizeAndPositionManager.getVisibleCellRange({containerSize:f,offset:S}),w=v.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:_}),x=v.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:f,offset:S}),R=v.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:_});this._renderedColumnStartIndex=C.start,this._renderedColumnStopIndex=C.stop,this._renderedRowStartIndex=w.start,this._renderedRowStopIndex=w.stop;var b=d({direction:"horizontal",cellCount:l,overscanCellsCount:c,scrollDirection:m,startIndex:"number"==typeof C.start?C.start:0,stopIndex:"number"==typeof C.stop?C.stop:-1}),T=d({direction:"vertical",cellCount:h,overscanCellsCount:u,scrollDirection:g,startIndex:"number"==typeof w.start?w.start:0,stopIndex:"number"==typeof w.stop?w.stop:-1}),z=b.overscanStartIndex,I=b.overscanStopIndex,M=T.overscanStartIndex,k=T.overscanStopIndex;if(s){if(!s.hasFixedHeight())for(var P=M;P<=k;P++)if(!s.has(P,0)){z=0,I=l-1;break}if(!s.hasFixedWidth())for(var O=z;O<=I;O++)if(!s.has(0,O)){M=0,k=h-1;break}}this._childrenToDisplay=r({cellCache:this._cellCache,cellRenderer:i,columnSizeAndPositionManager:v.columnSizeAndPositionManager,columnStartIndex:z,columnStopIndex:I,deferredMeasurementCache:s,horizontalOffsetAdjustment:x,isScrolling:y,isScrollingOptOut:p,parent:this,rowSizeAndPositionManager:v.rowSizeAndPositionManager,rowStartIndex:M,rowStopIndex:k,scrollLeft:S,scrollTop:_,styleCache:this._styleCache,verticalOffsetAdjustment:R,visibleColumnIndices:C,visibleRowIndices:w}),this._columnStartIndex=z,this._columnStopIndex=I,this._rowStartIndex=M,this._rowStopIndex=k}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&fe(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=pe(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,o=e.scrollLeft,n=e.scrollTop,i=e.totalColumnsWidth,r=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var o=e.scrollLeft,n=e.scrollTop,l=t.props,s=l.height;(0,l.onScroll)({clientHeight:s,clientWidth:l.width,scrollHeight:r,scrollLeft:o,scrollTop:n,scrollWidth:i})},indices:{scrollLeft:o,scrollTop:n}})}},{key:"_isScrolling",value:function(e,t){var o=0<arguments.length&&void 0!==e?e:this.props,n=1<arguments.length&&void 0!==t?t:this.state;return Object.hasOwnProperty.call(o,"isScrolling")?Boolean(o.isScrolling):Boolean(n.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(e){var o=e.scrollLeft,n=e.scrollTop,i=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:o,scrollTop:n});i&&(i.needToResetStyleCache=!1,this.setState(i))}},{key:"_getCalculatedScrollLeft",value:function(e,o){var n=0<arguments.length&&void 0!==e?e:this.props,i=1<arguments.length&&void 0!==o?o:this.state;return t._getCalculatedScrollLeft(n,i)}},{key:"_updateScrollLeftForScrollToColumn",value:function(e,o){var n=0<arguments.length&&void 0!==e?e:this.props,i=1<arguments.length&&void 0!==o?o:this.state,r=t._getScrollLeftForScrollToColumnStateUpdate(n,i);r&&(r.needToResetStyleCache=!1,this.setState(r))}},{key:"_getCalculatedScrollTop",value:function(e,o){var n=0<arguments.length&&void 0!==e?e:this.props,i=1<arguments.length&&void 0!==o?o:this.state;return t._getCalculatedScrollTop(n,i)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,o=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var n=this._rowStartIndex;n<=this._rowStopIndex;n++)for(var i=this._columnStartIndex;i<=this._columnStopIndex;i++){var r="".concat(n,"-").concat(i);this._styleCache[r]=e[r],o&&(this._cellCache[r]=t[r])}}},{key:"_updateScrollTopForScrollToRow",value:function(e,o){var n=0<arguments.length&&void 0!==e?e:this.props,i=1<arguments.length&&void 0!==o?o:this.state,r=t._getScrollTopForScrollToRowStateUpdate(n,i);r&&(r.needToResetStyleCache=!1,this.setState(r))}}],[{key:"getDerivedStateFromProps",value:function(e,o){var n={};0===e.columnCount&&0!==o.scrollLeft||0===e.rowCount&&0!==o.scrollTop?(n.scrollLeft=0,n.scrollTop=0):(e.scrollLeft!==o.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==o.scrollTop&&e.scrollToRow<0)&&Object.assign(n,t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var i,r,l=o.instanceProps;return n.needToResetStyleCache=!1,e.columnWidth===l.prevColumnWidth&&e.rowHeight===l.prevRowHeight||(n.needToResetStyleCache=!0),l.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),l.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==l.prevColumnCount&&0!==l.prevRowCount||(l.prevColumnCount=0,l.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===l.prevIsScrolling&&Object.assign(n,{isScrolling:!1}),te({cellCount:l.prevColumnCount,cellSize:"number"==typeof l.prevColumnWidth?l.prevColumnWidth:null,computeMetadataCallback:function(){return l.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:l.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){i=t._getScrollLeftForScrollToColumnStateUpdate(e,o)}}),te({cellCount:l.prevRowCount,cellSize:"number"==typeof l.prevRowHeight?l.prevRowHeight:null,computeMetadataCallback:function(){return l.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:l.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollTopForScrollToRowStateUpdate(e,o)}}),l.prevColumnCount=e.columnCount,l.prevColumnWidth=e.columnWidth,l.prevIsScrolling=!0===e.isScrolling,l.prevRowCount=e.rowCount,l.prevRowHeight=e.rowHeight,l.prevScrollToColumn=e.scrollToColumn,l.prevScrollToRow=e.scrollToRow,l.scrollbarSize=e.getScrollbarSize(),void 0===l.scrollbarSize?(l.scrollbarSizeMeasured=!1,l.scrollbarSize=0):l.scrollbarSizeMeasured=!0,n.instanceProps=l,a({},n,{},i,{},r)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,o=e.scrollLeft,n=e.scrollTop,i={scrollPositionChangeReason:"requested"};return"number"==typeof o&&0<=o&&(i.scrollDirectionHorizontal=o>t.scrollLeft?1:-1,i.scrollLeft=o),"number"==typeof n&&0<=n&&(i.scrollDirectionVertical=n>t.scrollTop?1:-1,i.scrollTop=n),"number"==typeof o&&0<=o&&o!==t.scrollLeft||"number"==typeof n&&0<=n&&n!==t.scrollTop?i:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var o=e.columnCount,n=e.height,i=e.scrollToAlignment,r=e.scrollToColumn,l=e.width,s=t.scrollLeft,a=t.instanceProps;if(0<o){var c=o-1,d=r<0?c:Math.min(c,r),u=a.rowSizeAndPositionManager.getTotalSize(),h=a.scrollbarSizeMeasured&&n<u?a.scrollbarSize:0;return a.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:l-h,currentOffset:s,targetIndex:d})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,o){var n=o.scrollLeft,i=t._getCalculatedScrollLeft(e,o);return"number"==typeof i&&0<=i&&n!==i?t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:i,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var o=e.height,n=e.rowCount,i=e.scrollToAlignment,r=e.scrollToRow,l=e.width,s=t.scrollTop,a=t.instanceProps;if(0<n){var c=n-1,d=r<0?c:Math.min(c,r),u=a.columnSizeAndPositionManager.getTotalSize(),h=a.scrollbarSizeMeasured&&l<u?a.scrollbarSize:0;return a.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:o-h,currentOffset:s,targetIndex:d})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,o){var n=o.scrollTop,i=t._getCalculatedScrollTop(e,o);return"number"==typeof i&&0<=i&&n!==i?t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:-1,scrollTop:i}):{}}}]),t}();function ge(e){var t=e.cellCount,o=e.overscanCellsCount,n=e.scrollDirection,i=e.startIndex,r=e.stopIndex;return o=Math.max(1,o),1===n?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(t-1,r+o)}:{overscanStartIndex:Math.max(0,i-o),overscanStopIndex:Math.min(t-1,r+1)}}r(me,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:se,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:K,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:re,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),v(me);var ve=function(){function t(e,n){var i;return o(this,t),(i=f(this,d(t).call(this,e,n)))._loadMoreRowsMemoizer=B(),i._onRowsRendered=i._onRowsRendered.bind(h(i)),i._registerChild=i._registerChild.bind(h(i)),i}return c(t,e.PureComponent),i(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=B(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,o=this.props.loadMoreRows;e.forEach((function(e){var n=o(e);n&&n.then((function(){var o;!((o={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex}).lastRenderedStopIndex<o.startIndex||o.stopIndex<o.lastRenderedStartIndex)&&t._registeredChild&&function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;o?o.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,o=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=o,this._doStuff(t,o)}},{key:"_doStuff",value:function(e,t){var o,n,i=this,r=this.props,l=r.isRowLoaded,s=r.minimumBatchSize,a=r.rowCount,c=r.threshold,d=function(e){for(var t=e.isRowLoaded,o=e.minimumBatchSize,n=e.rowCount,i=e.stopIndex,r=[],l=null,s=null,a=e.startIndex;a<=i;a++)t({index:a})?null!==s&&(r.push({startIndex:l,stopIndex:s}),l=s=null):(s=a,null===l&&(l=a));if(null!==s){for(var c=Math.min(Math.max(s,l+o-1),n-1),d=s+1;d<=c&&!t({index:d});d++)s=d;r.push({startIndex:l,stopIndex:s})}if(r.length)for(var u=r[0];u.stopIndex-u.startIndex+1<o&&0<u.startIndex;){var h=u.startIndex-1;if(t({index:h}))break;u.startIndex=h}return r}({isRowLoaded:l,minimumBatchSize:s,rowCount:a,startIndex:Math.max(0,e-c),stopIndex:Math.min(a-1,t+c)}),u=(o=[]).concat.apply(o,function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(n=d.map((function(e){return[e.startIndex,e.stopIndex]})))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}());this._loadMoreRowsMemoizer({callback:function(){i._loadUnloadedRanges(d)},indices:{squashedUnloadedRanges:u}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}();r(ve,"propTypes",{children:j.func.isRequired,isRowLoaded:j.func.isRequired,loadMoreRows:j.func.isRequired,minimumBatchSize:j.number.isRequired,rowCount:j.number.isRequired,threshold:j.number.isRequired}),r(ve,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var _e=function(){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(n=f(this,(e=d(t)).call.apply(e,[this].concat(l)))),"Grid",void 0),r(h(n),"_cellRenderer",(function(e){var t=e.parent,o=e.rowIndex,i=e.style,r=e.isScrolling,l=e.isVisible,s=e.key,a=n.props.rowRenderer,c=Object.getOwnPropertyDescriptor(i,"width");return c&&c.writable&&(i.width="100%"),a({index:o,style:i,isScrolling:r,isVisible:l,key:s,parent:t})})),r(h(n),"_setRef",(function(e){n.Grid=e})),r(h(n),"_onScroll",(function(e){var t=e.clientHeight,o=e.scrollHeight,i=e.scrollTop;(0,n.props.onScroll)({clientHeight:t,scrollHeight:o,scrollTop:i})})),r(h(n),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,o=e.rowOverscanStopIndex,i=e.rowStartIndex,r=e.rowStopIndex;(0,n.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:o,startIndex:i,stopIndex:r})})),n}return c(t,e.PureComponent),i(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,o=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:o,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.columnIndex,n=void 0===o?0:o,i=t.rowIndex,r=void 0===i?0:i;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:t,columnIndex:0})}},{key:"scrollToPosition",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:t})}},{key:"scrollToRow",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:t})}},{key:"render",value:function(){var t=this.props,o=t.className,n=t.noRowsRenderer,i=t.scrollToIndex,r=t.width,s=q("ReactVirtualized__List",o);return e.createElement(me,l({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:s,columnWidth:r,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:i}))}}]),t}();r(_e,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:ge,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Se=function(e,t,o,n,i){return"function"==typeof o?function(e,t,o,n,i){for(var r=o+1;t<=o;){var l=t+o>>>1;0<=i(e[l],n)?o=(r=l)-1:t=1+l}return r}(e,void 0===n?0:0|n,void 0===i?e.length-1:0|i,t,o):function(e,t,o,n){for(var i=o+1;t<=o;){var r=t+o>>>1;n<=e[r]?o=(i=r)-1:t=1+r}return i}(e,void 0===o?0:0|o,void 0===n?e.length-1:0|n,t)};function ye(e,t,o,n,i){this.mid=e,this.left=t,this.right=o,this.leftPoints=n,this.rightPoints=i,this.count=(t?t.count:0)+(o?o.count:0)+n.length}var Ce=ye.prototype;function we(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function xe(e,t){var o=Oe(t);e.mid=o.mid,e.left=o.left,e.right=o.right,e.leftPoints=o.leftPoints,e.rightPoints=o.rightPoints,e.count=o.count}function Re(e,t){var o=e.intervals([]);o.push(t),xe(e,o)}function be(e,t){var o=e.intervals([]),n=o.indexOf(t);return n<0?0:(o.splice(n,1),xe(e,o),1)}function Te(e,t,o){for(var n=0;n<e.length&&e[n][0]<=t;++n){var i=o(e[n]);if(i)return i}}function ze(e,t,o){for(var n=e.length-1;0<=n&&e[n][1]>=t;--n){var i=o(e[n]);if(i)return i}}function Ie(e,t){for(var o=0;o<e.length;++o){var n=t(e[o]);if(n)return n}}function Me(e,t){return e-t}function ke(e,t){return e[0]-t[0]||e[1]-t[1]}function Pe(e,t){return e[1]-t[1]||e[0]-t[0]}function Oe(e){if(0===e.length)return null;for(var t=[],o=0;o<e.length;++o)t.push(e[o][0],e[o][1]);t.sort(Me);var n=t[t.length>>1],i=[],r=[],l=[];for(o=0;o<e.length;++o){var s=e[o];s[1]<n?i.push(s):n<s[0]?r.push(s):l.push(s)}var a=l,c=l.slice();return a.sort(ke),c.sort(Pe),new ye(n,Oe(i),Oe(r),a,c)}function Le(e){this.root=e}Ce.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},Ce.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+t)?Re(this,e):this.left.insert(e):this.left=Oe([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+t)?Re(this,e):this.right.insert(e):this.right=Oe([e]);else{var o=Se(this.leftPoints,e,ke),n=Se(this.rightPoints,e,Pe);this.leftPoints.splice(o,0,e),this.rightPoints.splice(n,0,e)}},Ce.remove=function(e){var t,o=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?3*(o-1)<4*(this.right?this.right.count:0)?be(this,e):2===(t=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===t&&(this.count-=1),t):0;if(e[0]>this.mid)return this.right?3*(o-1)<4*(this.left?this.left.count:0)?be(this,e):2===(t=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===t&&(this.count-=1),t):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,i=this.left;i.right;)i=(n=i).right;if(n===this)i.right=this.right;else{var r=this.left;t=this.right,n.count-=i.count,n.right=i.left,i.left=r,i.right=t}we(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?we(this,this.left):we(this,this.right);return 1}for(r=Se(this.leftPoints,e,ke);r<this.leftPoints.length&&this.leftPoints[r][0]===e[0];++r)if(this.leftPoints[r]===e)for(this.count-=1,this.leftPoints.splice(r,1),t=Se(this.rightPoints,e,Pe);t<this.rightPoints.length&&this.rightPoints[t][1]===e[1];++t)if(this.rightPoints[t]===e)return this.rightPoints.splice(t,1),1;return 0},Ce.queryPoint=function(e,t){return e<this.mid?this.left&&(o=this.left.queryPoint(e,t))?o:Te(this.leftPoints,e,t):e>this.mid?this.right&&(o=this.right.queryPoint(e,t))?o:ze(this.rightPoints,e,t):Ie(this.leftPoints,t);var o},Ce.queryInterval=function(e,t,o){var n;return e<this.mid&&this.left&&(n=this.left.queryInterval(e,t,o))||t>this.mid&&this.right&&(n=this.right.queryInterval(e,t,o))?n:t<this.mid?Te(this.leftPoints,t,o):e>this.mid?ze(this.rightPoints,e,o):Ie(this.leftPoints,o)};var Ge=Le.prototype;Ge.insert=function(e){this.root?this.root.insert(e):this.root=new ye(e[0],null,null,[e],[e])},Ge.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},Ge.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},Ge.queryInterval=function(e,t,o){if(e<=t&&this.root)return this.root.queryInterval(e,t,o)},Object.defineProperty(Ge,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Ge,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var Ae=function(){function e(){o(this,e),r(this,"_columnSizeMap",{}),r(this,"_intervalTree",new Le(null)),r(this,"_leftMap",{})}return i(e,[{key:"estimateTotalHeight",value:function(e,t,o){var n=e-this.count;return this.tallestColumnSize+Math.ceil(n/t)*o}},{key:"range",value:function(e,t,o){var n=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t,i,r=(i=3,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var o=[],n=!0,i=!1,r=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done)&&(o.push(l.value),!t||o.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return o}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),l=r[0],s=(r[1],r[2]);return o(s,n._leftMap[s],l)}))}},{key:"setPosition",value:function(e,t,o,n){this._intervalTree.insert([o,o+n,e]),this._leftMap[e]=t;var i=this._columnSizeMap,r=i[t];i[t]=void 0===r?o+n:Math.max(r,o+n)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var o in e){var n=e[o];t=0===t?n:Math.min(t,n)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var o in e){var n=e[o];t=Math.max(t,n)}return t}}]),e}(),We=function(){function t(){var e,n;o(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(n=f(this,(e=d(t)).call.apply(e,[this].concat(l)))),"state",{isScrolling:!1,scrollTop:0}),r(h(n),"_debounceResetIsScrollingId",void 0),r(h(n),"_invalidateOnUpdateStartIndex",null),r(h(n),"_invalidateOnUpdateStopIndex",null),r(h(n),"_positionCache",new Ae),r(h(n),"_startIndex",null),r(h(n),"_startIndexMemoized",null),r(h(n),"_stopIndex",null),r(h(n),"_stopIndexMemoized",null),r(h(n),"_debounceResetIsScrollingCallback",(function(){n.setState({isScrolling:!1})})),r(h(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),r(h(n),"_onScroll",(function(e){var t=n.props.height,o=e.currentTarget.scrollTop,i=Math.min(Math.max(0,n._getEstimatedTotalHeight()-t),o);o===i&&(n._debounceResetIsScrolling(),n.state.scrollTop!==i&&n.setState({isScrolling:!0,scrollTop:i}))})),n}return c(t,e.PureComponent),i(t,[{key:"clearCellPositions",value:function(){this._positionCache=new Ae,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new Ae,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&fe(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var t,o=this,n=this.props,i=n.autoHeight,l=n.cellCount,s=n.cellMeasurerCache,c=n.cellRenderer,d=n.className,u=n.height,h=n.id,f=n.keyMapper,p=n.overscanByPixels,m=n.role,g=n.style,v=n.tabIndex,_=n.width,S=n.rowDirection,y=this.state,C=y.isScrolling,w=y.scrollTop,x=[],R=this._getEstimatedTotalHeight(),b=this._positionCache.shortestColumnSize,T=this._positionCache.count,z=0;if(this._positionCache.range(Math.max(0,w-p),u+2*p,(function(e,n,i){var l;t=void 0===t?z=e:(z=Math.min(z,e),Math.max(t,e)),x.push(c({index:e,isScrolling:C,key:f(e),parent:o,style:(l={height:s.getHeight(e)},r(l,"ltr"===S?"left":"right",n),r(l,"position","absolute"),r(l,"top",i),r(l,"width",s.getWidth(e)),l)}))})),b<w+u+p&&T<l)for(var I=Math.min(l-T,Math.ceil((w+u+p-b)/s.defaultHeight*_/s.defaultWidth)),M=T;M<T+I;M++)t=M,x.push(c({index:M,isScrolling:C,key:f(M),parent:this,style:{width:s.getWidth(M)}}));return this._startIndex=z,this._stopIndex=t,e.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:q("ReactVirtualized__Masonry",d),id:h,onScroll:this._onScroll,role:m,style:a({boxSizing:"border-box",direction:"ltr",height:i?"auto":u,overflowX:"hidden",overflowY:R<u?"hidden":"auto",position:"relative",width:_,WebkitOverflowScrolling:"touch",willChange:"transform"},g),tabIndex:v},e.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:R,maxWidth:"100%",maxHeight:R,overflow:"hidden",pointerEvents:C?"none":"",position:"relative"}},x))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&fe(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=pe(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,o=e.cellMeasurerCache,n=e.width,i=Math.max(1,Math.floor(n/o.defaultWidth));return this._positionCache.estimateTotalHeight(t,i,o.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,o=e.onScroll,n=this.state.scrollTop;this._onScrollMemoized!==n&&(o({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:n}),this._onScrollMemoized=n)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var o=this.props,n=o.cellMeasurerCache,i=o.cellPositioner,r=e;r<=t;r++){var l=i(r),s=l.left,a=l.top;this._positionCache.setPosition(r,s,a,n.getHeight(r))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}();function Ee(){}r(We,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:Ee,onScroll:Ee,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),v(We);var He=function(){function e(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,e),r(this,"_cellMeasurerCache",void 0),r(this,"_columnIndexOffset",void 0),r(this,"_rowIndexOffset",void 0),r(this,"columnWidth",(function(e){var o=e.index;t._cellMeasurerCache.columnWidth({index:o+t._columnIndexOffset})})),r(this,"rowHeight",(function(e){var o=e.index;t._cellMeasurerCache.rowHeight({index:o+t._rowIndexOffset})}));var i=n.cellMeasurerCache,l=n.columnIndexOffset,s=void 0===l?0:l,a=n.rowIndexOffset,c=void 0===a?0:a;this._cellMeasurerCache=i,this._columnIndexOffset=s,this._rowIndexOffset=c}return i(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,o+this._columnIndexOffset)}},{key:"getWidth",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,o+this._columnIndexOffset)}},{key:"has",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,o+this._columnIndexOffset)}},{key:"set",value:function(e,t,o,n){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,o,n)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}(),Fe=function(){function t(n,i){var l;o(this,t),r(h(l=f(this,d(t).call(this,n,i))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),r(h(l),"_deferredInvalidateColumnIndex",null),r(h(l),"_deferredInvalidateRowIndex",null),r(h(l),"_bottomLeftGridRef",(function(e){l._bottomLeftGrid=e})),r(h(l),"_bottomRightGridRef",(function(e){l._bottomRightGrid=e})),r(h(l),"_cellRendererBottomLeftGrid",(function(t){var o=t.rowIndex,n=u(t,["rowIndex"]),i=l.props,r=i.cellRenderer,s=i.fixedRowCount;return o===i.rowCount-s?e.createElement("div",{key:n.key,style:a({},n.style,{height:20})}):r(a({},n,{parent:h(l),rowIndex:o+s}))})),r(h(l),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,o=e.rowIndex,n=u(e,["columnIndex","rowIndex"]),i=l.props,r=i.cellRenderer,s=i.fixedColumnCount,c=i.fixedRowCount;return r(a({},n,{columnIndex:t+s,parent:h(l),rowIndex:o+c}))})),r(h(l),"_cellRendererTopRightGrid",(function(t){var o=t.columnIndex,n=u(t,["columnIndex"]),i=l.props,r=i.cellRenderer,s=i.columnCount,c=i.fixedColumnCount;return o===s-c?e.createElement("div",{key:n.key,style:a({},n.style,{width:20})}):r(a({},n,{columnIndex:o+c,parent:h(l)}))})),r(h(l),"_columnWidthRightGrid",(function(e){var t=e.index,o=l.props,n=o.columnCount,i=o.fixedColumnCount,r=o.columnWidth,s=l.state,a=s.scrollbarSize;return s.showHorizontalScrollbar&&t===n-i?a:"function"==typeof r?r({index:t+i}):r})),r(h(l),"_onScroll",(function(e){var t=e.scrollLeft,o=e.scrollTop;l.setState({scrollLeft:t,scrollTop:o});var n=l.props.onScroll;n&&n(e)})),r(h(l),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,o=e.size,n=e.vertical,i=l.state,r=i.showHorizontalScrollbar,s=i.showVerticalScrollbar;if(t!==r||n!==s){l.setState({scrollbarSize:o,showHorizontalScrollbar:t,showVerticalScrollbar:n});var a=l.props.onScrollbarPresenceChange;"function"==typeof a&&a({horizontal:t,size:o,vertical:n})}})),r(h(l),"_onScrollLeft",(function(e){var t=e.scrollLeft;l._onScroll({scrollLeft:t,scrollTop:l.state.scrollTop})})),r(h(l),"_onScrollTop",(function(e){var t=e.scrollTop;l._onScroll({scrollTop:t,scrollLeft:l.state.scrollLeft})})),r(h(l),"_rowHeightBottomGrid",(function(e){var t=e.index,o=l.props,n=o.fixedRowCount,i=o.rowCount,r=o.rowHeight,s=l.state,a=s.scrollbarSize;return s.showVerticalScrollbar&&t===i-n?a:"function"==typeof r?r({index:t+n}):r})),r(h(l),"_topLeftGridRef",(function(e){l._topLeftGrid=e})),r(h(l),"_topRightGridRef",(function(e){l._topRightGrid=e}));var s=n.deferredMeasurementCache,c=n.fixedColumnCount,p=n.fixedRowCount;return l._maybeCalculateCachedStyles(!0),s&&(l._deferredMeasurementCacheBottomLeftGrid=0<p?new He({cellMeasurerCache:s,columnIndexOffset:0,rowIndexOffset:p}):s,l._deferredMeasurementCacheBottomRightGrid=0<c||0<p?new He({cellMeasurerCache:s,columnIndexOffset:c,rowIndexOffset:p}):s,l._deferredMeasurementCacheTopRightGrid=0<c?new He({cellMeasurerCache:s,columnIndexOffset:c,rowIndexOffset:0}):s),l}return c(t,e.PureComponent),i(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.columnIndex,n=void 0===o?0:o,i=t.rowIndex,r=void 0===i?0:i;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,n):n,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,r):r}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.columnIndex,n=void 0===o?0:o,i=t.rowIndex,r=void 0===i?0:i,l=this.props,s=l.fixedColumnCount,a=l.fixedRowCount,c=Math.max(0,n-s),d=Math.max(0,r-a);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:d}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:c,rowIndex:d}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:r}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:c,rowIndex:r}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,o=e.scrollTop;if(0<t||0<o){var n={};0<t&&(n.scrollLeft=t),0<o&&(n.scrollTop=o),this.setState(n)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var t=this.props,o=t.onScroll,n=t.onSectionRendered,i=(t.onScrollbarPresenceChange,t.scrollLeft,t.scrollToColumn),r=(t.scrollTop,t.scrollToRow),l=u(t,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var s=this.state,c=s.scrollLeft,d=s.scrollTop;return e.createElement("div",{style:this._containerOuterStyle},e.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(l),this._renderTopRightGrid(a({},l,{onScroll:o,scrollLeft:c}))),e.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(a({},l,{onScroll:o,scrollTop:d})),this._renderBottomRightGrid(a({},l,{onScroll:o,onSectionRendered:n,scrollLeft:c,scrollToColumn:i,scrollToRow:r,scrollTop:d}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,o=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof o){for(var n=0,i=0;i<t;i++)n+=o({index:i});this._leftGridWidth=n}else this._leftGridWidth=o*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,o=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof o){for(var n=0,i=0;i<t;i++)n+=o({index:i});this._topGridHeight=n}else this._topGridHeight=o*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,o=t.columnWidth,n=t.enableFixedColumnScroll,i=t.enableFixedRowScroll,r=t.height,l=t.fixedColumnCount,s=t.fixedRowCount,c=t.rowHeight,d=t.style,u=t.styleBottomLeftGrid,h=t.styleBottomRightGrid,f=t.styleTopLeftGrid,p=t.styleTopRightGrid,m=t.width,g=e||r!==this._lastRenderedHeight||m!==this._lastRenderedWidth,v=e||o!==this._lastRenderedColumnWidth||l!==this._lastRenderedFixedColumnCount,_=e||s!==this._lastRenderedFixedRowCount||c!==this._lastRenderedRowHeight;(e||g||d!==this._lastRenderedStyle)&&(this._containerOuterStyle=a({height:r,overflow:"visible",width:m},d)),(e||g||_)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:m},this._containerBottomStyle={height:r-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:m}),!e&&u===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=a({left:0,overflowX:"hidden",overflowY:n?"auto":"hidden",position:"absolute"},u)),(e||v||h!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=a({left:this._getLeftGridWidth(this.props),position:"absolute"},h)),!e&&f===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=a({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},f)),(e||v||p!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=a({left:this._getLeftGridWidth(this.props),overflowX:i?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p)),this._lastRenderedColumnWidth=o,this._lastRenderedFixedColumnCount=l,this._lastRenderedFixedRowCount=s,this._lastRenderedHeight=r,this._lastRenderedRowHeight=c,this._lastRenderedStyle=d,this._lastRenderedStyleBottomLeftGrid=u,this._lastRenderedStyleBottomRightGrid=h,this._lastRenderedStyleTopLeftGrid=f,this._lastRenderedStyleTopRightGrid=p,this._lastRenderedWidth=m}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(t){var o=t.enableFixedColumnScroll,n=t.fixedColumnCount,i=t.fixedRowCount,r=t.rowCount,s=t.hideBottomLeftGridScrollbar,c=this.state.showVerticalScrollbar;if(!n)return null;var d=c?1:0,u=this._getBottomGridHeight(t),h=this._getLeftGridWidth(t),f=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,p=s?h+f:h,m=e.createElement(me,l({},t,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:n,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:u,onScroll:o?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,r-i)+d,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:p}));return s?e.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:a({},this._bottomLeftGridStyle,{height:u,width:h,overflowY:"hidden"})},m):m}},{key:"_renderBottomRightGrid",value:function(t){var o=t.columnCount,n=t.fixedColumnCount,i=t.fixedRowCount,r=t.rowCount,s=t.scrollToColumn,a=t.scrollToRow;return e.createElement(me,l({},t,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,o-n),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(t),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,r-i),rowHeight:this._rowHeightBottomGrid,scrollToColumn:s-n,scrollToRow:a-i,style:this._bottomRightGridStyle,width:this._getRightGridWidth(t)}))}},{key:"_renderTopLeftGrid",value:function(t){var o=t.fixedColumnCount,n=t.fixedRowCount;return o&&n?e.createElement(me,l({},t,{className:this.props.classNameTopLeftGrid,columnCount:o,height:this._getTopGridHeight(t),ref:this._topLeftGridRef,rowCount:n,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(t)})):null}},{key:"_renderTopRightGrid",value:function(t){var o=t.columnCount,n=t.enableFixedRowScroll,i=t.fixedColumnCount,r=t.fixedRowCount,s=t.scrollLeft,c=t.hideTopRightGridScrollbar,d=this.state,u=d.showHorizontalScrollbar,h=d.scrollbarSize;if(!r)return null;var f=u?1:0,p=this._getTopGridHeight(t),m=this._getRightGridWidth(t),g=u?h:0,v=p,_=this._topRightGridStyle;c&&(v=p+g,_=a({},this._topRightGridStyle,{left:0}));var S=e.createElement(me,l({},t,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,o-i)+f,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:v,onScroll:n?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:r,scrollLeft:s,style:_,tabIndex:null,width:m}));return c?e.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:a({},this._topRightGridStyle,{height:p,width:m,overflowX:"hidden"})},S):S}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&0<=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&0<=e.scrollTop?e.scrollTop:t.scrollTop}:null}}]),t}();r(Fe,"propTypes",{classNameBottomLeftGrid:j.string.isRequired,classNameBottomRightGrid:j.string.isRequired,classNameTopLeftGrid:j.string.isRequired,classNameTopRightGrid:j.string.isRequired,enableFixedColumnScroll:j.bool.isRequired,enableFixedRowScroll:j.bool.isRequired,fixedColumnCount:j.number.isRequired,fixedRowCount:j.number.isRequired,onScrollbarPresenceChange:j.func,style:j.object.isRequired,styleBottomLeftGrid:j.object.isRequired,styleBottomRightGrid:j.object.isRequired,styleTopLeftGrid:j.object.isRequired,styleTopRightGrid:j.object.isRequired,hideTopRightGridScrollbar:j.bool,hideBottomLeftGridScrollbar:j.bool}),r(Fe,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),v(Fe);var De=function(){function t(e,n){var i;return o(this,t),(i=f(this,d(t).call(this,e,n))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},i._onScroll=i._onScroll.bind(h(i)),i}return c(t,e.PureComponent),i(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,o=t.clientHeight,n=t.clientWidth,i=t.scrollHeight,r=t.scrollLeft,l=t.scrollTop,s=t.scrollWidth;return e({clientHeight:o,clientWidth:n,onScroll:this._onScroll,scrollHeight:i,scrollLeft:r,scrollTop:l,scrollWidth:s})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,o=e.clientWidth,n=e.scrollHeight,i=e.scrollLeft,r=e.scrollTop,l=e.scrollWidth;this.setState({clientHeight:t,clientWidth:o,scrollHeight:n,scrollLeft:i,scrollTop:r,scrollWidth:l})}}]),t}();function Ne(e){var t=e.dataKey,o=e.rowData;return"function"==typeof o.get?o.get(t):o[t]}function je(e){var t=e.cellData;return null==t?"":String(t)}function Ue(t){var o=t.className,n=t.columns,i=t.style;return e.createElement("div",{className:o,role:"row",style:i},n)}r(De,"propTypes",{children:j.func.isRequired});var qe={ASC:"ASC",DESC:"DESC"};function Be(t){var o=t.sortDirection,n=q("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":o===qe.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":o===qe.DESC});return e.createElement("svg",{className:n,width:18,height:18,viewBox:"0 0 24 24"},o===qe.ASC?e.createElement("path",{d:"M7 14l5-5 5 5z"}):e.createElement("path",{d:"M7 10l5 5 5-5z"}),e.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function Ve(t){var o=t.dataKey,n=t.label,i=t.sortBy,r=t.sortDirection,l=i===o,s=[e.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof n?n:null},n)];return l&&s.push(e.createElement(Be,{key:"SortIndicator",sortDirection:r})),s}function $e(t){var o=t.className,n=t.columns,i=t.index,r=t.key,s=t.onRowClick,a=t.onRowDoubleClick,c=t.onRowMouseOut,d=t.onRowMouseOver,u=t.onRowRightClick,h=t.rowData,f=t.style,p={"aria-rowindex":i+1};return(s||a||c||d||u)&&(p["aria-label"]="row",p.tabIndex=0,s&&(p.onClick=function(e){return s({event:e,index:i,rowData:h})}),a&&(p.onDoubleClick=function(e){return a({event:e,index:i,rowData:h})}),c&&(p.onMouseOut=function(e){return c({event:e,index:i,rowData:h})}),d&&(p.onMouseOver=function(e){return d({event:e,index:i,rowData:h})}),u&&(p.onContextMenu=function(e){return u({event:e,index:i,rowData:h})})),e.createElement("div",l({},p,{className:o,key:r,role:"row",style:f}),n)}Be.propTypes={sortDirection:j.oneOf([qe.ASC,qe.DESC])};var Ke=function(){function t(){return o(this,t),f(this,d(t).apply(this,arguments))}return c(t,e.Component),t}();r(Ke,"propTypes",{"aria-label":j.string,cellDataGetter:j.func,cellRenderer:j.func,className:j.string,columnData:j.object,dataKey:j.any.isRequired,defaultSortDirection:j.oneOf([qe.ASC,qe.DESC]),disableSort:j.bool,flexGrow:j.number,flexShrink:j.number,headerClassName:j.string,headerRenderer:j.func.isRequired,headerStyle:j.object,id:j.string,label:j.node,maxWidth:j.number,minWidth:j.number,style:j.object,width:j.number.isRequired}),r(Ke,"defaultProps",{cellDataGetter:Ne,cellRenderer:je,defaultSortDirection:qe.ASC,flexGrow:0,flexShrink:1,headerRenderer:Ve,style:{}});var Ye=function(){function n(e){var t;return o(this,n),(t=f(this,d(n).call(this,e))).state={scrollbarWidth:0},t._createColumn=t._createColumn.bind(h(t)),t._createRow=t._createRow.bind(h(t)),t._onScroll=t._onScroll.bind(h(t)),t._onSectionRendered=t._onSectionRendered.bind(h(t)),t._setRef=t._setRef.bind(h(t)),t}return c(n,e.PureComponent),i(n,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,o=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:o}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.columnIndex,n=void 0===o?0:o,i=t.rowIndex,r=void 0===i?0:i;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:t})}},{key:"scrollToPosition",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:t})}},{key:"scrollToRow",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:t})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=t.findDOMNode(this.Grid),o=e.clientWidth||0;return(e.offsetWidth||0)-o}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var t=this,o=this.props,n=o.children,i=o.className,r=o.disableHeader,s=o.gridClassName,c=o.gridStyle,d=o.headerHeight,u=o.headerRowRenderer,h=o.height,f=o.id,p=o.noRowsRenderer,m=o.rowClassName,g=o.rowStyle,v=o.scrollToIndex,_=o.style,S=o.width,y=this.state.scrollbarWidth,C=r?h:h-d,w="function"==typeof m?m({index:-1}):m,x="function"==typeof g?g({index:-1}):g;return this._cachedColumnStyles=[],e.Children.toArray(n).forEach((function(e,o){var n=t._getFlexStyleForColumn(e,e.props.style);t._cachedColumnStyles[o]=a({overflow:"hidden"},n)})),e.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":e.Children.toArray(n).length,"aria-rowcount":this.props.rowCount,className:q("ReactVirtualized__Table",i),id:f,role:"grid",style:_},!r&&u({className:q("ReactVirtualized__Table__headerRow",w),columns:this._getHeaderColumns(),style:a({height:d,overflow:"hidden",paddingRight:y,width:S},x)}),e.createElement(me,l({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:q("ReactVirtualized__Table__Grid",s),cellRenderer:this._createRow,columnWidth:S,columnCount:1,height:C,id:void 0,noContentRenderer:p,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:y,scrollToRow:v,style:a({},c,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(t){var o=t.column,n=t.columnIndex,i=t.isScrolling,r=t.parent,l=t.rowData,s=t.rowIndex,a=this.props.onColumnClick,c=o.props,d=c.cellDataGetter,u=c.cellRenderer,h=c.className,f=c.columnData,p=c.dataKey,m=c.id,g=u({cellData:d({columnData:f,dataKey:p,rowData:l}),columnData:f,columnIndex:n,dataKey:p,isScrolling:i,parent:r,rowData:l,rowIndex:s}),v=this._cachedColumnStyles[n],_="string"==typeof g?g:null;return e.createElement("div",{"aria-colindex":n+1,"aria-describedby":m,className:q("ReactVirtualized__Table__rowColumn",h),key:"Row"+s+"-Col"+n,onClick:function(e){a&&a({columnData:f,dataKey:p,event:e})},role:"gridcell",style:v,title:_},g)}},{key:"_createHeader",value:function(t){var o,n,i,r,l,s=t.column,c=t.index,d=this.props,u=d.headerClassName,h=d.headerStyle,f=d.onHeaderClick,p=d.sort,m=d.sortBy,g=d.sortDirection,v=s.props,_=v.columnData,S=v.dataKey,y=v.defaultSortDirection,C=v.disableSort,w=v.headerRenderer,x=v.id,R=v.label,b=!C&&p,T=q("ReactVirtualized__Table__headerColumn",u,s.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:b}),z=this._getFlexStyleForColumn(s,a({},h,{},s.props.headerStyle)),I=w({columnData:_,dataKey:S,disableSort:C,label:R,sortBy:m,sortDirection:g});if(b||f){var M=m!==S?y:g===qe.DESC?qe.ASC:qe.DESC,k=function(e){b&&p({defaultSortDirection:y,event:e,sortBy:S,sortDirection:M}),f&&f({columnData:_,dataKey:S,event:e})};l=s.props["aria-label"]||R||S,r="none",i=0,o=k,n=function(e){"Enter"!==e.key&&" "!==e.key||k(e)}}return m===S&&(r=g===qe.ASC?"ascending":"descending"),e.createElement("div",{"aria-label":l,"aria-sort":r,className:T,id:x,key:"Header-Col"+c,onClick:o,onKeyDown:n,role:"columnheader",style:z,tabIndex:i},I)}},{key:"_createRow",value:function(t){var o=this,n=t.rowIndex,i=t.isScrolling,r=t.key,l=t.parent,s=t.style,c=this.props,d=c.children,u=c.onRowClick,h=c.onRowDoubleClick,f=c.onRowRightClick,p=c.onRowMouseOver,m=c.onRowMouseOut,g=c.rowClassName,v=c.rowGetter,_=c.rowRenderer,S=c.rowStyle,y=this.state.scrollbarWidth,C="function"==typeof g?g({index:n}):g,w="function"==typeof S?S({index:n}):S,x=v({index:n}),R=e.Children.toArray(d).map((function(e,t){return o._createColumn({column:e,columnIndex:t,isScrolling:i,parent:l,rowData:x,rowIndex:n,scrollbarWidth:y})})),b=q("ReactVirtualized__Table__row",C),T=a({},s,{height:this._getRowHeight(n),overflow:"hidden",paddingRight:y},w);return _({className:b,columns:R,index:n,isScrolling:i,key:r,onRowClick:u,onRowDoubleClick:h,onRowRightClick:f,onRowMouseOver:p,onRowMouseOut:m,rowData:x,style:T})}},{key:"_getFlexStyleForColumn",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),i=a({},o,{flex:n,msFlex:n,WebkitFlex:n});return e.props.maxWidth&&(i.maxWidth=e.props.maxWidth),e.props.minWidth&&(i.minWidth=e.props.minWidth),i}},{key:"_getHeaderColumns",value:function(){var t=this,o=this.props,n=o.children;return(o.disableHeader?[]:e.Children.toArray(n)).map((function(e,o){return t._createHeader({column:e,index:o})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,o=e.scrollHeight,n=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:o,scrollTop:n})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,o=e.rowOverscanStopIndex,n=e.rowStartIndex,i=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:o,startIndex:n,stopIndex:i})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),n}();r(Ye,"propTypes",{"aria-label":j.string,"aria-labelledby":j.string,autoHeight:j.bool,children:function(t){for(var o=e.Children.toArray(t.children),n=0;n<o.length;n++){var i=o[n].type;if(i!==Ke&&!(i.prototype instanceof Ke))return new Error("Table only accepts children of type Column")}},className:j.string,disableHeader:j.bool,estimatedRowSize:j.number.isRequired,gridClassName:j.string,gridStyle:j.object,headerClassName:j.string,headerHeight:j.number.isRequired,headerRowRenderer:j.func,headerStyle:j.object,height:j.number.isRequired,id:j.string,noRowsRenderer:j.func,onColumnClick:j.func,onHeaderClick:j.func,onRowClick:j.func,onRowDoubleClick:j.func,onRowMouseOut:j.func,onRowMouseOver:j.func,onRowRightClick:j.func,onRowsRendered:j.func,onScroll:j.func.isRequired,overscanIndicesGetter:j.func.isRequired,overscanRowCount:j.number.isRequired,rowClassName:j.oneOfType([j.string,j.func]),rowGetter:j.func.isRequired,rowHeight:j.oneOfType([j.number,j.func]).isRequired,rowCount:j.number.isRequired,rowRenderer:j.func,rowStyle:j.oneOfType([j.object,j.func]).isRequired,scrollToAlignment:j.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:j.number.isRequired,scrollTop:j.number,sort:j.func,sortBy:j.string,sortDirection:j.oneOf([qe.ASC,qe.DESC]),style:j.object,tabIndex:j.number,width:j.number.isRequired}),r(Ye,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:ge,overscanRowCount:10,rowRenderer:$e,headerRowRenderer:Ue,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Xe=[],Je=null,Ze=null;function Qe(){Ze&&(Ze=null,document.body&&null!=Je&&(document.body.style.pointerEvents=Je),Je=null)}function et(){Qe(),Xe.forEach((function(e){return e.__resetIsScrolling()}))}function tt(e){e.currentTarget===window&&null==Je&&document.body&&(Je=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){Ze&&fe(Ze);var e=0;Xe.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),Ze=pe(et,e)}(),Xe.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function ot(e,t){Xe.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",tt),Xe.push(e)}function nt(e,t){(Xe=Xe.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",tt),Ze&&(fe(Ze),Qe()))}var it=function(e){return e===window},rt=function(e){return e.getBoundingClientRect()};function lt(e,t){if(e){if(it(e)){var o=window,n=o.innerHeight,i=o.innerWidth;return{height:"number"==typeof n?n:0,width:"number"==typeof i?i:0}}return rt(e)}return{height:t.serverHeight,width:t.serverWidth}}function st(e){return it(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}var at=function(){return"undefined"!=typeof window?window:void 0},ct=function(){function n(){var e,t;o(this,n);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r(h(t=f(this,(e=d(n)).call.apply(e,[this].concat(l)))),"_window",at()),r(h(t),"_isMounted",!1),r(h(t),"_positionFromTop",0),r(h(t),"_positionFromLeft",0),r(h(t),"_detectElementResize",void 0),r(h(t),"_child",void 0),r(h(t),"state",a({},lt(t.props.scrollElement,t.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),r(h(t),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),t._child=e,t.updatePosition()})),r(h(t),"_onChildScroll",(function(e){var o=e.scrollTop;if(t.state.scrollTop!==o){var n=t.props.scrollElement;n&&("function"==typeof n.scrollTo?n.scrollTo(0,o+t._positionFromTop):n.scrollTop=o+t._positionFromTop)}})),r(h(t),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",t._onResize,!1):t._detectElementResize.addResizeListener(e,t._onResize)})),r(h(t),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",t._onResize,!1):e&&t._detectElementResize.removeResizeListener(e,t._onResize)})),r(h(t),"_onResize",(function(){t.updatePosition()})),r(h(t),"__handleWindowScrollEvent",(function(){if(t._isMounted){var e=t.props.onScroll,o=t.props.scrollElement;if(o){var n=st(o),i=Math.max(0,n.left-t._positionFromLeft),r=Math.max(0,n.top-t._positionFromTop);t.setState({isScrolling:!0,scrollLeft:i,scrollTop:r}),e({scrollLeft:i,scrollTop:r})}}})),r(h(t),"__resetIsScrolling",(function(){t.setState({isScrolling:!1})})),t}return c(n,e.PureComponent),i(n,[{key:"updatePosition",value:function(e){var o=0<arguments.length&&void 0!==e?e:this.props.scrollElement,n=this.props.onResize,i=this.state,r=i.height,l=i.width,s=this._child||t.findDOMNode(this);if(s instanceof Element&&o){var a=function(e,t){if(it(t)&&document.documentElement){var o=document.documentElement,n=rt(e),i=rt(o);return{top:n.top-i.top,left:n.left-i.left}}var r=st(t),l=rt(e),s=rt(t);return{top:l.top+r.top-s.top,left:l.left+r.left-s.left}}(s,o);this._positionFromTop=a.top,this._positionFromLeft=a.left}var c=lt(o,this.props);r===c.height&&l===c.width||(this.setState({height:c.height,width:c.width}),n({height:c.height,width:c.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=S(),this.updatePosition(e),e&&(ot(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e){var t=this.props.scrollElement,o=e.scrollElement;o!==t&&null!=o&&null!=t&&(this.updatePosition(t),nt(this,o),ot(this,t),this._unregisterResizeListener(o),this._registerResizeListener(t))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(nt(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,o=t.isScrolling,n=t.scrollTop,i=t.scrollLeft,r=t.height,l=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:r,isScrolling:o,scrollLeft:i,scrollTop:n,width:l})}}]),n}();r(ct,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:at(),serverHeight:0,serverWidth:0}),exports.ArrowKeyStepper=_,exports.AutoSizer=y,exports.CellMeasurer=C,exports.CellMeasurerCache=w,exports.Collection=Q,exports.Column=Ke,exports.ColumnSizer=ee,exports.Grid=me,exports.InfiniteLoader=ve,exports.List=_e,exports.Masonry=We,exports.MultiGrid=Fe,exports.ScrollSync=De,exports.SortDirection=qe,exports.SortIndicator=Be,exports.Table=Ye,exports.WindowScroller=ct,exports.accessibilityOverscanIndicesGetter=ge,exports.createMasonryCellPositioner=function(e){var t,o=e.cellMeasurerCache,n=e.columnCount,i=e.columnWidth,r=e.spacer,l=void 0===r?0:r;function s(e){for(var n=0,r=1;r<t.length;r++)t[r]<t[n]&&(n=r);var s=n*(i+l),a=t[n]||0;return t[n]=a+o.getHeight(e)+l,{left:s,top:a}}function a(){t=[];for(var e=0;e<n;e++)t[e]=0}return a(),s.reset=function(e){n=e.columnCount,i=e.columnWidth,l=e.spacer,a()},s},exports.createTableMultiSort=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.defaultSortBy,n=t.defaultSortDirection,i=void 0===n?{}:n;if(!e)throw Error('Required parameter "sortCallback" not specified');var r=o||[],l={};return r.forEach((function(e){l[e]=void 0!==i[e]?i[e]:"ASC"})),{sort:function(t){var o=t.defaultSortDirection,n=t.event,i=t.sortBy;if(n.shiftKey)void 0!==l[i]?l[i]="ASC"===l[i]?"DESC":"ASC":(l[i]=o,r.push(i));else if(n.ctrlKey||n.metaKey){var s=r.indexOf(i);0<=s&&(r.splice(s,1),delete l[i])}else r.length=0,r.push(i),Object.keys(l).forEach((function(e){e!==i&&delete l[e]})),void 0!==l[i]?l[i]="ASC"===l[i]?"DESC":"ASC":l[i]=o;e({sortBy:r,sortDirection:l})},sortBy:r,sortDirection:l}},exports.defaultCellRangeRenderer=se,exports.defaultOverscanIndicesGetter=re,exports.defaultTableCellDataGetter=Ne,exports.defaultTableCellRenderer=je,exports.defaultTableHeaderRenderer=Ve,exports.defaultTableHeaderRowRenderer=Ue,exports.defaultTableRowRenderer=$e,Object.defineProperty(exports,"__esModule",{value:!0})}))}(),SM.currentModule=null}),"",{requires:["react","react-dom"],node_modules:!0});
YUI.add('react', function (Y) {SM.currentModule = 'react';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(N,q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define(q):N.React=q()})(this,function(){function N(a,b,d,g,p,c,e,h){if(!a){a=void 0;if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var n=[d,g,p,c,e,h],f=0;a=Error(b.replace(/%s/g,function(){return n[f++]}));a.name="Invariant Violation"}a.framesToPop=1;
throw a;}}function q(a){for(var b=arguments.length-1,d="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=0;g<b;g++)d+="&args[]="+encodeURIComponent(arguments[g+1]);N(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",d)}function t(a,b,d){this.props=a;this.context=b;this.refs=ba;this.updater=d||ca}function da(){}function O(a,b,d){this.props=a;this.context=b;this.refs=ba;this.updater=d||
ca}function u(){if(!x){var a=c.expirationTime;C?P():C=!0;D(ta,a)}}function Q(){var a=c,b=c.next;if(c===b)c=null;else{var d=c.previous;c=d.next=b;b.previous=d}a.next=a.previous=null;d=a.callback;b=a.expirationTime;a=a.priorityLevel;var g=f,p=E;f=a;E=b;try{var n=d()}finally{f=g,E=p}if("function"===typeof n)if(n={callback:n,priorityLevel:a,expirationTime:b,next:null,previous:null},null===c)c=n.next=n.previous=n;else{d=null;a=c;do{if(a.expirationTime>=b){d=a;break}a=a.next}while(a!==c);null===d?d=c:d===
c&&(c=n,u());b=d.previous;b.next=d.previous=n;n.next=d;n.previous=b}}function F(){if(-1===k&&null!==c&&1===c.priorityLevel){x=!0;try{do Q();while(null!==c&&1===c.priorityLevel)}finally{x=!1,null!==c?u():C=!1}}}function ta(a){x=!0;var b=G;G=a;try{if(a)for(;null!==c;){var d=l();if(c.expirationTime<=d){do Q();while(null!==c&&c.expirationTime<=d)}else break}else if(null!==c){do Q();while(null!==c&&!H())}}finally{x=!1,G=b,null!==c?u():C=!1,F()}}function ea(a,b,d){var g=void 0,p={},c=null,e=null;if(null!=
b)for(g in (void 0!==b.ref&&(e=b.ref), void 0!==b.key&&(c=""+b.key), b))fa.call(b,g)&&!ha.hasOwnProperty(g)&&(p[g]=b[g]);var h=arguments.length-2;if(1===h)p.children=d;else if(1<h){for(var f=Array(h),k=0;k<h;k++)f[k]=arguments[k+2];p.children=f}if(a&&a.defaultProps)for(g in (h=a.defaultProps, h))void 0===p[g]&&(p[g]=h[g]);return{$$typeof:y,type:a,key:c,ref:e,props:p,_owner:R.current}}function ua(a,b){return{$$typeof:y,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function S(a){return"object"===
typeof a&&null!==a&&a.$$typeof===y}function va(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ia(a,b,d,g){if(I.length){var c=I.pop();c.result=a;c.keyPrefix=b;c.func=d;c.context=g;c.count=0;return c}return{result:a,keyPrefix:b,func:d,context:g,count:0}}function ja(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>I.length&&I.push(a)}function T(a,b,d,g){var c=typeof a;if("undefined"===c||"boolean"===c)a=null;var e=!1;if(null===
a)e=!0;else switch(c){case "string":case "number":e=!0;break;case "object":switch(a.$$typeof){case y:case wa:e=!0}}if(e)return d(g,a,""===b?"."+U(a,0):b),1;e=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){c=a[f];var h=b+U(c,f);e+=T(c,h,d,g)}else if(null===a||"object"!==typeof a?h=null:(h=ka&&a[ka]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(c=a.next()).done;)c=c.value,h=b+U(c,f++),e+=T(c,h,d,g);else"object"===c&&(d=""+a,q("31",
"[object Object]"===d?"object with keys {"+Object.keys(a).join(", ")+"}":d,""));return e}function V(a,b,d){return null==a?0:T(a,"",b,d)}function U(a,b){return"object"===typeof a&&null!==a&&null!=a.key?va(a.key):b.toString(36)}function xa(a,b,d){a.func.call(a.context,b,a.count++)}function ya(a,b,d){var g=a.result,c=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?W(a,g,d,function(a){return a}):null!=a&&(S(a)&&(a=ua(a,c+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(la,"$&/")+"/")+
d)),g.push(a))}function W(a,b,d,g,c){var e="";null!=d&&(e=(""+d).replace(la,"$&/")+"/");b=ia(b,e,g,c);V(a,ya,b);ja(b)}function m(){var a=ma.current;null===a?q("321"):void 0;return a}var e="function"===typeof Symbol&&Symbol.for,y=e?Symbol.for("react.element"):60103,wa=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,X=e?Symbol.for("react.strict_mode"):60108,za=e?Symbol.for("react.profiler"):60114,Aa=e?Symbol.for("react.provider"):60109,Ba=e?Symbol.for("react.context"):60110,
Ca=e?Symbol.for("react.concurrent_mode"):60111,Da=e?Symbol.for("react.forward_ref"):60112,Ea=e?Symbol.for("react.suspense"):60113,Fa=e?Symbol.for("react.memo"):60115,Ga=e?Symbol.for("react.lazy"):60116,ka="function"===typeof Symbol&&Symbol.iterator,na=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,J=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=
0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var d=Object(a);for(var c,e=1;e<arguments.length;e++){var f=Object(arguments[e]);
for(var k in f)Ha.call(f,k)&&(d[k]=f[k]);if(na){c=na(f);for(var h=0;h<c.length;h++)Ia.call(f,c[h])&&(d[c[h]]=f[c[h]])}}return d},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,d){},enqueueReplaceState:function(a,b,d,c){},enqueueSetState:function(a,b,d,c){}},ba={};t.prototype.isReactComponent={};t.prototype.setState=function(a,b){"object"!==typeof a&&"function"!==typeof a&&null!=a?q("85"):void 0;this.updater.enqueueSetState(this,a,b,"setState")};t.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,
a,"forceUpdate")};da.prototype=t.prototype;e=O.prototype=new da;e.constructor=O;J(e,t.prototype);e.isPureReactComponent=!0;var c=null,G=!1,f=3,k=-1,E=-1,x=!1,C=!1,Ja=Date,Ka="function"===typeof setTimeout?setTimeout:void 0,La="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,pa="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0,qa,ra,Y=function(a){qa=oa(function(b){La(ra);a(b)});ra=Ka(function(){pa(qa);
a(l())},100)};if("object"===typeof performance&&"function"===typeof performance.now){var Ma=performance;var l=function(){return Ma.now()}}else l=function(){return Ja.now()};e=null;"undefined"!==typeof window?e=window:"undefined"!==typeof global&&(e=global);if(e&&e._schedMock){e=e._schedMock;var D=e[0];var P=e[1];var H=e[2];l=e[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var v=null,Na=function(a){if(null!==v)try{v(a)}finally{v=null}};D=function(a,b){null!==v?setTimeout(D,
0,a):(v=a,setTimeout(Na,0,!1))};P=function(){v=null};H=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof oa&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof pa&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var w=null,K=!1,z=-1,A=!1,Z=!1,L=0,
M=33,B=33;H=function(){return L<=l()};e=new MessageChannel;var sa=e.port2;e.port1.onmessage=function(a){K=!1;a=w;var b=z;w=null;z=-1;var d=l(),c=!1;if(0>=L-d)if(-1!==b&&b<=d)c=!0;else{A||(A=!0,Y(aa));w=a;z=b;return}if(null!==a){Z=!0;try{a(c)}finally{Z=!1}}};var aa=function(a){if(null!==w){Y(aa);var b=a-L+B;b<B&&M<B?(8>b&&(b=8),B=b<M?M:b):M=b;L=a+B;K||(K=!0,sa.postMessage(void 0))}else A=!1};D=function(a,b){w=a;z=b;Z||0>b?sa.postMessage(void 0):A||(A=!0,Y(aa))};P=function(){w=null;K=!1;z=-1}}var Oa=
0,ma={current:null},R={current:null};e={ReactCurrentDispatcher:ma,ReactCurrentOwner:R,assign:J};J(e,{Scheduler:{unstable_cancelCallback:function(a){var b=a.next;if(null!==b){if(b===a)c=null;else{a===c&&(c=b);var d=a.previous;d.next=b;b.previous=d}a.next=a.previous=null}},unstable_shouldYield:function(){return!G&&(null!==c&&c.expirationTime<E||H())},unstable_now:l,unstable_scheduleCallback:function(a,b){var d=-1!==k?k:l();if("object"===typeof b&&null!==b&&"number"===typeof b.timeout)b=d+b.timeout;
else switch(f){case 1:b=d+-1;break;case 2:b=d+250;break;case 5:b=d+1073741823;break;case 4:b=d+1E4;break;default:b=d+5E3}a={callback:a,priorityLevel:f,expirationTime:b,next:null,previous:null};if(null===c)c=a.next=a.previous=a,u();else{d=null;var g=c;do{if(g.expirationTime>b){d=g;break}g=g.next}while(g!==c);null===d?d=c:d===c&&(c=a,u());b=d.previous;b.next=d.previous=a;a.next=d;a.previous=b}return a},unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=
3}var d=f,c=k;f=a;k=l();try{return b()}finally{f=d,k=c,F()}},unstable_next:function(a){switch(f){case 1:case 2:case 3:var b=3;break;default:b=f}var d=f,c=k;f=b;k=l();try{return a()}finally{f=d,k=c,F()}},unstable_wrapCallback:function(a){var b=f;return function(){var d=f,c=k;f=b;k=l();try{return a.apply(this,arguments)}finally{f=d,k=c,F()}}},unstable_getFirstCallbackNode:function(){return c},unstable_pauseExecution:function(){},unstable_continueExecution:function(){null!==c&&u()},unstable_getCurrentPriorityLevel:function(){return f},
unstable_IdlePriority:5,unstable_ImmediatePriority:1,unstable_LowPriority:4,unstable_NormalPriority:3,unstable_UserBlockingPriority:2},SchedulerTracing:{__interactionsRef:null,__subscriberRef:null,unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Oa},unstable_subscribe:function(a){},unstable_trace:function(a,b,d){return d()},unstable_unsubscribe:function(a){},unstable_wrap:function(a){return a}}});var fa=Object.prototype.hasOwnProperty,
ha={key:!0,ref:!0,__self:!0,__source:!0},la=/\/+/g,I=[];r={Children:{map:function(a,b,d){if(null==a)return a;var c=[];W(a,c,null,b,d);return c},forEach:function(a,b,d){if(null==a)return a;b=ia(null,null,b,d);V(a,xa,b);ja(b)},count:function(a){return V(a,function(){return null},null)},toArray:function(a){var b=[];W(a,b,null,function(a){return a});return b},only:function(a){S(a)?void 0:q("143");return a}},createRef:function(){return{current:null}},Component:t,PureComponent:O,createContext:function(a,
b){void 0===b&&(b=null);a={$$typeof:Ba,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Aa,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:Da,render:a}},lazy:function(a){return{$$typeof:Ga,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:Fa,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return m().useCallback(a,b)},useContext:function(a,b){return m().useContext(a,b)},
useEffect:function(a,b){return m().useEffect(a,b)},useImperativeHandle:function(a,b,d){return m().useImperativeHandle(a,b,d)},useDebugValue:function(a,b){},useLayoutEffect:function(a,b){return m().useLayoutEffect(a,b)},useMemo:function(a,b){return m().useMemo(a,b)},useReducer:function(a,b,d){return m().useReducer(a,b,d)},useRef:function(a){return m().useRef(a)},useState:function(a){return m().useState(a)},Fragment:r,StrictMode:X,Suspense:Ea,createElement:ea,cloneElement:function(a,b,d){null===a||
void 0===a?q("267",a):void 0;var c=void 0,e=J({},a.props),f=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=R.current);void 0!==b.key&&(f=""+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)fa.call(b,c)&&!ha.hasOwnProperty(c)&&(e[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)e.children=d;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];e.children=l}return{$$typeof:y,type:a.type,key:f,ref:k,props:e,_owner:h}},
createFactory:function(a){var b=ea.bind(null,a);b.type=a;return b},isValidElement:S,version:"16.8.6",unstable_ConcurrentMode:Ca,unstable_Profiler:za,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:e};r=(X={default:r},r)||X;return r.default||r});
}());SM.currentModule = null;}, '', {"requires":["sm","prop-types"],"node_modules":true});
YUI.add("redux-responsive",(function(t){SM.currentModule="redux-responsive";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){var t,n;t=this,n=function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var module=n[r]={i:r,l:!1,exports:{}};return t[r].call(module.exports,module,module.exports,e),module.l=!0,module.exports}return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(exports,t,n){e.o(exports,t)||Object.defineProperty(exports,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(module){var t=module&&module.__esModule?function(){return module.default}:function(){return module};return e.d(t,"a",t),t},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=8)}([function(module,t,n){"use strict";var e=n(7);n.d(t,"a",(function(){return e.a}))},function(module,t,n){"use strict";var e=n(2);n.d(t,"a",(function(){return e.a}))},function(module,t,n){"use strict";t.a="redux-responsive/CALCULATE_RESPONSIVE_STATE"},function(module,exports,t){module.exports=t(12)},,function(module,t,n){"use strict";var e=n(11);t.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.calculateInitialState,o=void 0===r||r;return function(t){return function(){var r=t.apply(void 0,arguments);return"undefined"!=typeof window&&void 0!==window.matchMedia&&n.i(e.a)({store:r,window,calculateInitialState:o}),r}}}},function(module,t,n){"use strict";var e=n(3),r=n.n(e),o=n(2),i=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},u={extraSmall:480,small:768,medium:992,large:1200},a=function(t,n){var e={};return Object.keys(t).forEach((function(r){return n(e,t[r],r)})),e};function c(t){var n=Object.keys(t).sort((function(n,e){var r=t[n],o=t[e];return"number"==typeof r&&"string"==typeof o?-1:"number"==typeof o&&"string"==typeof r||r>=o?1:-1}));return a(t,(function(t,e,r){var o=n.indexOf(r);-1!==o&&(t[r]=o)}))}function f(t,n){var e=n[t];return a(n,(function(t,r,o){"number"==typeof r&&n[o]?t[o]=e<n[o]:t[o]=!1}))}function s(t,n){return a(n,(function(e,r,o){"number"==typeof r&&n[o]?e[o]=o===t:e[o]=!1}))}function d(t,n){var e=n[t];return a(n,(function(t,r,o){t[o]="number"==typeof r&&e>n[o]}))}function p(t,n,e){return void 0===t?e:Object.keys(n).reduce((function(e,r){return t(n[r]).matches?r:e}),e)}function l(t){if(void 0===t)return null;var n={portrait:"(orientation: portrait)",landscape:"(orientation: landscape)"};return Object.keys(n).reduce((function(e,r){return t(n[r]).matches?r:e}),null)}t.a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.initialMediaType,a=n.infinity,v=void 0===a?"infinity":a,y=n.extraFields,h=void 0===y?function(){return{}}:y;t||(t=u),t[v]=1/0;var m=r.a.asObject(t),b=c(t);return function(n,r){var u=r.type,a=r.matchMedia;if(u===o.a||void 0===n){var c=!n&&e?e:p(a,m,v),y=l(a),S={_responsiveState:!0,lessThan:f(c,b),greaterThan:d(c,b),is:s(c,t),mediaType:c,orientation:y,breakpoints:t};return i({},S,h(S))}return n}}},function(module,t,n){"use strict";var e=n(1);t.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.innerWidth,r=t.innerHeight,o=t.matchMedia;return{type:e.a,innerWidth:n,innerHeight:r,matchMedia:o}}},function(module,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=n(6),r=n(5),o=n(1);n.d(t,"CALCULATE_RESPONSIVE_STATE",(function(){return o.a}));var i=n(0);n.d(t,"calculateResponsiveState",(function(){return i.a})),n.d(t,"createResponsiveStateReducer",(function(){return u})),n.d(t,"createResponsiveStoreEnhancer",(function(){return a})),n.d(t,"responsiveStateReducer",(function(){return c})),n.d(t,"responsiveStoreEnhancer",(function(){return f}));var u=e.a,a=r.a,c=u(),f=a()},,function(module,t,n){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function o(t,n){return"function"==typeof t.getIn?t.getIn(n):n.reduce((function(t,n){return t[n]}),t)}function i(t){return"function"==typeof t.keys?Array.from(t.keys()):Object.keys(t)}t.a=function(t){var n=t.getState(),u=function(t,n){for(var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,a=[],c=[a],f=function(){var e=c.shift();if(e.length>u)return"continue";var a=o(t,e);if(a){if(a[n])return{v:e};c.push.apply(c,r(i(a).map((function(t){return e.concat(t)}))))}};c.length>0;){var s=f();switch(s){case"continue":continue;default:if("object"===(void 0===s?"undefined":e(s)))return s.v}}return!1}(n,"_responsiveState");if(!u)throw new Error("Could not find responsive state reducer. If you are still running into trouble, please open a ticket on github.");return o(n,u).breakpoints}},function(module,t,n){"use strict";var e=n(3),r=n.n(e),o=n(0),i=n(10);t.a=function(t){var e=t.store,u=t.window,a=t.calculateInitialState,c=function(){return e.dispatch(n.i(o.a)(u))},f=r.a.asObject(n.i(i.a)(e));Object.keys(f).forEach((function(t){u.matchMedia(f[t]).addListener((function(t){t.matches&&c()}))})),u.addEventListener("orientationchange",c),a&&c()}},function(module,exports,t){var n,e={asArray:function(t){var n=this.getBreakPoints(t),e=this.getCustomQueries(t);return this._translate(this._makeSteps(this._toSortedArray(n))).concat(this._objToArr(e))},asObject:function(t){return this._arrToObj(this.asArray(t))},getBreakPoints:function(t){return Object.keys(t).reduce((function(n,e){return"number"==typeof t[e]&&(n[e]=t[e]),n}),{})},getCustomQueries:function(t){return Object.keys(t).reduce((function(n,e){return"string"==typeof t[e]&&(n[e]=t[e]),n}),{})},_toSortedArray:function(t){return Object.keys(t).map((function(n){return[n,t[n]]})).sort((function(t,n){return t[1]-n[1]}))},_makeSteps:function(t){return t[t.length-1][1]===1/0?t:t.concat([1/0])},_translate:function(t){return t.map((function(n,e){return 0===e?[n[0],"screen and (max-width: "+n[1]+"px)"]:e===t.length-1?[n[0]||"default","screen and (min-width: "+(t[e-1][1]+1)+"px)"]:[n[0],"screen and (min-width: "+(t[e-1][1]+1)+"px) and (max-width: "+n[1]+"px)"]}))},_objToArr:function(t){return Object.keys(t).map((function(n){return[n,t[n]]}))},_arrToObj:function(t){return t.reduce((function(t,n){return t[n[0]]=n[1],t}),{})}};void 0!==module&&void 0!==module.exports?module.exports=e:void 0===(n=function(){return e}.apply(exports,[]))||(module.exports=n)}])},"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["redux-responsive"]=n():t["redux-responsive"]=n()}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("redux-thunk",(function(e){SM.currentModule="redux-thunk";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){var e,t;e=this,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var module=t[r]={exports:{},id:r,loaded:!1};return e[r].call(module.exports,module,module.exports,n),module.loaded=!0,module.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(module,exports,e){module.exports=e(1)},function(module,exports){"use strict";function e(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(u){return"function"==typeof u?u(n,r,e):t(u)}}}}exports.__esModule=!0;var t=e();t.withExtraArgument=e,exports.default=t}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ReduxThunk=t():e.ReduxThunk=t()}(),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add("redux",(function(r){SM.currentModule="redux";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){!function(r,t){"object"==typeof exports&&void 0!==module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r="undefined"!=typeof globalThis?globalThis:r||self).Redux={})}(this,(function(r){"use strict";function t(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var e="function"==typeof Symbol&&Symbol.observable||"@@observable",n=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+n(),REPLACE:"@@redux/REPLACE"+n(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n()}};function i(r){if("object"!=typeof r||null===r)return!1;for(var t=r;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t}function u(r,t){return function(){return t(r.apply(this,arguments))}}function f(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function c(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function p(r){for(var t=1;arguments.length>t;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?c(Object(e),!0).forEach((function(t){f(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function a(){for(var r=arguments.length,t=Array(r),e=0;r>e;e++)t[e]=arguments[e];return 0===t.length?function(r){return r}:1===t.length?t[0]:t.reduce((function(r,t){return function(){return r(t.apply(void 0,arguments))}}))}r.__DO_NOT_USE__ActionTypes=o,r.applyMiddleware=function(){for(var r=arguments.length,e=Array(r),n=0;r>n;n++)e[n]=arguments[n];return function(r){return function(){var n=r.apply(void 0,arguments),o=function(){throw Error(t(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},u=e.map((function(r){return r(i)}));return o=a.apply(void 0,u)(n.dispatch),p(p({},n),{},{dispatch:o})}}},r.bindActionCreators=function(r,e){if("function"==typeof r)return u(r,e);if("object"!=typeof r||null===r)throw Error(t(16));var n={};for(var o in r){var i=r[o];"function"==typeof i&&(n[o]=u(i,e))}return n},r.combineReducers=function(r){for(var e=Object.keys(r),n={},i=0;e.length>i;i++){var u=e[i];"function"==typeof r[u]&&(n[u]=r[u])}var f,c=Object.keys(n);try{!function(r){Object.keys(r).forEach((function(e){var n=r[e];if(void 0===n(void 0,{type:o.INIT}))throw Error(t(12));if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw Error(t(13))}))}(n)}catch(r){f=r}return function(r,e){if(void 0===r&&(r={}),f)throw f;for(var o=!1,i={},u=0;c.length>u;u++){var p=c[u],a=r[p],l=(0,n[p])(a,e);if(void 0===l)throw Error(t(14));i[p]=l,o=o||l!==a}return(o=o||c.length!==Object.keys(r).length)?i:r}},r.compose=a,r.createStore=function r(n,u,f){var c;if("function"==typeof u&&"function"==typeof f||"function"==typeof f&&"function"==typeof arguments[3])throw Error(t(0));if("function"==typeof u&&void 0===f&&(f=u,u=void 0),void 0!==f){if("function"!=typeof f)throw Error(t(1));return f(r)(n,u)}if("function"!=typeof n)throw Error(t(2));var p=n,a=u,l=[],d=l,s=!1;function y(){d===l&&(d=l.slice())}function h(){if(s)throw Error(t(3));return a}function b(r){if("function"!=typeof r)throw Error(t(4));if(s)throw Error(t(5));var e=!0;return y(),d.push(r),function(){if(e){if(s)throw Error(t(6));e=!1,y();var n=d.indexOf(r);d.splice(n,1),l=null}}}function v(r){if(!i(r))throw Error(t(7));if(void 0===r.type)throw Error(t(8));if(s)throw Error(t(9));try{s=!0,a=p(a,r)}finally{s=!1}for(var e=l=d,n=0;e.length>n;n++)(0,e[n])();return r}function O(r){if("function"!=typeof r)throw Error(t(10));p=r,v({type:o.REPLACE})}function E(){var r,n=b;return(r={subscribe:function(r){if("object"!=typeof r||null===r)throw Error(t(11));function e(){r.next&&r.next(h())}return e(),{unsubscribe:n(e)}}})[e]=function(){return this},r}return v({type:o.INIT}),(c={dispatch:v,subscribe:b,getState:h,replaceReducer:O})[e]=E,c},Object.defineProperty(r,"__esModule",{value:!0})}))}(),SM.currentModule=null}),"",{requires:[],preMinified:!0,node_modules:!0});
YUI.add('reselect', function (Y) {SM.currentModule = 'reselect';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
(function(e,r){if(typeof define==="function"&&define.amd){define("Reselect",["exports"],r)}else if(typeof exports!=="undefined"){r(exports)}else{var t={exports:{}};r(t.exports);e.Reselect=t.exports}})(this,function(e){"use strict";e.__esModule=true;e.defaultMemoize=r;e.createSelectorCreator=t;e.createStructuredSelector=n;function u(e,r){return e===r}function o(e,r,t){if(r===null||t===null||r.length!==t.length){return false}var n=r.length;for(var u=0;u<n;u++){if(!e(r[u],t[u])){return false}}return true}function r(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:u;var t=null;var n=null;return function(){if(!o(r,t,arguments)){n=e.apply(null,arguments)}t=arguments;return n}}function l(e){var r=Array.isArray(e[0])?e[0]:e;if(!r.every(function(e){return typeof e==="function"})){var t=r.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+t+"]"))}return r}function t(f){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++){i[r-1]=arguments[r]}return function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}var n=0;var u=r.pop();var o=l(r);var a=f.apply(undefined,[function(){n++;return u.apply(null,arguments)}].concat(i));var c=f(function(){var e=[];var r=o.length;for(var t=0;t<r;t++){e.push(o[t].apply(null,arguments))}return a.apply(null,e)});c.resultFunc=u;c.dependencies=o;c.recomputations=function(){return n};c.resetRecomputations=function(){return n=0};return c}}var a=e.createSelector=t(r);function n(r){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a;if(typeof r!=="object"){throw new Error("createStructuredSelector expects first argument to be an object "+("where each property is a selector, instead received a "+typeof r))}var n=Object.keys(r);return e(n.map(function(e){return r[e]}),function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}return r.reduce(function(e,r,t){e[n[t]]=r;return e},{})})}});
}());SM.currentModule = null;}, '', {"requires":[],"node_modules":true});
YUI.add("rsvp",(function(t){SM.currentModule="rsvp";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule},e=SM._requireShim;!function(){
/*!
 * @overview RSVP - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2016 Yehuda Katz, Tom Dale, Stefan Penner and contributors
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE
 * @version   4.8.4+ff10049b
 */var t,r;t=this,r=function(exports){"use strict";function t(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}var r={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(e,r){if("function"!=typeof r)throw new TypeError("Callback must be a function");var n=t(this),o=n[e];o||(o=n[e]=[]),-1===o.indexOf(r)&&o.push(r)},off:function(e,r){var n=t(this);if(r){var o=n[e],i=o.indexOf(r);-1!==i&&o.splice(i,1)}else n[e]=[]},trigger:function(e,r,n){var o=t(this)[e];if(o)for(var i=0;i<o.length;i++)(0,o[i])(r,n)}},n={instrument:!1};function o(t,e){if(2!==arguments.length)return n[t];n[t]=e}r.mixin(n);var i=[];function s(t,e,r){1===i.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:r&&r._id,label:e._label,timeStamp:Date.now(),error:n["instrument-with-stack"]?new Error(e._label):null}})&&setTimeout((function(){for(var t=0;t<i.length;t++){var e=i[t],r=e.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),n.trigger(e.name,e.payload)}i.length=0}),50)}function u(t,e){if(t&&"object"==typeof t&&t.constructor===this)return t;var r=new this(c,e);return _(r,t),r}function c(){}var a={error:null};function l(t){try{return t.then}catch(t){return a.error=t,a}}var f=void 0;function h(){try{var t=f;return f=null,t.apply(this,arguments)}catch(t){return a.error=t,a}}function p(t){return f=t,h}function y(t,e,r){if(e.constructor===t.constructor&&r===j&&t.constructor.resolve===u)!function(t,e){1===e._state?d(t,e._result):2===e._state?(e._onError=null,m(t,e._result)):w(e,void 0,(function(r){e===r?d(t,r):_(t,r)}),(function(e){return m(t,e)}))}(t,e);else if(r===a){var o=a.error;a.error=null,m(t,o)}else"function"==typeof r?function(t,e,r){n.async((function(t){var n=!1,o=p(r).call(e,(function(r){n||(n=!0,e===r?d(t,r):_(t,r))}),(function(e){n||(n=!0,m(t,e))}),"Settle: "+(t._label||" unknown promise"));if(!n&&o===a){n=!0;var i=a.error;a.error=null,m(t,i)}}),t)}(t,e,r):d(t,e)}function _(t,e){var r,n;t===e?d(t,e):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?d(t,e):y(t,e,l(e)))}function v(t){t._onError&&t._onError(t._result),b(t)}function d(t,e){void 0===t._state&&(t._result=e,t._state=1,0===t._subscribers.length?n.instrument&&s("fulfilled",t):n.async(b,t))}function m(t,e){void 0===t._state&&(t._state=2,t._result=e,n.async(v,t))}function w(t,e,r,o){var i=t._subscribers,s=i.length;t._onError=null,i[s]=e,i[s+1]=r,i[s+2]=o,0===s&&t._state&&n.async(b,t)}function b(t){var e=t._subscribers,r=t._state;if(n.instrument&&s(1===r?"fulfilled":"rejected",t),0!==e.length){for(var o=void 0,i=void 0,u=t._result,c=0;c<e.length;c+=3)o=e[c],i=e[c+r],o?g(r,o,i,u):i(u);t._subscribers.length=0}}function g(t,e,r,n){var o="function"==typeof r,i=void 0;if(i=o?p(r)(n):n,void 0!==e._state);else if(i===e)m(e,new TypeError("A promises callback cannot return that same promise."));else if(i===a){var s=a.error;a.error=null,m(e,s)}else o?_(e,i):1===t?d(e,i):2===t&&m(e,i)}function j(t,e,r){var o=this._state;if(1===o&&!t||2===o&&!e)return n.instrument&&s("chained",this,this),this;this._onError=null;var i=new this.constructor(c,r),u=this._result;if(n.instrument&&s("chained",this,i),void 0===o)w(this,i,t,e);else{var a=1===o?t:e;n.async((function(){return g(o,i,a,u)}))}return i}var O=function(){function t(t,e,r,n){this._instanceConstructor=t,this.promise=new t(c,n),this._abortOnReject=r,this._isUsingOwnPromise=t===S,this._isUsingOwnResolve=t.resolve===u,this._init.apply(this,arguments)}return t.prototype._init=function(t,e){var r=e.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(e)},t.prototype._enumerate=function(t){for(var e=this.length,r=this.promise,n=0;void 0===r._state&&n<e;n++)this._eachEntry(t[n],n,!0);this._checkFullfillment()},t.prototype._checkFullfillment=function(){if(0===this._remaining){var t=this._result;d(this.promise,t),this._result=null}},t.prototype._settleMaybeThenable=function(t,e,r){var n=this._instanceConstructor;if(this._isUsingOwnResolve){var o=l(t);if(o===j&&void 0!==t._state)t._onError=null,this._settledAt(t._state,e,t._result,r);else if("function"!=typeof o)this._settledAt(1,e,t,r);else if(this._isUsingOwnPromise){var i=new n(c);y(i,t,o),this._willSettleAt(i,e,r)}else this._willSettleAt(new n((function(e){return e(t)})),e,r)}else this._willSettleAt(n.resolve(t),e,r)},t.prototype._eachEntry=function(t,e,r){null!==t&&"object"==typeof t?this._settleMaybeThenable(t,e,r):this._setResultAt(1,e,t,r)},t.prototype._settledAt=function(t,e,r,n){var o=this.promise;void 0===o._state&&(this._abortOnReject&&2===t?m(o,r):(this._setResultAt(t,e,r,n),this._checkFullfillment()))},t.prototype._setResultAt=function(t,e,r,n){this._remaining--,this._result[e]=r},t.prototype._willSettleAt=function(t,e,r){var n=this;w(t,void 0,(function(t){return n._settledAt(1,e,t,r)}),(function(t){return n._settledAt(2,e,t,r)}))},t}();function E(t,e,r){this._remaining--,this._result[e]=1===t?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}var A="rsvp_"+Date.now()+"-",T=0,S=function(){function t(e,r){this._id=T++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],n.instrument&&s("created",this),c!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){var r=!1;try{e((function(e){r||(r=!0,_(t,e))}),(function(e){r||(r=!0,m(t,e))}))}catch(e){m(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype._onError=function(t){var e=this;n.after((function(){e._onError&&n.trigger("error",t,e._label)}))},t.prototype.catch=function(t,e){return this.then(void 0,t,e)},t.prototype.finally=function(t,e){var r=this.constructor;return"function"==typeof t?this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();function P(t,e){for(var r={},n=t.length,o=new Array(n),i=0;i<n;i++)o[i]=t[i];for(var s=0;s<e.length;s++)r[e[s]]=o[s+1];return r}function M(t){for(var e=t.length,r=new Array(e-1),n=1;n<e;n++)r[n-1]=t[n];return r}function R(t,e){return{then:function(r,n){return t.call(e,r,n)}}}function k(t,e){var r=function(){for(var r=arguments.length,n=new Array(r+1),o=!1,i=0;i<r;++i){var s=arguments[i];if(!o){if((o=F(s))===a){var u=a.error;a.error=null;var l=new S(c);return m(l,u),l}o&&!0!==o&&(s=R(o,s))}n[i]=s}var f=new S(c);return n[r]=function(t,r){t?m(f,t):void 0===e?_(f,r):!0===e?_(f,M(arguments)):Array.isArray(e)?_(f,P(arguments,e)):_(f,r)},o?C(f,n,t,this):x(f,n,t,this)};return r.__proto__=t,r}function x(t,e,r,n){if(p(r).apply(n,e)===a){var o=a.error;a.error=null,m(t,o)}return t}function C(t,e,r,n){return S.all(e).then((function(e){return x(t,e,r,n)}))}function F(t){return null!==t&&"object"==typeof t&&(t.constructor===S||l(t))}function I(t,e){return S.all(t,e)}S.cast=u,S.all=function(t,e){return Array.isArray(t)?new O(this,t,!0,e).promise:this.reject(new TypeError("Promise.all must be called with an array"),e)},S.race=function(t,e){var r=new this(c,e);if(!Array.isArray(t))return m(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;void 0===r._state&&n<t.length;n++)w(this.resolve(t[n]),void 0,(function(t){return _(r,t)}),(function(t){return m(r,t)}));return r},S.resolve=u,S.reject=function(t,e){var r=new this(c,e);return m(r,t),r},S.prototype._guidKey=A,S.prototype.then=j;var N=function(t){function e(e,r,n){return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,e,r,!1,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(O);function U(t,e){return Array.isArray(t)?new N(S,t,e).promise:S.reject(new TypeError("Promise.allSettled must be called with an array"),e)}function q(t,e){return S.race(t,e)}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}N.prototype._setResultAt=E;var K=function(t){function e(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return D(this,t.call(this,e,r,n,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._init=function(t,e){this._result={},this._enumerate(e)},e.prototype._enumerate=function(t){var e=Object.keys(t),r=e.length,n=this.promise;this._remaining=r;for(var o=void 0,i=void 0,s=0;void 0===n._state&&s<r;s++)i=t[o=e[s]],this._eachEntry(i,o,!0);this._checkFullfillment()},e}(O);function Y(t,e){return S.resolve(t,e).then((function(t){if(null===t||"object"!=typeof t)throw new TypeError("Promise.hash must be called with an object");return new K(S,t,e).promise}))}var G=function(t){function e(e,r,n){return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,e,r,!1,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(K);function L(t,e){return S.resolve(t,e).then((function(t){if(null===t||"object"!=typeof t)throw new TypeError("hashSettled must be called with an object");return new G(S,t,!1,e).promise}))}function V(t){throw setTimeout((function(){throw t})),t}function W(t){var e={resolve:void 0,reject:void 0};return e.promise=new S((function(t,r){e.resolve=t,e.reject=r}),t),e}G.prototype._setResultAt=E;var $=function(t){function e(e,r,n,o){return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,e,r,!0,o,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._init=function(t,e,r,n,o){var i=e.length||0;this.length=i,this._remaining=i,this._result=new Array(i),this._mapFn=o,this._enumerate(e)},e.prototype._setResultAt=function(t,e,r,n){if(n){var o=p(this._mapFn)(r,e);o===a?this._settledAt(2,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,this._result[e]=r},e}(O);function z(t,e,r){return"function"!=typeof e?S.reject(new TypeError("map expects a function as a second argument"),r):S.resolve(t,r).then((function(t){if(!Array.isArray(t))throw new TypeError("map must be called with an array");return new $(S,t,e,r).promise}))}function B(t,e){return S.resolve(t,e)}function H(t,e){return S.reject(t,e)}function J(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var Q={},X=function(t){function e(){return J(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._checkFullfillment=function(){if(0===this._remaining&&null!==this._result){var t=this._result.filter((function(t){return t!==Q}));d(this.promise,t),this._result=null}},e.prototype._setResultAt=function(t,e,r,n){if(n){this._result[e]=r;var o=p(this._mapFn)(r,e);o===a?this._settledAt(2,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,r||(this._result[e]=Q)},e}($);function Z(t,e,r){return"function"!=typeof e?S.reject(new TypeError("filter expects function as a second argument"),r):S.resolve(t,r).then((function(t){if(!Array.isArray(t))throw new TypeError("filter must be called with an array");return new X(S,t,e,r).promise}))}var tt=0,et=void 0;function rt(t,e){at[tt]=t,at[tt+1]=e,2===(tt+=2)&&dt()}var nt="undefined"!=typeof window?window:void 0,ot=nt||{},it=ot.MutationObserver||ot.WebKitMutationObserver,st="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ut="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function ct(){return function(){return setTimeout(lt,1)}}var at=new Array(1e3);function lt(){for(var t=0;t<tt;t+=2)(0,at[t])(at[t+1]),at[t]=void 0,at[t+1]=void 0;tt=0}var ft,ht,pt,yt,_t,vt,dt=void 0;st?(_t=process.nextTick,vt=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(vt)&&"0"===vt[1]&&"10"===vt[2]&&(_t=setImmediate),dt=function(){return _t(lt)}):it?(ht=0,pt=new it(lt),yt=document.createTextNode(""),pt.observe(yt,{characterData:!0}),dt=function(){return yt.data=ht=++ht%2}):ut?((ft=new MessageChannel).port1.onmessage=lt,dt=function(){return ft.port2.postMessage(0)}):dt=void 0===nt&&"function"==typeof e?function(){try{var t=Function("return this")().require("vertx");return void 0!==(et=t.runOnLoop||t.runOnContext)?function(){et(lt)}:ct()}catch(t){return ct()}}():ct(),n.async=rt,n.after=function(t){return setTimeout(t,0)};var mt=B,wt=function(t,e){return n.async(t,e)};function bt(){n.on.apply(n,arguments)}function gt(){n.off.apply(n,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var jt=window.__PROMISE_INSTRUMENTATION__;for(var Ot in o("instrument",!0),jt)jt.hasOwnProperty(Ot)&&bt(Ot,jt[Ot])}var Et={asap:rt,cast:mt,Promise:S,EventTarget:r,all:I,allSettled:U,race:q,hash:Y,hashSettled:L,rethrow:V,defer:W,denodeify:k,configure:o,on:bt,off:gt,resolve:B,reject:H,map:z,async:wt,filter:Z};exports.default=Et,exports.asap=rt,exports.cast=mt,exports.Promise=S,exports.EventTarget=r,exports.all=I,exports.allSettled=U,exports.race=q,exports.hash=Y,exports.hashSettled=L,exports.rethrow=V,exports.defer=W,exports.denodeify=k,exports.configure=o,exports.on=bt,exports.off=gt,exports.resolve=B,exports.reject=H,exports.map=z,exports.async=wt,exports.filter=Z,Object.defineProperty(exports,"__esModule",{value:!0})},"object"==typeof exports&&void 0!==module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.RSVP={})}(),SM.currentModule=null}),"",{requires:[],node_modules:!0});
YUI.add("sentry-integration-extraerrordata",(function(t){SM.currentModule="sentry-integration-extraerrordata";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(t){var n={};Object.defineProperty(n,"__esModule",{value:!0});var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},r=function(){return(r=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function o(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return u(t,Error)}}function i(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function a(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t){return"undefined"!=typeof Element&&u(t,Element)}function u(t,n){try{return t instanceof n}catch(t){return!1}}function f(t,n){try{for(var e=t,r=[],o=0,i=0,a=" > ".length,c=void 0;e&&o++<5&&!("html"===(c=l(e,n))||o>1&&i+r.length*a+c.length>=80);)r.push(c),i+=c.length,e=e.parentNode;return r.reverse().join(" > ")}catch(t){return"<unknown>"}}function l(t,n){var e,r,o,i,a,c,u,f=t,l=[];if(!f||!f.tagName)return"";l.push(f.tagName.toLowerCase());var s,p=(null===(e=n)||void 0===e?void 0:e.length)?n.filter((function(t){return f.getAttribute(t)})).map((function(t){return[t,f.getAttribute(t)]})):null;if(null===(r=p)||void 0===r?void 0:r.length)p.forEach((function(t){l.push("["+t[0]+'="'+t[1]+'"]')}));else if(f.id&&l.push("#"+f.id),(o=f.className)&&(s=o,"[object String]"===Object.prototype.toString.call(s)))for(i=o.split(/\s+/),u=0;u<i.length;u++)l.push("."+i[u]);var h=["type","name","title","alt"];for(u=0;u<h.length;u++)a=h[u],(c=f.getAttribute(a))&&l.push("["+a+'="'+c+'"]');return l.join("")}var s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){return t.__proto__=n,t}:function(t,n){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e]);return t});function p(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}!function(t){!function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}((function(n){var e=this.constructor,r=t.call(this,n)||this;return r.message=n,r.name=e.prototype.constructor.name,s(r,e.prototype),r}),t)}(Error);var h={};function y(){return p()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:h}function d(t){var n=y();if(!("console"in n))return t();var e=n.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in n.console&&e[t].__sentry_original__&&(r[t]=e[t],e[t]=e[t].__sentry_original__)}));var o=t();return Object.keys(r).forEach((function(t){e[t]=r[t]})),o}var _=y(),v="Sentry Logger ",g=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._enabled&&d((function(){_.console.log(v+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._enabled&&d((function(){_.console.warn(v+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._enabled&&d((function(){_.console.error(v+"[Error]: "+t.join(" "))}))},t}();_.__SENTRY__=_.__SENTRY__||{};var m,E=_.__SENTRY__.logger||(_.__SENTRY__.logger=new g),b=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var n=0;n<this._inner.length;n++)if(this._inner[n]===t)return!0;return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var n=0;n<this._inner.length;n++)if(this._inner[n]===t){this._inner.splice(n,1);break}},t}(),w="<anonymous>";function S(t){if(o(t)){var n=t,e={message:n.message,name:n.name,stack:n.stack};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}if("undefined"!=typeof Event&&u(t,Event)){var i=t,a={};a.type=i.type;try{a.target=c(i.target)?f(i.target):Object.prototype.toString.call(i.target)}catch(t){a.target="<unknown>"}try{a.currentTarget=c(i.currentTarget)?f(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(t){a.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&u(t,CustomEvent)&&(a.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i);return a}return t}function O(t,n){return"domain"===n&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":a(e=t)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+function(t){try{return t&&"function"==typeof t&&t.name||w}catch(t){return w}}(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var e}function j(t,n,e,r){if(void 0===e&&(e=1/0),void 0===r&&(r=new b),0===e)return function(t){var n=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===n)return"[Object]";if("[object Array]"===n)return"[Array]";var e=O(t);return i(e)?e:n}(n);if(null!=n&&"function"==typeof n.toJSON)return n.toJSON();var o=O(n,t);if(i(o))return o;var a=S(n),c=Array.isArray(n)?[]:{};if(r.memoize(n))return"[Circular ~]";for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(c[u]=j(u,a[u],e-1,r));return r.unmemoize(n),c}y(),function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(m||(m={})),function(){function t(t){var n=this;this._state=m.PENDING,this._handlers=[],this._resolve=function(t){n._setResult(m.RESOLVED,t)},this._reject=function(t){n._setResult(m.REJECTED,t)},this._setResult=function(t,e){var r;n._state===m.PENDING&&(r=e,Boolean(r&&r.then&&"function"==typeof r.then)?e.then(n._resolve,n._reject):(n._state=t,n._value=e,n._executeHandlers()))},this._attachHandler=function(t){n._handlers=n._handlers.concat(t),n._executeHandlers()},this._executeHandlers=function(){if(n._state!==m.PENDING){var t=n._handlers.slice();n._handlers=[],t.forEach((function(t){t.done||(n._state===m.RESOLVED&&t.onfulfilled&&t.onfulfilled(n._value),n._state===m.REJECTED&&t.onrejected&&t.onrejected(n._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}t.resolve=function(n){return new t((function(t){t(n)}))},t.reject=function(n){return new t((function(t,e){e(n)}))},t.all=function(n){return new t((function(e,r){if(Array.isArray(n))if(0!==n.length){var o=n.length,i=[];n.forEach((function(n,a){t.resolve(n).then((function(t){i[a]=t,0==(o-=1)&&e(i)})).then(null,r)}))}else e([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(n,e){var r=this;return new t((function(t,o){r._attachHandler({done:!1,onfulfilled:function(e){if(n)try{return void t(n(e))}catch(t){return void o(t)}else t(e)},onrejected:function(n){if(e)try{return void t(e(n))}catch(t){return void o(t)}else o(n)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(n){var e=this;return new t((function(t,r){var o,i;return e.then((function(t){i=!1,o=t,n&&n()}),(function(t){i=!0,o=t,n&&n()})).then((function(){i?r(o):t(o)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"}}();var N={nowSeconds:function(){return Date.now()/1e3}},D=p()?function(){try{return(t=module,t.require("perf_hooks")).performance}catch(t){return}var t}():function(){var t=y().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),x=void 0===D?N:{nowSeconds:function(){return(D.timeOrigin+D.now())/1e3}},P=(N.nowSeconds.bind(N),x.nowSeconds.bind(x),function(){var t=y().performance;if(t&&t.now){var n=t.now(),e=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+n-e):36e5,o=r<36e5,i=t.timing&&t.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-e):36e5;(o||a<36e5)&&r<=a&&t.timeOrigin}}(),function(){function t(n){void 0===n&&(n={depth:3}),this._options=n,this.name=t.id}return t.prototype.setupOnce=function(n,e){n((function(n,r){var o=e().getIntegration(t);return o?o.enhanceEventWithErrorData(n,r):n}))},t.prototype.enhanceEventWithErrorData=function(t,n){var e;if(!n||!n.originalException||!o(n.originalException))return t;var i=n.originalException.name||n.originalException.constructor.name,c=this._extractErrorData(n.originalException);if(c){var u=r({},t.contexts),f=function(t,n){try{return JSON.parse(JSON.stringify(t,(function(t,e){return j(t,e,n)})))}catch(t){return"**non-serializable**"}}(c,this._options.depth);return a(f)&&(u=r(r({},t.contexts),((e={})[i]=r({},f),e))),r(r({},t),{contexts:u})}return t},t.prototype._extractErrorData=function(t){var n,e,r=null;try{var i=["name","message","stack","line","column","fileName","lineNumber","columnNumber"],a=Object.getOwnPropertyNames(t).filter((function(t){return-1===i.indexOf(t)}));if(a.length){var c={};try{for(var u=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(a),f=u.next();!f.done;f=u.next()){var l=f.value,s=t[l];o(s)&&(s=s.toString()),c[l]=s}}catch(t){n={error:t}}finally{try{f&&!f.done&&(e=u.return)&&e.call(u)}finally{if(n)throw n.error}}r=c}}catch(t){E.error("Unable to extract extra data from the Error object:",t)}return r},t.id="ExtraErrorData",t}());for(var k in n.ExtraErrorData=P,t.Sentry=t.Sentry||{},t.Sentry.Integrations=t.Sentry.Integrations||{},n)Object.prototype.hasOwnProperty.call(n,k)&&(t.Sentry.Integrations[k]=n[k])}(window),SM.currentModule=null}),"",{requires:[],node_modules:!0,preMinified:!0});
YUI.add("sentry",(function(t){SM.currentModule="sentry";var e,exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;e=function(t){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)};function n(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i,o,a,s,c,u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function p(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function f(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return T(t,Error)}}function v(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function g(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function y(t){return"[object String]"===Object.prototype.toString.call(t)}function m(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function _(t){return"[object Object]"===Object.prototype.toString.call(t)}function S(t){return"undefined"!=typeof Event&&T(t,Event)}function b(t){return"undefined"!=typeof Element&&T(t,Element)}function E(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function T(t,e){try{return t instanceof e}catch(t){return!1}}function x(t,e){try{for(var n=t,r=[],i=0,o=0,a=" > ".length,s=void 0;n&&i++<5&&!("html"===(s=w(n,e))||i>1&&o+r.length*a+s.length>=80);)r.push(s),o+=s.length,n=n.parentNode;return r.reverse().join(" > ")}catch(t){return"<unknown>"}}function w(t,e){var n,r,i,o,a,s,c,u=t,p=[];if(!u||!u.tagName)return"";p.push(u.tagName.toLowerCase());var h=(null===(n=e)||void 0===n?void 0:n.length)?e.filter((function(t){return u.getAttribute(t)})).map((function(t){return[t,u.getAttribute(t)]})):null;if(null===(r=h)||void 0===r?void 0:r.length)h.forEach((function(t){p.push("["+t[0]+'="'+t[1]+'"]')}));else if(u.id&&p.push("#"+u.id),(i=u.className)&&y(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)p.push("."+o[c]);var d=["type","name","title","alt"];for(c=0;c<d.length;c++)a=d[c],(s=u.getAttribute(a))&&p.push("["+a+'="'+s+'"]');return p.join("")}!function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Debug=2]="Debug",t[t.Verbose=3]="Verbose"}(r||(r={})),function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"}(i||(i={})),function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"}(o||(o={})),(a=t.Severity||(t.Severity={})).Fatal="fatal",a.Error="error",a.Warning="warning",a.Log="log",a.Info="info",a.Debug="debug",a.Critical="critical",function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(t.Severity||(t.Severity={})),(s=t.Status||(t.Status={})).Unknown="unknown",s.Skipped="skipped",s.Success="success",s.RateLimit="rate_limit",s.Invalid="invalid",s.Failed="failed",function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(t.Status||(t.Status={})),function(t){t.Explicit="explicitly_set",t.Sampler="client_sampler",t.Rate="client_rate",t.Inheritance="inheritance"}(c||(c={}));var k=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}),O=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,k(r,n.prototype),r}return n(e,t),e}(Error),I=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,R=function(){function t(t){"string"==typeof t?this.t(t):this.i(t),this.o()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.host,r=e.path,i=e.pass,o=e.port,a=e.projectId;return e.protocol+"://"+e.publicKey+(t&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+a},t.prototype.t=function(t){var e=I.exec(t);if(!e)throw new O("Invalid Dsn");var n=d(e.slice(1),6),r=n[0],i=n[1],o=n[2],a=void 0===o?"":o,s=n[3],c=n[4],u=void 0===c?"":c,p="",h=n[5],l=h.split("/");if(l.length>1&&(p=l.slice(0,-1).join("/"),h=l.pop()),h){var f=h.match(/^\d+/);f&&(h=f[0])}this.i({host:s,pass:a,path:p,projectId:h,port:u,protocol:r,publicKey:i})},t.prototype.i=function(t){"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),this.user=t.publicKey||"",this.protocol=t.protocol,this.publicKey=t.publicKey||"",this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype.o=function(){var t=this;if(["protocol","publicKey","host","projectId"].forEach((function(e){if(!t[e])throw new O("Invalid Dsn: "+e+" missing")})),!this.projectId.match(/^\d+$/))throw new O("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new O("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new O("Invalid Dsn: Invalid port "+this.port)},t}();function j(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function D(t,e){return t.require(e)}function C(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function N(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var i=t[r];try{n.push(String(i))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function A(t,e){return!!y(t)&&(n=e,"[object RegExp]"===Object.prototype.toString.call(n)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e));var n}var M={};function L(){return j()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:M}function U(){var t=L(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function P(t){if(!t)return{};var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function q(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function F(t){var e=L();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)}));var i=t();return Object.keys(r).forEach((function(t){n[t]=r[t]})),i}function H(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function B(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(n){t.exception.values[0].mechanism[n]=e[n]}))}catch(t){}}var Y=L(),J="Sentry Logger ",W=function(){function t(){this.u=!1}return t.prototype.disable=function(){this.u=!1},t.prototype.enable=function(){this.u=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.u&&F((function(){Y.console.log(J+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.u&&F((function(){Y.console.warn(J+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.u&&F((function(){Y.console.error(J+"[Error]: "+t.join(" "))}))},t}();Y.__SENTRY__=Y.__SENTRY__||{};var X=Y.__SENTRY__.logger||(Y.__SENTRY__.logger=new W),z=function(){function t(){this.s="function"==typeof WeakSet,this.h=this.s?new WeakSet:[]}return t.prototype.memoize=function(t){if(this.s)return!!this.h.has(t)||(this.h.add(t),!1);for(var e=0;e<this.h.length;e++)if(this.h[e]===t)return!0;return this.h.push(t),!1},t.prototype.unmemoize=function(t){if(this.s)this.h.delete(t);else for(var e=0;e<this.h.length;e++)if(this.h[e]===t){this.h.splice(e,1);break}},t}(),G="<anonymous>";function K(t){try{return t&&"function"==typeof t&&t.name||G}catch(t){return G}}function V(t,e,n){if(e in t){var r=t[e],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(t){}t[e]=i}}function $(t){if(f(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(S(t)){var i=t,o={};o.type=i.type;try{o.target=b(i.target)?x(i.target):Object.prototype.toString.call(i.target)}catch(t){o.target="<unknown>"}try{o.currentTarget=b(i.currentTarget)?x(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(t){o.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&T(t,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i);return o}return t}function Z(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r=tt(t,e);return function(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}(r)>n?Z(t,e-1,n):r}function Q(t,e){return"domain"===e&&t&&"object"==typeof t&&t.v?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":_(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+K(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var n}function tt(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,n){return function t(e,n,r,i){if(void 0===r&&(r=1/0),void 0===i&&(i=new z),0===r)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=Q(t);return m(n)?n:e}(n);if(null!=n&&"function"==typeof n.toJSON)return n.toJSON();var o=Q(n,e);if(m(o))return o;var a=$(n),s=Array.isArray(n)?[]:{};if(i.memoize(n))return"[Circular ~]";for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(s[c]=t(c,a[c],r-1,i));return i.unmemoize(n),s}(t,n,e)})))}catch(t){return"**non-serializable**"}}function et(t,e){void 0===e&&(e=40);var n=Object.keys($(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return C(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:C(i,e)}return""}function nt(t){var e,n;if(_(t)){var r=t,i={};try{for(var o=h(Object.keys(r)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==r[s]&&(i[s]=nt(r[s]))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return Array.isArray(t)?t.map(nt):t}function rt(){if(!("fetch"in L()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function it(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function ot(){if(!rt())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var at,st,ct,ut=L(),pt={},ht={};function dt(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(pt[t.type]=pt[t.type]||[],pt[t.type].push(t.callback),function(t){if(!ht[t])switch(ht[t]=!0,t){case"console":"console"in ut&&["debug","info","warn","error","log","assert"].forEach((function(t){t in ut.console&&V(ut.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];lt("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,ut.console,n)}}))}));break;case"dom":!function(){if("document"in ut){var t=lt.bind(null,"dom"),e=gt(t,!0);ut.document.addEventListener("click",e,!1),ut.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((function(e){var n=ut[e]&&ut[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(V(n,"addEventListener",(function(e){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){var s=gt(t);a.handler=s,e.call(this,n,s,i)}a.refCount+=1}catch(t){}return e.call(this,n,r,i)}})),V(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[e];o&&(o.refCount-=1,o.refCount<=0&&(t.call(this,e,o.handler,r),o.handler=void 0,delete i[e]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}}();break;case"xhr":!function(){if("XMLHttpRequest"in ut){var t=[],e=[],n=XMLHttpRequest.prototype;V(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,a=r[1];o.__sentry_xhr__={method:y(r[0])?r[0].toUpperCase():r[0],url:r[1]},y(a)&&"POST"===o.__sentry_xhr__.method&&a.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var s=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(t){}try{var n=t.indexOf(o);if(-1!==n){t.splice(n);var i=e.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(t){}lt("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?V(o,"onreadystatechange",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(),t.apply(o,e)}})):o.addEventListener("readystatechange",s),n.apply(o,r)}})),V(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.push(this),e.push(r),lt("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}}();break;case"fetch":(function(){if(!rt())return!1;var t=L();if(it(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=it(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){X.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e})()&&V(ut,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:ft(e),url:vt(e)},startTimestamp:Date.now()};return lt("fetch",u({},r)),t.apply(ut,e).then((function(t){return lt("fetch",u(u({},r),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw lt("fetch",u(u({},r),{endTimestamp:Date.now(),error:t})),t}))}}));break;case"history":!function(){if(n=(e=(t=L()).chrome)&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState,!n&&r){var t,e,n,r,i=ut.onpopstate;ut.onpopstate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ut.location.href,r=at;if(at=n,lt("history",{from:r,to:n}),i)try{return i.apply(this,t)}catch(t){}},V(ut.history,"pushState",o),V(ut.history,"replaceState",o)}function o(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var i=at,o=String(r);at=o,lt("history",{from:i,to:o})}return t.apply(this,e)}}}();break;case"error":mt=ut.onerror,ut.onerror=function(t,e,n,r,i){return lt("error",{column:r,error:i,line:n,msg:t,url:e}),!!mt&&mt.apply(this,arguments)};break;case"unhandledrejection":_t=ut.onunhandledrejection,ut.onunhandledrejection=function(t){return lt("unhandledrejection",t),!_t||_t.apply(this,arguments)};break;default:X.warn("unknown instrumentation type:",t)}}(t.type))}function lt(t,e){var n,r;if(t&&pt[t])try{for(var i=h(pt[t]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e)}catch(e){X.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+K(a)+"\nError: "+e)}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function ft(t){return void 0===t&&(t=[]),"Request"in ut&&T(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function vt(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in ut&&T(t[0],Request)?t[0].url:String(t[0])}function gt(t,e){return void 0===e&&(e=!1),function(n){if(n&&ct!==n&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===st||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(ct,n))&&(t({event:n,name:r,global:e}),ct=n),clearTimeout(st),st=ut.setTimeout((function(){st=void 0}),1e3)}}}var yt,mt=null,_t=null;!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(yt||(yt={}));var St=function(){function t(t){var e=this;this.l=yt.PENDING,this.p=[],this.m=function(t){e.g(yt.RESOLVED,t)},this.T=function(t){e.g(yt.REJECTED,t)},this.g=function(t,n){e.l===yt.PENDING&&(E(n)?n.then(e.m,e.T):(e.l=t,e.S=n,e._()))},this.j=function(t){e.p=e.p.concat(t),e._()},this._=function(){if(e.l!==yt.PENDING){var t=e.p.slice();e.p=[],t.forEach((function(t){t.done||(e.l===yt.RESOLVED&&t.onfulfilled&&t.onfulfilled(e.S),e.l===yt.REJECTED&&t.onrejected&&t.onrejected(e.S),t.done=!0)}))}};try{t(this.m,this.T)}catch(t){this.T(t)}}return t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var i=e.length,o=[];e.forEach((function(e,a){t.resolve(e).then((function(t){o[a]=t,0==(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,i){r.j({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void i(t)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void i(t)}else i(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var i,o;return n.then((function(t){o=!1,i=t,e&&e()}),(function(t){o=!0,i=t,e&&e()})).then((function(){o?r(i):t(i)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),bt=function(){function t(t){this.k=t,this.O=[]}return t.prototype.isReady=function(){return void 0===this.k||this.length()<this.k},t.prototype.add=function(t){var e=this;if(!this.isReady())return St.reject(new O("Not adding Promise due to buffer limit reached."));var n=t();return-1===this.O.indexOf(n)&&this.O.push(n),n.then((function(){return e.remove(n)})).then(null,(function(){return e.remove(n).then(null,(function(){}))})),n},t.prototype.remove=function(t){return this.O.splice(this.O.indexOf(t),1)[0]},t.prototype.length=function(){return this.O.length},t.prototype.drain=function(t){var e=this;return new St((function(n){var r=setTimeout((function(){t&&t>0&&n(!1)}),t);St.all(e.O).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},t}(),Et={nowSeconds:function(){return Date.now()/1e3}},Tt=j()?function(){try{return D(module,"perf_hooks").performance}catch(t){return}}():function(){var t=L().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),xt=void 0===Tt?Et:{nowSeconds:function(){return(Tt.timeOrigin+Tt.now())/1e3}},wt=Et.nowSeconds.bind(Et),kt=xt.nowSeconds.bind(xt),Ot=kt,It=function(){var t=L().performance;if(t&&t.now){var e=t.now(),n=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+e-n):36e5,i=r<36e5,o=t.timing&&t.timing.navigationStart,a="number"==typeof o?Math.abs(o+e-n):36e5;return i||a<36e5?r<=a?t.timeOrigin:o:n}}(),Rt=function(){function t(){this.D=!1,this.I=[],this.N=[],this.R=[],this.C={},this.M={},this.A={},this.L={}}return t.clone=function(e){var n=new t;return e&&(n.R=l(e.R),n.M=u({},e.M),n.A=u({},e.A),n.L=u({},e.L),n.C=e.C,n.q=e.q,n.F=e.F,n.P=e.P,n.U=e.U,n.H=e.H,n.N=l(e.N),n.B=e.B),n},t.prototype.addScopeListener=function(t){this.I.push(t)},t.prototype.addEventProcessor=function(t){return this.N.push(t),this},t.prototype.setUser=function(t){return this.C=t||{},this.P&&this.P.update({user:t}),this.J(),this},t.prototype.getUser=function(){return this.C},t.prototype.getRequestSession=function(){return this.B},t.prototype.setRequestSession=function(t){return this.B=t,this},t.prototype.setTags=function(t){return this.M=u(u({},this.M),t),this.J(),this},t.prototype.setTag=function(t,e){var n;return this.M=u(u({},this.M),((n={})[t]=e,n)),this.J(),this},t.prototype.setExtras=function(t){return this.A=u(u({},this.A),t),this.J(),this},t.prototype.setExtra=function(t,e){var n;return this.A=u(u({},this.A),((n={})[t]=e,n)),this.J(),this},t.prototype.setFingerprint=function(t){return this.H=t,this.J(),this},t.prototype.setLevel=function(t){return this.q=t,this.J(),this},t.prototype.setTransactionName=function(t){return this.U=t,this.J(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this.L[t]:this.L=u(u({},this.L),((n={})[t]=e,n)),this.J(),this},t.prototype.setSpan=function(t){return this.F=t,this.J(),this},t.prototype.getSpan=function(){return this.F},t.prototype.getTransaction=function(){var t,e,n,r,i=this.getSpan();return(null===(t=i)||void 0===t?void 0:t.transaction)?null===(e=i)||void 0===e?void 0:e.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this.P=t:delete this.P,this.J(),this},t.prototype.getSession=function(){return this.P},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this.M=u(u({},this.M),e.M),this.A=u(u({},this.A),e.A),this.L=u(u({},this.L),e.L),e.C&&Object.keys(e.C).length&&(this.C=e.C),e.q&&(this.q=e.q),e.H&&(this.H=e.H),e.B&&(this.B=e.B)):_(e)&&(e=e,this.M=u(u({},this.M),e.tags),this.A=u(u({},this.A),e.extra),this.L=u(u({},this.L),e.contexts),e.user&&(this.C=e.user),e.level&&(this.q=e.level),e.fingerprint&&(this.H=e.fingerprint),e.requestSession&&(this.B=e.requestSession)),this},t.prototype.clear=function(){return this.R=[],this.M={},this.A={},this.C={},this.L={},this.q=void 0,this.U=void 0,this.H=void 0,this.B=void 0,this.F=void 0,this.P=void 0,this.J(),this},t.prototype.addBreadcrumb=function(t,e){var n="number"==typeof e?Math.min(e,100):100;if(n<=0)return this;var r=u({timestamp:wt()},t);return this.R=l(this.R,[r]).slice(-n),this.J(),this},t.prototype.clearBreadcrumbs=function(){return this.R=[],this.J(),this},t.prototype.applyToEvent=function(t,e){var n;if(this.A&&Object.keys(this.A).length&&(t.extra=u(u({},this.A),t.extra)),this.M&&Object.keys(this.M).length&&(t.tags=u(u({},this.M),t.tags)),this.C&&Object.keys(this.C).length&&(t.user=u(u({},this.C),t.user)),this.L&&Object.keys(this.L).length&&(t.contexts=u(u({},this.L),t.contexts)),this.q&&(t.level=this.q),this.U&&(t.transaction=this.U),this.F){t.contexts=u({trace:this.F.getTraceContext()},t.contexts);var r=null===(n=this.F.transaction)||void 0===n?void 0:n.name;r&&(t.tags=u({transaction:r},t.tags))}return this.X(t),t.breadcrumbs=l(t.breadcrumbs||[],this.R),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this.G(l(jt(),this.N),t,e)},t.prototype.G=function(t,e,n,r){var i=this;return void 0===r&&(r=0),new St((function(o,a){var s=t[r];if(null===e||"function"!=typeof s)o(e);else{var c=s(u({},e),n);E(c)?c.then((function(e){return i.G(t,e,n,r+1).then(o)})).then(null,a):i.G(t,c,n,r+1).then(o).then(null,a)}}))},t.prototype.J=function(){var t=this;this.D||(this.D=!0,this.I.forEach((function(e){e(t)})),this.D=!1)},t.prototype.X=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this.H&&(t.fingerprint=t.fingerprint.concat(this.H)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function jt(){var t=L();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Dt(t){jt().push(t)}var Ct=function(){function t(t){this.errors=0,this.sid=U(),this.duration=0,this.status=i.Ok,this.init=!0,this.ignoreDuration=!1;var e=kt();this.timestamp=e,this.started=e,t&&this.update(t)}return t.prototype.update=function(t){if(void 0===t&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),this.did||t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||kt(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=32===t.sid.length?t.sid:U()),void 0!==t.init&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof t.duration)this.duration=t.duration;else{var e=this.timestamp-this.started;this.duration=e>=0?e:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):this.status===i.Ok?this.update({status:i.Exited}):this.update()},t.prototype.toJSON=function(){return nt({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:nt({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),Nt=function(){function t(t,e,n){void 0===e&&(e=new Rt),void 0===n&&(n=4),this.W=n,this.$=[{}],this.getStackTop().scope=e,this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this.W<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=Rt.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this.$},t.prototype.getStackTop=function(){return this.$[this.$.length-1]},t.prototype.captureException=function(t,e){var n=this.K=U(),r=e;if(!e){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(t){i=t}r={originalException:t,syntheticException:i}}return this.V("captureException",t,u(u({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this.K=U(),i=n;if(!n){var o=void 0;try{throw new Error(t)}catch(t){o=t}i={originalException:t,syntheticException:o}}return this.V("captureMessage",t,e,u(u({},i),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this.K=U();return this.V("captureEvent",t,u(u({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this.K},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,c=o.maxBreadcrumbs,p=void 0===c?100:c;if(!(p<=0)){var h=wt(),d=u({timestamp:h},t),l=s?F((function(){return s(d,e)})):d;null!==l&&r.addBreadcrumb(l,p)}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=Mt(this);try{t(this)}finally{Mt(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return X.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this.Y("startSpan",t)},t.prototype.startTransaction=function(t,e){return this.Y("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this.Y("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this.Z()},t.prototype.endSession=function(){var t,e,n,r,i;null===(n=null===(e=null===(t=this.getStackTop())||void 0===t?void 0:t.scope)||void 0===e?void 0:e.getSession())||void 0===n||n.close(),this.Z(),null===(i=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===i||i.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),n=e.scope,r=e.client,o=r&&r.getOptions()||{},a=o.release,s=o.environment,c=(L().navigator||{}).userAgent,p=new Ct(u(u(u({release:a,environment:s},n&&{user:n.getUser()}),c&&{userAgent:c}),t));if(n){var h=n.getSession&&n.getSession();h&&h.status===i.Ok&&h.update({status:i.Exited}),this.endSession(),n.setSession(p)}return p},t.prototype.Z=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},t.prototype.V=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,a=i.client;a&&a[t]&&(e=a)[t].apply(e,l(n,[o]))},t.prototype.Y=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=At().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[t])return r.extensions[t].apply(this,e);X.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function At(){var t=L();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Mt(t){var e=At(),n=Pt(e);return qt(e,t),n}function Lt(){var t=At();return Ut(t)&&!Pt(t).isOlderThan(4)||qt(t,new Nt),j()?function(t){var e,n,r;try{var i=null===(r=null===(n=null===(e=At().__SENTRY__)||void 0===e?void 0:e.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!i)return Pt(t);if(!Ut(i)||Pt(i).isOlderThan(4)){var o=Pt(t).getStackTop();qt(i,new Nt(o.client,Rt.clone(o.scope)))}return Pt(i)}catch(e){return Pt(t)}}(t):Pt(t)}function Ut(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Pt(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Nt),t.__SENTRY__.hub}function qt(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}function Ft(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Lt();if(r&&r[t])return r[t].apply(r,l(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function Ht(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return Ft("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function Bt(t){Ft("withScope",t)}var Yt=function(){function t(t,e,n){void 0===e&&(e={}),this.dsn=t,this.tt=new R(t),this.metadata=e,this.nt=n}return t.prototype.getDsn=function(){return this.tt},t.prototype.forceEnvelope=function(){return!!this.nt},t.prototype.getBaseApiEndpoint=function(){var t=this.getDsn(),e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this.it("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this.rt()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this.nt:this.et()+"?"+this.rt()},t.prototype.getStoreEndpointPath=function(){var t=this.getDsn();return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+e.toString()),t)if("dsn"!==i)if("user"===i){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return r.length?n+"?"+r.join("&"):n},t.prototype.et=function(){return this.it("envelope")},t.prototype.it=function(t){return this.nt?this.nt:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+t+"/"},t.prototype.rt=function(){var t,e={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},t}(),Jt=[];function Wt(t){return t.reduce((function(t,e){return t.every((function(t){return e.name!==t.name}))&&t.push(e),t}),[])}var Xt=function(){function t(t,e){this.ot={},this.ut=0,this.st=new t(e),this.at=e,e.dsn&&(this.ct=new R(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this,i=e&&e.event_id;return this.ft(this.ht().eventFromException(t,e).then((function(t){return r.vt(t,e,n)})).then((function(t){i=t}))),i},t.prototype.captureMessage=function(t,e,n,r){var i=this,o=n&&n.event_id,a=m(t)?this.ht().eventFromMessage(String(t),e,n):this.ht().eventFromException(t,n);return this.ft(a.then((function(t){return i.vt(t,n,r)})).then((function(t){o=t}))),o},t.prototype.captureEvent=function(t,e,n){var r=e&&e.event_id;return this.ft(this.vt(t,e,n).then((function(t){r=t}))),r},t.prototype.captureSession=function(t){this.dt()?"string"!=typeof t.release?X.warn("Discarded session because of missing or non-string release"):(this.lt(t),t.update({init:!1})):X.warn("SDK not enabled, will not capture session.")},t.prototype.getDsn=function(){return this.ct},t.prototype.getOptions=function(){return this.at},t.prototype.flush=function(t){var e=this;return this.pt(t).then((function(n){return e.ht().getTransport().close(t).then((function(t){return n&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this.dt()&&(this.ot=function(t){var e={};return function(t){var e=t.defaultIntegrations&&l(t.defaultIntegrations)||[],n=t.integrations,r=l(Wt(e));Array.isArray(n)?r=l(r.filter((function(t){return n.every((function(e){return e.name!==t.name}))})),Wt(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map((function(t){return t.name}));return-1!==i.indexOf("Debug")&&r.push.apply(r,l(r.splice(i.indexOf("Debug"),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===Jt.indexOf(t.name)&&(t.setupOnce(Dt,Lt),Jt.push(t.name),X.log("Integration installed: "+t.name))}(t)})),e}(this.at))},t.prototype.getIntegration=function(t){try{return this.ot[t.id]||null}catch(e){return X.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype.yt=function(t,e){var n,r,o=!1,a=!1,s=e.exception&&e.exception.values;if(s){a=!0;try{for(var c=h(s),p=c.next();!p.done;p=c.next()){var d=p.value.mechanism;if(d&&!1===d.handled){o=!0;break}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var l=t.status===i.Ok;(l&&0===t.errors||l&&o)&&(t.update(u(u({},o&&{status:i.Crashed}),{errors:t.errors||Number(a||o)})),this.captureSession(t))},t.prototype.lt=function(t){this.ht().sendSession(t)},t.prototype.pt=function(t){var e=this;return new St((function(n){var r=0,i=setInterval((function(){0==e.ut?(clearInterval(i),n(!0)):(r+=1,t&&r>=t&&(clearInterval(i),n(!1)))}),1)}))},t.prototype.ht=function(){return this.st},t.prototype.dt=function(){return!1!==this.getOptions().enabled&&void 0!==this.ct},t.prototype.gt=function(t,e,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,a=u(u({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:U()),timestamp:t.timestamp||wt()});this.bt(a),this.wt(a);var s=e;n&&n.captureContext&&(s=Rt.clone(s).update(n.captureContext));var c=St.resolve(a);return s&&(c=s.applyToEvent(a,n)),c.then((function(t){return"number"==typeof o&&o>0?r.Tt(t,o):t}))},t.prototype.Tt=function(t,e){if(!t)return null;var n=u(u(u(u(u({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return u(u({},t),t.data&&{data:tt(t.data,e)})}))}),t.user&&{user:tt(t.user,e)}),t.contexts&&{contexts:tt(t.contexts,e)}),t.extra&&{extra:tt(t.extra,e)});t.contexts&&t.contexts.trace&&(n.contexts.trace=t.contexts.trace);var r=this.getOptions().Et;return(void 0===r?{}:r).ensureNoCircularStructures?tt(n):n},t.prototype.bt=function(t){var e=this.getOptions(),n=e.environment,r=e.release,i=e.dist,o=e.maxValueLength,a=void 0===o?250:o;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==i&&(t.dist=i),t.message&&(t.message=C(t.message,a));var s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=C(s.value,a));var c=t.request;c&&c.url&&(c.url=C(c.url,a))},t.prototype.wt=function(t){var e=Object.keys(this.ot);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=l(t.sdk.integrations||[],e))},t.prototype.St=function(t){this.ht().sendEvent(t)},t.prototype.vt=function(t,e,n){return this.xt(t,e,n).then((function(t){return t.event_id}),(function(t){X.error(t)}))},t.prototype.xt=function(t,e,n){var r=this,i=this.getOptions(),o=i.beforeSend,a=i.sampleRate;if(!this.dt())return St.reject(new O("SDK not enabled, will not capture event."));var s="transaction"===t.type;return!s&&"number"==typeof a&&Math.random()>a?St.reject(new O("Discarding event because it's not included in the random sample (sampling rate = "+a+")")):this.gt(t,n,e).then((function(t){if(null===t)throw new O("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||s||!o)return t;var n=o(t,e);return r._t(n)})).then((function(t){if(null===t)throw new O("`beforeSend` returned `null`, will not send event.");var e=n&&n.getSession&&n.getSession();return!s&&e&&r.yt(e,t),r.St(t),t})).then(null,(function(t){if(t instanceof O)throw t;throw r.captureException(t,{data:{__sentry__:!0},originalException:t}),new O("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype.ft=function(t){var e=this;this.ut+=1,t.then((function(t){return e.ut-=1,t}),(function(t){return e.ut-=1,t}))},t.prototype._t=function(t){var e="`beforeSend` method has to return `null` or a valid event.";if(E(t))return t.then((function(t){if(!_(t)&&null!==t)throw new O(e);return t}),(function(t){throw new O("beforeSend rejected with "+t)}));if(!_(t)&&null!==t)throw new O(e);return t},t}(),zt=function(){function e(){}return e.prototype.sendEvent=function(e){return St.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:t.Status.Skipped})},e.prototype.close=function(t){return St.resolve(!0)},e}(),Gt=function(){function t(t){this.at=t,this.at.dsn||X.warn("No DSN provided, backend will not do anything."),this.jt=this.kt()}return t.prototype.eventFromException=function(t,e){throw new O("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new O("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this.jt.sendEvent(t).then(null,(function(t){X.error("Error while sending event: "+t)}))},t.prototype.sendSession=function(t){this.jt.sendSession?this.jt.sendSession(t).then(null,(function(t){X.error("Error while sending session: "+t)})):X.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this.jt},t.prototype.kt=function(){return new zt},t}();function Kt(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function Vt(t,e){return e?(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=l(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=l(t.sdk.packages||[],e.packages||[]),t):t}function $t(t,e){var n=Kt(e),r="aggregates"in t?"sessions":"session";return{body:JSON.stringify(u(u({sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(t),type:r,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function Zt(t,e){var n=Kt(e),r=t.type||"event",i="transaction"===r||e.forceEnvelope(),o=t.debug_meta||{},a=o.transactionSampling,s=p(o,["transactionSampling"]),c=a||{},h=c.method,d=c.rate;0===Object.keys(s).length?delete t.debug_meta:t.debug_meta=s;var l={body:JSON.stringify(n?Vt(t,e.metadata.sdk):t),type:r,url:i?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(i){var f=JSON.stringify(u(u({event_id:t.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:h,rate:d}]})+"\n"+l.body;l.body=f}return l}var Qt,te="6.10.0",ee=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Qt=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return Qt.apply(n,t)}},t.id="FunctionToString",t}(),ne=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],re=function(){function t(e){void 0===e&&(e={}),this.at=e,this.name=t.id}return t.prototype.setupOnce=function(){Dt((function(e){var n=Lt();if(!n)return e;var r=n.getIntegration(t);if(r){var i=n.getClient(),o=i?i.getOptions():{},a="function"==typeof r.Ot?r.Ot(o):{};return"function"!=typeof r.Dt?e:r.Dt(e,a)?null:e}return e}))},t.prototype.Dt=function(t,e){return this.It(t,e)?(X.warn("Event dropped due to being internal Sentry Error.\nEvent: "+q(t)),!0):this.Nt(t,e)?(X.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+q(t)),!0):this.Rt(t,e)?(X.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+q(t)+".\nUrl: "+this.Ct(t)),!0):!this.Mt(t,e)&&(X.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+q(t)+".\nUrl: "+this.Ct(t)),!0)},t.prototype.It=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype.Nt=function(t,e){return!(!e.ignoreErrors||!e.ignoreErrors.length)&&this.At(t).some((function(t){return e.ignoreErrors.some((function(e){return A(t,e)}))}))},t.prototype.Rt=function(t,e){if(!e.denyUrls||!e.denyUrls.length)return!1;var n=this.Ct(t);return!!n&&e.denyUrls.some((function(t){return A(n,t)}))},t.prototype.Mt=function(t,e){if(!e.allowUrls||!e.allowUrls.length)return!0;var n=this.Ct(t);return!n||e.allowUrls.some((function(t){return A(n,t)}))},t.prototype.Ot=function(t){return void 0===t&&(t={}),{allowUrls:l(this.at.whitelistUrls||[],this.at.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:l(this.at.blacklistUrls||[],this.at.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:l(this.at.ignoreErrors||[],t.ignoreErrors||[],ne),ignoreInternal:void 0===this.at.ignoreInternal||this.at.ignoreInternal}},t.prototype.At=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=void 0===n?"":n,i=e.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(e){return X.error("Cannot extract message for event "+q(t)),[]}return[]},t.prototype.Ct=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(e){return X.error("Cannot extract url for event "+q(t)),null}},t.id="InboundFilters",t}(),ie=Object.freeze({__proto__:null,FunctionToString:ee,InboundFilters:re}),oe=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ae=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. \/=]+)(?::(\d+))?(?::(\d+))?\s*$/i,se=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ce=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ue=/\((\S*)(?::(\d+))(?::(\d+))\)/,pe=/Minified React error #\d+;/i;function he(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:pe.test(t.message)&&(n=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=t.stacktrace.split("\n"),o=[],a=0;a<i.length;a+=2){var s=null;(e=n.exec(i[a]))?s={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=r.exec(i[a]))&&(s={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),s&&(!s.func&&s.line&&(s.func="?"),o.push(s))}return o.length?{message:le(t),name:t.name,stack:o}:null}(t))return de(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,i=[],o=t.stack.split("\n"),a=0;a<o.length;++a){if(n=oe.exec(o[a])){var s=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=ue.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]);var c=n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],u=n[1]||"?",p=-1!==u.indexOf("safari-extension"),h=-1!==u.indexOf("safari-web-extension");(p||h)&&(u=-1!==u.indexOf("@")?u.split("@")[0]:"?",c=p?"safari-extension:"+c:"safari-web-extension:"+c),r={url:c,func:u,args:s?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=se.exec(o[a]))r={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=ae.exec(o[a])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=ce.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==a||n[5]||void 0===t.columnNumber||(i[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func="?"),i.push(r)}return i.length?{message:le(t),name:t.name,stack:i}:null}(t))return de(e,n)}catch(t){}return{message:le(t),name:t&&t.name,stack:[],failed:!0}}function de(t,e){try{return u(u({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function le(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function fe(t){var e=ge(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function ve(t){return{exception:{values:[fe(t)]}}}function ge(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).reverse()}function ye(t,e,n){var r,i;if(void 0===n&&(n={}),v(t)&&t.error)return ve(he(t=t.error));if(g(t)||(i=t,"[object DOMException]"===Object.prototype.toString.call(i))){var o=t,a=o.name||(g(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;return H(r=me(s,e,n),s),"code"in o&&(r.tags=u(u({},r.tags),{"DOMException.code":""+o.code})),r}return f(t)?r=ve(he(t)):_(t)||S(t)?(B(r=function(t,e,n){var r={exception:{values:[{type:S(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+et(t)}]},extra:{__serialized__:Z(t)}};if(e){var i=ge(he(e).stack);r.stacktrace={frames:i}}return r}(t,e,n.rejection),{synthetic:!0}),r):(H(r=me(t,e,n),""+t,void 0),B(r,{synthetic:!0}),r)}function me(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var i=ge(he(e).stack);r.stacktrace={frames:i}}return r}var _e={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},Se=function(){function e(t){this.options=t,this.O=new bt(30),this.Lt={},this.qt=new Yt(t.dsn,t.Ft,t.tunnel),this.url=this.qt.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(t){throw new O("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(t){return this.O.drain(t)},e.prototype.Pt=function(e){var n=e.requestType,r=e.response,i=e.headers,o=e.resolve,a=e.reject,s=t.Status.fromHttpCode(r.status);this.Ut(i)&&X.warn("Too many "+n+" requests, backing off until: "+this.Ht(n)),s!==t.Status.Success?a(r):o({status:s})},e.prototype.Ht=function(t){var e=_e[t];return this.Lt[e]||this.Lt.all},e.prototype.Bt=function(t){return this.Ht(t)>new Date(Date.now())},e.prototype.Ut=function(t){var e,n,r,i,o=Date.now(),a=t["x-sentry-rate-limits"],s=t["retry-after"];if(a){try{for(var c=h(a.trim().split(",")),u=c.next();!u.done;u=c.next()){var p=u.value.split(":",2),d=parseInt(p[0],10),l=1e3*(isNaN(d)?60:d);try{for(var f=(r=void 0,h(p[1].split(";"))),v=f.next();!v.done;v=f.next()){var g=v.value;this.Lt[g||"all"]=new Date(o+l)}}catch(t){r={error:t}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return!0}return!!s&&(this.Lt.all=new Date(o+function(t,e){if(!e)return 6e4;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}(o,s)),!0)},e}(),be=function(t){function e(e,n){void 0===n&&(n=function(){var t,e,n=L();if(it(n.fetch))return n.fetch.bind(n);var r=n.document,i=n.fetch;if("function"==typeof(null===(t=r)||void 0===t?void 0:t.createElement))try{var o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o),(null===(e=o.contentWindow)||void 0===e?void 0:e.fetch)&&(i=o.contentWindow.fetch),r.head.removeChild(o)}catch(t){X.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return i.bind(n)}());var r=t.call(this,e)||this;return r.Jt=n,r}return n(e,t),e.prototype.sendEvent=function(t){return this.Xt(Zt(t,this.qt),t)},e.prototype.sendSession=function(t){return this.Xt($t(t,this.qt),t)},e.prototype.Xt=function(t,e){var n=this;if(this.Bt(t.type))return Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this.Ht(t.type)+" due to too many requests.",status:429});var r={body:t.body,method:"POST",referrerPolicy:ot()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this.O.add((function(){return new St((function(e,i){n.Jt(t.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n.Pt({requestType:t.type,response:r,headers:o,resolve:e,reject:i})})).catch(i)}))}))},e}(Se),Ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.sendEvent=function(t){return this.Xt(Zt(t,this.qt),t)},e.prototype.sendSession=function(t){return this.Xt($t(t,this.qt),t)},e.prototype.Xt=function(t,e){var n=this;return this.Bt(t.type)?Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this.Ht(t.type)+" due to too many requests.",status:429}):this.O.add((function(){return new St((function(e,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n.Pt({requestType:t.type,response:i,headers:o,resolve:e,reject:r})}},i.open("POST",t.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(t.body)}))}))},e}(Se),Te=Object.freeze({__proto__:null,BaseTransport:Se,FetchTransport:be,XHRTransport:Ee}),xe=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.eventFromException=function(e,n){return function(e,n,r){var i=ye(n,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return B(i,{handled:!0,type:"generic"}),i.level=t.Severity.Error,r&&r.event_id&&(i.event_id=r.event_id),St.resolve(i)}(this.at,e,n)},r.prototype.eventFromMessage=function(e,n,r){return void 0===n&&(n=t.Severity.Info),function(e,n,r,i){void 0===r&&(r=t.Severity.Info);var o=me(n,i&&i.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return o.level=r,i&&i.event_id&&(o.event_id=i.event_id),St.resolve(o)}(this.at,e,n,r)},r.prototype.kt=function(){if(!this.at.dsn)return e.prototype.kt.call(this);var t=u(u({},this.at.transportOptions),{dsn:this.at.dsn,tunnel:this.at.tunnel,Ft:this.at.Ft});return this.at.transport?new this.at.transport(t):rt()?new be(t):new Ee(t)},r}(Gt),we=0;function ke(){return we>0}function Oe(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(t){return Oe(t,e)}));return t.handleEvent?t.handleEvent.apply(this,i):t.apply(this,i)}catch(t){throw we+=1,setTimeout((function(){we-=1})),Bt((function(n){n.addEventProcessor((function(t){var n=u({},t);return e.mechanism&&(H(n,void 0,void 0),B(n,e.mechanism)),n.extra=u(u({},n.extra),{arguments:r}),n})),Ht(t)})),t}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch(t){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(t){}return r}var Ie=function(){function e(t){this.name=e.id,this.Gt=!1,this.Wt=!1,this.at=u({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this.at.onerror&&(X.log("Global Handler attached: onerror"),this.$t()),this.at.onunhandledrejection&&(X.log("Global Handler attached: onunhandledrejection"),this.zt())},e.prototype.$t=function(){var t=this;this.Gt||(dt({callback:function(n){var r=n.error,i=Lt(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(o&&!ke()&&!a){var s=i.getClient(),c=void 0===r&&y(n.msg)?t.Kt(n.msg,n.url,n.line,n.column):t.Vt(ye(r||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);B(c,{handled:!1,type:"onerror"}),i.captureEvent(c,{originalException:r})}},type:"error"}),this.Gt=!0)},e.prototype.zt=function(){var n=this;this.Wt||(dt({callback:function(r){var i=r;try{"reason"in r?i=r.reason:"detail"in r&&"reason"in r.detail&&(i=r.detail.reason)}catch(t){}var o=Lt(),a=o.getIntegration(e),s=i&&!0===i.__sentry_own_request__;if(!a||ke()||s)return!0;var c=o.getClient(),u=m(i)?n.Yt(i):ye(i,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!0});u.level=t.Severity.Error,B(u,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(u,{originalException:i})},type:"unhandledrejection"}),this.Wt=!0)},e.prototype.Kt=function(t,e,n,r){var i,o=v(t)?t.message:t,a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(i=a[1],o=a[2]);var s={exception:{values:[{type:i||"Error",value:o}]}};return this.Vt(s,e,n,r)},e.prototype.Yt=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},e.prototype.Vt=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,a=y(e)&&e.length>0?e:function(){try{return document.location.href}catch(t){return""}}();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:i,filename:a,function:"?",in_app:!0,lineno:o}),t},e.id="GlobalHandlers",e}(),Re=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],je=function(){function t(e){this.name=t.id,this.at=u({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=L();this.at.setTimeout&&V(t,"setTimeout",this.Qt.bind(this)),this.at.setInterval&&V(t,"setInterval",this.Qt.bind(this)),this.at.requestAnimationFrame&&V(t,"requestAnimationFrame",this.Zt.bind(this)),this.at.XMLHttpRequest&&"XMLHttpRequest"in t&&V(XMLHttpRequest.prototype,"send",this.tn.bind(this)),this.at.eventTarget&&(Array.isArray(this.at.eventTarget)?this.at.eventTarget:Re).forEach(this.nn.bind(this))},t.prototype.Qt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Oe(r,{mechanism:{data:{function:K(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype.Zt=function(t){return function(e){return t.call(this,Oe(e,{mechanism:{data:{function:"requestAnimationFrame",handler:K(t)},handled:!0,type:"instrument"}}))}},t.prototype.nn=function(t){var e=L(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(V(n,"addEventListener",(function(e){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=Oe(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:K(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,n,Oe(r,{mechanism:{data:{function:"addEventListener",handler:K(r),target:t},handled:!0,type:"instrument"}}),i)}})),V(n,"removeEventListener",(function(t){return function(e,n,r){var i,o=n;try{var a=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;a&&t.call(this,e,a,r)}catch(t){}return t.call(this,e,o,r)}})))},t.prototype.tn=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((function(t){t in r&&"function"==typeof r[t]&&V(r,t,(function(e){var n={mechanism:{data:{function:t,handler:K(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=K(e.__sentry_original__)),Oe(e,n)}))})),t.apply(this,e)}},t.id="TryCatch",t}(),De=function(){function e(t){this.name=e.id,this.at=u({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(t){this.at.sentry&&Lt().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:q(t)},{event:t})},e.prototype.setupOnce=function(){var t=this;this.at.console&&dt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.in.apply(t,l(e))},type:"console"}),this.at.dom&&dt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.rn.apply(t,l(e))},type:"dom"}),this.at.xhr&&dt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.en.apply(t,l(e))},type:"xhr"}),this.at.fetch&&dt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.on.apply(t,l(e))},type:"fetch"}),this.at.history&&dt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.un.apply(t,l(e))},type:"history"})},e.prototype.in=function(e){var n={category:"console",data:{arguments:e.args,logger:"console"},level:t.Severity.fromString(e.level),message:N(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message="Assertion failed: "+(N(e.args.slice(1)," ")||"console.assert"),n.data.arguments=e.args.slice(1)}Lt().addBreadcrumb(n,{input:e.args,level:e.level})},e.prototype.rn=function(t){var e,n="object"==typeof this.at.dom?this.at.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{e=t.event.target?x(t.event.target,n):x(t.event,n)}catch(t){e="<unknown>"}0!==e.length&&Lt().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name,global:t.global})},e.prototype.en=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,i=e.status_code,o=e.body;Lt().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:t.xhr,input:o})}},e.prototype.on=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Lt().addBreadcrumb({category:"fetch",data:e.fetchData,level:t.Severity.Error,type:"http"},{data:e.error,input:e.args}):Lt().addBreadcrumb({category:"fetch",data:u(u({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype.un=function(t){var e=L(),n=t.from,r=t.to,i=P(e.location.href),o=P(n),a=P(r);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),Lt().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}(),Ce=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this.sn=e.key||"cause",this.k=e.limit||5}return t.prototype.setupOnce=function(){Dt((function(e,n){var r=Lt().getIntegration(t);return r?r.an(e,n):e}))},t.prototype.an=function(t,e){if(!(t.exception&&t.exception.values&&e&&T(e.originalException,Error)))return t;var n=this.cn(e.originalException,this.sn);return t.exception.values=l(n,t.exception.values),t},t.prototype.cn=function(t,e,n){if(void 0===n&&(n=[]),!T(t[e],Error)||n.length+1>=this.k)return n;var r=fe(he(t[e]));return this.cn(t[e],e,l([r],n))},t.id="LinkedErrors",t}(),Ne=L(),Ae=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Dt((function(e){var n,r,i;if(Lt().getIntegration(t)){if(!Ne.navigator&&!Ne.location&&!Ne.document)return e;var o=(null===(n=e.request)||void 0===n?void 0:n.url)||(null===(r=Ne.location)||void 0===r?void 0:r.href),a=(Ne.document||{}).referrer,s=(Ne.navigator||{}).userAgent,c=u(u(u({},null===(i=e.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),s&&{"User-Agent":s}),p=u(u({},o&&{url:o}),{headers:c});return u(u({},e),{request:p})}return e}))},t.id="UserAgent",t}(),Me=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e((function(e){var r=n().getIntegration(t);if(r){try{if(r.Dt(e,r.fn))return null}catch(t){return r.fn=e}return r.fn=e}return e}))},t.prototype.Dt=function(t,e){return!(!e||!this.hn(t,e)&&!this.vn(t,e))},t.prototype.hn=function(t,e){var n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!this.dn(t,e)||!this.ln(t,e))},t.prototype.pn=function(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}else if(t.stacktrace)return t.stacktrace.frames},t.prototype.ln=function(t,e){var n=this.pn(t),r=this.pn(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],a=n[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0},t.prototype.mn=function(t){return t.exception&&t.exception.values&&t.exception.values[0]},t.prototype.vn=function(t,e){var n=this.mn(e),r=this.mn(t);return!!(n&&r&&n.type===r.type&&n.value===r.value&&this.dn(t,e)&&this.ln(t,e))},t.prototype.dn=function(t,e){var n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(t){return!1}},t.id="Dedupe",t}(),Le=Object.freeze({__proto__:null,GlobalHandlers:Ie,TryCatch:je,Breadcrumbs:De,LinkedErrors:Ce,UserAgent:Ae,Dedupe:Me}),Ue=function(t){function e(e){return void 0===e&&(e={}),e.Ft=e.Ft||{},e.Ft.sdk=e.Ft.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:te}],version:te},t.call(this,xe,e)||this}return n(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),L().document&&(this.dt()?function(t){if(void 0===t&&(t={}),t.eventId)if(t.dsn){var e=document.createElement("script");e.async=!0,e.src=new Yt(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)}else X.error("Missing dsn option in showReportDialog call");else X.error("Missing eventId option in showReportDialog call")}(u(u({},t),{dsn:t.dsn||this.getDsn()})):X.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype.gt=function(e,n,r){return e.platform=e.platform||"javascript",t.prototype.gt.call(this,e,n,r)},e.prototype.St=function(e){var n=this.getIntegration(De);n&&n.addSentryBreadcrumb(e),t.prototype.St.call(this,e)},e}(Xt),Pe=[new re,new ee,new je,new De,new Ie,new Ce,new Me,new Ae],qe={},Fe=L();Fe.Sentry&&Fe.Sentry.Integrations&&(qe=Fe.Sentry.Integrations);var He,Be=u(u(u({},qe),ie),Le);!function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(He||(He={})),function(t){t.fromHttpCode=function(e){if(e<400)return t.Ok;if(e>=400&&e<500)switch(e){case 401:return t.Unauthenticated;case 403:return t.PermissionDenied;case 404:return t.NotFound;case 409:return t.AlreadyExists;case 413:return t.FailedPrecondition;case 429:return t.ResourceExhausted;default:return t.InvalidArgument}if(e>=500&&e<600)switch(e){case 501:return t.Unimplemented;case 503:return t.Unavailable;case 504:return t.DeadlineExceeded;default:return t.InternalError}return t.UnknownError}}(He||(He={}));var Ye=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Je(t){var e;return void 0===t&&(t=null===(e=Lt().getClient())||void 0===e?void 0:e.getOptions()),!!t&&("tracesSampleRate"in t||"tracesSampler"in t)}function We(t){var e,n;return void 0===t&&(t=Lt()),null===(n=null===(e=t)||void 0===e?void 0:e.getScope())||void 0===n?void 0:n.getTransaction()}function Xe(t){return t/1e3}function ze(){var t=We();t&&(X.log("[Tracing] Transaction: "+He.InternalError+" -> Global error occured"),t.setStatus(He.InternalError))}var Ge=function(){function t(t){void 0===t&&(t=1e3),this.spans=[],this.yn=t}return t.prototype.add=function(t){this.spans.length>this.yn?t.spanRecorder=void 0:this.spans.push(t)},t}(),Ke=function(){function t(t){if(this.traceId=U(),this.spanId=U().substring(16),this.startTimestamp=Ot(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}return t.prototype.child=function(t){return this.startChild(t)},t.prototype.startChild=function(e){var n=new t(u(u({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},t.prototype.setTag=function(t,e){var n;return this.tags=u(u({},this.tags),((n={})[t]=e,n)),this},t.prototype.setData=function(t,e){var n;return this.data=u(u({},this.data),((n={})[t]=e,n)),this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var e=He.fromHttpCode(t);return e!==He.UnknownError&&this.setStatus(e),this},t.prototype.isSuccess=function(){return this.status===He.Ok},t.prototype.finish=function(t){this.endTimestamp="number"==typeof t?t:Ot()},t.prototype.toTraceparent=function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},t.prototype.toContext=function(){return nt({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},t.prototype.updateWithContext=function(t){var e,n,r,i,o;return this.data=null!=(e=t.data)?e:{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=null!=(n=t.spanId)?n:this.spanId,this.startTimestamp=null!=(r=t.startTimestamp)?r:this.startTimestamp,this.status=t.status,this.tags=null!=(i=t.tags)?i:{},this.traceId=null!=(o=t.traceId)?o:this.traceId,this},t.prototype.getTraceContext=function(){return nt({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return nt({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}(),Ve=function(t){function e(e,n){var r=t.call(this,e)||this;return r.gn={},r.bn=Lt(),T(n,Nt)&&(r.bn=n),r.name=e.name||"",r.metadata=e.metadata||{},r.wn=e.trimEnd,r.transaction=r,r}return n(e,t),e.prototype.setName=function(t){this.name=t},e.prototype.initSpanRecorder=function(t){void 0===t&&(t=1e3),this.spanRecorder||(this.spanRecorder=new Ge(t)),this.spanRecorder.add(this)},e.prototype.setMeasurements=function(t){this.gn=u({},t)},e.prototype.setMetadata=function(t){this.metadata=u(u({},this.metadata),t)},e.prototype.finish=function(e){var n=this;if(void 0===this.endTimestamp){if(this.name||(X.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,e),!0===this.sampled){var r=this.spanRecorder?this.spanRecorder.spans.filter((function(t){return t!==n&&t.endTimestamp})):[];this.wn&&r.length>0&&(this.endTimestamp=r.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var i={contexts:{trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata};return Object.keys(this.gn).length>0&&(X.log("[Measurements] Adding measurements to transaction",JSON.stringify(this.gn,void 0,2)),i.measurements=this.gn),X.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this.bn.captureEvent(i)}X.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.")}},e.prototype.toContext=function(){var e=t.prototype.toContext.call(this);return nt(u(u({},e),{name:this.name,trimEnd:this.wn}))},e.prototype.updateWithContext=function(e){var n;return t.prototype.updateWithContext.call(this,e),this.name=null!=(n=e.name)?n:"",this.wn=e.trimEnd,this},e}(Ke),$e=function(t){function e(e,n,r,i){void 0===r&&(r="");var o=t.call(this,i)||this;return o.Tn=e,o.En=n,o.transactionSpanId=r,o}return n(e,t),e.prototype.add=function(e){var n=this;e.spanId!==this.transactionSpanId&&(e.finish=function(t){e.endTimestamp="number"==typeof t?t:Ot(),n.En(e.spanId)},void 0===e.endTimestamp&&this.Tn(e.spanId)),t.prototype.add.call(this,e)},e}(Ge),Ze=function(t){function e(e,n,r,i){void 0===r&&(r=1e3),void 0===i&&(i=!1);var o=t.call(this,e,n)||this;return o.Sn=n,o.xn=r,o._n=i,o.activities={},o.jn=0,o.kn=0,o.On=!1,o.Dn=[],n&&i&&(Qe(n),X.log("Setting idle transaction on scope. Span ID: "+o.spanId),n.configureScope((function(t){return t.setSpan(o)}))),o.In=setTimeout((function(){o.On||o.finish()}),o.xn),o}return n(e,t),e.prototype.finish=function(e){var n,r,i=this;if(void 0===e&&(e=Ot()),this.On=!0,this.activities={},this.spanRecorder){X.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);try{for(var o=h(this.Dn),a=o.next();!a.done;a=o.next())(0,a.value)(this,e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(t){if(t.spanId===i.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus(He.Cancelled),X.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));var n=t.startTimestamp<e;return n||X.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),n})),X.log("[Tracing] flushing IdleTransaction")}else X.log("[Tracing] No active IdleTransaction");return this._n&&Qe(this.Sn),t.prototype.finish.call(this,e)},e.prototype.registerBeforeFinishCallback=function(t){this.Dn.push(t)},e.prototype.initSpanRecorder=function(t){var e=this;this.spanRecorder||(this.spanRecorder=new $e((function(t){e.On||e.Tn(t)}),(function(t){e.On||e.En(t)}),this.spanId,t),X.log("Starting heartbeat"),this.Nn()),this.spanRecorder.add(this)},e.prototype.Tn=function(t){this.In&&(clearTimeout(this.In),this.In=void 0),X.log("[Tracing] pushActivity: "+t),this.activities[t]=!0,X.log("[Tracing] new activities count",Object.keys(this.activities).length)},e.prototype.En=function(t){var e=this;if(this.activities[t]&&(X.log("[Tracing] popActivity "+t),delete this.activities[t],X.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this.xn,r=Ot()+n/1e3;setTimeout((function(){e.On||e.finish(r)}),n)}},e.prototype.Rn=function(){if(clearTimeout(this.jn),!this.On){var t=Object.keys(this.activities),e=t.length?t.reduce((function(t,e){return t+e})):"";e===this.Cn?this.kn+=1:this.kn=1,this.Cn=e,this.kn>=3?(X.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(He.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this.Nn()}},e.prototype.Nn=function(){var t=this;X.log("pinging Heartbeat -> current counter: "+this.kn),this.jn=setTimeout((function(){t.Rn()}),5e3)},e}(Ve);function Qe(t){if(t){var e=t.getScope();e&&e.getTransaction()&&e.setSpan(void 0)}}function tn(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function en(t,e,n){return Je()?void 0!==t.sampled?(t.setMetadata({transactionSampling:{method:c.Explicit}}),t):("function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:c.Sampler,rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,t.setMetadata({transactionSampling:{method:c.Inheritance}})):(r=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:c.Rate,rate:Number(r)}})),function(t){return isNaN(t)||"number"!=typeof t&&"boolean"!=typeof t?(X.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(t)+" of type "+JSON.stringify(typeof t)+"."),!1):!(t<0||t>1)||(X.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+t+"."),!1)}(r)?r?(t.sampled=Math.random()<r,t.sampled?(X.log("[Tracing] starting "+t.op+" transaction - "+t.name),t):(X.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),t)):(X.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(X.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)):(t.sampled=!1,t);var r}function nn(t,e){var n,r,i=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},o=new Ve(t,this);return(o=en(o,i,u({parentSampled:t.parentSampled,transactionContext:t},e))).sampled&&o.initSpanRecorder(null===(r=i.Et)||void 0===r?void 0:r.maxSpans),o}function rn(){var t;(t=At()).__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=nn),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=tn)),j()&&function(){var t=At();if(t.__SENTRY__){var e={mongodb:function(){return new(D(module,"./integrations/mongo").Mongo)},mongoose:function(){return new(D(module,"./integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(D(module,"./integrations/mysql").Mysql)},pg:function(){return new(D(module,"./integrations/postgres").Postgres)}},n=Object.keys(e).filter((function(t){return!!function(t){var e;try{e=D(module,t)}catch(t){}try{var n=D(module,"process").cwd;e=D(module,n()+"/node_modules/"+t)}catch(t){}return e}(t)})).map((function(t){try{return e[t]()}catch(t){return}})).filter((function(t){return t}));n.length>0&&(t.__SENTRY__.integrations=l(t.__SENTRY__.integrations||[],n))}}(),dt({callback:ze,type:"error"}),dt({callback:ze,type:"unhandledrejection"})}var on=L(),an=function(t,e,n){var r;return function(i){e.value>=0&&(i||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},sn=function(t,e){return{name:t,value:null!=e?e:-1,delta:0,entries:[],id:"v2-"+Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)}},cn=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},un=function(t,e){var n=function(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},pn=-1,hn=function(){return pn<0&&(pn="hidden"===document.visibilityState?0:1/0,un((function(t){var e=t.timeStamp;pn=e}),!0)),{get firstHiddenTime(){return pn}}},dn={},ln=L(),fn=function(){function t(){var t;this.gn={},this.Mn=0,!j()&&(null===(t=ln)||void 0===t?void 0:t.performance)&&(ln.performance.mark&&ln.performance.mark("sentry-tracing-init"),this.An(),this.Ln(),this.qn())}return t.prototype.addPerformanceEntries=function(t){var e=this;if(ln&&ln.performance&&ln.performance.getEntries&&It){X.log("[Tracing] Adding & adjusting spans using Performance API");var n,r,i,o,a,s=Xe(It);if(ln.document&&ln.document.scripts)for(var c=0;c<ln.document.scripts.length;c++)if("true"===ln.document.scripts[c].dataset.entry){n=ln.document.scripts[c].src;break}if(ln.performance.getEntries().slice(this.Mn).forEach((function(c){var u=Xe(c.startTime),p=Xe(c.duration);if(!("navigation"===t.op&&s+u<t.startTimestamp))switch(c.entryType){case"navigation":!function(t,e,n){vn({transaction:t,entry:e,event:"unloadEvent",timeOrigin:n}),vn({transaction:t,entry:e,event:"redirect",timeOrigin:n}),vn({transaction:t,entry:e,event:"domContentLoadedEvent",timeOrigin:n}),vn({transaction:t,entry:e,event:"loadEvent",timeOrigin:n}),vn({transaction:t,entry:e,event:"connect",timeOrigin:n}),vn({transaction:t,entry:e,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),vn({transaction:t,entry:e,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),vn({transaction:t,entry:e,event:"domainLookup",timeOrigin:n,description:"DNS"}),function(t,e,n){gn(t,{op:"browser",description:"request",startTimestamp:n+Xe(e.requestStart),endTimestamp:n+Xe(e.responseEnd)}),gn(t,{op:"browser",description:"response",startTimestamp:n+Xe(e.responseStart),endTimestamp:n+Xe(e.responseEnd)})}(t,e,n)}(t,c,s),o=s+Xe(c.responseStart),a=s+Xe(c.requestStart);break;case"mark":case"paint":case"measure":var h=function(t,e,n,r,i){var o=i+n,a=o+r;return gn(t,{description:e.name,endTimestamp:a,op:e.entryType,startTimestamp:o}),o}(t,c,u,p,s);void 0===i&&"sentry-tracing-init"===c.name&&(i=h);var d=hn(),l=c.startTime<d.firstHiddenTime;"first-paint"===c.name&&l&&(X.log("[Measurements] Adding FP"),e.gn.fp={value:c.startTime},e.gn["mark.fp"]={value:h}),"first-contentful-paint"===c.name&&l&&(X.log("[Measurements] Adding FCP"),e.gn.fcp={value:c.startTime},e.gn["mark.fcp"]={value:h});break;case"resource":var f=c.name.replace(window.location.origin,""),v=function(t,e,n,r,i,o){if("xmlhttprequest"!==e.initiatorType&&"fetch"!==e.initiatorType){var a={};"transferSize"in e&&(a["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(a["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(a["Decoded Body Size"]=e.decodedBodySize);var s=o+r,c=s+i;return gn(t,{description:n,endTimestamp:c,op:e.initiatorType?"resource."+e.initiatorType:"resource",startTimestamp:s,data:a}),c}}(t,c,f,u,p,s);void 0===r&&(n||"").indexOf(f)>-1&&(r=v)}})),void 0!==r&&void 0!==i&&gn(t,{description:"evaluation",endTimestamp:i,op:"script",startTimestamp:r}),this.Mn=Math.max(performance.getEntries().length-1,0),this.Fn(t),"pageload"===t.op){var u=Xe(It);"number"==typeof o&&(X.log("[Measurements] Adding TTFB"),this.gn.ttfb={value:1e3*(o-t.startTimestamp)},"number"==typeof a&&a<=o&&(this.gn["ttfb.requestTime"]={value:1e3*(o-a)})),["fcp","fp","lcp"].forEach((function(n){if(e.gn[n]&&!(u>=t.startTimestamp)){var r=e.gn[n].value,i=u+Xe(r),o=Math.abs(1e3*(i-t.startTimestamp)),a=o-r;X.log("[Measurements] Normalized "+n+" from "+r+" to "+o+" ("+a+")"),e.gn[n].value=o}})),this.gn["mark.fid"]&&this.gn.fid&&gn(t,{description:"first input delay",endTimestamp:this.gn["mark.fid"].value+Xe(this.gn.fid.value),op:"web.vitals",startTimestamp:this.gn["mark.fid"].value}),"fcp"in this.gn||delete this.gn.cls,t.setMeasurements(this.gn),this.Pn(t)}}},t.prototype.Pn=function(t){this.Un&&(X.log("[Measurements] Adding LCP Data"),this.Un.element&&t.setTag("lcp.element",x(this.Un.element)),this.Un.id&&t.setTag("lcp.id",this.Un.id),this.Un.url&&t.setTag("lcp.url",this.Un.url.trim().slice(0,200)),t.setTag("lcp.size",this.Un.size)),this.Hn&&this.Hn.sources&&(X.log("[Measurements] Adding CLS Data"),this.Hn.sources.forEach((function(e,n){return t.setTag("cls.source."+(n+1),x(e.node))})))},t.prototype.An=function(){var t,e,n,r,i,o,a,s=this;t=function(t){var e=t.entries.pop();e&&(X.log("[Measurements] Adding CLS"),s.gn.cls={value:t.value},s.Hn=e)},n=sn("CLS",0),r=0,i=[],(a=cn("layout-shift",o=function(t){if(t&&!t.hadRecentInput){var o=i[0],a=i[i.length-1];r&&0!==i.length&&t.startTime-a.startTime<1e3&&t.startTime-o.startTime<5e3?(r+=t.value,i.push(t)):(r=t.value,i=[t]),r>n.value&&(n.value=r,n.entries=i,e&&e())}}))&&(e=an(t,n,void 0),un((function(){a.takeRecords().map(o),e(!0)})))},t.prototype.Fn=function(t){var e=ln.navigator;if(e){var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),yn(n.rtt)&&(this.gn["connection.rtt"]={value:n.rtt}),yn(n.downlink)&&(this.gn["connection.downlink"]={value:n.downlink})),yn(e.deviceMemory)&&t.setTag("deviceMemory",String(e.deviceMemory)),yn(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}},t.prototype.Ln=function(){var t=this;!function(t,e){var n,r=hn(),i=sn("LCP"),o=function(t){var e=t.startTime;e<r.firstHiddenTime&&(i.value=e,i.entries.push(t)),n&&n()},a=cn("largest-contentful-paint",o);if(a){n=an(t,i,void 0);var s=function(){dn[i.id]||(a.takeRecords().map(o),a.disconnect(),dn[i.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,s,{once:!0,capture:!0})})),un(s,!0)}}((function(e){var n=e.entries.pop();if(n){var r=Xe(It),i=Xe(n.startTime);X.log("[Measurements] Adding LCP"),t.gn.lcp={value:e.value},t.gn["mark.lcp"]={value:r+i},t.Un=n}}))},t.prototype.qn=function(){var t,e,n,r,i,o,a=this;t=function(t){var e=t.entries.pop();if(e){var n=Xe(It),r=Xe(e.startTime);X.log("[Measurements] Adding FID"),a.gn.fid={value:t.value},a.gn["mark.fid"]={value:n+r}}},n=hn(),r=sn("FID"),(o=cn("first-input",i=function(t){e&&t.startTime<n.firstHiddenTime&&(r.value=t.processingStart-t.startTime,r.entries.push(t),e(!0))}))&&(e=an(t,r,void 0),un((function(){o.takeRecords().map(i),o.disconnect()}),!0))},t}();function vn(t){var e=t.transaction,n=t.entry,r=t.event,i=t.timeOrigin,o=t.eventEnd,a=t.description,s=o?n[o]:n[r+"End"],c=n[r+"Start"];c&&s&&gn(e,{op:"browser",description:null!=a?a:r,startTimestamp:i+Xe(c),endTimestamp:i+Xe(s)})}function gn(t,e){var n=e.startTimestamp,r=p(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(u({startTimestamp:n},r))}function yn(t){return"number"==typeof t&&isFinite(t)}var mn={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function _n(t){var e=u(u({},mn),t),n=e.traceFetch,r=e.traceXHR,i=e.tracingOrigins,o=e.shouldCreateSpanForRequest,a={},s=function(t){if(a[t])return a[t];var e=i;return a[t]=e.some((function(e){return A(t,e)}))&&!A(t,"sentry_key"),a[t]},c=s;"function"==typeof o&&(c=function(t){return s(t)&&o(t)});var p={};n&&dt({callback:function(t){!function(t,e,n){if(Je()&&t.fetchData&&e(t.fetchData.url))if(t.endTimestamp&&t.fetchData.__span)(i=n[t.fetchData.__span])&&(t.response?i.setHttpStatus(t.response.status):t.error&&i.setStatus(He.InternalError),i.finish(),delete n[t.fetchData.__span]);else{var r=We();if(r){var i=r.startChild({data:u(u({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http.client"});t.fetchData.__span=i.spanId,n[i.spanId]=i;var o=t.args[0]=t.args[0],a=t.args[1]=t.args[1]||{},s=a.headers;T(o,Request)&&(s=o.headers),s?"function"==typeof s.append?s.append("sentry-trace",i.toTraceparent()):s=Array.isArray(s)?l(s,[["sentry-trace",i.toTraceparent()]]):u(u({},s),{"sentry-trace":i.toTraceparent()}):s={"sentry-trace":i.toTraceparent()},a.headers=s}}}(t,c,p)},type:"fetch"}),r&&dt({callback:function(t){!function(t,e,n){var r,i;if(Je()&&!(null===(r=t.xhr)||void 0===r?void 0:r.__sentry_own_request__)&&(null===(i=t.xhr)||void 0===i?void 0:i.__sentry_xhr__)&&e(t.xhr.__sentry_xhr__.url)){var o=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__)(s=n[t.xhr.__sentry_xhr_span_id__])&&(s.setHttpStatus(o.status_code),s.finish(),delete n[t.xhr.__sentry_xhr_span_id__]);else{var a=We();if(a){var s=a.startChild({data:u(u({},o.data),{type:"xhr",method:o.method,url:o.url}),description:o.method+" "+o.url,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=s.spanId,n[t.xhr.__sentry_xhr_span_id__]=s,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",s.toTraceparent())}catch(t){}}}}}(t,c,p)},type:"xhr"})}var Sn=L(),bn=u({idleTimeout:1e3,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),Sn&&Sn.location){var r,i=Sn.location.href;e&&(r=t({name:Sn.location.pathname,op:"pageload"})),n&&dt({callback:function(e){var n=e.to,o=e.from;void 0===o&&i&&-1!==i.indexOf(n)?i=void 0:o!==n&&(i=void 0,r&&(X.log("[Tracing] Finishing current transaction with op: "+r.op),r.finish()),r=t({name:Sn.location.pathname,op:"navigation"}))},type:"history"})}else X.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},mn),En=function(){function t(e){this.name=t.id,this.Bn=new fn,this.Jn=!1;var n=mn.tracingOrigins;e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&0!==e.tracingOrigins.length?n=e.tracingOrigins:this.Jn=!0,this.options=u(u(u({},bn),e),{tracingOrigins:n})}return t.prototype.setupOnce=function(t,e){var n=this;this.Xn=e,this.Jn&&(X.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),X.warn("[Tracing] We added a reasonable default for you: "+mn.tracingOrigins));var r=this.options,i=r.routingInstrumentation,o=r.startTransactionOnLocationChange,a=r.startTransactionOnPageLoad,s=r.markBackgroundTransactions,c=r.traceFetch,u=r.traceXHR,p=r.tracingOrigins,h=r.shouldCreateSpanForRequest;i((function(t){return n.Gn(t)}),a,o),s&&(on&&on.document?on.document.addEventListener("visibilitychange",(function(){var t=We();on.document.hidden&&t&&(X.log("[Tracing] Transaction: "+He.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(He.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish())})):X.warn("[Tracing] Could not set up background tab detection due to lack of global document")),_n({traceFetch:c,traceXHR:u,tracingOrigins:p,shouldCreateSpanForRequest:h})},t.prototype.Gn=function(t){var e=this;if(this.Xn){var n=this.options,r=n.beforeNavigate,i=n.idleTimeout,o=n.maxTransactionDuration,a="pageload"===t.op?function(){var t,e=(t=document.querySelector("meta[name=sentry-trace]"))?t.getAttribute("content"):null;if(e)return function(t){var e=t.match(Ye);if(e){var n=void 0;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}}(e)}():void 0,s=u(u(u({},t),a),{trimEnd:!0}),c="function"==typeof r?r(s):s,p=void 0===c?u(u({},s),{sampled:!1}):c;!1===p.sampled&&X.log("[Tracing] Will not send "+p.op+" transaction because of beforeNavigate."),X.log("[Tracing] Starting "+p.op+" transaction on scope");var h=function(t,e,n,r,i){var o,a,s=(null===(o=t.getClient())||void 0===o?void 0:o.getOptions())||{},c=new Ze(e,t,n,!0);return(c=en(c,s,u({parentSampled:e.parentSampled,transactionContext:e},i))).sampled&&c.initSpanRecorder(null===(a=s.Et)||void 0===a?void 0:a.maxSpans),c}(this.Xn(),p,i,0,{location:L().location});return h.registerBeforeFinishCallback((function(t,n){e.Bn.addPerformanceEntries(t),function(t,e,n){var r=n-e.startTimestamp;n&&(r>t||r<0)&&(e.setStatus(He.DeadlineExceeded),e.setTag("maxTransactionDurationExceeded","true"))}(1e3*o,t,n)})),h}X.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.")},t.id="BrowserTracing",t}(),Tn={},xn=L();xn.Sentry&&xn.Sentry.Integrations&&(Tn=xn.Sentry.Integrations);var wn=u(u(u({},Tn),Be),{BrowserTracing:En});return rn(),t.BrowserClient=Ue,t.Hub=Nt,t.Integrations=wn,t.SDK_NAME="sentry.javascript.browser",t.SDK_VERSION=te,t.Scope=Rt,t.Span=Ke,t.Transports=Te,t.addBreadcrumb=function(t){Ft("addBreadcrumb",t)},t.addExtensionMethods=rn,t.addGlobalEventProcessor=Dt,t.captureEvent=function(t){return Ft("captureEvent",t)},t.captureException=Ht,t.captureMessage=function(t,e){var n;try{throw new Error(t)}catch(t){n=t}return Ft("captureMessage",t,"string"==typeof e?e:void 0,u({originalException:t,syntheticException:n},"string"!=typeof e?{captureContext:e}:void 0))},t.close=function(t){var e=Lt().getClient();return e?e.close(t):St.reject(!1)},t.configureScope=function(t){Ft("configureScope",t)},t.defaultIntegrations=Pe,t.flush=function(t){var e=Lt().getClient();return e?e.flush(t):St.reject(!1)},t.forceLoad=function(){},t.getCurrentHub=Lt,t.getHubFromCarrier=Pt,t.init=function(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=Pe),void 0===t.release){var e=L();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),function(t,e){var n;!0===e.debug&&X.enable();var r=Lt();null===(n=r.getScope())||void 0===n||n.update(e.initialScope);var i=new t(e);r.bindClient(i)}(Ue,t),t.autoSessionTracking&&function(){if(void 0!==L().document){var t=Lt();"function"==typeof t.startSession&&"function"==typeof t.captureSession&&(t.startSession({ignoreDuration:!0}),t.captureSession(),dt({callback:function(e){var n=e.from,r=e.to;void 0!==n&&n!==r&&(t.startSession({ignoreDuration:!0}),t.captureSession())},type:"history"}))}else X.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}()},t.lastEventId=function(){return Lt().lastEventId()},t.onLoad=function(t){t()},t.setContext=function(t,e){Ft("setContext",t,e)},t.setExtra=function(t,e){Ft("setExtra",t,e)},t.setExtras=function(t){Ft("setExtras",t)},t.setTag=function(t,e){Ft("setTag",t,e)},t.setTags=function(t){Ft("setTags",t)},t.setUser=function(t){Ft("setUser",t)},t.showReportDialog=function(t){void 0===t&&(t={});var e=Lt(),n=e.getScope();n&&(t.user=u(u({},n.getUser()),t.user)),t.eventId||(t.eventId=e.lastEventId());var r=e.getClient();r&&r.showReportDialog(t)},t.startTransaction=function(t,e){return Ft("startTransaction",u({},t),e)},t.withScope=Bt,t.wrap=function(t){return Oe(t)()},t}({}),exports=module.exports=e,SM.currentModule=null}),"",{requires:[],node_modules:!0,preMinified:!0});
YUI.add("sm-abtest",(function(e){SM.currentModule="sm-abtest";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const t=SM.import("sm-resource-core"),r=SM.import("rsvp"),s=SM.import("lodash"),i=SM.import("sm-page");var n="";const o={ANALYTICS:"analytics",USER:"user",BOTH:"both"},a={[o.USER]:"initialABUserTestsByUser",[o.ANALYTICS]:"initialABUserTestsByAnalyticsID",[o.BOTH]:"initialABUserTests"};var u={[o.USER]:null,[o.ANALYTICS]:null,[o.BOTH]:null},l=function(){};function c(e){return new r.Promise((r,s)=>{var i=null;if(a[e]&&(i=t.loadLocal(a[e])),i)r(i);else{var n=l._getVisitorIdForVisitorType(e);if(!n)return void s();t.loadUri("/api/v2/abtest/"+e+"/"+n+"!tests").then(e=>{r(e)},()=>{s()})}})}l.prototype=Object.create(Object.prototype,{sides:{configurable:!0,value:null},currentSide:{configurable:!0,writable:!0,value:null},testName:{configurable:!0,value:null},testID:{configurable:!0,value:null}}),s.assign(l.prototype,{getTestSideIfAssigned:function(){return this.currentSide},getTestSide:function(){throw new Error("Not implemented yet")},getAllTestSides:function(){return this.sides},side:function(e){return this.sides[e]},sideName:function(e){return s.invert(this.sides)[e]}}),l.getActiveTests=function(e=o.BOTH){return new r.Promise(t=>{if(e===o.BOTH&&(l._getVisitorIdForVisitorType(o.USER)||(e=o.ANALYTICS)),u[e])u[e].then(t,()=>{t([])});else{var r=c(e).then(e=>{var t={};return e.forEach(e=>{var r=new(function(e){var t=e.get("TestName");if(!l[t]){var r=function(){l.call()};r.prototype=Object.create(l.prototype,{constructor:{value:r},sides:{value:e.get("AllSides")},testName:{value:e.get("TestName")},testID:{value:e.get("TestID")}}),l[t]=r}return l[t]}(e));r.currentSide=e.get("Side"),r.getTestSideIfAssigned()&&(t[r.testName]=r)}),t},()=>{t([])});u[e]=r,r.then(t)}})},l._getVisitorIdForVisitorType=function(t){var r,s=e.SM.Page&&e.SM.Page.user&&e.SM.Page.user.nickName;switch(t){case o.ANALYTICS:r=n;break;case o.USER:r=s;break;case o.BOTH:r="".concat(s,".").concat(n);break;default:throw new Error("invalid visitorType: "+t)}return r},i.on("page:init",e=>{n=e.analyticsId||""}),module.exports=l,module.exports.VISITOR_TYPE=o,module.exports._loadTests=c}(),SM.currentModule=null}),"",{requires:["sm","rsvp","sm-resource-core","lodash","sm-page"]});
YUI.add("sm-accordion-view",(function(e){SM.currentModule="sm-accordion-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e.namespace("SM.Views").Accordion=e.Base.create("sm-accordion-view",e.View,[],{containerTemplate:'<ul class="sm-accordion"></ul>',itemTemplate:'<li id="<%= data.id %>" class="<%= data.itemClassNames.join(" ") %>" data-label="<%= data.label %>"><a href="<%= data.url %>" data-item-id="<%= data.id %>" data-children-id="<%= data._childrenId %>" class="sm-h5 sm-accordion-item-label"><%= data.label %></a><ul id="<%= data._childrenId %>" class="sm-accordion-children"><%== data._renderedItems %></ul></li>',subItemContainerTemplate:'<li id="<%= data.id %>" class="sm-accordion-item<%=data.cssClass%>"<% if (data.id) { %> data-id="<%= data.id %>"<% } %> data-label="<%= data.label %>"><%== data._renderedItem %></li>',subItemTemplate:'<% if (data.url) { %><a href="<%= data.url %>" class="sm-accordion-item-label" data-item-id="<%= data.id %>"><%= data.label %></a><% } else { %><span class="sm-accordion-item-label" data-item-id="<%= data.id %>"><%= data.label %></span><% } %>',destructor:function(){this._detachEvents()},render:function(){var t,a,i,s,l=this.get("container"),n=this._compileTemplates(),d=this.get("items"),m=d.length,c=[];for(s=0;s<m;s++)t=d[s],a=["sm-accordion-item"],(i=d[s].children)&&i.length>0&&a.push("sm-accordion-item-has-children"),t.open&&a.push("sm-accordion-item-open"),c.push(n.item(e.merge({id:e.guid(),itemClassNames:a,url:"#",label:t.label,_childrenId:e.guid(),_renderedItems:this._renderSubItems(i)},t)));return l.append(c.join("")),this._attachEvents(),this},_renderSubItems:function(t){var a,i,s,l=this._compileTemplates(),n=[];if(!t)return"";for(e.Lang.isArray(t)||(t=[t]),a=t.length,s=0;s<a;s++)(i=t[s])&&(i.id||(i.id=e.guid()),n.push(l.subItemContainer({id:i.id,item:i,label:i.label,cssClass:i.cssClass?" "+i.cssClass:"",_renderedItem:l.subItem(i)})));return n.join("")},addSubItem:function(e,t){var a=this.get("container").all(">.sm-accordion-item").item(e);a&&(a.addClass("sm-accordion-item-has-children"),a.one(".sm-accordion-children").append(this._renderSubItems(t)))},_attachEvents:function(){var e=this.get("container");this._detachEvents(),this._eventHandles=[],this._eventHandles.push(e.delegate("click",this._onItemClick,"> .sm-accordion-item > a",this))},_detachEvents:function(){new e.EventHandle(this._eventHandles).detach()},_compileTemplates:function(){return this._templates||(this._templates={item:e.Template.Micro.compile(this.itemTemplate),subItemContainer:e.Template.Micro.compile(this.subItemContainerTemplate),subItem:e.Template.Micro.compile(this.subItemTemplate)}),this._templates},_onItemClick:function(e){var t=this.get("container"),a=e.currentTarget.get("parentNode");a.hasClass("sm-accordion-item-open")?a.removeClass("sm-accordion-item-open"):(this.get("mutuallyExclusive")&&(this._allItems||(this._allItems=t.all(".sm-accordion-item")),this._allItems.removeClass("sm-accordion-item-open")),a.addClass("sm-accordion-item-open")),e.preventDefault()}},{ATTRS:{items:{},mutuallyExclusive:{value:!0}}}),SM.currentModule=null}),"",{requires:["template-micro","node","view","sm-templates-form","sm-templates-button"]});
YUI.add("sm-action-panel",(function(e){SM.currentModule="sm-action-panel";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-modal")),o=babelHelpers.interopRequireDefault(t("sm-component-panel"));class a extends l.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"modalRef",l.default.createRef()),babelHelpers.defineProperty(this,"_onCloseClick",()=>{this.props.onClose&&this.props.onClose()})}render(){let{children:e,closeButtonSkin:t,closeButtonText:a,title:s,width:u,...i}=this.props;return l.default.createElement(n.default,babelHelpers.extends({},i,{ref:this.modalRef}),l.default.createElement(o.default,{className:"sm-action-panel",headerPosition:o.default.HEADER_INSIDE,width:u},!!s&&l.default.createElement(o.default.Header,null,l.default.createElement("h1",null,s)),l.default.createElement(o.default.Body,null,e,l.default.createElement(r.default,{className:"sm-action-panel-close",onClick:this._onCloseClick,skin:t},a))))}}exports.default=a,babelHelpers.defineProperty(a,"propTypes",{...n.default.propTypes,children:function(e,t,n){let o=!1;if(l.default.Children.forEach(e[t],e=>{e&&e.type!==r.default&&(o=!0)}),o)return new Error("".concat(n,": all children must be <Button>s"))},closeButtonSkin:e.default.string,closeButtonText:e.default.string,title:e.default.string,width:e.default.number}),babelHelpers.defineProperty(a,"defaultProps",{closeButtonSkin:"default",closeButtonText:"Close",width:336}),babelHelpers.defineProperty(a,"displayName","ActionPanel")}(),SM.currentModule=null}),"",{requires:["react","sm","sm-component-button","sm-component-panel","sm-modal"]});
YUI.add("sm-admin-menu-helpers",(function(e){SM.currentModule="sm-admin-menu-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showAdminEditProfilePanel=function(e){(0,i.default)(e)},exports.checkIfAssetsAreMinified=function(){let t=e.default.get("jslevel");return"-min"===t||!t},exports.onJSCSSMinClick=function(){u("jslevel",!0)},exports.onJSCSSRawClick=function(){o("jslevel","-raw",!0)},exports.checkIfTimeStuffIsOn=function(){return e.default.get("timeStuff")},exports.onToggleTimeStuffClick=function(e){o("timeStuffNick",e),f("timeStuff",!0),u("timeStuffImages",!0)},exports.checkIfTimeStuffImagesIsOn=function(){return!!e.default.get("timeStuffImages")},exports.onToggleTimeStuffImagesClick=function(e){o("timeStuffNick",e),f("timeStuff",!0),f("timeStuffImages",!0,!0)},exports.checkIfHideNotificationsIsOn=function(){return!!e.default.get("dpnaa")},exports.onToggleNotificationsClick=function(){f("dpnaa",!0,!0)};var e=babelHelpers.interopRequireDefault(t("js-cookie")),n=babelHelpers.interopRequireDefault(t("sm-dom")),i=babelHelpers.interopRequireDefault(t("sm-panel-profile-editor-launcher"));function o(t,i,o){e.default.set(t,i,{domain:SM.env.host.session,path:"/",expires:new Date(+new Date+31536e6),secure:!0,sameSite:"None"}),o&&n.default.doc.location.reload(!0)}function u(t,i){e.default.remove(t,{domain:SM.env.host.session,path:"/"}),i&&n.default.doc.location.reload(!0)}function f(t,i,f){e.default.get(t)?u(t):o(t,i),f&&n.default.doc.location.reload(!0)}}(),SM.currentModule=null}),"",{requires:["js-cookie","sm-dom","sm-panel-profile-editor-launcher"]});
YUI.add("sm-album-image-picker-actions",(function(e){SM.currentModule="sm-album-image-picker-actions";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadAlbumImages=function(r,a,t){a=Array.isArray(a)?new Set([...a,"ImageSizeDetails"]):{...a||{},ImageSizeDetails:!0};return function(u){let i=Math.ceil(t/100),n=Array.apply(null,{length:i}).map((t,i)=>{let n=0===i?1:100*i+1;return u((0,e.fetchPageFromAPI)({uri:r,expand:a,data:{start:n,count:100}}))});return Promise.all(n)}};var e=r("sm-api-redux-paginator-actions")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-paginator-actions"]});
YUI.add("sm-album-image-picker-container",(function(e){SM.currentModule="sm-album-image-picker-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=t("react-redux"),l=babelHelpers.interopRequireDefault(t("sm-album-image-picker")),i=babelHelpers.interopRequireDefault(t("sm-tiles-v2-data-factory"));const r=(0,a.connect)((function(){return{}}),void 0,(function(e,t,a){let{disabledIds:l=[],showFilenames:r,images:n,initiallySelectedImageKeys:u,onChange:d,onExpandClick:o,...s}=a;return{...s,...e,initiallySelectedIds:u,tiles:i.default.getTileDataFromObjects(n).map(e=>{let t={};return o&&(t={showExpandButton:!0,onExpandClick:()=>{o(e.uniqueId)}}),{...e,...t,disabled:l.includes(e.uniqueId),showBuyButton:!1,showDownloadButton:!1,isCollected:!1,hoverEffect:"none",infoStyle:r?"over":"never",showTitle:r,title:r&&e.filename}}),onChange:e=>{d(e.selectedIds.toArray())}}}))(l.default);r.propTypes={disabledIds:e.default.arrayOf(e.default.string),initiallySelectedImageKeys:e.default.arrayOf(e.default.string),onChange:e.default.func.isRequired,onExpandClick:e.default.func,selectDisabled:e.default.bool,showFilenames:e.default.bool,images:e.default.arrayOf(e.default.object).isRequired};var n=r;exports.default=n}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-album-image-picker","sm-tiles-v2-data-factory"]});
YUI.add("sm-album-image-picker",(function(e){SM.currentModule="sm-album-image-picker";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("sm-tiles-v2-grid")),a=babelHelpers.interopRequireDefault(t("sm-tiles-v2-grid-virtualized")),r=babelHelpers.interopRequireDefault(t("sm-tiles-v2-selection-manager"));const u=24;function d(t){let{containerWidth:l,disabledIds:d,gridSpacing:s=u,initiallySelectedIds:n,maxItemsPerRow:o,selectDisabled:c,tiles:f,onChange:m}=t,p=250;if(o&&l){p=(l-(o+1)*s)/o}if(0===f.length)return null;let b=e.default.createElement(a.default,{imageScaling:i.default.IMAGE_SCALING_CONTAIN,items:f,overscanRowCount:2,spacing:s,tileHeight:p,tileWidth:p});return c?b:e.default.createElement(r.default,{disabledIds:d,initiallySelectedIds:n,onSelectionChange:m},b)}d.propTypes={containerWidth:l.default.number,disabledIds:l.default.arrayOf(l.default.string),gridSpacing:l.default.number,initiallySelectedIds:l.default.arrayOf(l.default.string),maxItemsPerRow:l.default.number,selectDisabled:l.default.bool,tiles:l.default.arrayOf(l.default.object).isRequired,onChange:l.default.func.isRequired},d.displayName="AlbumImagePicker"}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-tiles-v2-grid","sm-tiles-v2-grid-virtualized","sm-tiles-v2-selection-manager"]});
YUI.add("sm-album-model",(function(e){SM.currentModule="sm-album-model";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=babelHelpers.interopRequireDefault(l("sm-image-model")),u=babelHelpers.interopRequireDefault(l("sm-model-sync-api"));const t=e.Base.create("sm-album-model",e.Model,[u.default,e.ModelRelate],{idAttribute:"AlbumID",apiEndpoint:"album",initializer:function(){var e=this.get("HighlightImageData");e&&this.set("HighlightImageModel",new a.default(e))},apiCategories:{default:{expanded:{Image:a.default}}}},{ATTRS:{AlbumID:{value:null},AlbumKey:{value:null},NickName:{value:null},Title:{value:""},Description:{value:""},NiceName:{value:""},Public:{value:!0},CategoryID:{value:0},SubCategoryID:{value:0},HighlightImageID:{value:0},URL:{value:null},Share:{value:!1},CanSave:{value:!1},Protected:{value:!0},Keywords:{value:null},LargestSize:{value:null},Watermark:{value:!1},WorldSearchable:{value:!0},SmugSearchable:{value:!0},ShowKeywords:{value:null},Geography:{value:!0},ProofDays:{value:0},TemplateID:{value:0},SquareThumbs:{value:!0},UploadKey:{value:""},Printable:{value:!1},HasImages:{value:!1},IsOwner:{value:!1},IsAssistant:{value:!1},IsFriend:{value:!1},IsFamily:{value:!1},External:{value:!1},FriendEdit:{value:!1},FamilyEdit:{value:!1},EXIF:{value:!1},Filenames:{value:!1},Slideshow:{value:!0},IsPrivate:{value:!1},SecurityType:{value:null},EffectiveSecurityType:{value:null},AllowDownloads:{value:!1},HasDownloadPassword:{value:!1},DownloadPassword:{value:""},IsSellable:{value:!1},CommerceLightbox:{value:!0},AlbumTemplateID:{value:0}},RELATIONSHIPS:{Images:{type:"toMany",key:"AlbumID",relatedKey:"AlbumID",relatedModel:"SM.Models.Image",listType:"SM.Models.ImageList"},Image:{type:"toOne",key:"HighlightImageID",relatedKey:"ImageID",relatedModel:"SM.Models.Image"},User:{type:"toOne",key:"NickName",relatedKey:"NickName",relatedModel:"SM.Models.User"}}});e.namespace("SM.Models").Album=t;var o=t;exports.default=o}(),SM.currentModule=null}),"",{requires:["base","model","model-list","model-relate","sm-image-model","sm-user-model","sm-models-imagelist","sm-model-sync-api"]});
YUI.add("sm-album-selectors",(function(e){SM.currentModule="sm-album-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSourceOrContextAlbum=exports.getMetaSourceAlbum=exports.getAlbumImageOwner=exports.getImageSourceAlbum=exports.getImageContextAlbum=void 0;var e=t("sm-api-redux-selectors");const r=(t,r)=>(0,e.getExpansion)(t,r,"Album");exports.getImageContextAlbum=r;const u=(t,r)=>(0,e.getExpansion)(t,r,"ImageAlbum");exports.getImageSourceAlbum=u;exports.getAlbumImageOwner=(t,r)=>{let{Uris:{User:u}={}}=(0,e.getEntity)(t,r);return u?(0,e.getEntity)(t,u):{}};exports.getMetaSourceAlbum=(e,t)=>{let l=r(e,t),n=u(e,t);if(!n)return;let{HideOwner:m}=l||{},{HideOwner:o}=n||{},s=!(!m&&!o),i=!!l&&l!==n;return!!l&&l===n?{isHideOwnerAlbum:s}:{...n,isContextAlbum:i,isHideOwnerAlbum:s}};exports.getSourceOrContextAlbum=(e,t)=>u(e,t)||r(e,t)}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors"]});
YUI.add("sm-analytics-constants",(function(E){SM.currentModule="sm-analytics-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOCATION_GALLERY_HEADER=exports.LOCATION_MULTI_PHOTO=exports.LOCATION_SINGLE_PHOTO=exports.LOCATION_ORGANIZER=exports.LOCATION_LIGHTBOX=exports.LOCATION_GALLERY=exports.TRIGGER_THIS_PHOTO=exports.TRIGGER_PHOTO=exports.TRIGGER_KEYPRESS=exports.TRIGGER_ICON_BAR=exports.TRIGGER_ESC=exports.TRIGGER_BUTTON=exports.SCREEN_CONTEXTS=exports.EVENT_PARAM=exports.ACTION=exports.CATEGORY=exports.CONTEXT_PARAM=exports.CONTEXT=void 0;const E={API_ENDPOINT:"iglu:com.smugmug/api_endpoint/jsonschema/1-0-0",API_ERROR:"iglu:com.smugmug/api_error/jsonschema/1-0-0",API_REQUEST:"iglu:com.smugmug/api_request/jsonschema/1-0-0",AUTHENTICATION:"iglu:com.smugmug/authentication/jsonschema/1-0-0",DEVICE:"iglu:com.smugmug/device/jsonschema/1-0-1",COLLECTION:"iglu:com.smugmug/collection/jsonschema/1-0-0",CONTENT:"iglu:com.smugmug/content/jsonschema/1-0-0",IMAGE:"iglu:com.smugmug/image/jsonschema/1-0-0",IMAGE_EDIT:"iglu:com.smugmug/image_edit/jsonschema/1-0-0",NODE:"iglu:com.smugmug/node/jsonschema/1-0-3",NOTIFICATION:"iglu:com.smugmug/notification/jsonschema/1-0-0",PAYMENT:"iglu:com.smugmug/payment/jsonschema/1-0-0",PRODUCT:"iglu:com.smugmug/product/jsonschema/1-0-0",SCREEN:"iglu:com.smugmug/screen/jsonschema/1-0-0",SEARCH:"iglu:com.smugmug/search/jsonschema/1-0-0",SHARING:"iglu:com.smugmug/sharing/jsonschema/1-0-0",SUBSCRIPTION:"iglu:com.smugmug/subscription/jsonschema/1-0-0",SURVEY:"iglu:com.smugmug/survey/jsonschema/1-0-0",TESTING:"iglu:com.smugmug/testing/jsonschema/1-0-0",USER:"iglu:com.smugmug/user/jsonschema/1-0-0",TEST:"iglu:com.smugmug/test_event/jsonschema/1-0-0"};exports.CONTEXT=E;const T={[E.SCREEN]:{SCREEN_NAME:"screen_name"}};exports.CONTEXT_PARAM=T;exports.CATEGORY={ACCOUNT_CLOSE:"Account Close",ACCOUNT_EXPIRATION:"Account Expiration",ADD_TO_CART:"Add To Cart",BUY:"Buy",CART:"Cart",CHOOSE_SITE_DESIGN:"Choose Site Design",CONTACTS:"Contacts",CONTENT_WIZARD:"Content Wizard",CUSTOMIZER:"Customizer",FAVORITE:"Favorite",FLOATING_ACTION_BUTTON:"Floating Action Button",FULLSCREEN:"Fullscreen",FUNNEL_ONBOARDING:"Onboarding Funnel",GALLERY_COVER_PHOTO:"Gallery Cover Photo",GALLERY_SETTINGS:"Gallery Settings",GETTING_STARTED:"Getting Started",GIFT_OF_SMUGMUG:"Gift of SmugMug",GLOBAL_NAV:"Global Nav",HELP_CHAT:"Help Chat",HELP_GUIDE:"Help Guide",HELP_MENU:"Help Menu",IMAGE_EDITOR:"Image Editor",IMAGE_TOOL:"Image Tool",LIGHTBOX_IMAGE_TOOL:"Lightbox Image Tool",LIGHTBOX:"Lightbox",LOGIN:"Login",MARKETING_PAGE:"Marketing Page",MENU_CONTENT_BLOCK_SETTINGS:"Menu Content Block Settings",MIGRATION_PREVIEW_MODAL:"Migration Preview Modal",MIGRATION:"Migration",ORGANIZER:"Organizer",PARTNER_PRODUCTS:"Partner Products",PHANFARE_MIGRATION:"Phanfare Migration",PICTURELIFE_MIGRATION:"Picturelife Migration",PRICELISTS:"Pricelists",PRIVATE_SHARING:"Private Sharing",PROMOTION:"promotion",QUICKSTART_GUIDE:"Quickstart Guide",RAW_NOTIFICATION:"RAW Notification",RAW_SUBSCRIBE:"RAW Subscribe",RAW_TRIAL:"RAW Trial",SECTION_BAR:"Section Bar",SHARE_PANEL:"Share Panel",SHARED_WITH_ME:"Shared With Me",SIGNUP:"Sign Up",SLIDESHOW:"Slideshow",SUBSCRIBE:"Subscribe",SUBSCRIPTION_RENEWAL:"Subscription Renewal",SUBSCRIPTION_SETTINGS:"Subscription Settings",TRANSACTION:"transaction",TRIAL:"Trial",TRIAL_QUESTIONNAIRE:"Trial Questionnaire",UPLOAD:"Upload",WATERMARK:"Watermark"};exports.ACTION={ADD_FAVORITE:"Add Favorite",ADJUST_IMAGE_SLIDER:"Adjust Image Slider",ACCESS_PHOTOS:"Access Photos",BREADCRUMB_CLICK:"Breadcrumb Click",BUTTON_CLICK:"Button Click",CANCEL:"Cancel",CANCELED:"Canceled",CARD_VIEW_COMPLETE:"Card View Complete",CHOOSE_AND_CUSTOMIZE:"Choose And Customize",CLICKED:"Clicked",CLOSE:"Close",CLOSED:"Closed",COMMENTS:"Comments",DESCRIPTION_CLICK:"Description Click",DISCARD_CHANGES:"Discard Changes",DISPLAYED:"Displayed",DOWNLOAD:"Download",DOWNLOAD_FILE_CLICK:"Download File Click",EDIT:"Edit",GIFT_OF_SMUGMUG_START:"Start",HEADER_ACTION_CLICK:"Header Action Click",HELP_CHAT_WINDOW_OPENED:"Window Opened",INTENT_TO_SELL:"Intent To Sell",LEARN_MORE:"Learn More",LINK_CLICK:"Link Click",LOGIN_ESCAPE:"Login Escape",MARKETING_EXPAND_MENU:"Expand Menu",MARKETING_EXPAND_TEXT:"Expand Text",MARKETING_NAVIGATION_CLICK:"Navigation Click",MARKETING_PLAY_VIDEO:"Play Video",MENU_ITEM_CLICK:"Menu Click",MODE_CHANGE:"Mode Change",NAVIGATION_CLICK:"Navigation Click",OPEN_TOOL:"Open Tool",PHOTO_DETAILS:"Photo Details",PREVIEW:"Preview",PUBLISH:"Publish",REMOVE_FAVORITE:"Remove Favorite",SAVE_FOR_LATER:"Save For Later",SCREEN_VIEW:"Screen View",SEE_ALL:"See All",SHOW_ME_MY_SITE:"Show Me My Site Interstitial",SIDEBAR_CLOSE:"Sidebar Close",SIGN_UP_ERROR:"Sign Up Error",SIGN_UP:"Sign Up",START:"Start",SUBMIT:"Submit",SUBSCRIBE_SELECT_PLAN:"Select Plan Level",TAB_ACTION_CLICK:"Tab Action Click",TAB_VIEW_CLICK:"Tab View Click",TEMPLATE_PREVIEW:"Preview Template",TEMPLATE_SELECT:"Choose Template",TOOLS:"Tools",TRIAL_SIGN_UP_ERROR:"Trial Sign Up Error",TRIAL_SIGN_UP:"Trial Sign Up",TRIAL_START:"Start",UPLOAD_CLICK:"Upload Click",UPLOAD_FINISH:"Finish Upload",USE_OWN_PHOTOS:"Use Own Photos",USE_SAMPLE_PHOTOS:"Use Sample Photos"};exports.EVENT_PARAM={LABEL:"label",PROPERTY:"property",VALUE:"value"};exports.SCREEN_CONTEXTS={SECTION_BODY:"Body",SECTION_HERO:"Hero",SECTION_HEADER:"Header",SECTION_USER_MENU:"User Menu"};exports.TRIGGER_BUTTON="Button";exports.TRIGGER_ESC="Esc";exports.TRIGGER_ICON_BAR="Action Bar";exports.TRIGGER_KEYPRESS="Keypress";exports.TRIGGER_PHOTO="Photo";exports.TRIGGER_THIS_PHOTO="This Photo";exports.LOCATION_GALLERY="Gallery";exports.LOCATION_LIGHTBOX="Lightbox";exports.LOCATION_ORGANIZER="Organizer";exports.LOCATION_SINGLE_PHOTO="Single Photo";exports.LOCATION_MULTI_PHOTO="Multi Photo";exports.LOCATION_GALLERY_HEADER="Gallery Header"}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-analytics-core",(function(e){SM.currentModule="sm-analytics-core";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logTransaction=exports.logEvent=exports.dataLayerPush=exports.initGoogleTagManager=void 0;const e=SM.import("sm-dom"),t=SM.import("lodash"),a=SM.import("sm-abtest");exports.initGoogleTagManager=function(t){if(!e.win.SMDataLayer){if(e.win.SMDataLayer=[t],SM.env.featureFlags["web.new-gtm-container"]){let t="S83cJ6lUBucTwx8RSOSDgg",a="env-2",n=SM.env.type;"dev"===n?(t="uC-RoYcVlEBs20J2f2ScAQ",a="env-5"):"test"===n&&(t="ysYFiNR_Fzes3vevfF4qPQ",a="env-7"),function(e,n,r,i,o){e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=n.getElementsByTagName(r)[0],c=n.createElement(r);c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id=GTM-5VPV7H4&l=SMDataLayer"+"&gtm_auth=".concat(t,"&gtm_preview=").concat(a,"&gtm_cookies_win=x"),s.parentNode.insertBefore(c,s)}(e.win,e.doc,"script","SMDataLayer")}else!function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(a)[0],o=t.createElement(a);o.async=!0,o.src="//www.googletagmanager.com/gtm.js?id="+r+"&l=SMDataLayer",i.parentNode.insertBefore(o,i)}(e.win,e.doc,"script","SMDataLayer",t.tag_manager_id);if(e.win.SMDataLayer_preInit){var a=e.win.SMDataLayer_preInit;e.win.SMDataLayer_preInit=null,e.win.SMDataLayer.push(...a)}}};const n=function(){return e.win.SMDataLayer?e.win.SMDataLayer:e.win.SMDataLayer_preInit||(e.win.SMDataLayer_preInit=[])};exports.dataLayerPush=function(e){var a=t.mapValues(e,()=>"");n().push(a),n().push(t.omitBy(e,e=>null==e))};var r={};exports.logEvent=function(e,r,i,o){return i||(i={}),new Promise((function(s){a.getActiveTests(a.VISITOR_TYPE.BOTH).then((function(a){var c=t.transform(a,(function(e,t){e[t.testID]=t.sideName(t.getTestSideIfAssigned())}),{});i=t.defaults({ue_action:r},c,i,{action_source:"user"}),n().push({event_data:""});var u={event:"metric",event_category:e,event_action:r,event_data:i,event_snowplow_version:1};o&&(u.event_user_id_override=o),n().push(u),setTimeout(()=>{s()},500)}))}))};exports.logTransaction=function(e,a,i,o,s,c){s||(s={});var u=s.data||{};return n().push({event_data:""}),n().push({event:"transaction",event_snowplow_version:1,event_category:e,event_action:a,event_data:u,event_user_id_override:c,transactionId:i,transactionTotal:o,transactionAffiliation:s.affiliation,transactionShipping:s.shipping,transactionTax:s.tax,transactionProducts:s.products}),r.logEvent(e,a,t.defaults({transaction_id:i},u),c)},module.exports._dataLayer=n}(),SM.currentModule=null}),"",{requires:["sm","sm-abtest","sm-dom"]});
YUI.add("sm-analytics-redux",(function(e){SM.currentModule="sm-analytics-redux";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";let e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=()=>t=>r=>{let{_internal:{analytics:{category:n,action:l,contexts:a,...u}={}}={}}=r;if(n&&l){let t=[];e||t.push(SM.load("sm-analytics").then(module=>{e=module})),Promise.all(t).then(()=>{let t=e.Tracker.createEvent(n,l,u);a&&Object.entries(a).forEach(([e,r])=>{t.addContext(e,r)}),t.log()})}return t(r)}}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-analytics-snowplow-helpers",(function(e){SM.currentModule="sm-analytics-snowplow-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackLinkClick=function(t){let{linkTrackingAction:r,linkTrackingCategory:l,linkTrackingContexts:n,linkTrackingLabel:i,linkTrackingProperty:o,linkTrackingValue:c}=t.dataset;if(!l&&!r)return void e.default.add("snowplow-tracking",{[e.default.FIELD_MESSAGE]:"Category or action not specified on tracking link",linkText:t.textContent},e.default.LEVEL_ERROR);c&&(c=parseFloat(c),isNaN(c)&&(c=void 0));let u={label:i,property:o,value:c};Object.keys(u).forEach(e=>{void 0===u[e]&&delete u[e]});let s=a.default.createEvent(l,r,u);if(n)try{n=JSON.parse(n),n.forEach(e=>{s.addContext(e.schema,e.data)})}catch(a){return void e.default.add("snowplow-tracking",{[e.default.FIELD_MESSAGE]:"Malformed context on tracking link",linkText:t.textContent},e.default.LEVEL_ERROR)}s.log()},exports.trackPageView=function(){Object.create(r.default,{tracker:{value:a.default}}).log()},exports.LOG_CATEGORY=void 0;var e=babelHelpers.interopRequireDefault(t("sm-smuglog")),a=babelHelpers.interopRequireDefault(t("sm-analytics-tracker")),r=babelHelpers.interopRequireDefault(t("sm-analytics-tracker-page-view"));exports.LOG_CATEGORY="snowplow-tracking"}(),SM.currentModule=null}),"",{requires:["sm-analytics-tracker","sm-analytics-tracker-page-view","sm-smuglog"]});
YUI.add("sm-analytics-structured-event",(function(e){SM.currentModule="sm-analytics-structured-event";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{TrackerEvent:e}=SM.import("sm-analytics-tracker-event"),t=SM.import("lodash"),r=SM.import("sm-smuglog"),a=Object.create(e,{category:{value:""},action:{value:""},label:{value:null,writable:!0},property:{value:null,writable:!0},value:{get:function(){return this._value},set:function(e){if(!t.isFinite(e))throw new Error("Number required");this._value=e}}});t.assign(a,{log:function(){return this.addStandardContexts().then(()=>this.tracker.trackEvent(this.category,this.action,this.label,this.property,this.value,this.contexts,this.eventUserId),()=>{r.add("sm-analytics","Failed to add standard contexts to event.",r.LEVEL_WARNING)})}});var n=a;exports.default=n}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-smuglog","sm-analytics-tracker-event"]});
YUI.add("sm-analytics-tracker-event",(function(e){SM.currentModule="sm-analytics-tracker-event";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackerEvent=void 0;var e=babelHelpers.interopRequireDefault(t("lodash")),s=babelHelpers.interopRequireDefault(t("sm-abtest")),i=babelHelpers.interopRequireDefault(t("sm-smuglog")),n=babelHelpers.interopRequireDefault(t("sm-dom")),r=t("sm-analytics-constants"),a=t("sm-launchdarkly"),o=t("sm-page-feature-flag-constants");const l=Object.create(null,{tracker:{value:null},eventUserId:{value:null,writable:!0},isGuest:{get:function(){return this._isGuest},set:function(t){if(!e.default.isBoolean(t))throw new Error("Boolean required");this._isGuest=t}},isOwner:{get:function(){return this._isOwner},set:function(t){if(!e.default.isBoolean(t))throw new Error("Boolean required");this._isOwner=t}},pageType:{get:function(){return this._pageType||this.tracker.pageType},set:function(t){if(!e.default.isString(t))throw new Error("String required");this._pageType=t}},systemAction:{get:function(){return this._systemAction||!1},set:function(t){if(!e.default.isBoolean(t))throw new Error("Boolean required");this._systemAction=t}},contexts:{get:function(){return this._contexts||(this._contexts=[]),this._contexts}}});exports.TrackerEvent=l,e.default.assign(l,{addContext:function(t,s){return this.contexts.push({schema:t,data:e.default.omitBy(s,e=>null==e)}),this},addStandardContexts:function(){return new Promise(t=>{this.addContext(r.CONTEXT.USER,{action_source:this.systemAction?"System":"User",is_logged_in:!!this.tracker.visitorUserRefTag,is_trial_account:this.tracker.visitorUserRefTag?!!this.tracker.visitorIsTrial:null,is_participant_account:this.tracker.visitorUserRefTag?!!this.tracker.visitorIsParticipant:null,is_guest:this.isGuest,is_owner:this.isOwner});let l=n.default.win.devicePixelRatio;l&&l>0&&l<10?(l*=100,l=Math.floor(l),l/=100):(i.default.error("sm-analytics","Invalid or undefined pixelDensity ".concat(l)),l=void 0),this.addContext(r.CONTEXT.DEVICE,{pixel_density:l}),this.pageType&&this.addContext(r.CONTEXT.CONTENT,{page_type:this.pageType}),s.default.getActiveTests(s.default.VISITOR_TYPE.BOTH).then(s=>{e.default.forOwn(s,e=>{e.getTestSideIfAssigned()&&this.addContext(r.CONTEXT.TESTING,{test_name:e.testID,condition:e.sideName(e.getTestSideIfAssigned())})}),t()},e=>{i.default.error("sm-analytics",e),i.default.add("sm-analytics","Failed to get active A/B Tests.",i.default.LEVEL_WARNING),t()});let u=(0,a.getAllLaunchDarklyFlags)();e.default.forOwn(u,(e,t)=>{t.includes(o.WEB_EXPERIMENT)&&this.addContext(r.CONTEXT.TESTING,{test_name:t,condition:e.toString()})})})},log:function(){throw new Error("Individual event type should implement log()")}})}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-abtest","sm-dom","sm-smuglog","sm-analytics-constants","sm-launchdarkly","sm-page-feature-flag-constants"]});
YUI.add("sm-analytics-tracker-page-view",(function(e){SM.currentModule="sm-analytics-tracker-page-view";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=SM.import("sm-smuglog"),t=SM.import("lodash"),{TrackerEvent:a}=SM.import("sm-analytics-tracker-event");var r=Object.create(a);t.assign(r,{log:function(){return this.addStandardContexts().then(()=>this.tracker.trackPageView(this.contexts),()=>{e.add("sm-analytics","Failed to add standard contexts to event.",e.LEVEL_WARNING)})}});var s=r;exports.default=s}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-analytics-tracker-event","sm-smuglog"]});
YUI.add("sm-analytics-tracker-snowplow",(function(e){SM.currentModule="sm-analytics-tracker-snowplow";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureTracker=function(e,t,c){o("newTracker","primary",t,{appId:a(e),cookieDomain:".".concat(c),encodeBase64:!0,eventMethod:"beacon"}),o("setOptOutCookie",n.COOKIE_OPT_OUT)},exports.setUserId=function(e){o("setUserId",e)},exports.attachLinkClickEvents=function(t){e.default.delegate(e.default.doc.body,"click",e=>t(e.currentTarget),"[data-link-tracking-category]")},exports.setupSnowplowGlobals=function(t=e.default.win,n="_smugsp"){t[n]||(t.GlobalSnowplowNamespace=t.GlobalSnowplowNamespace||[],t.GlobalSnowplowNamespace.push(n),t[n]=function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].q=t[n].q||[])},exports.default=o,exports.SNOWPLOW_GLOBAL_OBJECT_NAME=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),n=t("sm-cookie-consent");function o(...t){try{e.default.win._smugsp(...t)}catch(e){}}function a(e){switch(e){case"help":case"Help":return"Help";case"marketing":case"Marketing":return"Marketing";case"news":case"News":return"News";default:return"Website"}}exports.SNOWPLOW_GLOBAL_OBJECT_NAME="_smugsp"}(),SM.currentModule=null}),"",{requires:["sm-cookie-consent","sm-dom"]});
YUI.add("sm-analytics-tracker-transaction-item",(function(e){SM.currentModule="sm-analytics-tracker-transaction-item";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=Object.create(null,{orderId:{value:null},sku:{value:null},price:{value:null},quantity:{value:null},name:{value:null,writable:!0},category:{value:null,writable:!0}});exports.default=e}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-analytics-tracker-transaction",(function(t){SM.currentModule="sm-analytics-tracker-transaction";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{TrackerEvent:t}=SM.import("sm-analytics-tracker-event"),a=SM.import("lodash"),e=SM.import("sm-smuglog"),r=SM.import("sm-analytics-tracker-transaction-item"),n=Object.create(t,{orderId:{value:null},total:{value:null},tax:{value:null,writable:!0},affiliation:{value:null,writable:!0},shipping:{value:null,writable:!0},city:{value:null,writable:!0},state:{value:null,writable:!0},country:{value:null,writable:!0},items:{get:function(){return this._items||(this._items=[]),this._items}}});a.assign(n,{addItem:function(t,e,n,i){var l=Object.create(r,{orderId:{value:this.orderId},sku:{value:t},price:{value:e},quantity:{value:n}});return i&&a.assign(l,i),this.items.push(l),l},log:function(){return this.addStandardContexts().then(()=>this.tracker.trackTransaction(this),t=>{e.error("sm-analytics",t),e.add("sm-analytics","Failed to add standard contexts to transaction.",e.LEVEL_WARNING)})}});var i=n;exports.default=i}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-smuglog","sm-analytics-tracker-event","sm-analytics-tracker-transaction-item"]});
YUI.add("sm-analytics-tracker",(function(e){SM.currentModule="sm-analytics-tracker";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("sm-analytics-tracker-snowplow"));const{dataLayerPush:r}=SM.import("sm-analytics-core"),a=SM.import("sm-analytics-structured-event"),n=SM.import("sm-analytics-tracker-transaction"),i=Object.create(null,{dataLayer:{writable:!0,value:{}},visitorUserRefTag:{get:function(){return this.dataLayer.visitor_user_reftag}},visitorIsTrial:{get:function(){return this.dataLayer.visitor_is_trial}},visitorIsParticipant:{get:function(){return this.dataLayer.visitor_is_participant}},ownerUserRefTag:{get:function(){return this.dataLayer.user_reftag}},pageType:{get:function(){return this.dataLayer.page_type||null}}});Object.assign(i,{init:function(e){this.dataLayer={...e}},createEvent:function(e,t,r){var n=Object.create(a,{tracker:{value:this},category:{value:e},action:{value:t}});return r&&Object.assign(n,r),n},createTransaction:function(e,t,r){var a=Object.create(n,{tracker:{value:this},orderId:{value:e},total:{value:t}});return r&&Object.assign(a,r),a},trackPageView:function(t){return new Promise(a=>{r({event:"page_view",event_snowplow_version:2,page_view_contexts:t}),(0,e.default)("trackPageView",null,t),this._resolveAfterDelay(a)})},trackEvent:function(t,a,n,i,s,o,c){return new Promise(u=>{r({event:"metric",event_snowplow_version:2,event_category:t,event_action:a,event_label:n,event_property:i,event_value:s,event_contexts:o,event_user_id_override:c}),c&&(0,e.setUserId)(c),(0,e.default)("trackStructEvent",t,a,n,i,s,o),c&&(0,e.setUserId)(this.visitorUserRefTag),this._resolveAfterDelay(u)})},trackTransaction:function(t){return new Promise(a=>{r({event:"transaction",event_snowplow_version:2,event_category:"",event_action:"",transactionId:t.orderId,transactionTotal:t.total,transactionAffiliation:t.affiliation,transactionTax:t.tax,transactionShipping:t.shipping,transactionCity:t.city,transactionState:t.state,transactionCountry:t.country,transactionProducts:t.items.map(e=>({orderId:e.orderId,sku:e.sku,name:e.name,category:e.category,price:e.price,quantity:e.quantity})),event_contexts:t.contexts,event_user_id_override:t.eventUserId}),t.eventUserId&&(0,e.setUserId)(t.eventUserId),(0,e.default)("addTrans",t.orderId,t.affiliation,t.total,t.tax,t.shipping,t.city,t.state,t.country,null,t.contexts),t.items.forEach(a=>{r({event:"transaction_add_item",event_snowplow_version:2,event_category:"",event_action:"",productOrderId:a.orderId,productSku:a.sku,productName:a.name,productCategory:a.category,productPrice:a.price,productQuantity:a.quantity,event_contexts:t.contexts,event_user_id_override:t.eventUserId}),(0,e.default)("addItem",a.orderId,a.sku,a.name,a.category,a.price,a.quantity,null,t.contexts)}),r({event:"transaction_track",event_snowplow_version:2,event_category:"",event_action:"",event_user_id_override:t.eventUserId}),(0,e.default)("trackTrans"),t.eventUserId&&(0,e.setUserId)(this.visitorUserRefTag),this._resolveAfterDelay(a)})},_resolveAfterDelay:function(e){setTimeout(()=>{e()},500)}});var s=i;exports.default=s}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-analytics-core","sm-analytics-tracker-page-view","sm-analytics-structured-event","sm-analytics-tracker-transaction","sm-analytics-tracker-snowplow"]});
YUI.add("sm-analytics",(function(a){SM.currentModule="sm-analytics";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{dataLayerPush:a,logTransaction:t,logEvent:e,_dataLayer:r}=SM.import("sm-analytics-core"),n=SM.import("sm-analytics-tracker"),{TrackerEvent:s}=SM.import("sm-analytics-tracker-event"),{CONTEXT:c,ACTION:o,CATEGORY:l,CONTEXT_PARAM:i,EVENT_PARAM:T,SCREEN_CONTEXTS:u}=SM.import("sm-analytics-constants"),E={};E.dataLayerPush=a,E.logTransaction=t,E.logEvent=e,E._dataLayer=r,E.Tracker=n,E.ACTION=o,E.CATEGORY=l,E.CONTEXT=c,E.CONTEXT_PARAM=i,E.EVENT_PARAM=T,E.SCREEN_CONTEXTS=u,E._TrackerEvent=s;var M=E;exports.default=M}(),SM.currentModule=null}),"",{requires:["sm","sm-analytics-constants","sm-analytics-core","sm-analytics-tracker","sm-analytics-tracker-event"]});
YUI.add("sm-api-base",(function(e){SM.currentModule="sm-api-base";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e.namespace("SM").API={EXCEPTION_UNKNOWN:"Unknown API Error",STATUS_OK:"ok",STATUS_FAIL:"fail",URL:"/services/api/json/1.4.0/",flushCache:function(){if(e.SM.API._cache)for(var r in e.SM.API._cache)delete e.SM.API._cache[r]}},SM.currentModule=null}),"",{});
YUI.add("sm-api-redux-action-types",(function(E){SM.currentModule="sm-api-redux-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.API_REQUEST=exports._DELETE_RESPONSE=exports.RESPONSE_ERROR=exports.RESPONSE=exports.REQUEST=void 0;exports.REQUEST="API_V2_REQUEST";exports.RESPONSE="API_V2_RESPONSE";exports.RESPONSE_ERROR="API_V2_RESPONSE_ERROR";exports._DELETE_RESPONSE="API_V2_DELETE_RESPONSE";exports.API_REQUEST="API_V2_REQUEST_TRIGGER"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-api-redux-actions",(function(e){SM.currentModule="sm-api-redux-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeResponse=i,exports._deleteResponse=exports.deleteFromAPI=exports.patchToAPI=exports.postToAPI=exports.fetchFromAPI=void 0;var e=t("sm-api-redux-selectors"),r=t("sm-api-redux-action-types"),o=t("sm-dialogs-actions");const s=(e,t)=>({type:r.API_REQUEST,requestConfig:{...e,method:"GET"},requestIdentifier:t});exports.fetchFromAPI=s;exports.postToAPI=(e,t)=>({type:r.API_REQUEST,requestConfig:{...e,method:"POST"},requestIdentifier:t});exports.patchToAPI=(e,t)=>({type:r.API_REQUEST,requestConfig:{...e,method:"PATCH"},requestIdentifier:t});exports.deleteFromAPI=(e,{disableRefresh:t=!1,bypassDefaultErrorHandling:o=!1}={},s)=>function(n){return n(((e,t)=>({type:r.API_REQUEST,requestConfig:{...e,method:"DELETE"},requestIdentifier:t}))(e,s)).then(e=>t?e:n(i(e,{bypassDefaultErrorHandling:o})))};const n=e=>({type:r._DELETE_RESPONSE,canonicalUri:e});function i(t,{bypassDefaultErrorHandling:r=!1}={}){return function(i,u){let a=u(),d=(0,e.searchForEntity)(a,t).filter(e=>e!==t).map(e=>i(s({uri:e}))),c=Promise.all(d).then(()=>{i(n(t))});return r||c.catch(e=>{i((0,o.addError)(void 0,e))}),c}}exports._deleteResponse=n}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-api-redux-action-types","sm-dialogs-actions"]});
YUI.add("sm-api-redux-cache-action-types",(function(_){SM.currentModule="sm-api-redux-cache-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STOP_STORE_RESPONSE_WITH_ID=exports.STORE_RESPONSE_WITH_ID=exports.ADD_RESPONSE_TO_REDUX_STORE=void 0;exports.ADD_RESPONSE_TO_REDUX_STORE="API_REDUX_ADD_RESPONSE_TO_REDUX_STORE";exports.STORE_RESPONSE_WITH_ID="API_REDUX_CACHE_RESPONSE_WITH_ID";exports.STOP_STORE_RESPONSE_WITH_ID="API_REDUX_CACHE_RESPONSE_WITH_ID_STOP"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-api-redux-cache-actions",(function(e){SM.currentModule="sm-api-redux-cache-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addResponseToReduxStore=function(t){return{type:e.ADD_RESPONSE_TO_REDUX_STORE,rawResponse:t}},exports.storeResponseWithRequestId=function(t,r,n){return{type:e.STORE_RESPONSE_WITH_ID,requestIdentifier:t,cacheKey:r,version:n}},exports.stopStoringResponseWithRequestId=function(t){return{type:e.STOP_STORE_RESPONSE_WITH_ID,requestIdentifier:t}};var e=t("sm-api-redux-cache-action-types")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-cache-action-types"]});
YUI.add("sm-api-redux-cache-middleware",(function(e){SM.currentModule="sm-api-redux-cache-middleware";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("sm-api-redux-utils"),r=a("sm-api-redux-action-types"),s=a("sm-api-redux-middleware-actions"),t=a("sm-api-redux-cache-action-types"),i=a("sm-api-redux-cache-utils"),u=a("sm-api-redux-cache-selectors");var c=a=>c=>async d=>{switch(d.type){case t.ADD_RESPONSE_TO_REDUX_STORE:{let r=(0,e.getCanonicalUri)(d.rawResponse.Response.Uri);return void a.dispatch((0,s.response)(d.rawResponse,r))}case r.RESPONSE:{let e=a.getState(),r=(0,u.getCacheKeyForRequestId)(e,d.requestIdentifier);return r&&(0,i.addResponseToLocalCache)(d.rawResponse,r),c(d)}default:return c(d)}};exports.default=c}(),SM.currentModule=null}),"",{requires:["sm-api-redux-utils","sm-api-redux-action-types","sm-api-redux-middleware-actions","sm-api-redux-cache-action-types","sm-api-redux-cache-utils","sm-api-redux-cache-selectors"]});
YUI.add("sm-api-redux-cache-reducers",(function(e){SM.currentModule="sm-api-redux-cache-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,a){switch(a.type){case e.STORE_RESPONSE_WITH_ID:{let e=r._internal||{},t=e.cacheMap||{};return{...r,_internal:{...e,cacheMap:{...t,[a.requestIdentifier]:(0,c.buildCacheKeyWithVersion)(a.cacheKey,a.version)}}}}case e.STOP_STORE_RESPONSE_WITH_ID:{let e=r._internal||{},c=e.cacheMap||{},{[a.requestIdentifier]:t,...u}=c;return{...r,_internal:{...e,cacheMap:{...u}}}}default:return r}};var e=r("sm-api-redux-cache-action-types"),c=r("sm-api-redux-cache-utils")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-cache-action-types","sm-api-redux-cache-utils"]});
YUI.add("sm-api-redux-cache-selectors",(function(e){SM.currentModule="sm-api-redux-cache-selectors";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCacheKeyForRequestId=function(e,r){let{_internal:{cacheMap:{[r]:u}={}}={}}=e;return u}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-api-redux-cache-utils",(function(e){SM.currentModule="sm-api-redux-cache-utils";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addResponseToLocalCache=async function(t,u,a){let c=r(u,a);try{return await e.default.setItem(c,t)}catch(e){return null}},exports.buildCacheKeyWithVersion=r,exports.fetchResponseFromLocalCache=async function(t,u){let a=r(t,u);try{return await e.default.getItem(a)}catch(e){return null}};var e=babelHelpers.interopRequireDefault(t("localforage"));function r(e,t){return t?"".concat(e,"|").concat(t):e}}(),SM.currentModule=null}),"",{requires:["localforage"]});
YUI.add("sm-api-redux-constants",(function(e){SM.currentModule="sm-api-redux-constants";var exports={},S=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.REQUEST_STATUS_MAP=exports.REQUEST_STATUS_ERROR=exports.REQUEST_STATUS_COMPLETE=exports.REQUEST_STATUS_ACTIVE=void 0;var e=S("sm-api-redux-action-types");exports.REQUEST_STATUS_ACTIVE="active";exports.REQUEST_STATUS_COMPLETE="complete";exports.REQUEST_STATUS_ERROR="error";const E={[e.REQUEST]:"active",[e.RESPONSE]:"complete",[e.RESPONSE_ERROR]:"error"};exports.REQUEST_STATUS_MAP=E}(),SM.currentModule=null}),"",{requires:["sm-api-redux-action-types"]});
YUI.add("sm-api-redux-middleware-actions",(function(e){SM.currentModule="sm-api-redux-middleware-actions";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.responseError=exports.response=exports.request=void 0;var e=r("sm-api-redux-action-types"),s=r("sm-api-redux-utils");exports.request=(r,s)=>({type:e.REQUEST,requestIdentifier:s,...r});exports.response=(r,s,t)=>({type:e.RESPONSE,rawResponse:r,lookupKey:s,requestIdentifier:t});exports.responseError=(r,t)=>({type:e.RESPONSE_ERROR,problems:(0,s.extractProblems)(r),rawError:r,requestIdentifier:t})}(),SM.currentModule=null}),"",{requires:["sm-api-redux-action-types","sm-api-redux-utils"]});
YUI.add("sm-api-redux-middleware-helpers",(function(e){SM.currentModule="sm-api-redux-middleware-helpers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onRequestSuccess=function(r,s,i){let d=s.raw,n=(0,u.getCanonicalUri)(d.Response.Uri);return r.dispatch((0,e.response)(d,n,i)),n},exports.onRequestError=function(r,u,s){r.dispatch((0,e.responseError)(u,s))};var e=r("sm-api-redux-middleware-actions"),u=r("sm-api-redux-utils")}(),SM.currentModule=null}),"",{requires:["sm-api-redux-middleware-actions","sm-api-redux-utils"]});
YUI.add("sm-api-redux-middleware",(function(e){SM.currentModule="sm-api-redux-middleware";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-io-core")),t=r("sm-api-redux-action-types"),s=r("sm-api-redux-middleware-actions"),i=r("sm-api-redux-selectors"),d=r("sm-api-redux-middleware-helpers");const u=new Map;var a=r=>a=>n=>{if(n.type!==t.API_REQUEST)return a(n);let o,{requestConfig:l,requestIdentifier:p}=n;return l.fields&&delete l.fields,r.dispatch((0,s.request)(l,p)),p&&"GET"!==l.method&&(o=Symbol(p),u.set(p,o)),new Promise((t,s)=>{(0,e.default)({...l,type:"v2",uris:!0,nestExpansions:!1,expand:(0,i.getPreviousExpansions)(r.getState(),l.uri)}).then(e=>{if(o&&u.get(p)!==o)return;let s=(0,d.onRequestSuccess)(r,e,p);o&&u.delete(p),t(s)}).catch(e=>{o&&u.get(p)!==o||((0,d.onRequestError)(r,e,p),o&&u.delete(p),s(e))})})};exports.default=a}(),SM.currentModule=null}),"",{requires:["sm-io-core","sm-api2-transaction","sm-api-redux-action-types","sm-api-redux-middleware-actions","sm-api-redux-selectors","sm-api-redux-middleware-helpers"]});
YUI.add("sm-api-redux-paginator-action-types",(function(e){SM.currentModule="sm-api-redux-paginator-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAGINATION_REQUEST_FAILURE=exports.PAGINATION_REQUEST=void 0;exports.PAGINATION_REQUEST="API_V2_PAGINATION_REQUEST";exports.PAGINATION_REQUEST_FAILURE="API_V2_PAGINATION_REQUEST_FAIL"}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-api-redux-paginator-actions",(function(t){SM.currentModule="sm-api-redux-paginator-actions";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.paginationRequest=d,exports.deletePaginationRequest=s,exports.fetchPageFromAPI=c,exports.fetchNextPageFromAPI=function(e,n=1,u=!1){return(d,s)=>{let m,p=a(e),g=s(),l=r(g,p),f=o(g,p);f&&!u&&(m=i(g,e));let P=l.findIndex(([t,a])=>t<=n&&n<=a);if(-1===P)return;let[x,E]=l[P],I=!1;if(f.some(t=>x===t.start&&(I={start:E+1,count:t.count},!0)),I){if(m>=0&&I.start+I.count>m){if(!(I.start<m))return;I.count=m-I.start+1}return d(c({uri:p,data:I})).catch(()=>{t.add("sm-api-redux-paginator","fetchNextPageFromAPI for ".concat(e," failed. Check network tab for more details."),t.LEVEL_INFO)})}t.add("sm-api-redux-paginator","fetchNextPageFromAPI got into an invalid state. Request data not available. Doing a NOOP.",t.LEVEL_ERROR)}},exports.fetchPrevPageFromAPI=function(e,i){return(n,u)=>{let d=a(e),s=u(),m=r(s,d),p=o(s,d),g=m.findIndex(([t,a])=>t<=i&&i<=a);if(-1===g)return;let[l]=m[g],f=!1;if(p.some(t=>l===t.start&&(f={start:Math.max(l-t.count,1),count:t.count},!0)),f){if(f.start===l)return;n(c({uri:d,data:f})).catch(()=>{t.add("sm-api-redux-paginator","fetchPrevPageFromAPI for ".concat(e," failed. Check network tab for more details."),t.LEVEL_INFO)})}else t.add("sm-api-redux-paginator","fetchPrevPageFromAPI got into an invalid state. Request data not available. Doing a NOOP.",t.LEVEL_ERROR)}};const t=SM.import("sm-smuglog"),{buildPaginatorUri:a}=SM.import("sm-api-redux-paginator-utils"),{fetchFromAPI:e}=SM.import("sm-api-redux-actions"),{getLoadedIndexes:r,getPaginatorMetadata:o,getPaginatedEntityTotal:i}=SM.import("sm-api-redux-paginator-selectors"),{PAGINATION_REQUEST:n,PAGINATION_REQUEST_FAILURE:u}=SM.import("sm-api-redux-paginator-action-types");function d(t,a,e){return{type:n,uri:t,start:a,count:e}}function s(t,a,e){return{type:u,uri:t,start:a,count:e}}function c(r){let{uri:o,data:{start:i=1,count:n=100}={}}=r;i<1&&(t.add("sm-api-redux-paginator","WARN: Invalid start index passed, defaulting to 1.",t.LEVEL_WARN),i=1),o||t.add("sm-api-redux-paginator","ERROR: No URI provided for fetchPageFromAPI!",t.LEVEL_ERROR);let u=a(o);return a=>(a(d(u,i,n)),a(e({...r,data:{start:i,count:n}})).catch(e=>{throw a(s(u,i,n)),t.add("sm-api-redux-paginator","fetchPageFromAPI for ".concat(u," failed. Check network tab for more details."),t.LEVEL_INFO),e}))}}(),SM.currentModule=null}),"",{requires:["sm","sm-api-redux-actions","sm-api-redux-paginator-action-types","sm-api-redux-paginator-selectors","sm-api-redux-paginator-utils","sm-api-redux-selectors","sm-uri-deprecated","sm-smuglog"]});
YUI.add("sm-api-redux-paginator-reducers",(function(r){SM.currentModule="sm-api-redux-paginator-reducers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INTERNAL=function(r={},t){let{paginator:e={}}=r,u=[n].reduce((r,e)=>e(r,t),e);if(u===e)return r;return{...r,paginator:u}};var r=t("sm-api-redux-paginator-utils");const{PAGINATION_REQUEST:e,PAGINATION_REQUEST_FAILURE:u}=SM.import("sm-api-redux-paginator-action-types");function n(t={},{type:n,uri:a,start:i,count:o}){switch(n){case e:{let e=(0,r.buildPaginatorUri)(a),u=t[e]||[];return u.find(r=>r.start===i&&r.count===o)?t:{...t,[e]:[...u,{start:i,count:o}]}}case u:{let e=(0,r.buildPaginatorUri)(a);if(!t[e])return t;let{[e]:u,...n}=t,s=u.filter(r=>r.start!==i||r.count!==o);return{...n,...0===s.length?null:{[e]:s}}}default:return t}}}(),SM.currentModule=null}),"",{requires:["sm","sm-api-redux-paginator-action-types","sm-api-redux-paginator-utils"]});
YUI.add("sm-api-redux-paginator-selectors",(function(t){SM.currentModule="sm-api-redux-paginator-selectors";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPaginatorMetadata=n,exports.getPaginatedEntity=function(t,e){return a(t,e,1)},exports.getPaginatedEntityByIndex=a,exports.getLoadedIndexes=u,exports.getPaginatedEntityTotal=i,exports.findPaginatedEntity=function(t,e,r){let n=u(t,e)||[],i=n.map(([r])=>a(t,e,r)).findIndex(t=>t.some(r));if(-1===i)return-1;return n[i][0]};var t=e("sm-api-redux-selectors"),r=e("sm-api-redux-paginator-utils");function n(t,e){let{_internal:{paginator:{[(0,r.buildPaginatorUri)(e)]:n}={}}={}}=t;return n}function a(e,a,s){let o=u(e,a),l=o.findIndex(([t,e])=>t<=s&&s<=e);if(-1===l)return[];let[d,c]=o[l],g=n(e,a);g.sort((t,e)=>t.start===e.start?t.count-e.count:t.start-e.start);let p=[];g.some(n=>{let{start:u,count:i,requestData:o}=n;if(u+i<s)return!1;if(u<c&&u>=d){let n=(0,r.buildPaginatorUri)(a,{...o,start:u,count:i}),l=(0,t.getEntity)(e,n);if(!l)return!0;u<s&&u+i>s&&(l=l.slice(s-u+1)),p=[...p,...l]}});let f=i(e,a);-1===f&&(f=Number.POSITIVE_INFINITY);let m=g.map(t=>{let e=Math.min(t.start+t.count,f+1);return[t.start,e]}),M=(0,r.buildOverlapIndexes)(m);return(0,r.removeRanges)(p,M)}function u(t,e){let r=n(t,e);if(!r)return[];let a=r.map(({start:t,count:e})=>{let r=[];for(let n=0;n<e;n++)r.push(t+n);return r}).reduce((t,e)=>[...t,...e],[]);a.sort((t,e)=>t-e);let u=[a[0]],i=[],s=a[0];a.forEach(t=>{t-s>1&&(i.push(s),u.push(t)),s=t}),i.push(a[a.length-1]);let o=[];return u.forEach((t,e)=>{let r=i[e];o.push([t,r])}),o}function i(e,a){let u=n(e,a);if(!u)return-1;let{start:i,count:s,requestData:o}=u[u.length-1]||{},l=(0,r.buildPaginatorUri)(a,{...o,start:i,count:s}),{Pages:{Total:d}={}}=(0,t.getEntityMetadata)(e,l)||{};return d||-1}}(),SM.currentModule=null}),"",{requires:["sm","sm-uri-deprecated","sm-api-redux-selectors","sm-api-redux-paginator-utils"]});
YUI.add("sm-api-redux-paginator-utils",(function(e){SM.currentModule="sm-api-redux-paginator-utils";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildPaginatorUri=function(r,u){let{path:i,queryParams:{start:n,count:a,...l}={}}=new t.default(r),s={...l,...u};Object.keys(s).length>0&&(i="".concat(i,"?").concat(t.default.stringifyQuery(s)));return(0,e.getCanonicalUri)(i)},exports.buildOverlapIndexes=function(e){let r=[],t=e.map(e=>e[0]);t.shift();let u=0,i=e.map(e=>e[1]),n=0;return t.forEach((t,a)=>{let l=i[a];if(l>u&&(u=l),n+=e[a][1]-e[a][0],t<u){let e=n,i=e+(u-t);r.push([e,i])}}),r},exports.removeRanges=function(e=[],r=[]){return e.filter((e,t)=>!r.some(([e,r])=>{if(t>=e&&t<r)return!0}))};var e=r("sm-api-redux-utils"),t=babelHelpers.interopRequireDefault(r("sm-uri-deprecated"))}(),SM.currentModule=null}),"",{requires:["sm","sm-api-redux-utils","sm-uri-deprecated"]});
YUI.add("sm-api-redux-reducers",(function(e){SM.currentModule="sm-api-redux-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DATA=exports.INTERNAL=void 0;var e=r("sm-api-redux-action-types"),t=r("sm-api-redux-utils"),i=r("sm-api-redux-constants");const a=(r={},i,a)=>{switch(i.type){case e.REQUEST:{let e=i.expand;if(Array.isArray(e)){let r={};e.forEach(e=>{r[e]=!0}),e=r}return e=Object.assign({},a,e),{...r,requests:{...r.requests,[(0,t.getCanonicalUri)(i.uri)]:{previousExpansions:e||{}}}}}default:return r}},s=(e={},r)=>{let{rawResponse:{Response:i},lookupKey:a}=r;if(!a)return e;let s=i.Locator,{[s]:n,Uri:u,...c}=i;return{...e,uriMetadata:{...e.uriMetadata,[(0,t.getCanonicalUri)(a)]:{...c}}}},n=(e={},{type:r,requestIdentifier:t})=>t&&"Resource"!==t?{...e,inflight:{...e.inflight,[t]:i.REQUEST_STATUS_MAP[r]}}:e;exports.INTERNAL=(r={},i)=>{switch(i.type){case e.REQUEST:{let e=r.requests,s=e&&e[(0,t.getCanonicalUri)(i.uri)],u=s&&s.previousExpansions||{};return[n,a].reduce((e,r)=>r(e,i,u),r)}case e.RESPONSE:return[s,n].reduce((e,r)=>r(e,i),r);case e.RESPONSE_ERROR:return n(r,i);default:return r}};const u=(e={},{canonicalUri:r})=>{let{[r]:t,...i}=e;return i},c=e=>({...e,Uris:Object.entries(e.Uris||{}).reduce((e,[r,i])=>{let a="object"==typeof i?i.Uri:i;return e[r]=(0,t.getCanonicalUri)(a),e},{})}),o=(e,r)=>{let{Uri:i,Locator:a,LocatorType:s,[a]:n}=r,u=(0,t.getCanonicalUri)(i);switch(s){case"Objects":{if(e[u]&&!n)break;let r=[];Array.isArray(n)&&n.forEach(i=>{let a=(0,t.getCanonicalUri)(i.Uri);r.push(a),e[a]=c(i)}),e[u]={Uris:r};break}case"List":e[u]=n||[];break;case"Object":{if(!n)break;let r=(0,t.getCanonicalUri)(n.Uri);e[r]=c(n),u!==r&&(e[u]={_redirect:r});break}}return e};exports.DATA=(r={},i)=>{switch(i.type){case e.RESPONSE:{let e,{rawResponse:{Response:a,Expansions:s={}}={}}=i,n=a[a.Locator],c=Object.values(s);return n?(c.unshift(a),e={...r}):e=u(r,{canonicalUri:(0,t.getCanonicalUri)(a.Uri)}),c.reduce(o,e)}case e._DELETE_RESPONSE:return u(r,i);default:return r}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-action-types","sm-api-redux-utils","sm-api-redux-constants"]});
YUI.add("sm-api-redux-selectors",(function(e){SM.currentModule="sm-api-redux-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEntityMetadata=function(e,t){let{_internal:{uriMetadata:{[t]:r}={}}={}}=e;return r},exports.byRelatedEntity=function(e,t,r){return i=>(null==t?void 0:t.Uri)===l(e,null==i?void 0:i.Uri,r)},exports.isRequestError=exports.isRequestComplete=exports.isRequestInflight=exports.getRequestStatus=exports.getRelatedEntities=exports.searchForEntity=exports.hasExpansions=exports.getExpansionUri=exports.getExpansion=exports.getPreviousExpansionsForParentExpansion=exports.getPreviousExpansions=exports.getEntity=exports.getApiState=void 0;var e=t("reselect"),r=t("sm-api-redux-constants"),i=t("sm-api-redux-utils");const n=(0,e.createSelector)([e=>e.data,e=>e._internal],(e,t)=>({data:e,_internal:t}));exports.getApiState=n;const s=(e,t)=>{let r=(0,i.getCanonicalUri)(t),n=e.data||{},s=n[r],a=new Set([r]),u=s&&s._redirect;for(;u;)if(s=n[u],a.add(u),u=s&&s._redirect,a.has(u))return;return s},a=(e,t)=>{let r=s(e,t);if(r)return Array.isArray(r.Uris)?r.Uris.map(t=>s(e,t)).filter(e=>void 0!==e):r};exports.getEntity=a;const u=(e,t)=>{let r=e._internal&&e._internal.requests,n=r&&r[(0,i.getCanonicalUri)(t)];return n&&n.previousExpansions||{}};exports.getPreviousExpansions=u;exports.getPreviousExpansionsForParentExpansion=(e,t,r)=>{let i=l(e,t,r),n=u(e,t)||{},s=u(e,i)||{};return Array.isArray(n)&&(n=n.reduce((e,t)=>(e[t]=!0,e),{})),Array.isArray(s)&&(s=s.reduce((e,t)=>(e[t]=!0,e),{})),{...Object.entries(n).reduce((e,[t,i])=>t!==r&&t.startsWith(r)?(e[t=t.replace("".concat(r,"."),"")]=i,e):e,{}),...s}};const o=(e,t,r)=>{let i=Array.isArray(r)?r:r.split("."),n=((e,t,r)=>{let i=a(e,t);if(i&&i.Uris){let t=i.Uris[r];return a(e,t)}})(e,t,i[0]),s=i.slice(1);if(n)return 0===s.length?n:Array.isArray(n)?n.reduce((t,r)=>{let i=o(e,r.Uri,s);if(i)return t.concat(i)},[]):o(e,n.Uri,s)};exports.getExpansion=o;const l=(e,t,r)=>{let i=r.split("."),n=i.pop(),s=i.length?o(e,t,i):a(e,t);return s&&s.Uris&&s.Uris[n]};exports.getExpansionUri=l;exports.hasExpansions=(e,t,r)=>r.every(r=>o(e,t,r));exports.searchForEntity=(e,t)=>{let{data:r={}}=e;return Object.entries(r).map(([e,r])=>!!Object.entries(r).some(([e,r])=>"Uris"===e||Array.isArray(r)?Object.entries(r).some(([,e])=>e===t):r===t)&&e).filter(e=>!1!==e)};exports.getRelatedEntities=(e,t,r)=>{let i=new Set(t.map(t=>o(e,t.Uri,r)));return i.delete(void 0),[...i]};const c=(e,t)=>{let{_internal:{inflight:{[t]:r}={}}={}}=e;return r};exports.getRequestStatus=c;exports.isRequestInflight=(e,t)=>c(e,t)===r.REQUEST_STATUS_ACTIVE;exports.isRequestComplete=(e,t)=>c(e,t)===r.REQUEST_STATUS_COMPLETE;exports.isRequestError=(e,t)=>c(e,t)===r.REQUEST_STATUS_ERROR}(),SM.currentModule=null}),"",{requires:["reselect","sm-api-redux-constants","sm-api-redux-utils"]});
YUI.add("sm-api-redux-utils",(function(e){SM.currentModule="sm-api-redux-utils";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSmugLogDataForRequestFailure=exports.extractProblems=exports.extractGeneralProblems=exports.extractFieldProblems=exports.getCanonicalUri=void 0;var e=babelHelpers.interopRequireDefault(r("sm-dom")),t=babelHelpers.interopRequireDefault(r("sm-uri-deprecated")),s=r("sm-smuglog-constants");const o=new Map,n=new Set(["_responseLevel"]);exports.getCanonicalUri=e=>{if(!e)return;let r=o.get(e);if(r)return r;let{queryParams:s,path:l}=new t.default(e);if(!s)return l;let a=Object.entries(s).filter(([e])=>"APIKey"!==e&&!("_"===e.charAt(0)&&!n.has(e))).sort(([e],[r])=>e>r?1:e<r?-1:0);if(a.length>0){let e=a.reduce((e,[r,t])=>(e[r]=t,e),{}),s=t.default.stringifyQuery(e);r="".concat(l,"?").concat(s)}else r=l;return o.set(e,r),r};const l=e=>{let{error:{response:{Options:{Parameters:r}={}}={}}={}}=e;if(!r)return{};let t=r[Object.keys(r)[0]],s={};return Object.values(t).forEach(e=>{e.Problems&&(s[e.Name]=e.Problems)}),s};exports.extractFieldProblems=l;const a=e=>{let{error:{response:{Response:{Problems:r}={}}={}}={}}=e;return r||[]};exports.extractGeneralProblems=a;const u=e=>{let{error:{response:{Code:r,Message:t,Response:{EndpointType:s,Uri:o}={}}={}}={}}=e;return{statusCode:r,statusMessage:t||"",generalProblems:a(e),fieldProblems:l(e),endpointType:s,requestUri:o}};exports.extractProblems=u;exports.getSmugLogDataForRequestFailure=(r={},t)=>{let o;if(r.error&&r.error.response){let{requestUri:e,endpointType:t,fieldProblems:n,generalProblems:l,statusCode:a,statusMessage:i}=u(r);o={[s.FIELD_MESSAGE]:i,[s.FIELD_STATUS_CODE]:a},t&&(o.endpointType=t),e&&(o.requestUri=e.substring(0,100)),l.length&&(o.generalProblems=l.join("; ")),Object.keys(n).length&&(o.fieldProblems=JSON.stringify(n))}else o={[s.FIELD_MESSAGE]:r.message||"Unknown Network Error"};return o={...o,location:e.default.win.location.href,method:t},o}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-uri-deprecated","sm-smuglog-constants"]});
YUI.add("sm-api",(function(t){SM.currentModule="sm-api";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=t.Lang.isArray,a=t.Array;(e=t.SM.API=t.mix((function(t){t&&(this.url=t.source||e.URL,this.transport=t.transport)}),t.SM.API)).prototype.sendRequest=function(e){if(r(e))return this.sendBatchRequest.apply(this,arguments);var a=e.apiMethod||e.method,n=e.httpMethod||e.apiMethod&&e.method||e.cfg&&e.cfg.method;return(e=t.merge(e)).type="api140",e.url=this.url,e.transport=this.transport,e.apiMethod=a,e.method=e.httpMethod=n,e.callback&&!e.on&&(e.on=e.callback),t.SM.io(e)},e.prototype.sendBatchRequest=function(e,r){var n,o,s,i=[];for(n=0,o=e.length;n<o;++n)i.push(this.sendRequest(e[n]));return s=t.batch.apply(t,i),r&&(r=t.rbind.apply(t,a(arguments,1,!0)),s.then(r,r)),s};var n=e;exports.default=n}(),SM.currentModule=null}),"",{requires:["sm-api-base","sm-api140-transaction","sm-api2-transaction"]});
YUI.add("sm-api140-transaction",(function(e){SM.currentModule="sm-api140-transaction";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var r=babelHelpers.interopRequireDefault(t("sm-smuglog")),s=e.SM.API,o=e.SM.io,n=e.SM.io.Transaction.xhr,a=e.JSON.stringify,i={GET:!0,OPTIONS:!0},h={POST:!0,PUT:!0};function c(e){n.call(this,e)}s._cache||(s._cache={}),e.extend(c,n,{_init:function(){var t,r=this.request=e.merge(this.request),o=r.url||(r.url=s.URL),n={},i=r.data||{};if(r.method=(r.method||"GET").toUpperCase(),h[r.method]&&!i._token&&(this._token=e.SM.CSRF.getToken()),"freshRequest"in r||(r.freshRequest=h[r.method]),"cacheResponse"in r||(r.cacheResponse=!0),r.headers)for(t in r.headers)n[t.toLowerCase()]=r.headers[t];if("accept"in n||(n.accept="application/json"),r.headers=n,"object"==typeof i){for(t in(i=e.merge(i)).method=r.apiMethod,i)i.hasOwnProperty(t)&&"object"==typeof i[t]&&(i[t]=a(i[t]));r._data=i,i=e.QueryString.stringify(i)}h[r.method]?r.data=i:(r.url+=(o.indexOf("?")>-1?"&":"?")+i,r.data=null)},send:function(){var t=this,n=this.request,a=i[n.method],h=n.method+n.url+(n.data||""),c=n.transport,d=c&&o[c]||o[this._defaultTransport];return!a||this.response||n.freshRequest||(this.response=!n.freshRequest&&s._cache[h]),this.response||(this.response=new e.Promise((function(s,o){var a=!1;function i(i,c){var d;t._complete||(t._complete=!0,(d=i?{error:i}:t._formatResponse(this,c)).error?d.error.message&&d.error.message.indexOf("token")>-1?a?(r.default.add("sm-api140-transaction",{message:"Failed resubmission with new CSRF token.",method:n.apiMethod},r.default.LEVEL_WARNING),o(d)):(t._complete=!1,a=!0,e.SM.CSRF.refreshToken().then(h,o)):o(d):s(d))}function h(r){if(r){var s=n._data;s._token=r,n.data=e.QueryString.stringify(s)}t._connection=d.send(n,i)}t._token?t._token.then(h):h()})),this._notifier=new e.Promise.EventNotifier,this._notifier.addEvents(this.response),this._addQueuedSubs(),a&&n.cacheResponse&&(s._cache[h]=this.response)),this.response},_formatResponse:function(e,t){var r={request:this.request,data:e,response:{}},o=this.request.resultLocator;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Unable to parse as JSON")}t.stat===s.STATUS_FAIL&&(r.error=new Error(t.message||s.EXCEPTION_UNKNOWN),t.errors&&(r.error.errors=t.errors)),r.response.meta={stat:t.stat,method:t.method,cache:"boolean"!=typeof t.cache||t.cache},delete t.stat,delete t.method,delete t.cache,t.$meta&&this._addMeta(t,o),r.response.results=o&&t[o]||t}return r},_addMeta:function(e,t){var r,s,o,n,a,i=e.$meta,h=e[t];if(h&&i)for(r=0,s=h.length;r<s;++r)if(n=i[(o=h[r]).$meta])for(a in n)!o.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(o[a]=n[a])}}),e.SM.io.Transaction.api140=c}(),SM.currentModule=null}),"",{requires:["oop","json-stringify","sm-api-base","sm-csrf","sm-io-xhr-transaction","sm-smuglog"]});
YUI.add("sm-api2-transaction",(function(e){SM.currentModule="sm-api2-transaction";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var n=babelHelpers.interopRequireDefault(t("sm-smuglog")),i=babelHelpers.interopRequireDefault(t("sm-uri-deprecated"));let r="undefined"!=typeof document&&document.location&&"https:"===document.location.protocol;const s=new Set(["POST","PUT","PATCH","DELETE"]);var o=e.SM.io.Transaction.xhr,a=e.Lang.isArray,p=e.Array.hash,u=e.Object.values,l={GET:!0,OPTIONS:!0},c={DELETE:!0,PATCH:!0,POST:!0,PUT:!0},d="https://"+SM.env.host.api,f=/(api\/v2\/(?:album\/[a-zA-Z0-9]{6,}\/)?image\/[a-zA-Z0-9]{7,})(-\d)?(.*)/;function h(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _(e,t){var n,i,r,s,o,p;for(i=0,r=t.length;void 0!==e&&i<r;++i){if(a(e)){for(n=[],t=t.slice(i),s=0,o=e.length;s<o;++s)p=_(e[s],t),a(p)?n.push.apply(n,p):n.push(p);return n}e=e[t[i]]}return e}function m(e){o.call(this,e)}e.SM.API&&e.SM.API._cache||(e.namespace("SM.API")._cache={}),e.extend(m,o,{_init:function(){var t,n,r,o=this.request,a=(0,i.default)(o.uri),u=(o.apiRoot||d)+a.path,l=(o.method||"GET").toUpperCase(),h=void 0===o.nestExpansions||o.nestExpansions,_={},m=a.queryParams,y=!(!0!==o.uris&&!o.verbose),g=!y&&o.uris?p(o.uris):{},U=o.data;if(m._shorturis="",m.APIKey=SM.env.apiKey,o.query&&e.mix(m,i.default.parseQuery(o.query.join("&"))),c[l]&&(!U||!U._token)){this._token=e.SM.CSRF.getToken();let t=a.path.match(f);t&&(this._imageUriData={versionlessUri:t[1],imageVersion:t[2],pathAfterKey:t[3]},this._needsVersionedImageUri=!this._imageUriData.imageVersion)}if(o.headers)for(r in o.headers)Object.prototype.hasOwnProperty.call(o.headers,r)&&(_[r.toLowerCase()]=o.headers[r]);if("accept"in _||(_.accept="application/json"),m._accept=_.accept,s.has(l)&&!("content-type"in _)?_["content-type"]="application/x-www-form-urlencoded":!("content-type"in _)&&c[l]&&(_["content-type"]="application/json"),"PATCH"!==l&&"PUT"!==l&&"DELETE"!==l||(m._method=l,l="POST"),o.verbose&&(m._verbose=""),U&&!c[l]&&("object"!=typeof U&&(U=i.default.parseQuery(U)),e.mix(m,U,!0),U=null),u+="?"+i.default.stringifyQuery(m),o.fields&&(u+="&_filter=".concat(encodeURIComponent(o.fields.join(",")))),o.expand||o.append){if(t=this._compileExpansions(o.expand,o.append),!y)for(n in t)-1===n.indexOf(".")&&(g[n]=!0);u+="&_expand="+this._prepareExpansions(t,y)}y||(u+="&_filteruri="+encodeURIComponent(Object.keys(g).join(","))),this.request=e.merge(o,{url:u,data:U,headers:_,method:l,nestExpansions:h,withCredentials:!0,_expansions:t,_original:o})},_prepareExpansions:function(e,t){var n,i,r,s,o,a,p,u=[];for(n in e){if(r=e[n],i=n.slice(n.lastIndexOf(".")+1),s=["?_shorturis="],r.data)if("object"==typeof r.data){let e=Object.entries(r.data).map(([e,t])=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t)));s.push(...e)}else"string"==typeof r.data&&s.push(r.data);r.fields&&s.push("_filter="+encodeURIComponent(Object.keys(r.fields).join(","))),r.uris&&(r.allUris||!r.onlyUris&&t||s.push("_filteruri="+encodeURIComponent(Object.keys(r.uris).join(",")))),r.query=i+s.join("&")}for(n in e)if(!e[n].nested){for(o=[],a=0,p=(s=n.split(/\./)).length;a<p;++a)r=e[s.slice(0,a+1).join(".")],o[a]=r.query;u.push(o.join("."))}return encodeURIComponent(u.join(","))},_compileExpansions:function(t,n){var i,r,s,o,u,l={};function c(e,t){var n,i,r,s;if(e.indexOf(".")>-1)for(r=1,s=(i=e.split(".")).length;r<s;++r)e=i.slice(0,r).join("."),l[e]||(l[e]={uris:{},prune:t}),(n=l[e]).prune&&(n.prune=t),n.uris[i[r]]=!0,n.nested=!0}function d(e,t){var n,i,r;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].indexOf(".")>-1&&(i=e[n],t&&(i=t+"."+i),r=i.slice(i.lastIndexOf(".")+1),i=i.slice(0,-(r.length+1)),l[i]||(l[i]={fields:{},uris:{},prune:!0}),l[i].fields[r]=!0,c(i,!0))}for(i in a(t)&&(t=p(t)),t||(t={}),n&&d(n),t)if(Object.prototype.hasOwnProperty.call(t,i)){if(r=t[i],s=l[i],r.append&&d(r.append,i),s){if(r.uris)if(!0===r.uris)s.allUris=!0;else if(!s.allUris)for(s.onlyUris=!0,o=0,u=r.uris.length;o<u;++o)s.uris[r.uris[o]]=!0;if(r.fields&&s.fields)for(o=0,u=r.fields.length;o<u;++o)s.fields[r.fields[o]]=!0;else s.fields=null;r.data&&(s.data=s.data?e.merge(s.data,r.data):r.data),s.prune=!1}else l[i]=r="object"==typeof r?e.merge(r):{},a(r.uris)?(r.uris=p(r.uris),r.onlyUris=!0):(!0===r.uris&&(r.allUris=!0),r.uris={}),r.fields&&(r.fields=p(r.fields));c(i,!1)}return l},send:function(){var t=this.request,n=t.cache&&l[t.method],i=t.method+t.url+(t.data||"");return n&&!this.response&&(this.response=e.SM.API._cache[i]),this.response||(this.response=this._sendOrQueue(),this._notifier=new e.Promise.EventNotifier,this._notifier.addEvents(this.response),this._addQueuedSubs(),n&&(e.SM.API._cache[i]=this.response)),this.response},_dispatch:function(){var t,n=this,i=this.request;return t=i.transport&&e.SM.io[i.transport]||e.SM.io[this._defaultTransport],new e.Promise((function(r,s){n._connection=t.send(i,(function(t,i){var o,a;if(!n._complete){if(t){if(401===this.status&&!n._retriedRequest)return n._retriedRequest=!0,a=e.SM.CSRF.getToken(),n._token=n._token===a?e.SM.CSRF.refreshToken():a,void n._sendOrQueue().then((function(e){n._complete=!0,r(e)}),(function(e){n._complete=!0,s(e)}));if(n._imageUriData&&!n._fetchedImageVersion)return n._needsVersionedImageUri=!0,void n._sendOrQueue().then((function(e){n._complete=!0,r(e)}),(function(e){n._complete=!0,s(e)}));o={error:t}}else o=n._formatResponse(this,i);n._complete=!0,o.error?s(o):r(o)}}))}))},_sendOrQueue:function(){var t,r=this,s=this.request;return this._token?(s._data||(s._data=s.data||{}),t=this._token,this._needsVersionedImageUri&&(t=Promise.all([t,this._fetchVersionedImageUri().then(e=>{this._needsVersionedImageUri=!1,this._fetchedImageVersion=!0;let t=d+e;this._imageUriData.pathAfterKey&&(t+=this._imageUriData.pathAfterKey);let{query:n}=new i.default(s.url);n&&(t+="?"+n),s.url=t})]).then(e=>e[0])),t.then((function(t){var n=s._data;return n._token=t,s.data=e.JSON.stringify(n),r._dispatch()}),(function(e){throw n.default.add("sm-api2-transaction",{message:"Error getting CSRF token.",method:s.method,url:s.uri,error:e?e.message||e:"(unknown)"},n.default.LEVEL_WARNING),e}))):this._dispatch()},_fetchVersionedImageUri:function(){return new m({uri:"".concat(d,"/").concat(this._imageUriData.versionlessUri)}).then(e=>{let{path:t}=new i.default(e.response.Uri);return t})},_formatResponse:function(e,t){var n,i,s={raw:t,request:this.request._original,data:e},o=this.request._expansions;if(t&&t.Response)if(s.response=t.Response[t.Response.Locator],t.Response.Pages&&(s.pagination=t.Response.Pages),r&&this._hackWebUris(s.response,t.Expansions),s.response)t.Expansions&&this.request.nestExpansions&&this._addExpansions(t),(s.request.fields||t.Expansions)&&(this._appendFields(s.response,s.request),this._pruneExpansions(s.response,o));else if(t.Response.Uris)for(i in n=t.Response.Uris)if(Object.prototype.hasOwnProperty.call(n,i)){s.statusUri=n[i].Uri;break}return s},_addExpansions:function(e){var t,n,i,r,s,o,a,p,l=e.Expansions,c=e.Response;if(c&&l)for((t=u(l)).push(c),n=t.length-1;n>=0;--n)if(o=(s=t[n])[s.Locator])for("Object"===s.LocatorType&&(o=[o]),i=o.length-1;i>=0;--i)if((a=o[i]).Uris)for(r in a.Uris)(p=l[a.Uris[r]])&&(a[p.EndpointType]=p[p.Locator])},_appendFields:function(e,t){var n,i;function r(e,t){if(e&&t){var n,i,r,s={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n].split("."));for(a(e)||(e=[e]),i=0,r=e.length;i<r;++i)if(e[i])for(n in s)e[i][n]=_(e[i],s[n])}}if(r(e,t.append),t.expand)for(i in n=t.expand)Object.prototype.hasOwnProperty.call(n,i)&&n[i].append&&r(_(e,i.split(/\./)),n[i].append)},_pruneExpansions:function(e,t){var n,i,r,s,o,p,u,l,c=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&t[n].prune&&(l=n.split(/\./),c.push({property:l.pop(),path:l}));if(c.length)for(a(e)||(e=[e]),i=0,r=e.length;i<r;++i)for(s=c.length-1;s>=0;--s)if(p=(n=c[s]).path.length?_(e[i],n.path):e[i])for(a(p)||(p=[p]),o=p.length-1;o>=0;--o)(u=p[o])&&(delete u[n.property],delete u.Uris[n.property],h(u.Uris)&&delete u.Uris)},_hackWebUris:function(e,t){let{host:n,protocol:s}=new i.default(document.location.href);[e,...Object.values(t||{})].reduce((e,t)=>e.concat(t),[]).some(e=>{if(e&&e.WebUri){let t=new i.default(e.WebUri);if(t.host===n){if(t.protocol===s)return r=!1,!0;e.WebUri=t.source.replace(t.protocol,s)}}})}}),e.SM.io.Transaction.v2=m}(),SM.currentModule=null}),"",{requires:["oop","json-stringify","sm-api-base","sm-io-xhr-transaction","sm-csrf","sm-smuglog","sm-uri-deprecated"]});
YUI.add("sm-api2",(function(e){SM.currentModule="sm-api2";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e.Lang.isArray,r=e.Lang.isObject,a={All:!0,Pending:!0,Approved:!0};function n(e,a){var n,o,i,u,m,p;if(t(e)){for(n=[],m=0,p=e.length;m<p;++m)if(i=e[m],r(i)){for(u in o=[],i)i.hasOwnProperty(u)&&o.push(u+"="+i[u]);n[m]=encodeURIComponent(o.join("&"))}else n[m]=encodeURIComponent(a+"="+i);return"_multiargs="+n.join(",")}if(r(e)){for(u in n=[],e)e.hasOwnProperty(u)&&n.push(u+"="+encodeURIComponent(e[u]));return n.join("&")}return a+"="+encodeURIComponent(e)}function o(t,r){return function(a,o){var i={type:"v2",uri:"/api/v2"+t,data:n(a,r)};return e.SM.io(o?e.merge(o,i):i)}}function i(r,a,o){return function(i,u){var m,p=t(i)?i[0]:i;return p.path||(p+"").indexOf("/")>-1?this.getNode(i,u,o):(m={type:"v2",uri:"/api/v2"+r,data:n(i,a)},e.SM.io(u?e.merge(u,m):m))}}e.SM.API2=function(t){return(t="string"==typeof t?{uri:t}:e.merge(t)).type="v2",e.SM.io(t)},e.mix(e.SM.API2,{getUser:function(a,o){var i;return r(a)&&!t(a)&&(o=a,a=null),i=a?{type:"v2",uri:"/api/v2/user!nicknamelookup",data:n(a,"nickname")}:{type:"v2",uri:"/api/v2!siteuser"},e.SM.io(o?e.merge(o,i):i)},userSearch:o("/user!search","q"),getFolder:function(e,t){return this.getNode(e,t,"Folder")},getPage:i("/page!keylookup","pagekey","Page"),getAlbum:i("/album!albumkeylookup","albumkey","Album"),getNode:function(t,r,a){var o,i,u=t.user||t.nickName||t.nickname||e.SM.Page&&e.SM.Page.owner&&e.SM.Page.owner.nickName,m=this;return t=t.path||t.urlpath||t,u?(o={type:"v2",uri:"/api/v2!nicknameurlpathlookup",data:n({nickname:u,urlpath:t})},i=e.SM.io(r?e.merge(r,o):o),a&&(i=i.then((function(r){if(e.JSON.parse(r.data.responseText).Response.Locator!==a)throw new Error("Path "+t+" is not of type "+a);return r}))),i):e.SM.io({type:"v2",uri:"/api/v2!siteuser",fields:["NickName"]}).then((function(e){return(t=t.path?t:{path:t}).user=e.response.NickName,m.getNode(t,r,a)}))},getImage:o("/image!imagekeylookup","imagekey"),getAlbumImage:function(r,a){var n,o,i=e.SM.Page&&e.SM.Page.album&&e.SM.Page.album.get("AlbumKey"),u={type:"v2",uri:"/api/v2/album!albumimagekeylookup"},m=r;if(t(r))for(m=[],n=0,o=r.length;n<o;++n)"string"==typeof r[n]?m[n]={albumkey:i,imagekey:r[n]}:m[n]=r[n];else"string"==typeof r&&(m={albumkey:i,imagekey:r});return u.data=m,e.SM.io(a?e.merge(a,u):u)},getAlbumTemplate:o("/albumtemplate!idlookup","albumtemplateid"),getWatermark:o("/watermark!idlookup","watermarkid"),getPrintmark:o("/printmark!idlookup","printmarkid"),getUserRootFolder:o("/folder/user!nicknamelookup","nickname"),getUserWatermarks:function(t,r,a){var o={type:"v2",uri:"/api/v2/user/"+t+"!watermarks",data:n(r)};return e.SM.io(a?e.merge(a,o):o)},getUserPrintmarks:function(t,r,a){var o={type:"v2",uri:"/api/v2/user/"+t+"!printmarks",data:n(r)};return e.SM.io(a?e.merge(a,o):o)},getComment:o("/comment!idlookup","commentid"),getAlbumComments:function(e,t){return this.getComments("Album",e,t)},getImageComments:function(e,t){return this.getComments("Image",e,t)},getNodeComments:function(e,t){return this.getComments("Node",e,t)},getComments:function(t,r,n){n&&(n=n.charAt(0).toUpperCase()+n.slice(1).toLowerCase(),a[n]||(n=null)),e.SM.io({type:"v2",uri:"/api/v2/comment!lookuptype",data:{type:t,typeid:r,status:n||"Approved"}})},getCoupon:o("/coupon!idlookup","couponid"),getMarketingEvent:o("/marketingevent!idlookup","marketingeventid"),getUserStats:o("/stats/user!lookupstats","nickname"),getAlbumStats:o("/stats/album!lookupstats","albumkey"),getImageStats:o("/stats/image!lookupstats","imagekey"),getAlbumImages:function(t,r){var a={type:"v2",uri:"/api/v2/album/"+t+"!images"};return e.SM.io(r?e.merge(r,a):a)},getSmugVault:function(t,r){var a={type:"v2",uri:"/api/v2/smugvault/"+t};return e.SM.io(r?e.merge(r,a):a)}},!0);var u=e.SM.API2;exports.default=u}(),SM.currentModule=null}),"",{requires:["sm-api2-transaction"]});
YUI.add("sm-apierror-model",(function(e){SM.currentModule="sm-apierror-model";var r;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;r=e.Base.create("sm-apierror",e.Model,[],{},{ATTRS:{Field:{value:""},Message:{value:""},Code:{value:null},Severity:{value:"medium"}}}),e.namespace("SM.Models").APIError=r,SM.currentModule=null}),"",{requires:["base-build","model"]});
YUI.add("sm-badge",(function(e){SM.currentModule="sm-badge";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("prop-types")),r=babelHelpers.interopRequireDefault(a("react"));const t=e=>{let{children:a,className:t,skin:l,...s}=e,n=["sm-badge","sm-badge-skin-".concat(l)];return t&&n.push(t),r.default.createElement("span",babelHelpers.extends({className:n.join(" ")},s),a)};t.SKINS={ACCENT:"accent",ALERT:"alert",INFO:"info"},t.displayName="Badge",t.propTypes={skin:e.default.oneOf(Object.values(t.SKINS))},t.defaultProps={skin:"accent"};var l=t;exports.default=l}(),SM.currentModule=null}),"",{requires:["react"]});
YUI.add("sm-banner",(function(e){SM.currentModule="sm-banner";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TYPE_WARNING=exports.TYPE_INFO=exports.TYPE_ERROR=void 0;var e=babelHelpers.interopRequireDefault(a("classnames")),t=babelHelpers.interopRequireDefault(a("prop-types")),n=babelHelpers.interopRequireDefault(a("react")),r=babelHelpers.interopRequireDefault(a("sm-component-button")),l=babelHelpers.interopRequireDefault(a("sm-icon"));exports.TYPE_ERROR="error";exports.TYPE_INFO="info";exports.TYPE_WARNING="warning";const s=a=>{let t,{children:s,className:i,href:u,onDismiss:o,target:c,type:f,onClick:m=null,"data-testid":d}=a,p=(0,e.default)(["sm-banner","sm-flex","sm-flex-items-center","sm-flex-justify-center",i]);switch(f){case"error":t="WarningEncircled";break;case"warning":t="Warning";break;case"info":default:t="InfoEncircled"}let b=u?"a":"div";return n.default.createElement(b,{onClick:m,className:p,"data-close":Boolean(o)||null,"data-type":f,"data-testid":d,href:u||null,target:c||null},n.default.createElement(l.default,{className:"sm-flex-self-start sm-banner-icon",name:t}),n.default.createElement("div",{className:"sm-banner-content"},s),o&&n.default.createElement(r.default,{"aria-label":"Dismiss",className:"sm-banner-close",noChrome:!0,onClick:o},n.default.createElement(l.default,{name:"Close",size:"large"})))};s.displayName="Banner",s.propTypes={href:t.default.string,onDismiss:t.default.func,target:t.default.string,type:t.default.oneOf(["error","info","warning"])},s.defaultProps={type:"info"};var i=s;exports.default=i}(),SM.currentModule=null}),"",{requires:["classnames","react","prop-types","sm-analytics","sm-component-button","sm-icon"]});
YUI.add("sm-batch-add-action-types",(function(_){SM.currentModule="sm-batch-add-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.COM_LB_BATCH_ADD_STORE_CONFIRMATION_DETAILS=exports.COM_LB_BATCH_ADD_VIEW_MODE=exports.COM_LB_BATCH_ADD_SELECT_ITEMS=exports.COM_LB_BATCH_ADD_SET_LOADING_ALBUM=exports.COM_LB_BATCH_ADD_SET_FOCUSED_ITEM=exports.COM_LB_BATCH_ADD_SET_ACTIVE_PANE=exports.COM_LB_BATCH_ADD_FLOW_ENABLED=exports.COM_LB_BATCH_ADD_FILTER_MODE=void 0;exports.COM_LB_BATCH_ADD_FILTER_MODE="COM_LB_BATCH_ADD_FILTER_MODE";exports.COM_LB_BATCH_ADD_FLOW_ENABLED="COM_LB_BATCH_ADD_FLOW_ENABLED";exports.COM_LB_BATCH_ADD_SET_ACTIVE_PANE="COM_LB_BATCH_ADD_SET_ACTIVE_PANE";exports.COM_LB_BATCH_ADD_SET_FOCUSED_ITEM="COM_LB_BATCH_ADD_SET_FOCUSED_ITEM";exports.COM_LB_BATCH_ADD_SET_LOADING_ALBUM="COM_LB_BATCH_ADD_SET_LOADING_ALBUM";exports.COM_LB_BATCH_ADD_SELECT_ITEMS="COM_LB_BATCH_ADD_SELECT_ITEMS";exports.COM_LB_BATCH_ADD_VIEW_MODE="COM_LB_BATCH_ADD_VIEW_MODE";exports.COM_LB_BATCH_ADD_STORE_CONFIRMATION_DETAILS="COM_LB_BATCH_ADD_STORE_CONFIRMATION_DETAILS"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-batch-add-actions",(function(t){SM.currentModule="sm-batch-add-actions";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setBatchAddAlbumLoading=function(t=!1){return{type:n.COM_LB_BATCH_ADD_SET_LOADING_ALBUM,loading:t}},exports.selectBatchAddItems=o,exports.setBatchAddFocusedItem=function(t){return{type:n.COM_LB_BATCH_ADD_SET_FOCUSED_ITEM,itemKey:t}},exports.setBatchAddFilterMode=function(t){return{type:n.COM_LB_BATCH_ADD_FILTER_MODE,filterMode:t}},exports.setBatchAddViewMode=c,exports.setBatchAddActivePane=function(t){return{type:n.COM_LB_BATCH_ADD_SET_ACTIVE_PANE,activePane:t}},exports.storeBatchAddConfirmationDetails=exports.batchAddToCart=void 0;var t=e("sm-api-redux-actions"),a=e("sm-api-redux-selectors"),s=e("sm-lightbox-selectors"),r=e("sm-com-lb-actions"),n=e("sm-batch-add-action-types"),d=e("sm-batch-add-constants");function o(t=[],e=!1){return{type:n.COM_LB_BATCH_ADD_SELECT_ITEMS,itemKeys:t,externalSelect:e}}function c(t){return{type:n.COM_LB_BATCH_ADD_VIEW_MODE,viewMode:t}}exports.batchAddToCart=(e,n,i,A,l,u)=>async(M,T)=>{M((0,r.setAddToCartStart)());let D=[];if(n.length>d.BATCH_ADD_ITEM_LIMIT)for(let t=0;t<n.length;t+=d.BATCH_ADD_ITEM_LIMIT)D.push(n.slice(t,t+d.BATCH_ADD_ITEM_LIMIT));else D.push(n);let m=async a=>(a=>M((0,t.postToAPI)({uri:e,data:{Images:a,Quantity:i}})))(a),h=[];for(let t=0;t<D.length;t++)try{let e=await m(D[t]),r=T(),{FailedImages:n=[]}=(0,a.getEntity)(r,e)||{};n.length>0&&h.push(n.map(t=>(0,s.getImageKey)(r,t)))}catch(t){M((0,r.addToCartError)(t)),h=n}if(await M((0,r.refreshCart)("",A,l)),M(c(d.SM_BATCH_ADD_VIEW_MODE.GRID)),h.length)return M(o(h.flat())),M(_());M(_(u))};const _=(t={})=>({type:n.COM_LB_BATCH_ADD_STORE_CONFIRMATION_DETAILS,details:t});exports.storeBatchAddConfirmationDetails=_}(),SM.currentModule=null}),"",{requires:["sm-api-redux-actions","sm-api-redux-selectors","sm-lightbox-selectors","sm-com-lb-actions","sm-batch-add-action-types","sm-batch-add-constants"]});
YUI.add("sm-batch-add-component",(function(e){SM.currentModule="sm-batch-add-component";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(a("react")),t=babelHelpers.interopRequireDefault(a("prop-types")),l=babelHelpers.interopRequireDefault(a("classnames")),s=babelHelpers.interopRequireDefault(a("sm-banner")),r=babelHelpers.interopRequireDefault(a("sm-component-busy")),d=babelHelpers.interopRequireDefault(a("sm-component-button")),n=babelHelpers.interopRequireDefault(a("sm-icon")),u=babelHelpers.interopRequireDefault(a("sm-com-lb-print-watermark-banner")),i=babelHelpers.interopRequireDefault(a("sm-album-image-picker-container")),o=babelHelpers.interopRequireDefault(a("sm-product-image-gallery-container")),c=babelHelpers.interopRequireDefault(a("sm-smuglog")),m=babelHelpers.interopRequireDefault(a("sm-batch-add-cta")),f=babelHelpers.interopRequireDefault(a("sm-batch-add-observed-container")),b=babelHelpers.interopRequireDefault(a("sm-batch-add-header-component")),p=babelHelpers.interopRequireDefault(a("sm-batch-add-single-wrapper")),h=a("sm-batch-add-constants");const g={key:"",uri:""},y={keys:[],uris:[]},E=a=>{let{availableImageKeys:t=[],bypassSelection:E=!1,disabledImageKeys:R=[],displayedImages:k=[],filterMode:q=h.SM_BATCH_ADD_FILTER_MODE.ALL,focused:A=g,isAddingItemsToCart:D,isFocusedItemSelected:M,isGridMode:S=!0,isMobileClb:C,loadImages:I,location:v,markBannerMessage:w,next:_=g,onExpandClick:H,onNavBackwardRequest:B,onNavForwardRequest:T,pickerKey:x,prev:N=g,productImageGalleryUri:L,selection:F=y,setSelection:O,showBatchAddCTA:U=!1,showBatchAddInSidebar:K=!1,showFilenames:P=!1,totalCount:G}=a,[j,W]=(0,e.useState)(!1),[V,z]=(0,e.useState)(!0),[Y,Z]=(0,e.useState)(0),[J,Q]=(0,e.useState)(0),X=(0,e.useCallback)((e,a)=>{e&&e!==Y&&Z(e),a&&a!==J&&Q(a)},[Y,J]);(0,e.useEffect)(()=>{(async()=>{try{await I()}catch(e){c.default.add("sm-batch-add-component",{error:e,message:"Error loading album images"},c.default.LEVEL_ERROR),W(!0)}finally{z(!1)}})()},[]);let $=(0,e.useCallback)(e=>O(e),[O]),ee=(0,e.useCallback)(e=>H(e),[H]),ae=(0,e.useCallback)(()=>{if(F.keys.includes(A.key)){let e=F.keys.filter(e=>e!==A.key);O(e,!0)}else O([...F.keys,A.key],!0)},[A,F,O]),te=R.includes(A.key),le="Select Photo";te?le="Unavailable":M&&(le="Unselect Photo");let se=(0,l.default)("sm-batch-add","sm-flex","sm-flex-column",{"sm-hidden":C&&!K}),re=(0,l.default)("sm-batch-add-selection-container","sm-flex","sm-flex-grow",{"sm-pb-4":!C,"sm-pb-2":C}),de=(0,l.default)("sm-flex","sm-flex-justify-center",{"sm-pb-4":!C,"sm-pb-2":C}),ne=!C&&L,ue=!V&&!D;return e.default.createElement("main",{className:se},j?e.default.createElement(s.default,{type:s.default.TYPE_WARNING},e.default.createElement("p",null,"There was an error retrieving some images, the list below may be incomplete")):null,ue?e.default.createElement(e.default.Fragment,null,!ne&&e.default.createElement(b.default,{availableCount:t.length,bypassSelection:E,isMobileClb:C,onSelectAll:()=>{let e=[];F.keys.length!==t.length&&(e=t),O(e,!0)},totalCount:G,unavailableCount:R.length,selectedCount:F.keys.length}),e.default.createElement(u.default,{message:w}),L&&!C?e.default.createElement(o.default,{uri:L}):e.default.createElement(f.default,{className:re,markBannerMessage:w,showBatchAddCTA:U,onResize:X},S?e.default.createElement(i.default,{containerWidth:Y,disabledIds:R,gridSpacing:C?12:void 0,showFilenames:P,images:k,maxItemsPerRow:C?3:void 0,selectDisabled:q===h.SM_BATCH_ADD_FILTER_MODE.UNAVAILABLE||E,onExpandClick:ee,onChange:$,initiallySelectedImageKeys:null==F?void 0:F.keys,key:x}):e.default.createElement(p.default,{containerHeight:J,containerWidth:Y,focusUri:A.uri,focusUriNext:_.uri,focusUriPrev:N.uri,location:v,onNavBackwardRequest:B||null,onNavForwardRequest:T||null})),!S&&!E&&e.default.createElement("div",{className:de},e.default.createElement(d.default,{disabled:te,size:d.default.SIZE_LARGE,onClick:ae},e.default.createElement("span",{className:"sm-button-label"},le),M&&e.default.createElement(n.default,{name:"CheckmarkEncircled"})))):e.default.createElement("div",{className:"sm-batch-add-loading sm-flex sm-flex-column sm-flex-items-center sm-flex-justify-center"},e.default.createElement(r.default,null),e.default.createElement("div",{className:"sm-mt-4"},V?"Please wait while we load this gallery...":"Hold tight while we add these items to your cart...")),C&&e.default.createElement(m.default,{disabled:!U}))};E.displayName="BatchAdd";const R={uri:t.default.string,key:t.default.string};E.propTypes={availableImageKeys:t.default.arrayOf(t.default.string),bypassSelection:t.default.bool,disabledImageKeys:t.default.arrayOf(t.default.string),displayedImages:t.default.arrayOf(t.default.object),markBannerMessage:t.default.string,isAddingItemsToCart:t.default.bool.isRequired,isFocusedItemSelected:t.default.bool.isRequired,isGridMode:t.default.bool,isMobileClb:t.default.bool,showFilenames:t.default.bool,filterMode:t.default.oneOf([h.SM_BATCH_ADD_FILTER_MODE.ALL,h.SM_BATCH_ADD_FILTER_MODE.SELECTED,h.SM_BATCH_ADD_FILTER_MODE.UNAVAILABLE]),focused:t.default.shape(R),location:t.default.object.isRequired,loadImages:t.default.func.isRequired,next:t.default.shape(R),onExpandClick:t.default.func.isRequired,onNavBackwardRequest:t.default.func,onNavForwardRequest:t.default.func,pickerKey:t.default.number.isRequired,prev:t.default.shape(R),productImageGalleryUri:t.default.string,selection:t.default.shape({uris:t.default.arrayOf(t.default.string),keys:t.default.arrayOf(t.default.string)}),setSelection:t.default.func.isRequired,showBatchAddCTA:t.default.bool,showBatchAddInSidebar:t.default.bool.isRequired,totalCount:t.default.number.isRequired};var k=E;exports.default=k}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-banner","sm-component-busy","sm-component-button","sm-icon","sm-com-lb-print-watermark-banner","sm-album-image-picker-container","sm-product-image-gallery-container","sm-smuglog","sm-batch-add-cta","sm-batch-add-observed-container","sm-batch-add-header-component","sm-batch-add-single-wrapper","sm-batch-add-constants"]});
YUI.add("sm-batch-add-constants",(function(_){SM.currentModule="sm-batch-add-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRODUCT_SELECT=exports.ITEM_SELECT=exports.BYPASS_SELECTION_PRODUCTS=exports.BATCH_ADD_DEFAULT_MAX_GALLERY_SIZE=exports.BATCH_ADD_DEFAULT_MIN_GALLERY_SIZE=exports.BATCH_ADD_ITEM_LIMIT=exports.SM_BATCH_ADD_FILTER_MODE=exports.SM_BATCH_ADD_VIEW_MODE=void 0;exports.SM_BATCH_ADD_VIEW_MODE={GRID:"Grid View",SINGLE_IMAGE:"Single Image View"};exports.SM_BATCH_ADD_FILTER_MODE={ALL:"Show all",SELECTED:"Show selected",UNAVAILABLE:"Show unavailable"};exports.BATCH_ADD_ITEM_LIMIT=50;exports.BATCH_ADD_DEFAULT_MIN_GALLERY_SIZE=3;exports.BATCH_ADD_DEFAULT_MAX_GALLERY_SIZE=500;const _=new Set(["Gallery Download","Printmarked Gallery Download"]);exports.BYPASS_SELECTION_PRODUCTS=_;exports.ITEM_SELECT="itemSelect";exports.PRODUCT_SELECT="productSelect"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-batch-add-container",(function(e){SM.currentModule="sm-batch-add-container";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),t=a("sm-api-redux-selectors"),s=a("sm-album-image-picker-actions"),o=a("sm-com-lb-selectors-common"),d=a("sm-com-lb-crop-selectors"),c=a("sm-com-lb-selectors-url-mapper"),l=a("sm-com-lb-selectors"),r=babelHelpers.interopRequireDefault(a("sm-batch-add-component")),n=a("sm-batch-add-actions"),m=a("sm-batch-add-selectors"),i=a("sm-batch-add-constants"),u=a("sm-com-lb-constants");const{SINGLE_IMAGE:b}=i.SM_BATCH_ADD_VIEW_MODE,{ALL:g,SELECTED:A,UNAVAILABLE:I}=i.SM_BATCH_ADD_FILTER_MODE;var h=(0,e.connect)((function(e,{albumImageUri:a,location:s,showAlbumSkus:r,showBatchAddInSidebar:n}){var i;let b,{Filenames:h=!1,Uri:p="",ImageCount:B=null}=(0,t.getExpansion)(e,a,"Album")||{},v=s.pathname,y=(0,m.getBatchAddAlbumImagesUriByAlbumImage)(e,a),_=(0,m.getBatchAddAlbumImages)(e,y),M=(0,m.getBatchAddSelectionState)(e,y),S=(0,m.getBatchAddSkusByUrlPath)(e,v,y,{includeAlbumSkus:r})||[],{availableKeys:k,unavailableKeys:F}=(0,m.getBatchAddImageAvailabilityForSkus)(e,_,S),U=(0,m.getBatchAddFilterMode)(e);switch(U){case g:b=_;break;case A:b=_.filter(e=>M.keys.includes(e.ImageKey));break;case I:b=_.filter(e=>!k.includes(e.ImageKey))}let{focused:f={},next:E={},prev:x={}}=(0,m.getBatchAddFocus)(e,y,b),{uri:w=""}=f,C=(0,m.getBatchAddProductImageGalleryUri)(e,v,S),N=Boolean(C),R=(0,m.isBatchAddFocusedItemSelected)(e,y,b),G=(0,m.isBatchAddGridMode)(e),L="";if(w&&!G){v=v.replace("/".concat(u.CONFIRMATION_URL_STRING),"");let a=(0,o.getSkusForAlbumImageUri)(e,w,{includeAlbumSkus:!0})||[],{skuUri:t}=(0,c.getEntityUriForUrlPath)(e,v,a)||{};L=(0,d.getMarkBannerMessage)(e,w,t)}return{_albumImagesUri:y,_bypassProductImageGalleryUri:C,_expansions:(0,t.getPreviousExpansionsForParentExpansion)(e,p,"AlbumImages"),_imageCount:B,availableImageKeys:k,bypassSelection:N,disabledImageKeys:F,displayedImages:b,filterMode:U,focused:f,isAddingItemsToCart:Boolean((0,l.isAddingItem)(e)),isFocusedItemSelected:R,isGridMode:G,markBannerMessage:L,next:E,pickerKey:(0,m.getBatchAddPickerKey)(e),prev:x,selection:M,showBatchAddCTA:n&&(N||Boolean(null==M||null===(i=M.keys)||void 0===i?void 0:i.length)),showFilenames:h,totalCount:_.length}}),(function(e){return{_loadImages:async(a,t,o)=>{e((0,n.setBatchAddAlbumLoading)(!0));let d=await e((0,s.loadAlbumImages)(a,t,o));return e((0,n.setBatchAddAlbumLoading)(!1)),d},_onNavBackwardRequest:a=>{e((0,n.setBatchAddFocusedItem)(a))},_onNavForwardRequest:a=>{e((0,n.setBatchAddFocusedItem)(a))},setSelection:(a,t)=>{e((0,n.selectBatchAddItems)(a,t))},onExpandClick:a=>(e((0,n.setBatchAddViewMode)(b)),e((0,n.setBatchAddFocusedItem)(a)))}}),(function(e,a,t){let{_loadImages:s,_onNavBackwardRequest:o,_onNavForwardRequest:d,...c}=a,{_albumImagesUri:l,_bypassProductImageGalleryUri:r,_imageCount:n,_expansions:m,...i}=e,{productImageGalleryUri:u,...b}=t;return{...i,...b,...c,productImageGalleryUri:r||u,onNavBackwardRequest:()=>{var a;o(null===(a=e.prev)||void 0===a?void 0:a.key)},onNavForwardRequest:()=>{var a;d(null===(a=e.next)||void 0===a?void 0:a.key)},loadImages:async()=>s(l,m,n)}}))(r.default);exports.default=h}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-selectors","sm-album-image-picker-actions","sm-com-lb-selectors-common","sm-com-lb-crop-selectors","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors","sm-batch-add-component","sm-batch-add-actions","sm-batch-add-selectors","sm-batch-add-constants","sm-com-lb-constants"]});
YUI.add("sm-batch-add-cta",(function(e){SM.currentModule="sm-batch-add-cta";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function({disabled:t=!1}){let r=(0,a.useDispatch)(),u=(0,e.useCallback)(()=>{r((0,s.setBatchAddActivePane)(d.PRODUCT_SELECT))},[r]);return e.default.createElement("div",{className:"sm-com-lb-cart-summary sm-flex sm-flex-column"},e.default.createElement(c.default,{className:"sm-com-lb-view-cart-button sm-position-relative",disabled:t,skin:c.default.SKIN_PRIMARY,size:c.default.SIZE_LARGE,onClick:u,"data-testid":"com_lb_sidebar_choose_product_button"},"Next: Select a product"))};var e=babelHelpers.interopRequireWildcard(t("react")),a=t("react-redux"),c=babelHelpers.interopRequireDefault(t("sm-component-button")),s=t("sm-batch-add-actions"),d=t("sm-batch-add-constants")}(),SM.currentModule=null}),"",{requires:["react","react-redux","sm-component-button","sm-batch-add-actions","sm-batch-add-constants"]});
YUI.add("sm-batch-add-header-component",(function(e){SM.currentModule="sm-batch-add-header-component";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=t("react-redux"),l=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("classnames")),d=babelHelpers.interopRequireDefault(t("sm-component-button")),u=babelHelpers.interopRequireDefault(t("sm-icon")),n=t("sm-component-select"),c=t("sm-page-selectors"),r=t("sm-batch-add-constants"),m=t("sm-batch-add-selectors"),o=t("sm-batch-add-actions");const{GRID:i,SINGLE_IMAGE:f}=r.SM_BATCH_ADD_VIEW_MODE,{ALL:p,SELECTED:b,UNAVAILABLE:E}=r.SM_BATCH_ADD_FILTER_MODE,v=({availableCount:t,bypassSelection:l=!1,isMobileClb:v,onSelectAll:h,selectedCount:S,totalCount:C,unavailableCount:M})=>{let[N,A]=(0,e.useState)(!1),x=(0,a.useDispatch)(),D=(0,a.useSelector)(m.getBatchAddFilterMode),g=(0,a.useSelector)(c.viewportIsLessThanExtraLarge),R=(0,a.useSelector)(m.getBatchAddViewMode);(0,e.useLayoutEffect)(()=>{!N&&A(!0)},[N]);let _=(0,e.useCallback)(e=>{var t;x((0,o.setBatchAddFilterMode)(null==e||null===(t=e.currentTarget)||void 0===t?void 0:t.value))},[x]),y=(0,e.useCallback)(()=>{x((0,o.setBatchAddActivePane)(r.PRODUCT_SELECT))},[x]),q=(0,e.useCallback)(e=>{var t,a;x((0,o.setBatchAddViewMode)(null==e||null===(t=e.currentTarget)||void 0===t||null===(a=t.dataset)||void 0===a?void 0:a.value))},[x]),I=(0,s.default)("sm-batch-add-header",{"sm-flex":!g,"sm-flex-row":!g,"sm-flex-items-center":!g,"sm-py-4":!v,"sm-pl-4":!v}),L=(0,s.default)("sm-batch-add-header-details",{"sm-px-4":v,"sm-text-center":v}),T=(0,s.default)("sm-batch-add-header-controls","sm-flex","sm-flex-row","sm-flex-items-center",{"sm-flex-justify-center":v,"sm-mt-2":g,"sm-mb-2":v}),B=(0,s.default)("sm-batch-add-header-view-mode-btns","sm-flex sm-flex-row",{"sm-ml-2":!g}),k=C===S&&C===M,O=t&&t===S;return e.default.createElement("div",{className:I},e.default.createElement("div",{className:L},l?e.default.createElement(e.default.Fragment,null,e.default.createElement("h2",{className:"sm-pb-2"},"No Selection Required"),e.default.createElement("p",{className:"sm-pb-4"},"Your selected product does not require selecting individual items.",e.default.createElement("a",{className:"sm-px-1",onClick:y},"Finish customizing your product."))):e.default.createElement(e.default.Fragment,null,e.default.createElement("h2",null,"Select photos or videos to buy"),e.default.createElement("div",{className:"sm-mt-1"},e.default.createElement("span",{className:"sm-pr-1"},C," in gallery"),e.default.createElement("span",{className:"sm-px-1"},S," Selected"),M?e.default.createElement("span",{className:"sm-px-1"},M," Unavailable"):null,R===i&&D!==E&&e.default.createElement("span",{className:"sm-px-1"},e.default.createElement("a",{onClick:h},k||O?"Unselect all":"Select all"))))),!l&&e.default.createElement("div",{className:T},e.default.createElement("div",{className:B},e.default.createElement(d.default,{skin:d.default.SKIN_SECONDARY,value:i,onClick:q,disabled:R===i},e.default.createElement(u.default,{size:"small",name:"StyleThumbs"})),e.default.createElement(d.default,{skin:d.default.SKIN_SECONDARY,value:f,onClick:q,disabled:R===f},e.default.createElement(u.default,{size:"small",name:"Image"}))),e.default.createElement("div",{className:"sm-position-relative sm-ml-2"},e.default.createElement(n.Select,{className:"sm-position-relative sm-ml-2",onChange:_,size:"large",value:D},e.default.createElement(n.SelectOption,{value:p},p),e.default.createElement(n.SelectOption,{disabled:!S,value:b},b),e.default.createElement(n.SelectOption,{disabled:!M,value:E},E)))))};v.displayName="BatchAdd.BatchAddHeader",v.propTypes={availableCount:l.default.number.isRequired,bypassSelection:l.default.bool,isMobileClb:l.default.bool,onSelectAll:l.default.func.isRequired,selectedCount:l.default.number.isRequired,totalCount:l.default.number,unavailableCount:l.default.number.isRequired};var h=v;exports.default=h}(),SM.currentModule=null}),"",{requires:["react","react-redux","prop-types","classnames","sm-component-button","sm-icon","sm-component-select","sm-page-selectors","sm-batch-add-constants","sm-batch-add-selectors","sm-batch-add-actions"]});
YUI.add("sm-batch-add-helpers",(function(e){SM.currentModule="sm-batch-add-helpers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imageKeyToUri=function(e,r){return e[r]||null},exports.imageKeyToUriMap=exports.toImageKeys=void 0;var e=babelHelpers.interopRequireDefault(r("memoize-one")),a=r("lodash");exports.toImageKeys=(e=[])=>e.map(e=>{e.ImageKey});const o=(0,e.default)(e=>e.reduce((e,r)=>(e[r.ImageKey]=r.Uri,e),{}),a.isEqual);exports.imageKeyToUriMap=o}(),SM.currentModule=null}),"",{requires:["memoize-one","lodash"]});
YUI.add("sm-batch-add-observed-container",(function(e){SM.currentModule="sm-batch-add-observed-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("sm-resize-observer-hoc")),s=babelHelpers.interopRequireDefault(r("sm-dom"));const d=({children:r,className:t="",markBannerMessage:a="",resizeRef:d,showBatchAddCTA:o=!1})=>((0,e.useLayoutEffect)(()=>{s.default.win.dispatchEvent(new Event("resize"))},[a,o]),e.default.createElement("div",{className:t,ref:d},r));d.propTypes={markBannerMessage:t.default.string,resizeRef:t.default.object.isRequired,showBatchAddCTA:t.default.bool};var o=(0,a.default)(d);exports.default=o}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-resize-observer-hoc","sm-dom"]});
YUI.add("sm-batch-add-reducers",(function(e){SM.currentModule="sm-batch-add-reducers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchAdd=_,exports.default=function(e,t){return[_].reduce((e,d)=>d(e,t),e)};var e=t("lodash"),d=babelHelpers.interopRequireWildcard(t("sm-batch-add-action-types")),a=t("sm-batch-add-constants"),c=t("sm-com-lb-selectors-common");let{GRID:r,SINGLE_IMAGE:i}=a.SM_BATCH_ADD_VIEW_MODE,{ALL:l,SELECTED:u}=a.SM_BATCH_ADD_FILTER_MODE;function _(t,a){switch(a.type){case d.COM_LB_BATCH_ADD_SELECT_ITEMS:{let d,_=(0,c.getBatchAddState)(t),n=(0,c.getBatchAddSelectedItemKeys)(t),{filterMode:s,pickerKey:A=0,viewMode:o}=_,M=a.itemKeys||[],h=n||[],D=(0,e.difference)(M,h),S=(0,e.difference)(h,M),B=M.length||s!==u?s:l,E=B!==s&&o===i?r:o;if(1===D.length&&0===S.length)d=D[0];else if(0===D.length&&1===S.length){let e=S[0];if(d=e,s===u&&M.length){let t=h.indexOf(e);d=h[t>0?t-1:t+1]}}else d=n.includes(M[M.length-1])&&n[0]!==M[0]?M[0]:M[M.length-1];return{...t,ui:{...t.ui||{},batchAdd:{..._,focusKey:d,pickerKey:a.externalSelect?A+1:A,selected:M,filterMode:B,viewMode:E}}}}case d.COM_LB_BATCH_ADD_SET_ACTIVE_PANE:{let e=(0,c.getBatchAddState)(t);return{...t,ui:{...t.ui||{},batchAdd:{...e,activePane:a.activePane}}}}case d.COM_LB_BATCH_ADD_SET_FOCUSED_ITEM:{let e=(0,c.getBatchAddState)(t);return{...t,ui:{...t.ui||{},batchAdd:{...e,focusKey:a.itemKey}}}}case d.COM_LB_BATCH_ADD_SET_LOADING_ALBUM:{let e=(0,c.getBatchAddState)(t);return{...t,ui:{...t.ui||{},batchAdd:{...e,loading:a.loading}}}}case d.COM_LB_BATCH_ADD_FILTER_MODE:{let e=(0,c.getBatchAddState)(t);return{...t,ui:{...t.ui||{},batchAdd:{...e,filterMode:a.filterMode,viewMode:r}}}}case d.COM_LB_BATCH_ADD_VIEW_MODE:{let e=(0,c.getBatchAddState)(t);return{...t,ui:{...t.ui||{},batchAdd:{...e,viewMode:a.viewMode}}}}case d.COM_LB_BATCH_ADD_STORE_CONFIRMATION_DETAILS:{let e=(0,c.getBatchAddState)(t);return{...t,ui:{...t.ui||{},batchAdd:{...e,addToCartDetails:{...a.details}}}}}default:return t}}}(),SM.currentModule=null}),"",{requires:["lodash","sm-batch-add-action-types","sm-batch-add-constants","sm-com-lb-selectors-common"]});
YUI.add("sm-batch-add-selectors",(function(e){SM.currentModule="sm-batch-add-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBatchAddImageAvailabilityForSkus=function(e,t,r){let i=[],s=[];if(!(null==r?void 0:r.length))return{availableKeys:i,unavailableKeys:(0,n.toImageKeys)(t)};let c=h(e,t);return Object.entries(c).forEach(([e,t])=>{(0,a.intersectionBy)(t,r,"Uri").length>0?i.push(e):s.push(e)}),{availableKeys:i,unavailableKeys:s}},exports.getBatchAddSkusByAlbumImageUri=function(e,t,{includeAlbumSkus:a=!1}={}){let r=k(e,t);return p(e,r,{includeAlbumSkus:a})},exports.getBatchAddSkusByUrlPath=function(e,t,a,{includeAlbumSkus:r=!1}={}){let s,l=p(e,a,{includeAlbumSkus:r}),{categoryUris:d,subcategoryUris:o,productUris:n,skuUris:g}=(0,c.getAllEntityUrisForUrlPath)(e,t,l)||{};s=d?d.flatMap(t=>(0,u.getCatalogSkusForCategory)(e,l,(0,i.getEntity)(e,t))):o?o.flatMap(t=>(0,u.getCatalogSkusForSubcategory)(e,l,(0,i.getEntity)(e,t))):n?n.flatMap(t=>(0,u.getCatalogSkusForProduct)(e,l,(0,i.getEntity)(e,t))):g?g.flatMap(t=>(0,i.getEntity)(e,t)):l;return s},exports.isBatchAddFocusedItemSelected=function(e,t,a=[]){let{focused:{key:r=""}={}}=E(e,t,a),{keys:i=[]}=b(e,t);return i.includes(r)},exports.getBatchAddFocusUri=M,exports.getBatchAddFocus=E,exports.getBatchAddViewMode=P,exports.getBatchAddFilterMode=function(e){let{filterMode:t=o.SM_BATCH_ADD_FILTER_MODE.ALL}=(0,l.getBatchAddState)(e);return t},exports.getConfirmationBatchAddSkuUri=function(e={}){let{confirmationBatchAddSkuUri:t=""}=(0,l.getBatchAddState)(e);return t},exports.getBatchAddPickerKey=function(e={}){let{pickerKey:t=0}=(0,l.getBatchAddState)(e);return t},exports.getBatchAddBannerMessage=_,exports.getBatchAddProductForUrlPath=K,exports.getBatchAddProductImageGalleryUri=function(e,t,a=[]){let{Uri:r,Name:i}=K(e,t,a)||{};if(o.BYPASS_SELECTION_PRODUCTS.has(i))return r},exports.hasBatchAddBannerMessage=function(e={},t){let a=_(e,t,{includeAlbumSkus:!0});return Boolean(a)},exports.shouldBypassBatchAddForProduct=function(e,t,a){let{Name:r}=K(e,t,a)||{};return o.BYPASS_SELECTION_PRODUCTS.has(r)},exports.getBatchAddToCartDetails=exports.isDataLoadingForImages=exports.isBatchAddSingleImageMode=exports.isBatchAddGridMode=exports.isBatchAddInitializing=exports.isBatchAddAlbumLoading=exports.getBatchAddAlbumImageKeys=exports.getBatchAddSkusForItemSelection=exports.getBatchAddAlbumImagesUriByAlbumImage=exports.getBatchAddActivePane=exports.getBatchAddImageKeysToUriMap=exports.getBatchAddSelectionState=exports.getBatchAddSelectedItemUris=exports.getBatchAddSkusForAlbumImages=exports.getBatchAddAlbumImages=void 0;var e=t("reselect"),a=t("lodash"),r=t("sm-api-redux-paginator-selectors"),i=t("sm-api-redux-selectors"),s=t("sm-pricelist-selectors"),c=t("sm-com-lb-selectors-url-mapper"),l=t("sm-com-lb-selectors-common"),d=t("sm-com-lb-selectors"),u=t("sm-catalog-selectors"),o=t("sm-batch-add-constants"),n=t("sm-batch-add-helpers"),g=t("sm-gallery-views-constants"),m=t("sm-circular-array");const A=(0,e.createSelectorCreator)(e.defaultMemoize,a.isEqual),S=(0,e.createSelector)([i.getApiState,(e,t)=>t],(e,t)=>t?(0,r.getPaginatedEntity)(e,t):[]);exports.getBatchAddAlbumImages=S;const h=A([i.getApiState,(e,t)=>t],(e,t)=>t.reduce((t,a)=>({...t,[a.ImageKey]:(0,s.getPricelistSkusForImageUri)(e,a.Uri)}),{})),B=A([i.getApiState,(e,t,{includeAlbumSkus:a=!1}={})=>({albumImagesExpansionUri:t,includeAlbumSkus:a})],(e,{albumImagesExpansionUri:t,includeAlbumSkus:r})=>{let i=S(e,t).flatMap(t=>(0,l.getSkusForAlbumImageUri)(e,t.Uri,{includeAlbumSkus:r}));return(0,a.uniqBy)(i,"Uri")});exports.getBatchAddSkusForAlbumImages=B;const y=(0,e.createSelector)([l.getBatchAddSelectedItemKeys,S],(e,t)=>{let a=(0,n.imageKeyToUriMap)(t);return e.map(e=>(0,n.imageKeyToUri)(a,e)).filter(e=>e)});exports.getBatchAddSelectedItemUris=y;const b=(0,e.createSelector)([y,l.getBatchAddSelectedItemKeys],(e,t)=>({uris:e,keys:t}));exports.getBatchAddSelectionState=b;const I=(0,e.createSelector)(S,e=>(0,n.imageKeyToUriMap)(e));exports.getBatchAddImageKeysToUriMap=I;const U=A([i.getApiState,y,(e,t,{includeAlbumSkus:a=!1}={})=>a],(e,t,a)=>t.map(t=>(0,l.getSkusForAlbumImageUri)(e,t,{includeAlbumSkus:a})));exports.getBatchAddActivePane=(e={})=>{var t;return(null===(t=(0,l.getBatchAddState)(e))||void 0===t?void 0:t.activePane)||""};const k=(e,t)=>(0,i.getExpansionUri)(e,t,"Album.AlbumImages");exports.getBatchAddAlbumImagesUriByAlbumImage=k;const p=(0,e.createSelector)((function(e,t,{includeAlbumSkus:r=!1}={}){let i;y(e,t).length?(i=U(e,t,{includeAlbumSkus:r}),i=(0,a.intersectionBy)(...i,"Uri")):i=B(e,t,{includeAlbumSkus:r});return i}),e=>e);function f(e,t){var a;let{focusKey:r=(null===(a=v(e,t))||void 0===a?void 0:a[0])}=(0,l.getBatchAddState)(e);return r}function M(e,t){let a=S(e,t);return(0,n.imageKeyToUri)((0,n.imageKeyToUriMap)(a),f(e,t))}function E(e={},t="",a=[],r=!0){if(!t||0===a.length)return{};let i,s,c=f(e,t),l=(0,n.imageKeyToUriMap)(a),d=Object.keys(l);if(c&&d.includes(c)||(c=a[0].ImageKey),r&&d.length>2){let e=(0,m.getRange)(d,c,1,1);i=e.shift(),s=e.pop(),i===c&&(i=void 0),s===c&&(s=void 0)}else{let e=d.indexOf(c);s=d[e+1],i=d[e-1]}return{focused:{key:c||"",uri:(0,n.imageKeyToUri)(l,c)||""},next:{key:s||"",uri:s?(0,n.imageKeyToUri)(l,s):""},prev:{key:i||"",uri:i?(0,n.imageKeyToUri)(l,i):""}}}exports.getBatchAddSkusForItemSelection=p;const v=(0,e.createSelector)(S,e=>(0,n.toImageKeys)(e));function P(e){let{viewMode:t=o.SM_BATCH_ADD_VIEW_MODE.GRID}=(0,l.getBatchAddState)(e);return t}function _(e,t,{includeAlbumSkus:a=!1}={}){var r;let i,{errors:s=[]}=(0,l.getUIState)(e),c=k(e,t),d=M(e,c),u=S(e,c);if(D(e,u))return"";!d||T(e)||(0,l.isImagePurchaseable)(e,d,{includeAlbumSkus:a})||(i="No Products available for this image");let o=(0,l.getDiscountMessageForAlbumImage)(e,null===(r=u[0])||void 0===r?void 0:r.Uri);return s=[...o?[o]:[],...i?[i]:[],...s],s.join("\n")}function K(e,t,a=[]){let r,{productUri:s,skuUri:l}=(0,c.getEntityUriForUrlPath)(e,t,a)||{};return s?r=(0,u.getProductByUri)(e,s):l&&(r=(0,i.getExpansion)(e,l,"CatalogProduct")),r||{}}exports.getBatchAddAlbumImageKeys=v;exports.isBatchAddAlbumLoading=e=>{let{loading:t=!1}=(0,l.getBatchAddState)(e);return t};exports.isBatchAddInitializing=e=>(0,i.isRequestInflight)(e,g.GALLERY_IMAGE_ENTITY_REQUEST);const T=e=>P(e)===o.SM_BATCH_ADD_VIEW_MODE.GRID;exports.isBatchAddGridMode=T;exports.isBatchAddSingleImageMode=e=>P(e)===o.SM_BATCH_ADD_VIEW_MODE.SINGLE_IMAGE;const D=A([i.getApiState,(e,t)=>t],(e,t)=>t.findIndex(({Uri:t})=>(0,d.isDataLoading)(e,t))>-1);exports.isDataLoadingForImages=D;exports.getBatchAddToCartDetails=(e={})=>{let{addToCartDetails:{currency:t="USD",confirmationSkuUri:a="",multipleSkuPrices:r=!1,quantity:i=1,skuName:s="",skuPrice:c=0,total:d=0}={}}=(0,l.getBatchAddState)(e);return{currency:t,confirmationSkuUri:a,multipleSkuPrices:r,quantity:i,skuName:s,skuPrice:c,total:d}}}(),SM.currentModule=null}),"",{requires:["reselect","lodash","sm-api-redux-paginator-selectors","sm-api-redux-selectors","sm-pricelist-selectors","sm-com-lb-selectors-url-mapper","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-catalog-selectors","sm-batch-add-constants","sm-batch-add-helpers","sm-gallery-views-constants","sm-circular-array"]});
YUI.add("sm-batch-add-signposts",(function(e){SM.currentModule="sm-batch-add-signposts";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){const[t,l]=function(){let t=(0,s.useSelector)(d.getBatchAddActivePane)||c.ITEM_SELECT,a=(0,s.useDispatch)();return[t,(0,e.useCallback)(e=>{a((0,n.setBatchAddActivePane)(e))},[a])]}();return e.default.createElement(a.default,{allowForwardProgress:!0,className:"sm-batch-add-signposts sm-mt-4 sm-flex sm-flex-justify-center",childrenClassName:"sm-text-center",onChange:l,render:t=>[e.default.createElement(r.default,babelHelpers.extends({key:c.ITEM_SELECT,name:c.ITEM_SELECT},t),"Photos"),e.default.createElement(r.default,babelHelpers.extends({key:c.PRODUCT_SELECT,name:c.PRODUCT_SELECT},t),"Products")],value:t})};var e=babelHelpers.interopRequireWildcard(t("react")),s=t("react-redux"),a=babelHelpers.interopRequireDefault(t("sm-signpost")),r=babelHelpers.interopRequireDefault(t("sm-signpost-entry")),n=t("sm-batch-add-actions"),d=t("sm-batch-add-selectors"),c=t("sm-batch-add-constants")}(),SM.currentModule=null}),"",{requires:["react","react-redux","sm-signpost","sm-signpost-entry","sm-batch-add-actions","sm-batch-add-selectors","sm-batch-add-constants"]});
YUI.add("sm-batch-add-single-image-display-container",(function(e){SM.currentModule="sm-batch-add-single-image-display-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),s=babelHelpers.interopRequireDefault(t("sm-batch-add-single-image-display")),a=t("sm-page-constants"),r=t("sm-page-selectors"),i=t("sm-lightbox-selectors");var l=(0,e.connect)((e,{imageUri:t})=>{let s=null;if((0,i.isProtected)(e,t)){let t=(0,r.getOwnerSiteSettings)(e);s=(null==t?void 0:t.rightClickMessage)||a.RIGHT_CLICK_MESSAGE_DEFAULT}return{rightClickMessage:s}},()=>({}))(s.default);exports.default=l}(),SM.currentModule=null}),"",{requires:["react-redux","sm-batch-add-single-image-display","sm-page-constants","sm-page-selectors","sm-lightbox-selectors"]});
YUI.add("sm-batch-add-single-image-display-content-container",(function(e){SM.currentModule="sm-batch-add-single-image-display-content-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-cropped-image-thumbnail")),i=t("sm-com-lb-crop-selectors"),a=t("sm-com-lb-selectors"),o=t("sm-image-cropper-helpers"),n=t("sm-com-lb-constants");var s=(0,e.connect)((function(e,{location:t,containerWidth:r,containerHeight:s,imageUri:d}){let l=t.pathname.replace("/".concat(n.CONFIRMATION_URL_STRING),""),m=!t.pathname.includes(n.CONFIRMATION_URL_STRING),c=(0,a.getProductUriToPreview)(e),h=(0,i.getPrintmarkForItem)(e,d),p=t.pathname.includes("printmarked"),u=!m&&h||p?h:null,g=(0,a.getImageSize)(e,d,r,s),M=(0,i.getOriginalSizeForImage)(e,d),f={width:g.DisplayWidth,height:g.DisplayHeight},b=f.width/M.width;if(m&&!c)return{height:f.height,width:f.width,imageUrl:g.Url,printmarkUri:u,displayHeight:f.height,displayWidth:f.width,productPreviewMode:m};m&&(l=(0,a.getProductUrlPath)(e,d,c));let{skuEntity:I,product:U,vendorID:w}=(0,a.getProductDataForImageUri)(e,d,l)||{},k=U.Name&&U.Name.indexOf("Round ")>-1,R=(0,i.getCropData)(e,d,l,m);I.canCrop||(R={height:M.height,width:M.width,top:0,left:0});let S=(0,i.getCropMaskAttributes)(e,d,I,U,l,m);return S=(0,o.scaleMaskAttributes)(S,b),R=(0,o.scaleCropAttributes)(R,b),h=(0,i.getPrintmarkForItem)(e,d,I.Uri),{imageUrl:g.Url,height:R.height,width:R.width,offsetLeft:R.left,offsetTop:R.top,maskRotation:R.rotation,maskRotationMatters:I.RotationMatters,printmarkUri:u,displayHeight:f.height,displayWidth:f.width,perimeterHeight:S.perimeterHeight,perimeterWidth:S.perimeterWidth,perimeterIsRound:k,vendorID:w,sku:I.Sku}}))(r.default);exports.default=s}(),SM.currentModule=null}),"",{requires:["react-redux","sm-cropped-image-thumbnail","sm-com-lb-crop-selectors","sm-com-lb-selectors","sm-image-cropper-helpers","sm-com-lb-constants"]});
YUI.add("sm-batch-add-single-image-display",(function(e){SM.currentModule="sm-batch-add-single-image-display";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("classnames")),r=babelHelpers.interopRequireDefault(t("sm-dom")),i=babelHelpers.interopRequireDefault(t("sm-tooltip")),n=babelHelpers.interopRequireDefault(t("sm-teleport")),d=t("sm-modal-constants"),o=babelHelpers.interopRequireDefault(t("sm-batch-add-single-image-display-content-container"));const s=(0,n.default)(i.default,()=>r.default.doc.querySelector(d.SKINNED_MODAL_SELECTOR)),u=t=>{let{containerHeight:a,containerWidth:i,"data-position":n,location:d,productPreviewMode:u,rightClickMessage:c}=t,[p,m]=(0,e.useState)(null),f=(0,l.default)(["sm-flex","sm-flex-item-center","sm-flex-justify-center",{"sm-com-lb-image-cropper-product-view":u}]),b=()=>{m(null),g()},g=()=>{r.default.doc.removeEventListener("click",b)};return e.default.createElement("div",{className:f,"data-position":n},e.default.createElement("div",{className:"sm-position-relative sm-flex sm-flex-column",onContextMenu:e=>{c&&(e.preventDefault(),m([e.pageX,e.pageY]),r.default.doc.addEventListener("click",b))}},e.default.createElement(o.default,babelHelpers.extends({location:d,containerWidth:i,containerHeight:a},t))),c&&(()=>{if(!p)return;let[t,a]=p;return e.default.createElement(s,{style:{left:t,top:a}},c)})())};u.displayName="BatchAdd.SingleImageDisplay",u.propTypes={containerHeight:a.default.number,containerWidth:a.default.number.isRequired,disabled:a.default.bool,imageBannerRendered:a.default.bool,productPreviewMode:a.default.bool,rightClickMessage:a.default.string},u.defaultProps={disabled:!1,imageBannerRendered:!1,productPreviewMode:!1};var c=u;exports.default=c}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-dom","sm-tooltip","sm-teleport","sm-modal-constants","sm-batch-add-single-image-display-content-container"]});
YUI.add("sm-batch-add-single-wrapper",(function(e){SM.currentModule="sm-batch-add-single-wrapper";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=t("react-redux"),l=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-icon")),r=babelHelpers.interopRequireDefault(t("sm-swipeable")),d=t("sm-swipeable-constants"),s=babelHelpers.interopRequireDefault(t("sm-batch-add-single-image-display-container")),c=t("sm-batch-add-actions"),o=t("sm-batch-add-constants");const{GRID:u}=o.SM_BATCH_ADD_VIEW_MODE,m=({containerHeight:t,containerWidth:l,focusUri:o,focusUriNext:m,focusUriPrev:f,location:b,onNavBackwardRequest:p,onNavForwardRequest:h})=>{let[g,v]=(0,e.useState)(0),E=(0,a.useDispatch)(),N=(0,e.useRef)();(0,e.useEffect)(()=>{v(N.current.getBoundingClientRect())},[N,t,l]);let w=(0,e.useCallback)(()=>{E((0,c.setBatchAddViewMode)(u))},[E]);return e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"sm-batch-add-nav-prev sm-flex sm-flex-items-center sm-position-relative"},f&&e.default.createElement(i.default,{"aria-label":"Previous",className:"sm-batch-add-btns","data-direction":"prev","data-disable-auto-hide":!0,"data-testid":"batchadd_previous_button",disabled:!p||null,noChrome:!0,onClick:p||null},e.default.createElement(n.default,{name:"NavigateBack"}))),e.default.createElement("div",{ref:N,className:"sm-flex sm-flex-grow sm-flex-row sm-position-relative",style:{height:"100%",width:"100%"}},o&&e.default.createElement(r.default,{canNavBackward:!!p,canNavForward:!!h,onNavBackward:p,onNavForward:h},!!f&&e.default.createElement(s.default,{location:b,containerWidth:l,containerHeight:g.height,imageUri:f,"data-position":d.SLIDE_PREV}),e.default.createElement(s.default,{location:b,containerWidth:l,containerHeight:g.height,imageUri:o,"data-position":d.SLIDE_CURRENT}),!!m&&e.default.createElement(s.default,{location:b,containerWidth:l,containerHeight:g.height,imageUri:m,"data-position":d.SLIDE_NEXT}))),e.default.createElement("div",{className:"sm-batch-add-nav-next sm-flex sm-flex-items-center sm-position-relative"},e.default.createElement(i.default,{"aria-label":"Return to Grid View",className:"sm-batch-add-image-contract",noChrome:!0,size:"large",value:"contract",onClick:w,title:"Return to Grid View"},e.default.createElement(n.default,{name:"FullScreenExit",size:n.default.SIZE_LARGE})),m&&e.default.createElement(i.default,{"aria-label":"Next",className:"sm-batch-add-btns","data-direction":"prev","data-disable-auto-hide":!0,"data-testid":"batchadd_next_button",disabled:!h||null,noChrome:!0,onClick:h||null},e.default.createElement(n.default,{name:"NavigateNext"}))))};m.displayName="BatchAdd.SingleImageSwipeable",m.propTypes={containerHeight:l.default.number,containerWidth:l.default.number,focusUri:l.default.string,focusUriNext:l.default.string,focusUriPrev:l.default.string,location:l.default.object,onNavBackwardRequest:l.default.func,onNavForwardRequest:l.default.func};var f=m;exports.default=f}(),SM.currentModule=null}),"",{requires:["react","react-redux","prop-types","sm-component-button","sm-icon","sm-swipeable","sm-swipeable-constants","sm-batch-add-single-image-display-container","sm-batch-add-actions","sm-batch-add-constants"]});
YUI.add("sm-breadcrumb-item",(function(e){SM.currentModule="sm-breadcrumb-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),u=babelHelpers.interopRequireDefault(t("sm-icon"));class l extends s.default{constructor(e){super(e),this._onButtonClick=this._onButtonClick.bind(this)}render(){let{className:e,children:t,key:s,icon:a,isCurrentPage:u,emphasized:l}=this.props,o=(0,n.default)(e,"sm-breadcrumb-item","sm-flex","sm-flex-items-end",{"sm-flex-self-end":u&&!l});return r.default.createElement("li",{key:s,className:o,"data-is-current-page":u||void 0,"data-is-emphasized":l||void 0,"data-icon-only":!t&&!!a||void 0},this._renderCrumbContents())}_renderCrumbContents(){let{emphasized:e,url:t,icon:n,isCurrentPage:s,isLastCrumb:u,useButton:l,children:o,onButtonClick:i,...d}=this.props;e&&(o=r.default.createElement("h1",{key:"emphasized-crumb"},o));let m=[];return s?m.push(this._renderLabel(o,n)):m.push(r.default.createElement(a.default,babelHelpers.extends({key:"button",href:l?void 0:t,noChrome:!0,size:"small",onClick:this._onButtonClick},d),this._renderLabel(o,n))),u||m.push(this._renderSeparator()),m}_renderLabel(e,t){let r=[];return t&&r.push(this._renderIcon(t)),r.push(e),r}_renderIcon(e){return r.default.createElement(u.default,{key:"icon",className:"sm-breadcrumb-item-icon",name:e,size:u.default.SIZE_SMALL})}_renderSeparator(){return r.default.createElement(u.default,{key:"separator",className:"sm-breadcrumbs-separator",name:"AngleBracketRight",size:u.default.SIZE_SMALL})}_onButtonClick(e){let{onButtonClick:t,url:r}=this.props;t&&t(e,r)}}l.propTypes={url:e.default.string,icon:e.default.string,isCurrentPage:e.default.bool,isLastCrumb:e.default.bool,emphasized:e.default.bool,useButton:e.default.bool,onButtonClick:e.default.func},l.defaultProps={isCurrentPage:!1,isLastCrumb:!1,emphasized:!1,useButton:!1};var o=l;exports.default=o}(),SM.currentModule=null}),"",{requires:["classnames","react","sm","sm-component-button","sm-component-pure-render","sm-icon"]});
YUI.add("sm-breadcrumb-view",(function(e){SM.currentModule="sm-breadcrumb-view";var a;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;a=e.Template.Micro,e.namespace("SM.Views").Breadcrumb=e.Base.create("sm-views-breadcrumb",e.View,[],{containerTemplate:'<ul class="sm-breadcrumbs sm-inline-flex sm-flex-items-baseline"></ul>',itemTemplate:'<li class="sm-breadcrumb-item"><% if (data.url) { %><a class="sm-button sm-button-nochrome sm-button-skin-default" href="<%= data.url %>"><% } %><% if (data.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= data.icon %>"></span><% } %><%== data.name %><% if (data.url) { %></a><% } %></li>',itemNameTemplate:"<%= data.name %>",lastItemNameTemplate:"<%= data.name %>",separatorTemplate:'<li class="sm-breadcrumb-item sm-breadcrumb-separator yui3-u"><span class="sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketRight"></span></li>',_menu:null,render:function(){var a,t,m=this.get("container"),n=this.get("items"),s=n.length,i=s>this.get("showLevels"),l=[],r=this._compileTemplates();i&&(a=e.Node.create(r.item({url:"#",icon:"FolderExpand"})),e.Array.each(n,(function(e,a){a>0&&a<s-2&&l.push({data:e.data||{},label:e.name,url:e.url})}),this),(t=a.one("a")).plug(e.SM.Plugin.Menu,{items:l}),this._menu=t.menu,e.delegate("click",(function(e){e.preventDefault()}),a,">a",this)),e.Array.each(n,(function(e,t){var n,l=t===s-1,u=t===s-2;i&&1===t?n=a:(e.name=l?r.lastItemName({name:e.name}):r.itemName({name:e.name}),(!i||l||u)&&(n=r.item(e))),n&&(m.append(n),l||m.append(this.separatorTemplate))}),this)},_compileTemplates:function(){var e={};return e.item=a.compile(this.itemTemplate),e.itemName=a.compile(this.itemNameTemplate),e.lastItemName=a.compile(this.lastItemNameTemplate),e},getMenu:function(){return this._menu}},{ATTRS:{items:{value:[]},showLevels:{value:3}}}),SM.currentModule=null}),"",{requires:["template-micro","view","sm-menu","gallery-sm-menu-plugin"]});
YUI.add("sm-breadcrumbs-base",(function(e){SM.currentModule="sm-breadcrumbs-base";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),u=babelHelpers.interopRequireDefault(t("classnames"));class n extends l.default{render(){let{children:e,className:t,useButtons:l,onItemClick:n,containerRef:a}=this.props,s=r.default.Children.count(e)-1;return r.default.createElement("nav",{className:(0,u.default)("sm-breadcrumbs",t),ref:a},r.default.createElement("ol",{className:"sm-inline-flex sm-flex-items-baseline"},r.default.Children.map(e,(e,t)=>r.default.cloneElement(e,{key:"sm-breadcrumb-item-".concat(t),isLastCrumb:t===s,useButton:l,onButtonClick:e.props.onButtonClick||n}))))}}n.propTypes={useButtons:e.default.bool,onItemClick:e.default.func,containerRef:e.default.func},n.defaultProps={useButtons:!1,onItemClick:()=>{}};var a=n;exports.default=a}(),SM.currentModule=null}),"",{requires:["classnames","react","sm-component-pure-render"]});
YUI.add("sm-breadcrumbs-collapsible-component",(function(e){SM.currentModule="sm-breadcrumbs-collapsible-component";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),n=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("sm-component-pure-render")),u=babelHelpers.interopRequireDefault(r("sm-component-menu")),l=babelHelpers.interopRequireDefault(r("sm-component-menu-item")),s=babelHelpers.interopRequireDefault(r("sm-link")),a=babelHelpers.interopRequireDefault(r("sm-breadcrumbs-base")),i=babelHelpers.interopRequireDefault(r("sm-breadcrumb-item"));class d extends t.default{constructor(e){super(e),this._handleMenuClick=this._handleMenuClick.bind(this),this._bindMenuAnchorRef=this._bindMenuAnchorRef.bind(this),this.state={renderMenu:!1}}render(){let e,r,{children:t,...u}=this.props,l=t.filter(e=>e),s=l.length-3;return s>0&&(e=l.splice(1,s),r=this._renderExpandCrumb(),l.splice(1,0,r)),n.default.createElement("div",{className:"sm-breadcrumbs-collapsible"},n.default.createElement(a.default,u,l),this.state.renderMenu&&this._renderMenu(e))}_bindMenuAnchorRef(e){this._menuAnchorRef=e}_renderMenu(e){return n.default.createElement(u.default,{anchor:this._menuAnchorRef,menuId:this.props.menuId},e.map((e,r)=>{let{url:t,children:u}=e.props;return n.default.createElement(l.default,{key:r},n.default.createElement(s.default,{href:t},u))}))}_renderExpandCrumb(){return n.default.createElement(i.default,{icon:"FolderExpand",onButtonClick:this._handleMenuClick,key:"sm-breadcrumbs-expand-button",className:"sm-breadcrumbs-expand-button",ref:this._bindMenuAnchorRef})}_handleMenuClick(){this.state.renderMenu?this.props.toggleMenu():this.setState({renderMenu:!0},()=>{this.props.toggleMenu()}),this.props.onMenuClick()}}d.propTypes={menuId:e.default.string,onMenuClick:e.default.func,toggleMenu:e.default.func.isRequired},d.defaultProps={onMenuClick:()=>{}};var o=d;exports.default=o}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-breadcrumb-item","sm-breadcrumbs-base","sm-component-button","sm-component-menu","sm-component-pure-render","sm-icon","sm-link"]});
YUI.add("sm-breadcrumbs-collapsible-container",(function(e){SM.currentModule="sm-breadcrumbs-collapsible-container";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{connect:e}=SM.import("react-redux"),{toggle:r}=SM.import("sm-component-menu-actions"),o=SM.import("sm-breadcrumbs-collapsible-component");var n=e(null,(e,{menuId:o})=>({toggleMenu:()=>{e(r(o))}}))(o);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-breadcrumbs-collapsible-component","sm-component-menu-actions"]});
YUI.add("sm-breadcrumbs-collapsible",(function(e){SM.currentModule="sm-breadcrumbs-collapsible";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("lodash")),l=babelHelpers.interopRequireDefault(r("prop-types")),u=babelHelpers.interopRequireDefault(r("sm-component-pure-render")),t=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("sm-redux-store")),s=r("react-redux"),d=babelHelpers.interopRequireDefault(r("sm-breadcrumbs-collapsible-container"));class n extends u.default{constructor(r){super(r),this._menuId=r.menuId||e.default.uniqueId("collapsibleBreadcrumb")}render(){return t.default.createElement(s.Provider,{store:a.default},t.default.createElement(d.default,babelHelpers.extends({menuId:this._menuId},this.props)))}}n.displayName="CollapsibleBreadcrumbs",n.propTypes={menuId:l.default.string};var o=n;exports.default=o}(),SM.currentModule=null}),"",{requires:["lodash","react","react-redux","sm-component-pure-render","sm-breadcrumbs-collapsible-container","sm-redux-store"]});
YUI.add("sm-breadcrumbs",(function(e){SM.currentModule="sm-breadcrumbs";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BreadcrumbItem",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Breadcrumbs",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"CollapsibleBreadcrumbs",{enumerable:!0,get:function(){return t.default}});var e=babelHelpers.interopRequireDefault(r("sm-breadcrumb-item")),u=babelHelpers.interopRequireDefault(r("sm-breadcrumbs-base")),t=babelHelpers.interopRequireDefault(r("sm-breadcrumbs-collapsible"))}(),SM.currentModule=null}),"",{requires:["sm","sm-breadcrumb-item","sm-breadcrumbs-base","sm-breadcrumbs-collapsible"]});
YUI.add("sm-button-group",(function(t){SM.currentModule="sm-button-group";var e;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e=t.Base.create("sm-button-group",t.Widget,[],{destructor:function(){new t.EventHandle(this._eventHandles).detach()},renderUI:function(){var e=this.get("contentBox"),n=this.get("buttons"),s=this.get("size");e.setHTML(t.SM.Templates.buttonGroup({buttons:n,size:s}))},bindUI:function(){this._eventHandles=[this.get("boundingBox").delegate("click",this._onButtonClick,".sm-button",this),this.after("selectedChange",this.syncUI,this)]},syncUI:function(){var t=this.get("selected"),e=this.get("contentBox");e.all(".sm-button").removeClass("sm-button-selected"),e.all('[data-value="'+t+'"]').addClass("sm-button-selected")},addButton:function(t,e){var n=this.get("buttons");n.push({value:t,label:e}),this.set("buttons",n)},setActive:function(t){this.set("selected",t)},getActive:function(){return this.get("selected")},enableAll:function(){this.get("contentBox").all(".sm-button").removeAttribute("disabled")},disableAll:function(){this.get("contentBox").all(".sm-button").setAttribute("disabled","disabled"),this.set("selected",null)},_onButtonClick:function(t){var e=t.currentTarget;e.hasAttribute("disabled")||this.set("selected",e.getData("value"))}},{CSS_PREFIX:"sm-button-group",ATTRS:{selected:{value:null},buttons:{value:[]},size:{}}}),t.namespace("SM").ButtonGroup=e,SM.currentModule=null}),"",{requires:["base","node","widget","sm-templates-button"]});
YUI.add("sm-button",(function(s){SM.currentModule="sm-button";var a,e,n,t,l,o;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;a=s.Lang,e=s.Node,n=s.Base,s.Widget,window.SM,t='<span class="sm-icon {iconClassName}"></span><span class="sm-button-label">{label}</span>',l='<span class="sm-fonticon {iconClassName}">{iconChar}</span><span class="sm-button-label">{label}</span>',o=n.create("sm-button",s.Button,[],{CONTENT_TEMPLATE:null,initializer:function(s){},destructor:function(){},renderUI:function(){var s=this.get("boundingBox"),n=this.get("type"),o=this.get("label"),i=this.get("iconClassName"),c=this.get("iconChar"),u=this.get("skin"),m=this.get("size"),b=this.get("value");switch(i="small"===m?i+" "+("fonticon"===n?"sm-fonticon-small":"sm-icon-sml"):i,i="happy"===u||"sad"===u?i+" sm-icon-emph":i,s.addClass("sm-button"),s.hasClass("sm-button-icon")&&s.removeClass("sm-button-icon"),s.hasClass("sm-button-iconlabel")&&s.removeClass("sm-button-iconlabel"),n){case"label":s.setContent(e.create(a.sub('<span class="sm-button-label">{label}</span>',{label:o})));break;case"icon":s.addClass("sm-button-icon"),s.setContent(e.create(a.sub('<span class="sm-icon {iconClassName}"></span>',{iconClassName:i})));break;case"fonticon":s.addClass("sm-button-icon"),s.setContent(e.create(a.sub('<span class="sm-fonticon {iconClassName}">{iconChar}</span>',{iconClassName:i,iconChar:c})));break;case"iconlabel":s.addClass("sm-button-iconlabel"),s.setContent(e.create(a.sub(t,{label:o,iconClassName:i})));break;case"fonticonlabel":s.addClass("sm-button-iconlabel"),s.setContent(e.create(a.sub(l,{label:o,iconClassName:i,iconChar:c})))}switch(m){case"small":case"medium":s.addClass("sm-button-size-small");break;case"large":s.addClass("sm-button-size-large")}switch(u){case"light":s.addClass("sm-button-skin-submit");break;case"dark":s.addClass("sm-button-skin-default");break;case"happy":s.addClass("sm-button-skin-accent");break;case"sad":s.addClass("sm-button-skin-default")}this.get("nochrome")&&s.addClass("sm-button-nochrome"),this.get("nocaps")&&s.addClass("sm-button-nocaps"),b&&s.setAttribute("data-value",b)},syncUI:function(){},setLabel:function(s){void 0!==s.label&&this.set("label",s.label),void 0!==s.type&&this.set("type",s.type),void 0!==s.iconClassName&&this.set("iconClassName",s.iconClassName),this.renderUI()}},{CSS_PREFIX:"sm-button",ATTRS:{label:{value:""},type:{value:"label"},value:{value:""},iconClassName:{value:""},iconChar:{value:""},skin:{value:"light"},size:{value:"medium"},nochrome:{value:!1},nocaps:{value:!1},disabled:{value:!1}},TYPES:{LABEL:"label",ICON:"icon",FONTICON:"fonticon",ICON_LABEL:"iconlabel",FONTICON_LABEL:"fonticonlabel"},SKINS:{LIGHT:"light",DARK:"dark",HAPPY:"happy",SAD:"sad"},SIZES:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},TEMPLATES:{ICON:'<span class="sm-icon {iconClassName}"></span>',FONTICON:'<span class="sm-fonticon {iconClassName}">{iconChar}</span>',ICON_LABEL:t,FONTICON_LABEL:l}}),s.namespace("SM"),s.SM.Button=o,SM.currentModule=null}),"",{requires:["base","button","node"]});
YUI.add("sm-cart-constants",(function(_){SM.currentModule="sm-cart-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SOURCE_LB_COMMERCE_FOCUSED=exports.SOURCE_LB=exports.SOURCE_BATCH_ADD=exports.SOURCE_ADD_TO_CART=exports.CART_CARD_EDITOR_URI=exports.CART_COUPONS_URI=exports.CART_COUPON_APPLY_URI=exports.CART_ITEMS_URI=exports.CART_URI=void 0;exports.CART_URI="/api/v2/cart";exports.CART_ITEMS_URI="/api/v2/cart!items";exports.CART_COUPON_APPLY_URI="/api/v2/cart!applycoupon";exports.CART_COUPONS_URI="/api/v2/cart!coupons";exports.CART_CARD_EDITOR_URI="/api/v2/cards/editor";exports.SOURCE_ADD_TO_CART=1;exports.SOURCE_BATCH_ADD=2;exports.SOURCE_LB=3;exports.SOURCE_LB_COMMERCE_FOCUSED=4}(),SM.currentModule=null}),"",{});
YUI.add("sm-cart",(function(e){SM.currentModule="sm-cart";var t,r,o,a,n,s,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;t=SM.import("lodash"),r=SM.import("sm-resource-core"),o=SM.import("sm-smuglog"),a=new Error("Added cart item not found in cart"),n="undefined"==typeof location?{href:"(unknown)"}:location,s=e.mix(new e.EventTarget,{URL:SM.env.host.cartUrl,API_URI_ROOT:"/api/v2/cart",itemsLoaded:null,_lastCount:null,items:[],getItems:function(e){var a,n=s.itemsLoaded;return e||(e={}),s.itemsLoaded&&!e.refresh||(a=n,n=r.loadUri(s.API_URI_ROOT+"!items",{expand:["[CartItemType]","[CartItemContents].[CartItemContentType]"]}).then((function(e){return s._lastCount=t.reduce(e,(function(e,t){return e+t.get("Quantity")}),0),s.itemsLoaded===a&&(s.itemsLoaded=n,s.items.splice.apply(s.items,[0,s.items.length].concat(e))),s.items}),(function(t){if(e.allowFailure)throw t;return o.add("sm-cart",{message:"Error loading cart items",error:t.error||t},o.LEVEL_ERROR),s.items})),e.allowFailure||(s.itemsLoaded=n,a=n)),n},addItem:function(e,d){var i,m,u,c,l,h=[],g=s._lastCount;return(i=r.postUri(e,{data:d})).then((function(e){return m=e,h.push("Item "+m.get("Uri")+" added"),s.getItems({refresh:!0}).catch((function(e){throw h.push("Error fetching cart items after !buy: "+(e.error||e).message),l=e,e}))}),(function(t){throw h.push("!buy failed: "+(t.error||t).message),s.fire("error",{message:"Failed to add item to the cart",uri:e,params:d}),c=t,t})).then((function(e){if(u=e.length,!(e.indexOf(m)>-1))throw h.push("Added item "+m.get("Uri")+" not found in cart items ("+t.map(e,(function(e){return e.get("Uri")}))+")"),a;s.fire("contentsChange",{action:"add",items:e,newItem:m})})).catch((function(e){e!==c&&e!==l&&e!==a||(e=null),o.add("sm-cart",{message:"Cart.addItem() trouble",postParams:d,location:n.href,progress:h,beforeCount:g,afterCount:u,addedItem:m||"(none)",addError:c,cartItemsError:l,error:e&&(e.error||e)},o.LEVEL_WARNING)})),i},empty:function(){s.itemsLoaded=e.SM.io({type:"v2",method:"post",uri:s.API_URI_ROOT+"!empty"}).then((function(){var e=s.items.splice(0,s.items.length);return s.fire("contentsChange",{action:"empty",items:s.items,removed:e}),s.items}),(function(e){return o.error("sm-cart",{message:"Error while emptying cart",error:e&&e.message||e,method:"empty",location:n.href}),s.fire("error",{message:e&&e.message||e}),s.getItems({refresh:!0})}))},_oldAPI:new e.SM.API({source:"/rpc/cart.mg"}),getUserCart:function(e,t){s._oldAPI.sendRequest({method:"getUserCart",httpMethod:"POST",data:{cartId:e},callback:t,cacheResponse:!1})},getDigitalDownloadData:function(e,t,r){s._oldAPI.sendRequest({method:"getGalleryDownloads",httpMethod:"POST",data:{AlbumID:e,ImageID:t},callback:r,cacheResponse:!1})},addDownloadItem:function(t,r){s._oldAPI.sendRequest({method:"addAlbumDownload",httpMethod:"POST",data:e.merge({quantity:0,productId:0,skuId:0,vendorId:"SmugMug",albumId:0,imageId:0},t),callback:r,cacheResponse:!1})},addEZProjectItems:function(t,r,o,a,n,d){void 0!==n&&"undefined"!==n&&null!==n&&"null"!==n||(n=""),s._oldAPI.sendRequest({method:"addEZProjectItems",httpMethod:"POST",data:{imageID:t,imageKey:r,productID:o,quantities:e.JSON.stringify(a),cartId:n},callback:{success:d,context:this}})}}),module.exports=s,e.SM.Cart=s,SM.currentModule=null}),"",{requires:["sm","lodash","event-custom-base","sm-api2-transaction","sm-resource-core","sm-smuglog"]});
YUI.add("sm-catalog-action-types",(function(_){SM.currentModule="sm-catalog-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATALOG_SET_PREVIEW_IMAGES_LOOKUP_URI=exports.CATALOG_SET_VENDORS_LOOKUP_URI=void 0;exports.CATALOG_SET_VENDORS_LOOKUP_URI="CATALOG_SET_VENDORS_LOOKUP_URI";exports.CATALOG_SET_PREVIEW_IMAGES_LOOKUP_URI="CATALOG_SET_PREVIEW_IMAGE_LOOKUP_URI"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-catalog-actions",(function(e){SM.currentModule="sm-catalog-actions";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestCatalog=exports.requestLightboxCatalogImages=exports.prefetchCatalog=exports.setCatalogVendorsLookupUri=exports.setCatalogPreviewImagesLookupUri=void 0;var e=a("sm-api-redux-actions"),t=a("sm-api-redux-cache-utils"),o=a("sm-page-selectors"),s=a("sm-api-redux-cache-actions"),r=a("sm-api-redux-paginator-actions"),i=a("sm-api-redux-paginator-utils"),c=a("sm-api-redux-paginator-selectors"),u=a("sm-api-redux-selectors"),n=a("sm-catalog-constants"),l=a("sm-catalog-action-types");exports.setCatalogPreviewImagesLookupUri=e=>({type:l.CATALOG_SET_PREVIEW_IMAGES_LOOKUP_URI,previewImagesLookupUri:e});exports.setCatalogVendorsLookupUri=e=>({type:l.CATALOG_SET_VENDORS_LOOKUP_URI,catalogVendorsLookupUri:e});const g=(e,a=1)=>(t,s)=>{if(!(0,o.getFeatureFlagValue)(s(),"web.disable-product-previews"))return t((0,r.fetchPageFromAPI)({uri:e,data:{start:a},expand:["ImageSizeDetails"]})).then(()=>{let a=s(),o=(0,c.getPaginatedEntityTotal)(a,e),r=((0,c.getPaginatorMetadata)(a,e)||[]).reduce((e,a={})=>!e||e.start<a.start?a:e,null),{start:i,count:u}=r||{};return i+u<o?t(g(e,i+u)):e})};exports.prefetchCatalog=(e,a=n.CATALOG_VENDORS_URI)=>async o=>{let s="".concat(e,"-").concat(n.CATALOG_CACHE_TIMESTAMP);null===await(0,t.fetchResponseFromLocalCache)(n.CATALOG_CACHE_KEY,s)&&o(C(e,a))};exports.requestLightboxCatalogImages=(e=n.PREVIEW_IMAGE_SEARCH_URI,a=n.PREVIEW_IMAGE_ACCOUNT_URI)=>t=>{let o=(0,i.buildPaginatorUri)(e,{Keywords:n.LIGHTBOX_IMAGE_KEYWORD,Scope:a});return t(g(o,1))};const C=(a,o=n.CATALOG_VENDORS_URI)=>async(r,i)=>{let c="".concat(a,"-").concat(n.CATALOG_CACHE_TIMESTAMP),l=await(0,t.fetchResponseFromLocalCache)(n.CATALOG_CACHE_KEY,c);null===l?(0,u.isRequestInflight)(i(),n.REQUEST_ID_FETCH_CATALOG)||(r((0,s.storeResponseWithRequestId)(n.REQUEST_ID_FETCH_CATALOG,n.CATALOG_CACHE_KEY,c)),r((0,e.fetchFromAPI)({uri:o,expand:["CatalogCategories","CatalogCategories.CatalogSubCategories","CatalogVendorProducts","CatalogVendorProducts.CatalogProductOptions","CatalogVendorProducts.CatalogProductOptions.CatalogSkuType"]},n.REQUEST_ID_FETCH_CATALOG))):r((0,s.addResponseToReduxStore)(l))};exports.requestCatalog=C}(),SM.currentModule=null}),"",{requires:["sm-api-redux-actions","sm-api-redux-cache-utils","sm-api-redux-cache-actions","sm-api-redux-paginator-actions","sm-api-redux-paginator-utils","sm-api-redux-paginator-selectors","sm-api-redux-selectors","sm-catalog-constants","sm-catalog-action-types","sm-page-selectors"]});
YUI.add("sm-catalog-constants",(function(E){SM.currentModule="sm-catalog-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PREVIEW_IMAGE_ACCOUNT_URI=exports.PREVIEW_IMAGE_SEARCH_URI=exports.CATALOG_VENDORS_URI=exports.CATALOG_CACHE_KEY=exports.CATALOG_CACHE_TIMESTAMP=exports.REQUEST_ID_FETCH_CATALOG=exports.KEYWORD_WORD_DELIMITER=exports.KEY_DELIMITER=exports.SUBCATEGORY_KEYWORD_PREFIX=exports.CATEGORY_KEYWORD_PREFIX=exports.VENDOR_KEYWORD_PREFIX=exports.FOCUS_IMAGE_KEYWORD=exports.BIG_LIGHTBOX_IMAGE_KEYWORD=exports.LIGHTBOX_IMAGE_KEYWORD=exports.ORIENTATION_LANDSCAPE=exports.ITEM_NAME_NONE=exports.CATALOG_PREFETCH_FALLBACK_DELAY=void 0;exports.CATALOG_PREFETCH_FALLBACK_DELAY=1e3;exports.ITEM_NAME_NONE="none";exports.ORIENTATION_LANDSCAPE="landscape";exports.LIGHTBOX_IMAGE_KEYWORD="lightbox";exports.BIG_LIGHTBOX_IMAGE_KEYWORD="biglightbox";exports.FOCUS_IMAGE_KEYWORD="focus";exports.VENDOR_KEYWORD_PREFIX="vendor";exports.CATEGORY_KEYWORD_PREFIX="category";exports.SUBCATEGORY_KEYWORD_PREFIX="subcategory";exports.KEY_DELIMITER=":";exports.KEYWORD_WORD_DELIMITER="_";exports.REQUEST_ID_FETCH_CATALOG="FULL_CATALOG_FETCH_REQUEST_ID";exports.CATALOG_CACHE_TIMESTAMP="4/11/2019";exports.CATALOG_CACHE_KEY="CATALOG_DATA";exports.CATALOG_VENDORS_URI="/api/v2/catalog!vendors";exports.PREVIEW_IMAGE_SEARCH_URI="/api/v2/image!search";exports.PREVIEW_IMAGE_ACCOUNT_URI="/api/v2/user/assets"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-catalog-hacks",(function(e){SM.currentModule="sm-catalog-hacks";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{ITEM_NAME_NONE:e}=SM.import("sm-catalog-constants"),n=/^(\d+(?:\.\d+)?)\s*x\s*(\d+(?:\.\d+)?)\s*cm\.[\s\n]*/,i=/^(\d+(?:\.\d+)?)"?\s?[Xx]\s?(\d+(?:\.\d+)?)"?/,a=/^(\d+ ).+Card[s]? w\/ Env.$/,t=/commercial/i,o={},s={},r={},c=["Canvas","Traditional Canvas","Stretched Canvas","Flat Mounted Canvas","Rolled Canvas"],l=/\s*(?:Read it here|More info|Sized in inches)\.[\n\s]*/g,d=/\.([A-Z])/g,p={applyCardHacks:function(e){let{category:n,subcategory:i,product:t}=e.taxonomyData;t.canCrop=!1;let o=t.name.match(a);o&&(1==+o[1]?(t.name="1 Card With Envelope",t.fullName="1 "+i.name+" Card With Envelope"):(t.name="Box of "+o[1],t.fullName="Box of "+o[1]+" "+i.name+" Cards")),i.name=p.fixDimensionFormatting(i.name),-1===i.description.indexOf("nvelope")&&(i.description+="\nEnvelopes included."),-1!==t.name.indexOf("Box")&&(t.fullName=t.name+" "+i.name+" Cards"),n.description=p.fixNewlines(n.description),i.description=p.fixNewlines(i.description),t.description=p.fixNewlines(t.description),e.description=p.fixNewlines(e.description)},applyDownloadHacks:function(e){let{category:n,subcategory:i,product:a}=e.taxonomyData;a.canCrop=!1,i.license=t.test(i.name)?"Commercial":"Personal",a.optionLabel="Resolution",n.description="",i.description=p.fixNewlines(i.description),a.description=p.fixNewlines(a.description),e.description=p.fixNewlines(e.description)},applyKeepsakeHacks:function(e){let{category:n,product:i}=e.taxonomyData;e.taxonomyData.product.name=p.fixDimensionFormatting(i.name),e.taxonomyData.product.description=p.fixNewlines(i.description),n.description=p.fixNewlines(n.description)},applyPrintHacks:function(e){let{category:a,subcategory:t,product:o}=e.taxonomyData;"Fine Art Prints"===a.name&&(o.name=o.name.replace("- Fine Art Print -","")),o.fullName=p.fixDimensionFormatting(o.name),o.name=(o.fullName.match(i)||[])[0]||o.fullName;let s=o.description.replace(l,"");if(s){let e=s.match(n);e&&(o.cmDims=e.slice(1)),"Paper Prints"!==a.name&&(e?(t.description=s.slice(e[0].length),s=e[0].replace(/^\s+|\s+$/,"")):(t.description=s,s=""))}t.description=p.fixNewlines(t.description),o.description=p.fixNewlines(s),e.description=p.fixNewlines(e.description),-1===c.indexOf(t.name)&&"Acrylic Gallery"!==t.name||(e.taxonomyData.subcategory.name=t.name,e.taxonomyData.subcategory.description=e.description,e.taxonomyData.subcategory.sortIndex=t.sortIndex,t=e.taxonomyData.subcategory,e.name="",e.description="")},applyHacks:function(e){let{category:n,product:i}=e.taxonomyData;switch(n.name){case"Albums":case"Paper Prints":case"Desk Art":case"Wall Art":case"Fine Art Prints":p.applyPrintHacks(e);break;case"Keepsakes":p.applyKeepsakeHacks(e);break;case"Downloads":p.applyDownloadHacks(e);break;case"Greeting Cards":p.applyCardHacks(e)}if(i.optionLabel=p.fixProductOptionLabel(i.optionLabel),i.width>i.height!=e.minResWidth>e.minResHeight){let n=e.minResWidth;e.minResWidth=e.minResHeight,e.minResHeight=n}return e},fixDimensionFormatting:function(e){if(o[e])return o[e];let n=e,a=e.match(i);if(a){let i=e.slice(a[0].length+1);n=a[1]+'" x '+a[2]+'"'+" "+i}return o[e]=n,n},fixNewlines:function(e){return s[e]||(s[e]=e.replace(l,"").replace(d,".\n$1")),s[e]},fixProductOptionLabel:function(n){return n&&n!==e?(r[n]||(r[n]=n.charAt(0).toUpperCase()+n.slice(1)),r[n]):""}};var m=p;exports.default=m}(),SM.currentModule=null}),"",{requires:["sm-catalog-constants"]});
YUI.add("sm-catalog-helpers-hacks-redux",(function(e){SM.currentModule="sm-catalog-helpers-hacks-redux";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,n,s,c,m){if(!r||!n)return{};let p,u=s.Name,d=s.Name,l=n.Name,h=s.OptionType,g=n.Description,M=s.Description,N=c.Name,D=c.Description;try{let e=n.Name===i?"":n.Name,t=o.applyHacks({name:e,description:n.Description,minResHeight:r.MinResHeight,minResWidth:r.MinResWidth,taxonomyData:{product:{name:s.Name,description:s.Description,width:s.Width,height:s.Height,optionLabel:s.OptionType},subcategory:{name:c.Name,description:c.Description},category:{name:m.Name,description:m.Description}}}),a=t.taxonomyData.product,y=t.taxonomyData.subcategory;u=a.fullName||a.name,d=a.name,M=a.description,h=a.optionLabel,p=a.cmDims,l=t.name,g=t.description,N=y.name,D=y.description}catch(o){a||(t.add("sm-catalog-helpers-hacks-redux",{method:"default",error:o,productName:u,location:e.win.location.href},t.LEVEL_ERROR),a=!0)}return{productName:u,productShortName:d,productCmDimensions:p,itemFinish:l,finishDescription:g,productDescription:M,productOptionLabel:h,subcategoryName:N,subcategoryDescription:D}};const e=SM.import("sm-dom"),t=SM.import("sm-smuglog"),o=SM.import("sm-catalog-hacks"),{ITEM_NAME_NONE:i}=SM.import("sm-catalog-constants");let a=!1}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-smuglog","sm-catalog-hacks","sm-catalog-constants"]});
YUI.add("sm-catalog-helpers",(function(o){SM.currentModule="sm-catalog-helpers";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.byKeywords=exports.byCatalogSortOrder=exports.toSubcategoryKeyword=exports.toCategoryKeyword=exports.toVendorKeyword=void 0;var o=e("sm-catalog-constants");const r=(o="")=>o.toLowerCase().replace(/\W/g,""),t=e=>t=>[e,t].map(r).join(o.KEYWORD_WORD_DELIMITER),d=t(o.VENDOR_KEYWORD_PREFIX);exports.toVendorKeyword=d;const a=t(o.CATEGORY_KEYWORD_PREFIX);exports.toCategoryKeyword=a;const n=t(o.SUBCATEGORY_KEYWORD_PREFIX);exports.toSubcategoryKeyword=n;exports.byCatalogSortOrder=(o,e)=>void 0!==o.Group&&void 0!==e.Group?1e3*o.Group+o.SortIndex-(1e3*e.Group+e.SortIndex):o.SortIndex-e.SortIndex;exports.byKeywords=o=>({KeywordArray:e})=>e&&o.every(o=>e.includes(o))}(),SM.currentModule=null}),"",{requires:["sm-catalog-constants"]});
YUI.add("sm-catalog-model-helpers",(function(t){SM.currentModule="sm-catalog-model-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toSkuPrice=exports.toSku=exports.toProduct=exports.toSubcategory=exports.toCategory=void 0;const t=(t={})=>{let{Uri:e,Description:r,Name:o}=t;return e&&{description:r,name:o,uri:e}},e=t;exports.toCategory=e;const r=t;exports.toSubcategory=r;exports.toProduct=(t={})=>{let{Height:e,LockRotation:r,Name:o,Uri:i,Width:u}=t;return{height:e,lockRotation:r,name:o,uri:i,width:u}};exports.toSku=(t={},e={})=>{let{BorderHeight:r,BorderWidth:o,MinResHeight:i,MinResWidth:u,MaxQuantity:n,RotationMatters:a,Uri:c,Uris:{CatalogSkuBatchAdd:d,CatalogSkuBuy:s}={},canCrop:l=!0}=t,{Name:h,Description:m}=e;return{batchAddUri:d,borderHeight:r,borderWidth:o,buyUri:s,canCrop:l,description:m,maxQuantity:n,minResHeight:i,minResWidth:u,name:h,rotationMatters:a,uri:c}};exports.toSkuPrice=(t={})=>{let{Uri:e,Currency:r,Price:o}=t;return{currency:r,price:o,uri:e}}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-catalog-reducers",(function(e){SM.currentModule="sm-catalog-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("sm-catalog-action-types");exports.default=(r={},{type:u,...t}={})=>{switch(u){case e.CATALOG_SET_PREVIEW_IMAGES_LOOKUP_URI:{let e=r.ui||{};return{...r,ui:{...e,catalogProductPreviewImagesLookupUri:t.previewImagesLookupUri}}}case e.CATALOG_SET_VENDORS_LOOKUP_URI:{let e=r.ui||{};return{...r,ui:{...e,catalogVendorsLookupUri:t.catalogVendorsLookupUri}}}default:return r}}}(),SM.currentModule=null}),"",{requires:["sm-catalog-action-types"]});
YUI.add("sm-catalog-selectors",(function(t){SM.currentModule="sm-catalog-selectors";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSkuTypesForProductOrSubcategory=function(t,e){let r=p(t,e.Uri)||[e],a=new Set;return r.flatMap(e=>E(t,e.Uri)).forEach(({Uri:t})=>{a.add(t)}),[...a.values()].map(e=>(0,o.getEntity)(t,e))},exports.isAlbums=P,exports.mainPaneProductImagesEnabled=b,exports.getTitleForCategory=exports.getTitleForSubcatagory=exports.getTitleForProduct=exports.getTitleForSku=exports.getCatalogSkusForProduct=exports.getCatalogSkusForSubcategory=exports.getCatalogProductsForSubcategory=exports.getCatalogSubcategoriesForCategory=exports.getCatalogSkusForCategory=exports.getCatalogCategories=exports.getSkuTypesForSkus=exports.getSkuTypeForSku=exports.getProductSkuTypes=exports.getProductSkus=exports.getSubcategoryProducts=exports.getCategorySubcategories=exports.getSkuPriceByUri=exports.getSkuTypeByUri=exports.getSkuByUri=exports.getProductByUri=exports.getSubcategoryByUri=exports.getCategoryByUri=exports.getCatalogHighlightImageUrlForImage=exports.getCatalogMoreInfoImagesForItemUri=exports.getCatalogFocusImageForItemUri=exports.getCatalogItemPreviewImageKeywords=exports.getCatalogPreviewImages=exports.getCatalogPreviewImagesLookupUri=exports.getCatalogVendorsLookupUri=void 0;var t=e("sm-api-redux-paginator-selectors"),r=babelHelpers.interopRequireDefault(e("sm-image-sizes")),o=e("sm-api-redux-selectors"),a=e("sm-catalog-helpers"),g=e("sm-catalog-constants"),i=e("sm-page-selectors");exports.getCatalogVendorsLookupUri=t=>{let{ui:{catalogVendorsLookupUri:e}={}}=t;return e};const s=t=>{let{ui:{catalogProductPreviewImagesLookupUri:e}={}}=t;return e};exports.getCatalogPreviewImagesLookupUri=s;const u=(e,r)=>(0,t.getPaginatedEntity)(e,r);exports.getCatalogPreviewImages=u;const l=(t,e)=>{let r=(0,o.getExpansion)(t,e.Uri,"CatalogCategory"),g=(0,o.getExpansion)(t,r.Uri,"CatalogVendor");if(g&&r&&e)return[(0,a.toSubcategoryKeyword)(e.Name),(0,a.toCategoryKeyword)(r.Name),(0,a.toVendorKeyword)(g.Name)]};exports.getCatalogItemPreviewImageKeywords=l;const n=(t,e)=>{let r=(0,o.getEntity)(t,e),a=r&&l(t,r),g=s(t),i=g&&u(t,g);if(i&&a)return{keywords:a,previewImages:i}};exports.getCatalogFocusImageForItemUri=(t,e)=>{let{keywords:r,previewImages:o}=n(t,e)||{};if(o)return o.find((0,a.byKeywords)([...r,g.FOCUS_IMAGE_KEYWORD]))};exports.getCatalogMoreInfoImagesForItemUri=(t,e)=>{let{keywords:r,previewImages:o}=n(t,e)||{},i=P(t,e);if(!o)return;let s=g.LIGHTBOX_IMAGE_KEYWORD;return b(t,e)&&(s=g.BIG_LIGHTBOX_IMAGE_KEYWORD),o=o.filter((0,a.byKeywords)([...r,s])),i||(o=o.filter(({KeywordArray:t})=>!t.includes("focus"))),o.map(({Uri:t})=>t)};exports.getCatalogHighlightImageUrlForImage=(t,e,a,g)=>{let i=(0,o.getExpansion)(t,e.Uri,"ImageSizeDetails");if(!i)return;let s=new r.default(i),{Url:u}=s.containWithin(a,g);return u};const c=o.getEntity;exports.getCategoryByUri=c;const y=o.getEntity;exports.getSubcategoryByUri=y;const d=o.getEntity;exports.getProductByUri=d;const C=o.getEntity;exports.getSkuByUri=C;const S=o.getEntity;exports.getSkuTypeByUri=S;const m=o.getEntity;exports.getSkuPriceByUri=m;exports.getCategorySubcategories=(t,e)=>(0,o.getExpansion)(t,e,"CatalogSubCategories");const p=(t,e)=>((0,o.getExpansion)(t,e,"CatalogVendor.CatalogVendorProducts")||[]).filter(t=>t.Uris.CatalogSubCategory===e);exports.getSubcategoryProducts=p;const k=(t,e)=>{let r=(0,o.getExpansion)(t,e,"CatalogProductOptions");if(r)return r.filter(({Enabled:t})=>t)};exports.getProductSkus=k;const E=(t,e)=>(0,o.getRelatedEntities)(t,k(t,e),"CatalogSkuType");exports.getProductSkuTypes=E;exports.getSkuTypeForSku=(t,e={})=>(0,o.getExpansion)(t,e.Uri,"CatalogSkuType");exports.getSkuTypesForSkus=(t,e)=>e.map(e=>e&&(0,o.getExpansion)(t,e.Uri,"CatalogSkuType"));exports.getCatalogCategories=(t,e)=>(0,o.getRelatedEntities)(t,e,"CatalogProduct.CatalogCategory");exports.getCatalogSkusForCategory=(t,e,r)=>e.filter((0,o.byRelatedEntity)(t,r,"CatalogProduct.CatalogCategory"));exports.getCatalogSubcategoriesForCategory=(t,e,r)=>(0,o.getRelatedEntities)(t,e,"CatalogProduct.CatalogSubCategory").filter((0,o.byRelatedEntity)(t,r,"CatalogCategory"));const U=(t,e,r)=>(0,o.getRelatedEntities)(t,e,"CatalogProduct").filter((0,o.byRelatedEntity)(t,r,"CatalogSubCategory"));exports.getCatalogProductsForSubcategory=U;exports.getCatalogSkusForSubcategory=(t,e,r)=>{let o=U(t,e,r);return o?o.flatMap(r=>I(t,e,r)):[]};const I=(t,e,r)=>e.filter((0,o.byRelatedEntity)(t,r,"CatalogProduct"));exports.getCatalogSkusForProduct=I;exports.getTitleForSku=(t,e)=>{let{Name:r}=(0,o.getEntity)(t,e)||{};return r};exports.getTitleForProduct=(t,e)=>{let{Name:r}=(0,o.getEntity)(t,e)||{};return r};exports.getTitleForSubcatagory=(t,e)=>{let{Name:r}=(0,o.getEntity)(t,e)||{};return r};function P(t,e){let{Name:r=""}=y(t,e)||{};return r.includes("Albums")}function b(t,e){let r=P(t,e);return(0,i.viewportIsGreaterThanLarge)(t)&&!r}exports.getTitleForCategory=(t,e)=>{let{Name:r}=(0,o.getEntity)(t,e)||{};return r}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-paginator-selectors","sm-image-sizes","sm-api-redux-selectors","sm-catalog-helpers","sm-catalog-constants","sm-page-selectors"]});
YUI.add("sm-circular-array",(function(e){SM.currentModule="sm-circular-array";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrevious=exports.getNext=exports.getItemAtOffset=exports.getRange=void 0;exports.getRange=(e,r,t=0,n=0)=>{if(!Array.isArray(e)||!e.length||-1===e.indexOf(r))return[];let u=e.indexOf(r),i=t+n+1,l=[],s=u-t,c=u+n;return s<0&&(l=e.slice(s),s=0),c>=e.length?l.push(...e.slice(s),...e.slice(0,c-e.length+1)):l.push(...e.slice(s,c+1)),e.length<=i?l.slice(0,e.length):l};const e=(e,r,t)=>{let n=Array.isArray(e)&&e.length,u=n>=1&&void 0!==r?e.indexOf(r):-1;return u>-1?e[Math.floor((u+t+n)%n)]:void 0};exports.getItemAtOffset=e;exports.getNext=(r,t)=>e(r,t,1);exports.getPrevious=(r,t)=>e(r,t,-1)}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-codemirror-plugin",(function(t){SM.currentModule="sm-codemirror-plugin";var e,i,r;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e=SM.import("codemirror"),i={js:"text/javascript",css:"css",html:"text/html",markdown:"markdown"},r={browser:!0,undef:!0,devel:!0,eqnull:!0,noempty:!0},t.namespace("SM.Plugin").CodeMirror=t.Base.create("sm-codemirror-plugin",t.Plugin.Base,[],{_codeMirrorConfig:{autoCloseBrackets:!0,dragDrop:!1,indentUnit:2,lineNumbers:!1,lineWrapping:!1,matchBrackets:!0,styleActiveLine:!0,theme:"zenburn"},initializer:function(){var t=this.get("host");t.hide(),t.hasAttribute("placeholder")||t.setAttribute("placeholder","Enter code here..."),this.publish("codemirror:init",{fireOnce:!0}),this._eventHandles=[],this._buildCodeMirrorConfig(),this._initCodeMirror(),this._attachCodeMirrorEvents(),this._codeEditor.refresh(),this.fire("codemirror:init")},destructor:function(){new t.EventHandle(this._eventHandles).detach(),this.get("wrapperNode").remove(!0)},_afterConfigChange:function(e){var i=e.newVal,r=this._codeEditor,n=this._codeMirrorConfig;t.Object.each(i,(function(t,e){r.setOption(e,t)})),this._codeMirrorConfig=t.merge(n,e.newVal)},_afterLintUpdate:function(t,e){var i,r,n,o=e.length,s=this._codeEditor.lineCount(),a=this._codeEditor.getViewport();this._hasLintErrors=o>0;for(var d=0;d<s;d++)if(n=[],i=e[d]){r=i.length,this._codeEditor.addLineClass(d,"wrap","CodeMirror-has-lint-marker");for(var l=0;l<r;l++)n.push(i[l].message);this._annotations[d]={length:n.length,messages:n.join("<br>")},d>=a.from&&d<=a.to&&this._renderFonticonMarker(d)}else this._codeEditor.removeLineClass(d,"wrap","CodeMirror-has-lint-marker"),this._annotations[d]={length:0,messages:""}},_attachCodeMirrorEvents:function(){var e=this;this._eventHandles.push(this.after("cmConfigChange",this._afterConfigChange,this)),this._codeEditor.on("change",(function(i,r){e._changeTimer&&e._changeTimer.cancel(),e._changeTimer=t.later(e.get("changeInterval"),e,(function(){this.fire("codemirror:change",{changeObj:r})}))}))},_buildCodeMirrorConfig:function(){var e=this.get("editorMode"),r=this.get("cmConfig"),n=this,o={};r.mode=i[e.toLowerCase()],r.mode===i.html&&(o.autoCloseTags={whenClosing:!0,whenOpening:!0,indentTags:[]}),r.mode===i.js&&(o.lineNumbers=!0,this.get("enableJSHint")&&t.Get.js(SM.env.host.http+SM.env.host.cdn+"/include/js/jshint.js",{onSuccess:function(){window.JSHINT&&n._configureAndEnableJSHint()}})),this._codeMirrorConfig=t.merge(this._codeMirrorConfig,o,r)},_configureAndEnableJSHint:function(){var i=this.get("jsHintConfig");this._linting=!0,this._hasLintErrors=!1,this._annotations=[],this._codeEditor.setOption("gutters",["CodeMirror-lint-markers"]),this._codeEditor.setOption("lintWith",{getAnnotations:e.javascriptValidatorWithOptions(t.merge(r,i)),onUpdateLinting:t.bind(this._afterLintUpdate,this),tooltips:!1})},_initCodeMirror:function(){var t=this.get("host"),i=this.get("editorMode");this._codeEditor=e.fromTextArea(t.getDOMNode(),this._codeMirrorConfig),this.get("editorNode").addClass(i),this._setInitialSize()},_renderFonticonMarker:function(e){var i,r,n=this._annotations[e],o=this._codeEditor.lineInfo(e);o&&(i=r=t.one(o.gutterMarkers["CodeMirror-lint-markers"]),n.length>1&&(r=i.one(".CodeMirror-lint-marker-multiple")),r.addClass("sm-fonticon-sml"),i.hasClass("CodeMirror-lint-marker-error")?r.removeClass("sm-fonticon-Warning").addClass("sm-fonticon-XCrossEncircled"):r.removeClass("sm-fonticon-XCrossEncircled").addClass("sm-fonticon-Warning"),t.SM.Page.Tooltip.attachToNode(n.messages,r,{alignment:"right"}))},_resetJSHintConfig:function(i){return this._linting&&this._codeEditor.setOption("lintWith",{getAnnotations:e.javascriptValidatorWithOptions(t.merge(r,i)),onUpdateLinting:t.bind(this._afterLintUpdate,this),tooltips:!1}),i},_setInitialSize:function(){var t=parseInt(this.get("editorWidth"),10)||null,e=parseInt(this.get("editorHeight"),10)||null;(t||e)&&this._codeEditor.setSize(t,e)},getEditorContents:function(){return t.Lang.trim(this._codeEditor.getValue())},getSelectedRange:function(){return{from:this._codeEditor.getCursor(!0),to:this._codeEditor.getCursor(!1)}},hasLintErrors:function(){return this._linting&&this._hasLintErrors},refreshEditor:function(){this._codeEditor.refresh()},resizeEditor:function(t,e){var i=parseInt(e,10)||null,r=parseInt(t,10)||null;this._codeEditor.setSize(i,r),this.refreshEditor()},setEditorContents:function(t){return t!==this.getEditorContents()&&this._codeEditor.setValue(t),this}},{NS:"CodeMirror",ATTRS:{changeInterval:{value:500},cmConfig:{value:{}},editorHeight:{value:null,setter:function(t){return t=parseInt(t,10),this._codeEditor.setSize(null,t),t}},editorMode:{value:"js"},editorNode:{value:null,getter:function(e){return e||(e=t.one(this._codeEditor.getScrollerElement()),this._setStateVal("editorNode",e)),e}},editorWidth:{value:null,setter:function(t){return t=parseInt(t,10),this._codeEditor.setSize(t,null),t}},enableJSHint:{value:!1},gutterNode:{value:null,getter:function(e){return e||(e=t.one(this._codeEditor.getGutterElement()),this._setStateVal("gutterNode",e)),e}},initialContent:{value:null},jsHintConfig:{value:null,setter:"_resetJSHintConfig"},scrollbarNode:{value:null,getter:function(t){return t||(t=this.get("wrapperNode").one(".CodeMirror-scrollbar"),this._setStateVal("scrollbarNode",t)),t}},wrapperNode:{value:null,getter:function(e){return e||(e=t.one(this._codeEditor.getWrapperElement()),this._setStateVal("wrapperNode",e)),e}}}}),SM.currentModule=null}),"",{requires:["codemirror","base","node","plugin","get","sm-page-tooltip"]});
YUI.add("sm-colorpicker",(function(t){SM.currentModule="sm-colorpicker";var e;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e=t.Base.create("sm-colorpicker",t.View,[],{containerTemplate:'<div class="sm-colorpicker"></div>',template:'<div class="sm-colorpicker-content" style="position: relative; width: 228px; height: 235px"><div class="sm-colorpicker-hex" style="position: absolute; width: 228px; height: 43px;">'+t.SM.Templates.textbox({name:"hex"})+'</div><canvas width="192" height="192" class="sm-colorpicker-box" style="position: absolute; top: 43px;"></canvas><canvas width="192" height="192" class="sm-colorpicker-mouseable sm-colorpicker-box-indicator" style="position:absolute; top: 43px;"></canvas><canvas width="24" height="192" class="sm-colorpicker-bar" style="position: absolute; top: 43px; left: 204px;"></canvas><canvas width="24" height="192" class="sm-colorpicker-mouseable sm-colorpicker-bar-indicator" style="position: absolute; top: 43px; left: 204px;"></canvas></div>',initializer:function(t){var e;if(t||(t={}),t.hex){e="limited"===this.get("paletteMode")?this._clampColor(t.hex):t.hex;var a=this._hex2rgb(e),i=this._rgb2hsv(a);this.setAttrs({hue:i[0],saturation:i[1],brightness:i[2]})}this._polyfillRequestAnimationFrame()},render:function(){if(this._isRendered)return this;this._isRendered=!0;var t=this.get("container");return t.setHTML(this.template),this.get("container").one("[name=hex]").set("value","#"+this.get("hex")),this._drawBox(),this._drawBoxIndicator(),this._drawBar(),this._drawBarIndicator(),this._eventHandles=[t.delegate("mousedown",this._startIndicatorDrag,".sm-colorpicker-mouseable",this),this.after("hueChange",(function(t){this._drawBox(),"cp-drag"!==t.src&&this._drawBarIndicator()}),this),this.after(["saturationChange","brightnessChange"],(function(t){"cp-drag"!==t.src&&this._drawBoxIndicator()}),this),this.after(["hueChange","saturationChange","brightnessChange"],(function(t){"cp-sync"!==t.src&&this.set("hex",this._rgb2hex(this._hsv2rgb(this.get("hue"),this.get("saturation"),this.get("brightness"))),{src:"cp-sync"})})),this.after("hexChange",(function(t){if("cp-sync"!==t.src){var e=this._hex2rgb(t.newVal),a=this._rgb2hsv(e);this.setAttrs({hue:a[0],saturation:a[1],brightness:a[2]},{src:"cp-sync"})}})),this.after("paletteModeChange",(function(){this._drawBox()})),t.one("[name=hex]").on("valuechange",(function(t){this.set("hex",t.target.get("value"),{src:"cp-text"})}),this),this.after("hexChange",(function(e){"cp-text"!==e.src&&t.one("[name=hex]").set("value","#"+e.newVal)}))],this},destructor:function(){this._endIndicatorDrag(),new t.EventHandle(this._eventHandles).detach()},_animateIndicator:function(){var e=Math.max(0,Math.min(192,this._mouseRawX+this._canvasOffsetX)),a=Math.max(0,Math.min(192,this._mouseRawY+this._canvasOffsetY));e===this._prevMouseX&&a===this._prevMouseY||(this._prevMouseX=e,this._prevMouseY=a,this._refreshIndicatorFn.call(this,e,a)),this._animateTimer=window.requestAnimationFrame(t.bind(this._animateIndicator,this))},_refreshBoxIndicator:function(t,e){var a=100*t/192,i=100-100*e/192;"limited"===this.get("paletteMode")&&(a*=Math.min(1,2-i/50)),this.set("saturation",a,{src:"cp-drag"}),this.set("brightness",i,{src:"cp-drag"}),this._drawBoxIndicator([t,e])},_refreshBarIndicator:function(t,e){this.set("hue",Math.max(0,Math.min(360,360*e/192)),{src:"cp-drag"}),this._drawBarIndicator()},_storeMouseCoordinates:function(t){this._mouseRawX=t.clientX,this._mouseRawY=t.clientY},_startIndicatorDrag:function(e){var a=e.currentTarget,i=a.getXY();this._canvasOffsetX=a.get("docScrollX")-i[0],this._canvasOffsetY=a.get("docScrollY")-i[1],this._whileDragHandle=t.one("body").on("mousemove",this._storeMouseCoordinates,this),this._storeMouseCoordinates(e),a.hasClass("sm-colorpicker-box-indicator")?this._refreshIndicatorFn=this._refreshBoxIndicator:a.hasClass("sm-colorpicker-bar-indicator")&&(this._refreshIndicatorFn=this._refreshBarIndicator),this._animateIndicator(),this._endDragHandle=t.one("body").on(["mouseup","mouseleave"],(function(){this._endIndicatorDrag()}),this),e.preventDefault()},_endIndicatorDrag:function(){this._whileDragHandle&&this._whileDragHandle.detach(),this._whileDragHandle=null,this._endDragHandle&&this._endDragHandle.detach(),this._endDragHandle=null,window.cancelAnimationFrame(this._animateTimer)},_drawBox:function(){var t,e,a,i,r,n,s=this.get("container").one(".sm-colorpicker-box").getDOMNode().getContext("2d"),o=this.get("paletteMode"),h=this.get("hue"),c=0,l=s.createImageData(192,192);for(n=0;n<192;n++)for(t=100-100*n/192,e=Math.min(1,2*n/192),a=0,r=0;r<192;r++)i=this._hsv2rgb(h,a,t),l.data[c++]=i[0],l.data[c++]=i[1],l.data[c++]=i[2],l.data[c++]=255,"full"===o?a=100*r/192:a+=100*e/192;s.putImageData(l,0,0)},_drawBoxIndicator:function(t){var e,a,i=this._boxIndicatorCtx||(this._boxIndicatorCtx=this.get("container").one(".sm-colorpicker-box-indicator").getDOMNode().getContext("2d"));if(t&&t.length)e=t[0],a=t[1];else{var r=this.get("saturation"),n=this.get("brightness");e=192*r/100,a=1.92*(100-n),"limited"===this.get("paletteMode")&&n>50&&(e*=100/Math.max(100/192,100- -2*(50-n)))}i.clearRect(0,0,192,192),i.strokeStyle="rgba(0,0,0,.5)",i.lineWidth=2,i.beginPath(),i.arc(e+1,a+1,5,0,2*Math.PI,!1),i.stroke(),i.closePath(),i.beginPath(),i.strokeStyle="white",i.arc(e,a,5,0,2*Math.PI,!1),i.stroke(),i.closePath()},_drawBar:function(){var t,e,a,i,r=this.get("container").one(".sm-colorpicker-bar").getDOMNode().getContext("2d"),n=r.createImageData(24,192),s=0;for(i=0;i<192;i++)for(e=i/192*360,t=this._hsv2rgb(e,100,100),a=0;a<24;a++)n.data[s++]=t[0],n.data[s++]=t[1],n.data[s++]=t[2],n.data[s++]=255;r.putImageData(n,0,0)},_drawBarIndicator:function(){var t=this.get("hue")/360*192,e=this._barIndicatorCtx||(this._barIndicatorCtx=this.get("container").one(".sm-colorpicker-bar-indicator").getDOMNode().getContext("2d"));e.clearRect(0,0,24,192),e.beginPath(),e.moveTo(0,t),e.rect(1,t-3,22,6),e.strokeStyle="white",e.lineWidth=3,e.stroke()},_hsv2rgb:function(t,e,a){t/=60,e/=100,a/=100;var i=Math.floor(t)%6,r=t-Math.floor(t),n=255*a*(1-e),s=255*a*(1-e*r),o=255*a*(1-e*(1-r));switch(a*=255,i){case 0:return[a,o,n];case 1:return[s,a,n];case 2:return[n,a,o];case 3:return[n,s,a];case 4:return[o,n,a];case 5:return[a,n,s]}},_rgb2hex:function(t){var e,a=[],i="";for(a[0]=Math.round(t[0]).toString(16),a[1]=Math.round(t[1]).toString(16),a[2]=Math.round(t[2]).toString(16),e=0;e<3;e++)1===a[e].length&&(i+="0"),i+=a[e];return i},_hex2rgb:function(t){var e,a=t.match(/^\s*#?([A-Fa-f0-9]{6})\s*$/),i=[];return a?(e=a[1],i[0]=parseInt(e[0]+e[1],16),i[1]=parseInt(e[2]+e[3],16),i[2]=parseInt(e[4]+e[5],16),i):null},_rgb2hsv:function(t){if(!t)return null;var e,a,i=t[0],r=t[1],n=t[2],s=Math.min(i,r,n),o=Math.max(i,r,n),h=o-s;return a=0===o?0:h/o*1e3/10,o===s?e=0:i===o?e=(r-n)/h:r===o?e=2+(n-i)/h:n===o&&(e=4+(i-r)/h),(e=Math.min(60*e,360))<0&&(e+=360),[e,a,o/255*1e3/10]},_clampColor:function(t){if("full"===this.get("paletteMode"))return t;var e=this._hex2rgb(t),a=this._rgb2hsv(e),i=a[1],r=a[2],n=i+2*r;if(n>200){var s=n-200,o=Math.ceil(s/3),h=this._hsv2rgb(a[0],i-o,r-o);return this._rgb2hex(h)}return t},_polyfillRequestAnimationFrame:function(){for(var t=0,e=["ms","moz","webkit","o"],a=0;a<e.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[e[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[a]+"CancelAnimationFrame"]||window[e[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var a=(new Date).getTime(),i=Math.max(0,16-(a-t)),r=window.setTimeout((function(){e(a+i)}),i);return t=a+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}},{ATTRS:{paletteMode:{value:"limited",setter:function(e){return"full"!==e&&"limited"!==e?t.AttributeCore.INVALID_VALUE:e}},hue:{value:225},saturation:{value:10},brightness:{value:16},hex:{value:"242528",setter:function(e,a,i){return e&&"#"===e[0]&&(e=e.substring(1)),/^[0-9a-fA-F]{6}$/.test(e)?("limited"===this.get("paletteMode")&&(e=this._clampColor(e)),i&&i.src&&"cp-text"===i.src||this._rendered&&this.get("container").one("[name=hex]").set("value","#"+e),e):t.AttributeCore.INVALID_VALUE}}}}),t.namespace("SM").ColorPicker=e,SM.currentModule=null}),"",{requires:["view","color-base","color-hsl","color-hsv","sm-templates-form"]});
YUI.add("sm-comments-action-types",(function(E){SM.currentModule="sm-comments-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SET_RATING=exports.LOGIN_BUTTONS_LOADED=exports.LOGIN=exports.APPROVE_COMMENT_SUCCESS=exports.REQUEST_APPROVE_COMMENT=exports.REMOVE_COMMENT_SUCCESS=exports.REQUEST_REMOVE_COMMENT=exports.ADD_COMMENT_SUCCESS=exports.REQUEST_ADD_COMMENT=exports.GET_NEXT_PAGE_SUCCESS=exports.REQUEST_NEXT_PAGE=exports.RECEIVE_COMMENTS=exports.REQUEST_COMMENTS=void 0;exports.REQUEST_COMMENTS="REQUEST_COMMENTS";exports.RECEIVE_COMMENTS="RECEIVE_COMMENTS";exports.REQUEST_NEXT_PAGE="REQUEST_NEXT_PAGE";exports.GET_NEXT_PAGE_SUCCESS="GET_NEXT_PAGE_SUCCESS";exports.REQUEST_ADD_COMMENT="REQUEST_ADD_COMMENT";exports.ADD_COMMENT_SUCCESS="ADD_COMMENT_SUCCESS";exports.REQUEST_REMOVE_COMMENT="REQUEST_REMOVE_COMMENT";exports.REMOVE_COMMENT_SUCCESS="REMOVE_COMMENT_SUCCESS";exports.REQUEST_APPROVE_COMMENT="REQUEST_APPROVE_COMMENT";exports.APPROVE_COMMENT_SUCCESS="APPROVE_COMMENT_SUCCESS";exports.LOGIN="LOGIN";exports.LOGIN_BUTTONS_LOADED="LOGIN_BUTTONS_LOADED";exports.SET_RATING="SET_RATING"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-comments-actions",(function(e){SM.currentModule="sm-comments-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchComments=function(t){return r=>{let o;switch(t.endpointType){case"Image":case"AlbumImage":o="ImageComments";break;case"Album":o="AlbumComments";break;case"Node":o="NodeComments";break;case"Folder":case"Page":n.default.add("sm-comments-actions",{[n.default.FIELD_MESSAGE]:"Invalid parentResource.endpointType for comments",method:"fetchComments",endpointType:t.endpointType},n.default.LEVEL_ERROR);break;default:throw new Error("Unable to fetch comments - unsupported parent resource type")}let c=t.getExpansionUri(o);c?(r(m(t)),e.default.loadUri(c,{count:s.PAGE_SIZE,paginate:!0,start:1}).then(e=>{r(u(e,t))})):n.default.add("sm-comments-actions",{[n.default.FIELD_MESSAGE]:"Undefined comments expansionUri",method:"fetchComments",expansion:o},n.default.LEVEL_ERROR)}},exports.requestComments=m,exports.receiveComments=u,exports.getNextPage=function(e){return(t,n)=>{let{paginator:r,paginatorStart:m}=(0,o.getCommentsTreeByResource)(n(),e);t(c()),r.getNextPage({count:s.PAGE_SIZE,start:m}).then(n=>{t(a(n,e))})}},exports.requestNextPage=c,exports.getNextPageSuccess=a,exports.addComment=function(t,n,r){return(m,u)=>{const c=u(),a=(0,o.getCommentsUser)(c);a&&(m(i()),e.default.postUri(r.getExpansionUri(s.EXPANSION_NAME_MAP[r.endpointType]),{data:{Comment:t,Rating:n,Name:a.name,ServiceID:a.serviceID,SocialID:a.socialID}}).then(e=>{m(p(e,r))}))}},exports.requestAddComment=i,exports.addCommentSuccess=p,exports.removeComment=function(t,n){return(r,s)=>{const m=(0,o.getCommentsTreeByResource)(s(),n),u=(0,o.getCommentResourceByUri)(m,t).get("Uri");r(E()),e.default.deleteUri(u).then(()=>{r(d(t,n))})}},exports.requestRemoveComment=E,exports.removeCommentSuccess=d,exports.approveComment=function(t,n){return(r,s)=>{const m=(0,o.getCommentsTreeByResource)(s(),n),u=(0,o.getCommentResourceByUri)(m,t);r(l()),e.default.postUri(u.getExpansionUri("CommentApprove")).then(()=>e.default.loadUri(u.get("Uri"))).then(e=>{r(C(t,e,n))})}},exports.requestApproveComment=l,exports.approveCommentSuccess=C,exports.login=function(e){return{type:r.LOGIN,user:e}},exports.loginButtonsLoaded=function(e){return{type:r.LOGIN_BUTTONS_LOADED,parentResource:e}},exports.setRating=function(e,t){return{type:r.SET_RATING,rating:e,parentResource:t}};var e=babelHelpers.interopRequireDefault(t("sm-resource-core")),n=babelHelpers.interopRequireDefault(t("sm-smuglog")),r=t("sm-comments-action-types"),o=t("sm-comments-selectors"),s=t("sm-comments-constants");function m(e){return{type:r.REQUEST_COMMENTS,parentResource:e}}function u(e,t){return{type:r.RECEIVE_COMMENTS,paginator:e,parentResource:t}}function c(){return{type:r.REQUEST_NEXT_PAGE}}function a(e,t){return{type:r.GET_NEXT_PAGE_SUCCESS,paginator:e,parentResource:t}}function i(){return{type:r.REQUEST_ADD_COMMENT}}function p(e,t){return{type:r.ADD_COMMENT_SUCCESS,commentResource:e,parentResource:t}}function E(){return{type:r.REQUEST_REMOVE_COMMENT}}function d(e,t){return{type:r.REMOVE_COMMENT_SUCCESS,uri:e,parentResource:t}}function l(){return{type:r.REQUEST_APPROVE_COMMENT}}function C(e,t,n){return{type:r.APPROVE_COMMENT_SUCCESS,uri:e,approvedCommentResource:t,parentResource:n}}}(),SM.currentModule=null}),"",{requires:["sm-resource-core","sm-comments-action-types","sm-comments-selectors","sm-comments-constants"]});
YUI.add("sm-comments-add-comment-container",(function(e){SM.currentModule="sm-comments-add-comment-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),n=t("sm-comments-selectors"),o=babelHelpers.interopRequireDefault(t("sm-page")),r=t("sm-comments-actions"),m=babelHelpers.interopRequireDefault(t("sm-comments-component-add-comment"));var s=(0,e.connect)((e,{parentResource:t})=>{let o=(0,n.getCommentsTreeByResource)(e,t),{loggedIn:r,profileImageURL:m}=(0,n.getCommentsUser)(e);return{currentRating:o&&o.currentRating,isCommentUserLoggedIn:r,profileImageURL:m,parentResource:t}},e=>({onTextAreaClick:()=>{o.default.user&&e((0,r.login)({profileImageURL:o.default.user.bioPhotoUrl}))},_onSetRating:(t,n)=>{e((0,r.setRating)(t,n))},_onAddComment:(t,n,o)=>{e((0,r.addComment)(t,n,o)),e((0,r.setRating)(0,o))}}),(e,t)=>{let{currentRating:n,parentResource:o}=e,{_onAddComment:r,_onSetRating:m,...s}=t;return{...e,...s,onSetRating:e=>{m(n===e?0:e,o)},onAddComment:e=>{r(e,n,o)}}})(m.default);exports.default=s}(),SM.currentModule=null}),"",{requires:["react-redux","sm-comments-selectors","sm-page","sm-comments-actions","sm-comments-component-add-comment"]});
YUI.add("sm-comments-component-add-comment",(function(e){SM.currentModule="sm-comments-component-add-comment";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireWildcard(t("react")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-component-textarea")),a=babelHelpers.interopRequireDefault(t("sm-page")),o=t("sm-comments-constants"),l=babelHelpers.interopRequireDefault(t("sm-comments-component-rating-input")),i=babelHelpers.interopRequireDefault(t("sm-comments-login-container"));class m extends s.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_input",s.default.createRef()),babelHelpers.defineProperty(this,"state",{loginChecked:!1,commentTextIsValid:!0,errorMessage:"",textareaValue:""}),babelHelpers.defineProperty(this,"_onTextAreaClick",()=>{const{onTextAreaClick:e}=this.props;e(),this.setState({loginChecked:!0})}),babelHelpers.defineProperty(this,"_onPostClick",()=>{let{onAddComment:e}=this.props,{textareaValue:t}=this.state,s=t.trim().length,n=0===s,r=s>o.COMMENT_MAX_CHARACTERS;if(n||r){let e=n?"Comment is required":"Exceeds ".concat(o.COMMENT_MAX_CHARACTERS," limit by ").concat(s-o.COMMENT_MAX_CHARACTERS);this.setState({commentTextIsValid:!1,errorMessage:e})}else this.setState({commentTextIsValid:!0,errorMessage:"",textareaValue:""},()=>{e(t)})}),babelHelpers.defineProperty(this,"_onFocus",()=>{a.default.uxdisabled=!0}),babelHelpers.defineProperty(this,"_onBlur",()=>{a.default.uxdisabled=!1}),babelHelpers.defineProperty(this,"_onTextChange",e=>{this.setState({textareaValue:e.target.value})})}componentDidUpdate(e){!e.isCommentUserLoggedIn&&this.props.isCommentUserLoggedIn&&this._input.current&&this._input.current.focus(),this.state.loginChecked&&!this.props.isCommentUserLoggedIn&&this._onBlur()}componentWillUnmount(){this._onBlur()}render(){let{isCommentUserLoggedIn:e,parentResource:t}=this.props,n=!this.state.loginChecked||e,a=n?"Enter your comments":"You must log in to leave a comment.";return s.default.createElement("div",{className:"sm-comment-add"},s.default.createElement("div",{className:"sm-comment-add-form"},s.default.createElement(r.default,{ref:this._input,disabled:!n,placeholder:a,onClick:this._onTextAreaClick,onFocus:this._onFocus,onBlur:this._onBlur,error:!this.state.commentTextIsValid,onChange:this._onTextChange,value:this.state.textareaValue}),!this.state.commentTextIsValid&&s.default.createElement("div",{className:"sm-form-field-error-msg"},this.state.errorMessage),n?this._renderCommentAddActions():s.default.createElement(i.default,{parentResource:t})))}_renderCommentAddActions(){const{currentRating:e,onSetRating:t}=this.props;return this.state.loginChecked?s.default.createElement("div",{className:"sm-comment-add-actions sm-flex sm-flex-justify-between"},s.default.createElement("div",{className:"sm-comment-add-rate sm-flex sm-flex-items-center"},s.default.createElement("h5",{className:"sm-comment-rating-label"},"Rate it"),s.default.createElement(l.default,{rating:e,onStarClick:t})),s.default.createElement("div",{className:"sm-comment-add-post"},s.default.createElement(n.default,{size:n.default.SIZE_MEDIUM,onClick:this._onPostClick},"Post"))):null}}exports.default=m,babelHelpers.defineProperty(m,"displayName","Comments.AddComment"),babelHelpers.defineProperty(m,"propTypes",{currentRating:e.default.oneOf(o.RATINGS),isCommentUserLoggedIn:e.default.bool,onAddComment:e.default.func.isRequired,onSetRating:e.default.func.isRequired,onTextAreaClick:e.default.func.isRequired,parentResource:e.default.object})}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-component-textarea","sm-page","sm-comments-constants","sm-comments-component-rating-input","sm-comments-login-container"]});
YUI.add("sm-comments-component-avatar",(function(e){SM.currentModule="sm-comments-component-avatar";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-icon")),l=babelHelpers.interopRequireDefault(t("sm-link"));const n=e=>{let t,{profileURL:n,profileImageURL:u}=e;return t=u?r.default.createElement("img",{src:u}):r.default.createElement("div",{className:"sm-flex sm-flex-items-center sm-flex-justify-center sm-comment-avatar-outline"},r.default.createElement(a.default,{name:"Person",size:a.default.SIZE_LARGE})),n?r.default.createElement(l.default,{href:n},t):t};n.displayName="Comments.Avatar",n.propTypes={profileURL:e.default.string,profileImageURL:e.default.string};var u=n;exports.default=u}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-icon","sm-link"]});
YUI.add("sm-comments-component-comment-list",(function(e){SM.currentModule="sm-comments-component-comment-list";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(o("prop-types")),t=babelHelpers.interopRequireDefault(o("react")),m=babelHelpers.interopRequireDefault(o("sm-comments-component-comment")),n=babelHelpers.interopRequireDefault(o("sm-component-button"));const l=({comments:e,onCommentApproveClick:o,onCommentRemoveClick:l,isOwner:r,showLoadMore:a,onLoadMoreClick:c})=>t.default.createElement("div",null,t.default.createElement("ul",{className:"sm-comment-list"},e.map((e,n)=>t.default.createElement(m.default,{comment:e,key:"sm-comment-item-".concat(n),onApproveClick:o,onRemoveClick:l,isOwner:r})),0===e.length&&t.default.createElement("li",{className:"sm-comment-listitem sm-comment-listitem-none"},"No Comments")),a&&t.default.createElement(n.default,{value:"loadmore",size:"small",onClick:c},"Load More"));l.displayName="Comments.List",l.propTypes={comments:e.default.arrayOf(e.default.object),onCommentApproveClick:e.default.func,onCommentRemoveClick:e.default.func,isOwner:e.default.bool,showLoadMore:e.default.bool,onLoadMoreClick:e.default.func},l.defaultProps={comments:[],onCommentApproveClick:()=>{},onCommentRemoveClick:()=>{},isOwner:!1,showLoadMore:!1,onLoadMoreClick:()=>{}};var r=l;exports.default=r}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-comments-component-comment","sm-component-button"]});
YUI.add("sm-comments-component-comment",(function(e){SM.currentModule="sm-comments-component-comment";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("sm-pretty-date")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),m=babelHelpers.interopRequireDefault(t("sm-link")),a=babelHelpers.interopRequireDefault(t("sm-panel-alert")),l=babelHelpers.interopRequireDefault(t("sm-comments-component-avatar")),o=babelHelpers.interopRequireDefault(t("sm-comments-component-rating")),i=t("sm-comments-constants");class u extends r.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",{showRemoveConfirmation:!1}),babelHelpers.defineProperty(this,"_renderUserAndTimestamp",()=>{const{comment:e}=this.props,t=e.userProfileURL;let n=r.default.createElement("h4",{className:"sm-comment-username"},e.userName);return t&&(n=r.default.createElement(m.default,{href:t},n)),r.default.createElement(r.default.Fragment,null,n,r.default.createElement("span",{className:"sm-text-mini"},(0,s.default)(e.timestamp)))}),babelHelpers.defineProperty(this,"_renderOwnerActions",()=>{const{comment:e}=this.props;return r.default.createElement("div",{className:"sm-comment-owner-actions"},e.status===i.STATUS_PENDING&&r.default.createElement(n.default,{onClick:this._onApproveClick,"data-value":"approve",noChrome:!0},r.default.createElement("span",{className:"sm-label-small"},"Approve")),r.default.createElement(n.default,{onClick:this._onRemoveClick,"data-value":"remove",noChrome:!0},r.default.createElement("span",{className:"sm-label-small"},"Remove")))}),babelHelpers.defineProperty(this,"_onApproveClick",()=>{const{onApproveClick:e,comment:t}=this.props;e(t.uri)}),babelHelpers.defineProperty(this,"_onRemoveClick",()=>{this.setState({showRemoveConfirmation:!0})}),babelHelpers.defineProperty(this,"_onConfirmRemove",()=>{const{onRemoveClick:e,comment:t}=this.props;e(t.uri),this.setState({showRemoveConfirmation:!1})}),babelHelpers.defineProperty(this,"_onCancelRemove",()=>{this.setState({showRemoveConfirmation:!1})})}render(){const{isOwner:e,comment:t}=this.props;return r.default.createElement("li",{className:"sm-comment-listitem"},r.default.createElement("div",{className:"sm-comment-listitem-header sm-flex sm-flex-items-center"},r.default.createElement("div",{className:"sm-comment-listitem-avatar"},r.default.createElement(l.default,{profileURL:t.userProfileURL,profileImageURL:t.userProfileImageURL})),r.default.createElement("div",{className:"sm-comment-listitem-label"},this._renderUserAndTimestamp())),r.default.createElement("div",{className:"sm-comment-listitem-comment"},r.default.createElement("p",{className:"sm-comment-text",dangerouslySetInnerHTML:{__html:t.text}})),r.default.createElement("div",{className:"sm-comment-listitem-footer sm-flex"},t.rating?r.default.createElement(o.default,{rating:t.rating}):null,e&&this._renderOwnerActions()),this.state.showRemoveConfirmation&&r.default.createElement(a.default,{title:"Remove Comment?",confirmLabel:"Remove Comment",onConfirm:this._onConfirmRemove,onCancel:this._onCancelRemove,message:"This comment is about to be permanently deleted. Once you delete it, it's gone for good."}))}}exports.default=u,babelHelpers.defineProperty(u,"displayName","Comments.Comment"),babelHelpers.defineProperty(u,"propTypes",{comment:e.default.shape({uri:e.default.string.isRequired,userName:e.default.string.isRequired,userProfileURL:e.default.string,userProfileImageURL:e.default.string,text:e.default.string.isRequired,timestamp:e.default.string.isRequired,rating:e.default.oneOf(i.RATINGS),status:e.default.oneOf([i.STATUS_PENDING,i.STATUS_APPROVED]).isRequired}).isRequired,onApproveClick:e.default.func,onRemoveClick:e.default.func}),babelHelpers.defineProperty(u,"defaultProps",{comment:{uri:"",userName:"",userProfileURL:"",userProfileImageURL:"",text:"",timestamp:"",rating:0,status:i.STATUS_PENDING},onApproveClick:()=>{},onRemoveClick:()=>{}})}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-pretty-date","sm-component-button","sm-link","sm-comments-component-avatar","sm-comments-component-rating","sm-comments-constants","sm-panel-alert"]});
YUI.add("sm-comments-component-login-buttons",(function(e){SM.currentModule="sm-comments-component-login-buttons";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-icon")),u=babelHelpers.interopRequireDefault(t("sm-page")),s=babelHelpers.interopRequireDefault(t("sm-uri-deprecated"));const{ssl:a,customDomain:r}=SM.env.host,i=({loginButtonsLoaded:e,onSmugMugLoginClick:t})=>{const i={nodeId:u.default.nodeId};r&&(i.customDomain=!0);const m="https://".concat(a,"/frame/sociallogin?").concat(s.default.stringifyQuery(i));return o.default.createElement("div",{className:"sm-comments-login-buttons sm-flex"},o.default.createElement("div",{className:"sm-nui"},o.default.createElement(n.default,{skin:n.default.SKIN_SECONDARY,size:n.default.SIZE_MEDIUM,className:"sm-comments-sm-login-button",onClick:t},o.default.createElement(l.default,{name:"SmugMug",size:l.default.SIZE_LARGE}))),o.default.createElement("iframe",{style:{visibility:e?"visible":"hidden"},frameBorder:"0",width:e?"200":"0",height:"48",src:m}))};i.displayName="Comments.LoginButtons",i.propTypes={loginButtonsLoaded:e.default.bool,onSmugMugLoginClick:e.default.func.isRequired},i.defaultProps={loginButtonsLoaded:!1};var m=i;exports.default=m}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-icon","sm-page","sm-uri-deprecated"]});
YUI.add("sm-comments-component-login",(function(e){SM.currentModule="sm-comments-component-login";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireWildcard(t("react")),n=babelHelpers.interopRequireDefault(t("sm-dom")),s=babelHelpers.interopRequireDefault(t("sm-component-busy")),l=babelHelpers.interopRequireDefault(t("sm-comments-component-login-buttons"));const r="https://".concat(SM.env.host.ssl);class i extends o.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_onSmugMugLoginClick",()=>{n.default.doc.location.href="/login?goTo="+n.default.doc.location.href}),babelHelpers.defineProperty(this,"_onWindowMessage",({origin:e,data:t})=>{let o,{on3rdPartyLogin:n,onLoginButtonsLoaded:s}=this.props;if(e===r){try{o=JSON.parse(t)}catch(e){return}switch(o.type){case"login":s();break;case"profile":{const{profileImageURL:e,name:t,serviceId:s,id:l}=o.data;n({profileImageURL:e,name:t,serviceID:s,socialID:l});break}}}})}componentDidMount(){n.default.win.addEventListener("message",this._onWindowMessage)}componentWillUnmount(){n.default.win.removeEventListener("message",this._onWindowMessage)}render(){const e=this.props.loginButtonsLoaded;return o.default.createElement("div",{className:"sm-comments-login-container sm-flex sm-flex-items-center sm-flex-justify-between"},o.default.createElement("p",{className:"sm-comments-login-label"},"Sign in to comment "),o.default.createElement("div",{className:"sm-comments-login-buttons-container sm-flex sm-flex-items-center"},o.default.createElement(l.default,{loginButtonsLoaded:e,onSmugMugLoginClick:this._onSmugMugLoginClick}),!e&&o.default.createElement(s.default,{className:"sm-comments-login-busy"})))}}exports.default=i,babelHelpers.defineProperty(i,"displayName","Comments.Comment"),babelHelpers.defineProperty(i,"propTypes",{loginButtonsLoaded:e.default.bool,onLoginButtonsLoaded:e.default.func.isRequired,on3rdPartyLogin:e.default.func.isRequired}),babelHelpers.defineProperty(i,"defaultProps",{loginButtonsLoaded:!1})}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-dom","sm-component-busy","sm-comments-component-login-buttons"]});
YUI.add("sm-comments-component-paginated-comment-list",(function(e){SM.currentModule="sm-comments-component-paginated-comment-list";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-comments-component-comment-list"));class r extends o.default.Component{componentDidMount(){let{onFetchComments:e}=this.props;e()}UNSAFE_componentWillReceiveProps({onFetchComments:e,parentResource:t}){this.props.parentResource!==t&&e()}render(){return o.default.createElement(n.default,this.props)}}exports.default=r,babelHelpers.defineProperty(r,"displayName","Comments.PaginatedCommentList"),babelHelpers.defineProperty(r,"propTypes",{onCommentApproveClick:e.default.func,onCommentRemoveClick:e.default.func,onFetchComments:e.default.func,onLoadMoreClick:e.default.func,parentResource:e.default.object})}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-comments-component-comment-list"]});
YUI.add("sm-comments-component-rating-input",(function(e){SM.currentModule="sm-comments-component-rating-input";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-icon")),a=t("sm-comments-constants");const s=a.RATINGS.filter(e=>e),l=({rating:e,onStarClick:t})=>{let a=s.map(a=>{let s=a<=e,l=s?"Star":"StarOutlined";return r.default.createElement(n.default,{key:"sm-comment-add-star-".concat(a),name:l,size:n.default.SIZE_SMALL,"data-active":s||null,onClick:()=>{t(a)}})}).reverse();return r.default.createElement("div",{className:"sm-comment-add-stars sm-flex sm-flex-row-reverse"},a)};l.displayName="Comments.RatingInput",l.propTypes={rating:e.default.oneOf(a.RATINGS).isRequired,onStarClick:e.default.func},l.defaultProps={rating:0};var u=l;exports.default=u}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-icon","sm-comments-constants"]});
YUI.add("sm-comments-component-rating",(function(e){SM.currentModule="sm-comments-component-rating";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-icon"));const n=({rating:e})=>{let t=[];for(let n=1;n<=5;n++){let l=n<=e?"Star":"StarOutlined";t.push(r.default.createElement(a.default,{name:l,size:a.default.SIZE_SMALL,key:n}))}return r.default.createElement("div",{className:"sm-comment-listitem-rating sm-flex"},t)};n.displayName="Comments.Rating",n.propTypes={rating:e.default.number},n.defaultProps={rating:0};var l=n;exports.default=l}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-icon"]});
YUI.add("sm-comments-constants",(function(e){SM.currentModule="sm-comments-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.COMMENT_MAX_CHARACTERS=exports.MAX_RATING=exports.RATINGS=exports.STATUS_APPROVED=exports.STATUS_PENDING=exports.PAGE_SIZE=exports.EXPANSION_NAME_MAP=void 0;exports.EXPANSION_NAME_MAP={Image:"ImageComments",AlbumImage:"ImageComments",Node:"NodeComments"};exports.PAGE_SIZE=10;exports.STATUS_PENDING="Pending";exports.STATUS_APPROVED="Approved";exports.RATINGS=[0,1,2,3,4,5];exports.MAX_RATING=5;exports.COMMENT_MAX_CHARACTERS=6e4}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-comments-login-container",(function(e){SM.currentModule="sm-comments-login-container";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o("react-redux"),n=o("sm-comments-selectors"),t=o("sm-comments-actions"),r=babelHelpers.interopRequireDefault(o("sm-comments-component-login"));var s=(0,e.connect)((e,o)=>{const t=(0,n.getCommentsTreeByResource)(e,o.parentResource);return{loginButtonsLoaded:t&&t.loginButtonsLoaded}},(e,o)=>{let{parentResource:n}=o;return{onLoginButtonsLoaded:()=>{e((0,t.loginButtonsLoaded)(n))},on3rdPartyLogin:o=>{e((0,t.login)(o))}}})(r.default);exports.default=s}(),SM.currentModule=null}),"",{requires:["react-redux","sm-comments-selectors","sm-comments-actions","sm-comments-component-login"]});
YUI.add("sm-comments-paginated-comment-list-container",(function(e){SM.currentModule="sm-comments-paginated-comment-list-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),o=babelHelpers.interopRequireDefault(t("sm-page")),n=t("sm-comments-actions"),m=t("sm-comments-selectors"),r=babelHelpers.interopRequireDefault(t("sm-comments-component-paginated-comment-list"));var s=(0,e.connect)((e,t)=>{const{parentResource:n}=t,r=(0,m.getCommentsTreeByResource)(e,n);if(!r)return t;const{items:s,totalResources:a,paginator:c,paginatorStart:i}=r;return{comments:s.map(e=>({uri:e.get("Uri"),userName:e.get("Name"),userProfileURL:e.get("ProfileURL"),userProfileImageURL:e.get("ProfileImageURL"),text:e.get("Comment"),timestamp:e.get("Date"),rating:e.get("Rating"),status:e.get("Status")})),isOwner:o.default.isOwnerOrAdmin({includeAssistants:!1}),showLoadMore:c&&i<=a}},(e,t)=>{const{parentResource:o}=t;return{onFetchComments:()=>{e((0,n.fetchComments)(o))},onCommentApproveClick:t=>{e((0,n.approveComment)(t,o))},onCommentRemoveClick:t=>{e((0,n.removeComment)(t,o))},onLoadMoreClick:()=>{e((0,n.getNextPage)(o))}}})(r.default);exports.default=s}(),SM.currentModule=null}),"",{requires:["react-redux","sm-page","sm-comments-actions","sm-comments-selectors","sm-comments-component-paginated-comment-list"]});
YUI.add("sm-comments-reducers",(function(e){SM.currentModule="sm-comments-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=function(e={},r){let{comments:t={}}=e;for(let e of[o,a])t=e(t,r);return{...e,comments:t}},exports._commentsUser=exports._comments=void 0;var e=r("sm-comments-action-types");const t=(r=[],t)=>{switch(t.type){case e.ADD_COMMENT_SUCCESS:return[t.commentResource,...r];case e.REMOVE_COMMENT_SUCCESS:return r.filter(e=>e.get("Uri")!==t.uri);case e.APPROVE_COMMENT_SUCCESS:return r.map(e=>e.get("Uri")===t.uri?t.approvedCommentResource:e);case e.GET_NEXT_PAGE_SUCCESS:return[...r,...t.paginator.resources];default:return r}},s=(r={paginatorStart:1,resourcesToRefresh:[],isFetching:!1,items:[],currentRating:0,loginButtonsLoaded:!1,totalResources:0},s)=>{switch(s.type){case e.ADD_COMMENT_SUCCESS:return{...r,items:t(r.items,s),totalResources:r.totalResources+1,paginatorStart:r.paginatorStart+1,resourcesToRefresh:Array.from(new Set([...r.resourcesToRefresh,s.parentResource.get("Uri")]))};case e.APPROVE_COMMENT_SUCCESS:return{...r,items:t(r.items,s),resourcesToRefresh:Array.from(new Set([...r.resourcesToRefresh,s.parentResource.get("Uri")]))};case e.REMOVE_COMMENT_SUCCESS:return{...r,items:t(r.items,s),totalResources:Math.max(r.totalResources-1,0),paginatorStart:Math.max(r.paginatorStart-1,1),resourcesToRefresh:Array.from(new Set([...r.resourcesToRefresh,s.parentResource.get("Uri")]))};case e.REQUEST_COMMENTS:return{...r,isFetching:!0};case e.RECEIVE_COMMENTS:{const e=s.paginator,t=e.resources;return{...r,items:t,isFetching:!1,paginator:e,paginatorStart:t.length+1,totalResources:e.totalResources,resourcesToRefresh:r.resourcesToRefresh.filter(e=>e!==s.parentResource.get("Uri"))}}case e.GET_NEXT_PAGE_SUCCESS:return{...r,paginator:s.paginator,paginatorStart:r.paginatorStart+s.paginator.resources.length+1,items:t(r.items,s)};case e.SET_RATING:return{...r,currentRating:s.rating};case e.LOGIN_BUTTONS_LOADED:return{...r,loginButtonsLoaded:!0};default:return r}},o=(r={},t)=>{switch(t.type){case e.ADD_COMMENT_SUCCESS:case e.REMOVE_COMMENT_SUCCESS:case e.APPROVE_COMMENT_SUCCESS:case e.REQUEST_COMMENTS:case e.RECEIVE_COMMENTS:case e.GET_NEXT_PAGE_SUCCESS:case e.SET_RATING:case e.LOGIN_BUTTONS_LOADED:{const e=t.parentResource,o=e.get("Uri");return{...r,[o]:{...s(r[o],t),parentResource:e}}}default:return r}},a=(r={},t)=>{let{user:{loggedIn:s=!1,...o}={}}=r;switch(t.type){case e.LOGIN:return{...r,user:{loggedIn:!0,...t.user}};default:return{...r,user:{loggedIn:s,...o}}}};const n=o;exports._comments=n;const c=a;exports._commentsUser=c}(),SM.currentModule=null}),"",{requires:["sm-comments-action-types"]});
YUI.add("sm-comments-selectors",(function(e){SM.currentModule="sm-comments-selectors";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCommentsTreeByResource=function(e={},t){let{ui:{comments:r}={}}=e;return r[t.get("Uri")]},exports.getCommentResourceByUri=function(e={},t){return e.items.find(e=>e.get("Uri")===t)},exports.getCommentsUser=function(e={}){let{ui:{comments:{user:t={}}={}}={}}=e;return t}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-comments",(function(e){SM.currentModule="sm-comments";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),r=t("react-redux"),a=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("sm-redux-store")),u=babelHelpers.interopRequireDefault(t("sm-smuglog")),m=babelHelpers.interopRequireDefault(t("sm-comments-add-comment-container")),o=babelHelpers.interopRequireDefault(t("sm-comments-paginated-comment-list-container"));const l=({resource:t,className:u})=>e.default.createElement(r.Provider,{store:s.default},e.default.createElement("div",{className:(0,a.default)(["sm-comments",u])},e.default.createElement(m.default,{parentResource:t}),e.default.createElement(o.default,{parentResource:t})));l.displayName="Comments.Root";l.propTypes={resource:(e,t)=>{let r=e[t];if(!r.isSmugMugResource)return u.default.error("Comments",{message:"'".concat(t,"' must be a Resource"),prop:r})}};var n=l;exports.default=n}(),SM.currentModule=null}),"",{requires:["classnames","react","react-redux","sm-redux-store","sm-smuglog","sm-comments-add-comment-container","sm-comments-paginated-comment-list-container"]});
YUI.add("sm-component-adaptiveformfield",(function(e){SM.currentModule="sm-component-adaptiveformfield";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("react")),l=babelHelpers.interopRequireDefault(r("classnames"));const t=e=>{let r=a.default.Children.only(e.children),t=r.props.id||"",d=!r.props.value,{className:s,label:i,error:o,description:u,...n}=e,p=null;return o?p="error":u&&(p="description"),a.default.createElement("div",babelHelpers.extends({className:(0,l.default)("sm-form-field-adaptive",s),"data-empty-field":d,"data-error-field":!!o||null,"data-message-type":p},n),r,o&&a.default.createElement("div",{className:"sm-form-field-adaptive-msg"},o)||u&&a.default.createElement("div",{className:"sm-form-field-adaptive-msg"},u),a.default.createElement("label",{htmlFor:t},i))};t.propTypes={label:e.default.string.isRequired,error:e.default.string,description:e.default.string},t.displayName="AdaptiveFormField";var d=t;exports.default=d}(),SM.currentModule=null}),"",{requires:["prop-types","react","classnames"]});
YUI.add("sm-component-adjustable-crop-mask-helpers",(function(e){SM.currentModule="sm-component-adjustable-crop-mask-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adjustCoords=function(e,t,r,o){let u=r.setTop,a=r.setLeft,n=r.anchorXY,s=[a?n[0]-e:e-n[0],u?n[1]-t:t-n[1]],M=Math.sqrt(Math.pow(Math.max(0,s[0]),2)+Math.pow(Math.max(0,s[1]),2));t=Math.round(M*r.angle),e=Math.round(t*o),u&&(t*=-1);a&&(e*=-1);return[e+n[0],t+n[1]]}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-component-adjustable-crop-mask",(function(e){SM.currentModule="sm-component-adjustable-crop-mask";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("react-dom")),o=babelHelpers.interopRequireDefault(t("sm-component-crop-mask")),r=babelHelpers.interopRequireDefault(t("sm-dom")),n=t("sm-component-adjustable-crop-mask-helpers");const h=r.default.getAbsoluteBoundingRect;class d extends a.Component{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_forceReflow",()=>{this._reflowRef.style.display="none",this._reflowRef.offsetHeight,this._reflowRef.style.display="inline"}),babelHelpers.defineProperty(this,"_bindDragDrop",()=>{let t=e.one(s.default.findDOMNode(this._maskRef)),i={container:t,dragSelector:".sm-move-handle, .sm-resize-handle"};"number"==typeof this.props.touchDelay&&(i.touchDelay=this.props.touchDelay),this._dd=new e.DragDrop(i),this._handles=[t.delegate("gesturemovestart",this._handleDragStart,".sm-resize-handle",this),this._dd.on("drag",this._handleDrag,this),this._dd.after("dragend",this._handleDragEnd,this)]}),babelHelpers.defineProperty(this,"_bindScrollPrevention",()=>{this._onTouchmove=e=>{this._touched&&e.preventDefault()},this._touched=0,this._onTouchstart=({changedTouches:e})=>{this._touched+=e.length},this._onTouchend=({changedTouches:e})=>{this._touched-=e.length},this._windowRef.addEventListener("touchstart",this._onTouchstart),this._windowRef.addEventListener("touchend",this._onTouchend),this._windowRef.addEventListener("touchcancel",this._onTouchend),r.default.win.addEventListener("touchmove",this._onTouchmove)}),babelHelpers.defineProperty(this,"_detachDragDrop",()=>{this._dd&&(new e.EventHandle(this._handles).detach(),this._dd.destroy())}),babelHelpers.defineProperty(this,"_detachScrollPrevention",()=>{this._windowRef.removeEventListener("touchstart",this._onTouchstart),this._windowRef.removeEventListener("touchend",this._onTouchend),this._windowRef.removeEventListener("touchcancel",this._onTouchend),r.default.win.removeEventListener("touchmove",this._touchmoveSub)}),babelHelpers.defineProperty(this,"_handleDragStart",e=>{this._resizing=e.target._node.className.match(/handle-([trbl]{1,2})/)[1]}),babelHelpers.defineProperty(this,"_handleDrag",e=>{if(e.preventDefault(),this.props.disableCropping)return;if(!this._dragData){let t;s.default.findDOMNode(this._maskRef).className+=" sm-adjusting-crop",this._resizing?(t=this._handleRefs[this._resizing],this._initDragData(e,t)):(t=e.dragNode,this._initDragData(e,t.getDOMNode()))}let t,i,a,o,r,h,d=this._dragData,l=d.bounds,m=d.borders,f=this._resizing&&this.props.aspectRatio,p=e.state.pageXY[0]+d.offsetXY[0],c=e.state.pageXY[1]+d.offsetXY[1];d.angle&&(t=(0,n.adjustCoords)(p,c,d,f),p=t[0],c=t[1]),i=d.setTop?Math.max(l.minY,Math.min(l.maxY,c))-d.maskRect.top:m.top,a=d.setRight?d.rightOffset-Math.max(l.minX,Math.min(l.maxX,p)):m.right,o=d.setBottom?d.bottomOffset-Math.max(l.minY,Math.min(l.maxY,c)):m.bottom,r=d.setLeft?Math.max(l.minX,Math.min(l.maxX,p))-d.maskRect.left:m.left,h={top:Math.max(0,Math.round(i)),right:Math.max(0,Math.round(a)),bottom:Math.max(0,Math.round(o)),left:Math.max(0,Math.round(r))},d.edgeResize&&this._constrainToAspectRatio(h),this._updateMask(h)}),babelHelpers.defineProperty(this,"_handleDragEnd",()=>{let e=s.default.findDOMNode(this._maskRef),t={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight},i=this._dragData;this._resizing=!1,this._dragData=null,e.className=e.className.replace(/\s+sm-adjusting-crop\b/g,""),t.top<0||t.left<0||t.width<=0||t.height<=0?this._updateMask(i.borders):this.props.onCropChange&&this.props.onCropChange(t)})}componentDidMount(){this._bindDragDrop(),this._bindScrollPrevention()}componentDidUpdate(){this._forceReflow()}componentWillUnmount(){this._detachDragDrop(),this._detachScrollPrevention()}render(){let{children:e,disableCropping:t,height:i,innerMaskContent:s,left:r,maskHeight:n,maskWidth:h,perimeterHeight:d,perimeterIsRound:l,perimeterWidth:m,top:f,width:p}=this.props;return a.default.createElement(o.default,{ref:e=>this._maskRef=e,maskWidth:h,maskHeight:n,top:f,left:r,width:p,height:i,perimeterWidth:m,perimeterHeight:d,perimeterIsRound:l,showGrid:!0,innerMaskContent:s},a.default.createElement("div",{ref:e=>this._windowRef=e,className:"sm-move-handle","data-disable-cropping":t},a.default.createElement("div",{ref:e=>this._storeHandleRef("tl",e),className:"sm-resize-handle sm-resize-handle-tl"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("t",e),className:"sm-resize-handle sm-resize-handle-t"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("tr",e),className:"sm-resize-handle sm-resize-handle-tr"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("r",e),className:"sm-resize-handle sm-resize-handle-r"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("br",e),className:"sm-resize-handle sm-resize-handle-br"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("b",e),className:"sm-resize-handle sm-resize-handle-b"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("bl",e),className:"sm-resize-handle sm-resize-handle-bl"}),a.default.createElement("div",{ref:e=>this._storeHandleRef("l",e),className:"sm-resize-handle sm-resize-handle-l"}),e,a.default.createElement("span",{ref:e=>this._reflowRef=e})))}_storeHandleRef(e,t){this._handleRefs||(this._handleRefs={}),this._handleRefs[e]=t}_constrainToAspectRatio(e){let t,i=this._dragData,a=this.props,s=a.aspectRatio,o=a.maskWidth-e.left-e.right,r=a.maskHeight-e.top-e.bottom;i.setTop||i.setBottom?(t=o-Math.floor(r*s),e.left=Math.max(0,e.left+Math.floor(t/2)),e.right=Math.max(0,e.right+Math.ceil(t/2))):(t=r-Math.floor(o/s),e.top=Math.max(0,e.top+Math.floor(t/2)),e.bottom=Math.max(0,e.bottom+Math.ceil(t/2)))}_updateMask({top:e,right:t,bottom:i,left:a}){s.default.findDOMNode(this._maskRef).style.borderWidth=[e,t,i,a].join("px ")+"px",this._forceReflow()}_initDragData(e,t){let i=s.default.findDOMNode(this._maskRef),a=h(i),o=h(t),r={maskRect:a,dragRect:o,offsetXY:[o.left-e.state.startXY[0],o.top-e.state.startXY[1]],borders:{top:i.clientTop,right:i.offsetWidth-i.clientWidth-i.clientLeft,bottom:i.offsetHeight-i.clientHeight-i.clientTop,left:i.clientLeft}};this._resizing?this._initResizeData(r):this._initMoveData(r),this._dragData=r}_initMoveData(e){let t=e.maskRect,i=e.dragRect;e.bounds={minX:t.left,maxX:t.right-i.width,minY:t.top,maxY:t.bottom-i.height},e.rightOffset=t.right-e.dragRect.width,e.bottomOffset=t.bottom-e.dragRect.height,e.setTop=!0,e.setRight=!0,e.setBottom=!0,e.setLeft=!0}_initResizeData(e){let t=this._resizing;e.windowRect=h(s.default.findDOMNode(this._windowRef)),e.rightOffset=e.maskRect.right,e.bottomOffset=e.maskRect.bottom,e.setTop=t.indexOf("t")>-1,e.setRight=t.indexOf("r")>-1,e.setBottom=t.indexOf("b")>-1,e.setLeft=t.indexOf("l")>-1,e.setRight&&(e.offsetXY[0]+=e.dragRect.width),e.setBottom&&(e.offsetXY[1]+=e.dragRect.height),this.props.aspectRatio?t.length>1?this._initCornerResizeData(e):this._initEdgeResizeData(e):this._initSimpleResize(e)}_initSimpleResize(e){let t=this.props.minWidth,i=this.props.minHeight,a=e.windowRect,s=e.maskRect;e.bounds={minX:e.setLeft?s.left:a.left+t,maxX:e.setLeft?a.right-t:s.right,minY:e.setTop?s.top:a.top+i,maxY:e.setTop?a.bottom-i:s.bottom}}_initCornerResizeData(e){let t,i,a,s,o=this.props,r=o.aspectRatio,n=o.minWidth,h=o.minHeight,d=e.windowRect,l=e.maskRect,m=e.borders,f=e.setTop,p=e.setLeft;e.anchorXY=[p?l.right-m.right-n:l.left+m.left+n,f?l.bottom-m.bottom-h:l.top+m.top+h],e.angle=Math.sin(Math.atan(1/r)),t=p?m.right:m.left,i=f?m.bottom:m.top,a=(l.height-i)*r,s=(l.width-t)/r,e.bounds={minX:p?Math.max(l.left,d.right-a):d.left+n,maxX:p?d.right-n:Math.min(l.right,d.left+a),minY:f?Math.max(l.top,d.bottom-s):d.top+h,maxY:f?d.bottom-h:Math.min(l.bottom,d.top+s)}}_initEdgeResizeData(e){let t,i=this.props,a=i.aspectRatio,s=i.minWidth,o=i.minHeight,r=e.windowRect,n=e.maskRect,h=e.borders;e.edgeResize=!0,e.setTop||e.setBottom?(t=(n.width-Math.abs(h.left-h.right))/a,e.bounds={minY:e.setTop?Math.max(n.top,r.bottom-t):r.top+o,maxY:e.setTop?r.bottom-o:Math.min(n.bottom,r.top+t)}):(t=(n.height-Math.abs(h.top-h.bottom))*a,e.bounds={minX:e.setLeft?Math.max(n.left,r.right-t):r.left+s,maxX:e.setLeft?r.right-s:Math.min(n.right,r.left+t)})}}babelHelpers.defineProperty(d,"displayName","AdjustableCropMask"),babelHelpers.defineProperty(d,"propTypes",{maskWidth:i.default.number,maskHeight:i.default.number,top:i.default.number,left:i.default.number,width:i.default.number,height:i.default.number,aspectRatio:i.default.number,minWidth:i.default.number,minHeight:i.default.number,perimeterWidth:i.default.number,perimeterHeight:i.default.number,perimeterIsRound:i.default.bool,sku:i.default.string,vendor:i.default.string,touchDelay:i.default.number,onCropChange:i.default.func,disableCropping:i.default.bool,innerMaskContent:i.default.element,children:i.default.node}),babelHelpers.defineProperty(d,"defaultProps",{minWidth:50,minHeight:50,disableCropping:!1});var l=d;exports.default=l}(),SM.currentModule=null}),"",{requires:["prop-types","react","react-dom","sm-component-crop-mask","sm-dom","sm-component-adjustable-crop-mask-helpers","gallery-sm-dragdrop"]});
YUI.add("sm-component-busy",(function(e){SM.currentModule="sm-component-busy";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),s=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("classnames"));const n=e=>{let{className:r,size:t,transparentBackground:l}=e,u=(0,a.default)(["sm-progress-spinner","sm-progress-spinner-visible",{"sm-progress-spinner-transparent":l},{"sm-progress-spinner-large":t===n.SIZE_LARGE}].concat(r));return s.default.createElement("div",{className:u})};n.SIZE_LARGE="large",n.SIZE_SMALL="small",n.displayName="BusyIndicator",n.defaultProps={size:n.SIZE_SMALL,transparentBackground:!1},n.propTypes={transparentBackground:e.default.bool,size:e.default.oneOf([n.SIZE_LARGE,n.SIZE_SMALL])};var t=n;exports.default=t}(),SM.currentModule=null}),"",{requires:["react","classnames"]});
YUI.add("sm-component-button",(function(e){SM.currentModule="sm-component-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-component-icon")),u=babelHelpers.interopRequireDefault(t("sm-icon"));const o=l.default.forwardRef((t,a)=>{let{children:r,className:s,href:i,noChrome:d,shape:f,size:S,skin:c,value:p,...E}=t,m=["sm-button",{"sm-button-nochrome":d},"sm-button-size-".concat(S),"sm-button-skin-".concat(c),s],b=r.type===u.default||r.type===n.default;(f||b)&&m.push("sm-button-".concat(f||o.SHAPE_SQUARE));let I=i?"a":"button";return l.default.createElement(I,babelHelpers.extends({className:(0,e.default)(m),"data-value":p||null,href:i||null,ref:a},E),r)});o.displayName="Button",o.SIZE_LARGE="huge",o.SIZE_MEDIUM="large",o.SIZE_SMALL="small",o.SKIN_ACCENT="accent",o.SKIN_PRIMARY="submit",o.SKIN_SECONDARY="default",o.SKIN_NONE="none",o.SKIN_DESTRUCTIVE="destructive",o.SHAPE_SQUARE="square",o.SHAPE_CIRCLE="circle",o.propTypes={className:a.default.oneOfType([a.default.arrayOf(a.default.string),a.default.string]),disabled:a.default.bool,href:a.default.string,noChrome:a.default.bool,shape:a.default.oneOf([o.SHAPE_SQUARE,o.SHAPE_CIRCLE]),size:a.default.oneOf([o.SIZE_SMALL,o.SIZE_MEDIUM,o.SIZE_LARGE]),skin:a.default.oneOf([o.SKIN_ACCENT,o.SKIN_DESTRUCTIVE,o.SKIN_NONE,o.SKIN_PRIMARY,o.SKIN_SECONDARY]),title:a.default.string,type:a.default.oneOf(["button","submit"]),value:a.default.string},o.defaultProps={disabled:!1,noChrome:!1,size:o.SIZE_MEDIUM,skin:o.SKIN_SECONDARY,type:"button"};var r=o;exports.default=r}(),SM.currentModule=null}),"",{requires:["classnames","prop-types","react","sm-component-icon","sm-icon"]});
YUI.add("sm-component-buttongroup",(function(e){SM.currentModule="sm-component-buttongroup";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("classnames"));let u=(0,babelHelpers.interopRequireDefault(t("create-class")).default)({propTypes:{className:r.default.string,size:r.default.oneOf(["large","small"])},getDefaultProps:function(){return{className:"",size:"large"}},render:function(){let e=this.props,t=(0,a.default)("sm-button-group","sm-button-group-size-"+e.size,"yui3-g"),r=l.default.Children.toArray(e.children).filter(e=>!!e),u=r.length;return r=r.map(t=>{let r="yui3-u-1";return u>1&&(r+="-".concat(u)),l.default.cloneElement(t,{className:(0,a.default)(r,t.props.className),size:e.size})}),l.default.createElement("div",{className:(0,a.default)(t,e.className)},r)}});e.namespace("SM.Component").ButtonGroup=u;var s=u;exports.default=s}(),SM.currentModule=null}),"",{requires:["classnames","sm-component-button","create-class"]});
YUI.add("sm-component-checkbox",(function(e){SM.currentModule="sm-component-checkbox";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),c=babelHelpers.interopRequireDefault(t("sm-icon"));class n extends a.default.PureComponent{constructor(...e){super(...e),this._onClick=this._onClick.bind(this)}render(){let t,{checked:l,children:n,className:r,indeterminate:s,...o}=this.props,i=(0,e.default)("sm-form-field-checkbox-item","sm-button","sm-button-nochrome",r);n&&(t=a.default.createElement("span",{className:"sm-form-field-checkbox-label"},n));let u="Checkmark",d=l||s,m="false";return l?m="true":s&&(m="mixed",u="Minus"),a.default.createElement("button",babelHelpers.extends({},o,{type:"button",role:"checkbox","aria-checked":m,className:i,"data-selected":d,onClick:this._onClick}),a.default.createElement("span",{className:"sm-form-field-checkbox-icon-container"},a.default.createElement(c.default,{name:u,size:"small",className:"sm-form-field-checkbox-icon"})),t)}_onClick(){this.props.onChange(!this.props.checked)}}exports.default=n,n.propTypes={checked:l.default.bool.isRequired,indeterminate:l.default.bool,onChange:l.default.func},n.defaultProps={checked:!1,onChange:()=>{}}}(),SM.currentModule=null}),"",{requires:["classnames","sm","sm-icon","react"]});
YUI.add("sm-component-collapsible-heading",(function(e){SM.currentModule="sm-component-collapsible-heading";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),a=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("sm-icon"));const r=e.default.forwardRef((l,a)=>{let{children:r,open:n,onClick:o,"data-testid":i}=l;return e.default.createElement("div",{className:"sm-collapsible-heading sm-flex sm-flex-items-center",onClick:o,ref:a,"data-open":n,"data-testid":i},e.default.createElement(t.default,{className:"sm-collapsible-heading-icon",name:"AngleBracketRightSlim"}),r)});r.displayName="Collapsible.CollapsibleHeading",r.propTypes={onClick:a.default.func.isRequired,open:a.default.bool},r.defaultProps={open:!1};var n=r;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon"]});
YUI.add("sm-component-collapsible",(function(e){SM.currentModule="sm-component-collapsible";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("sm-component-collapsible-heading")),n=babelHelpers.interopRequireDefault(t("sm-expandable-hoc")),i=babelHelpers.interopRequireDefault(t("sm-analytics"));const r=(0,n.default)("div","height",{toggle:!0});class o extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"state",{open:this.props.initiallyOpen}),babelHelpers.defineProperty(this,"_headerRef",e.default.createRef()),babelHelpers.defineProperty(this,"toggle",()=>{let{initiallyOpen:e,onToggleOpen:t,onToggleClose:l,trackingCategory:a,trackingAction:s,trackingLabel:n}=this.props;a&&this.state.open===e&&i.default.Tracker.createEvent(a,s,{label:n}).log(),this.state.open?l&&l():t&&t(),this.setState({open:!this.state.open})})}render(){let{open:t}=this.state,{children:l,className:n,headingItemsClassName:i,headingItems:o,title:d,"data-testid":p,"heading-data-testid":u,panelDataTestId:c}=this.props,f=(0,a.default)(["sm-collapsible",n]),m=(0,a.default)({"sm-collapsible-heading-items-list":!0,"sm-flex":!0,"sm-flex-items-center":!i,[i]:!0});return e.default.createElement(r,{className:f,collapsedNodeRef:this._headerRef,open:t,"data-open":t,"data-testid":p},e.default.createElement(s.default,{onClick:this.toggle,open:t,ref:this._headerRef,"data-testid":u},e.default.createElement("ul",{className:m},d&&e.default.createElement("li",{className:"sm-collapsible-heading-item"},d),o&&o.map((t,l)=>e.default.createElement("li",{className:"sm-collapsible-heading-item",key:l},t)))),e.default.createElement("div",{className:"sm-collapsible-body","data-testid":c},l))}}exports.default=o,babelHelpers.defineProperty(o,"displayName","Collapsible"),babelHelpers.defineProperty(o,"propTypes",{initiallyOpen:l.default.bool,title:l.default.oneOfType([l.default.element,l.default.string]),headingItemsClassName:l.default.string,headingItems:l.default.arrayOf(l.default.element),"data-testid":l.default.string,"heading-data-testid":l.default.string,panelDataTestId:l.default.string,trackingCategory:l.default.string,trackingAction:l.default.string,trackingLabel:l.default.string,onToggleOpen:l.default.func,onToggleClose:l.default.func}),babelHelpers.defineProperty(o,"defaultProps",{initiallyOpen:!1,onToggleOpen:null,onToggleClose:null})}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-component-collapsible-heading","sm-expandable-hoc","react-transition-group","sm-analytics"]});
YUI.add("sm-component-crop-mask",(function(e){SM.currentModule="sm-component-crop-mask";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types"));class a extends e.PureComponent{render(){let t,{maskWidth:r,maskHeight:a,top:d,width:l,left:i,height:o,children:m,showGrid:s,perimeterHeight:n,perimeterWidth:u,perimeterIsRound:p,innerMaskContent:h}=this.props;return s&&(t=e.default.createElement("div",{className:"sm-crop-grid","data-perimeter-round":p},e.default.createElement("div",{className:"sm-crop-grid-horiz"}),e.default.createElement("div",{className:"sm-crop-grid-vert"}))),(u||n)&&(t=e.default.createElement("div",{className:"sm-crop-inner-mask"},e.default.createElement("div",{style:{width:Math.max(0,100-2*u)+"%",height:Math.max(0,100-2*n)+"%",top:Math.max(0,n)+"%",left:Math.max(0,u)+"%",borderRadius:p?"50%":0}},h,t))),e.default.createElement("div",{className:"sm-crop-mask",style:{width:r,height:a,borderTopWidth:Math.max(0,d),borderRightWidth:Math.max(0,r-l-i),borderBottomWidth:Math.max(0,a-o-d),borderLeftWidth:Math.max(0,i)}},t,m)}}exports.default=a,babelHelpers.defineProperty(a,"propTypes",{maskWidth:r.default.number,maskHeight:r.default.number,top:r.default.number,left:r.default.number,width:r.default.number,height:r.default.number,perimeterWidth:r.default.number,perimeterHeight:r.default.number,perimeterIsRound:r.default.bool,showGrid:r.default.bool,innerMaskContent:r.default.element,children:r.default.node}),babelHelpers.defineProperty(a,"defaultProps",{showGrid:!1}),babelHelpers.defineProperty(a,"displayName","CropMask")}(),SM.currentModule=null}),"",{requires:["react","prop-types"]});
YUI.add("sm-component-currency-amount",(function(e){SM.currentModule="sm-component-currency-amount";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("classnames")),l=babelHelpers.interopRequireDefault(r("sm-component-currency-symbol")),n=r("sm-currency-base");function s({amount:r,currency:t,showZeroCents:s,locale:u,allowDecimalOmission:o,className:c,...m}){if(!isFinite(r))return e.default.createElement("span",{className:"sm-amount sm-non-numeric-amount"},r);let i=n.supportedCurrencies[u]||n.supportedCurrencies[n.defaultLocale],d=i[t]||i[n.defaultCurrency];r=Math.round((100*r).toFixed(2))/100;let p=d.decimalPlaces;(!1===d.allowFraction||o&&r>=d.thresholdForDecimals||!s&&"00"===r.toFixed(2).split(".")[1])&&(p=0);let f=r.toFixed(p).split(".");f[0]=e.default.createElement("span",{key:"integer",className:"sm-integer-amount","data-testid":"sharedcurrency_dollar_text"},f[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.thousandsSeparator)),p?f[1]=e.default.createElement("span",{key:"fraction",className:"sm-decimal-amount","data-testid":"sharedcurrency_dollar_text"},d.decimalSeparator+f[1]):f.splice(1);let y=e.default.createElement(l.default,{key:"symbol",currency:t});return d.prefix?f.unshift(y):f.push(y),e.default.createElement("span",babelHelpers.extends({className:(0,a.default)("sm-currency-amount",c)},m),f)}s.displayName="Component.CurrencyAmount",s.propTypes={amount:t.default.number.isRequired,locale:t.default.string,currency:t.default.string,allowDecimalOmission:t.default.bool,showZeroCents:t.default.bool},s.defaultProps={locale:n.defaultLocale,currency:SM.env.buyerCurrency,allowDecimalOmission:!0,showZeroCents:!0}}(),SM.currentModule=null}),"",{requires:["classnames","lodash","react","react-dom","sm","sm-currency-base","sm-component-currency-symbol"]});
YUI.add("sm-component-currency-symbol",(function(e){SM.currentModule="sm-component-currency-symbol";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=babelHelpers.interopRequireDefault(r("react")),u=babelHelpers.interopRequireDefault(r("prop-types")),s=babelHelpers.interopRequireDefault(r("classnames")),n=r("sm-currency-base");const c=n.supportedCurrencies[n.defaultLocale];function l(r){let{currency:u,className:l,...t}=r,a=c[u]||c[n.defaultCurrency];return e.default.createElement("span",babelHelpers.extends({className:(0,s.default)("sm-currency-symbol",l)},t),a.prefix||a.suffix)}l.propTypes={currency:u.default.string},l.defaultProps={currency:SM.env.buyerCurrency},l.displayName="CurrencySymbol"}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-currency-base"]});
YUI.add("sm-component-dropdown-field",(function(e){SM.currentModule="sm-component-dropdown-field";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),l=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireWildcard(t("react")),n=babelHelpers.interopRequireDefault(t("react-dom")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),a=babelHelpers.interopRequireDefault(t("sm-dom")),i=babelHelpers.interopRequireDefault(t("sm-component-icon")),s=t("sm-component-select");const d=()=>{};class u extends o.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"buttonRef",o.default.createRef()),babelHelpers.defineProperty(this,"dropdownListRef",o.default.createRef()),babelHelpers.defineProperty(this,"_handleMouseOver",e=>{let t=-1,l=e.target;if(l){let e=a.default.closest(l,"li");if(!e)return;t=e.getAttribute("data-index")}this.props.onOptionHover(e,parseInt(t,10))}),babelHelpers.defineProperty(this,"_handleMouseClick",e=>{let t,l=e.currentTarget;t=l?l.getAttribute("data-index"):e.target.getAttribute("data-index"),t=parseInt(t,10),this.props.onOptionClick(e,t),this._focusSelectButton(),e.preventDefault()}),babelHelpers.defineProperty(this,"_onFallbackSelectionChange",e=>{let t=e.target;t&&(this.props.onOptionClick(e,t.value),this.props.onSelectionChange(t.value))}),this._populateInternalChildren(this.props)}componentDidUpdate(e){let{fallback:t,highlight:l,onSelectionChange:o,open:n,value:r}=this.props;t||e.open===n||this._focusSelectButton();let i=this.dropdownListRef&&this.dropdownListRef.current;if(!e.open&&n||e.highlight!==l){let e=a.default.querySelector('.sm-component-dropdown-option[data-index="'.concat(l,'"]'),i);e&&a.default.scrollIntoViewIfNeeded(e,!1)}if(e.value!==r&&!this.props.fallback){let e=a.default.querySelector('.sm-component-dropdown-option[data-index="'.concat(r,'"]'),i);if(e){let t=e.getAttribute("data-value");(t||""===t)&&o(t)}}}UNSAFE_componentWillReceiveProps(e){this._populateInternalChildren(e)}render(){return this.props.fallback?this._renderFallback():this._renderCustom()}_renderCustom(){let t,l=this.props,n=["sm-component-dropdown",l.className],a=["sm-form-field","sm-form-field-select-wrapper",{"sm-form-field-error":l.error},{"sm-nochrome":l.noChrome}],s=["sm-form-field-select","sm-flex-justify-start",{"sm-form-field-select-large":"large"===l.size}],u=["sm-form-field-select-arrow",{"sm-form-field-select-arrow-large":"large"===l.size}],p=this.internalChildren[this.props.value];return p&&(t=o.default.cloneElement(p,{onClick:d})),o.default.createElement("div",{className:(0,e.default)(n),style:{width:l.width}},o.default.createElement("div",{className:(0,e.default)(a)},o.default.createElement(r.default,{"aria-expanded":l.open,className:(0,e.default)(s),disabled:l.disabled,noChrome:!0,onBlur:l.onBlur,onFocus:l.onFocus,onKeyDown:l.onKeyDown,onMouseDown:this._onMouseDownButton,onMouseUp:l.onDropdownClick,ref:this.buttonRef,role:"combobox",size:l.size,tabIndex:0},t),o.default.createElement(i.default,{icon:"AngleBracketDown",className:(0,e.default)(u),size:l.size})),this.props.open&&this._renderList())}_renderFallback(){let{fallback:e,highlight:t,onDropdownClick:l,onKeyDown:n,onOptionClick:r,onOptionHover:a,onSelectionChange:i,defaultValue:d,children:u,value:p,...c}=this.props;return u=o.default.Children.map(u,e=>{let t="";return o.default.Children.forEach(e.props.children,e=>{"object"!=typeof e&&(t+=e)}),o.default.createElement(s.SelectOption,{disabled:e.props.disabled},t)}),o.default.createElement(s.Select,babelHelpers.extends({value:p,onChange:this._onFallbackSelectionChange},c),u)}_renderList(){let e=this.internalChildren.slice(),t=this.internalChildren[this.props.value];t&&(e[this.props.value]=o.default.cloneElement(t,{"data-highlight":!0}));let l=this.internalChildren[this.props.highlight];return l&&(e[this.props.highlight]=o.default.cloneElement(l,{"data-highlight":!0})),o.default.createElement("ul",{className:"sm-component-dropdown-list",role:"listbox",onMouseOver:this._handleMouseOver,ref:this.dropdownListRef},e)}_onMouseDownButton(e){e.preventDefault()}_focusSelectButton(){this.buttonRef.current&&(n.default.findDOMNode(this.buttonRef.current).focus(),this.props.onFocus())}_populateInternalChildren(e){let t=0;this.internalChildren&&e.children===this.props.children||(this.internalChildren=[],o.default.Children.forEach(e.children,e=>{let l;e&&(l=e.props.disabled?e:o.default.cloneElement(e,{onClick:this._handleMouseClick,"data-index":t,"data-value":e.props.value,key:t,role:"option"}),t++,this.internalChildren.push(l))}))}}exports.default=u,babelHelpers.defineProperty(u,"propTypes",{disabled:l.default.bool,fallback:l.default.bool,highlight:l.default.number,onDropdownClick:l.default.func,onKeyDown:l.default.func,onOptionClick:l.default.func,onOptionHover:l.default.func,onSelectionChange:l.default.func,size:l.default.oneOf(["small","large"]),value:l.default.oneOfType([l.default.number,l.default.string]),width:l.default.string}),babelHelpers.defineProperty(u,"defaultProps",{disabled:!1,fallback:!1,highlight:0,size:"small",value:0,width:"300px",onBlur:d,onFocus:d,onKeyDown:d,onOptionHover:d,onSelectionChange:d}),babelHelpers.defineProperty(u,"displayName","Dropdown")}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-dom","classnames","sm-component-button","sm-component-icon","sm-component-select"]});
YUI.add("sm-component-dropdown-option",(function(e){SM.currentModule="sm-component-dropdown-option";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("react")),o=babelHelpers.interopRequireDefault(r("classnames")),l=babelHelpers.interopRequireDefault(r("sm-component-pure-render"));class a extends l.default{render(){let e={...this.props},r=["sm-component-dropdown-option",void 0];return t.default.createElement("li",babelHelpers.extends({className:(0,o.default)(r),"data-highlight":void 0,"data-value":void 0,"data-disabled":void 0},e),e.children)}}exports.default=a,a.proptypes={value:e.default.string,disabled:e.default.bool},a.defaultProps={disabled:!1},a.displayName="Dropdown.Option"}(),SM.currentModule=null}),"",{requires:["react","sm","classnames","sm-component-pure-render"]});
YUI.add("sm-component-dropdown",(function(e){SM.currentModule="sm-component-dropdown";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireWildcard(t("react")),i=babelHelpers.interopRequireDefault(t("react-dom")),l=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("sm-component-dropdown-field"));class a extends n.PureComponent{constructor(e){super(e);let t=0,i=e.defaultValue;i&&(t=this._findIndexOf(e.children,i)),this.state={open:!1,highlight:t,value:t},this.handlers={onBlur:this._onBlurHandler.bind(this),onDropdownClick:this._onDropdownClickHandler.bind(this),onFocus:this._onFocusHandler.bind(this),onKeyDown:this._onKeyPressHandler.bind(this),onOptionClick:this._onOptionClickHandler.bind(this),onOptionHover:this._onOptionHoverHandler.bind(this)},this.dropdownRef=n.default.createRef()}UNSAFE_componentWillReceiveProps(e){let t=this._findIndexOf(e.children,e.defaultValue);this.setState({value:t,highlight:t})}componentDidUpdate(e,t){let{open:o,highlight:a}=this.state,s=n.default.Children.count(this.props.children)-1;if(!t.open&&o||t.highlight!==a){let e=i.default.findDOMNode(this.dropdownRef.current);l.default.querySelector('.sm-component-dropdown-option[data-index="'.concat(a,'"]'),e)||(t.highlight>a&&a>0?this.setState({highlight:a-1}):t.highlight<a&&a<s&&this.setState({highlight:a+1}))}}render(){let{handlers:e,props:t}=this;return n.default.createElement(o.default,babelHelpers.extends({},t,e,{open:this.state.open,highlight:this.state.highlight,value:this.state.value,ref:this.dropdownRef}),t.children)}_findIndexOf(e,t){let i=0,l=0,o=!1;return n.default.Children.forEach(e,e=>{!o&&e&&e.props.value===t&&(i=l,o=!0),e&&l++}),i}_onBlurHandler(){this._blurTimeout&&clearTimeout(this._blurTimeout),this._blurTimer=setTimeout(()=>{this.setState({open:!1})},200)}_onDropdownClickHandler(){this.setState({open:!this.state.open})}_onFocusHandler(){this._blurTimeout&&clearTimeout(this._blurTimeout)}_onKeyPressHandler(e){let t=e.key,i=parseInt(this.state.highlight,10),l=n.default.Children.count(this.props.children)-1,o=i,a=this.state.value,s=!0,r=!0;switch(t){case"ArrowDown":o=i<l?i+1:i;break;case"ArrowUp":o=i>0?i-1:i;break;case"PageDown":o=i+5>l?l:i+5;break;case"PageUp":o=i-5<0?0:i-5;break;case"Escape":o=a,s=!1;break;case" ":case"Enter":this.state.open&&a!==o&&(a=o),s=!this.state.open;break;default:r=!1}r&&(this.setState({highlight:o,value:a,open:s}),e.preventDefault())}_onOptionClickHandler(e,t){this.setState({value:t,open:!1})}_onOptionHoverHandler(e,t){t>=0&&this.setState({highlight:t})}}exports.default=a,a.propTypes={className:e.default.oneOfType([e.default.arrayOf(e.default.string),e.default.string]),disabled:e.default.bool,fallback:e.default.bool,onSelectionChange:e.default.func,defaultValue:e.default.string,size:e.default.oneOf(["small","large"]),width:e.default.string},a.defaultProps={disabled:!1,onSelectionChange:()=>{},fallback:!1,defaultValue:"",size:"small",width:"300px"}}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-dom","classnames","sm-component-button","sm-component-icon","sm-component-select","sm-component-dropdown-field"]});
YUI.add("sm-component-icon",(function(e){SM.currentModule="sm-component-icon";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("classnames")),t=babelHelpers.interopRequireDefault(r("sm-component-pure-render")),n=babelHelpers.interopRequireDefault(r("prop-types")),s=babelHelpers.interopRequireDefault(r("react"));class a extends t.default{render(){let{className:r,icon:t,...n}=this.props,a=(0,e.default)("sm-fonticon","sm-fonticon-".concat(n.size),"sm-fonticon-".concat(t),r);return s.default.createElement("span",babelHelpers.extends({className:a},n))}}a.propTypes={className:n.default.string,icon:n.default.string.isRequired,size:n.default.oneOf(["large","small","xlarge"])},a.defaultProps={size:"large"};var l=a;exports.default=l}(),SM.currentModule=null}),"",{requires:["classnames","react","react-dom","sm","sm-component-pure-render"]});
YUI.add("sm-component-image",(function(e){SM.currentModule="sm-component-image";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProcessingImage=exports.ProtectedImage=exports.CroppedImage=exports.ForegroundImage=exports.BackgroundImage=exports.AspectRatio=void 0;var s=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-imagesrcconfig")),i=babelHelpers.interopRequireDefault(t("classnames")),l=babelHelpers.interopRequireDefault(t("create-class")),n=babelHelpers.interopRequireDefault(t("immutability-helper")),u=babelHelpers.interopRequireDefault(t("sm-component-icon")),o=(e.namespace("SM.Component"),(0,l.default)({propTypes:{value:s.default.oneOfType([s.default.number.isRequired,s.default.oneOf(Object.keys(a.default.aspectRatio)).isRequired])},render:function(){var e,t=this.props,s=o.toNumber(t.value);return s&&(e={paddingBottom:100/s+"%"}),r.default.createElement("div",{className:t.className,style:t.style},r.default.createElement("div",{className:"sm-image-aspect-ratio",style:e},t.children))},statics:{toNumber:function(e){return"number"==typeof e?e:a.default.aspectRatio[e]}}}));exports.AspectRatio=o;const m=e=>{let{children:t,processing:s,src:a,style:i,...l}=e;if(s)return r.default.createElement("div",{className:"sm-image-processing"},r.default.createElement(u.default,{className:"sm-image-processing-icon",icon:"ImageProcessing2"}),r.default.createElement("p",{className:"sm-image-processing-label"},"Processing..."));let n=Object.assign({},i,{backgroundImage:"url(".concat(a.url,")")});return r.default.createElement("div",babelHelpers.extends({},l,{style:n}),t)};exports.BackgroundImage=m,m.propTypes={processing:s.default.bool,src:s.default.shape({url:s.default.string.isRequired,width:s.default.number,height:s.default.number}).isRequired,style:s.default.object},e.namespace("SM.Component").BackgroundImage=exports.BackgroundImage=m;var c=(0,l.default)({propTypes:{processing:s.default.bool,src:s.default.shape({url:s.default.string.isRequired,width:s.default.number,height:s.default.number}).isRequired},render:function(){var e=this.props.src;return r.default.createElement(f,babelHelpers.extends({},this.props,{src:e&&e.url||"/img/spacer.gif"}))}});exports.ForegroundImage=c,e.namespace("SM.Component").ForegroundImage=c;var p=function(){var e=document.createElement("div"),t=["ms","Webkit","Moz","O"],s=void 0!==e.style.transform;if(!s)for(var r,a=0;r=t[a];a++)if(void 0!==e.style[r+"Transform"]){s=!0;break}return e=null,s}();const d=(0,l.default)({propTypes:{src:s.default.shape({url:s.default.string.isRequired,width:s.default.number.isRequired,height:s.default.number.isRequired}).isRequired,upscale:s.default.bool},getDefaultProps:function(){return{upscale:!1}},render:function(){return r.default.createElement(o,{className:this.props.className,style:this.props.style,value:this.props.aspectRatio},r.default.createElement(c,{className:this._getImageClassName(),src:this.props.src,processing:this.props.processing}),this.props.children)},_getImageClassName:function(){var e=o.toNumber(this.props.aspectRatio),t=this.props.src,s=this.props.upscale;return t?e>t.width/t.height?(0,i.default)({"sm-image-center-vertical":p,"sm-image-fit-width":!s,"sm-image-full-width":s}):(0,i.default)({"sm-image-center-horizontal":p,"sm-image-fit-height":!s,"sm-image-full-height":s}):""}});exports.CroppedImage=d,e.namespace("SM.Component").CroppedImage=exports.CroppedImage;const g=(0,l.default)({propTypes:{processing:s.default.bool,src:s.default.shape({url:s.default.string.isRequired,width:s.default.number.isRequired,height:s.default.number.isRequired}).isRequired,style:s.default.shape({height:s.default.number,maxHeight:s.default.number,maxWidth:s.default.number,width:s.default.number})},getDefaultProps:function(){return{style:{}}},_getStyle:function(){var e=this.props.src,t=this.props.style,s=t.height,r=t.width;if(!e)return t;if(t.maxWidth||t.maxHeight){var i=a.default.fitInDimensions(e,t.maxWidth,t.maxHeight);(!s||s>i.height)&&(s=i.height),(!r||r>i.width)&&(r=i.width)}return s||(s=e.height),r||(r=e.width),(0,n.default)(t,{$merge:{backgroundImage:"url("+e.url+")",backgroundSize:r+"px "+s+"px",height:s,width:r},maxWidth:{$set:null},maxHeight:{$set:null}})},render:function(){return r.default.createElement(f,babelHelpers.extends({},this.props,{src:"/img/spacer.gif",style:this._getStyle(),processing:this.props.processing}))}});exports.ProtectedImage=g,e.namespace("SM.Component").ProtectedImage=exports.ProtectedImage;const f=e=>{let{processing:t,src:s,...a}=e;return t?r.default.createElement("div",{className:"sm-image-processing sm-flex sm-flex-column sm-flex-justify-center sm-flex-items-center"},r.default.createElement(u.default,{className:"sm-image-processing-icon",icon:"ImageProcessing2"}),r.default.createElement("p",{className:"sm-image-processing-label"},"Processing...")):r.default.createElement("img",babelHelpers.extends({},a,{src:s||"/img/spacer.gif"}))};exports.ProcessingImage=f,f.propTypes={src:s.default.string,processing:s.default.bool}}(),SM.currentModule=null}),"",{requires:["classnames","immutability-helper","react","sm","sm-imagesrcconfig","sm-component-icon","create-class"]});
YUI.add("sm-component-inlinetextbox",(function(e){SM.currentModule="sm-component-inlinetextbox";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-icon")),o=babelHelpers.interopRequireDefault(t("sm-component-textbox"));class l extends e.default.PureComponent{constructor(...t){super(...t),this._onEditIconClick=this._onEditIconClick.bind(this),this.textboxRef=e.default.createRef()}render(){let t;return this.props.disabled||(t=e.default.createElement(n.default,{className:"sm-form-field-editable-indicator",name:"Edit",size:n.default.SIZE_SMALL,onClick:this._onEditIconClick})),e.default.createElement("span",{className:"sm-form-field-inlinetext-container"},e.default.createElement(o.default,babelHelpers.extends({},this.props,{ref:this.textboxRef})),t)}_onEditIconClick(){this.textboxRef.current.focus()}}exports.default=l,l.displayName="InlineTextbox",l.propTypes=o.default.propTypes,l.defaultProps=o.default.defaultProps}(),SM.currentModule=null}),"",{requires:["react","sm-component-textbox","sm-icon"]});
YUI.add("sm-component-keywords",(function(e){SM.currentModule="sm-component-keywords";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("sm-link"));const s=({keywords:e,ownerWebUri:r,"data-testid":s})=>t.default.createElement("ul",{className:"sm-keywords sm-text-mini sm-muted sm-flex sm-flex-wrap","data-testid":s},e.map(e=>{let s="".concat(r,"/keyword/").concat(encodeURIComponent(e));return t.default.createElement("li",{key:e},t.default.createElement(a.default,{className:"sm-keywords-keyword sm-muted",href:s},e))}));s.displayName="Keywords",s.propTypes={keywords:e.default.arrayOf(e.default.string),ownerWebUri:e.default.string,"data-testid":e.default.string},s.defaultProps={keywords:[],ownerWebUri:""};var l=s;exports.default=l}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-icon","sm-link"]});
YUI.add("sm-component-label",(function(e){SM.currentModule="sm-component-label";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("classnames")),t=(0,babelHelpers.interopRequireDefault(r("create-class")).default)({propTypes:{},render:function(){var e={"sm-label":!0},{className:r,...t}=this.props;return r&&(e[r]=!0),l.default.createElement("label",babelHelpers.extends({},t,{className:(0,a.default)(e)}),this.props.children)}});e.namespace("SM.Component").Label=t;var s=t;exports.default=s}(),SM.currentModule=null}),"",{requires:["classnames","sm","react","create-class"]});
YUI.add("sm-component-menu-action-types",(function(e){SM.currentModule="sm-component-menu-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MENU_TOGGLE=exports.MENU_SHOW=exports.MENU_HIDE=void 0;exports.MENU_HIDE="MENU_HIDE";exports.MENU_SHOW="MENU_SHOW";exports.MENU_TOGGLE="MENU_TOGGLE"}(),SM.currentModule=null}),"",{});
YUI.add("sm-component-menu-actions",(function(e){SM.currentModule="sm-component-menu-actions";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hide=function(n,t){return{type:e,menuId:n,returnFocus:t}},exports.show=function(e,t){return{type:n,menuId:e,focus:t}},exports.toggle=function(e,n){return{type:t,menuId:e,...n&&{_internal:{analytics:n}}}};const{MENU_HIDE:e,MENU_SHOW:n,MENU_TOGGLE:t}=SM.import("sm-component-menu-action-types")}(),SM.currentModule=null}),"",{requires:["sm-component-menu-action-types"]});
YUI.add("sm-component-menu-component",(function(e){SM.currentModule="sm-component-menu-component";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("lodash")),s=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),n=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("react-dom")),l=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),u=t("sm-component-menu-constants");const a={[u.ORIENTATION_HORIZONTAL]:["sm-flex","sm-flex-row","sm-flex-wrap"],[u.ORIENTATION_VERTICAL]:["sm-inline-flex","sm-flex-column"]};class h extends i.default{constructor(e){super(e),this._handleBlur=this._handleBlur.bind(this),this._handleChooseSubmenuAlignments=this._handleChooseSubmenuAlignments.bind(this),this._handleCloseHierarchy=this._handleCloseHierarchy.bind(this),this._handleDocMouseDown=this._handleDocMouseDown.bind(this),this._handleFocus=this._handleFocus.bind(this),this._handleItemChange=this._handleItemChange.bind(this),this._handleItemFocus=this._handleItemFocus.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this._keyArrowDown=this._keyArrowDown.bind(this),this._keyArrowLeft=this._keyArrowLeft.bind(this),this._keyArrowRight=this._keyArrowRight.bind(this),this._keyArrowUp=this._keyArrowUp.bind(this),this._keyEnter=this._keyEnter.bind(this),this._keyEscape=this._keyEscape.bind(this),this._keySpace=this._keySpace.bind(this)}componentDidMount(){let{alwaysVisible:e,closeOnClickOutside:t,isSubmenu:o}=this.props;!t||!o&&e||(s.default.doc.addEventListener("mousedown",this._handleDocMouseDown),s.default.doc.addEventListener("touchstart",this._handleDocMouseDown))}componentWillUnmount(){s.default.doc.removeEventListener("mousedown",this._handleDocMouseDown),s.default.doc.removeEventListener("touchstart",this._handleDocMouseDown),this.props.isSubmenu&&this.props.onHide()}componentDidUpdate(e){this.props.visible!==e.visible&&(this.props.visible?this._didBecomeVisible({anchor:this.props.anchor,focus:this.props.focused}):this._didBecomeHidden({returnFocus:this.props.returnFocus})),this.props.isSubmenu&&this.props.visible&&this.props.focused&&!e.focused&&r.default.findDOMNode(this._getFocusableItem()).focus()}render(){let e=["sm-component-menu"],t=this.props;return t.className&&e.push(t.className),t.isSubmenu&&e.push("sm-component-submenu"),t.noChrome&&e.push("sm-component-menu-nochrome"),e=[...e,...a[t.orientation]],n.default.createElement("ol",babelHelpers.extends({"aria-expanded":!!t.visible||null,"aria-label":t["aria-label"]||null,className:e.join(" "),"data-always-visible":t.alwaysVisible||null,onBlur:this._handleBlur,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,role:t.orientation===u.ORIENTATION_HORIZONTAL?"menubar":"menu"},t.dataAttrs),this.renderChildren())}renderChildren(){this._itemRefs=[],this._radioGroups={};let t=this.props;if(!t.alwaysVisible&&!t.visible)return null;let s=0;return n.default.Children.map(t.children,o=>{if(o&&l.default===o.type){if(o.props.hidden)return null;let i=s++,r={index:i,initiallyFocusable:0===i,onChange:e.default.bind(this._handleItemChange,this,o.props.onChange),onChooseSubmenuAlignments:this._handleChooseSubmenuAlignments,onCloseHierarchy:this._handleCloseHierarchy,onFocus:this._handleItemFocus,onMouseEnter:o.props.onMouseEnter,onMouseLeave:o.props.onMouseLeave,parentOrientation:t.orientation,ref:e=>{this._itemRefs[i]=e}};if(o.props.type===u.ITEM_TYPE_RADIO){let e=o.props.radioGroup;this._radioGroups[e]||(this._radioGroups[e]=[]),this._radioGroups[e].push(i)}o=n.default.cloneElement(o,r)}return o})}_didBecomeHidden(e={}){clearTimeout(this._blurTimeout),this._currentRankedMenuRects=null;let t=r.default.findDOMNode(this);return t.style.left=null,t.style.top=null,e.returnFocus&&this.props.onReturnFocus&&this.props.onReturnFocus(),this}_didBecomeVisible(e={}){return clearTimeout(this._blurTimeout),this._reposition({anchor:e.anchor}),e.focus&&r.default.findDOMNode(this._getFocusableItem()).focus(),r.default.findDOMNode(this).scrollTop=0,this}_getFocusableItem(){return this._itemRefs.find(e=>e.state.focusable)}_getNextItem(e){return this._itemRefs[(e.props.index+1)%this._itemRefs.length]}_getPredictedMenuRect(e,t,s){let o={},i=["tc-bc","bc-tc"].includes(e),n={b:"bottom",l:"left",r:"right",t:"top"};return i&&(e=e.replace(/c/g,"l")),e.replace(/^([bt])([lr])-([bt])([lr])/i,(e,t,i,r,l)=>{o[n[t]]=s[n[r]],o[n[i]]=s[n[l]]}),"bottom"in o||(o.bottom=o.top+t.height),"left"in o||(o.left=o.right-t.width),"right"in o||(o.right=o.left+t.width),"top"in o||(o.top=o.bottom-t.height),i&&(o.left+=(s.width-t.width)/2),o.left<0&&(o.right+=Math.abs(o.left),o.left=0),o.top<0&&(o.bottom+=Math.abs(o.top),o.top=0),o}_getPrevItem(e){let t=0===e.props.index?this._itemRefs.length-1:e.props.index-1;return this._itemRefs[t]}_getRankedMenuRects(t,o,i){let n,r=s.default.getViewportRect();return n=e.default.map(t,function(e){e.alignment&&(e=e.alignment);let t=this._getPredictedMenuRect(e,o,i);return{alignment:e,rect:t,score:this._inRect(t,r)}}.bind(this)),n.sort((function(e,t){return e.score===t.score?0:!0===e.score?-1:!0===t.score?1:t.score-e.score})),n}_inRect(e,t){return e.bottom<=t.bottom&&e.left>=t.left&&e.right<=t.right&&e.top>=t.top||Math.min(t.bottom-e.bottom,0)+Math.min(e.left-t.left,0)+Math.min(t.right-e.right,0)+Math.min(e.top-t.top,0)}_reposition(t={}){let o,i,n=t.anchor;if(!n)return this;o=e.default.isArray(n)?{bottom:n[1],height:0,left:n[0],right:n[0],top:n[1],width:0}:s.default.getAbsoluteBoundingRect(r.default.findDOMNode(n)||n);let l=this.props;i=l.isSubmenu?l.onChooseSubmenuAlignments(this):l.alignments||u.MENU_ALIGNMENTS;let a=r.default.findDOMNode(this),h=s.default.getAbsoluteBoundingRect(a),d=this._getRankedMenuRects(i,h,o);return l.isSubmenu&&l.parentOrientation!==l.orientation||(this._currentRankedMenuRects=d),s.default.setPosition(a,d[0].rect),this}_handleBlur(){clearTimeout(this._blurTimeout),this._blurTimeout=setTimeout(()=>{this.props.visible&&!this.props.alwaysVisible&&this.props.onHide()},200)}_handleChooseSubmenuAlignments(e){return e.props.alignments||this.props.orientation!==u.ORIENTATION_HORIZONTAL?e.props.alignments?e.props.alignments:this._currentRankedMenuRects?this._currentRankedMenuRects:u.SUBMENU_ALIGNMENTS:u.SUBMENU_ALIGNMENTS_HORIZONTAL}_handleCloseHierarchy(){let e=this.props;e.alwaysVisible||e.onHide({returnFocus:!0}),e.onCloseHierarchy&&e.onCloseHierarchy()}_handleDocMouseDown(e){if(!this.props.visible)return;let t,o,i=r.default.findDOMNode(this);if(t=s.default.closest(e.target,e=>e===i),this.props.anchor){let t=r.default.findDOMNode(this.props.anchor);o=s.default.closest(e.target,e=>e===t)}t||o||this.props.onHide()}_handleFocus(){clearTimeout(this._blurTimeout)}_handleItemChange(e,{item:t,checked:s}){let o=t.props;if(o.type===u.ITEM_TYPE_RADIO&&s){let e=this._radioGroups[o.radioGroup];if(!e)throw new Error("<MenuItem> of type 'radio' has no associated radio group.");e.forEach(e=>{let s=this._itemRefs[e];s.state.checked&&s!==t&&s.setState({checked:!1})})}e&&e({item:t,checked:s})}_handleItemFocus(e,{item:t}){this._itemRefs.forEach(e=>{e&&e.setState({focusable:e===t})})}_handleKeyDown(e){let t="_key"+(" "===e.key?"Space":e.key);this[t]&&this[t](e)}_keyArrowDown(e){e.preventDefault(),e.stopPropagation();let t=this._getFocusableItem();if(this.props.orientation===u.ORIENTATION_VERTICAL)r.default.findDOMNode(this._getNextItem(t)).focus();else if(t.submenu&&!t.props.disabled){let e=t.submenu.props.menuId;this.props.onShowSubmenu(e,{focus:!0})}}_keyArrowLeft(e){e.preventDefault(),e.stopPropagation();let t=this._getFocusableItem();this.props.orientation===u.ORIENTATION_VERTICAL?this.props.alwaysVisible||this.props.onHide({returnFocus:!0}):r.default.findDOMNode(this._getPrevItem(t)).focus()}_keyArrowRight(e){e.preventDefault(),e.stopPropagation();let t=this._getFocusableItem();if(this.props.orientation===u.ORIENTATION_VERTICAL){if(t.submenu&&!t.props.disabled){let e=t.submenu.props.menuId;this.props.onShowSubmenu(e,{focus:!0})}}else r.default.findDOMNode(this._getNextItem(t)).focus()}_keyArrowUp(e){e.preventDefault(),e.stopPropagation();let t=this._getFocusableItem();this.props.orientation===u.ORIENTATION_VERTICAL&&r.default.findDOMNode(this._getPrevItem(t)).focus()}_keyEnter(e){e.preventDefault(),e.stopPropagation();let t=this._getFocusableItem();if(!t.props.disabled)if(t.submenu){let e=t.submenu.props.menuId;this.props.onShowSubmenu(e,{focus:!0})}else t._handleClick(e)}_keyEscape(e){e.preventDefault(),e.stopPropagation(),this.props.alwaysVisible||this.props.onHide({returnFocus:!0})}_keySpace(e){e.preventDefault(),e.stopPropagation();let t=this._getFocusableItem();if(t.submenu&&!t.props.disabled){let e=t.submenu.props.menuId;this.props.onShowSubmenu(e,{focus:!0})}}}exports.default=h,h.propTypes={alignments:o.default.arrayOf(o.default.string),alwaysVisible:o.default.bool,anchor:o.default.oneOfType([o.default.element,o.default.instanceOf(s.default.win.Element),o.default.arrayOf(o.default.number),(e,t)=>{if(!e[t].isReactComponent)return new Error("".concat(t," isn't a React component."))}]),className:o.default.string,closeOnClickOutside:o.default.bool,dataAttrs:o.default.object,focused:o.default.bool,noChrome:o.default.bool,onHide:o.default.func,onShowSubmenu:o.default.func,orientation:o.default.oneOf([u.ORIENTATION_VERTICAL,u.ORIENTATION_HORIZONTAL]),returnFocus:o.default.bool,visible:o.default.bool},h.defaultProps={noChrome:!1,closeOnClickOutside:!0,orientation:u.ORIENTATION_VERTICAL},h.displayName="Menu.Menu"}(),SM.currentModule=null}),"",{requires:["lodash","sm-component-pure-render","react","react-dom","sm-dom","sm-component-menu-constants","sm-component-menu-item"]});
YUI.add("sm-component-menu-constants",(function(E){SM.currentModule="sm-component-menu-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SUBMENU_ALIGNMENTS_HORIZONTAL=exports.SUBMENU_ALIGNMENTS=exports.MENU_ALIGNMENTS_CENTER=exports.MENU_ALIGNMENTS=exports.ITEM_TYPE_RADIO=exports.ITEM_TYPE_LINK=exports.ITEM_TYPE_DEFAULT=exports.ITEM_TYPE_CHECKBOX=exports.ORIENTATION_VERTICAL=exports.ORIENTATION_HORIZONTAL=void 0;exports.ORIENTATION_HORIZONTAL="horizontal";exports.ORIENTATION_VERTICAL="vertical";exports.ITEM_TYPE_CHECKBOX="checkbox";exports.ITEM_TYPE_DEFAULT="default";exports.ITEM_TYPE_LINK="link";exports.ITEM_TYPE_RADIO="radio";exports.MENU_ALIGNMENTS=["tl-bl","tr-br","bl-tl","br-tr","tr-bl","tl-br","br-tl","bl-tr"];exports.MENU_ALIGNMENTS_CENTER=["tc-bc","bc-tc"];exports.SUBMENU_ALIGNMENTS=["tl-tr","bl-br","tr-tl","br-bl","tl-br","bl-tr","tr-bl","br-tl"];exports.SUBMENU_ALIGNMENTS_HORIZONTAL=["tl-bl","tr-br","bl-tl","br-tr"]}(),SM.currentModule=null}),"",{});
YUI.add("sm-component-menu-container",(function(e){SM.currentModule="sm-component-menu-container";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{connect:e}=SM.import("react-redux"),n=SM.import("sm-component-menu-component"),{isVisible:o,isFocused:u,shouldReturnFocus:t}=SM.import("sm-component-menu-selectors"),{hide:m,show:c}=SM.import("sm-component-menu-actions");var r=e((e,n)=>n.alwaysVisible?{}:{focused:u(e,n.menuId),returnFocus:t(e,n.menuId),visible:o(e,n.menuId)},(e,{menuId:n})=>({onHide:(o={})=>{e(m(n,o.returnFocus))},onShowSubmenu:(n,o={})=>{e(c(n,o.focus))}}))(n);exports.default=r}(),SM.currentModule=null}),"",{requires:["react-redux","sm-component-menu-actions","sm-component-menu-component","sm-component-menu-selectors"]});
YUI.add("sm-component-menu-heading",(function(e){SM.currentModule="sm-component-menu-heading";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),n=babelHelpers.interopRequireDefault(r("sm-component-pure-render")),t=babelHelpers.interopRequireDefault(r("react"));class l extends n.default{constructor(e){super(e),this._handleClick=this._handleClick.bind(this)}render(){let e=this.props,r=["sm-component-menu-heading","sm-flex","sm-flex-items-center"];return e.className&&r.push(e.className),t.default.createElement("li",{className:r.join(" "),onClick:this._handleClick,role:"separator"},t.default.createElement("span",{role:"heading"},e.children))}_handleClick(e){e.stopPropagation()}}exports.default=l,l.propTypes={className:e.default.string},l.displayName="MenuHeading"}(),SM.currentModule=null}),"",{requires:["react","sm-component-pure-render"]});
YUI.add("sm-component-menu-item",(function(e){SM.currentModule="sm-component-menu-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),u=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("react-dom")),a=babelHelpers.interopRequireDefault(t("sm-link")),l=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),r=t("sm-component-menu-constants");const h={[r.ORIENTATION_HORIZONTAL]:"AngleBracketDown",[r.ORIENTATION_VERTICAL]:"AngleBracketRight"},d={[r.ITEM_TYPE_CHECKBOX]:"menuitemcheckbox",[r.ITEM_TYPE_DEFAULT]:"menuitem",[r.ITEM_TYPE_LINK]:"menuitemlink",[r.ITEM_TYPE_RADIO]:"menuitemradio"};class m extends i.default{constructor(e){super(e),this.state={checked:!!e.initiallyChecked,focusable:!!e.initiallyFocusable},this._handleBlur=this._handleBlur.bind(this),this._handleClick=this._handleClick.bind(this),this._handleFocus=this._handleFocus.bind(this),this._handleMouseEnter=this._handleMouseEnter.bind(this),this._handleMouseLeave=this._handleMouseLeave.bind(this),this._handleReturnFocus=this._handleReturnFocus.bind(this),this._bindSubmenu=this._bindSubmenu.bind(this)}componentDidUpdate(e,t){let n=this.props,s=this.state;s.checked!==t.checked&&n.onChange&&n.onChange({checked:s.checked,item:this})}render(){let e,t,s,i=this.renderChildren(),o=this.props,l=this.state,m=["sm-flex","sm-flex-items-center"],c=["sm-component-menu-item",...m],p=d[o.type],_=o.dataAttrs;if(this._hasSubmenu&&(e=o.customSubmenuIndicator||u.default.createElement(n.default,{name:h[o.parentOrientation],size:n.default.SIZE_SMALL})),o.type!==r.ITEM_TYPE_CHECKBOX&&o.type!==r.ITEM_TYPE_RADIO||(s=l.checked,t=u.default.createElement(n.default,{name:"Checkmark",size:n.default.SIZE_SMALL})),o.type===r.ITEM_TYPE_LINK&&o.href){let e=["sm-component-menu-item-link",...m];i=u.default.createElement(a.default,babelHelpers.extends({className:e.join(" "),href:o.href},_),i),_=null}return o.className&&c.push(o.className),u.default.createElement("li",babelHelpers.extends({"aria-checked":s,"aria-disabled":o.disabled||null,"aria-haspopup":this._hasSubmenu||null,"aria-label":o["aria-label"]||null,className:c.join(" "),onBlur:this._handleBlur,onClick:this._handleClick,onFocus:this._handleFocus,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,role:p,tabIndex:o.type===r.ITEM_TYPE_LINK?"-1":"0"},_),t,i,e)}renderChildren(){let e=this.props,t=e.type===r.ITEM_TYPE_DEFAULT;return this._hasSubmenu=!1,u.default.Children.map(e.children,n=>{if("string"==typeof n)return u.default.createElement(l.default,null,n);if(n&&"Menu"===n.type.displayName){if(!t)throw new Error('A <MenuItem> of type "'+e.type+'" may not contain a <Menu>.');if(this._hasSubmenu)throw new Error("A <MenuItem> may not contain more than one <Menu>.");this._hasSubmenu=!0,n=u.default.cloneElement(n,{anchor:n.props.anchor||this,isSubmenu:!0,onChooseSubmenuAlignments:e.onChooseSubmenuAlignments,onCloseHierarchy:e.onCloseHierarchy,onReturnFocus:this._handleReturnFocus,parentOrientation:e.parentOrientation,ref:this._bindSubmenu})}return n})}_bindSubmenu(e){this.submenu=e}_handleClick(t){if(t||(t={}),"button"in t){if(0!==t.button)return;t.stopPropagation()}let n=this.props;if(n.disabled)return;let s=this.state;(n.type===r.ITEM_TYPE_CHECKBOX||n.type===r.ITEM_TYPE_RADIO&&!s.checked)&&this.setState({checked:!s.checked}),this.submenu||n.onCloseHierarchy&&n.onCloseHierarchy(),n.type===r.ITEM_TYPE_LINK&&n.href&&"keydown"===t.type&&(e.default.win.location.href=n.href),n.onClick&&n.onClick(t,{item:this})}_handleBlur(e){this.props.onBlur&&this.props.onBlur(e,{item:this})}_handleFocus(e){this.props.onFocus&&this.props.onFocus(e,{item:this})}_handleMouseEnter(){this.submenu&&!this.props.disabled&&this.props.onMouseEnter&&(clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this.submenu&&this.props.onMouseEnter()},200))}_handleMouseLeave(){this.submenu&&!this.props.disabled&&this.props.onMouseLeave&&(clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this.submenu&&this.props.onMouseLeave()},200))}_handleReturnFocus(){o.default.findDOMNode(this).focus()}}exports.default=m,m.propTypes={className:s.default.string,customSubmenuIndicator:s.default.element,dataAttrs:s.default.object,disabled:s.default.bool,hidden:s.default.bool,href:s.default.string,initiallyChecked:s.default.bool,initiallyFocusable:s.default.bool,onChange:s.default.func,onMouseEnter:s.default.func,onMouseLeave:s.default.func,onClick:s.default.func,radioGroup:s.default.string,type:s.default.oneOf([r.ITEM_TYPE_CHECKBOX,r.ITEM_TYPE_DEFAULT,r.ITEM_TYPE_LINK,r.ITEM_TYPE_RADIO])},m.defaultProps={radioGroup:"default",type:r.ITEM_TYPE_DEFAULT},m.displayName="MenuItem"}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-component-menu-constants","sm-component-menu-label","sm-component-pure-render","sm-dom","sm-icon","sm-link"]});
YUI.add("sm-component-menu-label",(function(e){SM.currentModule="sm-component-menu-label";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-component-pure-render")),n=babelHelpers.interopRequireDefault(r("react"));class t extends l.default{render(){let e=["sm-component-menu-label"],r=this.props;return r.className&&e.push(r.className),n.default.createElement("span",{className:e.join(" ")},r.children)}}exports.default=t,t.propTypes={className:e.default.string},t.displayName="MenuLabel"}(),SM.currentModule=null}),"",{requires:["react","sm-component-pure-render"]});
YUI.add("sm-component-menu-reducers",(function(e){SM.currentModule="sm-component-menu-reducers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=t,exports.combined=function(u={},n){return e({ui:t})(u,n)};const{combineReducers:e}=SM.import("redux"),{MENU_HIDE:u,MENU_SHOW:n,MENU_TOGGLE:r}=SM.import("sm-component-menu-action-types");function t(e={},t){let o=function(e,t){let{[t.menuId]:{visible:o=!1}={},[t.menuId]:c={}}=e;switch(t.type){case u:return{...e,[t.menuId]:{...c,visible:!1,focused:!1,returnFocus:t.returnFocus}};case n:return{...e,[t.menuId]:{...c,visible:!0,focused:t.focus}};case r:return{...e,[t.menuId]:{...c,visible:!o}};default:return e}}(e.menu||{},t);return{...e,menu:o}}}(),SM.currentModule=null}),"",{requires:["redux","sm-component-menu-action-types"]});
YUI.add("sm-component-menu-selectors",(function(e){SM.currentModule="sm-component-menu-selectors";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";function e(e={},u){let{ui:{menu:{[u]:n={}}={}}={}}=e;return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMenuById=e,exports.isVisible=function(u={},n){let{visible:t=!1}=e(u,n);return t},exports.isFocused=function(u={},n){let{focused:t=!1}=e(u,n);return t},exports.shouldReturnFocus=function(u={},n){let{returnFocus:t=!1}=e(u,n);return t}}(),SM.currentModule=null}),"",{requires:["redux","sm-component-menu-action-types"]});
YUI.add("sm-component-menu",(function(e){SM.currentModule="sm-component-menu";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("sm-component-pure-render")),u=babelHelpers.interopRequireDefault(r("react")),n=babelHelpers.interopRequireDefault(r("sm-redux-store")),l=r("react-redux"),a=babelHelpers.interopRequireDefault(r("sm-component-menu-container"));class o extends t.default{render(){return u.default.createElement(l.Provider,{store:n.default},u.default.createElement(a.default,this.props))}}o.displayName="Menu",o.propTypes={menuId:e.default.string.isRequired};var s=o;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","react-redux","sm-component-menu-container","sm-redux-store"]});
YUI.add("sm-component-overheadformfield",(function(e){SM.currentModule="sm-component-overheadformfield";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("react")),r=babelHelpers.interopRequireDefault(l("sm-icon")),o=babelHelpers.interopRequireDefault(l("sm-component-label"));const i=(0,babelHelpers.interopRequireDefault(l("sm-tooltip-hoc")).default)("div");class s extends t.default.PureComponent{constructor(...e){super(...e),this.childFieldRef=t.default.createRef()}render(){let e=this.props.label?t.default.createElement(o.default,null,this.props.label):null,l=this.props.error?t.default.createElement("div",{className:"sm-form-field-error-msg"},this.props.error):null,s=this.props.description&&t.default.createElement("div",{className:"sm-form-field-description-msg"},this.props.description),a=this.props.tooltip&&t.default.createElement("div",{className:"sm-overhead-label-w-tooltip"},e,t.default.createElement(i,{tooltipLabel:this.props.tooltip,tooltipAlignment:i.TOOLTIP_ALIGN_RIGHT},t.default.createElement(r.default,{name:"HelpEncircled",size:r.default.SIZE_SMALL}))),d=t.default.cloneElement(t.default.Children.only(this.props.children),{error:!!this.props.error,ref:this.childFieldRef}),n=["sm-form-field-overhead"].concat(this.props.className);return t.default.createElement("div",{className:n.join(" ")},this.props.tooltip?a:e,t.default.createElement("div",{className:"sm-form-field-container"},d),l||s)}blur(){this.childFieldRef.current.blur&&this.childFieldRef.current.blur()}focus(){this.childFieldRef.current.focus&&this.childFieldRef.current.focus()}}exports.default=s,s.displayName="OverheadFormField",s.propTypes={children:e.default.element.isRequired,className:e.default.string,label:e.default.node,description:e.default.node,error:e.default.string}}(),SM.currentModule=null}),"",{requires:["sm","react","sm-icon","sm-component-label","sm-tooltip-hoc"]});
YUI.add("sm-component-panel-base",(function(e){SM.currentModule="sm-component-panel-base";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.HEADER_OUTSIDE=exports.HEADER_INSIDE=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("classnames"));exports.HEADER_INSIDE="inside";exports.HEADER_OUTSIDE="outside";class s extends a.default.PureComponent{render(){let{children:e,className:t,headerPosition:s,height:l,style:d,width:n,...u}=this.props,i=(0,r.default)(t,"sm-panel");d=Object.assign({height:l,width:n},d);let o=[],p=[];return"outside"===s?a.default.Children.forEach(e,e=>{e&&(this._hasHeader(e)?p.push(e):o.push(e))}):o=e,a.default.createElement("div",babelHelpers.extends({className:i,style:d},u),p,a.default.Children.count(o)>0&&a.default.createElement("div",{className:"sm-panel-container"},o))}_hasHeader(e){let t=!1;return!!e&&(s.Header===e.type||(e.props&&a.default.Children.forEach(e.props.children,e=>{this._hasHeader(e)&&(t=!0)}),t))}}exports.default=s,s.displayName="Panel",s.HEADER_INSIDE="inside",s.HEADER_OUTSIDE="outside",s.propTypes={className:e.default.oneOfType([e.default.arrayOf(e.default.string),e.default.string]),headerPosition:e.default.oneOf(["inside","outside"]),height:e.default.number,width:e.default.number},s.defaultProps={headerPosition:"outside"}}(),SM.currentModule=null}),"",{requires:["prop-types","react","classnames"]});
YUI.add("sm-component-panel-body",(function(e){SM.currentModule="sm-component-panel-body";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("classnames")),t=babelHelpers.interopRequireDefault(l("prop-types")),a=babelHelpers.interopRequireDefault(l("react"));const r=l=>{let t=(0,e.default)(l.className,"sm-panel-body");return a.default.createElement("div",{className:t,style:l.style},l.children)};r.displayName="Panel.Body",r.propTypes={className:t.default.oneOfType([t.default.arrayOf(t.default.string),t.default.string]),style:t.default.object};var s=r;exports.default=s}(),SM.currentModule=null}),"",{requires:["classnames","prop-types","react"]});
YUI.add("sm-component-panel-buttons",(function(e){SM.currentModule="sm-component-panel-buttons";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-component-buttongroup")),l=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react"));const u=t=>r.default.createElement("div",{className:"sm-panel-buttons"},r.default.createElement(e.default,{size:t.size},t.children));u.displayName="Panel.Buttons",u.propTypes={children:l.default.oneOfType([l.default.arrayOf(l.default.element),l.default.element]),size:l.default.oneOf(["large","small"])},u.defaultProps={size:"large"};var n=u;exports.default=n}(),SM.currentModule=null}),"",{requires:["sm-component-buttongroup","prop-types","react"]});
YUI.add("sm-component-panel-closebutton",(function(e){SM.currentModule="sm-component-panel-closebutton";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-icon")),n=babelHelpers.interopRequireDefault(t("react"));const o=t=>n.default.createElement("div",{className:"sm-panel-close"},n.default.createElement(e.default,babelHelpers.extends({noChrome:!0,skin:"submit","data-testid":"panel_close_button"},t),n.default.createElement(l.default,{name:"Close"})));o.displayName="Panel.CloseButton";var a=o;exports.default=a}(),SM.currentModule=null}),"",{requires:["sm-component-button","sm-icon","react"]});
YUI.add("sm-component-panel-header",(function(e){SM.currentModule="sm-component-panel-header";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-panel-closebutton"));const a=({children:t,style:r={},className:a=""})=>{let n=e.default.Children.toArray(t).some(e=>e.type===l.default);return e.default.createElement("header",{"data-close-button":n,style:r,className:a},t)};a.displayName="Panel.Header",a.propTypes={style:r.default.object};var n=a;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-panel-closebutton"]});
YUI.add("sm-component-panel",(function(e){SM.currentModule="sm-component-panel";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Body",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Buttons",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"CloseButton",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Header",{enumerable:!0,get:function(){return u.default}}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(n("sm-component-panel-base")),t=babelHelpers.interopRequireDefault(n("sm-component-panel-body")),o=babelHelpers.interopRequireDefault(n("sm-component-panel-buttons")),r=babelHelpers.interopRequireDefault(n("sm-component-panel-closebutton")),u=babelHelpers.interopRequireDefault(n("sm-component-panel-header"));var l=Object.assign(e.default,{Body:t.default,Buttons:o.default,CloseButton:r.default,Header:u.default});exports.default=l}(),SM.currentModule=null}),"",{requires:["sm-component-panel-base","sm-component-panel-body","sm-component-panel-buttons","sm-component-panel-closebutton","sm-component-panel-header"]});
YUI.add("sm-component-pure-render",(function(e){SM.currentModule="sm-component-pure-render";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("lodash")),u=babelHelpers.interopRequireDefault(t("immutable")),r=babelHelpers.interopRequireDefault(t("react"));class o extends r.default.Component{shouldComponentUpdate(t,u){return t!==this.props&&!e.default.isEqual(t,this.props,n)||u!==this.state&&!e.default.isEqual(u,this.state,n)}}function n(e,t){if(!e||!t)return;return"function"==typeof e.equals&&"function"==typeof e.hashCode||"function"==typeof t.equals&&"function"==typeof t.hashCode?u.default.is(e,t):void 0}var a=o;exports.default=a}(),SM.currentModule=null}),"",{requires:["immutable","lodash","react","react-dom","sm"]});
YUI.add("sm-component-select-option-group",(function(e){SM.currentModule="sm-component-select-option-group";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("classnames"));const l=({className:r,children:l,...o})=>e.default.createElement("optgroup",babelHelpers.extends({},o,{className:(0,t.default)({"sm-form-field-select-optgroup":!0},r)}),l);l.displayName="Select.OptionGroup",l.propTypes={};var o=l;exports.default=o}(),SM.currentModule=null}),"",{requires:["classnames","react"]});
YUI.add("sm-component-select-option",(function(e){SM.currentModule="sm-component-select-option";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("classnames"));const r=({className:t,children:r,...o})=>e.default.createElement("option",babelHelpers.extends({},o,{className:(0,l.default)({"sm-form-field-select-option":!0},t)}),r);r.displayName="Select.Option",r.propTypes={};var o=r;exports.default=o}(),SM.currentModule=null}),"",{requires:["classnames","react"]});
YUI.add("sm-component-select-select",(function(e){SM.currentModule="sm-component-select-select";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("classnames")),l=babelHelpers.interopRequireDefault(r("prop-types")),s=babelHelpers.interopRequireDefault(r("react")),t=babelHelpers.interopRequireDefault(r("sm-icon"));class a extends(SM.import("sm-component-pure-render")){render(){let{error:r,children:l,className:a,noChrome:o,size:n,...m}=this.props,c=["sm-form-field-select-wrapper",{"sm-form-field-error":r},{"sm-nochrome":o}],u=["sm-form-field","sm-form-field-select",{"sm-form-field-select-large":"large"===n}].concat(a),d=["sm-form-field-select-arrow",{"sm-form-field-select-arrow-large":"large"===n}];return s.default.createElement("div",{className:(0,e.default)(c)},s.default.createElement("select",babelHelpers.extends({className:(0,e.default)(u)},m),l),s.default.createElement(t.default,{className:(0,e.default)(d),name:"large"===n?"AngleBracketDownSlim":"AngleBracketDown",size:t.default.SIZE_SMALL}))}}a.displayName="Select",a.propTypes={noChrome:l.default.bool,size:l.default.oneOf(["small","large"])},a.defaultProps={size:"small"};var o=a;exports.default=o}(),SM.currentModule=null}),"",{requires:["classnames","react","sm-icon","sm-component-pure-render"]});
YUI.add("sm-component-select",(function(e){SM.currentModule="sm-component-select";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"SelectOption",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"SelectOptionGroup",{enumerable:!0,get:function(){return o.default}});var e=babelHelpers.interopRequireDefault(t("sm-component-select-select")),n=babelHelpers.interopRequireDefault(t("sm-component-select-option")),o=babelHelpers.interopRequireDefault(t("sm-component-select-option-group"))}(),SM.currentModule=null}),"",{requires:["sm-component-select-select","sm-component-select-option","sm-component-select-option-group"]});
YUI.add("sm-component-tabview-tab",(function(e){SM.currentModule="sm-component-tabview-tab";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("react"));const a=e=>{let{error:r,tabKey:a,trackingCategory:l,trackingAction:n,trackingLabel:i,warning:o,...u}=e;return t.default.createElement("div",babelHelpers.extends({role:"tabpanel"},u),e.children)};a.propTypes={label:e.default.node.isRequired,tabKey:e.default.string.isRequired,error:e.default.bool,warning:e.default.bool,trackingCategory:e.default.string,trackingAction:e.default.string,trackingLabel:e.default.string},a.displayName="TabView.Tab";var l=a;exports.default=l}(),SM.currentModule=null}),"",{requires:["classnames","lodash","react","react-dom","sm"]});
YUI.add("sm-component-tabview",(function(e){SM.currentModule="sm-component-tabview";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),a=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types"));class l extends a.default.Component{constructor(...e){super(...e),babelHelpers.defineProperty(this,"tabRefs",{}),babelHelpers.defineProperty(this,"_createTabRef",e=>{e&&(this.tabRefs[e.getAttribute("data-key")]=e)}),babelHelpers.defineProperty(this,"_getSelectedTabIndex",()=>a.default.Children.toArray(this.props.children).findIndex(e=>e.props.tabKey===this.props.selectedTabKey)),babelHelpers.defineProperty(this,"_selectNextTab",()=>{var e,t=this.props.children,r=a.default.Children.count(t),l=this._getSelectedTabIndex();void 0!==l&&1!==r&&((e=l+1)>=r&&(e=0),this._selectTab(t[e].props.tabKey))}),babelHelpers.defineProperty(this,"_selectPrevTab",()=>{var e,t=this.props.children,r=a.default.Children.count(t),l=this._getSelectedTabIndex();void 0!==l&&1!==r&&((e=l-1)<0&&(e=r-1),this._selectTab(t[e].props.tabKey))}),babelHelpers.defineProperty(this,"_selectTab",e=>{this.props.onTabSelect(e)}),babelHelpers.defineProperty(this,"focusSelectedTab",()=>{if(this.isMounted()){var e=this.tabRefs[this.props.selectedTabKey];e&&e.focus()}}),babelHelpers.defineProperty(this,"_handleKeyDown",e=>{var t;switch(e.key){case"ArrowDown":case"ArrowRight":t=this._selectNextTab;break;case"ArrowUp":case"ArrowLeft":t=this._selectPrevTab}t&&(e.preventDefault(),t())}),babelHelpers.defineProperty(this,"_handleTabClick",e=>{e.preventDefault();let t=e.target.getAttribute("data-key");this._selectTab(t)})}render(){var t,{children:r,selectedTabKey:l,className:s,orientation:i,onTabSelect:n,...o}=this.props;let d=a.default.Children.map(r,e=>{let r=e.props.tabKey,s=r===l;return s&&(t=e),a.default.createElement("li",{role:"presentation","data-tabkey":r,"data-testid":e.props["data-tab-id"]},a.default.createElement("a",{"aria-selected":s,onClick:this._handleTabClick,ref:this._createTabRef,role:"tab",tabIndex:s?0:-1,"data-error":e.props.error||null,"data-warning":e.props.warning||null,"data-key":r,"data-link-tracking-category":e.props.trackingCategory,"data-link-tracking-action":e.props.trackingAction,"data-link-tracking-label":e.props.trackingLabel},e.props.label))});return a.default.createElement("div",babelHelpers.extends({className:(0,e.default)(s,"sm-tabview"),"data-orientation":i},o),a.default.createElement("ul",{onKeyDown:this._handleKeyDown,role:"tablist"},d),t)}}exports.default=l,l.propTypes={children:r.default.oneOfType([r.default.arrayOf(r.default.element),r.default.element]),className:r.default.string,onTabSelect:r.default.func,orientation:r.default.oneOf(["horizontal","vertical"]),selectedTabKey:r.default.string.isRequired},l.defaultProps={onTabSelect:()=>{},orientation:"horizontal"},l.ORIENTATION_HORIZONTAL="horizontal",l.ORIENTATION_VERTICAL="vertical",l.Tab=SM.import("sm-component-tabview-tab"),l.displayName="TabView"}(),SM.currentModule=null}),"",{requires:["classnames","lodash","react","react-dom","sm","sm-component-tabview-tab"]});
YUI.add("sm-component-textarea",(function(e){SM.currentModule="sm-component-textarea";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("classnames")),t=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("react"));const l=a.default.forwardRef((function(r,t){let{className:l,error:o,...s}=r,u=["sm-form-field","sm-form-field-textarea",{"sm-form-field-error":o}].concat(l);return a.default.createElement("textarea",babelHelpers.extends({},s,{className:(0,e.default)(u),ref:t}))}));l.displayName="Textarea",l.propTypes={error:t.default.bool};var o=l;exports.default=o}(),SM.currentModule=null}),"",{requires:["classnames","sm","react"]});
YUI.add("sm-component-textbox",(function(e){SM.currentModule="sm-component-textbox";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),r=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("react-input-mask"));class a extends s.default.PureComponent{constructor(...e){super(...e),this.inputRef=s.default.createRef()}render(){let{className:t,error:r,mask:a,noChrome:u,size:n,...o}=this.props,i=["sm-form-field","sm-form-field-text-input",{"sm-form-field-text-input-size-large":"large"===n},{"sm-nochrome":u},{"sm-form-field-error":r}].concat(t);return a?s.default.createElement(l.default,babelHelpers.extends({className:(0,e.default)(i),mask:a,ref:this.inputRef},o)):s.default.createElement("input",babelHelpers.extends({className:(0,e.default)(i),ref:this.inputRef},o))}focus(){this.inputRef.current&&this.inputRef.current.focus()}}exports.default=a,a.displayName="Textbox",a.propTypes={error:r.default.bool,mask:r.default.string,noChrome:r.default.bool,size:r.default.oneOf(["small","large"]).isRequired,type:r.default.oneOf(["email","hidden","number","password","tel","text","url"]).isRequired,steps:r.default.string,pattern:r.default.string},a.defaultProps={size:"small",type:"text"}}(),SM.currentModule=null}),"",{requires:["classnames","react","react-input-mask","sm"]});
YUI.add("sm-component-underlineformfield",(function(e){SM.currentModule="sm-component-underlineformfield";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("react")),a=babelHelpers.interopRequireDefault(l("classnames")),s=babelHelpers.interopRequireDefault(l("sm-component-label")),o=babelHelpers.interopRequireDefault(l("create-class")),n=babelHelpers.interopRequireDefault(l("sm-icon"));const i=(0,babelHelpers.interopRequireDefault(l("sm-tooltip-hoc")).default)("div");var u=(0,o.default)({displayName:"UnderlineFormField",propTypes:{children:r.default.element.isRequired,className:r.default.string,label:r.default.node,error:r.default.string},getDefaultProps:function(){return{className:""}},render:function(){var e={"sm-form-field-underline":!0,"sm-form-field-error":this.props.error};this.props.className&&(e[this.props.className]=!0);var l=this.props.tooltip?t.default.createElement(i,{className:"sm-label-tooltip",tooltipLabel:this.props.tooltip,tooltipAlignment:i.TOOLTIP_ALIGN_RIGHT},t.default.createElement(n.default,{name:"HelpEncircled",size:n.default.SIZE_SMALL})):null,r=this.props.label?t.default.createElement(s.default,null,this.props.label," ",l):null,o=this.props.error?t.default.createElement("div",{className:"sm-form-field-error-msg"},this.props.error):null;return t.default.createElement(t.default.Fragment,null,t.default.createElement("div",{className:(0,a.default)(e)},r,t.default.createElement("div",{className:"sm-form-field-container"},this.props.children)),o)}});e.namespace("SM.Component").UnderlineFormField=u;var p=u;exports.default=p}(),SM.currentModule=null}),"",{requires:["classnames","sm","react","sm-component-label","sm-tooltip-hoc","create-class"]});
YUI.add('sm-cookie-consent', function (Y) {SM.currentModule = 'sm-cookie-consent';var exports = {};var module = SM.modules[SM.currentModule] = {exports: exports,name: SM.currentModule};var require = SM._requireShim;(function () {
module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=104)}([function(e,t){e.exports=require("react")},function(e,t,r){var n=r(23),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){t.COOKIE_ANALYTICS_ID="sp";t.COOKIE_GEOIP_OVERRIDE="geoIP_override";t.COOKIE_OPT_OUT="necoo";t.COOKIE_BANNER_DISMISS="cbd";t.COOKIE_DISMISSED_USER_MENU_BADGE="dgsb";t.COOKIE_DISMISSED_DASHBOARD_BADGE="ddbb";t.COOKIE_HEADWAY_NOTES_TRACKING="hwnt";t.COOKIE_PHOTOS_PAGE_FILTERS="pssf";t.COOKIE_UREFERRER="Ureferrer"},function(e,t,r){var n=r(49),o=r(55);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t){e.exports=require("js-cookie")},function(e,t,r){var n=r(39),o=r(40),i=r(41),a=r(42),s=r(43);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,r){var n=r(21);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(17),o=r(51),i=r(52),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},function(e,t,r){var n=r(3)(Object,"create");e.exports=n},function(e,t,r){var n=r(64);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";var n=r(0);const o=Object(n.createContext)(!1);t.a=o},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},function(e,t){e.exports=require("prop-types")},function(e,t,r){"use strict";t.a={cookieBanner:"x6oL9-cEQvryFNvLDtOWt",cookieBannerTitle:"_2kHb9xWZ_F3HLEsV9xUxSr",cookieBannerButtonGroup:"_1cXzyKcP1hFTY5T9vnxumg"}},function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return h}));var n=r(12),o=r(4),i=r.n(o),a=r(33),s=r(0),u=r.n(s),c=r(2),l=r(19),f=r(11),p=r(14),d=u.a.createElement;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const b={expires:365,secure:!0,sameSite:"Lax"};function h(){return e.browser&&Boolean(i.a.get(c.COOKIE_BANNER_DISMISS))}function g({className:e,domain:t,onDismiss:r}){let{0:n,1:o}=Object(s.useState)(!h()),u=Object(s.useContext)(f.a);if(!n||!u)return null;function v(e){let n=y(y({},b),t?{domain:t}:{});e?i.a.remove(c.COOKIE_OPT_OUT,n):i.a.set(c.COOKIE_OPT_OUT,1,n),i.a.set(c.COOKIE_BANNER_DISMISS,1,n),o(!1),r({accepted:e})}let g=d("a",{className:"text-accent hover:text-accent-hover","data-testid":"cookiebanner_policy_link",href:"https://www.smugmug.com/about/privacy",target:"_blank",rel:"noopener noreferrer",ref:e=>{e&&(e.style.setProperty("color","var(--color-white)","important"),e.style.setProperty("border-bottom","1px solid var(--color-white)","important"))},onMouseEnter:e=>{e.target.style.setProperty("border-bottom","1px solid var(--color-green)","important")},onMouseLeave:e=>{e.target.style.setProperty("border-bottom","1px solid var(--color-white)","important")}},"you agree to our use of cookies and our stewardship of your data");return d(a.a,null,d("aside",{className:`${e} ${p.a.cookieBanner}`,"data-no-focus-lock":"true","data-testid":"cookiebanner_panel",ref:e=>{e&&(e.style.setProperty("color","var(--color-white)","important"),e.style.setProperty("backgroundColor","var(--color-black)","important"),e.style.setProperty("display","block","important"))}},d("h2",{className:p.a.cookieBannerTitle,ref:e=>{e&&e.style.setProperty("color","var(--color-white)","important")}},"Privacy and Cookie Policy"),d("p",{className:"my-3",ref:e=>{e&&e.style.setProperty("color","var(--color-white)","important")}},"Your privacy is your business, and our priority. For decades, SmugMug has put member privacy first. Please know that we do use cookies to deliver a world-class experience with optimal site functionality. By continuing to use our site, ",g,"."),d("div",{className:`${p.a.cookieBannerButtonGroup}`},d(l.a,{className:"flex-1 small:flex-initial","data-testid":"cookiebanner_reject_button",size:"small",onPress:()=>v(!1),ref:e=>{e&&(e.style.setProperty("color","var(--color-white)","important"),e.style.setProperty("background-color","var(--color-gray-slate)","important"))}},"Reject"),d(l.a,{className:"flex-1 ml-3 small:flex-initial","data-testid":"cookiebanner_allow_button",size:"small",skin:"accent",onPress:()=>v(!0),ref:e=>{e&&(e.style.setProperty("color","var(--color-white)","important"),e.style.setProperty("background-color","var(--color-green)","important"))}},"Allow"))))}g.displayName="CookieConsent",g.defaultProps={className:"",onDismiss:()=>{}},t.a=g}).call(this,r(34))},function(e,t,r){var n=r(3)(r(1),"Map");e.exports=n},function(e,t,r){var n=r(1).Symbol;e.exports=n},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){"use strict";var n=r(12);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=i(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}var a=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=i(e))&&(n&&(n+=" "),n+=t);return n},s=r(0),u=r.n(s);const c={prefix:Math.round(1e10*Math.random()),current:0};u.a.createContext(c);Boolean("undefined"!=typeof window&&window.document&&window.document.createElement);"undefined"!=typeof window&&u.a.useLayoutEffect;let l=new Map;function f(e,t){if(e===t)return e;let r=l.get(e);if(r)return r(t),t;let n=l.get(t);return n?(n(e),e):t}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(let e of t)"function"==typeof e&&e(...arguments)}}function d(){let e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(let t of r){for(let r in e)/^on[A-Z]/.test(r)&&"function"==typeof e[r]&&"function"==typeof t[r]?e[r]=p(e[r],t[r]):"className"===r&&"string"==typeof e.className&&"string"==typeof t.className?e[r]=a(e.className,t.className):"UNSAFE_className"===r&&"string"==typeof e.UNSAFE_className&&"string"==typeof t.UNSAFE_className?e[r]=a(e.UNSAFE_className,t.UNSAFE_className):"id"===r&&e.id&&t.id?e.id=f(e.id,t.id):e[r]=void 0!==t[r]?t[r]:e[r];for(let r in t)void 0===e[r]&&(e[r]=t[r])}return e}const v=new Set(["id"]),y=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),b=/^(data-.*)$/;function h(e){if(function(){if(null==g){g=!1;try{document.createElement("div").focus({get preventScroll(){return g=!0,!0}})}catch(e){}}return g}())e.focus({preventScroll:!0});else{let t=function(e){var t=e.parentNode,r=[],n=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft});return r}(e);e.focus(),function(e){for(let{element:t,scrollTop:r,scrollLeft:n}of e)t.scrollTop=r,t.scrollLeft=n}(t)}}let g=null;let m=new Map,O=new Set;function P(){if("undefined"==typeof window)return;let e=t=>{let r=m.get(t.target);if(r&&(r.delete(t.propertyName),0===r.size&&(t.target.removeEventListener("transitioncancel",e),m.delete(t.target)),0===m.size)){for(let e of O)e();O.clear()}};document.body.addEventListener("transitionrun",t=>{let r=m.get(t.target);r||(r=new Set,m.set(t.target,r),t.target.addEventListener("transitioncancel",e)),r.add(t.propertyName)}),document.body.addEventListener("transitionend",e)}function _(e){requestAnimationFrame(()=>{0===m.size?e():O.add(e)})}"undefined"!=typeof document&&("loading"!==document.readyState?P():document.addEventListener("DOMContentLoaded",P));function j(){let e=Object(s.useRef)(new Map),t=Object(s.useCallback)((t,r,n,o)=>{e.current.set(n,{type:r,eventTarget:t,options:o}),t.addEventListener(r,n,o)},[]),r=Object(s.useCallback)((t,r,n,o)=>{t.removeEventListener(r,n,o),e.current.delete(n)},[]);return Object(s.useEffect)(()=>()=>{e.current.forEach((e,t)=>{r(e.eventTarget,e.type,t,e.options)})},[r]),{addGlobalListener:t,removeGlobalListener:r}}"undefined"!=typeof window&&window.visualViewport;function w(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}let E="default",x="";function T(){"default"===E&&(x=document.documentElement.style.webkitUserSelect,document.documentElement.style.webkitUserSelect="none"),E="disabled"}function S(){"disabled"===E&&(E="restoring",setTimeout(()=>{_(()=>{"restoring"===E&&("none"===document.documentElement.style.webkitUserSelect&&(document.documentElement.style.webkitUserSelect=x||""),x="",E="default")})},300))}function k(e){return!(0!==e.mozInputSource||!e.isTrusted)||0===e.detail&&!e.pointerType}const A=u.a.createContext(null);function D(e){let t=function(e){let t=Object(s.useContext)(A);if(t){let{register:r}=t,n=w(t,["register"]);e=d(n,e),r()}return Object(s.useEffect)(()=>{if(t&&t.ref)return t.ref.current=e.ref.current,()=>{t.ref.current=null}},[t,e.ref]),e}(e),{onPress:r,onPressChange:n,onPressStart:o,onPressEnd:i,onPressUp:a,isDisabled:u,isPressed:c,preventFocusOnPress:l}=t,f=w(t,["onPress","onPressChange","onPressStart","onPressEnd","onPressUp","isDisabled","isPressed","preventFocusOnPress","ref"]),[p,v]=Object(s.useState)(!1),y=Object(s.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,activePointerId:null,target:null,isOverTarget:!1}),{addGlobalListener:b,removeGlobalListener:g}=j(),m=Object(s.useMemo)(()=>{let e=y.current,t=(e,t)=>{u||(o&&o({type:"pressstart",pointerType:t,target:e.currentTarget,shiftKey:e.shiftKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey}),n&&n(!0),v(!0))},s=function(t,o,a){void 0===a&&(a=!0),u||(e.ignoreClickAfterPress=!0,i&&i({type:"pressend",pointerType:o,target:t.currentTarget,shiftKey:t.shiftKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey}),n&&n(!1),v(!1),r&&a&&r({type:"press",pointerType:o,target:t.currentTarget,shiftKey:t.shiftKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey}))},c=(e,t)=>{u||a&&a({type:"pressup",pointerType:t,target:e.currentTarget,shiftKey:e.shiftKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey})},f={onKeyDown(r){M(r.nativeEvent)&&(r.preventDefault(),r.stopPropagation(),e.isPressed||r.repeat||(e.target=r.currentTarget,e.isPressed=!0,t(r,"keyboard"),b(document,"keyup",p,!1)))},onKeyUp(t){M(t.nativeEvent)&&!t.repeat&&c(K(e.target,t),"keyboard")},onClick(r){r&&0===r.button&&(r.stopPropagation(),u&&r.preventDefault(),e.ignoreClickAfterPress||e.ignoreEmulatedMouseEvents||!k(r.nativeEvent)||(u||l||h(r.currentTarget),t(r,"virtual"),c(r,"virtual"),s(r,"virtual")),e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1)}},p=t=>{e.isPressed&&M(t)&&(t.preventDefault(),t.stopPropagation(),e.isPressed=!1,s(K(e.target,t),"keyboard",t.target===e.target),g(document,"keyup",p,!1),(t.target===e.target&&C(e.target)||"link"===e.target.getAttribute("role"))&&e.target.click())};if("undefined"!=typeof PointerEvent){f.onPointerDown=r=>{0===r.button&&(r.preventDefault(),r.stopPropagation(),e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=r.pointerId,e.target=r.currentTarget,u||l||h(r.currentTarget),T(),t(r,r.pointerType),b(document,"pointermove",n,!1),b(document,"pointerup",o,!1),b(document,"pointercancel",i,!1)))},f.onMouseDown=e=>{0===e.button&&e.preventDefault()};let r=()=>{g(document,"pointermove",n,!1),g(document,"pointerup",o,!1),g(document,"pointercancel",i,!1)};f.onPointerUp=e=>{0===e.button&&N(e,e.currentTarget)&&c(e,e.pointerType)};let n=r=>{r.pointerId===e.activePointerId&&(N(r,e.target)?e.isOverTarget||(e.isOverTarget=!0,t(K(e.target,r),r.pointerType)):e.isOverTarget&&(e.isOverTarget=!1,s(K(e.target,r),r.pointerType,!1)))},o=t=>{t.pointerId===e.activePointerId&&e.isPressed&&0===t.button&&(N(t,e.target)?s(K(e.target,t),t.pointerType):e.isOverTarget&&s(K(e.target,t),t.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,r(),S())},i=t=>{e.isPressed&&(e.isOverTarget&&s(K(e.target,t),t.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,r(),S())}}else{f.onMouseDown=n=>{0===n.button&&(n.preventDefault(),n.stopPropagation(),e.ignoreEmulatedMouseEvents||(e.isPressed=!0,e.isOverTarget=!0,e.target=n.currentTarget,u||l||h(n.currentTarget),t(n,k(n.nativeEvent)?"virtual":"mouse"),b(document,"mouseup",r,!1)))},f.onMouseEnter=r=>{r.stopPropagation(),e.isPressed&&!e.ignoreEmulatedMouseEvents&&(e.isOverTarget=!0,t(r,"mouse"))},f.onMouseLeave=t=>{t.stopPropagation(),e.isPressed&&!e.ignoreEmulatedMouseEvents&&(e.isOverTarget=!1,s(t,"mouse",!1))},f.onMouseUp=t=>{e.ignoreEmulatedMouseEvents||0!==t.button||c(t,k(t.nativeEvent)?"virtual":"mouse")};let r=t=>{if(0!==t.button)return;if(e.isPressed=!1,g(document,"mouseup",r,!1),e.ignoreEmulatedMouseEvents)return void(e.ignoreEmulatedMouseEvents=!1);let n=k(t)?"virtual":"mouse";N(t,e.target)?s(K(e.target,t),n):e.isOverTarget&&s(K(e.target,t),n,!1),e.isOverTarget=!1};f.onTouchStart=r=>{r.stopPropagation();let o=function(e){const{targetTouches:t}=e;if(t.length>0)return t[0];return null}(r.nativeEvent);o&&(e.activePointerId=o.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=r.currentTarget,u||l||h(r.currentTarget),T(),t(r,"touch"),b(window,"scroll",n,!0))},f.onTouchMove=r=>{if(r.stopPropagation(),!e.isPressed)return;let n=I(r.nativeEvent,e.activePointerId);n&&N(n,r.currentTarget)?e.isOverTarget||(e.isOverTarget=!0,t(r,"touch")):e.isOverTarget&&(e.isOverTarget=!1,s(r,"touch",!1))},f.onTouchEnd=t=>{if(t.stopPropagation(),!e.isPressed)return;let r=I(t.nativeEvent,e.activePointerId);r&&N(r,t.currentTarget)?(c(t,"touch"),s(t,"touch")):e.isOverTarget&&s(t,"touch",!1),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,S(),g(window,"scroll",n,!0)},f.onTouchCancel=t=>{t.stopPropagation(),e.isPressed&&o(t,"touch")};let n=t=>{e.isPressed&&t.target.contains(e.target)&&o({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1},"touch")},o=(t,r)=>{e.isOverTarget&&s(t,r,!1),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,S(),window.removeEventListener("scroll",n,!0)}}return f},[u,o,n,i,r,a,b,l,g]);return Object(s.useEffect)(()=>()=>S(),[]),{isPressed:c||p,pressProps:d(f,m)}}function C(e){return"A"===e.tagName&&e.hasAttribute("href")}function M(e){const{key:t,target:r}=e,n=r,{tagName:o,isContentEditable:i}=n,a=n.getAttribute("role");return!("Enter"!==t&&" "!==t&&"Spacebar"!==t||"INPUT"===o||"TEXTAREA"===o||!0===i||C(n)&&("button"!==a||"Enter"===t)||"link"===a&&"Enter"!==t)}function I(e,t){const r=e.changedTouches;for(let e=0;e<r.length;e++){const n=r[e];if(n.identifier===t)return n}return null}function K(e,t){return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey}}function N(e,t){let r=t.getBoundingClientRect();return(e.clientX||0)>=(r.left||0)&&(e.clientX||0)<=(r.right||0)&&(e.clientY||0)>=(r.top||0)&&(e.clientY||0)<=(r.bottom||0)}A.displayName="PressResponderContext";u.a.forwardRef((e,t)=>{var r;let{children:n}=e,i=w(e,["children"]),a=Object(s.useRef)();t=null!=(r=t)?r:a;let{pressProps:c}=D(o({},i,{ref:t})),l=u.a.Children.only(n);return u.a.cloneElement(l,o({ref:t},d(l.props,c)))}),u.a.forwardRef((e,t)=>{let{children:r}=e,n=w(e,["children"]),i=Object(s.useRef)(!1),a=Object(s.useContext)(A),c=d(a||{},o({},n,{ref:t,register(){i.current=!0,a&&a.register()}}));return Object(s.useEffect)(()=>{i.current||console.warn("A PressResponder was rendered without a pressable child. Either call the usePress hook, or wrap your DOM node with <Pressable> component.")},[]),u.a.createElement(A.Provider,{value:c},r)});function L(e){if(e.isDisabled)return{focusProps:{}};let t,r;return(e.onFocus||e.onFocusChange)&&(t=t=>{t.target===t.currentTarget&&(e.onFocus&&e.onFocus(t),e.onFocusChange&&e.onFocusChange(!0))}),(e.onBlur||e.onFocusChange)&&(r=t=>{t.target===t.currentTarget&&(e.onBlur&&e.onBlur(t),e.onFocusChange&&e.onFocusChange(!1))}),{focusProps:{onFocus:t,onBlur:r}}}new Set;"undefined"!=typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);let F=!1,R=0;function z(){F=!0,setTimeout(()=>{F=!1},50)}function U(e){"touch"===e.pointerType&&z()}function B(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent?document.addEventListener("pointerup",U):document.addEventListener("touchend",z),R++,()=>{R--,R>0||("undefined"!=typeof PointerEvent?document.removeEventListener("pointerup",U):document.removeEventListener("touchend",z))}}function H(e){if(!e)return;let t=!0;return r=>{let n=o({},r,{preventDefault(){r.preventDefault()},isDefaultPrevented:()=>r.isDefaultPrevented(),stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){t=!1}});e(n),t&&r.stopPropagation()}}u.a.createContext(null);new Set;const $=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"];$.join(",");$.push('[tabindex]:not([tabindex="-1"])');$.join(':not([tabindex="-1"]),');let G=u.a.createContext(null);u.a.forwardRef((function(e,t){let{children:r}=e,n=o({},w(e,["children"]),{ref:t});return u.a.createElement(G.Provider,{value:n},r)}));function W(e,t){let{focusProps:r}=L(e),{keyboardProps:n}=function(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:H(e.onKeyDown),onKeyUp:H(e.onKeyUp)}}}(e),i=d(r,n),a=function(e){let t=Object(s.useContext)(G)||{};return Object(s.useEffect)(()=>{if(t&&t.ref)return t.ref.current=e.current,()=>{t.ref.current=null}},[t,e]),t}(t),u=e.isDisabled?{}:a;return Object(s.useEffect)(()=>{e.autoFocus&&t.current&&t.current.focus()},[e.autoFocus,t]),{focusableProps:d(o({},i,{tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0}),u)}}function V(e,t){let r,{elementType:n="button",isDisabled:i,onPress:a,onPressStart:s,onPressEnd:u,onPressChange:c,onClick:l,href:f,target:p,rel:h,type:g="button"}=e;"button"!==n&&(r={role:"button",tabIndex:i?void 0:0,href:"a"===n&&i?void 0:f,target:"a"===n?p:void 0,type:"input"===n?g:void 0,disabled:"input"===n?i:void 0,"aria-disabled":i&&"input"!==n?i:void 0,rel:"a"===n?h:void 0});let{pressProps:m,isPressed:O}=D({onPressStart:s,onPressEnd:u,onPressChange:c,onPress:a,isDisabled:i,ref:t}),{focusableProps:P}=W(e,t),_=d(P,m);return _=d(_,function(e,t){void 0===t&&(t={});let{labelable:r,propNames:n}=t,o={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(v.has(t)||r&&y.has(t)||(null==n?void 0:n.has(t))||b.test(t))&&(o[t]=e[t]);return o}(e,{labelable:!0})),{isPressed:O,buttonProps:d(_,o({"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],disabled:i,type:g},r||{},{onClick:e=>{l&&(l(e),console.warn("onClick is deprecated, please use onPress"))}}))}}var Y=r(13),q=r.n(Y);r(35);var X="k-YIKWkpNoeaAlNSL1FRZ",Z=u.a.createElement;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ee={allowSpecificProps:["tabIndex"]},te=Object(s.forwardRef)((e,t)=>{let{children:r,className:n,isDisabled:i,size:a,skin:u}=e,c=Object(s.useRef)(),l=t||c,{buttonProps:f,isPressed:p}=V(e,l),{hoverProps:v,isHovered:y}=function(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:n,isDisabled:o}=e,[i,a]=Object(s.useState)(!1),u=Object(s.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1}).current;return Object(s.useEffect)(B,[]),{hoverProps:Object(s.useMemo)(()=>{let e=(e,n)=>{if(o||"touch"===n||u.isHovered)return;u.isHovered=!0;let i=e.target;t&&t({type:"hoverstart",target:i,pointerType:n}),r&&r(!0),a(!0)},i=(e,t)=>{if(o||"touch"===t||!u.isHovered)return;u.isHovered=!1;let i=e.target;n&&n({type:"hoverend",target:i,pointerType:t}),r&&r(!1),a(!1)},s={};return"undefined"!=typeof PointerEvent?(s.onPointerEnter=t=>{F&&"mouse"===t.pointerType||e(t,t.pointerType)},s.onPointerLeave=e=>{i(e,e.pointerType)}):(s.onTouchStart=()=>{u.ignoreEmulatedMouseEvents=!0},s.onMouseEnter=t=>{u.ignoreEmulatedMouseEvents||F||e(t,"mouse"),u.ignoreEmulatedMouseEvents=!1},s.onMouseLeave=e=>{i(e,"mouse")}),s},[t,r,n,o,u]),isHovered:i}}({isDisabled:i}),b=function(e,{allowAriaProps:t=!0,allowDataProps:r=!0,allowSpecificProps:n}={}){return Object(s.useMemo)(()=>{let o,i={},a=Object.keys(e);n&&(o=new Set(n));for(let n=0;n<a.length;++n){let s=a[n];(o&&o.has(s)||t&&("role"===s||s.startsWith("aria-"))||r&&s.startsWith("data-"))&&(i[s]=e[s])}return i},[t,r,n,e])}(e,ee);return Z("button",o({className:`inline-flex ${X} ${n}`,"data-active":p||null,"data-hover":y||null,"data-size":a,"data-skin":u},d(f,v),b,{ref:l}),r)});t.a=te;q.a.string,q.a.oneOf(["small","medium","large"]),q.a.oneOf(["accent","default","destructive","transparent"]);te.defaultProps=J(J({},{className:"",size:"medium",skin:"default"}),{},{isDisabled:!1,type:"button"})},function(e,t,r){"use strict";var n=function(){};e.exports=n},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(7),o=r(24);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(50))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(56),o=r(63),i=r(65),a=r(66),s=r(67);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,r){var n=r(68),o=r(71),i=r(72);e.exports=function(e,t,r,a,s,u){var c=1&r,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var p=u.get(e),d=u.get(t);if(p&&d)return p==t&&d==e;var v=-1,y=!0,b=2&r?new n:void 0;for(u.set(e,t),u.set(t,e);++v<l;){var h=e[v],g=t[v];if(a)var m=c?a(g,h,v,t,e,u):a(h,g,v,e,t,u);if(void 0!==m){if(m)continue;y=!1;break}if(b){if(!o(t,(function(e,t){if(!i(b,t)&&(h===e||s(h,e,r,a,u)))return b.push(t)}))){y=!1;break}}else if(h!==g&&!s(h,g,r,a,u)){y=!1;break}}return u.delete(e),u.delete(t),y}},function(e,t,r){(function(e){var n=r(1),o=r(89),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;e.exports=u}).call(this,r(29)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(91),o=r(92),i=r(93),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){e.exports=require("react-dom")},function(e,t,r){"use strict";var n=r(0),o=r.n(n),i=(r(20),a()?o.a.useLayoutEffect:o.a.useEffect);"undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math&&self;function a(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var s=r(32);t.a=function(e){var t,r=e.children,a=e.type,u=void 0===a?"reach-portal":a,c=Object(n.useRef)(null),l=Object(n.useRef)(null),f=(t=Object(n.useState)(Object.create(null))[1],Object(n.useCallback)((function(){t(Object.create(null))}),[]));return i((function(){if(c.current){var e=c.current.ownerDocument;return l.current=null==e?void 0:e.createElement(u),e.body.appendChild(l.current),f(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}}),[u,f]),l.current?Object(s.createPortal)(r,l.current):o.a.createElement("span",{ref:c})}},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new v(e,t)),1!==c.length||l||s(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){var n=r(36);e.exports=function(e,t){return n(e,t)}},function(e,t,r){var n=r(37),o=r(10);e.exports=function e(t,r,i,a,s){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,a,e,s))}},function(e,t,r){var n=r(38),o=r(27),i=r(73),a=r(77),s=r(99),u=r(18),c=r(28),l=r(30),f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,d,v,y){var b=u(e),h=u(t),g=b?"[object Array]":s(e),m=h?"[object Array]":s(t),O=(g="[object Arguments]"==g?f:g)==f,P=(m="[object Arguments]"==m?f:m)==f,_=g==m;if(_&&c(e)){if(!c(t))return!1;b=!0,O=!1}if(_&&!O)return y||(y=new n),b||l(e)?o(e,t,r,d,v,y):i(e,t,g,r,d,v,y);if(!(1&r)){var j=O&&p.call(e,"__wrapped__"),w=P&&p.call(t,"__wrapped__");if(j||w){var E=j?e.value():e,x=w?t.value():t;return y||(y=new n),v(E,x,r,d,y)}}return!!_&&(y||(y=new n),a(e,t,r,d,v,y))}},function(e,t,r){var n=r(5),o=r(44),i=r(45),a=r(46),s=r(47),u=r(48);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,e.exports=c},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(6),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},function(e,t,r){var n=r(6);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(6);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(6);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(5);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(5),o=r(16),i=r(26);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(22),o=r(53),i=r(24),a=r(25),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?p:s).test(a(e))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(17),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n,o=r(54),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(1)["__core-js_shared__"];e.exports=n},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(57),o=r(5),i=r(16);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(e,t,r){var n=r(58),o=r(59),i=r(60),a=r(61),s=r(62);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,r){var n=r(8);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(8),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(8),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(8);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,r){var n=r(9);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(9);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(9);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(9);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(26),o=r(69),i=r(70);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var n=r(17),o=r(74),i=r(21),a=r(27),s=r(75),u=r(76),c=n?n.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,f,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":var v=1&n;if(d||(d=u),e.size!=t.size&&!v)return!1;var y=p.get(e);if(y)return y==t;n|=2,p.set(e,t);var b=a(d(e),d(t),n,c,f,p);return p.delete(e),b;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t,r){var n=r(1).Uint8Array;e.exports=n},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},function(e,t,r){var n=r(78),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,a,s){var u=1&r,c=n(e),l=c.length;if(l!=n(t).length&&!u)return!1;for(var f=l;f--;){var p=c[f];if(!(u?p in t:o.call(t,p)))return!1}var d=s.get(e),v=s.get(t);if(d&&v)return d==t&&v==e;var y=!0;s.set(e,t),s.set(t,e);for(var b=u;++f<l;){var h=e[p=c[f]],g=t[p];if(i)var m=u?i(g,h,p,t,e,s):i(h,g,p,e,t,s);if(!(void 0===m?h===g||a(h,g,r,i,s):m)){y=!1;break}b||(b="constructor"==p)}if(y&&!b){var O=e.constructor,P=t.constructor;O==P||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof P&&P instanceof P||(y=!1)}return s.delete(e),s.delete(t),y}},function(e,t,r){var n=r(79),o=r(81),i=r(84);e.exports=function(e){return n(e,i,o)}},function(e,t,r){var n=r(80),o=r(18);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){var n=r(82),o=r(83),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=s},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(85),o=r(94),i=r(98);e.exports=function(e){return i(e)?n(e):o(e)}},function(e,t,r){var n=r(86),o=r(87),i=r(18),a=r(28),s=r(90),u=r(30),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),l=!r&&o(e),f=!r&&!l&&a(e),p=!r&&!l&&!f&&u(e),d=r||l||f||p,v=d?n(e.length,String):[],y=v.length;for(var b in e)!t&&!c.call(e,b)||d&&("length"==b||f&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,y))||v.push(b);return v}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(88),o=r(10),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,r){var n=r(7),o=r(10);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(7),o=r(31),i=r(10),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(23),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,r(29)(e))},function(e,t,r){var n=r(95),o=r(96),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(97)(Object.keys,Object);e.exports=n},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var n=r(22),o=r(31);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t,r){var n=r(100),o=r(16),i=r(101),a=r(102),s=r(103),u=r(7),c=r(25),l=c(n),f=c(o),p=c(i),d=c(a),v=c(s),y=u;(n&&"[object DataView]"!=y(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||s&&"[object WeakMap]"!=y(new s))&&(y=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case v:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,r){var n=r(3)(r(1),"DataView");e.exports=n},function(e,t,r){var n=r(3)(r(1),"Promise");e.exports=n},function(e,t,r){var n=r(3)(r(1),"Set");e.exports=n},function(e,t,r){var n=r(3)(r(1),"WeakMap");e.exports=n},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n.a})),r.d(t,"hasBannerBeenSeen",(function(){return n.b})),r.d(t,"HydrationContext",(function(){return o.a})),r.d(t,"COOKIE_OPT_OUT",(function(){return i.COOKIE_OPT_OUT}));var n=r(15),o=r(11),i=r(2)}]);
}());SM.currentModule = null;}, '', {"requires":["js-cookie","prop-types","react","react-dom"],"node_modules":true});
YUI.add("sm-copy-link",(function(e){SM.currentModule="sm-copy-link";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("sm-analytics")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-component-textarea")),i=babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")),n=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-os-based-share-icon"));const u=(0,i.default)("div");function c(e){let{analyticLinkTypeProperty:t,analyticScreenProperty:i,buttonText:c,className:d="",copyWebUri:p,initNativeShareApi:f,isSlideshow:m,isVideo:b,onCopyLink:y,placeholder:h,showShareIcon:S,showTooltip:k,textareaEventLabel:E,textareaEventProperty:T,toolTipText:x,...C}=e,R=(0,l.useRef)(null),L=(0,l.useRef)(null),[g,q]=(0,l.useState)(1),[v,M]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=window.getComputedStyle(R.current).getPropertyValue("line-height"),t=R.current.scrollHeight;e=parseInt(e,10);let l=Math.floor(t/e);l>2?q(2):t>25&&q(l),M(!1)},[p]);let H=(0,l.useCallback)(()=>{v||(M(!0),L.current.select(),document.execCommand("copy"))},[v]);(0,l.useEffect)(()=>{if(!v)return;let e=setTimeout(()=>{M(!1)},1500);return()=>clearTimeout(e)},[v]);let P=(0,l.useCallback)(async()=>{if(!N)if(f)try{let e;w(!0),m&&(e=p),await navigator.share({text:e,url:p})}catch(e){console.error(e)}finally{w(!1)}else H()},[p,H,f,N,m]),A=(0,l.useCallback)(()=>{f?P():H()},[f,P,H]),I=(0,l.useCallback)(()=>{A(),a.default.Tracker.createEvent(a.default.CATEGORY.SHARE_PANEL,"One Click Copy",{label:E,property:T}).log()},[E,T,A]),_=(0,l.useCallback)(e=>{A(),y({linkType:t,link:e.target.value,screen:i})},[t,i,y,A]);return l.default.createElement("div",babelHelpers.extends({className:"sm-copy-link ".concat(d)},C),l.default.createElement(o.default,{className:"sm-copy-link-textarea",type:"text",placeholder:h,value:p,readOnly:!0,rows:g,ref:R,onClick:I,disabled:!p}),l.default.createElement(o.default,{className:"sm-copy-link-hidden-text",type:"text",value:p,readOnly:!0,ref:L}),l.default.createElement("div",{className:"sm-flex"},l.default.createElement(r.default,{className:"sm-button-full-width",size:r.default.SIZE_SMALL,skin:r.default.SKIN_ACCENT,onClick:_,disabled:!p},S&&f&&l.default.createElement(s.default,{className:"sm-os-based-share-icon sm-hide-large-and-up",size:s.default.SIZE_SMALL}),v?"Copied":c),k&&x&&l.default.createElement(u,{className:"sm-copy-link-tooltip-container sm-hide-small-and-down",tooltipLabel:x,tooltipAlignment:u.TOOLTIP_ALIGN_TOP},l.default.createElement(n.default,{name:"HelpEncircled",size:n.default.SIZE_SMALL}))))}c.displayName="ShareTabs.CopyLink",c.defaultProps={onCopyLink:()=>{},buttonText:"Copy Text"},c.propTypes={analyticLinkTypeProperty:e.default.string.isRequired,analyticScreenProperty:e.default.string.isRequired,buttonText:e.default.string,copyWebUri:e.default.string.isRequired,initNativeShareApi:e.default.bool.isRequired,isSlideshow:e.default.bool,isVideo:e.default.bool.isRequired,onCopyLink:e.default.func,placeholder:e.default.string,showTooltip:e.default.bool,showShareIcon:e.default.bool,textareaEventLabel:e.default.string.isRequired,textareaEventProperty:e.default.string.isRequired,toolTipText:e.default.string}}(),SM.currentModule=null}),"",{requires:["prop-types","react","react-dom","sm-analytics","sm-component-button","sm-component-textarea","sm-icon","sm-os-based-share-icon","sm-tooltip-hoc"]});
YUI.add("sm-csrf",(function(e){SM.currentModule="sm-csrf";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const r="https://"+SM.env.host.api+"/api/v2!token?APIKey="+SM.env.apiKey,n={TOKEN_PROMISE:null,REFRESH_TIMER:null,getToken:function(){return n.TOKEN_PROMISE?n.TOKEN_PROMISE:n.setToken(e.SM.io({url:r,method:"POST",headers:{accept:"application/json","x-requested-with":null},withCredentials:!0}).then(({Response:{Token:{Token:e}}}={})=>{if(e)return e;throw new Error("API responded with empty token")}))},refreshToken:function(){return n.setToken(null),n.getToken()},setToken:function(e){if(clearTimeout(n.REFRESH_TIMER),!e)return n.TOKEN_PROMISE=null,null;const r=Promise.resolve(e).then(e=>{if(r!==n.TOKEN_PROMISE){if(n.TOKEN_PROMISE)return n.TOKEN_PROMISE;throw new Error("CSRF token cleared while waiting for token promise to resolve")}return clearTimeout(n.REFRESH_TIMER),n.REFRESH_TIMER=setTimeout(n.refreshToken,36e5),e},e=>{if(r===n.TOKEN_PROMISE)throw n.TOKEN_PROMISE=null,e;if(n.TOKEN_PROMISE)return n.TOKEN_PROMISE;throw new Error("CSRF Token cleared and pending token promise rejected")});return n.TOKEN_PROMISE=r,n.TOKEN_PROMISE}};e.namespace("SM").CSRF=n;var t=n;exports.default=t}(),SM.currentModule=null}),"",{requires:["rsvp","sm","sm-dom","sm-uri-deprecated","sm-io-xhr"]});
YUI.add("sm-currency-base",(function(r){SM.currentModule="sm-currency-base";var e,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;(e=r.namespace("SM.currency")).supportedCurrencies={"en-US":{USD:{prefix:"$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"US Dollar",sortOrder:1,allowFractions:!0},GBP:{prefix:"£",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"British Pound Sterling",sortOrder:3,allowFractions:!0},AUD:{prefix:"AU$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"Australian Dollar",sortOrder:5,allowFractions:!0},CAD:{prefix:"CA$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"Canadian Dollar",sortOrder:2,allowFractions:!0},EUR:{prefix:"€",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"Euro",sortOrder:4,allowFractions:!0},JPY:{prefix:"¥",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:0,thresholdForDecimals:1e3,suffix:"",name:"Japanese Yen",sortOrder:7,inCart:1,allowFractions:!1},NZD:{prefix:"NZ$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"New Zealand Dollar",sortOrder:9,inCart:1,allowFractions:!0},CHF:{prefix:"CHF",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"Swiss Franc",sortOrder:8,inCart:1,allowFractions:!0},HKD:{prefix:"HK$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"Hong Kong Dollar",sortOrder:11,inCart:1,allowFractions:!0},SEK:{prefix:"SEK",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2,thresholdForDecimals:1e5,suffix:"",name:"Swedish Krona",sortOrder:10,inCart:1,allowFractions:!0}}},e.defaultCurrency="USD",e.defaultLocale="en-US",e.buyerCurrency=e.defaultCurrency,e.currenciesPerCard={VI:{USD:1,AUD:1,CAD:1,EUR:1,GBP:1,JPY:1,NZD:1,SEK:1,HKD:1,CHF:1},MC:{USD:1,AUD:1,CAD:1,EUR:1,GBP:1,JPY:1,NZD:1,SEK:1,HKD:1,CHF:1},AX:{USD:1,AUD:1,CAD:1,EUR:1,GBP:1,JPY:1,SEK:1,CHF:1},DI:{USD:1}},module.exports=e,SM.currentModule=null}),"",{});
YUI.add("sm-currency",(function(e){SM.currentModule="sm-currency";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},r=SM._requireShim;!function(){"use strict";var n=babelHelpers.interopRequireDefault(r("js-cookie")),t=babelHelpers.interopRequireDefault(r("sm-smuglog"));let u=e.namespace("SM.currency"),o=u.supportedCurrencies,c={locale:u.defaultLocale,currencyCode:u.defaultCurrency};u.info=function(r,n){return n=e.merge(c,n||{}),r?o[n.locale][n.currencyCode][r]||null:(t.default.console("sm-currency","Empty item passed to SM.currency.info",t.default.LEVEL_INFO),null)},u.convert=function(e,r,n){return r!==n&&(e*=u.getExchangeRate(r,n)),e},u.format=function(r,n,t){var a;return n=e.merge(c,n||{}),a=e.merge(o[n.locale][n.currencyCode],t||{}),isNaN(r)||(r=u.round(r,a.decimalPlaces),r=e.DataType.Number.format(r,a)),r},u.formatAndConvert=function(e,r,n,t,o){return u.format(u.convert(e,r,n),{currencyCode:n},o)},u.sortableArray=function(r,n){var t=[];return n=e.merge(c,n||{}),e.each(o[n.locale],(function(e,n){(void 0===r||u.validCurrencyForCard(n,r))&&t.push([n,e.sortOrder])})),t=t.sort((function(e,r){return e[1]-r[1]}))},u.generateTitleString=function(r,n,t){return e.DataType.Number.format(u.round(n,2),{decimalPlaces:2})+" "+t+" @ "+e.DataType.Number.format(u.round(r,4),{decimalPlaces:4})},u.currencySelectorOptionLabel=function(r){return r=e.merge(c,r||{}),u.info("prefix",r)+" - "+u.info("name",r)},u.currencySelectorOptions=function(r,n,t){var o,a="",i="";return t=e.merge(c,t||{}),o=u.sortableArray(n,t),e.each(o,(function(n){n=n[0],i=n===r?'selected="selected"':"",a+=e.substitute("<option value={currencyCode} {selected}>{label}</option>",{currencyCode:n,selected:i,label:u.currencySelectorOptionLabel(e.merge(t,{currencyCode:n}))})})),a},u.setCurrencyCookie=function(e){var r=void 0!==SM.hostConfig&&"string"==typeof SM.hostConfig.sessionDomain?SM.hostConfig.sessionDomain:SM.env.host.session;t.default.console("sm-currency","COOKIE: currency SET TO: ".concat(e," ON: ").concat(r),t.default.LEVEL_INFO),n.default.set("bCurr",e,{expires:new Date(+new Date+31536e6),path:"/",domain:r,secure:!0,sameSite:"None"})},u.getCurrencyCookie=function(){return n.default.get("bCurr")},u.getBuyerCurrency=function(){return n.default.get("bCurr")||SM.env.buyerCurrency||u.defaultCurrency},u.getExchangeRate=function(e,r){return e=e||c.currencyCode,r=r||e,u.exchangeRates[e][r]||1},u.validCurrencyForCard=function(e,r){var n=u.currenciesPerCard[r];return n&&n[e]},u.typeOfCreditCard=function(e){var r=parseInt(e.substring(0,4),10);return isNaN(r)&&!1,r>=2221&&r<=2720?"MC":r>=3e3&&r<=3059||r>=3600&&r<=3699||r>=3800&&r<=3889?"DC":r>=3400&&r<=3499||r>=3700&&r<=3799?"AX":r>=3088&&r<=3094||r>=3096&&r<=3102||r>=3112&&r<=3120||r>=3158&&r<=3159||r>=3337&&r<=3349||r>=3528&&r<=3589?"JC":r>=3890&&r<=3899?"CB":r>=4e3&&r<=4999?"VI":r>=5100&&r<=5599?"MC":6011===r&&"DI"},u.round=function(e,r){return r=parseInt(r>=0?r:2,10),e=Math.round((e*Math.pow(10,r)).toFixed(r))/Math.pow(10,r)},u.bulkAdd=function(e,r){var n,t,o,a=c.currencyCode,i=a,s=u.convert,l=0,d=0;for(o in e)e.hasOwnProperty(o)&&(t=e[o],r?l+=s(t,o,r):(n=s(t,o,a),Math.abs(n)>d&&(d=n,i=o)));if(r)return{amount:l,currency:r};for(o in l=0,e)e.hasOwnProperty(o)&&(l+=s(t=e[o],o,i));return{amount:l,currency:i}},module.exports=u}(),SM.currentModule=null}),"",{requires:["datatype-number-format","sm-currency-base","sm-currency-exchange-rates","substitute","js-cookie","sm-smuglog"]});
YUI.add("sm-deep-freeze",(function(e){SM.currentModule="sm-deep-freeze";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=r=>(Object.freeze(r),Object.getOwnPropertyNames(r).forEach((function(t){!r.hasOwnProperty(t)||null===r[t]||"object"!=typeof r[t]&&"function"!=typeof r[t]||Object.isFrozen(r[t])||e(r[t])})),r);var r=e;exports.default=r}(),SM.currentModule=null}),"",{});
YUI.add("sm-dialogs-action-types",(function(R){SM.currentModule="sm-dialogs-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CLEAR_WARN=exports.CLEAR_ERROR=exports.ADD_WARN=exports.ADD_ERROR=void 0;exports.ADD_ERROR="SM_DIALOG_ADD_ERROR";exports.ADD_WARN="SM_DIALOG_ADD_WARN";exports.CLEAR_ERROR="SM_DIALOG_CLEAR_ERROR";exports.CLEAR_WARN="SM_DIALOG_CLEAR_WARN"}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-dialogs-actions",(function(e){SM.currentModule="sm-dialogs-actions";var exports={},s=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addError=function(s,i={},{applyUserSkin:n=!0,dismissible:t=!0}={}){return s=s||r.DEFAULT_ERROR_MSG,{type:e.ADD_ERROR,message:s,error:i,dismissible:t,applyUserSkin:n}},exports.addWarning=function(s,i={},{applyUserSkin:n=!0,dismissible:t=!0}={}){return s=s||r.DEFAULT_WARN_MSG,{type:e.ADD_WARN,message:s,error:i,dismissible:t,applyUserSkin:n}},exports.clearError=function(){return{type:e.CLEAR_ERROR}},exports.clearWarning=function(){return{type:e.CLEAR_WARN}};var e=s("sm-dialogs-action-types"),r=s("sm-dialogs-constants")}(),SM.currentModule=null}),"",{requires:["sm","sm-dialogs-action-types","sm-dialogs-constants"]});
YUI.add("sm-dialogs-constants",(function(e){SM.currentModule="sm-dialogs-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_WARN_MSG=exports.DEFAULT_ERROR_MSG=exports.ERROR_TYPE=exports.WARNING_TYPE=void 0;exports.WARNING_TYPE="WARN";exports.ERROR_TYPE="ERROR";exports.DEFAULT_ERROR_MSG="We're so sorry, but something went wrong. You can continue but elements on the page might not work as intended.";exports.DEFAULT_WARN_MSG="We're so sorry, but something went wrong. You might be able to continue but we recommend refreshing the page."}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-dialogs-init",(function(e){SM.currentModule="sm-dialogs-init";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var r=SM._requireShim;!function(){"use strict";var e=babelHelpers.interopRequireDefault(r("sm-page")),t=babelHelpers.interopRequireDefault(r("sm-dialogs-root")),l=babelHelpers.interopRequireDefault(r("sm-dom")),a=babelHelpers.interopRequireDefault(r("react")),u=babelHelpers.interopRequireDefault(r("react-dom")),o=babelHelpers.interopRequireDefault(r("sm-redux-store")),d=r("react-redux");e.default.on("page:init",()=>{let e=l.default.doc.createElement("div");e.className="sm-dialog-mount-point",l.default.doc.body.appendChild(e),u.default.render(a.default.createElement(d.Provider,{store:o.default},a.default.createElement(t.default,null)),e)})}(),SM.currentModule=null}),"",{requires:["sm-page","sm-dialogs-root","sm-dom","react","react-dom","sm-redux-store","react-redux"]});
YUI.add("sm-dialogs-panel",(function(e){SM.currentModule="sm-dialogs-panel";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),r=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("sm-panel-alert")),a=babelHelpers.interopRequireDefault(l("sm-dom")),o=babelHelpers.interopRequireDefault(l("sm-component-textarea")),s=l("sm-dialogs-constants");function n(){a.default.doc.location.reload()}class i extends e.default.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_closeHandler",()=>{this.props.onClose(this.props.type)})}render(){let l,{applyUserSkin:r,dismissible:a,type:i,developerInfo:p,isDeveloper:d}=this.props,u=i===s.WARNING_TYPE?"WarningColored":"Warning3Colored";return d&&(l=e.default.createElement(o.default,{readOnly:!0,value:JSON.stringify(p,null,2)})),e.default.createElement(t.default,{applyUserSkin:r,title:"Let's give that another go.",onConfirm:n,confirmLabel:"Reload Page",onCancel:a?this._closeHandler:void 0,cancelLabel:"Continue As Is",iconName:u},this.renderMessage(),l)}renderMessage(){let{message:l}=this.props;return e.default.isValidElement(l)?l:e.default.createElement("p",null,l)}}babelHelpers.defineProperty(i,"displayName","GlobalDialog.Panel"),babelHelpers.defineProperty(i,"propTypes",{applyUserSkin:r.default.bool,dismissible:r.default.bool,message:r.default.oneOfType([r.default.element,r.default.string]),type:r.default.oneOf([s.ERROR_TYPE,s.WARNING_TYPE,""]),developerInfo:r.default.object,onClose:r.default.func,isDeveloper:r.default.bool}),babelHelpers.defineProperty(i,"defaultProps",{applyUserSkin:!0,dismissible:!0,onClose:()=>{},developerInfo:{},isDeveloper:!1,message:s.DEFAULT_ERROR_MSG});var p=i;exports.default=p}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-panel-alert","sm-dom","sm-component-textarea","sm-dialogs-constants"]});
YUI.add("sm-dialogs-reducers",(function(e){SM.currentModule="sm-dialogs-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=function(r={},s){switch(s.type){case e.ADD_ERROR:case e.ADD_WARN:return function(r,s){let{globalDialogs:a={},...t}=r;switch(s.type){case e.ADD_ERROR:case e.ADD_WARN:var l=s.type===e.ADD_ERROR?"error":"warn";return{...t,globalDialogs:{...a,[l]:{message:s.message,error:s.error,applyUserSkin:s.applyUserSkin,dismissible:s.dismissible}}};default:return r}}(r,s);case e.CLEAR_ERROR:case e.CLEAR_WARN:return function(r,s){let{globalDialogs:a={},...t}=r;switch(s.type){case e.CLEAR_ERROR:case e.CLEAR_WARN:var l=s.type===e.CLEAR_ERROR?"error":"warn";return{...t,globalDialogs:{...a,[l]:void 0}};default:return r}}(r,s);default:return r}};var e=r("sm-dialogs-action-types")}(),SM.currentModule=null}),"",{requires:["sm","sm-dialogs-action-types"]});
YUI.add("sm-dialogs-root",(function(e){SM.currentModule="sm-dialogs-root";var exports={},s=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=babelHelpers.interopRequireWildcard(s("react")),l=s("react-redux"),r=s("sm-dialogs-actions"),t=s("sm-dialogs-selectors"),a=babelHelpers.interopRequireDefault(s("sm-dialogs-panel")),o=s("sm-dialogs-constants");const i="-min"!==SM.env.jsLevel;function n(){let s=(0,l.useSelector)(t.getApplyUserSkin),n=(0,l.useSelector)(t.getDeveloperInfo),u=(0,l.useSelector)(t.isDismissible),c=(0,l.useSelector)(t.getMessage),d=(0,l.useSelector)(t.getMessageType),m=(0,l.useDispatch)(),g=(0,e.useCallback)(()=>{let e=d===o.ERROR_TYPE?r.clearError:r.clearWarning;m(e())},[d,m]);return c?e.default.createElement(a.default,{applyUserSkin:s,developerInfo:n,dismissible:u,message:c,type:d,onClose:g,isDeveloper:i}):e.default.createElement("div",null)}n.displayName="GlobalDialog"}(),SM.currentModule=null}),"",{requires:["react","react-redux","sm-dialogs-actions","sm-dialogs-selectors","sm-dialogs-panel","sm-dialogs-constants"]});
YUI.add("sm-dialogs-selectors",(function(e){SM.currentModule="sm-dialogs-selectors";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMessageType=function(r){let{ui:{globalDialogs:{error:t,warn:n}={}}={}}=r;if(t)return e.ERROR_TYPE;if(n)return e.WARNING_TYPE;return""},exports.getMessage=function(e){let{message:r}=t(e);return r||""},exports.getApplyUserSkin=function(e){let{applyUserSkin:r=!0}=t(e);return r},exports.isDismissible=function(e){let{dismissible:r=!0}=t(e);return r},exports.getDeveloperInfo=function(e){let{error:r}=t(e);return r};var e=r("sm-dialogs-constants");function t(e){let{ui:{globalDialogs:{error:r,warn:t}={}}={}}=e;return r||(t||{})}}(),SM.currentModule=null}),"",{requires:["sm","sm-dialogs-constants"]});
YUI.add("sm-dom-core",(function(e){SM.currentModule="sm-dom-core";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowser=exports.win=exports.doc=exports.default=void 0;const e={};e.win=(()=>{if("undefined"==typeof window){const e=o,{JSDOM:n}=e("jsdom");return new n("",{pretendToBeVisual:!0,url:"https://www.smugmug.com"}).window}return window})(),e.doc=e.win&&e.win.document,e.isBrowser="undefined"!=typeof document&&"undefined"!=typeof window;var n=e;exports.default=n;const{doc:r,win:d,isBrowser:u}=e;exports.isBrowser=u,exports.win=d,exports.doc=r}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-dom-network-info",(function(e){SM.currentModule="sm-dom-network-info";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(o("sm-dom-core"));const{connection:r={}}=e.default.win.navigator;let t=r;var n=Object.freeze({get connection(){return t},set connection(e){t=e||r},get saveData(){return Boolean(t.saveData)}});exports.default=n}(),SM.currentModule=null}),"",{requires:["sm-dom-core"]});
YUI.add("sm-dom-supports-link-rel",(function(e){SM.currentModule="sm-dom-supports-link-rel";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,o={}){let{cache:u=t}=o,l=u.get(r);if(void 0===l){try{let{relList:t}=e.default.doc.createElement("link");l=Boolean(t&&"function"==typeof t.supports&&t.supports(r))}catch(e){l=!1}u.set(r,l)}return l};var e=babelHelpers.interopRequireDefault(r("sm-dom-core"));const t=new Map}(),SM.currentModule=null}),"",{requires:["sm-dom-core"]});
YUI.add("sm-dom",(function(e){SM.currentModule="sm-dom";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exitFullscreen=exports.enterFullscreen=exports.isFullscreen=exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("lodash")),l=babelHelpers.interopRequireDefault(t("smoothscroll-polyfill")),n=babelHelpers.interopRequireDefault(t("sm-dom-core")),r=babelHelpers.interopRequireDefault(t("sm-ua"));let{isChrome:u,os:o}=new r.default;var a,i=["altKey","button","buttons","changedTouches","charCode","clientX","clientY","ctrlKey","currentPoint","deltaMode","deltaX","deltaY","deltaZ","height","hwTimestamp","identifier","intermediatePoints","isPrimary","keyCode","metaKey","pageX","pageY","pointerId","pointerType","pressure","relatedTarget","shiftKey","target","targetTouches","tiltX","tiltY","timestamp","touches","type","which","width"],d=/(^|\W):scope($|\W)/gi;let s;function f(){var e=!n.default._alwaysUseShims&&n.default._supports.scopedSelectors;return void 0===e&&(e=!1,function(){try{var t=n.default.doc.createElement("div");t.innerHTML="<div><span></span></div>",e=null===t.querySelector(":scope > span")&&t.querySelector(":scope > div")===t.children[0]}catch(e){}}(),n.default._supports.scopedSelectors=e),e}n.default.FULL_SCREEN_CHANGE_EVENTS=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n.default.fullscreenEnabled=!!(n.default.doc.fullscreenEnabled||n.default.doc.webkitFullscreenEnabled||n.default.doc.mozFullScreenEnabled||n.default.doc.msFullscreenEnabled),n.default.enterFullscreen=function(){if(!n.default.fullscreenEnabled||n.default.isFullscreen())return;let e=n.default.doc.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},n.default.exitFullscreen=function(){if(!n.default.fullscreenEnabled||!n.default.isFullscreen())return;let e=n.default.doc;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()},n.default.isFullscreen=function(){let e=n.default.doc;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement},n.default.toggleFullscreen=function(){n.default.isFullscreen()?n.default.exitFullscreen():n.default.enterFullscreen()},n.default.isStandalone=n.default.win.navigator.standalone||n.default.win.matchMedia&&n.default.win.matchMedia("(display-mode: standalone)").matches,n.default._alwaysUseShims=!1,n.default._supports={},n.default.addEventListener=function(e,t,l,n,r){function u(){return l.apply(n||this,arguments)}return r||(r=!1),u._eventCapture=r,u._eventEl=e,u._eventType=t,e.addEventListener(t,u,r),u},n.default.classList=function(e){return e.classList},n.default.closest=function(e,t){var l,r=typeof t,u=e.correspondingUseElement||e;for(l="function"===r?t:"string"===r?function(e){return n.default.matches(e,t)}:function(e){return e===t};u;){if(l(u))return u;u=u.parentNode}return null},n.default.delegate=function(t,l,r,u,o){return n.default.addEventListener(t,l,(function(l){var a,d=l.target;if("string"==typeof u){for(var s=-1,f=Array.prototype.slice.call(n.default.querySelectorAll(u,t));s<0&&d&&d!==t;)s=f.indexOf(d),d=d.parentNode;s>-1&&(a=f[s])}else if(d===u)a=d;else for(;d&&d!==t;){if(d===u){a=d;break}d=d.parentNode}a&&r.call(o,Object.assign(e.default.pick(l,i),{container:t,currentTarget:a,preventDefault:l.preventDefault.bind(l),stopPropagation:l.stopPropagation.bind(l)}))}))},n.default.escapeMobileWebApp=function(e){let t=n.default.doc.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank");let l=n.default.doc.createEvent("HTMLEvents");l.initEvent("click",!0,!0),t.dispatchEvent(l)},n.default.fixVhElements=()=>{if(!s)return;const e={"data-vh-height":"height","data-vh-maxheight":"maxHeight","data-vh-minheight":"minHeight"};for(let t=0,l=s.length;t<l;t++){let l=s[t];Object.keys(e).forEach(t=>{let r=l.getAttribute(t);if(!r||r.length>19)return;let u=parseInt(r,10),o=!isNaN(u),a=!o&&0===r.indexOf("calc");if(!o&&!a)return;let i=e[t],d=n.default.win.innerHeight;if(a){let e=/([0-9]{1,3})vh/g;l.style[i]=r.replace(e,(e,t)=>"".concat(d*t/100,"px"))}else l.style[i]="".concat(d*u/100,"px")})}},n.default.getAbsoluteBoundingRect=function(e){var t=n.default.win.pageXOffset,l=n.default.win.pageYOffset,r=e.getBoundingClientRect();return{bottom:r.bottom+l,height:r.height,left:r.left+t,right:r.right+t,top:r.top+l,width:r.width}},n.default.getElementScrollingWidth=function(e){var t=n.default.doc.body,l=t.style.overflowY;t.style.overflowY="scroll";var r=e.offsetWidth;return t.style.overflowY=l,r},n.default.getScrollbarWidth=function(){if(!a){var e=n.default.doc.createElement("div"),t=n.default.doc.body;e.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;",e.appendChild(n.default.doc.createElement("p")).style.height="1px",t.insertBefore(e,t.firstChild),a=e.offsetWidth-e.clientWidth,t.removeChild(e)}return a},n.default.getViewportRect=function(){var e=n.default.win.innerHeight||n.default.doc.documentElement.clientHeight,t=n.default.win.pageXOffset,l=n.default.win.pageYOffset,r=n.default.win.innerWidth||n.default.doc.documentElement.clientWidth;return{bottom:l+e,height:e,left:t,right:t+r,top:l,width:r}},n.default.matches=function(e,t){return Boolean(e.matches&&e.matches(t))},n.default.querySelector=function(e,t){return t||(t=n.default.doc),t!==n.default.doc&&e.match(d)&&!f()&&(e=e.replace(d,"$1#"+n.default.stampId(t)+"$2"),t=n.default.doc),t.querySelector(e)},n.default.querySelectorAll=function(e,t){return t||(t=n.default.doc),t!==n.default.doc&&e.match(d)&&!f()&&(e=e.replace(d,"$1#"+n.default.stampId(t)+"$2"),t=n.default.doc),t.querySelectorAll(e)},n.default.removeEventListener=function(e){var t=e._eventEl,l=e._eventType;t&&l&&t.removeEventListener(l,e,e._eventCapture)},n.default.scrollIntoViewIfNeeded=function(e,t){if(n.default.isBrowser)if(void 0===t&&(t=!0),function(){var e=!n.default._alwaysUseShims&&n.default._supports.scrollIntoViewIfNeeded;if(void 0===e){var t=n.default.doc.createElement("div");e=!!t.scrollIntoViewIfNeeded,n.default._supports.supportsScrollIntoViewIfNeeded=e}return e}())e.scrollIntoViewIfNeeded(t);else{var l=function(e){var t=e.parentNode;return t===document?document:t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth?t:l(t)},r=n.default.win.scrollY,u=n.default.win.scrollX,o=l(e);o===document&&(o=o.body,r=-1);var a=o.getBoundingClientRect(),i=e.getBoundingClientRect();(i.top<a.top||i.bottom>a.bottom||i.right>a.right||i.left<a.left)&&(e.scrollIntoView(t),-1===r||t||n.default.win.scroll(u,r))}},n.default.setPosition=function(e,t){var l=n.default.win.getComputedStyle(e).position,r="relative"===l;r||"absolute"===l||(e.style.position="absolute");var u={left:0,top:0},o=e.offsetParent;if(r){void 0!==t.left&&(e.style.left="0px"),void 0!==t.top&&(e.style.top="0px");var a=n.default.getAbsoluteBoundingRect(e);u.left=-1*a.left,u.top=-1*a.top}else if(o&&o!==n.default.doc.documentElement){var i=n.default.getAbsoluteBoundingRect(o);u.left=-1*i.left,u.top=-1*i.top}return void 0!==t.left&&(e.style.left=u.left+t.left+"px"),void 0!==t.top&&(e.style.top=u.top+t.top+"px"),this},n.default.stampId=function(e){var t=e.id;if(t)return t;do{t="sm-dom-"+Math.random().toString().substr(2,4)}while(n.default.doc.getElementById(t));return e.id=t,t},n.default.inIframe=function(){try{return n.default.win.self!==n.default.win.top}catch(e){return!0}},n.default.supportsDragover=()=>!("Android"===o||"iOS"===o||"Windows Phone"===o),("iOS"===o||"Android"===o&&u)&&(s=n.default.doc.getElementsByClassName("sm-vh"),n.default.win.addEventListener("resize",e.default.debounce(n.default.fixVhElements,250))),n.default.isBrowser&&l.default.polyfill(),n.default.isBrowser&&!HTMLCanvasElement.prototype.toBlob&&Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,l){let n=this;setTimeout(()=>{let r=atob(n.toDataURL(t,l).split(",")[1]),u=r.length,o=new Uint8Array(u);for(let e=0;e<u;e++)o[e]=r.charCodeAt(e);e(new Blob([o],{type:t||"image/png"}))})}});var c=n.default;exports.default=c;const{isFullscreen:p,enterFullscreen:h,exitFullscreen:m}=n.default;exports.exitFullscreen=m,exports.enterFullscreen=h,exports.isFullscreen=p}(),SM.currentModule=null}),"",{requires:["lodash","sm-dom-core","sm-ua","smoothscroll-polyfill","focus-visible"]});
YUI.add("sm-dropdown-view",(function(e){SM.currentModule="sm-dropdown-view";var t,n,o;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Template.Micro,n=e.Node,o={OPEN:"open",OPENING:"opening",CLOSED:"closed",CLOSING:"closing"},e.namespace("SM.Views").Dropdown=e.Base.create("sm-dropdown-view",e.View,[],{containerTemplate:"<button />",_selectContainerTemplate:t.compile('<div class="sm-dropdown-select"><%== data.renderedSelect %></div>'),_selectedOptionContainerTemplate:t.compile('<span class="sm-dropdown-option-selected"><%== data.renderedSelectedOption %></span>'),_optionsContainerTemplate:'<ul class="sm-dropdown-options" />',_availableOptionContainerTemplate:t.compile('<li class="sm-dropdown-option" data-index="<%== data.optionIndex %>" data-value="<%== data.value %>" data-label="<%== data.label %>"><%== data.renderedOption %></li>'),_dropdownState:null,_selectedOption:null,_valueMap:null,initializer:function(e){this._width=this.get("width"),this._height=this.get("height"),this._valueMap={}},destructor:function(){this._detachDropdownEvents()},render:function(){var t,s,i=this.get("container"),a=this.get("items"),l=this.get("availableOptionTemplate"),d=this.get("selectTemplate"),r=this.get("classNames"),p=n.create(this._optionsContainerTemplate),c=this._width,h=this._getOptionsPanel();i.addClass("sm-dropdown"),this.get("noChrome")?i.addClass("sm-nochrome"):i.removeClass("sm-nochrome"),r.optionsContainer&&p.addClass(r.optionsContainer.join(" "));for(var u=0;u<a.length;u++)s=a[u],t=n.create(this._availableOptionContainerTemplate({optionIndex:u,label:s.label,value:s.value,renderedOption:l(s)})),r.optionContainer&&t.addClass(r.optionContainer.join(" ")),p.append(t),this._valueMap[s.value]=u;return this._selectNode=n.create(this._selectContainerTemplate({renderedSelect:d()})),p.setStyle("height",this.get("height")),i.empty().setHTML(this._selectNode).addClass("sm-dropdown-"+o.CLOSED),h.setStdModContent(e.WidgetStdMod.BODY,p,e.WidgetStdMod.REPLACE),c||p.setStyle("width",this._calculateMinWidth()),this._attachDropdownEvents(),this._dropdownState=o.CLOSED,this},open:function(){return this._getOptionsPanel().show(),this},close:function(){return this._getOptionsPanel().hide(),this},setSelectedValue:function(e,t){var n=this.get("items"),o=this.get("selectedOptionTemplate"),s=n[this._valueMap[e]];this._selectNode,this.selectedItem=s,this.set("value",e,t),e?this._selectNode.setHTML(this._selectedOptionContainerTemplate({selectedValue:e,renderedSelectedOption:o(s)})):this._selectNode.setHTML(this.get("selectTemplate")())},_getOptionsPanel:function(){if(!this._optionsPanel){var t=this._width,n={zIndex:1,render:!0,visible:!1,hideOn:[{eventName:"clickoutside"}]};t&&(n.width=t),this._optionsPanel=new e.SM.Panel(n),this._optionsPanel.get("boundingBox").addClass("sm-dropdown-options-panel")}return this._optionsPanel},_calculateMinWidth:function(){var t,n,o=this.get("container"),s=o.inDoc(),i=this._getOptionsPanel().getStdModNode(e.WidgetStdMod.BODY).one(".sm-dropdown-options");return s||(o.setStyle("position","absolute"),o.appendTo(e.one("body"))),t=parseInt(this._selectNode.get("offsetWidth"),10),n=parseInt(i.get("offsetWidth"),10),s||(o.setStyle("position",null),o.remove()),(t>n?t:n)+"px"},_attachDropdownEvents:function(){var t=this.get("container"),n=this._getOptionsPanel();this._detachDropdownEvents(),this._eventHandles=[n.after("visibleChange",(function(e){var n=e.newVal;n?t.removeClass("sm-dropdown-"+o.CLOSED).addClass("sm-dropdown-"+o.OPEN):t.removeClass("sm-dropdown-"+o.OPEN).addClass("sm-dropdown-"+o.CLOSED),this._dropdownState=n?o.OPEN:o.CLOSED}),this),t.on("click",this._onDropdownClick,this),e.delegate("click",this._onOptionClick,n.get("boundingBox"),".sm-dropdown-options > .sm-dropdown-option",this)]},_detachDropdownEvents:function(){new e.EventHandle(this._eventHandles).detach(),this._eventHandles=[]},_onDropdownClick:function(t){var n=this._selectNode,o=this._getOptionsPanel();o.get("visible")||(o.align(n,[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL]),o.get("boundingBox").get("region").right>e.DOM.winWidth()&&o.align(n,[e.WidgetPositionAlign.TR,e.WidgetPositionAlign.BR]),o.show(),o.move(o.get("x")-1,o.get("y")))},_onOptionClick:function(e){this.get("container");var t=e.currentTarget,n=(t.getData("label"),t.getData("value")),o=this._getOptionsPanel();this._selectedOption&&this._selectedOption.removeClass("sm-dropdown-option-selected"),t.addClass("sm-dropdown-option-selected"),this._selectedOption=t,o.hide(),this.setSelectedValue(n)}},{STATES:o,ATTRS:{availableOptionTemplate:{value:null,getter:function(e){return e&&"function"!=typeof e&&(e=t.compile(e),this._setStateVal("availableOptionTemplate",e)),e}},classNames:{value:{}},height:{value:300,getter:function(e){return e&&"number"==typeof e&&(e=parseInt(e,10)+"px"),e}},items:{value:null},noChrome:{value:!1},optionsContainerTemplate:{valueFn:function(e){return'<ul class="sm-dropdown-options />'}},selectTemplate:{valueFn:function(e){return t.compile('<span class="sm-dropdown-select-default"><span class="sm-dropdown-select-text">'+this.get("selectText")+'</span><span class="sm-form-field-select-arrow sm-fonticon-sml sm-fonticon-AngleBracketDown"></span></span>')},readOnly:!0},selectText:{value:"Choose..."},selectedOptionTemplate:{valueFn:function(e){return t.compile('<span><span class="sm-dropdown-selected-text"><%= data.label %></span><span class="sm-form-field-select-arrow sm-fonticon-sml sm-fonticon-AngleBracketDown"></span></span>')},getter:function(e){return e&&"function"!=typeof e&&(e=t.compile(e),this._setStateVal("selectedOptionTemplate",e)),e}},value:{},width:{value:null,getter:function(e){return e&&"number"==typeof e&&(e=parseInt(e,10)+"px"),e}}}}),SM.currentModule=null}),"",{requires:["view","node","template-micro","sm-panel"]});
YUI.add("sm-editor-toolbar",(function(e){SM.currentModule="sm-editor-toolbar";var t;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Base.create("editorToolbar",e.Plugin.Base,[],{initializer:function(){this.editor=this.get("host"),this.container=e.Node.create("<div></div>"),this.textStyleDropdown=new e.SM.Views.Dropdown({availableOptionTemplate:'<div style="padding: 8px 16px;" unselectable="on"><<%=data.value%>><%=data.label%></<%=data.value%>></div>',command:"formatBlock",height:"auto",items:[{label:"Heading - 1",value:"h1"},{label:"Heading - 2",value:"h2"},{label:"Heading - 3",value:"h3"},{label:"Heading - 4",value:"h4"},{label:"Normal",value:"p"}],selectText:"",width:200}),this.textSizeDropdown=new e.SM.Views.Dropdown({availableOptionTemplate:'<% data.tag || (data.tag = "span") %><div style="padding: 8px 16px;" unselectable="on"><%=data.label%></div>',command:"fontSize",height:"auto",items:[{label:" ",value:""},{label:"12",value:"12px"},{label:"14",value:"14px"},{label:"16",value:"16px"},{label:"20",value:"20px"},{label:"24",value:"24px"},{label:"32",value:"32px"},{label:"44",value:"44px"},{label:"56",value:"56px"}],selectText:"",width:50}),this.editor._rendered&&this.render(),this._attachEvents()},destructor:function(){this._detachEvents()},render:function(){var t=this.container;return this.textStyleDropdown.render().get("container").addClass("sm-editor-cmd-textstyle"),this.textSizeDropdown.render().get("container").addClass("sm-editor-cmd-textsize"),t.addClass("sm-editor-toolbar").append(this.textStyleDropdown.get("container")).append(this.textSizeDropdown.get("container")).append(e.SM.Templates.buttonGroup({buttons:[{className:"sm-editor-toggle-cmd sm-editor-cmd-bold",icon:"Bold",title:"Bold",value:"bold"},{className:"sm-editor-toggle-cmd sm-editor-cmd-italic",icon:"Italic",title:"Italic",value:"italic"},{className:"sm-editor-toggle-cmd sm-editor-cmd-underline",icon:"Underline",title:"Underline",value:"underline"}],size:"small"})).append(e.SM.Templates.buttonGroup({buttons:[{className:"sm-editor-toggle-cmd sm-editor-cmd-justifyleft",icon:"TextStyleAlignLeft",title:"Align Left",value:"justifyLeft"},{className:"sm-editor-toggle-cmd sm-editor-cmd-justifycenter",icon:"TextStyleCenter",title:"Center",value:"justifyCenter"},{className:"sm-editor-toggle-cmd sm-editor-cmd-justifyright",icon:"TextStyleAlignRight",title:"Align Right",value:"justifyRight"},{className:"sm-editor-toggle-cmd sm-editor-cmd-justifyfull",icon:"TextStyleJustify",title:"Justify",value:"justifyFull"}],size:"small"})).append(e.SM.Templates.buttonGroup({buttons:[{className:"sm-editor-cmd-createlink",icon:"Link",title:"Create Link"}],size:"small"})),this.editor.get("container").insert(t,this.editor._inputNode),this},showLinkDialog:function(t){var i=this._createLinkDialog();return i.render(),i.form.get("model").setAttrs({text:t.text||"",href:t.href||"",target:"_self"===t.target}),e.Promise((function(e,t){i.on("confirm",(function(){var t=[],i=this.form,a=i.get("model").toJSON();a.target=a.target?"_blank":"_self",""===a.text&&t.push({Field:"text",Message:"Text cannot be blank"}),""===a.href&&t.push({Field:"href",Message:"Links need to go somewhere!"}),a.href.trim().match(/^(mailto:)?([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)?a.href=a.href.replace(/^(mailto:?)?(.*)/,"mailto:$2"):a.href=a.href.replace(/^(http(s)?:\/\/)?(.*)/,"http$2://$3"),t.length?i.setErrors(t):(this.hide(),e(a))})),i.on("cancel",(function(){this.hide(),t()})),i.show()}))},_attachEvents:function(){var e=this.container,t=this.editor;this._toolbarHandles=[t.after("selectionChange",this._afterHostSelectionChange,this),e.delegate("click",this._onToggleCmdClick,".sm-button.sm-editor-toggle-cmd",this),e.delegate("click",this._onLinkCmdClick,".sm-button.sm-editor-cmd-createlink",this),this.textStyleDropdown.after("valueChange",this._afterValueCmdChange,this),this.textSizeDropdown.after("valueChange",this._afterValueCmdChange,this)],t._rendered||t.onceAfter("render",this.render,this)},_createLinkDialog:function(){var t=new e.SM.Panel({centered:!0,modal:!0,smbuttons:[{value:"cancel",label:"Cancel"},{value:"confirm",label:"Add Link",skin:"submit"}],title:"Add Link",titleLocation:"outside",width:400,zIndex:1});return t.form=new e.SM.Form({fields:[{label:"Text",name:"text",type:"text"},{label:"URL",name:"href",type:"text"},{label:"Open in a new window",labelOn:"Yes",labelOff:"No",name:"target",type:"toggle"}]}),t.on("render",(function(){this.setStdModContent(e.WidgetStdMod.BODY,this.form.render().get("container"))})),t.on("visibleChange",(function(e){e.newVal||this.destroy()})),t.get("contentBox").delegate("click",(function(e){var t=e.currentTarget.getData("value");this.fire(t)}),".sm-button",t),t},_detachEvents:function(){new e.EventHandle(this._toolbarHandles).detach()},_syncSelectionState:function(){var t,i=this.editor;e.Object.each(i.commands,(function(e,a){var n=i.query(a);switch(a){case"fontSize":this.textSizeDropdown.setSelectedValue(n,{src:"sync"});break;case"formatBlock":1===n.size()?"div"===(n=n.item(0).get("tagName").toLowerCase())&&(n="p"):n=null,this.textStyleDropdown.setSelectedValue(n,{src:"sync"});break;case"bold":case"createLink":case"italic":case"justifyCenter":case"justifyLeft":case"justifyRight":case"justifyFull":case"underline":t=this.container.one(".sm-editor-cmd-"+a.toLowerCase()),n?t.replaceClass("sm-button-skin-default","sm-button-skin-submit"):t.replaceClass("sm-button-skin-submit","sm-button-skin-default")}}),this)},_afterHostSelectionChange:function(){this._syncSelectionState()},_afterTextStyleChange:function(e){if("sync"!==e.src){var t=e.currentTarget.selectedItem;this.editor.command("formatBlock",t.tag)}},_afterValueCmdChange:function(e){if("sync"!==e.src){var t=e.currentTarget,i=t.selectedItem;this.editor.command(t.get("command"),i.value)}},_onLinkCmdClick:function(t){if(1===t.button){var i=this.editor;i.isLink()?i.command("unlink"):this.showLinkDialog({text:i.selection.range().toString()}).then(e.bind(i.command,i,"createLink"))}},_onToggleCmdClick:function(e){if(1===e.button){var t=e.currentTarget,i=t.getData("value");this.editor.command(i,"toggle")?t.replaceClass("sm-button-skin-default","sm-button-skin-submit"):t.replaceClass("sm-button-skin-submit","sm-button-skin-default")}}},{NS:"EditorToolbar",NAME:"toolbar"}),e.namespace("SM.Editor").Toolbar=t,SM.currentModule=null}),"",{requires:["base","gallery-sm-editor","plugin","promise","sm-dropdown-view"]});
YUI.add("sm-elevio",(function(e){SM.currentModule="sm-elevio";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=SM.import("rsvp"),t=SM.import("sm-dom"),o=t.doc,s=t.win;let n=null,i=!1,r=!1;const a="//cdn.elev.io/sdk/bootloader/v4/elevio-bootloader.js?cid=".concat("59078f83941bf");exports.default=class{static initialize(t={}){if(!n){n=e.defer(),s._elev=t;let{_elev:i}=s;i.account_id="59078f83941bf",i.disabledModules=[8],i.events||(s._elev.events={}),i.events.afterLoad=this._afterLoad.bind(this),i.events.widgetClosed=this._widgetClosed.bind(this),i.events.widgetOpened=this._widgetOpened.bind(this);let r,d=o.createElement("script");d.async=!0,d.src=a,d.onerror=n.reject,r=o.getElementsByTagName("script")[0],r.parentNode.insertBefore(d,r)}return n.promise}static close(){s._elev.close()}static isLoaded(){return i}static isOpen(){return r}static open(){s._elev.open()}static openCategoryGettingStarted(){this._openCategory(63)}static openCategoryAccountManagement(){this._openCategory(55)}static openCategoryBuyingPrints(){this._openCategory(80)}static openCategoryContentManagement(){this._openCategory(65)}static openCategoryPrivacyAndSecurity(){this._openCategory(68)}static openCategoryPersonalizing(){this._openCategory(74)}static openCategorySharing(){this._openCategory(77)}static openCategorySellingPrints(){this._openCategory(84)}static openHome(){s._elev.openHome()}static openStatusPage(){s._elev.openModule(2)}static setKeywords(e){s._elev.setKeywords(e)}static _afterLoad(){i=!0,s._elev.on("ready",()=>{this._setSupportCenterTextAndListeners(),n.resolve()})}static _openCategory(e){s._elev.openCategory(e)}static _setSupportCenterTextAndListeners(){o.querySelector("._elevio_widget").addEventListener("click",e=>{"Help Center"===e.target.textContent&&s.open("https://help.smugmug.com","_blank")})}static _widgetClosed(){r=!1,o.body.setAttribute("data-help-menu-enabled","false"),setTimeout(()=>{o.body.setAttribute("data-help-open","false")},500)}static _widgetOpened(){r=!0,o.body.setAttribute("data-help-open","true"),setTimeout(()=>{o.body.setAttribute("data-help-menu-enabled","true")},500)}}}(),SM.currentModule=null}),"",{requires:["rsvp","sm-dom"]});
YUI.add("sm-embed-size-dropdown-helpers",(function(e){SM.currentModule="sm-embed-size-dropdown-helpers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSizeName=void 0;var e=r("sm-share-constants");exports.getSizeName=(r,t)=>{let n=e.FRIENDLY_SIZE_NAMES[r.Name];return n?t?n:"".concat(n,": ").concat(r.DisplayWidth," x ").concat(r.DisplayHeight):null}}(),SM.currentModule=null}),"",{requires:["sm-share-constants"]});
YUI.add("sm-embed-size-dropdown",(function(e){SM.currentModule="sm-embed-size-dropdown";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=babelHelpers.interopRequireWildcard(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-underlineformfield")),r=babelHelpers.interopRequireWildcard(t("sm-component-select")),i=babelHelpers.interopRequireDefault(t("sm-image-sizes")),s=t("sm-embed-size-dropdown-helpers"),o=babelHelpers.interopRequireDefault(t("sm-analytics"));function n(t){let{imageSizes:l,isVideo:n,selectedSize:d,setSelectedSize:u,panelLocation:m}=t,c=n?"Video":"Photo",p=n?i.default.TYPE_VIDEO:i.default.TYPE_PHOTO,f=l.getSortedSizes({type:p}),S=(0,e.useCallback)(e=>{let t;if(n){let l=f.find(t=>t.Name===e.target.value);t=(0,s.getSizeName)(l,n)}else t=e.target.value.replace("ImageSize","");o.default.Tracker.createEvent(o.default.CATEGORY.SHARE_PANEL,"Size Select",{label:t,property:m}).log(),u(e.target.value)},[m,u,n,f]);return e.default.createElement(a.default,{className:"sm-share-size-dropdown",label:"".concat(c," Size")},e.default.createElement(r.Select,{noChrome:!0,onChange:S,value:d},e.default.createElement(r.SelectOption,{key:"choose-a-size",value:""},"Choose a size"),f.map(t=>{let l=(0,s.getSizeName)(t,n);if(l)return e.default.createElement(r.SelectOption,{value:t.Name,key:"size-option-"+t.Name},l)})))}n.propTypes={imageSizes:l.default.object.isRequired,isVideo:l.default.bool,selectedSize:l.default.string,setSelectedSize:l.default.func.isRequired},n.displayName="ShareTabs.EmbedSizeDropdown"}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-analytics","sm-component-underlineformfield","sm-component-select","sm-embed-size-dropdown-helpers","sm-image-sizes","sm-share-constants"]});
YUI.add("sm-error-boundary-hoc",(function(e){SM.currentModule="sm-error-boundary-hoc";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,i={}){class u extends e.Component{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",{caughtError:null}),babelHelpers.defineProperty(this,"_onAlertDismiss",()=>{this.setState({caughtError:null})})}componentDidCatch(e,t){let a={[o.default.FIELD_ERROR]:e.toString(),url:s.default.doc.URL};t&&t.componentStack&&(a[o.default.FIELD_MESSAGE]=t.componentStack.trim().replace(/\n\s*/g,";"));try{o.default.add(i.logCategory||n.logCategory,a,o.default.LEVEL_ERROR)}catch(e){}r.default.withScope(s=>{s.setExtra("category",i.logCategory||n.logCategory),t&&Object.keys(t).forEach(e=>{s.setExtra(e,t[e])}),r.default.captureException(e)}),this.setState({caughtError:!0})}render(){let{caughtError:r}=this.state;if(null!==r){let{dismissible:t,message:r}={...n,...i};return e.default.createElement(a.default,{dismissible:t,message:r,onClose:this._onAlertDismiss,type:l.ERROR_TYPE})}return e.default.createElement(t,this.props)}}return babelHelpers.defineProperty(u,"displayName","WithErrorBoundary(".concat(function(e){return e.displayName||e.name||"Component"}(t),")")),u};var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("sm-sentry-init")),s=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("sm-smuglog")),a=babelHelpers.interopRequireDefault(t("sm-dialogs-panel")),l=t("sm-dialogs-constants");const n={dismissible:!0,logCategory:"sm-error-boundary-hoc",message:l.DEFAULT_ERROR_MSG}}(),SM.currentModule=null}),"",{requires:["react","sm-sentry-init","sm-dom","sm-smuglog","sm-dialogs-panel","sm-dialogs-constants"]});
YUI.add("sm-event-emitter",(function(t){SM.currentModule="sm-event-emitter";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";function e(){}e.prototype.addTarget=function(t){return this!==t&&(this._initEventEmitter(),this._eventEmitter.targets.push(t)),this},e.prototype.emit=function(t){var e=this._eventEmitter;if(!e)return this;for(var r,n,i=[],s=[this],u={},h=0;h<s.length;++h)(r=s[h]._eventEmitter)&&!u[r.id]&&((n=r.events[t])&&i.push.apply(i,n),r.targets.length&&s.push.apply(s,r.targets),u[r.id]=!0);if(!i.length)return this;var o=arguments.length,v=new Array(o);for(h=1;h<o;++h)v[h-1]=arguments[h];var a,p=i.length;for(h=0;h<p;++h)a=i[h],v[o-1]={currentTarget:a.currentTarget,handle:a,target:this,type:a.type},a.listener.apply(a.thisObj,v);return this},e.prototype.on=function(t,e,r){this._initEventEmitter();var n,i=this._eventEmitter.events;return n={currentTarget:this,listener:e,thisObj:r||this,type:t},i[t]||(i[t]=[]),i[t].push(n),n},e.prototype.removeAllListeners=function(t){var e=this._eventEmitter&&this._eventEmitter.events;return e&&(t?e[t]&&delete e[t]:this._eventEmitter.events={}),this},e.prototype.removeListener=function(t){var e=this._eventEmitter&&this._eventEmitter.events,r=e&&e[t.type];if(r){for(var n=r.length;--n>-1;)if(r[n]===t){r.splice(n,1);break}0===r.length&&delete e[t.type],t.listener=null,t.thisObj=null}return this},e.prototype.removeTarget=function(t){var e=this._eventEmitter&&this._eventEmitter.targets;if(e&&e.length){var r=e.lastIndexOf(t);r>-1&&e.splice(r,1)}return this},e.prototype._initEventEmitter=function(){this._eventEmitter||(e._guidCount||(e._guidCount=0),Object.defineProperty(this,"_eventEmitter",{value:{events:{},id:""+(e._guidCount+=1)+Math.random(),targets:[]}}))},t.namespace("SM").EventEmitter=module.exports=e}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-expandable-hoc",(function(e){SM.currentModule="sm-expandable-hoc";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,a,p={}){var d,i;if(!s.has(a))return l.default.console("sm-expandable-hoc","Invalid property passed to sm-expandable-hoc. Bypassing HOC.",l.default.LEVEL_ERROR),t;return i=d=class extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_eventHandler",e=>{let t=o.default.findDOMNode(this);e.propertyName===a&&(t.style[a]=null,t.removeEventListener("transitionend",this._eventHandler))})}getSnapshotBeforeUpdate(e){let t=o.default.findDOMNode(this);if(p.toggle)if(e.open&&!this.props.open&&!this._collapsedMeasurement&&this.props.collapsedNodeRef){let e=this.props.collapsedNodeRef.current;this._collapsedMeasurement="".concat(e[n[a]].toString(),"px")}else!e.open&&this.props.open&&(this._collapsedMeasurement=getComputedStyle(t)[a]);return t[n[a]]}componentDidUpdate(e,t,r){if(p.toggle&&e.open===this.props.open)return;let l,s=o.default.findDOMNode(this),n=r;s.style[a]="auto",l=p.toggle&&!this.props.open?this._collapsedMeasurement:getComputedStyle(s)[a],s.style[a]="".concat(n,"px"),s.offsetHeight,s.style[a]=l,s.addEventListener("transitionend",this._eventHandler)}render(){let{collapsedNodeRef:o,open:r,...l}=this.props;return e.default.createElement(t,l)}},babelHelpers.defineProperty(d,"displayName","WithExpandable(".concat((u=t,u.displayName||u.name||"Component"),")")),babelHelpers.defineProperty(d,"propTypes",{open:r.default.bool,collapsedNodeRef:r.default.object}),i;var u};var e=babelHelpers.interopRequireWildcard(t("react")),o=babelHelpers.interopRequireDefault(t("react-dom")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-smuglog"));const s=new Set(["width","height"]),n={width:"offsetWidth",height:"offsetHeight"}}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-smuglog"]});
YUI.add("sm-facebook",(function(e){SM.currentModule="sm-facebook";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){var SM=window.SM;e.namespace("SM").Facebook=module.exports=e.Base.create("sm-facebook",e.Base,[],{fbRootTemplate:'<div id="fb-root"></div>',loginButtonTemplate:'<fb:login-button<% if (data.scope) { %> scope="<%= data.scope %>"<% } %><% if (data.size) { %> size="<%= data.size %>"<% } %><% if (data.width) { %> width="<%= data.width %>"<% } %><% if (data.showFaces) { %> show-faces="<%= data.showFaces %>"<% } %><% if (data.registrationUrl) { %> registration-url="<%= data.registrationUrl %>"<% } %><% if (data.maxRows) { %> max-rows="<%= data.maxRows %>"<% } %>></fb:login-button>',likeButtonTemplate:'<fb:like<% if (data.href) { %> href="<%= data.href %>"<% } %><% if (data.send) { %> send="<%= data.send %>"<% } %><% if (data.layout) { %> layout="<%= data.layout %>"<% } %><% if (data.showFaces) { %> show_faces="<%= data.showFaces %>"<% } %><% if (data.width) { %> width="<%= data.width %>"<% } %><% if (data.action) { %> action="<%= data.action %>"<% } %><% if (data.font) { %> font="<%= data.font %>"<% } %><% if (data.colorScheme) { %> colorscheme="<%= data.colorScheme %>"<% } %><% if (data.ref) { %> ref="<%= data.ref %>"<% } %>></fb:like>',initializer:function(){this._subscribedFBEvents=[]},destructor:function(){window.FB&&e.Array.each(this._subscribedFBEvents,(function(e){window.FB.Event.unsubscribe(e.event,e.cb)}))},getLoginStatus:function(t){var n=this;return new e.Promise((function(e){n._loadSDK().then((function(n){n.getLoginStatus((function(n){e(t?n:n.status)}))}))}))},api:function(t,n,o){var a=this;return new e.Promise((function(e){a._loadSDK().then((function(a){a.api(t,n,o,e)}))}))},exchangeAccessToken:function(t){return new e.Promise((function(n){var o={method:"POST",data:"accessToken="+t};e.SM.io("/services/social/api/facebook/exchangetoken/",o).then(n)}))},getProfile:function(){var t=this;return new e.Promise((function(e){t._loadSDK().then((function(t){t.api("/me",(function(t){t.picture="https://graph.facebook.com/"+t.id+"/picture",e(t)}))}))}))},generateSocialAccountProfile:function(e){var t="";e.email&&"object"==typeof e.email&&-1===e.email.indexOf("proxymail")&&(t=e.email);var n="";return e.link&&"object"==typeof e.link&&-1===e.link.indexOf("profile.php")&&(n=e.link.replace(/https?:\/\/www\.facebook\.com\//,"").replace(/\./g,"-")),{accountID:e.id,accountPhoto:e.picture,accountName:e.name,accountLink:e.link,accountEmail:t,formEmail:t,formNameSuggestion:n}},login:function(t,n){var o=this,a={return_scopes:!0};return t&&(a.scope=t),n&&(a.auth_type="rerequest"),new e.Promise((function(e){o._loadSDK().then((function(t){t.login((function(t){e(t)}),a)}))}))},renderLoginButton:function(t,n){var o=this,a=e.Template.Micro.compile(this.loginButtonTemplate);return new e.Promise((function(i){o._loadSDK().then((function(c){(t=e.Node.one(t)).append(a(n)),c.XFBML.parse(t.getDOMNode()),o._subscribeFBEvent(c,"auth.authResponseChange",i)}))}))},renderSmugLoginButton:function(t,n){n||(n={});var o=this;return new e.Promise((function(a){var i=e.one(t).appendChild(e.SM.Templates.button({className:n.className||"sm-fb-login sm-button-square",label:n.label,icon:"FacebookColored",svg:!0,value:n.value||"fblogin",size:n.size||"large"}));o._loadSDK().then((function(e){var t=i.on("click",(function(){e.login((function(e){"connected"===e.status&&(t.detach(),a({authResponse:e.authResponse,status:e.status}))}))}))}))}))},renderLikeButton:function(t,n){var o=e.Template.Micro.compile(this.likeButtonTemplate);return this._loadSDK().then((function(a){return(t=e.Node.one(t)).append(o(n)),a.XFBML.parse(t.getDOMNode()),t}))},_loadSDK:function(){var t=this,n=t._getSDKURL();return new e.Promise((function(o){window.FB?o(window.FB):(e.Node.one(document.body).prepend(e.Node.create(t.fbRootTemplate)),e.Get.js(n,{onSuccess:function(){window.FB&&(window.FB.init({appId:SM.env.facebook.appId,cookie:!0,status:!0,version:SM.env.facebook.version,xfbml:!0}),o(window.FB))},onFailure:function(){},attributes:{id:"facebook-jssdk"}}))}))},_getSDKURL:function(){return"//"+(this.get("debug")?"connect.facebook.net/en_US/sdk/debug.js":"connect.facebook.net/en_US/sdk.js")},_subscribeFBEvent:function(e,t,n){return e.Event.subscribe(t,n),this._subscribedFBEvents.push({event:t,cb:n}),this}},{ATTRS:{debug:{}},LIKE_BUTTON_OPTIONS:{LAYOUT:{STANDARD:"standard",BUTTON_COUNT:"button_count",BOX_COUNT:"box_count"},ACTION:{LIKE:"like",RECOMMEND:"recommend"},FONT:{ARIAL:"arial",LUCIDA_GRANDE:"lucida grande",SEGEO_UI:"segeo ui",TAHOMA:"tahoma",TREBUCHET_MS:"trebuchet ms",VERDANA:"verdana"},COLOR_SCHEME:{LIGHT:"light",DARK:"dark"}}})}(),SM.currentModule=null}),"",{requires:["base","node","template-micro","promise"]});
YUI.add("sm-favorite-action-types",(function(e){SM.currentModule="sm-favorite-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TOGGLE_FAVORITE=void 0;exports.TOGGLE_FAVORITE="FAVORITES_TOGGLE_FAVORITE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-favorite-actions",(function(e){SM.currentModule="sm-favorite-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackToggleFavorite=n,exports.setFavorite=function(t,r,a=!0,i="Lightbox"){return c=>{c(n(a,i));let u=(0,s.createFavoriteRequestIdentifier)(r);return c((0,e.postToAPI)({uri:t,data:{Favorite:a},albumImageUri:r},u)).then(()=>c((0,e.fetchFromAPI)({uri:r}))).then(()=>a).catch(e=>c((0,o.addError)("There was an issue favoriting this photo. Please reload the page and try again. If the problem persists, contact our Support Heroes.",e)))}};var e=t("sm-api-redux-actions"),r=t("sm-favorite-action-types"),a=t("sm-analytics-constants"),o=t("sm-dialogs-actions"),s=t("sm-favorite-helpers");const i=(e,t)=>({_internal:{analytics:{category:a.CATEGORY.LIGHTBOX,action:e,property:t}}});function n(e,t){return{type:r.TOGGLE_FAVORITE,...i(e?a.ACTION.ADD_FAVORITE:a.ACTION.REMOVE_FAVORITE,t)}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-actions","sm-favorite-action-types","sm-analytics-constants","sm-dialogs-actions","sm-favorite-helpers"]});
YUI.add("sm-favorite-constants",(function(e){SM.currentModule="sm-favorite-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FAVORITE_ALBUM_IMAGE=void 0;exports.FAVORITE_ALBUM_IMAGE="FAVORITE_ALBUM_IMAGE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-favorite-container-hoc",(function(e){SM.currentModule="sm-favorite-container-hoc";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=r("sm-api-redux-selectors"),i=r("sm-favorite-selectors"),o=r("sm-favorite-actions");var a=(0,e.connect)((e,{albumImageUri:r})=>({_albumImageUri:r,_favoriteActionUri:!(0,i.isHidden)(e,r)&&(0,t.getExpansionUri)(e,r,"AlbumImageFavorite"),isFavorite:(0,i.isFavorite)(e,r),viewAllUrl:(0,i.getFavoriteAlbumUrl)(e,r)}),(e,{onImageDataChange:r})=>({_onFavoriteRequest:(t,i,a)=>{e((0,o.setFavorite)(t,i,a)).then(()=>{r&&r({favorite:a})})}}),(e,r)=>{let{_albumImageUri:t,_favoriteActionUri:i,...o}=e,{_onFavoriteRequest:a}=r,s={};return i&&(s.onFavoriteRequest=()=>{a(i,t,!o.isFavorite)}),{...o,...s}});exports.default=a}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-selectors","sm-favorite-selectors","sm-favorite-actions"]});
YUI.add("sm-favorite-helpers",(function(e){SM.currentModule="sm-favorite-helpers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFavoriteRequestIdentifier=void 0;var e=r("sm-favorite-constants");exports.createFavoriteRequestIdentifier=r=>"".concat(e.FAVORITE_ALBUM_IMAGE,"_").concat(r)}(),SM.currentModule=null}),"",{requires:["sm-favorite-constants"]});
YUI.add("sm-favorite-reducers",(function(e){SM.currentModule="sm-favorite-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("sm-api-redux-action-types"),t=r("sm-favorite-helpers");exports.default=(r={},{type:u,requestIdentifier:i,albumImageUri:a,data:s})=>{if(!i||"Resource"===i||u!==e.REQUEST)return r;if(i!==(0,t.createFavoriteRequestIdentifier)(a))return r;let o=r.ui||{},d=o.favorites||{};return{...r,ui:{...o,favorites:{...d,[a]:s.Favorite}}}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-action-types","sm-favorite-helpers"]});
YUI.add("sm-favorite-selectors",(function(e){SM.currentModule="sm-favorite-selectors";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFavoriteAlbumUrl=exports.isHidden=exports.isFavorite=void 0;var e=r("sm-api-redux-selectors");exports.isFavorite=(r,t)=>{let{ui:{favorites:{[t]:i}={}}={}}=r;if(void 0!==i)return i;let{IsFavorite:u=!1}=(0,e.getEntity)(r,t)||{};return u};exports.isHidden=(r,t)=>((0,e.getEntity)(r,t)||{}).Hidden;exports.getFavoriteAlbumUrl=(r,t)=>{let{FavoriteAlbumUrl:i=""}=(0,e.getExpansion)(r,t,"Album")||{};return i}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors"]});
YUI.add("sm-fields",(function(e){SM.currentModule="sm-fields";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e.namespace("SM.Fields").FieldError={setError:function(e){this.setNotice(e,"error")},setWarning:function(e){this.setNotice(e,"warning")},getErrorNode:function(e){return this.errorNode||(this.errorNode=e,this.renderErrorAfterContainer?this.container.insert(this.errorNode,"after"):this.container.appendChild(this.errorNode)),this.errorNode},setNotice:function(t,i){var s=this._notices||(this._notices={}),r=this.container,o=this.getErrorNode(e.Node.create("<div/>"));r.addClass("sm-form-field-"+i),s[i]=t,o.addClass("sm-form-field-"+i+"-msg").set("text",s.error||s.warning||t)},setMarkupError:function(e){this.setMarkupNotice(e,"error")},setMarkupWarning:function(e){this.setMarkupNotice(e,"warning")},setMarkupNotice:function(e,t){var i=this._notices||(this._notices={}),s=this.container,r=this.getErrorNode(e);i[t]=e,r.addClass("sm-form-field-"+t+"-msg"),s.addClass("sm-form-field-"+t)},clearError:function(){this.clearNotice("error")},clearWarning:function(){this.clearNotice("warning")},clearNotice:function(e){var t,i=this._notices;if(this.container.removeClass("sm-form-field-"+e),i){if(delete i[e],!(t=i.error||i.warning))for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t=i[e]);t?this.errorNode&&this.errorNode.set("text",t):this.errorNode&&(this.errorNode.remove(!0),this.errorNode=null)}}},e.namespace("SM.Fields").Textbox=function(e){this.fieldCfg=e},e.SM.Fields.Textbox.prototype={render:function(t){if(this.container=t,t.addClass("sm-form-field-overhead"),this.label=e.Node.create(e.SM.Templates.label(this.fieldCfg)),t.append(this.label),this.fieldCfg.suffix||this.fieldCfg.prefix||this.fieldCfg.iconSuffix||this.fieldCfg.iconPrefix){var i=e.Node.create(e.SM.Templates.textboxLabel(this.fieldCfg));this.field=i.one("input"),this.field.on({focus:function(){i.addClass("sm-focus")},blur:function(){i.removeClass("sm-focus")}}),t.appendChild('<div class="sm-form-field-container">').append(i)}else this.field=e.Node.create(e.SM.Templates.textbox(this.fieldCfg)),t.appendChild('<div class="sm-form-field-container">').append(this.field);return this.description=e.Node.create(e.SM.Templates.fieldDescription(this.fieldCfg)),t.append(this.description),this},setValue:function(e){this.field.set("value",e)},setDescription:function(e){this.description.setHTML(e)},getValue:function(){return this.field.get("value")},enable:function(){this.field.removeAttribute("disabled")},disable:function(){this.field.setAttribute("disabled","disabled")},destroy:function(){this.label.remove().destroy(!0)}},e.mix(e.SM.Fields.Textbox.prototype,e.SM.Fields.FieldError),e.namespace("SM.Fields").Checkbox=function(e){this.fieldCfg=e,this._unselectedValue=void 0===e.unselectedValue?"":String(e.unselectedValue)},e.SM.Fields.Checkbox.prototype={render:function(t){return this.field=e.Node.create(e.SM.Templates.checkbox(this.fieldCfg)),this.field.on("click",this._onCheckboxClick,this),t.append(this.field),this},_onCheckboxClick:function(e){e.preventDefault(),this.field.toggleClass("yui3-button-selected")},getValue:function(){return this.field.hasClass("yui3-button-selected")?this.field.get("value"):this._unselectedValue},setValue:function(e){this.field.set("value",e)},setSelected:function(e){this.field.toggleClass("yui3-button-selected",e)},destroy:function(){this.field.remove().destroy(!0)}},SM.currentModule=null}),"",{requires:["sm-templates-form"]});
YUI.add("sm-floating-action-create-node-menu-actions",(function(e){SM.currentModule="sm-floating-action-create-node-menu-actions";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleAddNodeMenu=function(){return(n,o)=>{let a=o();if(!(0,s.isVisible)(a,c.MENU_ID_CREATE_NODE)){let n=(0,t.getNode)(a),o=n&&n.id,s=n&&(0,t.getRealNodeType)(a);(0,d.trackEvent)({action:e.default.ACTION.NAVIGATION_CLICK,label:"Add",nodeId:o,nodeType:s})}return n((0,r.toggle)(c.MENU_ID_CREATE_NODE))}},exports.createNode=function(n){return(s,r)=>{let c,l=r(),i=(0,t.getNode)(l),_=i&&i.id,u=i&&(0,t.getRealNodeType)(l);switch(n){case o.NODE_TYPE_ALBUM:c="New Gallery";break;case o.NODE_TYPE_FOLDER:c="New Folder"}return(0,d.trackEvent)({action:e.default.ACTION.MENU_ITEM_CLICK,label:c,property:"Add Menu",nodeId:_,nodeType:u}),n===o.NODE_TYPE_ALBUM?(s((0,a.openCreateNode)(n)),s((0,a.loadDefaultAlbumTemplateData)())):s((0,a.openCreateNode)(n))}},exports.TRACKING_PROPERTY_ADD_MENU=exports.TRACKING_LABEL_NEW_GALLERY=exports.TRACKING_LABEL_NEW_FOLDER=exports.TRACKING_LABEL_ADD_NODE=void 0;var e=babelHelpers.interopRequireDefault(n("sm-analytics")),t=n("sm-page-nodepage-selectors"),o=n("sm-page-nodepage-constants"),a=n("sm-node-settings-actions"),s=n("sm-component-menu-selectors"),r=n("sm-component-menu-actions"),d=n("sm-floating-action-tracking-helpers"),c=n("sm-floating-action-create-node-menu-constants");exports.TRACKING_LABEL_ADD_NODE="Add";exports.TRACKING_LABEL_NEW_FOLDER="New Folder";exports.TRACKING_LABEL_NEW_GALLERY="New Gallery";exports.TRACKING_PROPERTY_ADD_MENU="Add Menu"}(),SM.currentModule=null}),"",{requires:["sm-analytics","sm-page-nodepage-selectors","sm-page-nodepage-constants","sm-node-settings-actions","sm-component-menu-selectors","sm-component-menu-actions","sm-floating-action-tracking-helpers","sm-floating-action-create-node-menu-constants"]});
YUI.add("sm-floating-action-create-node-menu-constants",(function(e){SM.currentModule="sm-floating-action-create-node-menu-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MENU_ID_CREATE_NODE=void 0;exports.MENU_ID_CREATE_NODE="createNode"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-floating-action-create-node-menu-container",(function(e){SM.currentModule="sm-floating-action-create-node-menu-container";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n("react-redux"),o=babelHelpers.interopRequireDefault(n("sm-floating-action-create-node-menu")),t=n("sm-floating-action-create-node-menu-actions"),a=n("sm-component-menu-selectors"),c=n("sm-page-nodepage-constants"),r=n("sm-floating-action-create-node-menu-constants");var u=(0,e.connect)(e=>({isMenuOpen:(0,a.isVisible)(e,r.MENU_ID_CREATE_NODE)}),e=>({onToggleAddNodeMenuClick:()=>{e((0,t.toggleAddNodeMenu)())},onCreateAlbumNodeClick:()=>{e((0,t.createNode)(c.NODE_TYPE_ALBUM))},onCreateFolderNodeClick:()=>{e((0,t.createNode)(c.NODE_TYPE_FOLDER))}}))(o.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-floating-action-create-node-menu","sm-floating-action-create-node-menu-actions","sm-component-menu-selectors","sm-page-nodepage-constants","sm-floating-action-create-node-menu-constants"]});
YUI.add("sm-floating-action-create-node-menu",(function(e){SM.currentModule="sm-floating-action-create-node-menu";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-icon")),o=babelHelpers.interopRequireDefault(t("sm-component-menu")),u=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),r=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),i=babelHelpers.interopRequireDefault(t("sm-floating-action-portal")),d=t("sm-floating-action-create-node-menu-constants"),m=t("sm-page-nodepage-constants");const s=e=>{let t=(0,a.useRef)(null),{canCreateAlbum:s,canCreateFolder:c,onToggleAddNodeMenuClick:f,onCreateAlbumNodeClick:p,onCreateFolderNodeClick:b,isMenuOpen:E}=e,g="sm-nui";return E&&(g+=" sm-floating-action-mask sm-flex sm-flex-justify-end sm-flex-items-end"),a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,null,a.default.createElement("div",{className:g,onClick:f,onTouchMove:()=>{E&&f()}},a.default.createElement("div",{className:"sm-position-relative"},a.default.createElement(n.default,{"aria-label":"Add a gallery or folder",className:"sm-floating-action-button","data-menu-open":E,size:n.default.SIZE_LARGE,skin:n.default.SKIN_ACCENT,shape:n.default.SHAPE_CIRCLE,ref:t,onClick:e=>{e.stopPropagation(),f()},tabIndex:"1","data-testid":"floating_add_button"},a.default.createElement(l.default,{size:l.default.SIZE_LARGE,name:"Add"})),a.default.createElement(o.default,{alignments:["br-tr"],anchor:t.current,className:"sm-floating-action-menu",menuId:d.MENU_ID_CREATE_NODE,closeOnClickOutside:!1,noChrome:!0},a.default.createElement(u.default,{className:"sm-floating-action-menu-item",disabled:!c,"data-testid":"floating_newfolder_menuitem",onClick:b,dataAttrs:{"data-animation-order":1}},a.default.createElement(r.default,{className:"sm-floating-action-menu-item-label"},"New ",m.NODE_TYPE_LABEL_MAP[m.NODE_TYPE_FOLDER]),a.default.createElement(l.default,{name:"Folder",size:l.default.SIZE_SMALL})),a.default.createElement(u.default,{className:"sm-floating-action-menu-item",disabled:!s,"data-testid":"floating_newgallery_menuitem",onClick:p,dataAttrs:{"data-animation-order":0}},a.default.createElement(r.default,{className:"sm-floating-action-menu-item-label"},"New ",m.NODE_TYPE_LABEL_MAP[m.NODE_TYPE_ALBUM]),a.default.createElement(l.default,{name:"Gallery",size:l.default.SIZE_SMALL})))))))};s.displayName="FloatingActionPortal.CreateNodeMenu",s.propTypes={canCreateAlbum:e.default.bool,canCreateFolder:e.default.bool,isMenuOpen:e.default.bool,onCreateAlbumNodeClick:e.default.func,onCreateFolderNodeClick:e.default.func,onToggleAddNodeMenuClick:e.default.func.isRequired};var c=s;exports.default=c}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-icon","sm-component-menu","sm-component-menu-item","sm-component-menu-label","sm-floating-action-portal","sm-floating-action-create-node-menu-constants","sm-page-nodepage-constants"]});
YUI.add("sm-floating-action-portal",(function(e){SM.currentModule="sm-floating-action-portal";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("sm-dom-core")),t=babelHelpers.interopRequireDefault(r("sm-teleport"));var o=(0,t.default)(({children:e})=>e,()=>e.default.doc.querySelector(".sm-floating-action-container"));exports.default=o}(),SM.currentModule=null}),"",{requires:["sm-dom-core","sm-teleport"]});
YUI.add("sm-floating-action-tracking-helpers",(function(e){SM.currentModule="sm-floating-action-tracking-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackEvent=function(t){let{action:r,label:n,nodeId:a,nodeType:l,property:o}=t,u=e.default.Tracker.createEvent(e.default.CATEGORY.FLOATING_ACTION_BUTTON,r,{label:n,property:o});a&&l&&u.addContext(e.default.CONTEXT.NODE,{node_id:a,node_type:l});return u.log()};var e=babelHelpers.interopRequireDefault(t("sm-analytics"))}(),SM.currentModule=null}),"",{requires:["sm-analytics"]});
YUI.add("sm-floating-action-upload-button-container",(function(e){SM.currentModule="sm-floating-action-upload-button-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),o=babelHelpers.interopRequireDefault(t("sm-floating-action-upload-button")),n=t("sm-page-nodepage-selectors");var u=(0,e.connect)(e=>{let t,o,u=(0,n.getNode)(e);return u&&(t=u.id,o=(0,n.getRealNodeType)(e)),{nodeId:t,nodeType:o}})(o.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-floating-action-upload-button","sm-page-nodepage-selectors"]});
YUI.add("sm-floating-action-upload-button",(function(e){SM.currentModule="sm-floating-action-upload-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-analytics")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon")),r=babelHelpers.interopRequireDefault(t("sm-floating-action-portal")),u=t("sm-page-nodepage-constants");const d=e=>{let{nodeId:t,nodeType:d,uploadUrl:i}=e;return a.default.createElement(r.default,null,a.default.createElement("div",{className:"sm-nui"},a.default.createElement(n.default,babelHelpers.extends({"aria-label":"Upload",className:"sm-floating-action-button",href:i,size:n.default.SIZE_LARGE,skin:n.default.SKIN_ACCENT,shape:n.default.SHAPE_CIRCLE,tabIndex:"1","data-testid":"floating_add_button","data-link-tracking-category":l.default.CATEGORY.FLOATING_ACTION_BUTTON,"data-link-tracking-action":l.default.ACTION.NAVIGATION_CLICK,"data-link-tracking-label":"Upload"},t&&d&&{"data-link-tracking-contexts":JSON.stringify([{schema:l.default.CONTEXT.NODE,data:{node_id:t,node_type:u.NODE_TYPE_TRACKING_VALUES[d]||null}}])}),a.default.createElement(o.default,{size:o.default.SIZE_LARGE,name:"AddPhotos"}))))};d.displayName="FloatingActionPortal.UploadButton",d.propTypes={nodeId:e.default.string,nodeType:e.default.string,uploadUrl:e.default.string.isRequired};var i=d;exports.default=i}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-analytics","sm-component-button","sm-icon","sm-floating-action-portal","sm-page-nodepage-constants"]});
YUI.add("sm-fonts-dropdown",(function(e){SM.currentModule="sm-fonts-dropdown";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireWildcard(t("react")),o=babelHelpers.interopRequireDefault(t("sm-component-dropdown")),n=babelHelpers.interopRequireDefault(t("sm-fonts")),a=babelHelpers.interopRequireDefault(t("sm-component-dropdown-option"));class r extends l.PureComponent{render(){let e,t,r=this.props;r.defaultFonts.length>1&&(e=r.defaultFonts.map(this._buildStyledFontOption),t=l.default.createElement(a.default,{disabled:!0,key:"separator"},"────────────"));let u=n.default.FONT_FAMILIES.map(this._buildFontOption);return l.default.createElement(o.default,{defaultValue:r.defaultValue,width:"200px",onSelectionChange:r.onSelectionChange},e,t,u)}UNSAFE_componentWillMount(){let e=this.props.defaultFonts;e&&e.map(e=>{var t=e.value;t&&n.default.loadFont(t)})}_buildFontOption(e){let{label:t,value:o}=e;return l.default.createElement(a.default,{value:o,key:o},t)}_buildStyledFontOption(e){let{label:t,value:o}=e,n={fontFamily:o};return l.default.createElement(a.default,{value:o,key:"default".concat(o),style:n},t)}}exports.default=r,r.displayName="FontDropdown",r.propTypes={defaultFonts:e.default.array,onSelectionChange:e.default.func,defaultValue:e.default.string},r.defaultProps={onSelectionChange:()=>{},defaultFonts:[]}}(),SM.currentModule=null}),"",{requires:["react","sm","sm-dom","classnames","sm-fonts","sm-component-dropdown","sm-component-dropdown-option","sm-component-overheadformfield"]});
YUI.add("sm-fonts",(function(e){SM.currentModule="sm-fonts";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";const a=SM.import("sm-dom"),l=SM.import("sm-uri-deprecated"),n={HEADER_FONTS:[{value:"Abril Fatface",label:"Abril Fatface"},{value:"Arvo",label:"Arvo"},{value:"Bitter",label:"Bitter"},{value:"Domine",label:"Domine"},{value:"Gravitas One",label:"Gravitas One"},{value:"Lato",label:"Lato"},{value:"Lora",label:"Lora"},{value:"Open Sans",label:"Open Sans"},{value:"Open Sans Condensed",label:"Open Sans Condensed"},{value:"Oswald",label:"Oswald"},{value:"Overlock",label:"Overlock"},{value:"Oxygen",label:"Oxygen"},{value:"Patua One",label:"Patua One"},{value:"Playfair Display",label:"Playfair Display"},{value:"Playfair Display SC",label:"Playfair Display SC"},{value:"Poiret One",label:"Poiret One"},{value:"Poly",label:"Poly"},{value:"Roboto",label:"Roboto"},{value:"Roboto Condensed",label:"Roboto Condensed"},{value:"Roboto Slab",label:"Roboto Slab"},{value:"Raleway",label:"Raleway"},{value:"Six Caps",label:"Six Caps"},{value:"Vollkorn",label:"Vollkorn"},{value:"Wire One",label:"Wire One"}],BODY_FONTS:[{value:"Arvo",label:"Arvo"},{value:"Bitter",label:"Bitter"},{value:"Domine",label:"Domine"},{value:"Lato",label:"Lato"},{value:"Lora",label:"Lora"},{value:"Open Sans",label:"Open Sans"},{value:"Oxygen",label:"Oxygen"},{value:"Poly",label:"Poly"},{value:"Roboto",label:"Roboto"},{value:"Roboto Condensed",label:"Roboto Condensed"},{value:"Roboto Slab",label:"Roboto Slab"},{value:"Raleway",label:"Raleway"},{value:"Vollkorn",label:"Vollkorn"}],FONT_FAMILIES:[{value:"ABeeZee",label:"ABeeZee"},{value:"Abel",label:"Abel"},{value:"Abril Fatface",label:"Abril Fatface"},{value:"Aclonica",label:"Aclonica"},{value:"Acme",label:"Acme"},{value:"Actor",label:"Actor"},{value:"Adamina",label:"Adamina"},{value:"Advent Pro",label:"Advent Pro"},{value:"Aguafina Script",label:"Aguafina Script"},{value:"Akronim",label:"Akronim"},{value:"Aladin",label:"Aladin"},{value:"Aldrich",label:"Aldrich"},{value:"Alef",label:"Alef"},{value:"Alegreya",label:"Alegreya"},{value:"Alegreya SC",label:"Alegreya SC"},{value:"Alex Brush",label:"Alex Brush"},{value:"Alfa Slab One",label:"Alfa Slab One"},{value:"Alice",label:"Alice"},{value:"Alike",label:"Alike"},{value:"Alike Angular",label:"Alike Angular"},{value:"Allan",label:"Allan"},{value:"Allerta",label:"Allerta"},{value:"Allerta Stencil",label:"Allerta Stencil"},{value:"Allura",label:"Allura"},{value:"Almendra",label:"Almendra"},{value:"Almendra Display",label:"Almendra Display"},{value:"Almendra SC",label:"Almendra SC"},{value:"Amarante",label:"Amarante"},{value:"Amaranth",label:"Amaranth"},{value:"Amatic SC",label:"Amatic SC"},{value:"Amethysta",label:"Amethysta"},{value:"Anaheim",label:"Anaheim"},{value:"Andada",label:"Andada"},{value:"Andika",label:"Andika"},{value:"Angkor",label:"Angkor"},{value:"Annie Use Your Telescope",label:"Annie Use Your Telescope"},{value:"Anonymous Pro",label:"Anonymous Pro"},{value:"Antic",label:"Antic"},{value:"Antic Didone",label:"Antic Didone"},{value:"Antic Slab",label:"Antic Slab"},{value:"Anton",label:"Anton"},{value:"Arapey",label:"Arapey"},{value:"Arbutus",label:"Arbutus"},{value:"Arbutus Slab",label:"Arbutus Slab"},{value:"Architects Daughter",label:"Architects Daughter"},{value:"Archivo Black",label:"Archivo Black"},{value:"Archivo Narrow",label:"Archivo Narrow"},{value:"Arimo",label:"Arimo"},{value:"Arizonia",label:"Arizonia"},{value:"Armata",label:"Armata"},{value:"Artifika",label:"Artifika"},{value:"Arvo",label:"Arvo"},{value:"Asap",label:"Asap"},{value:"Asset",label:"Asset"},{value:"Astloch",label:"Astloch"},{value:"Asul",label:"Asul"},{value:"Atomic Age",label:"Atomic Age"},{value:"Aubrey",label:"Aubrey"},{value:"Audiowide",label:"Audiowide"},{value:"Autour One",label:"Autour One"},{value:"Average",label:"Average"},{value:"Average Sans",label:"Average Sans"},{value:"Averia Gruesa Libre",label:"Averia Gruesa Libre"},{value:"Averia Libre",label:"Averia Libre"},{value:"Averia Sans Libre",label:"Averia Sans Libre"},{value:"Averia Serif Libre",label:"Averia Serif Libre"},{value:"Bad Script",label:"Bad Script"},{value:"Balthazar",label:"Balthazar"},{value:"Bangers",label:"Bangers"},{value:"Basic",label:"Basic"},{value:"Battambang",label:"Battambang"},{value:"Baumans",label:"Baumans"},{value:"Bayon",label:"Bayon"},{value:"Belgrano",label:"Belgrano"},{value:"Belleza",label:"Belleza"},{value:"BenchNine",label:"BenchNine"},{value:"Bentham",label:"Bentham"},{value:"Berkshire Swash",label:"Berkshire Swash"},{value:"Bevan",label:"Bevan"},{value:"Bigelow Rules",label:"Bigelow Rules"},{value:"Bigshot One",label:"Bigshot One"},{value:"Bilbo",label:"Bilbo"},{value:"Bilbo Swash Caps",label:"Bilbo Swash Caps"},{value:"Bitter",label:"Bitter"},{value:"Black Ops One",label:"Black Ops One"},{value:"Bokor",label:"Bokor"},{value:"Bonbon",label:"Bonbon"},{value:"Boogaloo",label:"Boogaloo"},{value:"Bowlby One",label:"Bowlby One"},{value:"Bowlby One SC",label:"Bowlby One SC"},{value:"Brawler",label:"Brawler"},{value:"Bree Serif",label:"Bree Serif"},{value:"Bubblegum Sans",label:"Bubblegum Sans"},{value:"Bubbler One",label:"Bubbler One"},{value:"Buda",label:"Buda"},{value:"Buenard",label:"Buenard"},{value:"Butcherman",label:"Butcherman"},{value:"Butterfly Kids",label:"Butterfly Kids"},{value:"Cabin",label:"Cabin"},{value:"Cabin Condensed",label:"Cabin Condensed"},{value:"Cabin Sketch",label:"Cabin Sketch"},{value:"Caesar Dressing",label:"Caesar Dressing"},{value:"Cagliostro",label:"Cagliostro"},{value:"Calligraffitti",label:"Calligraffitti"},{value:"Cambo",label:"Cambo"},{value:"Candal",label:"Candal"},{value:"Cantarell",label:"Cantarell"},{value:"Cantata One",label:"Cantata One"},{value:"Cantora One",label:"Cantora One"},{value:"Capriola",label:"Capriola"},{value:"Cardo",label:"Cardo"},{value:"Carme",label:"Carme"},{value:"Carrois Gothic",label:"Carrois Gothic"},{value:"Carrois Gothic SC",label:"Carrois Gothic SC"},{value:"Carter One",label:"Carter One"},{value:"Caudex",label:"Caudex"},{value:"Cedarville Cursive",label:"Cedarville Cursive"},{value:"Ceviche One",label:"Ceviche One"},{value:"Changa One",label:"Changa One"},{value:"Chango",label:"Chango"},{value:"Chau Philomene One",label:"Chau Philomene One"},{value:"Chela One",label:"Chela One"},{value:"Chelsea Market",label:"Chelsea Market"},{value:"Chenla",label:"Chenla"},{value:"Cherry Cream Soda",label:"Cherry Cream Soda"},{value:"Cherry Swash",label:"Cherry Swash"},{value:"Chewy",label:"Chewy"},{value:"Chicle",label:"Chicle"},{value:"Chivo",label:"Chivo"},{value:"Cinzel",label:"Cinzel"},{value:"Cinzel Decorative",label:"Cinzel Decorative"},{value:"Clicker Script",label:"Clicker Script"},{value:"Coda",label:"Coda"},{value:"Coda Caption",label:"Coda Caption"},{value:"Codystar",label:"Codystar"},{value:"Combo",label:"Combo"},{value:"Comfortaa",label:"Comfortaa"},{value:"Coming Soon",label:"Coming Soon"},{value:"Concert One",label:"Concert One"},{value:"Condiment",label:"Condiment"},{value:"Content",label:"Content"},{value:"Contrail One",label:"Contrail One"},{value:"Convergence",label:"Convergence"},{value:"Cookie",label:"Cookie"},{value:"Copse",label:"Copse"},{value:"Corben",label:"Corben"},{value:"Courgette",label:"Courgette"},{value:"Cousine",label:"Cousine"},{value:"Coustard",label:"Coustard"},{value:"Covered By Your Grace",label:"Covered By Your Grace"},{value:"Crafty Girls",label:"Crafty Girls"},{value:"Creepster",label:"Creepster"},{value:"Crete Round",label:"Crete Round"},{value:"Crimson Text",label:"Crimson Text"},{value:"Croissant One",label:"Croissant One"},{value:"Crushed",label:"Crushed"},{value:"Cuprum",label:"Cuprum"},{value:"Cutive",label:"Cutive"},{value:"Cutive Mono",label:"Cutive Mono"},{value:"Damion",label:"Damion"},{value:"Dancing Script",label:"Dancing Script"},{value:"Dangrek",label:"Dangrek"},{value:"Dawning of a New Day",label:"Dawning of a New Day"},{value:"Days One",label:"Days One"},{value:"Delius",label:"Delius"},{value:"Delius Swash Caps",label:"Delius Swash Caps"},{value:"Delius Unicase",label:"Delius Unicase"},{value:"Della Respira",label:"Della Respira"},{value:"Denk One",label:"Denk One"},{value:"Devonshire",label:"Devonshire"},{value:"Didact Gothic",label:"Didact Gothic"},{value:"Diplomata",label:"Diplomata"},{value:"Diplomata SC",label:"Diplomata SC"},{value:"Domine",label:"Domine"},{value:"Donegal One",label:"Donegal One"},{value:"Doppio One",label:"Doppio One"},{value:"Dorsa",label:"Dorsa"},{value:"Dosis",label:"Dosis"},{value:"Dr Sugiyama",label:"Dr Sugiyama"},{value:"Droid Sans",label:"Droid Sans"},{value:"Droid Sans Mono",label:"Droid Sans Mono"},{value:"Droid Serif",label:"Droid Serif"},{value:"Duru Sans",label:"Duru Sans"},{value:"Dynalight",label:"Dynalight"},{value:"EB Garamond",label:"EB Garamond"},{value:"Eagle Lake",label:"Eagle Lake"},{value:"Eater",label:"Eater"},{value:"Economica",label:"Economica"},{value:"Electrolize",label:"Electrolize"},{value:"Elsie",label:"Elsie"},{value:"Elsie Swash Caps",label:"Elsie Swash Caps"},{value:"Emblema One",label:"Emblema One"},{value:"Emilys Candy",label:"Emilys Candy"},{value:"Engagement",label:"Engagement"},{value:"Englebert",label:"Englebert"},{value:"Enriqueta",label:"Enriqueta"},{value:"Erica One",label:"Erica One"},{value:"Esteban",label:"Esteban"},{value:"Euphoria Script",label:"Euphoria Script"},{value:"Ewert",label:"Ewert"},{value:"Exo",label:"Exo"},{value:"Expletus Sans",label:"Expletus Sans"},{value:"Fanwood Text",label:"Fanwood Text"},{value:"Fascinate",label:"Fascinate"},{value:"Fascinate Inline",label:"Fascinate Inline"},{value:"Faster One",label:"Faster One"},{value:"Fasthand",label:"Fasthand"},{value:"Fauna One",label:"Fauna One"},{value:"Federant",label:"Federant"},{value:"Federo",label:"Federo"},{value:"Felipa",label:"Felipa"},{value:"Fenix",label:"Fenix"},{value:"Finger Paint",label:"Finger Paint"},{value:"Fjalla One",label:"Fjalla One"},{value:"Fjord One",label:"Fjord One"},{value:"Flamenco",label:"Flamenco"},{value:"Flavors",label:"Flavors"},{value:"Fondamento",label:"Fondamento"},{value:"Fontdiner Swanky",label:"Fontdiner Swanky"},{value:"Forum",label:"Forum"},{value:"Francois One",label:"Francois One"},{value:"Freckle Face",label:"Freckle Face"},{value:"Fredericka the Great",label:"Fredericka the Great"},{value:"Fredoka One",label:"Fredoka One"},{value:"Freehand",label:"Freehand"},{value:"Fresca",label:"Fresca"},{value:"Frijole",label:"Frijole"},{value:"Fruktur",label:"Fruktur"},{value:"Fugaz One",label:"Fugaz One"},{value:"GFS Didot",label:"GFS Didot"},{value:"GFS Neohellenic",label:"GFS Neohellenic"},{value:"Gabriela",label:"Gabriela"},{value:"Gafata",label:"Gafata"},{value:"Galdeano",label:"Galdeano"},{value:"Galindo",label:"Galindo"},{value:"Gentium Basic",label:"Gentium Basic"},{value:"Gentium Book Basic",label:"Gentium Book Basic"},{value:"Geo",label:"Geo"},{value:"Geostar",label:"Geostar"},{value:"Geostar Fill",label:"Geostar Fill"},{value:"Germania One",label:"Germania One"},{value:"Gilda Display",label:"Gilda Display"},{value:"Give You Glory",label:"Give You Glory"},{value:"Glass Antiqua",label:"Glass Antiqua"},{value:"Glegoo",label:"Glegoo"},{value:"Gloria Hallelujah",label:"Gloria Hallelujah"},{value:"Goblin One",label:"Goblin One"},{value:"Gochi Hand",label:"Gochi Hand"},{value:"Gorditas",label:"Gorditas"},{value:"Goudy Bookletter 1911",label:"Goudy Bookletter 1911"},{value:"Graduate",label:"Graduate"},{value:"Grand Hotel",label:"Grand Hotel"},{value:"Gravitas One",label:"Gravitas One"},{value:"Great Vibes",label:"Great Vibes"},{value:"Griffy",label:"Griffy"},{value:"Gruppo",label:"Gruppo"},{value:"Gudea",label:"Gudea"},{value:"Habibi",label:"Habibi"},{value:"Hammersmith One",label:"Hammersmith One"},{value:"Hanalei",label:"Hanalei"},{value:"Hanalei Fill",label:"Hanalei Fill"},{value:"Handlee",label:"Handlee"},{value:"Hanuman",label:"Hanuman"},{value:"Happy Monkey",label:"Happy Monkey"},{value:"Headland One",label:"Headland One"},{value:"Henny Penny",label:"Henny Penny"},{value:"Herr Von Muellerhoff",label:"Herr Von Muellerhoff"},{value:"Holtwood One SC",label:"Holtwood One SC"},{value:"Homemade Apple",label:"Homemade Apple"},{value:"Homenaje",label:"Homenaje"},{value:"IM Fell DW Pica",label:"IM Fell DW Pica"},{value:"IM Fell DW Pica SC",label:"IM Fell DW Pica SC"},{value:"IM Fell Double Pica",label:"IM Fell Double Pica"},{value:"IM Fell Double Pica SC",label:"IM Fell Double Pica SC"},{value:"IM Fell English",label:"IM Fell English"},{value:"IM Fell English SC",label:"IM Fell English SC"},{value:"IM Fell French Canon",label:"IM Fell French Canon"},{value:"IM Fell French Canon SC",label:"IM Fell French Canon SC"},{value:"IM Fell Great Primer",label:"IM Fell Great Primer"},{value:"IM Fell Great Primer SC",label:"IM Fell Great Primer SC"},{value:"Iceberg",label:"Iceberg"},{value:"Iceland",label:"Iceland"},{value:"Imprima",label:"Imprima"},{value:"Inconsolata",label:"Inconsolata"},{value:"Inder",label:"Inder"},{value:"Indie Flower",label:"Indie Flower"},{value:"Inika",label:"Inika"},{value:"Irish Grover",label:"Irish Grover"},{value:"Istok Web",label:"Istok Web"},{value:"Italiana",label:"Italiana"},{value:"Italianno",label:"Italianno"},{value:"Jacques Francois",label:"Jacques Francois"},{value:"Jacques Francois Shadow",label:"Jacques Francois Shadow"},{value:"Jim Nightshade",label:"Jim Nightshade"},{value:"Jockey One",label:"Jockey One"},{value:"Jolly Lodger",label:"Jolly Lodger"},{value:"Josefin Sans",label:"Josefin Sans"},{value:"Josefin Slab",label:"Josefin Slab"},{value:"Joti One",label:"Joti One"},{value:"Judson",label:"Judson"},{value:"Julee",label:"Julee"},{value:"Julius Sans One",label:"Julius Sans One"},{value:"Junge",label:"Junge"},{value:"Jura",label:"Jura"},{value:"Just Another Hand",label:"Just Another Hand"},{value:"Just Me Again Down Here",label:"Just Me Again Down Here"},{value:"Kameron",label:"Kameron"},{value:"Karla",label:"Karla"},{value:"Kaushan Script",label:"Kaushan Script"},{value:"Kavoon",label:"Kavoon"},{value:"Keania One",label:"Keania One"},{value:"Kelly Slab",label:"Kelly Slab"},{value:"Kenia",label:"Kenia"},{value:"Khmer",label:"Khmer"},{value:"Kite One",label:"Kite One"},{value:"Knewave",label:"Knewave"},{value:"Kotta One",label:"Kotta One"},{value:"Koulen",label:"Koulen"},{value:"Kranky",label:"Kranky"},{value:"Kreon",label:"Kreon"},{value:"Kristi",label:"Kristi"},{value:"Krona One",label:"Krona One"},{value:"La Belle Aurore",label:"La Belle Aurore"},{value:"Lancelot",label:"Lancelot"},{value:"Lato",label:"Lato"},{value:"League Script",label:"League Script"},{value:"Leckerli One",label:"Leckerli One"},{value:"Ledger",label:"Ledger"},{value:"Lekton",label:"Lekton"},{value:"Lemon",label:"Lemon"},{value:"Libre Baskerville",label:"Libre Baskerville"},{value:"Life Savers",label:"Life Savers"},{value:"Lilita One",label:"Lilita One"},{value:"Lily Script One",label:"Lily Script One"},{value:"Limelight",label:"Limelight"},{value:"Linden Hill",label:"Linden Hill"},{value:"Lobster",label:"Lobster"},{value:"Lobster Two",label:"Lobster Two"},{value:"Londrina Outline",label:"Londrina Outline"},{value:"Londrina Shadow",label:"Londrina Shadow"},{value:"Londrina Sketch",label:"Londrina Sketch"},{value:"Londrina Solid",label:"Londrina Solid"},{value:"Lora",label:"Lora"},{value:"Love Ya Like A Sister",label:"Love Ya Like A Sister"},{value:"Loved by the King",label:"Loved by the King"},{value:"Lovers Quarrel",label:"Lovers Quarrel"},{value:"Luckiest Guy",label:"Luckiest Guy"},{value:"Lusitana",label:"Lusitana"},{value:"Lustria",label:"Lustria"},{value:"Macondo",label:"Macondo"},{value:"Macondo Swash Caps",label:"Macondo Swash Caps"},{value:"Magra",label:"Magra"},{value:"Maiden Orange",label:"Maiden Orange"},{value:"Mako",label:"Mako"},{value:"Marcellus",label:"Marcellus"},{value:"Marcellus SC",label:"Marcellus SC"},{value:"Marck Script",label:"Marck Script"},{value:"Margarine",label:"Margarine"},{value:"Marko One",label:"Marko One"},{value:"Marmelad",label:"Marmelad"},{value:"Marvel",label:"Marvel"},{value:"Mate",label:"Mate"},{value:"Mate SC",label:"Mate SC"},{value:"Maven Pro",label:"Maven Pro"},{value:"McLaren",label:"McLaren"},{value:"Meddon",label:"Meddon"},{value:"MedievalSharp",label:"MedievalSharp"},{value:"Medula One",label:"Medula One"},{value:"Megrim",label:"Megrim"},{value:"Meie Script",label:"Meie Script"},{value:"Merienda",label:"Merienda"},{value:"Merienda One",label:"Merienda One"},{value:"Merriweather",label:"Merriweather"},{value:"Merriweather Sans",label:"Merriweather Sans"},{value:"Metal",label:"Metal"},{value:"Metal Mania",label:"Metal Mania"},{value:"Metamorphous",label:"Metamorphous"},{value:"Metrophobic",label:"Metrophobic"},{value:"Michroma",label:"Michroma"},{value:"Milonga",label:"Milonga"},{value:"Miltonian",label:"Miltonian"},{value:"Miltonian Tattoo",label:"Miltonian Tattoo"},{value:"Miniver",label:"Miniver"},{value:"Miss Fajardose",label:"Miss Fajardose"},{value:"Modern Antiqua",label:"Modern Antiqua"},{value:"Molengo",label:"Molengo"},{value:"Monda",label:"Monda"},{value:"Monofett",label:"Monofett"},{value:"Monoton",label:"Monoton"},{value:"Monsieur La Doulaise",label:"Monsieur La Doulaise"},{value:"Montaga",label:"Montaga"},{value:"Montez",label:"Montez"},{value:"Montserrat",label:"Montserrat"},{value:"Montserrat Alternates",label:"Montserrat Alternates"},{value:"Montserrat Subrayada",label:"Montserrat Subrayada"},{value:"Moul",label:"Moul"},{value:"Moulpali",label:"Moulpali"},{value:"Mountains of Christmas",label:"Mountains of Christmas"},{value:"Mouse Memoirs",label:"Mouse Memoirs"},{value:"Mr Bedfort",label:"Mr Bedfort"},{value:"Mr Dafoe",label:"Mr Dafoe"},{value:"Mr De Haviland",label:"Mr De Haviland"},{value:"Mrs Saint Delafield",label:"Mrs Saint Delafield"},{value:"Mrs Sheppards",label:"Mrs Sheppards"},{value:"Muli",label:"Muli"},{value:"Mystery Quest",label:"Mystery Quest"},{value:"Neucha",label:"Neucha"},{value:"Neuton",label:"Neuton"},{value:"New Rocker",label:"New Rocker"},{value:"News Cycle",label:"News Cycle"},{value:"Niconne",label:"Niconne"},{value:"Nixie One",label:"Nixie One"},{value:"Nobile",label:"Nobile"},{value:"Nokora",label:"Nokora"},{value:"Norican",label:"Norican"},{value:"Nosifer",label:"Nosifer"},{value:"Nothing You Could Do",label:"Nothing You Could Do"},{value:"Noticia Text",label:"Noticia Text"},{value:"Noto Sans",label:"Noto Sans"},{value:"Noto Serif",label:"Noto Serif"},{value:"Nova Cut",label:"Nova Cut"},{value:"Nova Flat",label:"Nova Flat"},{value:"Nova Mono",label:"Nova Mono"},{value:"Nova Oval",label:"Nova Oval"},{value:"Nova Round",label:"Nova Round"},{value:"Nova Script",label:"Nova Script"},{value:"Nova Slim",label:"Nova Slim"},{value:"Nova Square",label:"Nova Square"},{value:"Numans",label:"Numans"},{value:"Nunito",label:"Nunito"},{value:"Odor Mean Chey",label:"Odor Mean Chey"},{value:"Offside",label:"Offside"},{value:"Old Standard TT",label:"Old Standard TT"},{value:"Oldenburg",label:"Oldenburg"},{value:"Oleo Script",label:"Oleo Script"},{value:"Oleo Script Swash Caps",label:"Oleo Script Swash Caps"},{value:"Open Sans",label:"Open Sans"},{value:"Open Sans Condensed",label:"Open Sans Condensed"},{value:"Oranienbaum",label:"Oranienbaum"},{value:"Orbitron",label:"Orbitron"},{value:"Oregano",label:"Oregano"},{value:"Orienta",label:"Orienta"},{value:"Original Surfer",label:"Original Surfer"},{value:"Oswald",label:"Oswald"},{value:"Over the Rainbow",label:"Over the Rainbow"},{value:"Overlock",label:"Overlock"},{value:"Overlock SC",label:"Overlock SC"},{value:"Ovo",label:"Ovo"},{value:"Oxygen",label:"Oxygen"},{value:"Oxygen Mono",label:"Oxygen Mono"},{value:"PT Mono",label:"PT Mono"},{value:"PT Sans",label:"PT Sans"},{value:"PT Sans Caption",label:"PT Sans Caption"},{value:"PT Sans Narrow",label:"PT Sans Narrow"},{value:"PT Serif",label:"PT Serif"},{value:"PT Serif Caption",label:"PT Serif Caption"},{value:"Pacifico",label:"Pacifico"},{value:"Paprika",label:"Paprika"},{value:"Parisienne",label:"Parisienne"},{value:"Passero One",label:"Passero One"},{value:"Passion One",label:"Passion One"},{value:"Pathway Gothic One",label:"Pathway Gothic One"},{value:"Patrick Hand",label:"Patrick Hand"},{value:"Patrick Hand SC",label:"Patrick Hand SC"},{value:"Patua One",label:"Patua One"},{value:"Paytone One",label:"Paytone One"},{value:"Peralta",label:"Peralta"},{value:"Permanent Marker",label:"Permanent Marker"},{value:"Petit Formal Script",label:"Petit Formal Script"},{value:"Petrona",label:"Petrona"},{value:"Philosopher",label:"Philosopher"},{value:"Piedra",label:"Piedra"},{value:"Pinyon Script",label:"Pinyon Script"},{value:"Pirata One",label:"Pirata One"},{value:"Plaster",label:"Plaster"},{value:"Play",label:"Play"},{value:"Playball",label:"Playball"},{value:"Playfair Display",label:"Playfair Display"},{value:"Playfair Display SC",label:"Playfair Display SC"},{value:"Podkova",label:"Podkova"},{value:"Poiret One",label:"Poiret One"},{value:"Poller One",label:"Poller One"},{value:"Poly",label:"Poly"},{value:"Pompiere",label:"Pompiere"},{value:"Pontano Sans",label:"Pontano Sans"},{value:"Port Lligat Sans",label:"Port Lligat Sans"},{value:"Port Lligat Slab",label:"Port Lligat Slab"},{value:"Prata",label:"Prata"},{value:"Preahvihear",label:"Preahvihear"},{value:"Press Start 2P",label:"Press Start 2P"},{value:"Princess Sofia",label:"Princess Sofia"},{value:"Prociono",label:"Prociono"},{value:"Prosto One",label:"Prosto One"},{value:"Puritan",label:"Puritan"},{value:"Purple Purse",label:"Purple Purse"},{value:"Quando",label:"Quando"},{value:"Quantico",label:"Quantico"},{value:"Quattrocento",label:"Quattrocento"},{value:"Quattrocento Sans",label:"Quattrocento Sans"},{value:"Questrial",label:"Questrial"},{value:"Quicksand",label:"Quicksand"},{value:"Quintessential",label:"Quintessential"},{value:"Qwigley",label:"Qwigley"},{value:"Racing Sans One",label:"Racing Sans One"},{value:"Radley",label:"Radley"},{value:"Raleway",label:"Raleway"},{value:"Raleway Dots",label:"Raleway Dots"},{value:"Rambla",label:"Rambla"},{value:"Rammetto One",label:"Rammetto One"},{value:"Ranchers",label:"Ranchers"},{value:"Rancho",label:"Rancho"},{value:"Rationale",label:"Rationale"},{value:"Redressed",label:"Redressed"},{value:"Reenie Beanie",label:"Reenie Beanie"},{value:"Revalia",label:"Revalia"},{value:"Ribeye",label:"Ribeye"},{value:"Ribeye Marrow",label:"Ribeye Marrow"},{value:"Righteous",label:"Righteous"},{value:"Risque",label:"Risque"},{value:"Roboto",label:"Roboto"},{value:"Roboto Condensed",label:"Roboto Condensed"},{value:"Roboto Slab",label:"Roboto Slab"},{value:"Rochester",label:"Rochester"},{value:"Rock Salt",label:"Rock Salt"},{value:"Rokkitt",label:"Rokkitt"},{value:"Romanesco",label:"Romanesco"},{value:"Ropa Sans",label:"Ropa Sans"},{value:"Rosario",label:"Rosario"},{value:"Rosarivo",label:"Rosarivo"},{value:"Rouge Script",label:"Rouge Script"},{value:"Ruda",label:"Ruda"},{value:"Rufina",label:"Rufina"},{value:"Ruge Boogie",label:"Ruge Boogie"},{value:"Ruluko",label:"Ruluko"},{value:"Rum Raisin",label:"Rum Raisin"},{value:"Ruslan Display",label:"Ruslan Display"},{value:"Russo One",label:"Russo One"},{value:"Ruthie",label:"Ruthie"},{value:"Rye",label:"Rye"},{value:"Sacramento",label:"Sacramento"},{value:"Sail",label:"Sail"},{value:"Salsa",label:"Salsa"},{value:"Sanchez",label:"Sanchez"},{value:"Sancreek",label:"Sancreek"},{value:"Sansita One",label:"Sansita One"},{value:"Sarina",label:"Sarina"},{value:"Satisfy",label:"Satisfy"},{value:"Scada",label:"Scada"},{value:"Schoolbell",label:"Schoolbell"},{value:"Seaweed Script",label:"Seaweed Script"},{value:"Sevillana",label:"Sevillana"},{value:"Seymour One",label:"Seymour One"},{value:"Shadows Into Light",label:"Shadows Into Light"},{value:"Shadows Into Light Two",label:"Shadows Into Light Two"},{value:"Shanti",label:"Shanti"},{value:"Share",label:"Share"},{value:"Share Tech",label:"Share Tech"},{value:"Share Tech Mono",label:"Share Tech Mono"},{value:"Shojumaru",label:"Shojumaru"},{value:"Short Stack",label:"Short Stack"},{value:"Siemreap",label:"Siemreap"},{value:"Sigmar One",label:"Sigmar One"},{value:"Signika",label:"Signika"},{value:"Signika Negative",label:"Signika Negative"},{value:"Simonetta",label:"Simonetta"},{value:"Sintony",label:"Sintony"},{value:"Sirin Stencil",label:"Sirin Stencil"},{value:"Six Caps",label:"Six Caps"},{value:"Skranji",label:"Skranji"},{value:"Slackey",label:"Slackey"},{value:"Smokum",label:"Smokum"},{value:"Smythe",label:"Smythe"},{value:"Sniglet",label:"Sniglet"},{value:"Snippet",label:"Snippet"},{value:"Snowburst One",label:"Snowburst One"},{value:"Sofadi One",label:"Sofadi One"},{value:"Sofia",label:"Sofia"},{value:"Sonsie One",label:"Sonsie One"},{value:"Sorts Mill Goudy",label:"Sorts Mill Goudy"},{value:"Source Code Pro",label:"Source Code Pro"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Special Elite",label:"Special Elite"},{value:"Spicy Rice",label:"Spicy Rice"},{value:"Spinnaker",label:"Spinnaker"},{value:"Spirax",label:"Spirax"},{value:"Squada One",label:"Squada One"},{value:"Stalemate",label:"Stalemate"},{value:"Stalinist One",label:"Stalinist One"},{value:"Stardos Stencil",label:"Stardos Stencil"},{value:"Stint Ultra Condensed",label:"Stint Ultra Condensed"},{value:"Stint Ultra Expanded",label:"Stint Ultra Expanded"},{value:"Stoke",label:"Stoke"},{value:"Strait",label:"Strait"},{value:"Sue Ellen Francisco",label:"Sue Ellen Francisco"},{value:"Sunshiney",label:"Sunshiney"},{value:"Supermercado One",label:"Supermercado One"},{value:"Suwannaphum",label:"Suwannaphum"},{value:"Swanky and Moo Moo",label:"Swanky and Moo Moo"},{value:"Syncopate",label:"Syncopate"},{value:"Tangerine",label:"Tangerine"},{value:"Taprom",label:"Taprom"},{value:"Tauri",label:"Tauri"},{value:"Telex",label:"Telex"},{value:"Tenor Sans",label:"Tenor Sans"},{value:"Text Me One",label:"Text Me One"},{value:"The Girl Next Door",label:"The Girl Next Door"},{value:"Tienne",label:"Tienne"},{value:"Tinos",label:"Tinos"},{value:"Titan One",label:"Titan One"},{value:"Titillium Web",label:"Titillium Web"},{value:"Trade Winds",label:"Trade Winds"},{value:"Trocchi",label:"Trocchi"},{value:"Trochut",label:"Trochut"},{value:"Trykker",label:"Trykker"},{value:"Tulpen One",label:"Tulpen One"},{value:"Ubuntu",label:"Ubuntu"},{value:"Ubuntu Condensed",label:"Ubuntu Condensed"},{value:"Ubuntu Mono",label:"Ubuntu Mono"},{value:"Ultra",label:"Ultra"},{value:"Uncial Antiqua",label:"Uncial Antiqua"},{value:"Underdog",label:"Underdog"},{value:"Unica One",label:"Unica One"},{value:"UnifrakturCook",label:"UnifrakturCook"},{value:"UnifrakturMaguntia",label:"UnifrakturMaguntia"},{value:"Unkempt",label:"Unkempt"},{value:"Unlock",label:"Unlock"},{value:"Unna",label:"Unna"},{value:"VT323",label:"VT323"},{value:"Vampiro One",label:"Vampiro One"},{value:"Varela",label:"Varela"},{value:"Varela Round",label:"Varela Round"},{value:"Vast Shadow",label:"Vast Shadow"},{value:"Vibur",label:"Vibur"},{value:"Vidaloka",label:"Vidaloka"},{value:"Viga",label:"Viga"},{value:"Voces",label:"Voces"},{value:"Volkhov",label:"Volkhov"},{value:"Vollkorn",label:"Vollkorn"},{value:"Voltaire",label:"Voltaire"},{value:"Waiting for the Sunrise",label:"Waiting for the Sunrise"},{value:"Wallpoet",label:"Wallpoet"},{value:"Walter Turncoat",label:"Walter Turncoat"},{value:"Warnes",label:"Warnes"},{value:"Wellfleet",label:"Wellfleet"},{value:"Wendy One",label:"Wendy One"},{value:"Wire One",label:"Wire One"},{value:"Yanone Kaffeesatz",label:"Yanone Kaffeesatz"},{value:"Yellowtail",label:"Yellowtail"},{value:"Yeseva One",label:"Yeseva One"},{value:"Yesteryear",label:"Yesteryear"},{value:"Zeyada",label:"Zeyada"}],FONT_WEIGHTS:{ABeeZee:["400"],Abel:["400"],"Abril Fatface":["400"],Aclonica:["400"],Acme:["400"],Actor:["400"],Adamina:["400"],"Advent Pro":["400","100","200","300","500","600","700"],"Aguafina Script":["400"],Akronim:["400"],Aladin:["400"],Aldrich:["400"],Alef:["400","700"],Alegreya:["400","700","900"],"Alegreya SC":["400","700","900"],"Alex Brush":["400"],"Alfa Slab One":["400"],Alice:["400"],Alike:["400"],"Alike Angular":["400"],Allan:["400","700"],Allerta:["400"],"Allerta Stencil":["400"],Allura:["400"],Almendra:["400","700"],"Almendra Display":["400"],"Almendra SC":["400"],Amarante:["400"],Amaranth:["400","700"],"Amatic SC":["400","700"],Amethysta:["400"],Anaheim:["400"],Andada:["400"],Andika:["400"],Angkor:["400"],"Annie Use Your Telescope":["400"],"Anonymous Pro":["400","700"],Antic:["400"],"Antic Didone":["400"],"Antic Slab":["400"],Anton:["400"],Arapey:["400"],Arbutus:["400"],"Arbutus Slab":["400"],"Architects Daughter":["400"],"Archivo Black":["400"],"Archivo Narrow":["400","700"],Arimo:["400","700"],Arizonia:["400"],Armata:["400"],Artifika:["400"],Arvo:["400","700"],Asap:["400","700"],Asset:["400"],Astloch:["400","700"],Asul:["400","700"],"Atomic Age":["400"],Aubrey:["400"],Audiowide:["400"],"Autour One":["400"],Average:["400"],"Average Sans":["400"],"Averia Gruesa Libre":["400"],"Averia Libre":["400","300","700"],"Averia Sans Libre":["400","300","700"],"Averia Serif Libre":["400","300","700"],"Bad Script":["400"],Balthazar:["400"],Bangers:["400"],Basic:["400"],Battambang:["400","700"],Baumans:["400"],Bayon:["400"],Belgrano:["400"],Belleza:["400"],BenchNine:["400","300","700"],Bentham:["400"],"Berkshire Swash":["400"],Bevan:["400"],"Bigelow Rules":["400"],"Bigshot One":["400"],Bilbo:["400"],"Bilbo Swash Caps":["400"],Bitter:["400","700"],"Black Ops One":["400"],Bokor:["400"],Bonbon:["400"],Boogaloo:["400"],"Bowlby One":["400"],"Bowlby One SC":["400"],Brawler:["400"],"Bree Serif":["400"],"Bubblegum Sans":["400"],"Bubbler One":["400"],Buda:["300"],Buenard:["400","700"],Butcherman:["400"],"Butterfly Kids":["400"],Cabin:["400","500","600","700"],"Cabin Condensed":["400","500","600","700"],"Cabin Sketch":["400","700"],"Caesar Dressing":["400"],Cagliostro:["400"],Calligraffitti:["400"],Cambo:["400"],Candal:["400"],Cantarell:["400","700"],"Cantata One":["400"],"Cantora One":["400"],Capriola:["400"],Cardo:["400","700"],Carme:["400"],"Carrois Gothic":["400"],"Carrois Gothic SC":["400"],"Carter One":["400"],Caudex:["400","700"],"Cedarville Cursive":["400"],"Ceviche One":["400"],"Changa One":["400"],Chango:["400"],"Chau Philomene One":["400"],"Chela One":["400"],"Chelsea Market":["400"],Chenla:["400"],"Cherry Cream Soda":["400"],"Cherry Swash":["400","700"],Chewy:["400"],Chicle:["400"],Chivo:["400","900"],Cinzel:["400","700","900"],"Cinzel Decorative":["400","700","900"],"Clicker Script":["400"],Coda:["400","800"],"Coda Caption":["800"],Codystar:["400","300"],Combo:["400"],Comfortaa:["400","300","700"],"Coming Soon":["400"],"Concert One":["400"],Condiment:["400"],Content:["400","700"],"Contrail One":["400"],Convergence:["400"],Cookie:["400"],Copse:["400"],Corben:["400","700"],Courgette:["400"],Cousine:["400","700"],Coustard:["400","900"],"Covered By Your Grace":["400"],"Crafty Girls":["400"],Creepster:["400"],"Crete Round":["400"],"Crimson Text":["400","600","700"],"Croissant One":["400"],Crushed:["400"],Cuprum:["400","700"],Cutive:["400"],"Cutive Mono":["400"],Damion:["400"],"Dancing Script":["400","700"],Dangrek:["400"],"Dawning of a New Day":["400"],"Days One":["400"],Delius:["400"],"Delius Swash Caps":["400"],"Delius Unicase":["400","700"],"Della Respira":["400"],"Denk One":["400"],Devonshire:["400"],"Didact Gothic":["400"],Diplomata:["400"],"Diplomata SC":["400"],Domine:["400","700"],"Donegal One":["400"],"Doppio One":["400"],Dorsa:["400"],Dosis:["400","200","300","500","600","700","800"],"Dr Sugiyama":["400"],"Droid Sans":["400","700"],"Droid Sans Mono":["400"],"Droid Serif":["400","700"],"Duru Sans":["400"],Dynalight:["400"],"EB Garamond":["400"],"Eagle Lake":["400"],Eater:["400"],Economica:["400","700"],Electrolize:["400"],Elsie:["400","900"],"Elsie Swash Caps":["400","900"],"Emblema One":["400"],"Emilys Candy":["400"],Engagement:["400"],Englebert:["400"],Enriqueta:["400","700"],"Erica One":["400"],Esteban:["400"],"Euphoria Script":["400"],Ewert:["400"],Exo:["400","100","200","300","500","600","700","800","900"],"Expletus Sans":["400","500","600","700"],"Fanwood Text":["400"],Fascinate:["400"],"Fascinate Inline":["400"],"Faster One":["400"],Fasthand:["400"],"Fauna One":["400"],Federant:["400"],Federo:["400"],Felipa:["400"],Fenix:["400"],"Finger Paint":["400"],"Fjalla One":["400"],"Fjord One":["400"],Flamenco:["400","300"],Flavors:["400"],Fondamento:["400"],"Fontdiner Swanky":["400"],Forum:["400"],"Francois One":["400"],"Freckle Face":["400"],"Fredericka the Great":["400"],"Fredoka One":["400"],Freehand:["400"],Fresca:["400"],Frijole:["400"],Fruktur:["400"],"Fugaz One":["400"],"GFS Didot":["400"],"GFS Neohellenic":["400","700"],Gabriela:["400"],Gafata:["400"],Galdeano:["400"],Galindo:["400"],"Gentium Basic":["400","700"],"Gentium Book Basic":["400","700"],Geo:["400"],Geostar:["400"],"Geostar Fill":["400"],"Germania One":["400"],"Gilda Display":["400"],"Give You Glory":["400"],"Glass Antiqua":["400"],Glegoo:["400"],"Gloria Hallelujah":["400"],"Goblin One":["400"],"Gochi Hand":["400"],Gorditas:["400","700"],"Goudy Bookletter 1911":["400"],Graduate:["400"],"Grand Hotel":["400"],"Gravitas One":["400"],"Great Vibes":["400"],Griffy:["400"],Gruppo:["400"],Gudea:["400","700"],Habibi:["400"],"Hammersmith One":["400"],Hanalei:["400"],"Hanalei Fill":["400"],Handlee:["400"],Hanuman:["400","700"],"Happy Monkey":["400"],"Headland One":["400"],"Henny Penny":["400"],"Herr Von Muellerhoff":["400"],"Holtwood One SC":["400"],"Homemade Apple":["400"],Homenaje:["400"],"IM Fell DW Pica":["400"],"IM Fell DW Pica SC":["400"],"IM Fell Double Pica":["400"],"IM Fell Double Pica SC":["400"],"IM Fell English":["400"],"IM Fell English SC":["400"],"IM Fell French Canon":["400"],"IM Fell French Canon SC":["400"],"IM Fell Great Primer":["400"],"IM Fell Great Primer SC":["400"],Iceberg:["400"],Iceland:["400"],Imprima:["400"],Inconsolata:["400","700"],Inder:["400"],"Indie Flower":["400"],Inika:["400","700"],"Irish Grover":["400"],"Istok Web":["400","700"],Italiana:["400"],Italianno:["400"],"Jacques Francois":["400"],"Jacques Francois Shadow":["400"],"Jim Nightshade":["400"],"Jockey One":["400"],"Jolly Lodger":["400"],"Josefin Sans":["400","100","300","600","700"],"Josefin Slab":["400","100","300","600","700"],"Joti One":["400"],Judson:["400","700"],Julee:["400"],"Julius Sans One":["400"],Junge:["400"],Jura:["400","300","500","600"],"Just Another Hand":["400"],"Just Me Again Down Here":["400"],Kameron:["400","700"],Karla:["400","700"],"Kaushan Script":["400"],Kavoon:["400"],"Keania One":["400"],"Kelly Slab":["400"],Kenia:["400"],Khmer:["400"],"Kite One":["400"],Knewave:["400"],"Kotta One":["400"],Koulen:["400"],Kranky:["400"],Kreon:["400","300","700"],Kristi:["400"],"Krona One":["400"],"La Belle Aurore":["400"],Lancelot:["400"],Lato:["400","100","300","700","900"],"League Script":["400"],"Leckerli One":["400"],Ledger:["400"],Lekton:["400","700"],Lemon:["400"],"Libre Baskerville":["400","700"],"Life Savers":["400","700"],"Lilita One":["400"],"Lily Script One":["400"],Limelight:["400"],"Linden Hill":["400"],Lobster:["400"],"Lobster Two":["400","700"],"Londrina Outline":["400"],"Londrina Shadow":["400"],"Londrina Sketch":["400"],"Londrina Solid":["400"],Lora:["400","700"],"Love Ya Like A Sister":["400"],"Loved by the King":["400"],"Lovers Quarrel":["400"],"Luckiest Guy":["400"],Lusitana:["400","700"],Lustria:["400"],Macondo:["400"],"Macondo Swash Caps":["400"],Magra:["400","700"],"Maiden Orange":["400"],Mako:["400"],Marcellus:["400"],"Marcellus SC":["400"],"Marck Script":["400"],Margarine:["400"],"Marko One":["400"],Marmelad:["400"],Marvel:["400","700"],Mate:["400"],"Mate SC":["400"],"Maven Pro":["400","500","700","900"],McLaren:["400"],Meddon:["400"],MedievalSharp:["400"],"Medula One":["400"],Megrim:["400"],"Meie Script":["400"],Merienda:["400","700"],"Merienda One":["400"],Merriweather:["400","300","700","900"],"Merriweather Sans":["400","300","700","800"],Metal:["400"],"Metal Mania":["400"],Metamorphous:["400"],Metrophobic:["400"],Michroma:["400"],Milonga:["400"],Miltonian:["400"],"Miltonian Tattoo":["400"],Miniver:["400"],"Miss Fajardose":["400"],"Modern Antiqua":["400"],Molengo:["400"],Molle:[],Monda:["400","700"],Monofett:["400"],Monoton:["400"],"Monsieur La Doulaise":["400"],Montaga:["400"],Montez:["400"],Montserrat:["400","700"],"Montserrat Alternates":["400","700"],"Montserrat Subrayada":["400","700"],Moul:["400"],Moulpali:["400"],"Mountains of Christmas":["400","700"],"Mouse Memoirs":["400"],"Mr Bedfort":["400"],"Mr Dafoe":["400"],"Mr De Haviland":["400"],"Mrs Saint Delafield":["400"],"Mrs Sheppards":["400"],Muli:["400","300"],"Mystery Quest":["400"],Neucha:["400"],Neuton:["400","200","300","700","800"],"New Rocker":["400"],"News Cycle":["400","700"],Niconne:["400"],"Nixie One":["400"],Nobile:["400","700"],Nokora:["400","700"],Norican:["400"],Nosifer:["400"],"Nothing You Could Do":["400"],"Noticia Text":["400","700"],"Noto Sans":["400","700"],"Noto Serif":["400","700"],"Nova Cut":["400"],"Nova Flat":["400"],"Nova Mono":["400"],"Nova Oval":["400"],"Nova Round":["400"],"Nova Script":["400"],"Nova Slim":["400"],"Nova Square":["400"],Numans:["400"],Nunito:["400","300","700"],"Odor Mean Chey":["400"],Offside:["400"],"Old Standard TT":["400","700"],Oldenburg:["400"],"Oleo Script":["400","700"],"Oleo Script Swash Caps":["400","700"],"Open Sans":["400","300","600","700","800"],"Open Sans Condensed":["300","700"],Oranienbaum:["400"],Orbitron:["400","500","700","900"],Oregano:["400"],Orienta:["400"],"Original Surfer":["400"],Oswald:["400","300","700"],"Over the Rainbow":["400"],Overlock:["400","700","900"],"Overlock SC":["400"],Ovo:["400"],Oxygen:["400","300","700"],"Oxygen Mono":["400"],"PT Mono":["400"],"PT Sans":["400","700"],"PT Sans Caption":["400","700"],"PT Sans Narrow":["400","700"],"PT Serif":["400","700"],"PT Serif Caption":["400"],Pacifico:["400"],Paprika:["400"],Parisienne:["400"],"Passero One":["400"],"Passion One":["400","700","900"],"Pathway Gothic One":["400"],"Patrick Hand":["400"],"Patrick Hand SC":["400"],"Patua One":["400"],"Paytone One":["400"],Peralta:["400"],"Permanent Marker":["400"],"Petit Formal Script":["400"],Petrona:["400"],Philosopher:["400","700"],Piedra:["400"],"Pinyon Script":["400"],"Pirata One":["400"],Plaster:["400"],Play:["400","700"],Playball:["400"],"Playfair Display":["400","700","900"],"Playfair Display SC":["400","700","900"],Podkova:["400","700"],"Poiret One":["400"],"Poller One":["400"],Poly:["400"],Pompiere:["400"],"Pontano Sans":["400"],"Port Lligat Sans":["400"],"Port Lligat Slab":["400"],Prata:["400"],Preahvihear:["400"],"Press Start 2P":["400"],"Princess Sofia":["400"],Prociono:["400"],"Prosto One":["400"],Puritan:["400","700"],"Purple Purse":["400"],Quando:["400"],Quantico:["400","700"],Quattrocento:["400","700"],"Quattrocento Sans":["400","700"],Questrial:["400"],Quicksand:["400","300","700"],Quintessential:["400"],Qwigley:["400"],"Racing Sans One":["400"],Radley:["400"],Raleway:["400","100","200","300","500","600","700","800","900"],"Raleway Dots":["400"],Rambla:["400","700"],"Rammetto One":["400"],Ranchers:["400"],Rancho:["400"],Rationale:["400"],Redressed:["400"],"Reenie Beanie":["400"],Revalia:["400"],Ribeye:["400"],"Ribeye Marrow":["400"],Righteous:["400"],Risque:["400"],Roboto:["400","100","300","500","700","900"],"Roboto Condensed":["400","300","700"],"Roboto Slab":["400","100","300","700"],Rochester:["400"],"Rock Salt":["400"],Rokkitt:["400","700"],Romanesco:["400"],"Ropa Sans":["400"],Rosario:["400","700"],Rosarivo:["400"],"Rouge Script":["400"],Ruda:["400","700","900"],Rufina:["400","700"],"Ruge Boogie":["400"],Ruluko:["400"],"Rum Raisin":["400"],"Ruslan Display":["400"],"Russo One":["400"],Ruthie:["400"],Rye:["400"],Sacramento:["400"],Sail:["400"],Salsa:["400"],Sanchez:["400"],Sancreek:["400"],"Sansita One":["400"],Sarina:["400"],Satisfy:["400"],Scada:["400","700"],Schoolbell:["400"],"Seaweed Script":["400"],Sevillana:["400"],"Seymour One":["400"],"Shadows Into Light":["400"],"Shadows Into Light Two":["400"],Shanti:["400"],Share:["400","700"],"Share Tech":["400"],"Share Tech Mono":["400"],Shojumaru:["400"],"Short Stack":["400"],Siemreap:["400"],"Sigmar One":["400"],Signika:["400","300","600","700"],"Signika Negative":["400","300","600","700"],Simonetta:["400","900"],Sintony:["400","700"],"Sirin Stencil":["400"],"Six Caps":["400"],Skranji:["400","700"],Slackey:["400"],Smokum:["400"],Smythe:["400"],Sniglet:["800"],Snippet:["400"],"Snowburst One":["400"],"Sofadi One":["400"],Sofia:["400"],"Sonsie One":["400"],"Sorts Mill Goudy":["400"],"Source Code Pro":["400","200","300","500","600","700","900"],"Source Sans Pro":["400","200","300","600","700","900"],"Special Elite":["400"],"Spicy Rice":["400"],Spinnaker:["400"],Spirax:["400"],"Squada One":["400"],Stalemate:["400"],"Stalinist One":["400"],"Stardos Stencil":["400","700"],"Stint Ultra Condensed":["400"],"Stint Ultra Expanded":["400"],Stoke:["400","300"],Strait:["400"],"Sue Ellen Francisco":["400"],Sunshiney:["400"],"Supermercado One":["400"],Suwannaphum:["400"],"Swanky and Moo Moo":["400"],Syncopate:["400","700"],Tangerine:["400","700"],Taprom:["400"],Tauri:["400"],Telex:["400"],"Tenor Sans":["400"],"Text Me One":["400"],"The Girl Next Door":["400"],Tienne:["400","700","900"],Tinos:["400","700"],"Titan One":["400"],"Titillium Web":["400","200","300","600","700","900"],"Trade Winds":["400"],Trocchi:["400"],Trochut:["400","700"],Trykker:["400"],"Tulpen One":["400"],Ubuntu:["400","300","500","700"],"Ubuntu Condensed":["400"],"Ubuntu Mono":["400","700"],Ultra:["400"],"Uncial Antiqua":["400"],Underdog:["400"],"Unica One":["400"],UnifrakturCook:["700"],UnifrakturMaguntia:["400"],Unkempt:["400","700"],Unlock:["400"],Unna:["400"],VT323:["400"],"Vampiro One":["400"],Varela:["400"],"Varela Round":["400"],"Vast Shadow":["400"],Vibur:["400"],Vidaloka:["400"],Viga:["400"],Voces:["400"],Volkhov:["400","700"],Vollkorn:["400","700"],Voltaire:["400"],"Waiting for the Sunrise":["400"],Wallpoet:["400"],"Walter Turncoat":["400"],Warnes:["400"],Wellfleet:["400"],"Wendy One":["400"],"Wire One":["400"],"Yanone Kaffeesatz":["400","200","300","700"],Yellowtail:["400"],"Yeseva One":["400"],Yesteryear:["400"],Zeyada:["400"]},WEIGHT_OPTIONS:[{value:"100",label:"Ultra-Light 100"},{value:"200",label:"Light 200"},{value:"300",label:"Book 300"},{value:"400",label:"Normal 400"},{value:"500",label:"Medium 500"},{value:"600",label:"Semi-Bold 600"},{value:"700",label:"Bold 700"},{value:"800",label:"Extra-Bold 800"},{value:"900",label:"Ultra-Bold 900"}]};n.isFontLoaded=e=>{let l=a.querySelectorAll('link[href*="//fonts.googleapis.com/"]'),n=[];if(l)for(let e=0;e<l.length;e++){let a=l[e].href.match(/family=(.*)%3A/);a&&n.push(a[1])}for(let a=0;a<n.length;a++)if(e===n[a])return!0;return!1};n.loadFont=(e,o)=>{let r=o;r||(r=n.FONT_WEIGHTS[e]),r instanceof Array&&(r=r.join(","));let i=l.stringifyQuery({family:"".concat(e,":").concat(r),subset:"latin-ext"}),u=a.doc.createElement("link");u.href="//fonts.googleapis.com/css?".concat(i),u.type="text/css",u.rel="stylesheet",a.doc.getElementsByTagName("head")[0].appendChild(u)},module.exports=exports=n,e.SM.Fonts=n}(),SM.currentModule=null}),"",{requires:["sm","sm-dom","lodash"]});
YUI.add("sm-form-field-file-picker-behavior",(function(e){SM.currentModule="sm-form-field-file-picker-behavior";var exports={},i=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(i("react")),t=babelHelpers.interopRequireDefault(i("prop-types")),l=babelHelpers.interopRequireDefault(i("sm-dom")),r=babelHelpers.interopRequireDefault(i("sm-smuglog")),s=babelHelpers.interopRequireDefault(i("sm-form-picker-action-panel")),a=i("sm-upload-utils"),n=i("sm-form-field-file-picker-constants");class o extends e.default.Component{constructor(...i){super(...i),babelHelpers.defineProperty(this,"state",{showActionPanel:!1}),babelHelpers.defineProperty(this,"_onClearFilesClick",e=>{this._clearFileInput(),this.props.onFilesCleared(e)}),babelHelpers.defineProperty(this,"_onSelectFilesClick",()=>{this.props.useActionPanel?this.setState({showActionPanel:!0}):this._forceClickOnFileInput()}),babelHelpers.defineProperty(this,"_forceClickOnFileInput",()=>{this.filePickerRef.current&&this.filePickerRef.current.click()}),babelHelpers.defineProperty(this,"_closeActionPanel",()=>{this.setState({showActionPanel:!1})}),babelHelpers.defineProperty(this,"_onChooseFromSMClick",()=>{this._closeActionPanel(),this.props.onChooseFromSMClick()}),babelHelpers.defineProperty(this,"_onInputChange",e=>{this.state.showActionPanel&&this._closeActionPanel();let i=e.target.files,t=this._getValidFiles(i);if(t.length<1)return void this._clearFileInput();let s=t.find(e=>this._isImage(e.type));if(s){let e=l.default.win.URL.createObjectURL(s),i=new l.default.win.FileReader;i.onload=()=>{(0,a.getImageDimensions)(e).then(e=>{if(!e)return;let{imageUrl:i,width:t,height:l}=e;this.props.onImageExtracted(i,t,l)})};try{i.readAsArrayBuffer(s)}catch(e){r.default.add("sm-form-field-file-picker-behavior",{[r.default.FIELD_MESSAGE]:"FileReader failed to readAsArrayBuffer"},r.default.LEVEL_ERROR)}}this.props.onFilesSelected(t,e)}),this.filePickerRef=e.default.createRef()}render(){let{acceptTypes:i,dataTestId:t,errorMessage:l,imageUrl:r,multiple:a,name:n,onClick:o}=this.props,{showActionPanel:c}=this.state;return e.default.createElement("div",{className:"sm-form-field-file-picker"},e.default.createElement("input",{accept:i.join(","),"data-testid":t,multiple:a,name:n,onChange:this._onInputChange,onClick:o,ref:this.filePickerRef,type:"file"}),!!c&&e.default.createElement(s.default,{onChooseFromSMClick:this._onChooseFromSMClick,onCloseClick:this._closeActionPanel,onUploadClick:this._forceClickOnFileInput}),this.props.render({errorMessage:l,imageUrl:r,onClearFilesClick:this._onClearFilesClick,onSelectFilesClick:this._onSelectFilesClick}))}_getValidFiles(e){let{acceptTypes:i,multiple:t}=this.props;if(!e.length)return[];let l=i.includes(n.IMAGE_WILDCARD_MIME_TYPE),r=i.includes(n.VIDEO_WILDCARD_MIME_TYPE),s=[],a=Array.from(e).filter(e=>{let t,a,o=this._isImage(e.type),c=this._isVideo(e.type);return o?(t=n.IMAGE_SIZE,a=n.IMAGE_SIZE_STRING):c&&(t=n.VIDEO_SIZE,a=n.VIDEO_SIZE_STRING),t&&e.size>t?(s.push({filename:e.name,reason:"Exceeds maximum size of ".concat(a,".")}),!1):!!i.includes(e.type)||(!!(o&&l&&n.ACCEPTED_IMAGE_MIME_TYPES.includes(e.type))||(!(!c||!r)||(s.push({filename:e.name,reason:"Invalid file type."}),!1)))});if(s.length)if(t)this.props.onInvalidFiles(s);else{let e=s.shift();this.props.onInvalidFiles(e)}return a}_isImage(e){return"image/"===e.substring(0,6)}_isVideo(e){return"video/"===e.substring(0,6)}_clearFileInput(){this.filePickerRef.current&&(this.filePickerRef.current.value="")}}babelHelpers.defineProperty(o,"displayName","FilePickerBehavior"),babelHelpers.defineProperty(o,"defaultProps",{acceptTypes:[n.IMAGE_WILDCARD_MIME_TYPE],multiple:!1,onChooseFromSMClick:()=>{},onFilesCleared:()=>{},onImageExtracted:()=>{},onInvalidFiles:()=>{},useActionPanel:!1}),babelHelpers.defineProperty(o,"propTypes",{acceptTypes:t.default.array,dataTestId:t.default.string,errorMessage:t.default.string,imageUrl:t.default.string,multiple:t.default.bool,name:t.default.string.isRequired,onClick:t.default.func,onChooseFromSMClick:t.default.func,onFilesCleared:t.default.func,onFilesSelected:t.default.func.isRequired,onImageExtracted:t.default.func,onInvalidFiles:t.default.func,render:t.default.func.isRequired,useActionPanel:t.default.bool});var c=o;exports.default=c}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-dom","sm-form-field-file-picker-constants","sm-form-picker-action-panel","sm-upload-utils"]});
YUI.add("sm-form-field-file-picker-constants",(function(e){SM.currentModule="sm-form-field-file-picker-constants";var exports={},E=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_SIDECAR_EXTENSIONS=exports.DEFAULT_VIDEO_MIMES=exports.DEFAULT_VIDEO_EXTENSIONS=exports.DEFAULT_IMAGE_MIMES=exports.DEFAULT_IMAGE_EXTENSIONS=exports.VIDEO_SIZE_STRING=exports.IMAGE_SIZE_STRING=exports.VIDEO_SIZE=exports.IMAGE_SIZE=exports.IMAGE_AND_VIDEO_WILDCARD_MIME_TYPES=exports.VIDEO_WILDCARD_MIME_TYPE=exports.IMAGE_WILDCARD_MIME_TYPE=exports.ACCEPTED_IMAGE_MIME_TYPES=void 0;var e=babelHelpers.interopRequireDefault(E("sm-pretty-size"));exports.ACCEPTED_IMAGE_MIME_TYPES=["image/heif","image/gif","image/jpeg","image/png"];exports.IMAGE_WILDCARD_MIME_TYPE="image/*";exports.VIDEO_WILDCARD_MIME_TYPE="video/*";const I=["image/*","video/*"];exports.IMAGE_AND_VIDEO_WILDCARD_MIME_TYPES=I;const{photoBytes:_,videoBytes:i}=SM.env.limits;exports.VIDEO_SIZE=i,exports.IMAGE_SIZE=_;const o=(0,e.default)(_);exports.IMAGE_SIZE_STRING=o;const M=(0,e.default)(i);exports.VIDEO_SIZE_STRING=M;exports.DEFAULT_IMAGE_EXTENSIONS=["heic","jpg","jpeg","png","gif"];exports.DEFAULT_IMAGE_MIMES=["image/heif","image/jpeg","image/png","image/gif"];exports.DEFAULT_VIDEO_EXTENSIONS=["3gp","3g2","3gp2","avi","h264","m4v","mov","mp4","mpeg","mts","ogg","ogv","qt","webm","wmv"];exports.DEFAULT_VIDEO_MIMES=["video/3gpp","video/3gpp2","video/x-msvideo","video/h264","video/mp4","video/quicktime","video/mp4","video/mpeg","video/mp2t","video/ogg","video/quicktime","video/webm","video/x-ms-wmv"];exports.DEFAULT_SIDECAR_EXTENSIONS=["cof","comask","cop","cos","cot","dop","icm","on1","pp3","xmp"]}(),SM.currentModule=null}),"",{requires:["sm-pretty-size"]});
YUI.add("sm-form-field-font-dropdown-field",(function(e){SM.currentModule="sm-form-field-font-dropdown-field";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireWildcard(r("react")),l=babelHelpers.interopRequireDefault(r("sm-fonts-dropdown")),o=babelHelpers.interopRequireDefault(r("sm-component-overheadformfield"));class a extends t.PureComponent{constructor(e){super(e),this.state={error:null,value:e.defaultValue}}render(){let e=this.props,r=this.state;return t.default.createElement(o.default,{label:e.label,error:r.error},t.default.createElement(l.default,{defaultValue:r.value,defaultFonts:e.defaultFonts,onSelectionChange:e.onSelectionChange}))}}a.propTypes={label:e.default.string,defaultFonts:e.default.array,defaultValue:e.default.string,onSelectionChange:e.default.func},a.defaultProps={label:"Fonts"};var n=a;exports.default=n}(),SM.currentModule=null}),"",{requires:["classnames","react","sm-dom","sm-fonts-dropdown","sm-component-overheadformfield"]});
YUI.add("sm-form-field-underline-file-picker",(function(e){SM.currentModule="sm-form-field-underline-file-picker";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),t=babelHelpers.interopRequireDefault(l("prop-types")),r=babelHelpers.interopRequireDefault(l("sm-component-button")),a=babelHelpers.interopRequireDefault(l("sm-icon")),i=babelHelpers.interopRequireWildcard(l("sm-component-image")),n=babelHelpers.interopRequireDefault(l("sm-component-underlineformfield"));const o=l=>{let t,{errorMessage:o,imageUrl:u,label:m,onClearFilesClick:d,onSelectFilesClick:s,tooltip:f}=l;return t=u?e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"sm-form-field-container sm-form-field-underline-image-container",onClick:s,title:"Change Image"},e.default.createElement(i.CroppedImage,{aspectRatio:"1x1",className:"sm-form-field-underline-cropped-image",src:{url:u,height:1,width:1}})),e.default.createElement("div",{className:"sm-form-field-underline-image-clear"},e.default.createElement(r.default,{onClick:d,size:"small",noChrome:!0},e.default.createElement(a.default,{name:"XCross",size:a.default.SIZE_SMALL})))):e.default.createElement(r.default,{className:"sm-form-field-small-button sm-form-field-upload-image-empty",onClick:s,size:"small",title:"Select Image"},e.default.createElement(a.default,{name:"Image",size:a.default.SIZE_SMALL})),e.default.createElement(n.default,{tooltip:f,label:m,error:o},t)};o.displayName="UnderlineFilePickerFormField",o.propTypes={tooltip:t.default.string,errorMessage:t.default.string,imageUrl:t.default.string,label:t.default.node,onClearFilesClick:t.default.func.isRequired,onSelectFilesClick:t.default.func.isRequired};var u=o;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","sm-component-button","sm-component-image","sm-component-underlineformfield","sm-icon"]});
YUI.add("sm-form-fields",(function(e){SM.currentModule="sm-form-fields";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("sm-form-field-file-picker-behavior")),s=babelHelpers.interopRequireDefault(t("sm-form-field-underline-file-picker")),n=babelHelpers.interopRequireDefault(t("sm-dom"));function o(e,t){this.form=e,this.fieldCfg=t}function r(e,t){this.form=e,this.fieldCfg=t}function l(e,t){this.form=e,this.fieldCfg=t,this._cmCfg=t.editorConfig,this._jsHintCfg=t.jsHintConfig}o.prototype={render:function(t){var i,s=this.fieldCfg;this.field=e.Node.create(e.SM.Templates.action(s)),i=e.Node.create(e.SM.Templates.label(s)),t.addClass("sm-form-field-underline"),t.append(i),t.appendChild('<div class="sm-form-field-container">').append(this.field)},bind:function(){"function"==typeof this.fieldCfg.onclick&&(this.eventHandle=this.field.on("click",this.fieldCfg.onclick,this.fieldCfg.thisObj||this))},destroy:function(){this.eventHandle&&this.eventHandle.destroy()}},e.namespace("SM.FormFields").ActionFormField=o,r.prototype={render:function(t){var i,s,n,o=this.fieldCfg;this.container=t,this.field=i=new e.SM.Slider({min:0,max:100,length:100,valuePanelFormatter:function(t){return e.Escape.html(t+"%")}}),this.description=n=e.Node.create(e.SM.Templates.fieldDescription(o)),this.label=s=e.Node.create(e.SM.Templates.label(o)),t.addClass("sm-form-field-underline"),t.append(s),i.render(t.appendChild('<div class="sm-form-field-container">')),t.append(n)},bind:function(){this.field.on("valueChange",(function(e){this.form.get("model").set(this.fieldCfg.name,e.newVal,{src:"ff",originEvent:e})}),this)},setValue:function(e){this.field.set("value",e)},destroy:function(){this.field.destroy()}},e.namespace("SM.FormFields").AlphaFormField=r,l.prototype={render:function(t){var i,s,n=this.fieldCfg,o=this._cmCfg,r=this._jsHintCfg;this.container=t,this.field=i=e.Node.create(e.SM.Templates.textarea(n)),this.label=s=e.Node.create(e.SM.Templates.label(n)),t.addClass("sm-form-field-overhead"),t.append(s),t.appendChild('<div class="sm-form-field-container">').append(i),n.placeholder&&i.setAttribute("placeholder",n.placeholder),i.plug(e.SM.Plugin.CodeMirror,{editorMode:n.editorMode,editorHeight:n.editorHeight,cmConfig:o,jsHintConfig:r})},bind:function(){this.eventHandle=this.field.CodeMirror.on("codemirror:change",(function(e){this.form.get("model").set(this.fieldCfg.name,this.field.CodeMirror.getEditorContents(),{src:"ff",originEvent:e})}),this)},setValue:function(e){this.field.CodeMirror.setEditorContents(e)},setError:function(t){this.errorNode||(this.errorNode=e.Node.create('<div class="sm-form-field-error-msg"></div>'),this.container.appendChild(this.errorNode),this.field.CodeMirror.get("wrapperNode").addClass("sm-form-field-error")),this.errorNode.set("text",t)},clearError:function(){this.errorNode&&(this.errorNode.remove(!0),this.errorNode=null,this.field.CodeMirror.get("wrapperNode").removeClass("sm-form-field-error"))},destroy:function(){this.eventHandle.detach(),this.field.unplug(e.SM.Plugin.CodeMirror)}},e.namespace("SM.FormFields").CodeFormField=l;var a=e.Base.create("sm-colorpicker-panel",e.SM.Panel,[],{initializer:function(t){this.setAttrs({width:254,zIndex:1,constrain:!0,hideOn:[{eventName:"clickoutside"}],smbuttons:[{icon:"XCross",value:"cancel",size:"small"},{icon:"CheckMark",value:"ok",size:"small",skin:"submit"}]}),this.colorPicker=new e.SM.ColorPicker({paletteMode:t&&t.paletteMode})},destructor:function(){new e.EventHandle(this._eventHandles).detach(),this.colorPicker&&this.colorPicker.destroy()},renderUI:function(){a.superclass.renderUI.apply(this,arguments),this.get("boundingBox").addClass("sm-colorpicker-panel"),this.colorPicker.render(),this.colorPicker.addTarget(this),this.setStdModContent("body",this.colorPicker.get("container"))},bindUI:function(){a.superclass.bindUI.apply(this,arguments),this.getStdModNode("footer").delegate("click",this._onButtonClick,".sm-button",this)},_onButtonClick:function(e){"cancel"===e.currentTarget.getData("value")&&this.fire("cancel"),this.hide()}},{CSS_PREFIX:"sm-panel"});function d(e,t){this.form=e,this.fieldCfg=t}function c(t,i){this._form=t,this._fieldCfg=i;var s={items:i.items,noChrome:void 0===i.noChrome||i.noChrome,availableOptionTemplate:i.availableOptionTemplate};i.width&&(s.width=i.width),i.selectedOptionTemplate&&(s.selectedOptionTemplate=i.selectedOptionTemplate),i.selectText&&(s.selectText=i.selectText),i.classNames&&(s.classNames=i.classNames),this._dropdown=new e.SM.Views.Dropdown(s)}d.prototype={render:function(t){var i,s=this.fieldCfg,n=this.form.get("model").get(this.fieldCfg.name);this.container=t,t.addClass("sm-form-field-underline"),this.clearButton=e.Node.create(e.SM.Templates.button({icon:"XCross",svg:!0,size:"small",skin:"submit",className:"sm-colorpicker-reset"})),this.field=e.Node.create(e.SM.Templates.button({size:"small",icon:"EyeDropper",className:"sm-colorpicker-button"})),this.swatch=e.Node.create('<div class="sm-colorpicker-swatch"></div>'),this.swatch.hide(),this.label=i=e.Node.create(e.SM.Templates.label(s)),this.colorPanel=new a({paletteMode:s.paletteMode,render:!0,visible:!1}),t.append(i),t.appendChild('<div class="sm-form-field-container">').append(this.clearButton).append(this.swatch).append(this.field),this._syncSwatch(n)},bind:function(){var t=this,i=function(i){var s=this.form.get("model").get(t.fieldCfg.name);this._initialHex=s,this.colorPanel.colorPicker.set("hex",s).render(),this.colorPanel.show().align(i.currentTarget,[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.TR])};this.field.on("click",i,this),this.swatch.on("click",i,this),this.colorPanel.colorPicker.after("hexChange",(function(e){t.form.get("model").set(t.fieldCfg.name,e.newVal),this._syncSwatch(e.newVal)}),this),this.colorPanel.after("cancel",(function(){t.form.get("model").set(t.fieldCfg.name,this._initialHex)}),this),this.clearButton.on("click",(function(){this.form.get("model").set(this.fieldCfg.name,""),this.clearButton.hide()}),this)},_syncSwatch:function(e){e?(this.field.hide(),this.swatch.setStyle("backgroundColor","#"+e),this.swatch.show(),this.clearButton.show()):(this.swatch.hide(),this.swatch.setStyle("backgroundColor","transparent"),this.field.show(),this.clearButton.hide())},setValue:function(e){this._syncSwatch(e)},destroy:function(){this.field.destroy(),this.colorPanel&&this.colorPanel.destroy()},hideColorPicker:function(){this.colorPanel&&this.colorPanel.hide()},renderErrorAfterContainer:!0},e.mix(d.prototype,e.SM.Fields.FieldError),e.namespace("SM.FormFields").ColorFormField=d,c.prototype={render:function(t){var i,s=this._fieldCfg,n=this._dropdown.render().get("container");this.container=t,this.label=i=e.Node.create(e.SM.Templates.label({label:s.label})),t.addClass("sm-form-field-underline"),t.append(i),t.appendChild('<div class="sm-form-field-container">').append(n)},bind:function(){this.eventHandle=this._dropdown.after("valueChange",(function(e){this._form.get("model").set(this._fieldCfg.name,e.newVal,{src:"ff",originEvent:e})}),this)},setValue:function(e){this._dropdown.setSelectedValue(e)},destroy:function(){this.eventHandle.detach()},renderErrorAfterContainer:!0},e.mix(c.prototype,e.SM.Fields.FieldError),e.namespace("SM.FormFields").DropdownFormField=c;var h=SM.import("react"),m=SM.import("react-dom"),f=SM.import("sm-form-field-font-dropdown-field");function u(e,t){this.form=e,this.fieldCfg=t,this.label=t.label,this.defaultFonts=t.defaultFonts}function p(e,t){this.form=e,this.fieldCfg=t}function g(){g.superclass.constructor.apply(this,arguments)}function v(){v.superclass.constructor.apply(this,arguments)}function C(e,t){this.form=e,this.fieldCfg=t}function b(e,t){this.form=e,this.fieldCfg=t}function _(e,t){this.form=e,this.fieldCfg=t}function S(e,t){this.form=e,this.fieldCfg=t}function T(e,t){this.form=e,this.fieldCfg=t}function M(){M.superclass.constructor.apply(this,arguments),this._model=new e.SM.Models.Image}function k(){k.superclass.constructor.apply(this,arguments),this._model=new e.SM.Models.Album}function E(){E.superclass.constructor.apply(this,arguments),this._model=new e.SM.Models.UserNode}function F(){F.superclass.constructor.apply(this,arguments),this._model=new e.SM.Models.UserNode}function I(){I.superclass.constructor.apply(this,arguments),this._model=new e.SM.Models.UserNode}function N(){N.superclass.constructor.apply(this,arguments),this._model=new e.SM.Models.Image}function y(e,t){this.form=e,this.fieldCfg=t}function P(e,t){this.form=e,this.fieldCfg=t}function x(e,t){this.form=e,this.fieldCfg=t}function w(t,i){this.form=t,this.fieldCfg=i,this._editor=new e.Editor({html:i.value}),this._editor.plug(e.SM.Editor.Toolbar)}function D(e,t){this.form=e,D.superclass.constructor.call(this,t)}function A(e,t){this.form=e,this.fieldCfg=t}function H(e,t){this.form=e,this.fieldCfg=t}u.prototype={destroy:function(){m.unmountComponentAtNode(this.container.getDOMNode()),this._boundHandler&&window.removeEventListener("message",this._boundHandler)},render:function(e){var t=this.fieldCfg;this.formField=m.render(h.createElement(f,{label:this.label,defaultValue:this.form.get("model").get(this.fieldCfg.name),defaultFonts:t.defaultFonts,onSelectionChange:this._onSelectionChange.bind(this)}),e.getDOMNode()),this.container=e},_onSelectionChange:function(e){this.form.get("model").set(this.fieldCfg.name,e,{source:"ff"})},setError:function(e){this.formField.setState({errorMessage:e})},setValue:function(e){this.formField.setState({value:e})}},e.namespace("SM.FormFields").FontFormField=u,p.prototype={render:function(t){this.view=new g({modelList:new e.ModelList({items:this.fieldCfg.value})}),this.view.render(),t.append(this.view.get("container"))},bind:function(){this.eventHandle=this.view.get("modelList").after(["*:change","*:destroy","add"],this.afterChange,this)},afterChange:function(t){this.form.get("model").set(this.fieldCfg.name,e.Array.map(this.view.get("modelList").toJSON(),(function(e){return delete e.id,e})),{src:"ff",originEvent:t})},setValue:function(e){this.view.get("modelList").reset(e)},destroy:function(){this.eventHandle.detach(),this.view.destroy()}},e.namespace("SM.FormFields").FormBuilderFormField=p,e.extend(g,e.View,{render:function(){var t=this.get("modelList"),i=this.get("container");i.empty(),t.each((function(e){var t=new v({model:e});t.render(),i.append(t.get("container"))}),this),this.addButtonNode=i.appendChild(e.SM.Templates.button({label:"add new form item!"})),this.eventHandle=this.addButtonNode.on("click",this.addItem,this)},destructor:function(){this.eventHandle.detach()},addItem:function(){var t=new e.Model,i=new v({model:t});this.get("modelList").add(t),i.render(),this.get("container").insert(i.get("container"),this.addButtonNode)}}),e.extend(v,e.View,{render:function(){var t=this,i=t.get("model").toJSON(),s=t.get("container");s.addClass("sm-panel-content").setHTML(e.SM.Templates.textbox({name:"Label",value:i.Label,placeholder:"Label"})+e.SM.Templates.select({name:"Type",value:i.Type,options:v.SELECT_OPTIONS})+e.SM.Templates.textbox({name:"Options",value:i.Options,placeholder:"Comma-separated options"})+e.SM.Templates.textbox({name:"DefaultValue",value:i.DefaultValue,placeholder:"Default value"})),this.bg=new e.ButtonGroup({srcNode:e.Node.create(e.SM.Templates.toggle())}),this.bg.render(e.Node.create("<div>Required: </div>").appendTo(s)),s.append(e.SM.Templates.button({icon:"Trash"})),t.eventHandles=[].concat(s.all(".sm-form-field-text-input").on("change",(function(e){t.get("model").set(e.currentTarget.get("name"),e.currentTarget.get("value"))})),s.all(".sm-form-field-select").on("change",(function(e){t.get("model").set(e.currentTarget.get("name"),e.currentTarget.get("value"))})),this.bg.on("selectionChange",(function(e){t.get("model").set("Required","on"===e.target.getSelectedButtons()[0].get("value"))})))},events:{".sm-button":{click:"selfDestruct"}},selfDestruct:function(){this.get("model").destroy(),this.bg.destroy(),new e.EventHandle(this.eventHandles).detach(),this.destroy({remove:!0})}}),v.TYPES={DROPDOWN:"dropdown",SMSWITCH:"switch",CHECKBOX:"checkbox",CHECKBOXES:"checkboxes",TEXT:"text",TEXTAREA:"textarea",IMAGE:"image",ALBUM:"album",NODE:"node",VIDEO:"video",PASSWORD:"password",EMAIL:"email",HIDDEN:"hidden",HTML:"html",JS:"js",CSS:"css",CUSTOM:"custom",SINGLEFILEPICKER:"singlefilepicker",UPLOADFILEPICKER:"uploadfilepicker"},v.SELECT_OPTIONS=[[v.TYPES.DROPDOWN,"Drop Down Menu"],[v.TYPES.SMSWITCH,"Switch"],[v.TYPES.CHECKBOX,"Checkbox"],[v.TYPES.CHECKBOXES,"Checkboxes"],[v.TYPES.TEXT,"Text Box"],[v.TYPES.TEXTAREA,"Multi-Line Text Box"],[v.TYPES.IMAGE,"Image"],[v.TYPES.ALBUM,"Album"],[v.TYPES.NODE,"Node"],[v.TYPES.VIDEO,"Video"],[v.TYPES.PASSWORD,"Password Box"],[v.TYPES.EMAIL,"Email"],[v.TYPES.HIDDEN,"Hidden"],[v.TYPES.HTML,"HTML"],[v.TYPES.JS,"JavaScript"],[v.TYPES.CSS,"CSS"],[v.TYPES.CUSTOM,"Custom"],[v.TYPES.SINGLEFILEPICKER,"SingleFilePicker"],[v.TYPES.UPLOADFILEPICKER,"UploadFilePicker"]],C.prototype={render:function(t){var i=this.fieldCfg;this.field=e.Node.create("<h5>"+i.label+"</h5>"),t.addClass("sm-form-field-header"),t.append(this.field)},destroy:function(){this.field.destroy()}},e.namespace("SM.FormFields").HeaderFormField=C,b.prototype={render:function(t){this.field=e.Node.create(e.SM.Templates.textbox(this.fieldCfg)),t.append(this.field)},destroy:function(){this.field.destroy()},setValue:function(e){this.field.set("value",e)}},e.namespace("SM.FormFields").HiddenFormField=b,_.prototype={render:function(t){var i,s,n=this.fieldCfg;this.container=t,this.field=i=e.Node.create(e.SM.Templates.textbox(e.merge(n,{noChrome:!0}))),this.editIcon=e.Node.create('<svg class="sm-icon sm-icon-small sm-icon-Edit sm-form-field-editable-indicator" role="presentation" title="Edit"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sm-icon-def-small-Edit"></use></svg>'),this.label=s=e.Node.create(e.SM.Templates.label(n)),t.addClass("sm-form-field-underline"),t.append(s),t.appendChild('<div class="sm-form-field-container">').appendChild('<span class="sm-form-field-inlinetext-container">').append(i).append(this.editIcon)},bind:function(){this.eventHandle=this.field.on("valuechange",(function(e){this.form.get("model").set(this.fieldCfg.name,e.target.get("value"),{src:"ff",originEvent:e})}),this),this.editIcon.on("click",(function(){this.field.focus()}),this)},setValue:function(e){this.field.set("value",e)},destroy:function(){this.eventHandle.detach()},renderErrorAfterContainer:!0},e.mix(_.prototype,e.SM.Fields.FieldError),e.namespace("SM.FormFields").InlinetextFormField=_,S.prototype={render:function(t){var i,s,n=this.fieldCfg;this.container=t,n.units?(i=e.Node.create(e.SM.Templates.textboxLabel(e.merge(n,{noChrome:!0,suffix:n.units}))),this.field=i.one(".sm-form-field-text-input"),this.units=i.one(".sm-form-field-label")):this.field=i=e.Node.create(e.SM.Templates.textbox(e.merge(n,{noChrome:!0}))),this.label=s=e.Node.create(e.SM.Templates.label(n)),t.addClass("sm-form-field-underline"),t.append(s),t.appendChild('<div class="sm-form-field-container">').append(i)},bind:function(){this.eventHandles=[],this.eventHandles.push(this.field.on("valuechange",(function(e){var t=e.target.get("value"),i=this._sanitizeInput(e.target.get("value"));t!==i&&this.field.set("value",i),this.form.get("model").set(this.fieldCfg.name,i,{src:"ff",originEvent:e})}),this),this.field.on("keydown",(function(e){var t=e.charCode,i=this.field.get("value"),s=this.fieldCfg.step||1;if(38===t)i=parseFloat(i)+s;else{if(40!==t)return;i=parseFloat(i)-s}e.preventDefault(),this.field.set("value",i)}),this),this.field.on("click",(function(){this.field.select()}),this))},_sanitizeInput:function(e){var t=e.replace(/[^\d.-]/g,""),i=this.fieldCfg,s=i.min,n=i.max;return i.round&&(t=Math.round(t)),void 0!==s&&s>t&&(t=s),void 0!==n&&n<t&&(t=n),t},setUnits:function(e){this.units&&(""===e?this.units.hide():this.units.show(),this.units.set("text",e))},setValue:function(e){this.field.set("value",e)},destroy:function(){e.Array.each(this.eventHandles,(function(e){e.detach()}))},renderErrorAfterContainer:!0},e.mix(S.prototype,e.SM.Fields.FieldError),e.namespace("SM.FormFields").NumberFormField=S,T.prototype={_pluralText:"Items",_singularText:"Item",classNames:{hasSelection:"sm-picker-plugin-has-selection",hasThumb:"sm-picker-plugin-has-thumb",launchPicker:"sm-picker-plugin-launch",selectionText:"sm-picker-plugin-selection-text",thumbContainer:"sm-picker-plugin-thumb"},render:function(t){var i,s,n,o=this.fieldCfg;this.container=t,t.addClass("sm-form-field-underline sm-form-field-picker"),this.field=i=e.Node.create('<input type="hidden" name="'+e.Escape.html(o.name)+'" value="'+e.Escape.html(o.value||"")+'"/>'),this.label=s=e.Node.create(e.SM.Templates.label(o)),t.append(s),t.appendChild('<div class="sm-form-field-container">').append(i).append(this._getActionContainer()),(n=e.merge(this.pickerPluginConfig)).pickerConfig=e.merge(this.pickerPluginConfig.pickerConfig,o.pickerConfig),o.pickerStartNode&&(n.pickerStartNode=o.pickerStartNode),i.plug(e.SM.Plugin.Picker,n)},bind:function(){this.eventHandles=[this.field.pickerplugin.on("valueChanged",(function(e){this.form.get("model").set(this.fieldCfg.name,this.field.get("value"),{src:"ff",originEvent:e})}),this),this.field.pickerplugin.after("hidingPicker",(function(e){"sm-picker:pickerCancel"!==e.pickType&&(this._actionContainer.addClass(this.classNames.hasSelection),this._afterSelection(e))}),this),this.container.one(".sm-picker-plugin-clear").on("click",(function(e){e.preventDefault(),this.form.get("model").set(this.fieldCfg.name,"",{src:"ff",originEvent:"clear"}),this.form.clearError(this.fieldCfg.name),this.setValue("")}),this),this.container.delegate("click",(function(e){e.preventDefault(),this.field.pickerplugin.showPicker()}),"."+this.classNames.launchPicker,this)]},getModel:function(){return this._model},setValue:function(t){var i=this;this.field.pickerplugin.changePreselected(t,{silent:!0}),t?(this._actionContainer.addClass(this.classNames.hasSelection),e.when(this._getSelectionText(t)).then((function(e){i._setSelectionText(e)}))):this._clearSelection()},destroy:function(){new e.EventHandle(this.eventHandles).detach(),this.field.unplug(e.SM.Plugin.Picker),this._model&&this._model.destroy(),this._view&&this._view.destroy(!0)},_getActionContainer:function(){var t,i=this.fieldCfg,s=this,n=this._limit=i.pickerConfig&&i.pickerConfig.limit||1;return this._makeSelectionText=i.makeSelectionText||"Choose "+(n>1?this._pluralText:this._singularText),t=e.Node.create('<div class="sm-picker-plugin-container"><div class="'+this.classNames.launchPicker+" "+this.classNames.thumbContainer+'"></div><div class="'+this.classNames.launchPicker+' sm-picker-plugin-image-button"></div><div class="sm-form-field-action"><a href="#" title="Change selection"><span class="'+this.classNames.launchPicker+" "+this.classNames.selectionText+'">'+this._makeSelectionText+'</span><span class="'+this.classNames.launchPicker+' sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketRight"></span><span class="sm-picker-plugin-clear sm-fonticon sm-fonticon-small sm-fonticon-XCross" title="Clear Selection"></span></a></div></div>'),i.value&&(t.addClass(this.classNames.hasSelection),e.when(this._getSelectionText(i.value)).then((function(e){s._setSelectionText(e)}))),this._actionContainer=t,this._actionContainer},_afterSelection:function(e){var t,i=e.selectedData;i&&i.length>0&&(1===i.length?t=i[0].typeInfo.Name:i.length>1&&(t=i.length+" "+this._pluralText),this._setSelectionText(t))},_clearSelection:function(){var t=this._actionContainer;t.removeClass(this.classNames.hasSelection).removeClass(this.classNames.hasThumb),t.one("."+this.classNames.selectionText).setHTML(e.Escape.html(this._makeSelectionText))},_getSelectionText:function(t){var i=t.split(/,\s*/g),s=this;return i.length>1?i.length+" "+this._pluralText:new e.Promise((function(t){var n,o,r,l=s._model,a={};o=(n=i[0].split("-"))[0],r=n[1],a[s._modelId]=o,s._modelKey&&(a[s._modelKey]=r),l.load({data:a},(function(i,n){if(!i)switch(s.fieldCfg.type){case"album":t(n.Album.Title);break;case"folder":case"node":case"page":var o=n.Node.Name;n.Node.Type===e.SM.Models.UserNode.TYPES.ROOT&&(o="Homepage"),t(o);break;case"image":case"video":t(n)}}))}))},_setSelectionText:function(t){this._actionContainer.one("."+this.classNames.selectionText).setHTML(e.Escape.html(t))},renderErrorAfterContainer:!0},e.mix(T.prototype,e.SM.Fields.FieldError),e.extend(M,T,{_modelId:"ImageID",_modelKey:"ImageKey",_pluralText:"Photos",_singularText:"Photo",pickerPluginConfig:{},_afterSelection:function(e){var t=e.selectedData;if(t.length>1)return this._actionContainer.removeClass(this.classNames.hasThumb),M.superclass._afterSelection.call(this,e);this._model.setAttrs(t[0].typeInfo),this._displayThumbnail()},_displayThumbnail:function(){var e=this._actionContainer;e.addClass(this.classNames.hasThumb),this._getSelectedImageTileView(e.one("."+this.classNames.thumbContainer)).render({clear:!0})},_getActionContainer:function(){var t,i=M.superclass._getActionContainer.call(this);return 1===this._limit&&(t=e.SM.Templates.button({icon:"Image",svg:!0,size:"small",title:"Choose an image"}),i.addClass("sm-picker-plugin-mode-image").one(".sm-picker-plugin-image-button").setHTML(t)),i},_getSelectedImageTileView:function(t){return this._view||(this._view=new e.SM.Views.Tile({center:!1,clickable:!1,containerWidth:32,imageCrop:"1x1",imageSize:"fit",maxHeight:32,maxWidth:32,resource:this._model})),this._view.set("parentNode",t),this._view},_setSelectionText:function(e){var t=this._actionContainer;if(this.field.get("value")){if("string"==typeof e)return t.removeClass(this.classNames.hasThumb),M.superclass._setSelectionText.call(this,e);t.addClass(this.classNames.hasThumb),this._model.setAttrs(e),this._displayThumbnail()}}}),e.namespace("SM.FormFields").ImageFormField=M,e.extend(k,T,{_modelId:"AlbumID",_modelKey:"AlbumKey",_pluralText:"Galleries",_singularText:"Gallery",pickerPluginConfig:{pickerMode:e.SM.Picker.MODE_ALBUM}}),e.namespace("SM.FormFields").AlbumFormField=k,e.extend(E,T,{_modelId:"NodeID",_pluralText:"Folders",_singularText:"Folder",pickerPluginConfig:{pickerMode:e.SM.Picker.MODE_FOLDER}}),e.namespace("SM.FormFields").FolderFormField=E,e.extend(F,T,{_modelId:"NodeID",pickerPluginConfig:{pickerMode:e.SM.Picker.MODE_NODE}}),e.namespace("SM.FormFields").NodeFormField=F,e.extend(I,T,{_modelId:"NodeID",_pluralText:"Pages",_singularText:"Page",pickerPluginConfig:{pickerMode:e.SM.Picker.MODE_PAGE}}),e.namespace("SM.FormFields").PageFormField=I,e.extend(N,M,{_pluralText:"Videos",_singularText:"Video",pickerPluginConfig:{pickerConfig:{disablePhoto:1,title:"Single Video Picker",message:"Please select a single video from one of your galleries.",limit:1},pickerMode:"video"},_getActionContainer:function(){var t,i=N.superclass._getActionContainer.call(this);return 1===this._limit&&(t=e.SM.Templates.button({icon:"VideoCamera",size:"small",title:"Choose a video"}),i.addClass("sm-picker-plugin-mode-image").one(".sm-picker-plugin-image-button").setHTML(t)),i}}),e.namespace("SM.FormFields").VideoFormField=N,y.prototype={render:function(t){var i,s,n,o=this.fieldCfg;this.container=t,o.options&&void 0===o.value&&(e.Lang.isArray(o.options[0])?o.value=o.options[0][0]:o.value=o.options[0].value,this.form.get("model").set(o.name,o.value,{silent:!0})),!1===o.noChrome?t.addClass("sm-form-field-overhead"):t.addClass("sm-form-field-underline"),this.field=i=e.Node.create(e.SM.Templates.select(e.merge({noChrome:!0},o))),this.description=n=e.Node.create(e.SM.Templates.fieldDescription(o)),this.label=s=e.Node.create(e.SM.Templates.label(o)),t.append(s),t.appendChild('<div class="sm-form-field-container">').append(i),t.append(n)},bind:function(){this.eventHandle=this.field.one(".sm-form-field-select").on("change",(function(e){this.form.get("model").set(this.fieldCfg.name,e.target.get("value"),{src:"ff",originEvent:e})}),this)},setValue:function(t){e.Lang.isValue(t)||(t=""),this.field.one(".sm-form-field-select").set("value",t.toString())},setDescription:function(e){this.description.setHTML(e)},setTooltip:function(e){this.label.one("div").setAttribute("data-tooltip",e)},getDescription:function(){return this.description},enable:function(){this.field.one(".sm-form-field-select").removeAttribute("disabled")},disable:function(){this.field.one(".sm-form-field-select").setAttribute("disabled","disabled")},isDisabled:function(){return"disabled"===this.field.one(".sm-form-field-select").getAttribute("disabled")},addOption:function(t,i){this.field.one('.sm-form-field-select-option[data-value="'+t+'"]')||this.field.one(".sm-form-field-select").append(e.SM.Templates.option({value:t,label:i}))},prependOption:function(t,i){this.field.one('.sm-form-field-select-option[data-value="'+t+'"]')||this.field.one(".sm-form-field-select").prepend(e.SM.Templates.option({value:t,label:i}))},removeOption:function(e){this.field.all('.sm-form-field-select-option[data-value="'+e+'"]').remove()},enableOption:function(e){this.field.all('.sm-form-field-select-option[data-value="'+e+'"]').removeAttribute("disabled")},disableOption:function(e){this.field.all('.sm-form-field-select-option[data-value="'+e+'"]').setAttribute("disabled","disabled")},enableAllOptions:function(){this.field.all(".sm-form-field-select-option").removeAttribute("disabled")},disableAllOptions:function(){this.field.all(".sm-form-field-select-option").setAttribute("disabled","disabled")},replaceOptions:function(t){var i=this.field.one(".sm-form-field-select").get("value");this.field.one(".sm-form-field-select").setHTML(e.Array.reduce(t,"",(function(t,i){return t+e.SM.Templates.option(e.merge(i,{noChrome:!1!==this.fieldCfg.noChrome}))}),this));for(var s=!1,n=0;n<t.length;n++)t[n].value===i&&(s=!0);!s&&t.length>0&&(i=t[0].value),this.setValue(i)},destroy:function(){this.eventHandle.detach()},renderErrorAfterContainer:!0},e.mix(y.prototype,e.SM.Fields.FieldError),e.namespace("SM.FormFields").SelectFormField=y,P.prototype={render:function(t){var i=this.fieldCfg;this.field=e.Node.create("<span>"+i.label+"</span>"),t.addClass("sm-form-field-span"),t.append(this.field)},destroy:function(){this.field.destroy()}},e.namespace("SM.FormFields").SpanFormField=P,x.prototype={render:function(t){var i=this.form,s=this.fieldCfg,n=this.contentDivs=e.Node.create('<div class="sm-tabs-content"></div>');e.Array.each(s.tabs,(function(t){var s=e.guid(),o=n.appendChild("<div></div>").setAttribute("id",s);e.Array.each(t.subFields,(function(e){i._fieldContainers[e].appendTo(o)})),t.anchor=s}));var o=this.field=e.Node.create(e.SM.Templates.tabs(s));t.append(o).append(n).removeClass("sm-form-field-wrapper");var r=s.orientation;r&&"vertical"===r&&t.addClass("sm-form-tabs-clearfix"),this.setValue(o.one(".yui3-tab-selected").getData("value"))},bind:function(){var e=this.form.get("model");this.eventHandle=this.field.delegate("click",(function(t){var i=t.currentTarget.getData("value");t.currentTarget.hasClass("yui3-tab-selected")||(e.set(this.fieldCfg.name,i,{src:"ff",originEvent:t}),this.setValue(i)),t.halt()}),".sm-tab",this)},setValue:function(e){var t=this.field.one('> [data-value="'+e+'"]'),i=t.one("a").getAttribute("href"),s=this.contentDivs;t.addClass("yui3-tab-selected").siblings().removeClass("yui3-tab-selected"),s.all("> div").hide(),s.one(i).show()},setErrorTabs:function(e){this.setTabNotices(e,"error")},setWarningTabs:function(e){this.setTabNotices(e,"warning")},setTabNotices:function(t,i){e.Array.each(this.fieldCfg.tabs,(function(e){var s=e.label,n=this.field.one(' > [data-value="'+s+'"]');e.subFields.filter((function(e){return-1!==t.indexOf(e)})).length&&!n.hasClass("yui3-tab-selected")&&this.setTabNotice(s,i)}),this)},clearErrorTabs:function(){this.clearTabNotices("error")},clearWarningTabs:function(){this.clearTabNotices("warning")},clearTabNotices:function(e){this.field.all("> [data-value].sm-tab-"+e).removeClass("sm-tab-"+e)},setErrorTab:function(e){this.setTabNotice(e,"error")},setWarningTab:function(e){this.setTabNotice(e,"error")},setTabNotice:function(e,t){this.field.one('> [data-value="'+e+'"]').addClass("sm-tab-"+t)},clearErrorTab:function(e){this.clearTabNotice(e,"error")},clearWarningTab:function(e){this.clearTabNotice(e,"warning")},clearTabNotice:function(e,t){this.field.one('> [data-value="'+e+'"]').removeClass("sm-tab-"+t)},getErrorTab:function(t){var i="";return e.Array.some(this.fieldCfg.tabs,(function(e){var s=e.label;if(e.contents.filter((function(e){return e.name===t})).length)return i=s,!0}),this),i},destroy:function(){this.eventHandle.detach()}},e.namespace("SM.FormFields").TabsFormField=x,w.prototype={render:function(e){this.container=e,e.addClass("sm-form-field-overhead").setStyle("marginTop",0),this._editor.render(),this._editor._inputNode.setStyle("height",this.fieldCfg.editorHeight),this._editor.get("container").appendTo(e),this._editor.focus()},bind:function(){var e=this._editor;this._eventHandles=[e.on("selectionChange",(function(t){this.form.get("model").set(this.fieldCfg.name,e.get("html"),{src:"ff",originEvent:t})}),this)]},setValue:function(e){this._editor.set("html",e)},setError:function(t){this.errorNode||(this.errorNode=e.Node.create('<div class="sm-form-field-error-msg"></div>'),this.container.appendChild(this.errorNode)),this.errorNode.set("text",t)},clearError:function(){this.errorNode&&(this.errorNode.remove(!0),this.errorNode=null)},destroy:function(){new e.EventHandle(this._eventHandles).detach(),this._editor.destroy()}},e.namespace("SM.FormFields").TextEditorFormField=w,e.extend(D,e.SM.Fields.Textbox,{bind:function(){this.field.on(["valuechange","blur"],(function(e){this.form.get("model").set(this.fieldCfg.name,e.target.get("value"),{src:"ff",originEvent:e})}),this)}}),e.namespace("SM.FormFields").TextFormField=D,A.prototype={render:function(t){var i,s,n,o=this.fieldCfg;this.container=t,this.field=i=e.Node.create(e.SM.Templates.textarea(o)),this.description=n=e.Node.create(e.SM.Templates.fieldDescription(o)),this.label=s=e.Node.create(e.SM.Templates.label(o)),t.addClass("sm-form-field-overhead"),t.append(s),t.appendChild('<div class="sm-form-field-container">').append(i),t.append(n)},setDescription:function(e){this.description.setHTML(e)},bind:function(){this.field.on("valuechange",(function(e){this.form.get("model").set(this.fieldCfg.name,e.target.get("value"),{src:"ff",originEvent:e})}),this)},enable:function(){this.field.removeAttribute("disabled")},disable:function(){this.field.setAttribute("disabled","disabled")},setValue:function(e){this.field.set("value",e)},setError:function(t){this.errorNode||(this.errorNode=e.Node.create('<div class="sm-form-field-error-msg"></div>'),this.container.appendChild(this.errorNode),this.field.addClass("sm-form-field-error")),this.errorNode.set("text",t)},clearError:function(){this.errorNode&&(this.errorNode.remove(!0),this.errorNode=null,this.field.removeClass("sm-form-field-error"))},destroy:function(){this.field.destroy()}},e.namespace("SM.FormFields").TextareaFormField=A,H.prototype={render:function(t){var i,s,n,o=this.fieldCfg;this.container=t,t.addClass("sm-form-field-toggle"),t.addClass("sm-form-field-underline"),this.label=i=e.Node.create(e.SM.Templates.label(o)),this.description=s=e.Node.create(e.SM.Templates.fieldDescription(o)),t.append(i),this.buttonGroup=n=new e.ButtonGroup({srcNode:e.Node.create(e.SM.Templates.toggle(o))}),n.render(t.appendChild('<div class="sm-form-field-container">')),t.append(s),o.description&&this.showDescription()},setValue:function(e){var t=!0===e||"on"===e,i=this.buttonGroup.getButtons();i.removeClass("yui3-button-selected"),t?i.filter(".sm-form-field-toggle-item-on").addClass("yui3-button-selected"):i.filter(".sm-form-field-toggle-item-off").addClass("yui3-button-selected")},setDescription:function(e){this.description.setHTML(e)},showDescription:function(){this.container.setAttribute("data-show-description",!0)},hideDescription:function(){this.container.setAttribute("data-show-description",!1)},bind:function(){this.eventHandle=this.buttonGroup.on("selectionChange",(function(e){var t="on"===e.target.getSelectedButtons()[0].get("value");this.form.get("model").set(this.fieldCfg.name,t,{src:"ff",originEvent:e})}),this)},disable:function(){this.buttonGroup.getButtons().setAttribute("disabled","disabled")},enable:function(){this.buttonGroup.getButtons().removeAttribute("disabled")},destroy:function(){this.eventHandle.detach()},renderErrorAfterContainer:!0},e.mix(H.prototype,e.SM.Fields.FieldError),e.namespace("SM.FormFields").ToggleFormField=H;var O=SM.import("lodash"),L=SM.import("sm-uploader-queue"),U=SM.import("rsvp"),V=(h=SM.import("react"),m=SM.import("react-dom"),SM.import("sm-uploader-get-upload-limits-helper"));function B(e,t){this.form=e,this.fieldCfg=t,this.albumId=t.albumId,this.uploadLimits=V.getUserUploadLimits({defaultImageTypesOnly:!0})}B.prototype={destroy:function(){m.unmountComponentAtNode(this._container.getDOMNode())},render:function(e){this._container=e,this._onClearImage=this._onClearImage.bind(this),this._onImageExtracted=this._onImageExtracted.bind(this),this._onImageExtracted=this._onImageExtracted.bind(this),this._onInvalidFiles=this._onInvalidFiles.bind(this),this._onSelectImageChange=this._onSelectImageChange.bind(this),this._renderUnderlinePicker=this._renderUnderlinePicker.bind(this),this._renderFilePicker()},setError:function(e){this._errorMessage=e,this._renderFilePicker()},setValue:function(e){try{e=JSON.parse(e)}catch(e){return}this.albumId=e.albumId,this._setThumbnailImage(e)},upload:function(){return this.pendingUpload?this._uploadHTML():O.isEmpty(this._uploadedImageData)?null:this._uploadedImageData},_renderFilePicker:function(){m.render(h.createElement(i.default,{errorMessage:this._errorMessage,imageUrl:this._thumbnailUrl,name:this.fieldCfg.name,onFilesCleared:this._onClearImage,onFilesSelected:this._onSelectImageChange,onImageExtracted:this._onImageExtracted,onInvalidFiles:this._onInvalidFiles,render:this._renderUnderlinePicker}),this._container.getDOMNode())},_renderUnderlinePicker:function(e){return h.createElement(s.default,babelHelpers.extends({label:this.fieldCfg.label},e))},_onInvalidFiles:function(e){this.setError(e.reason)},_onClearImage:function(e){this.form.get("model").set(this.fieldCfg.name,null,{src:"ff",originEvent:e}),this.pendingUpload=!1,this._uploadedImageData={},this.setError(null),this._setThumbnailImage(null)},_onSelectImageChange:function(e,t){this.form.get("model").set(this.fieldCfg.name,e,{src:"ff",originEvent:t}),this.pendingUpload=!0,this.setError(null),this._renderFilePicker()},_onImageExtracted:function(e){this._thumbnailUrl=e,this._renderFilePicker()},_setThumbnailImage:function(t){if(t&&t.imageId&&t.imageKey){var i=new e.SM.Models.Image;i.load({data:{ImageID:t.imageId,ImageKey:t.imageKey}}),i.on("load",function(){var e=i.fakeImageSizeDetails().ImageSizeThumb.Url;this._thumbnailUrl=e,this._renderFilePicker()}.bind(this))}else this._thumbnailUrl=null,this._renderFilePicker()},_uploadHTML:function(){let e=this.albumId,t=this.form.get("model"),i=this.fieldCfg.name,s=this,n=this.uploadLimits;return new U.Promise((function(o,r){let l=new L({albumId:e,checkDuplicates:!1,uploadLimits:n});l.add(t.get(i)[0]),l.on(L.EVENT_UPLOAD_COMPLETE,(function(e){let t=e.upload.imageData,i={imageId:t.id,imageKey:t.Key,name:s.fieldCfg.name};s.pendingUpload=!1,s._uploadedImageData=i,o(i)})),l.on(L.EVENT_UPLOAD_ERROR,(function(e){e.upload&&(s._uploadedImageData={},s.setError(e.upload.message),r(e.upload.message))})),l.run()}))}},e.namespace("SM.FormFields").SinglefilepickerFormField=B;L=SM.import("sm-uploader-queue");function K(e,t){this.form=e,this.fieldCfg=t,this.albumId=t.albumId,this.systemAlbumType=t.systemAlbumType,this.uploadLimits=V.getUserUploadLimits({defaultImageTypesOnly:!0})}K.prototype={destroy:function(){m.unmountComponentAtNode(this._container.getDOMNode()),new e.EventHandle(this.eventHandles).detach(),this._pickerNode.unplug(e.SM.Plugin.Picker)},render:function(t){let i=this.fieldCfg,s=e.one("#sm-picker-container"),o={pickerMode:e.SM.Picker.MODE_IMAGE,triggerMode:!0};o.pickerConfig=i.pickerConfig,this._container=t,s||(s=e.one(n.default.doc.body).appendChild('<div id="sm-picker-container"></div>')),this._pickerNode=s.appendChild('<div id="'+e.guid()+'"></div>'),this._pickerNode.pickerplugin||this._pickerNode.plug(e.SM.Plugin.Picker,o),this._onChooseClick=this._onChooseClick.bind(this),this._onClearImage=this._onClearImage.bind(this),this._onImageExtracted=this._onImageExtracted.bind(this),this._onInvalidFiles=this._onInvalidFiles.bind(this),this._onSelectImageChange=this._onSelectImageChange.bind(this),this._renderUnderlinePicker=this._renderUnderlinePicker.bind(this),this._renderFilePicker()},_renderFilePicker(){m.render(h.createElement(i.default,{errorMessage:this._errorMessage,imageUrl:this._thumbnailUrl,name:this.fieldCfg.name,onChooseFromSMClick:this._onChooseClick,onFilesCleared:this._onClearImage,onFilesSelected:this._onSelectImageChange,onImageExtracted:this._onImageExtracted,onInvalidFiles:this._onInvalidFiles,useActionPanel:!0,render:this._renderUnderlinePicker}),this._container.getDOMNode())},_renderUnderlinePicker:function(e){return h.createElement(s.default,babelHelpers.extends({label:this.fieldCfg.label},e))},bind:function(){this.eventHandles=[this._pickerNode.pickerplugin.after("hidingPicker",(function(e){"sm-picker:pickerCancel"!==e.pickType&&this._onPickerImageChange(e)}),this)]},setValue:function(e){let t="string"==typeof e?this._handlePickerData(e):e;this._setThumbnailImage(t)},setError:function(e){this._errorMessage=e,this._renderFilePicker()},clear:function(){this.setError(null),this._setThumbnailImage(null),this.pendingUpload=!1,this._uploadedImageData={}},_onInvalidFiles:function(e){this.setError(e.reason)},_setThumbnailImage:function(t){if(t&&t.imageId&&t.imageKey){var i=new e.SM.Models.Image;i.load({data:{ImageID:t.imageId,ImageKey:t.imageKey}}),i.on("load",function(){var e=i.fakeImageSizeDetails().ImageSizeThumb?i.fakeImageSizeDetails().ImageSizeThumb.Url:i.fakeImageSizeDetails().ImageSizeTiny.Url;this._thumbnailUrl=e,this._renderFilePicker()}.bind(this))}else this._thumbnailUrl=null,this._renderFilePicker()},_onImageExtracted:function(e){this._thumbnailUrl=e,this._renderFilePicker()},_handlePickerData:function(e){this._pickerNode.pickerplugin.changePreselected(e,{silent:!0});let t={};if(e){let i=e.split("-");t.imageId=i[0],t.imageKey=i[1]}return t},_onClearImage:function(e){var t=this.form.get("model");t.set(this.fieldCfg.uploadFieldName,null,{src:"ff",originEvent:e}),t.set(this.fieldCfg.name,"",{src:"ff",originEvent:e}),this._pickerNode.pickerplugin.changePreselected(null,{silent:!0}),this.pendingUpload=!1,this._uploadedImageData={},this.setError(null),this._setThumbnailImage(null)},_onPickerImageChange:function(e){var t=e.selectedData[0].typeInfo,i=this.form.get("model"),s=t.ImageID+"-"+t.ImageKey;i.set(this.fieldCfg.name,s,{src:"ff",originEvent:e}),i.set(this.fieldCfg.uploadFieldName,null,{src:"ff",originEvent:e}),this._pickerNode.pickerplugin.changePreselected(s,{silent:!0});var n={imageId:t.ImageID,imageKey:t.ImageKey};this.pendingUpload=!1,this._uploadedImageData={},this._setThumbnailImage(n)},_onSelectImageChange:function(e,t){var i=this.form.get("model");i.set(this.fieldCfg.uploadFieldName,e,{src:"ff",originEvent:t}),i.set(this.fieldCfg.name,"",{src:"ff",originEvent:t}),this.pendingUpload=!0,this.setError(null)},_onChooseClick:function(){this._pickerNode.pickerplugin.showPicker()},upload:function(){if(!this.pendingUpload){let e=O.isEmpty(this._uploadedImageData)?null:this._uploadedImageData;return U.Promise.resolve(e)}var e=this.form.get("model"),t=this.albumId||e.get("AssetsAlbumID"),i=e.get("SystemAlbumType"),s=this.fieldCfg.uploadFieldName,n=this;let o=this.uploadLimits;return new U.Promise((function(r,l){var a=new L({albumId:t,systemAlbumType:i,checkDuplicates:!1,uploadLimits:o});a.add(e.get(s)[0]),a.on(L.EVENT_UPLOAD_COMPLETE,(function(e){var t=e.upload.imageData,i={imageId:t.id,imageKey:t.Key,name:s};n.pendingUpload=!1,n._uploadedImageData=i,r(i)})),a.on(L.EVENT_UPLOAD_ERROR,(function(e){n._uploadedImageData={},n.setError(e.upload.message),l(e.upload.message)})),a.run()}))}},e.namespace("SM.FormFields").UploadpickerFormField=K}(),SM.currentModule=null}),"",{requires:["sm","button-group","event-custom-base","event-valuechange","gallery-sm-editor","json-parse","json-stringify","oop","react","tabview","lodash","promise","rsvp","sm-codemirror-plugin","template-micro","sm-dom","sm-editor-toolbar","sm-picker-plugin","sm-slider","sm-templates-button","sm-templates-form","sm-dropdown-view","sm-colorpicker","sm-panel","sm-fields","sm-album-model","sm-image-model","sm-models-usernode","sm-page","sm-uploader-queue","sm-component-image","sm-component-button","sm-component-icon","sm-fonts-dropdown","sm-form-field-file-picker-behavior","sm-form-field-font-dropdown-field","sm-form-field-underline-file-picker","sm-uploader-get-upload-limits-helper"]});
YUI.add("sm-form-picker-action-panel",(function(e){SM.currentModule="sm-form-picker-action-panel";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(o("react")),t=babelHelpers.interopRequireDefault(o("prop-types")),l=babelHelpers.interopRequireDefault(o("sm-action-panel")),a=babelHelpers.interopRequireDefault(o("sm-component-button"));const n=o=>{let{onCloseClick:t,onUploadClick:n,onChooseFromSMClick:r}=o;return e.default.createElement(l.default,{onClose:t,title:"Select Photo",className:"sm-picker-action-panel"},e.default.createElement(a.default,{onClick:n,className:"sm-picker-action-panel-upload-button"},"Upload New Photo"),e.default.createElement(a.default,{onClick:r,className:"sm-picker-action-panel-choose-button"},"Choose from Smugmug"))};n.displayName="PickerActionPanel",n.propTypes={onChooseFromSMClick:t.default.func.isRequired,onCloseClick:t.default.func.isRequired,onUploadClick:t.default.func.isRequired};var r=n;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-dom","sm-component-button","sm-action-panel","create-class"]});
YUI.add("sm-form",(function(e){SM.currentModule="sm-form";var t,i,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;t=e.Object.isEmpty,i=e.Base.create("sm-form",e.View,[],{initializer:function(t){var i=this,r=[],n={},s=e.merge(t.values),a=this.get("model"),o=this.get("container");this._fields={},this._fieldOrder=[],this._fieldContainers={},this._fieldTabs={},this._tabNotices={},e.Object.each(t.values&&t.values.Config,(function(e,t){s["Config."+t]=e})),e.Array.each(t.fields,(function(t){void 0===(t=e.clone(t)).name&&(t.name=e.guid()),null!=s[t.name]&&(t.value=s[t.name]),r.push(t),"tabs"===t.type&&e.Array.each(t.tabs,(function(t){t.subFields=[],e.Array.each(t.fields||t.contents,(function(n){void 0===n.name&&(n.name=e.guid()),null!=s[n.name]&&(n.value=s[n.name]),t.subFields.push(n.name),r.push(n),t.label&&(i._fieldTabs[n.name]=t.label,i._tabNotices[t.label]={})}))}))})),e.Array.each(r,(function(t){this._fieldOrder.push(t.name);var i=this._getFormFieldClass(t.type);if(!i)throw new Error("no FormField class found for type "+t.type);this._fields[t.name]=new i(this,t),this._fieldContainers[t.name]=e.Node.create("<div>").appendTo(o),(t.hidden||void 0!==t.visible&&!t.visible)&&this._fieldContainers[t.name].hide(),e.namespace.call(n,t.name),e.Object.setValue(n,t.name.split("."),t.value)}),this),e.Object.each(n,(function(e,t){a.addAttr(t,{value:e})})),a.after("change",this._afterModelAttrChange,this)},destructor:function(){e.Object.each(this._fields,(function(e){e.destroy&&e.destroy()})),this.get("model").detach("change")},getField:function(e){return this._fields[e]},render:function(){var t=this,i=t.get("container");return e.Array.each(t._fieldOrder,(function(e){var r=t._fieldContainers[e],n=t._fields[e];n.render(r),n.bind&&n.bind(),i.addClass("sm-form-contents")})),this},reset:function(e){this.get("model").reset(e)},showItem:function(e){return this._fieldContainers[e].show(),this},hideItem:function(e){return this._fieldContainers[e].hide(),this},showItems:function(e){for(var t=0;t<e.length;t++)this.showItem(e[t])},hideItems:function(e){for(var t=0;t<e.length;t++)this.hideItem(e[t])},toggleItems:function(e){var t;for(t in e)e.hasOwnProperty(t)&&(e[t]?this.showItem(t):this.hideItem(t))},setErrors:function(e,t){this.setNotices(e,"error",t)},setWarnings:function(e,t){this.setNotices(e,"warning",t)},setNotices:function(t,i,r){var n=this.getField("tabs"),s=this._fields,a=this._tabNotices,o="error"===i?"setError":"warning"===i&&"setWarning";r||(this.clearNotices(i),n&&n.clearTabNotices(i)),e.Array.each(t,(function(e){var t,r,c=e.Field;s[c]||(c="Config."+c),s[c]&&(s[c].setNotice?s[c].setNotice(e.Message,i):s[c][o]&&s[c][o](e.Message),n&&(t=this._fieldTabs[c])&&(r=a[t][c]||(a[t][c]={}),n.setTabNotice(t,i),r[i]=!0))}),this)},clearWarning:function(e){this.clearNotice(e,"warning")},clearError:function(e){this.clearNotice(e,"error")},clearNotice:function(e,i){var r,n,s=this._fieldTabs[e],a=s&&this._tabNotices[s],o=a&&a[e],c="error"===i?"clearError":"warning"===i&&"clearWarning";if(this._fields[e].clearNotice?this._fields[e].clearNotice(i):this._fields[e][c]&&this._fields[e][c](),o){for(r in delete o[i],t(o)&&delete a[e],a)if(a.hasOwnProperty(r)&&a[r][i]){n=!0;break}n||this.getField("tabs").clearTabNotice(s,i)}},clearErrors:function(e){this.clearNotices("error",e)},clearAllErrors:function(){this.clearErrors()},clearWarnings:function(e){this.clearNotices("warning",e)},clearNotices:function(t,i){e.Array.each(i||e.Object.keys(this._fields),(function(e){this.clearNotice(e,t)}),this)},_afterModelAttrChange:function(t){if("ff"!==t.src){var i=this;e.Object.each(t.changed,(function(t,r){var n={};n[r]=t.newVal,e.Array.each(function t(i){var r,n=[],s=e.Array(arguments[1]||[]);if("object"!==e.Lang.type(i))return i;for(var a in i)i.hasOwnProperty(a)&&(s.push(a),r=i[a],"object"===e.Lang.type(r)?n=n.concat(t(r,s)):n.push([s.join("."),r]),s.pop());return n}(n),(function(e){var t=e[0],r=e[1];i._fields[t]&&i._fields[t].setValue(r)}))}))}},_getFormFieldClass:function(t){return i.FORM_FIELDS[t]?i.FORM_FIELDS[t]:e.SM.FormFields[t.charAt(0).toUpperCase()+t.slice(1)+"FormField"]}},{registerFormField:function(e,t){i.FORM_FIELDS[e]=t},FORM_FIELDS:{},ATTRS:{model:{readOnly:!0,valueFn:function(){var t=new e.Model;return t.toJSON=function(){var t=e.merge(e.Model.prototype.toJSON.call(this));return delete t.id,t},t}}}}),e.namespace("SM").Form=module.exports=i,SM.currentModule=null}),"",{requires:["model","node","view","sm-form-fields"]});
YUI.add("sm-fullscreen-action-types",(function(e){SM.currentModule="sm-fullscreen-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SYNC_FULLSCREEN=exports.SET_FULLSCREEN=void 0;exports.SET_FULLSCREEN="SET_FULLSCREEN";exports.SYNC_FULLSCREEN="SYNC_FULLSCREEN"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-fullscreen-actions",(function(e){SM.currentModule="sm-fullscreen-actions";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.syncFullscreen=exports.setFullscreen=void 0;var e=n("sm-fullscreen-action-types"),s=n("sm-analytics-constants");const l=(e,n)=>({_internal:{analytics:{category:s.CATEGORY.FULLSCREEN,action:s.ACTION.MODE_CHANGE,label:n,value:e?1:-1}}});exports.setFullscreen=(n,t=s.TRIGGER_BUTTON)=>({type:e.SET_FULLSCREEN,value:n,...l(n,t)});exports.syncFullscreen=n=>({type:e.SYNC_FULLSCREEN,value:n,...l(n,s.TRIGGER_KEYPRESS)})}(),SM.currentModule=null}),"",{requires:["sm-fullscreen-action-types","sm-analytics-constants"]});
YUI.add("sm-fullscreen-button-container-hoc",(function(e){SM.currentModule="sm-fullscreen-button-container-hoc";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),l=r("sm-fullscreen-selectors"),s=r("sm-fullscreen-actions");var u=(0,e.connect)(e=>({isFullscreen:(0,l.isFullscreen)(e)}),e=>({_setFullscreen:r=>{e((0,s.setFullscreen)(r))}}),(e,r,l)=>({...e,...l,onClick:()=>{r._setFullscreen(!e.isFullscreen)}}));exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-fullscreen-selectors","sm-fullscreen-actions"]});
YUI.add("sm-fullscreen-button-container",(function(e){SM.currentModule="sm-fullscreen-button-container";var exports={},u=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(u("sm-fullscreen-button-container-hoc")),t=babelHelpers.interopRequireDefault(u("sm-fullscreen-button")),r=(0,e.default)(t.default);exports.default=r}(),SM.currentModule=null}),"",{requires:["sm-fullscreen-button-container-hoc","sm-fullscreen-button"]});
YUI.add("sm-fullscreen-button",(function(e){SM.currentModule="sm-fullscreen-button";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),t=babelHelpers.interopRequireDefault(l("prop-types")),r=babelHelpers.interopRequireDefault(l("sm-component-button")),u=babelHelpers.interopRequireDefault(l("sm-icon"));const n=(0,babelHelpers.interopRequireDefault(l("sm-tooltip-hoc")).default)(r.default),o=l=>{let{className:t,isFullscreen:r,onClick:o,tooltipAlignment:s,...a}=l;return e.default.createElement(n,babelHelpers.extends({className:t,tooltipLabel:r?"Exit Fullscreen":"Fullscreen",tooltipAlignment:s,onClick:o},a),e.default.createElement(u.default,{name:r?"FullScreenExit":"FullScreen"}))};o.displayName="FullscreenButton",o.propTypes={isFullscreen:t.default.bool,onClick:t.default.func.isRequired},o.defaultProps={isFullscreen:!1};var s=o;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-tooltip-hoc"]});
YUI.add("sm-fullscreen-middleware",(function(e){SM.currentModule="sm-fullscreen-middleware";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(l("sm-dom")),s=l("sm-fullscreen-actions"),r=l("sm-fullscreen-selectors"),n=l("sm-fullscreen-action-types");const c=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];exports.default=({dispatch:l,getState:u})=>{let t=()=>{(0,r.isFullscreen)(u())!==!!(0,e.isFullscreen)()&&l((0,s.syncFullscreen)(!!(0,e.isFullscreen)()))};return c.forEach(l=>{e.default.doc.addEventListener(l,t)}),l=>s=>{let c=l(s);if(s.type===n.SET_FULLSCREEN||s.type===n.SYNC_FULLSCREEN){let l=u(),s=!!(0,e.isFullscreen)(),n=(0,r.isFullscreen)(l);s!==n&&(n?(0,e.enterFullscreen)():(0,e.exitFullscreen)())}return c}}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-fullscreen-actions","sm-fullscreen-selectors","sm-fullscreen-action-types"]});
YUI.add("sm-fullscreen-reducers",(function(e){SM.currentModule="sm-fullscreen-reducers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("sm-fullscreen-action-types");exports.default=(r={},u={})=>{switch(u.type){case e.SET_FULLSCREEN:case e.SYNC_FULLSCREEN:return{...r,isFullscreen:u.value};default:return r}}}(),SM.currentModule=null}),"",{requires:["sm-fullscreen-action-types"]});
YUI.add("sm-fullscreen-selectors",(function(e){SM.currentModule="sm-fullscreen-selectors";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFullscreen=void 0;exports.isFullscreen=e=>!(!e.page||!e.page.isFullscreen)}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-gallery-constants",(function(L){SM.currentModule="sm-gallery-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GALLERY_STYLE_ICON_LOOKUP=exports.GALLERY_STYLE_TEMPLATE_ID_LOOKUP=exports.GALLERY_STYLE_LOOKUP=exports.GALLERY_STYLES=exports.GALLERY_STYLE_THUMBNAILS=exports.GALLERY_STYLE_SMUGMUG=exports.GALLERY_STYLE_SLIDESHOW=exports.GALLERY_STYLE_JOURNAL=exports.GALLERY_STYLE_COLLAGE_PORTRAIT=exports.GALLERY_STYLE_COLLAGE_LANDSCAPE=void 0;exports.GALLERY_STYLE_COLLAGE_LANDSCAPE="Collage Landscape";exports.GALLERY_STYLE_COLLAGE_PORTRAIT="Collage Portrait";exports.GALLERY_STYLE_JOURNAL="Journal";exports.GALLERY_STYLE_SLIDESHOW="Slideshow";exports.GALLERY_STYLE_SMUGMUG="SmugMug";exports.GALLERY_STYLE_THUMBNAILS="Thumbnails";const L=["SmugMug","Thumbnails","Collage Landscape","Collage Portrait","Journal","Slideshow"];exports.GALLERY_STYLES=L;const e={"/api/v2/template/3":"SmugMug","/api/v2/template/8":"Slideshow","/api/v2/template/16":"Journal","/api/v2/template/17":"Thumbnails","/api/v2/template/18":"Collage Landscape","/api/v2/template/19":"Collage Portrait"};exports.GALLERY_STYLE_LOOKUP=e;const l={"Collage Landscape":18,"Collage Portrait":19,Journal:16,Slideshow:8,SmugMug:3,Thumbnails:17};exports.GALLERY_STYLE_TEMPLATE_ID_LOOKUP=l;const a={"Collage Landscape":"StyleCollageLandscape","Collage Portrait":"StyleCollagePortrait",Journal:"StyleJournal",Slideshow:"Slideshow2",SmugMug:"StyleThumbsImage",Thumbnails:"StyleThumbs"};exports.GALLERY_STYLE_ICON_LOOKUP=a}(),SM.currentModule=null}),"",{});
YUI.add("sm-gallery-download-base",(function(e){SM.currentModule="sm-gallery-download-base";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("prop-types")),a=babelHelpers.interopRequireDefault(l("react")),r=babelHelpers.interopRequireDefault(l("sm-component-pure-render")),o=babelHelpers.interopRequireDefault(l("sm-gallery-download-image")),t=babelHelpers.interopRequireDefault(l("sm-gallery-download-gallery"));class d extends r.default{render(){let{imageUrl:e,albumKey:l,className:r}=this.props;return l&&e?a.default.createElement(o.default,this.props):l?a.default.createElement(t.default,this.props):a.default.createElement("div",{className:r},a.default.createElement("h3",null,"We're so embarrassed!"),a.default.createElement("p",null,"Something has gone wrong, please return to the previous page and try again."))}}exports.default=d,d.propTypes={albumKey:e.default.string.isRequired,downloadPassword:e.default.bool.isRequired,downloadPollingDelay:e.default.number,imageUrl:e.default.string,isOwner:e.default.bool.isRequired,isLoggedInUser:e.default.bool.isRequired,isUnlocked:e.default.bool.isRequired,unlockStateCallback:e.default.func,onClose:e.default.func},d.defaultProps={downloadPollingDelay:2500,downloadPassword:!0}}(),SM.currentModule=null}),"",{requires:["sm","react","sm-component-pure-render","sm-gallery-download-gallery","sm-gallery-download-image","sm-component-panel","sm-resource-album","sm-gallery-download-constants"]});
YUI.add("sm-gallery-download-constants",(function(E){SM.currentModule="sm-gallery-download-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GENERIC_EMAIL_ERROR=exports.PASSWORD_ERROR=exports.VIEW_SUCCESS=exports.VIEW_NOTAVAILABLE=exports.VIEW_LOADING=exports.VIEW_GENERATING=exports.VIEW_FORM=exports.VIEW_ERROR=exports.VIEW_EMAIL_VERIFIED=exports.VIEW_EMAIL_SENT=exports.VIEW_DOWNLOAD=exports.ANALYTICS_CATEGORY=void 0;exports.ANALYTICS_CATEGORY="Bulk Download";exports.VIEW_DOWNLOAD="Download Ready";exports.VIEW_EMAIL_SENT="Email Sent";exports.VIEW_EMAIL_VERIFIED="Address Confirmed";exports.VIEW_ERROR="Error";exports.VIEW_FORM="Email and Password Verification";exports.VIEW_GENERATING="Download Being Created";exports.VIEW_LOADING="Loading";exports.VIEW_NOTAVAILABLE="Not Available";exports.VIEW_SUCCESS="Success";exports.PASSWORD_ERROR="That password doesn't match what the owner told us.";exports.GENERIC_EMAIL_ERROR="Invalid email, please try again."}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-gallery-download-gallery",(function(e){SM.currentModule="sm-gallery-download-gallery";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-component-adaptiveformfield")),s=babelHelpers.interopRequireDefault(t("sm-component-busy")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),i=babelHelpers.interopRequireDefault(t("sm-icon")),o=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),n=babelHelpers.interopRequireDefault(t("sm-resource-album")),d=babelHelpers.interopRequireDefault(t("sm-component-textbox")),u=babelHelpers.interopRequireDefault(t("sm-component-panel")),m=t("sm-gallery-download-constants"),c=t("sm-gallery-download-helpers");const p=[m.VIEW_FORM,m.VIEW_SUCCESS];class f extends o.default{constructor(e){super(e),this.state={step:p[0],email:"",password:""},this._updatePassword=this._updatePassword.bind(this),this._updateEmail=this._updateEmail.bind(this),this._validateEmail=this._validateEmail.bind(this),this._onFormSubmit=this._onFormSubmit.bind(this),this._sendEmail=this._sendEmail.bind(this),this.trackEvent=c.trackEvent.bind(this)}UNSAFE_componentWillUpdate(e,t){t.step!==this.state.step&&this.trackEvent("Screen View",t.step,{})}render(){let e,t,{step:l}=this.state;switch(l){case m.VIEW_FORM:e=a.default.createElement("h1",null,"These Photos are protected by their owner"),t=this._renderPasswordEmailField();break;case m.VIEW_SUCCESS:t=this._renderSuccess()}let{onClose:s,className:r="",role:i,tabIndex:o}=this.props;return a.default.createElement(u.default,{className:"".concat(r," sm-gallerydownload-panel"),role:i,tabIndex:o},a.default.createElement(u.default.Header,null,e,s?a.default.createElement(u.default.CloseButton,{onClick:s}):null),a.default.createElement(u.default.Body,null,t))}_renderPasswordEmailField(){let{loading:e,password:t,email:i,passError:o,emailError:n}=this.state,u="We’ll send an email to let you know when your download is ready, so make sure you enter an address that works.";this.props.downloadPassword||this.props.isUnlocked||(u+=" We’ll send a quick verification so you can double-check.");let m=!(t&&i)||e;return a.default.createElement("div",{className:"sm-flex sm-flex-column sm-flex-items-stretch"},this.props.downloadPassword&&a.default.createElement("p",null,"Enter the correct password and a valid email address to begin your download."),a.default.createElement("p",null,u),a.default.createElement("form",{className:"sm-form-modern"},a.default.createElement(l.default,{label:"Password",error:o},a.default.createElement(d.default,{type:"password",onChange:this._updatePassword,value:t})),a.default.createElement(l.default,{label:"Email",error:n},a.default.createElement(d.default,{type:"email",onChange:this._updateEmail,onBlur:this._validateEmail,value:i}))),a.default.createElement(r.default,{skin:"submit",disabled:m,onClick:this._onFormSubmit},e?a.default.createElement(s.default,null):"SUBMIT"),a.default.createElement("span",{className:"sm-text-mini"},"We will email you a zip file containing the images."))}_renderSuccess(){let{email:e}=this.state,{onClose:t}=this.props;return a.default.createElement("div",{className:"sm-flex sm-flex-column sm-flex-items-center"},a.default.createElement(i.default,{className:"sm-gallerydownload-icon",name:"CheckmarkEncircled2",size:i.default.SIZE_SMALL}),a.default.createElement("p",null,"We will send an email to ",a.default.createElement("span",{className:"sm-accent"},e)," when complete with the link to download the the zip file."),a.default.createElement(r.default,{skin:"default",onClick:t},"Return to Gallery"))}_onFormSubmit(){let{password:e}=this.state,{albumKey:t}=this.props,a={data:{Password:e||void 0}};this.setState({loading:!0}),n.default.unlockdownloadByKey(t,a).then(()=>{this._sendEmail(),this.trackEvent("Verify Password",null,{}),this.props.unlockStateCallback&&this.props.unlockStateCallback(!0)},()=>{e?this.trackEvent("Verification Error","Incorrect Password",{}):this.trackEvent("Verification Error","Missing Password",{}),this.setState({loading:!1,passError:m.PASSWORD_ERROR})})}_sendEmail(){let{email:e}=this.state,{albumKey:t}=this.props,a={data:{Email:e}};n.default.downloadByKey(t,a).then(()=>{this.trackEvent("Verify Email",null,{}),this.setState({loading:!1,step:m.VIEW_SUCCESS})},()=>{e?this.trackEvent("Verification Error","Missing Email",{}):this.trackEvent("Verification Error","Invalid Email",{}),this.setState({loading:!1,emailError:m.GENERIC_EMAIL_ERROR})})}_updatePassword(e){this.setState({password:e.target.value})}_updateEmail(e){this.setState({email:e.target.value})}_validateEmail(e){e.target.validity.valid?this.setState({emailError:""}):this.setState({emailError:m.GENERIC_EMAIL_ERROR})}}f.propTypes={albumKey:e.default.string.isRequired,downloadPassword:e.default.bool.isRequired,isOwner:e.default.bool.isRequired,isLoggedInUser:e.default.bool.isRequired,isUnlocked:e.default.bool.isRequired,unlockStateCallback:e.default.func,onClose:e.default.func},f.propTypes={unlockStateCallback:()=>{}};var E=f;exports.default=E}(),SM.currentModule=null}),"",{requires:["sm","react","sm-api-redux-selectors","sm-component-pure-render","sm-component-textbox","sm-component-adaptiveformfield","sm-resource-album","sm-icon","sm-component-panel","sm-component-busy","sm-gallery-download-helpers"]});
YUI.add("sm-gallery-download-helpers",(function(e){SM.currentModule="sm-gallery-download-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackEvent=function(l,s,o){let t={...o,isOwner:this.props.isOwner,label:s};e.createEvent(r,l,t).log()};const e=SM.import("sm-analytics-tracker"),{ANALYTICS_CATEGORY:r}=SM.import("sm-gallery-download-constants")}(),SM.currentModule=null}),"",{requires:["sm","sm-gallery-download-constants","sm-resource-album","sm-analytics-tracker","sm-resource-album","sm-dom"]});
YUI.add("sm-gallery-download-image",(function(e){SM.currentModule="sm-gallery-download-image";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-component-adaptiveformfield")),s=babelHelpers.interopRequireDefault(t("sm-component-busy")),o=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-icon")),d=babelHelpers.interopRequireDefault(t("sm-component-panel")),i=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),u=babelHelpers.interopRequireDefault(t("sm-resource-album")),c=babelHelpers.interopRequireDefault(t("sm-component-textbox")),m=t("sm-gallery-download-constants"),p=t("sm-gallery-download-helpers");const f=[m.VIEW_FORM,m.VIEW_SUCCESS];class h extends i.default{constructor(e){super(e),this.state={step:e.downloadPassword?f[0]:f[1],password:"",error:"",loading:!1},this._updatePassword=this._updatePassword.bind(this),this._onPasswordSubmit=this._onPasswordSubmit.bind(this),this._handleDownload=this._handleDownload.bind(this),this.trackEvent=p.trackEvent.bind(this),e.downloadPassword||setTimeout(this._handleDownload,1e3)}UNSAFE_componentWillUpdate(e,t){this.state.step!==t.step&&t.step===m.VIEW_SUCCESS&&this._handleDownload()}render(){let e,t,{onClose:l,className:s="",role:o,tabIndex:r}=this.props;switch(this.state.step){case m.VIEW_FORM:e=a.default.createElement("h2",null,"These photos are protected by their owner"),t=this._renderPasswordField();break;case m.VIEW_SUCCESS:e=a.default.createElement("h2",null,"These photos are protected by their owner"),t=this._renderSuccess()}return a.default.createElement(d.default,{className:"".concat(s," sm-gallerydownload-panel"),role:o,tabIndex:r},a.default.createElement(d.default.Header,null,e,l?a.default.createElement(d.default.CloseButton,{onClick:l}):null),a.default.createElement(d.default.Body,null,t))}_renderPasswordField(){let{password:e,error:t,loading:r}=this.state;return a.default.createElement("div",{className:"sm-flex sm-flex-column sm-flex-items-stretch"},a.default.createElement("p",null,"Enter the correct password to begin your download."),a.default.createElement("form",{className:"sm-form-modern",onSubmit:this._onPasswordSubmit},a.default.createElement(l.default,{label:"Password",error:t},a.default.createElement(c.default,{type:"password",onChange:this._updatePassword,value:e}))),a.default.createElement(o.default,{skin:"submit",disabled:!e||r,onClick:this._onPasswordSubmit},r?a.default.createElement(s.default,null):"SUBMIT"))}_renderSuccess(){let{onClose:e}=this.props,t="The gallery is now unlocked. Your image is now being downloaded!";return r.default.isStandalone&&(t="The gallery is now unlocked. Press the download button again to open the image outside of the app to save."),a.default.createElement("div",{className:"sm-flex sm-flex-column sm-flex-items-center"},a.default.createElement(n.default,{className:"sm-gallerydownload-icon",name:"CheckmarkEncircled2",size:n.default.SIZE_SMALL}),a.default.createElement("p",{className:"sm-panel-message"},t),a.default.createElement(o.default,{skin:"default",onClick:e},"Return to Gallery"))}_updatePassword(e){this.setState({password:e.target.value})}_onPasswordSubmit(e){e.preventDefault();let{password:t}=this.state,{albumKey:a}=this.props,l={data:{Password:t||void 0}};this.setState({loading:!0}),u.default.unlockdownloadByKey(a,l).then(()=>{this.setState({loading:!1,step:m.VIEW_SUCCESS}),this.trackEvent("Verify Password",null,{}),this.props.unlockStateCallback&&this.props.unlockStateCallback(!0)},()=>{this.setState({loading:!1}),t?this.trackEvent("Verification Error","Incorrect Password",{}):this.trackEvent("Verification Error","Missing Password",{}),this.setState({error:m.PASSWORD_ERROR})})}_handleDownload(){let{imageUrl:e}=this.props;r.default.isStandalone||(r.default.doc.location=e)}}exports.default=h,h.propTypes={downloadPassword:e.default.bool.isRequired,imageUrl:e.default.string,isOwner:e.default.bool.isRequired,isLoggedInUser:e.default.bool.isRequired,isUnlocked:e.default.bool.isRequired,unlockStateCallback:e.default.func,onClose:e.default.func}}(),SM.currentModule=null}),"",{requires:["sm","react","sm-api-redux-selectors","sm-component-pure-render","sm-component-textbox","sm-component-adaptiveformfield","sm-resource-album","sm-icon","sm-component-busy","sm-gallery-download-helpers"]});
YUI.add("sm-gallery-download-panel-modal",(function(e){SM.currentModule="sm-gallery-download-panel-modal";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("prop-types")),r=babelHelpers.interopRequireWildcard(l("react")),a=babelHelpers.interopRequireDefault(l("sm-modal")),o=babelHelpers.interopRequireDefault(l("sm-gallery-download-base"));class t extends r.PureComponent{render(){return r.default.createElement(a.default,{onClose:this.props.onClose},r.default.createElement(o.default,this.props))}}exports.default=t,t.propTypes={...o.default.propTypes,onClose:e.default.func.isRequired}}(),SM.currentModule=null}),"",{requires:["sm","react","sm-modal","sm-gallery-download-base"]});
YUI.add("sm-galleryimage-model",(function(e){SM.currentModule="sm-galleryimage-model";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=babelHelpers.interopRequireDefault(l("sm-image-model"));const r=e.Base.create("sm-galleryimage-model",a.default,[],{tileOffsets:{value:null}},{});e.namespace("SM.Models").GalleryImage=r;var u=r;exports.default=u}(),SM.currentModule=null}),"",{requires:["base","model","sm-image-model"]});
YUI.add("sm-google-plus",(function(e){SM.currentModule="sm-google-plus";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var t,n,o,i,a=SM.import("lodash"),r=SM.import("sm-dom"),l=SM.import("rsvp"),s=r.win,d=SM.env.google.clientId,u=(a.template('<div class="g-plusone"<% if (typeof href !== "undefined") { %> data-href="<%- href %>" <% }; %><% if (typeof size !== "undefined") { %> data-size="<%- size %>" <% }; %><% if (typeof annotation !== "undefined") { %> data-annotation="<%- annotation %>" <% }; %><% if (typeof width !== "undefined") { %> data-width="<%- width %>" <% }; %><% if (typeof align !== "undefined") { %> data-align="<%- align %>" <% }; %><% if (typeof expandTo !== "undefined") { %> expandTo="<%- expandTo %>" <% }; %><% if (typeof callback !== "undefined") { %> data-callback="<%- callback %>" <% }; %><% if (typeof onstartinteraction !== "undefined") { %> data-onstartinteraction="<%- onstartinteraction %>" <% }; %><% if (typeof onendinteraction !== "undefined") { %> data-onendinteraction="<%- onendinteraction %>" <% }; %><% if (typeof recommendations !== "undefined") { %> data-recommendations="<%- recommendations %>" <% }; %>></div>'),a.template('<div class="g-<%- type %>"></div>')),c={layout:"portrait",showcoverphoto:!0,showtagline:!0,theme:"light",width:300},f={layout:"portrait",showphoto:!0,showowners:!1,showtagline:!0,theme:"light",width:300},p=e.namespace("SM").GooglePlus=module.exports={loadGooglePlusJavascript:function(e){if(e||(e={}),t=e.checkInitialAuth,!n){n=l.defer();var o=r.doc.createElement("script");o.async=!0,o.defer=!0,o.src="https://apis.google.com/js/api.js?onload=clientLoaded",r.doc.getElementsByTagName("head")[0].appendChild(o)}return n.promise},getProfile:function(e,t){return e||(e="me"),new l.Promise((function(n,o){new l.Promise((function(e,t){p.loadGooglePlusJavascript({checkInitialAuth:!0}).then((function(n){n.client?n.client.load("plus","v1",(function(){e(n.client.plus)})):t("Client object not created.")}))})).then((function(i){var a={userId:e};t&&(a.fields=t.join(",")),i.people.get(a).execute((function(e){e.error?o(e.error.message||"Error loading profile data."):n(e.result)}))}))}))},getProfileImageUrl:function(){return Promise.resolve("THIS IS DEPRECATED, UPDATE CALLING CODE")},renderBadge:function(e,t,n){return t||(t="person"),this.loadGooglePlusJavascript().then((function(o){var i=r.doc.createElement("div");i.innerHTML=u({type:t});var l="community"===t?f:c;return o[t].render(e.appendChild(i.childNodes[0]),a.assign(l,n)),e}))},renderSmugSigninButton:function(t,n){n||(n={});var o=this;return new l.Promise((function(i){o.loadGooglePlusJavascript().then((function(o){t.innerHTML=e.SM.Templates.button({className:n.className||"sm-gplus-login sm-button-square",label:n.label,icon:"GoogleColored",svg:!0,value:n.value||"gpluslogin",size:n.size||"large"});var a=t.firstChild;o.auth2.getAuthInstance().attachClickHandler(a,{},(function(e){var t=e.getBasicProfile();o.auth.setToken(e.getAuthResponse()),i({id:t.getId(),name:t.getName(),profileImageURL:t.getImageUrl()})}),(function(){}))}))}))},PLUSONE_BUTTON_OPTIONS:{ANNOTATION:{NONE:"none",BUBBLE:"bubble",INLINE:"inline"},ALIGN:{LEFT:"left",RIGHT:"right"},EXPANDTO:{TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},SIZE:{SMALL:"small",MEDIUM:"medium",STANDARD:"standard",TALL:"tall"}},BADGE_SIZES:{LANDSCAPE:{MIN_WIDTH:273,MAX_WIDTH:450},PORTRAIT:{MIN_WIDTH:180,MAX_WIDTH:450}}};function g(){o?(clearTimeout(i),n.resolve(s.gapi)):i=setTimeout(g,200)}function m(){var e=s.gapi;e.client.init({apiKey:SM.env.google.apiKey,clientId:d,scope:"profile"}).then((function(){e.auth2.getAuthInstance().isSignedIn.get()&&e.auth.setToken(e.auth2.getAuthInstance().currentUser.get().getAuthResponse()),o=!0}))}s.___gcfg={lang:"en-US",parsetags:"explicit"},s.clientLoaded=function(){s.gapi.load("client:auth2",()=>{t?(setTimeout(m,1),i=setTimeout(g,200)):n.resolve(s.gapi)})}}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-dom"]});
YUI.add("sm-guide-bootstrap",(function(e){SM.currentModule="sm-guide-bootstrap";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=SM.import("sm-api2"),i=SM.import("sm-page"),s=SM.import("sm-smuglog"),u={};let d;u.SM_GUIDE_MODULE_NAME="sm-guide";u.loadGuides=(t,r)=>new Promise((n,o)=>{e.getUser(i.user.nickName,{fields:[],expand:{UserGuideStates:{data:{OnlyAutorun:t?1:0,IncludeInvisible:r?1:0}},"UserGuideStates.Guide":!0,UserHideGuides:!0}}).then(e=>{var i={hide:!1,incompleteGuides:[],nextGuide:null,nextGuideStep:null,guides:[]};e.response.UserHideGuides&&(e.response.UserHideGuides.Hide&&(i.hide=!0),e.response.UserGuideStates&&e.response.UserGuideStates.length>0?SM.load(u.SM_GUIDE_MODULE_NAME).then(u=>{d=u,d.skipGuidesUri=e.response.UserHideGuides.Uri,e.response.UserGuideStates.forEach(e=>{var u=d.guides[e.Guide.GuideID];if(u){if(u.set("statusUri",e.Uri),u.set("isComplete",e.Complete),i.guides.push(e.Guide.GuideID),e.Autorun&&i.incompleteGuides.push(e.Guide.GuideID),e.Progress){var t=e.Progress-1;u&&u.validCheck(t)&&(i.nextGuide=u,i.nextGuideStep=t)}}else s.add("nux","Missing NUX guide: "+e.Guide.GuideID,s.LEVEL_WARNING)}),i.nextGuide||i.hide||i.incompleteGuides.forEach(e=>{var s=d.guides[e];s.validCheck()&&(i.nextGuide?s.get("priority")<i.nextGuide.get("priority")&&(i.nextGuide=s):i.nextGuide=s)}),n(i)}):n(i))},e=>{s.add("nux",{message:"Failed to retrieve user and/or guide expansions",error:e},s.LEVEL_ERROR),o(e)})}),u.runGuides=()=>new Promise((e,i)=>{u.loadGuides(!0,!0).then(i=>{i.nextGuide&&SM.load("sm-guide").then(e=>{d=e;let{runningGuide:s}=u;s&&s.end(),s=d.run(i.nextGuide,i.nextGuideStep)}),i.incompleteGuides.forEach(e=>{var s=d.guides[e];i.nextGuide&&s.name===i.nextGuide.name||s.passiveCompletionHandler()}),e()},e=>{i(e)})}),u.runningGuide=null;var t=u;exports.default=t}(),SM.currentModule=null}),"",{requires:["sm","sm-analytics","sm-api2","sm-page","sm-smuglog"]});
YUI.add("sm-guide-pageinit",(function(e){SM.currentModule="sm-guide-pageinit";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";const e=SM.import("sm-page"),r=SM.import("sm-resource-core"),i=SM.import("sm-guide-bootstrap"),o=SM.import("sm-smuglog");e.on("page:init",u=>{if(u.loadNuxGuides){var s=r.loadLocal("userProductNotifications");setTimeout(()=>{i.runGuides().then(()=>{e.after("page:modeChange",()=>{let{runningGuide:e}=i;e&&!e.getGuide().validCheck()&&(e.end(),e=null),i.runGuides()})}).catch(e=>{o.add("sm-guides",{error:e&&e.message||e,location:location.href,message:"Error running guides on page:init"},o.LEVEL_ERROR)})},s?700:0)}})}(),SM.currentModule=null}),"",{requires:["sm","sm-page","sm-resource-core","sm-guide-bootstrap","sm-smuglog"]});
YUI.add("sm-header-actions",(function(e){SM.currentModule="sm-header-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleUserMenu=function(){return e=>e(l(i.MENU_ID_USER_NAV_DROP_DOWN,"User Menu"))},exports.toggleMainNav=function(){return e=>e(l(i.MENU_ID_MAIN_NAV,"Dropdown Global Nav"))},exports.toggleHeaderMenu=l,exports.editNodeSettings=function(){return(e,t)=>{let n=t(),o=(0,a.getNode)(n),d=o&&o.id,u=o&&(0,a.getRealNodeType)(n),l="".concat(s.NODE_TYPE_LABEL_MAP[u]||null," Settings");return(0,r.trackMenuItemEvent)({label:l,property:i.TRACKING_PROPERTY_USER_MENU,nodeId:d,nodeType:u}),e((0,c.openNodeSettings)()),e((0,c.loadNodeSettingsData)())}},exports.fetchCartItemCount=function(){return t=>t((0,o.fetchFromAPI)({uri:"/api/v2/cart"})).catch(t=>{n.default.add("sm-header-actions",{method:"fetchCartItemCount",message:"Failed to fetch cart data",error:t,location:e.default.win.location.href,syncUri:"/api/v2/cart"},n.default.LEVEL_ERROR)})};var e=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-smuglog")),o=t("sm-api-redux-actions"),r=t("sm-header-tracking-helpers"),s=t("sm-page-nodepage-constants"),a=t("sm-page-nodepage-selectors"),d=t("sm-component-menu-selectors"),u=t("sm-component-menu-actions"),c=t("sm-node-settings-actions"),i=t("sm-header-constants");function l(e,t){return(n,o)=>{let s=o(),c=(0,a.getNode)(s),i=c&&c.id,l=c&&(0,a.getRealNodeType)(s);return(0,d.isVisible)(s,e)||(0,r.trackMenuOpenEvent)({label:t,nodeId:i,nodeType:l}),Promise.resolve(n((0,u.toggle)(e)))}}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-smuglog","sm-api-redux-actions","sm-header-tracking-helpers","sm-page-nodepage-constants","sm-page-nodepage-selectors","sm-component-menu-selectors","sm-component-menu-actions","sm-node-settings-actions","sm-header-constants"]});
YUI.add("sm-header-cart-button-container",(function(e){SM.currentModule="sm-header-cart-button-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-header-cart-button")),a=t("sm-page-selectors"),o=t("sm-header-selectors"),d=t("sm-page-nodepage-selectors");var n=(0,e.connect)(e=>{let t,r,n=(0,o.getCartItemCount)(e),s=(0,o.getCartUrl)(e),u=!!(0,a.getLoggedInUser)(e),c=(0,d.getNode)(e);return c&&(t=c.id,r=(0,d.getRealNodeType)(e)),{itemCount:n,cartUrl:s,isLoggedIn:u,nodeId:t,nodeType:r}})(r.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-cart-button","sm-page-selectors","sm-header-selectors","sm-page-nodepage-selectors"]});
YUI.add("sm-header-cart-button",(function(e){SM.currentModule="sm-header-cart-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-pretty-pluralize")),l=babelHelpers.interopRequireDefault(t("sm-analytics")),n=babelHelpers.interopRequireDefault(t("sm-badge")),u=t("sm-header-tracking-helpers");const d=t=>{let{cartUrl:a,itemCount:d,nodeId:i,nodeType:o,onClick:s,skinnable:c}=t,p=c?n.default.SKINS.ACCENT:n.default.SKINS.INFO,f=d;return f>99&&(f="".concat(99,"+")),e.default.createElement("a",babelHelpers.extends({"aria-label":"Shopping cart. ".concat(d," ").concat((0,r.default)(d,"item")," in cart."),className:"sm-page-header-button-circle sm-page-header-navitem-cart",href:a,onClick:s,"data-testid":"header_cart_button"},(0,u.getLinkTrackingAttrs)({action:l.default.ACTION.NAVIGATION_CLICK,label:"Cart",nodeId:i,nodeType:o})),e.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.default.createElement("path",{d:"M5.058 6l2.64 10.25a1 1 0 00.969.75h9.444a1 1 0 00.973-.77l1.89-8A1 1 0 0020 7H7.381l-.58-2.25A1 1 0 005.834 4H3a1 1 0 000 2h2.058zM9.5 18a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm8 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm1.236-9l-1.416 6H9.442L7.896 9h10.84z",fill:"currentColor"})),!!d&&e.default.createElement(n.default,{skin:p,"aria-hidden":!0},f))};d.displayName="Header.CartButton",d.propTypes={cartUrl:a.default.string.isRequired,itemCount:a.default.number,nodeId:a.default.string,nodeType:a.default.string,onClick:a.default.func,skinnable:a.default.bool},d.defaultProps={onClick:()=>{}};var i=d;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-pretty-pluralize","sm-analytics","sm-badge","sm-header-tracking-helpers"]});
YUI.add("sm-header-cart-only-container",(function(e){SM.currentModule="sm-header-cart-only-container";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{connect:e}=SM.import("react-redux"),r=SM.import("sm-header-cart-only"),{getCartItemCount:t,getCartUrl:o}=SM.import("sm-header-selectors"),{getNode:a,getRealNodeType:n}=SM.import("sm-page-nodepage-selectors");var d=e(e=>{let r,d,c=t(e),u=o(e),l=a(e);return l&&(r=l.id,d=n(e)),{itemCount:c,cartUrl:u,nodeId:r,nodeType:d}})(r);exports.default=d}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-cart-only","sm-header-selectors","sm-page-nodepage-selectors"]});
YUI.add("sm-header-cart-only",(function(e){SM.currentModule="sm-header-cart-only";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-analytics")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-link")),s=t("sm-header-tracking-helpers");const u=t=>{let{itemCount:r,cartUrl:u,nodeId:d,nodeType:i}=t,o=(0,s.getLinkTrackingAttrs)({action:l.default.ACTION.NAVIGATION_CLICK,label:"Cart",nodeId:d,nodeType:i});return e.default.createElement("div",{className:"sm-cart-header sm-flex sm-flex-items-center sm-flex-justify-end"},e.default.createElement("h2",null,e.default.createElement(n.default,babelHelpers.extends({href:u},o),"Items in Cart")),e.default.createElement(a.default,babelHelpers.extends({size:"small",skin:"accent",href:u},o),e.default.createElement("span",null,r)))};u.displayName="Header.CartOnly",u.propTypes={itemCount:r.default.number.isRequired,cartUrl:r.default.string.isRequired,nodeId:r.default.string,nodeType:r.default.string};var d=u;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-analytics","sm-component-button","sm-link","sm-header-tracking-helpers"]});
YUI.add("sm-header-constants",(function(_){SM.currentModule="sm-header-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAIN_NAV_FEATURE_FALLBACK=exports.MAIN_NAV_FEATURE_SELLING=exports.MAIN_NAV_FEATURE_PHOTO_STORIES=exports.MAIN_NAV_FEATURE_PHOTOS=exports.MAIN_NAV_FEATURE_PHOTO_SITE=exports.MAIN_NAV_FEATURE_ORGANIZER=exports.FLICKR_PRINTS_PRODUCT=exports.SMUGMUG_PRODUCT=exports.COOKIE_DISMISSED_DASHBOARD_BADGE=exports.COOKIE_DISMISSED_USER_MENU_BADGE=exports.TRACKING_PROPERTY_USER_MENU=exports.TRACKING_LABEL_UPLOAD_TO_NEW_GALLERY=exports.TRACKING_LABEL_UPLOAD_TO_EXISTING=exports.TRACKING_LABEL_UPLOAD_TO_CURRENT_GALLERY=exports.TRACKING_LABEL_UPLOAD_FOLDERS=exports.URL_PATH_UPLOAD_OPTIONS=exports.URL_PATH_UPLOAD=exports.URL_PATH_SUBSCRIBE=exports.URL_PATH_SHARED_WITH_ME=exports.URL_PATH_SELLING=exports.URL_PATH_PHOTO_STORIES=exports.URL_PATH_PHOTOS=exports.URL_PATH_PERKS=exports.URL_PATH_ORGANIZER_PREVIEW=exports.URL_PATH_ORGANIZER=exports.URL_PATH_GOSM=exports.URL_PATH_GETTING_STARTED_OVERVIEW=exports.URL_PATH_CUSTOMIZER=exports.URL_PATH_CONTENT_WIZARD=exports.URL_PATH_CHOOSE_DESIGN=exports.URL_PATH_CART=exports.URL_PATH_APPS=exports.URL_PATH_ADMIN_USER_INFO=exports.URL_PATH_ADMIN_ALBUM_INFO=exports.URL_PATH_ADMIN=exports.HELP_PAGE_URL=exports.MENU_ID_USER_NAV_DROP_DOWN=exports.MENU_ID_NODE_ACTION_MENU_GALLERY_STYLE=exports.MENU_ID_NODE_ACTION_MENU=exports.MENU_ID_MAIN_NAV=exports.MENU_ID_ADMIN_NAV_TIME_STUFF=exports.MENU_ID_ADMIN_NAV_JS_CSS=exports.MENU_ID_ADMIN_NAV=exports.PROFILE_IMAGE_DIMENSIONS=void 0;exports.PROFILE_IMAGE_DIMENSIONS=36;exports.MENU_ID_ADMIN_NAV="adminNav";const _="".concat("adminNav","JSCSS");exports.MENU_ID_ADMIN_NAV_JS_CSS=_;const A="".concat("adminNav","TimeStuff");exports.MENU_ID_ADMIN_NAV_TIME_STUFF=A;exports.MENU_ID_MAIN_NAV="mainNav";exports.MENU_ID_NODE_ACTION_MENU="nodeActionMenu";exports.MENU_ID_NODE_ACTION_MENU_GALLERY_STYLE="nodeActionMenuGalleryStyle";exports.MENU_ID_USER_NAV_DROP_DOWN="userNavDropdown";exports.HELP_PAGE_URL="http://help.smugmug.com/";exports.URL_PATH_ADMIN="/admin";exports.URL_PATH_ADMIN_ALBUM_INFO="/admin/albuminfo.mg";exports.URL_PATH_ADMIN_USER_INFO="/admin/info/user";exports.URL_PATH_APPS="/features/photo-apps";exports.URL_PATH_CART="/cart";exports.URL_PATH_CHOOSE_DESIGN="/app/customize/choose";exports.URL_PATH_CONTENT_WIZARD="/getting-started/setup";exports.URL_PATH_CUSTOMIZER="/app/customize";exports.URL_PATH_GETTING_STARTED_OVERVIEW="/getting-started/overview";exports.URL_PATH_GOSM="/gift";exports.URL_PATH_ORGANIZER="/app/organize";exports.URL_PATH_ORGANIZER_PREVIEW="/app/organize-preview";exports.URL_PATH_PERKS="/features/perks";exports.URL_PATH_PHOTOS="/app/photos";exports.URL_PATH_PHOTO_STORIES="/app/stories";exports.URL_PATH_SELLING="/app/selling";exports.URL_PATH_SHARED_WITH_ME="/dashboard";exports.URL_PATH_SUBSCRIBE="/subscribe";exports.URL_PATH_UPLOAD="/upload";exports.URL_PATH_UPLOAD_OPTIONS="/upload/options";exports.TRACKING_LABEL_UPLOAD_FOLDERS="To Folders";exports.TRACKING_LABEL_UPLOAD_TO_CURRENT_GALLERY="To This Gallery";exports.TRACKING_LABEL_UPLOAD_TO_EXISTING="To Existing Gallery";exports.TRACKING_LABEL_UPLOAD_TO_NEW_GALLERY="To New Gallery";exports.TRACKING_PROPERTY_USER_MENU="User Menu";exports.COOKIE_DISMISSED_USER_MENU_BADGE="dgsb";exports.COOKIE_DISMISSED_DASHBOARD_BADGE="ddbb";exports.SMUGMUG_PRODUCT="smugmug";exports.FLICKR_PRINTS_PRODUCT="flickrprints";exports.MAIN_NAV_FEATURE_ORGANIZER="Organize";exports.MAIN_NAV_FEATURE_PHOTO_SITE="Photo Site";exports.MAIN_NAV_FEATURE_PHOTOS="Photos";exports.MAIN_NAV_FEATURE_PHOTO_STORIES="Photo Stories";exports.MAIN_NAV_FEATURE_SELLING="Selling Tools";exports.MAIN_NAV_FEATURE_FALLBACK="Go To"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-header-floating-action-button-container",(function(e){SM.currentModule="sm-header-floating-action-button-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-header-floating-action-button")),a=t("sm-header-selectors");var n=(0,e.connect)(e=>{let t;return(0,a.getIsAlbumAndCanUpload)(e)&&(t=(0,a.getGalleryUploadUrl)(e)),{uploadUrl:t}})(r.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-floating-action-button","sm-header-selectors"]});
YUI.add("sm-header-floating-action-button",(function(e){SM.currentModule="sm-header-floating-action-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-floating-action-create-node-menu-container")),l=babelHelpers.interopRequireDefault(t("sm-floating-action-upload-button-container"));const n=t=>{let{canCreateAlbum:a,canCreateFolder:n,uploadUrl:o}=t;return o?e.default.createElement(l.default,{uploadUrl:o}):a||n?e.default.createElement(r.default,{canCreateAlbum:a,canCreateFolder:n}):null};n.displayName="Header.Layout.FloatingActionButton",n.propTypes={canCreateAlbum:a.default.bool,canCreateFolder:a.default.bool,uploadUrl:a.default.string};var o=n;exports.default=o}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-floating-action-create-node-menu-container","sm-floating-action-upload-button-container"]});
YUI.add("sm-header-gallery-pricing-helper",(function(e){SM.currentModule="sm-header-gallery-pricing-helper";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openGalleryPricing=function(){(0,t.trackMenuItemEvent)({category:e.default.CATEGORY.SECTION_BAR,label:"Gallery Pricing"}),SM.load("sm-setprice-panel").then(e=>{l.default.dialogs.setPrices||(l.default.dialogs.setPrices={dialogClass:e,config:{modal:!0,visible:!1,titleLocation:"outside",render:!0,userNode:l.default.model}}),l.default.api.sendRequest({method:"rpc.user.pricelists",data:{NickName:l.default.owner.nickName},freshRequest:!0}).then((function(e){var r=e.response.results.pricelists,t=l.default.getDialog("setPrices");r.length?(t.set("priceLists",r),t.once("saved",(function(e){this.hide(),location.href=e.userNode.get("Url")})),t.show()):t.launchFullPriceList()}))})};var e=babelHelpers.interopRequireDefault(r("sm-analytics")),l=babelHelpers.interopRequireDefault(r("sm-page")),t=r("sm-header-tracking-helpers")}(),SM.currentModule=null}),"",{requires:["sm-analytics","sm-page","sm-header-tracking-helpers"]});
YUI.add("sm-header-global-nav-container",(function(e){SM.currentModule="sm-header-global-nav-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=babelHelpers.interopRequireDefault(r("sm-header-global-nav")),a=r("sm-page-selectors"),o=r("sm-header-selectors");const s={fetchCartItemCount:r("sm-header-actions").fetchCartItemCount};var n=(0,e.connect)((e,{linkHeaderLogo:r})=>{let{isTrial:t}=(0,a.getLoggedInUser)(e),s=!1,n=(0,a.viewportIsGreaterThanSmall)(e);if(n&&t){let{daysRemaining:r,autoStartSubscription:t}=(0,a.getLoggedInUserTrialData)(e);s=r>=0&&!t}return{logoHref:(0,o.getLogoHref)(e,{linkHeaderLogo:r}),logoSmuggyOnly:(0,a.viewportIsLessThanMedium)(e),product:SM.env.product,showCart:(0,o.getCartItemCount)(e)>0,showHeadwayNotes:n&&(0,o.shouldShowHeadwayNotes)(e),showHelpButton:n,showMainNavigation:!(0,a.isLoggedInUserGuest)(e),showSubscribeCTA:s}},s)(t.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-global-nav","sm-page-selectors","sm-header-selectors","sm-header-actions"]});
YUI.add("sm-header-global-nav",(function(e){SM.currentModule="sm-header-global-nav";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(a("react")),t=babelHelpers.interopRequireDefault(a("prop-types")),l=babelHelpers.interopRequireDefault(a("sm-header")),o=babelHelpers.interopRequireDefault(a("sm-header-headway-release-notes")),r=babelHelpers.interopRequireDefault(a("sm-header-logo")),u=babelHelpers.interopRequireDefault(a("sm-header-cart-button-container")),n=babelHelpers.interopRequireDefault(a("sm-header-help-container")),s=babelHelpers.interopRequireDefault(a("sm-main-nav-container")),d=babelHelpers.interopRequireDefault(a("sm-header-subscribe-cta-container")),i=babelHelpers.interopRequireDefault(a("sm-user-nav-container")),c=a("sm-header-constants");const f=a=>{let{activeFeature:t,fetchCartItemCount:c,logoHref:f,logoSmuggyOnly:m,onNavItemClick:p,onUploadButtonClick:b,product:h,searchScope:C,searchScopeValue:v,shouldInitializeCart:g,showCart:H,showHeadwayNotes:S,showHelpButton:y,showMainNavigation:M,showSubscribeCTA:R,useUploadButtonLink:w}=a;return(0,e.useEffect)(()=>{g&&c()},[c,g]),e.default.createElement(l.default,{className:"sm-flex sm-flex-items-center","data-layout":"default"},e.default.createElement(r.default,{logoHref:f,onLogoClick:p,product:h,smuggyOnly:m}),!!M&&e.default.createElement(s.default,{activeFeature:t,onNavItemClick:p,onUploadButtonClick:b,useUploadButtonLink:w}),e.default.createElement("nav",{className:"sm-page-header-nav-right sm-flex sm-flex-items-center"},S&&e.default.createElement(o.default,null),R&&e.default.createElement(d.default,{onClick:p}),y&&e.default.createElement(n.default,null),H&&e.default.createElement(u.default,{onClick:p}),e.default.createElement(i.default,{onNavItemClick:p,searchScope:C,searchScopeValue:v})))};f.displayName="Header.Layout.GlobalNav",f.propTypes={activeFeature:t.default.string,fetchCartItemCount:t.default.func,logoHref:t.default.string,logoSmuggyOnly:t.default.bool,onNavItemClick:t.default.func,onUploadButtonClick:t.default.func,product:t.default.oneOf([c.SMUGMUG_PRODUCT,c.FLICKR_PRINTS_PRODUCT]),shouldInitializeCart:t.default.bool,showCart:t.default.bool,showHeadwayNotes:t.default.bool,showHelpButton:t.default.bool,showMainNavigation:t.default.bool,showSubscribeCTA:t.default.bool,useUploadButtonLink:t.default.bool},f.defaultProps={shouldInitializeCart:!0,product:c.SMUGMUG_PRODUCT};var m=f;exports.default=m}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-header","sm-header-headway-release-notes","sm-header-logo","sm-header-cart-button-container","sm-header-help-container","sm-main-nav-container","sm-header-subscribe-cta-container","sm-user-nav-container","sm-header-constants"]});
YUI.add("sm-header-headway-release-notes",(function(e){SM.currentModule="sm-header-headway-release-notes";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useNotesCount=u,exports.serializeTrackingData=i,exports.deserializeTrackingData=c,exports.persistTrackingData=d,exports.isCountStale=h,exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("js-cookie")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-badge")),s=t("sm-header-tracking-helpers");const l=()=>{let[t,a]=u();return e.default.createElement(n.default,babelHelpers.extends({href:"https://headwayapp.co/smugmug-release-notes",target:"_blank",className:"sm-page-header-navitem-headway","data-testid":"header_headway_button",size:n.default.SIZE_SMALL,onClick:t>0?a:null},(0,s.getLinkTrackingAttrs)({label:"What's New"})),"What's New",t>0&&e.default.createElement(r.default,{skin:r.default.SKINS.INFO},t))};l.displayName="Header.HeadwayReleaseNotes";var o=l;function u(){let[t,n]=(0,e.useState)(0);return(0,e.useEffect)(()=>{let e=a.default.get("hwnt");if(e||n(1),e){let t=c(e);if(h(t.lastFetch)){!async function(){let e=(await async function(){try{let e=await fetch("https://headwayapp.co/smugmug-release-notes.json");return e.ok?(await e.json()).collection:[]}catch(e){return console.warn("Failed to fetch headway notes: ",e),[]}}()).filter(e=>new Date(e.dateTime)>t.lastFetch).length,a=t.newCount+e;n(a),d({newCount:a,lastFetch:new Date})}()}else n(t.newCount)}},[]),[t,(0,e.useCallback)(()=>{n(0),d({newCount:0,lastFetch:new Date})},[n])]}function i(e){return JSON.stringify({...e,lastFetch:e.lastFetch.toISOString()})}function c(e){try{return JSON.parse(e,(e,t)=>("lastFetch"===e&&(t=new Date(t)),t))}catch(e){return console.warn("Failed to parse headway notes cookie"),a.default.remove("hwnt"),{newCount:0,lastFetch:new Date}}}function d(e){let t=i(e);a.default.set("hwnt",t,{domain:SM.env.host.session,path:"/",expires:365,secure:!0,sameSite:"Lax"})}function h(e){return new Date-e>864e5}exports.default=o}(),SM.currentModule=null}),"",{requires:["react","js-cookie","sm-component-button","sm-badge","sm-header-tracking-helpers"]});
YUI.add("sm-header-help-container",(function(e){SM.currentModule="sm-header-help-container";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{connect:e}=SM.import("react-redux"),{getHelpData:t}=SM.import("sm-page-help-selectors"),{helpClick:l}=SM.import("sm-page-help-actions"),{getNode:r,getRealNodeType:o}=SM.import("sm-page-nodepage-selectors"),p=SM.import("sm-contextual-help"),n=SM.import("sm-header-help");var a=e((e,l)=>{let p,n,{urlSupport:a,contextualHelpEnabled:d}=t(e),u=r(e);return u&&(p=u.id,n=o(e)),{contextualHelpEnabled:d,nodeId:p,nodeType:n,urlSupport:a,...l}},e=>({dispatchClick:(...t)=>{e(l(...t))}}),(e,t,l)=>{let{contextualHelpEnabled:r,nodeId:o,nodeType:n,urlSupport:a}=e;return{...l,contextualHelpEnabled:r,nodeId:o,nodeType:n,urlSupport:a,onClick:e=>{r&&(e.preventDefault(),t.dispatchClick(!p.isOpen(),{nodeId:o,nodeType:n}))}}})(n);exports.default=a}(),SM.currentModule=null}),"",{requires:["react-redux","sm-page-help-selectors","sm-page-help-actions","sm-page-nodepage-selectors","sm-contextual-help","sm-header-help"]});
YUI.add("sm-header-help",(function(e){SM.currentModule="sm-header-help";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("classnames")),l=babelHelpers.interopRequireDefault(r("sm-analytics")),s=r("sm-header-tracking-helpers");const u=e=>{let{className:r,contextualHelpEnabled:u,nodeId:n,nodeType:p,urlSupport:d,...o}=e,i={};u||(i=(0,s.getLinkTrackingAttrs)({action:l.default.ACTION.NAVIGATION_CLICK,label:"Support",nodeId:n,nodeType:p}));let c=["sm-page-header-button-circle","sm-page-header-support","sm-flex","sm-flex-items-center",r];return t.default.createElement("a",babelHelpers.extends({"aria-label":"Support",className:(0,a.default)(c),href:d,"data-testid":"header_support_button",target:"_blank",rel:"noreferrer"},i,o),t.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 10a1 1 0 110 2 1 1 0 010-2zm1.914-6.62c1.318 1.317 1.222 2.914-.18 4.413l-.154.16-.925.803a1 1 0 01-1.4-1.422l.089-.088.873-.755c.766-.767.803-1.176.283-1.697-.521-.521-.93-.484-1.697.283a1 1 0 01-1.415-1.415c1.497-1.496 3.161-1.647 4.526-.282z",fill:"currentColor"})))};u.displayName="Header.Help",u.propTypes={urlSupport:e.default.string.isRequired,nodeId:e.default.string,nodeType:e.default.string};var n=u;exports.default=n}(),SM.currentModule=null}),"",{requires:["prop-types","react","classnames","sm-analytics","sm-header-tracking-helpers"]});
YUI.add("sm-header-layout-container",(function(e){SM.currentModule="sm-header-layout-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=babelHelpers.interopRequireDefault(t("sm-header-layout")),a=t("sm-page-selectors"),o=t("sm-header-selectors");const s={fetchCartItemCount:t("sm-header-actions").fetchCartItemCount};var u=(0,e.connect)((e,t)=>{let r=(0,a.viewportIsLessThanMedium)(e);return{activeFeature:(0,o.getActiveFeature)(e,null==t?void 0:t.activeFeature),cartHasItems:!!(0,o.getCartItemCount)(e),showFloatingActionButton:r,showNodeSectionBar:!r&&(0,o.getShowNodeSectionBar)(e),showUserSiteHeader:(0,o.getShowUserSiteHeader)(e)}},s)(r.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-layout","sm-page-selectors","sm-header-selectors","sm-header-actions"]});
YUI.add("sm-header-layout-minimal-container",(function(e){SM.currentModule="sm-header-layout-minimal-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=babelHelpers.interopRequireDefault(r("sm-header-layout-minimal")),o=r("sm-page-selectors"),a=r("sm-header-selectors");var l=(0,e.connect)((e,{linkHeaderLogo:r})=>{let t,l=!!(0,o.getLoggedInUser)(e),u=(0,o.isSmugMugWebView)(e);return u||(t=(0,a.getLogoHref)(e,{linkHeaderLogo:r})),{isLoggedIn:l,logoHref:t,product:SM.env.product,showHelpButton:l&&(0,o.viewportIsGreaterThanSmall)(e)&&!u}})(t.default);exports.default=l}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-layout-minimal","sm-page-selectors","sm-header-selectors"]});
YUI.add("sm-header-layout-minimal",(function(e){SM.currentModule="sm-header-layout-minimal";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-header")),r=babelHelpers.interopRequireDefault(t("sm-header-help-container")),s=babelHelpers.interopRequireDefault(t("sm-header-logo")),u=t("sm-header-constants");const o=t=>{let{headerTitle:l,isLoggedIn:o,logoHref:n,product:d,showHelpButton:i}=t,m=d===u.SMUGMUG_PRODUCT&&!o;return e.default.createElement(a.default,{skinnable:m,className:"sm-flex sm-flex-items-center","data-layout":"minimal"},e.default.createElement(s.default,{logoHref:n,product:d}),!!l&&e.default.createElement("h1",{className:"sm-page-header-title sm-flex-self-center"},l),!!i&&e.default.createElement("nav",{className:"sm-page-header-nav-right sm-flex sm-flex-items-center sm-flex-justify-end"},e.default.createElement(r.default,null)))};o.displayName="Header.Layout.Minimal",o.propTypes={headerTitle:l.default.string,isLoggedIn:l.default.bool,logoHref:l.default.string,product:l.default.oneOf([u.SMUGMUG_PRODUCT,u.FLICKR_PRINTS_PRODUCT]),showHelpButton:l.default.bool},o.defaultProps={product:u.SMUGMUG_PRODUCT,showHelpButton:!0};var n=o;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-header","sm-header-help-container","sm-header-logo","sm-header-constants"]});
YUI.add("sm-header-layout-user-site-container",(function(e){SM.currentModule="sm-header-layout-user-site-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=babelHelpers.interopRequireDefault(r("sm-header-layout-user-site")),s=r("sm-page-selectors"),a=r("sm-header-selectors"),u=r("sm-page-feature-flag-constants");var o=(0,e.connect)((e,{showSearchBox:r})=>{let t=!!(0,s.getLoggedInUser)(e);return{isRemoveHeaderLogin:(0,s.getFeatureFlagValue)(e,u.REMOVE_HEADER_LOGIN),isUserLoggedIn:t,product:SM.env.product,showCart:(0,a.getCartItemCount)(e)>0,showSearchBox:r&&!(0,s.viewportIsLessThanMedium)(e)}})(t.default);exports.default=o}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-layout-user-site","sm-page-selectors","sm-header-selectors","sm-page-feature-flag-constants"]});
YUI.add("sm-header-layout-user-site",(function(e){SM.currentModule="sm-header-layout-user-site";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-header")),l=babelHelpers.interopRequireDefault(t("sm-header-login-button")),s=babelHelpers.interopRequireDefault(t("sm-header-logo")),o=babelHelpers.interopRequireDefault(t("sm-header-cart-button-container")),u=babelHelpers.interopRequireDefault(t("sm-header-search-container")),n=t("sm-header-constants");const d=t=>{let{isRemoveHeaderLogin:a,isUserLoggedIn:d,product:c,searchCategory:i,searchScope:f,searchScopeValue:p,showCart:m,showSearchBox:h}=t,b=c===n.SMUGMUG_PRODUCT;return e.default.createElement(r.default,{skinnable:b,className:"sm-flex sm-flex-items-center sm-flex-justify-between","data-layout":"user-site"},e.default.createElement(s.default,{logoHref:"https://".concat(SM.env.host.main),product:c}),e.default.createElement("nav",{className:"sm-page-header-nav-right sm-flex sm-flex-items-center sm-flex-justify-end"},!!h&&e.default.createElement(u.default,{category:i,scope:f,scopeValue:p}),!!m&&e.default.createElement(o.default,{skinnable:b}),!d&&!a&&e.default.createElement(l.default,null)))};d.displayName="Header.Layout.UserSite",d.propTypes={isRemoveHeaderLogin:a.default.bool,isUserLoggedIn:a.default.bool,product:a.default.oneOf([n.SMUGMUG_PRODUCT,n.FLICKR_PRINTS_PRODUCT]),searchCategory:a.default.string,searchScope:a.default.string,searchScopeValue:a.default.string,showCart:a.default.bool,showSearchBox:a.default.bool},d.defaultProps={product:n.SMUGMUG_PRODUCT};var c=d;exports.default=c}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-header","sm-header-login-button","sm-header-logo","sm-header-cart-button-container","sm-header-search-container","sm-header-constants"]});
YUI.add("sm-header-layout",(function(e){SM.currentModule="sm-header-layout";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(a("react")),t=babelHelpers.interopRequireDefault(a("prop-types")),r=babelHelpers.interopRequireDefault(a("sm-header-floating-action-button-container")),l=babelHelpers.interopRequireDefault(a("sm-header-global-nav-container")),o=babelHelpers.interopRequireDefault(a("sm-header-cart-only-container")),n=babelHelpers.interopRequireDefault(a("sm-header-layout-minimal-container")),u=babelHelpers.interopRequireDefault(a("sm-header-layout-user-site-container")),i=babelHelpers.interopRequireDefault(a("sm-header-node-section-bar-container")),d=babelHelpers.interopRequireDefault(a("sm-node-settings-launcher"));const c=a=>{let{activeFeature:t,canCreateAlbum:c,canCreateFolder:s,cartHasItems:f,fetchCartItemCount:m,linkHeaderLogo:h,minimalHeaderTitle:b,onNavItemClick:p,searchCategory:H,searchScope:g,searchScopeValue:S,showCartOnlyHeader:y,showFloatingActionButton:C,showMinimalHeader:v,showNodeSectionBar:w,showSearchBox:M,showUserSiteHeader:q}=a;return(0,e.useEffect)(()=>{m()},[m]),v?e.default.createElement(n.default,{headerTitle:b,linkHeaderLogo:h}):y?f?e.default.createElement(o.default,null):null:q?e.default.createElement(u.default,{linkHeaderLogo:h,showSearchBox:M,searchCategory:H,searchScope:g,searchScopeValue:S}):e.default.createElement(e.default.Fragment,null,e.default.createElement(l.default,{activeFeature:t,linkHeaderLogo:h,onNavItemClick:p,shouldInitializeCart:!1}),w&&e.default.createElement(i.default,{searchScope:g,searchScopeValue:S}),C&&e.default.createElement(e.default.Fragment,null,e.default.createElement(r.default,{canCreateAlbum:c,canCreateFolder:s}),e.default.createElement(d.default,null)))};c.displayName="Header.Layout",c.propTypes={activeFeature:t.default.string,canCreateAlbum:t.default.bool,canCreateFolder:t.default.bool,cartHasItems:t.default.bool,fetchCartItemCount:t.default.func,linkHeaderLogo:t.default.bool,minimalHeaderTitle:t.default.string,onNavItemClick:t.default.func,searchCategory:t.default.string,searchScope:t.default.string,searchScopeValue:t.default.string,showCartOnlyHeader:t.default.bool,showFloatingActionButton:t.default.bool,showMinimalHeader:t.default.bool,showNodeSectionBar:t.default.bool,showSearchBox:t.default.bool,showUserSiteHeader:t.default.bool};var s=c;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-header-floating-action-button-container","sm-header-global-nav-container","sm-header-cart-only-container","sm-header-layout-minimal-container","sm-header-layout-user-site-container","sm-header-node-section-bar-container","sm-node-settings-launcher"]});
YUI.add("sm-header-login-button",(function(e){SM.currentModule="sm-header-login-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-analytics")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),n=t("sm-header-tracking-helpers");const l=()=>e.default.createElement(r.default,babelHelpers.extends({href:SM.env.loginURL,size:r.default.SIZE_SMALL,className:"sm-page-header-navitem-login sm-button-auto-width","data-testid":"header_login_button"},(0,n.getLinkTrackingAttrs)({label:"Log In",action:a.default.ACTION.NAVIGATION_CLICK})),"Owner Log In");l.displayName="Header.LoginButton";var u=l;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","sm-analytics","sm-component-button","sm-header-tracking-helpers"]});
YUI.add("sm-header-logo",(function(e){SM.currentModule="sm-header-logo";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),t=babelHelpers.interopRequireDefault(l("prop-types")),r=babelHelpers.interopRequireDefault(l("sm-analytics")),o=babelHelpers.interopRequireDefault(l("sm-flickr-logo")),a=babelHelpers.interopRequireDefault(l("sm-link")),s=babelHelpers.interopRequireDefault(l("sm-logo")),u=l("sm-header-tracking-helpers"),n=l("sm-header-constants");const i=({logoHref:l,onLogoClick:t,product:i,smuggyOnly:d})=>{let m;return m=i===n.FLICKR_PRINTS_PRODUCT?e.default.createElement(o.default,{className:"sm-logo sm-flex-no-shrink","data-testid":"header_smugmug_logo",title:"Flickr"}):e.default.createElement(s.default,{className:"sm-logo sm-flex-no-shrink","data-testid":"header_smugmug_logo",title:"SmugMug",smuggyOnly:d}),l?e.default.createElement(a.default,babelHelpers.extends({href:l,onClick:t,className:"sm-logo-link sm-flex",tabIndex:"1"},(0,u.getLinkTrackingAttrs)({label:"Logo",action:r.default.ACTION.NAVIGATION_CLICK})),m):m};i.displayName="Header.SMLogo",i.propTypes={logoHref:t.default.string,onLogoClick:t.default.func,smuggyOnly:t.default.bool,product:t.default.oneOf([n.SMUGMUG_PRODUCT,n.FLICKR_PRINTS_PRODUCT])},i.defaultProps={smuggyOnly:!1,onLogoClick:()=>{}};var d=i;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-analytics","sm-flickr-logo","sm-link","sm-logo","sm-header-tracking-helpers","sm-header-constants"]});
YUI.add("sm-header-node-section-bar-container",(function(e){SM.currentModule="sm-header-node-section-bar-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=r("sm-api-redux-selectors"),n=r("sm-header-gallery-pricing-helper"),a=r("sm-component-menu-actions"),s=r("sm-header-tracking-helpers"),o=r("sm-page-selectors"),l=babelHelpers.interopRequireDefault(r("sm-analytics")),i=babelHelpers.interopRequireDefault(r("sm-header-node-section-bar")),c=r("sm-header-constants"),d=r("sm-header-node-section-bar-helpers"),g=r("sm-header-selectors"),u=r("sm-page-nodepage-selectors"),m=r("sm-page-nodepage-constants");const p=new Set([m.NODE_TYPE_ALBUM,m.NODE_TYPE_FOLDER,m.NODE_TYPE_PAGE]);var E=(0,e.connect)(e=>{let r,a,i,c,E=(0,u.getNode)(e),_=(0,t.getExpansion)(e,E.uri,"Album"),h=(0,u.getRealNodeType)(e),M=(0,g.getUrlCustomize)(e),N=(0,g.getUrlChooseDesign)(e),S=!(h===m.NODE_TYPE_SYSTEM_PAGE&&"search"===E.name)&&(0,g.getSearchPageUrl)(e),T={};if((0,g.getCanEditThemeSettings)(e)&&(r=(0,d.openThemeSettingsPanel)(h)),(0,g.getCanEditNodeSettings)(e)){let e=m.NODE_TYPE_TRACKING_VALUES[h]||"",r=(0,d.getOpenNodeSettingsPanelClickHandler)();a=()=>{(0,s.trackEvent)({action:l.default.ACTION.MENU_ITEM_CLICK,category:l.default.CATEGORY.SECTION_BAR,label:"".concat(e," Settings")}),r()}}if((0,g.getShowGalleryPricing)(e)&&(i=n.openGalleryPricing),_&&m.NODE_TYPE_SYSTEM_ALBUM!==h){let r=(0,g.getDefaultTemplateUri)(e);T=(0,d.getGalleryStyleProps)(_,r)}return p.has(h)&&(c=(0,g.getUrlOrganizer)(e)),{nodeId:E.id,nodeType:h,onGalleryPricingClick:i,onOpenNodeSettingsClick:a,onOpenThemeSettingsClick:r,urlChooseDesign:N,urlCustomizer:M,urlOrganizeNode:c,urlSearchPage:S,collapseSearchButton:(0,o.viewportIsLessThanLarge)(e),...T}},e=>({onActionMenuClick:()=>{e((0,a.toggle)(c.MENU_ID_NODE_ACTION_MENU))},onGalleryMenuItemMouseEnter:()=>{e((0,a.show)(c.MENU_ID_NODE_ACTION_MENU_GALLERY_STYLE))},onGalleryMenuItemMouseLeave:()=>{e((0,a.hide)(c.MENU_ID_NODE_ACTION_MENU_GALLERY_STYLE))}}))(i.default);exports.default=E}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-selectors","sm-header-gallery-pricing-helper","sm-component-menu-actions","sm-header-tracking-helpers","sm-page-selectors","sm-analytics","sm-header-node-section-bar","sm-header-constants","sm-header-node-section-bar-helpers","sm-header-selectors","sm-page-nodepage-selectors","sm-page-nodepage-constants"]});
YUI.add("sm-header-node-section-bar-helpers",(function(e){SM.currentModule="sm-header-node-section-bar-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOpenNodeSettingsPanelClickHandler=function({createNew:t=!1,node:n,onComplete:c}={}){return()=>{SM.load("sm-settings").then(async m=>{let p,f=n||(0,i.getNode)(r.default.getState())||(0,i.getOwnersRootNode)(r.default.getState()),E=f.uris.parentNode;t?(E=f.uri,p=new g.default({ParentID:f.id,Type:g.TYPES.ALBUM})):await r.default.dispatch((0,d.fetchFromAPI)({uri:E})).then(e=>{E=e}).catch(e=>{l.default.add("sm-node-page-section-bar-helpers",{...(0,u.getSmugLogDataForRequestFailure)(e,"getOpenNodeSettingsPanelClickHandler"),currentNodeUri:E},l.default.LEVEL_ERROR),r.default.dispatch((0,s.addWarning)())}),a.default.dialogs.settings={dialogClass:m.Base,config:{modal:!0,visible:!1,titleLocation:"outside",render:!0,userNode:t?p:a.default.model,parentNode:(0,o.getEntity)(r.default.getState(),E)}};let S=a.default.getDialog("settings");S.once("saved",async n=>{let i=n.userNode.get("Url"),m=n.userNode.get("UrlPath");if(S.hide(),!t)return c?void c(m):void(e.default.win.location.href=i);let{NodeID:p}=n.responseNode,g="/api/v2/node/".concat(encodeURIComponent(p));await r.default.dispatch((0,d.fetchFromAPI)({uri:g,expand:["Album"]})).catch(e=>{l.default.add("sm-node-page-section-bar-helpers",{...(0,u.getSmugLogDataForRequestFailure)(e,"getOpenNodeSettingsPanelClickHandler"),newlyCreatedNodeUri:g},l.default.LEVEL_ERROR),r.default.dispatch((0,s.addWarning)())});let f=r.default.getState(),E=(0,o.getEntity)(f,g),R=E.Uris.Album,{AlbumKey:h}=(0,o.getEntity)(f,R);a.default.nav.upload.showUploadPanel(E.Name,{albumKey:h,nodeId:p},t=>{if(t){if(c)return void c(m);e.default.win.location.href=i}})}),S.show()})}},exports.getGalleryStyleProps=function(t,r){let s=m.GALLERY_STYLE_LOOKUP[r],d=m.GALLERY_STYLE_LOOKUP[t.TemplateUri]||s;return{onGalleryStyleClickHandlers:m.GALLERY_STYLES.reduce((t,r)=>({...t,[r]:()=>function(t){let r=m.GALLERY_STYLE_TEMPLATE_ID_LOOKUP[t];if(!r){let a="Invalid galleryStyle=".concat(t," supplied to setGalleryStyle()");throw l.default.add("sm-node-page-section-bar-helpers",{method:"setGalleryStyle",message:a,location:e.default.win.location.href},l.default.LEVEL_ERROR),new Error(a)}(0,c.trackMenuItemEvent)({category:n.default.CATEGORY.SECTION_BAR,label:t,property:"Gallery Style"}),a.default.setAlbumStyle(r)}(r)}),{}),currentGalleryStyle:d,defaultGalleryStyle:s}},exports.openThemeSettingsPanel=function(e){if(!a.default.ownerHasFeature(a.default.FEATURES.THEMES))return null;return e!==p.NODE_TYPE_ROOT_FOLDER||a.default.ownerHasFeature(a.default.FEATURES.CUSTOMIZATION)?()=>function(e){let t=p.NODE_TYPE_TRACKING_VALUES[e]||"",l="".concat(t," Theme");e===p.NODE_TYPE_ROOT_FOLDER&&(l="Site-Wide Theme");(0,c.trackMenuItemEvent)({category:n.default.CATEGORY.SECTION_BAR,label:l}),a.default.editSkin()}(e):f};var e=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("sm-page")),l=babelHelpers.interopRequireDefault(t("sm-smuglog")),r=babelHelpers.interopRequireDefault(t("sm-redux-store")),n=babelHelpers.interopRequireDefault(t("sm-analytics")),s=t("sm-dialogs-actions"),d=t("sm-api-redux-actions"),o=t("sm-api-redux-selectors"),i=t("sm-page-nodepage-selectors"),u=t("sm-api-redux-utils"),c=t("sm-header-tracking-helpers"),m=t("sm-gallery-constants"),p=t("sm-page-nodepage-constants"),g=babelHelpers.interopRequireWildcard(t("sm-models-usernode"));function f(){(0,c.trackMenuItemEvent)({category:n.default.CATEGORY.SECTION_BAR,label:"Site-Wide Theme"}),a.default.editSiteSkin()}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-page","sm-smuglog","sm-redux-store","sm-analytics","sm-dialogs-actions","sm-api-redux-actions","sm-api-redux-selectors","sm-page-nodepage-selectors","sm-api-redux-utils","sm-header-tracking-helpers","sm-gallery-constants","sm-page-nodepage-constants","sm-models-usernode"]});
YUI.add("sm-header-node-section-bar",(function(e){SM.currentModule="sm-header-node-section-bar";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),n=t("sm-header-tracking-helpers"),l=t("sm-component-menu-constants"),r=babelHelpers.interopRequireDefault(t("sm-analytics")),s=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon")),u=babelHelpers.interopRequireDefault(t("sm-component-menu")),d=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),i=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),c=t("sm-header-constants"),m=t("sm-page-nodepage-constants"),f=t("sm-gallery-constants");const E=new Set([m.NODE_TYPE_PAGE,m.NODE_TYPE_ROOT_FOLDER,m.NODE_TYPE_SYSTEM_PAGE]),_=t=>{let{collapseSearchButton:a,currentGalleryStyle:_,defaultGalleryStyle:p,nodeId:S,nodeType:b,onActionMenuClick:g,onGalleryMenuItemMouseEnter:L,onGalleryMenuItemMouseLeave:T,onGalleryPricingClick:y,onGalleryStyleClickHandlers:A,onOpenNodeSettingsClick:C,onOpenThemeSettingsClick:I,searchScope:N,searchScopeValue:h,urlChooseDesign:M,urlCustomizer:O,urlOrganizeNode:R,urlSearchPage:G}=t,k=(0,e.useRef)(null),[Y,D]=(0,e.useState)(!1);(0,e.useLayoutEffect)(()=>{D(!0)},[]);let P,q,z=m.NODE_TYPE_LABEL_MAP[b]||"",H="Organize ".concat(z),v=b===m.NODE_TYPE_ROOT_FOLDER?"Change Site Theme":"".concat(z," Theme");return G&&(P=G,N&&h&&(P+="?scope=".concat(N,"&scopeValue=").concat(h)),q=E.has(b)?"Search Photo Site":"Search ".concat(z)),e.default.createElement("section",{className:"sm-nui sm-page-header-section-bar sm-flex sm-flex-items-center sm-flex-justify-between"},z&&e.default.createElement("h1",{className:"sm-h3"},z),e.default.createElement("nav",{className:"sm-flex sm-flex-justify-end"},!!R&&e.default.createElement(s.default,babelHelpers.extends({"data-testid":"nodesectionbar_organize_button",href:R,size:s.default.SIZE_SMALL},(0,n.getLinkTrackingAttrs)({action:r.default.ACTION.BUTTON_CLICK,category:r.default.CATEGORY.SECTION_BAR,label:H,nodeId:S,nodeType:b})),H),!!C&&e.default.createElement(s.default,{"data-testid":"nodesectionbar_nodesettings_button",onClick:C,size:s.default.SIZE_SMALL},"Settings"),!!O&&e.default.createElement(s.default,babelHelpers.extends({href:O,"data-testid":"nodesectionbar_contentdesign_button",size:s.default.SIZE_SMALL},(0,n.getLinkTrackingAttrs)({action:r.default.ACTION.BUTTON_CLICK,category:r.default.CATEGORY.SECTION_BAR,label:"Content and Design",nodeId:S,nodeType:b})),"Customize"),!!P&&e.default.createElement(s.default,babelHelpers.extends({"aria-label":q,href:P,"data-testid":"nodesectionbar_search_button",size:s.default.SIZE_SMALL},(0,n.getLinkTrackingAttrs)({action:r.default.ACTION.NAVIGATION_CLICK,category:r.default.CATEGORY.SECTION_BAR,label:q,nodeId:S,nodeType:b})),a?e.default.createElement(o.default,{name:"Search",size:o.default.SIZE_SMALL}):q),e.default.createElement("div",{className:"sm-position-relative"},e.default.createElement(s.default,{"aria-label":"".concat(z," action menu"),"data-testid":"nodesectionbar_actionmenu_button",onClick:g,ref:k,size:s.default.SIZE_SMALL},e.default.createElement(o.default,{name:"MoreVert",size:o.default.SIZE_SMALL})),e.default.createElement(u.default,{className:"sm-page-header-section-bar-action-menu",menuId:c.MENU_ID_NODE_ACTION_MENU,anchor:k.current},!!M&&e.default.createElement(d.default,{type:l.ITEM_TYPE_LINK,href:M,dataAttrs:{"data-testid":"nodesectionbar_choosedesign_menuitem",...(0,n.getLinkTrackingAttrs)({action:r.default.ACTION.MENU_ITEM_CLICK,category:r.default.CATEGORY.SECTION_BAR,label:"Choose a New Site Template",nodeId:S,nodeType:b})}},"New Site Design"),!!A&&e.default.createElement(d.default,{dataAttrs:{"data-testid":"nodesectionbar_gallerystyle_menuitem"},onMouseEnter:L,onMouseLeave:T},e.default.createElement(i.default,null,"Gallery Style"),e.default.createElement(u.default,{menuId:c.MENU_ID_NODE_ACTION_MENU_GALLERY_STYLE,alignments:l.SUBMENU_ALIGNMENTS,dataAttrs:{"data-testid":"nodesectionbar_gallerystyle_submenu"}},f.GALLERY_STYLES.map((t,a)=>{let n=_===t,l="nodesectionbar_".concat(t.toLowerCase().replace(" ",""),"_menuitem");return e.default.createElement(d.default,{key:a,disabled:n,onClick:A[t],dataAttrs:{"data-testid":l}},e.default.createElement(o.default,{name:f.GALLERY_STYLE_ICON_LOOKUP[t],size:o.default.SIZE_SMALL}),e.default.createElement(i.default,null,t,n&&" (Active)",p===t&&" (Default)"))}))),!!I&&e.default.createElement(d.default,{onClick:I,dataAttrs:{"data-testid":"nodesectionbar_theme_menuitem"}},v),!!y&&e.default.createElement(d.default,{onClick:y,dataAttrs:{"data-testid":"nodesectionbar_pricing_menuitem"}},"Gallery Pricing")))))};_.displayName="Header.NodeSectionBar";const p=f.GALLERY_STYLES.reduce((e,t)=>({[t]:a.default.func,...e}),{});_.propTypes={collapseSearchButton:a.default.bool,currentGalleryStyle:a.default.oneOf(f.GALLERY_STYLES),defaultGalleryStyle:a.default.oneOf(f.GALLERY_STYLES),nodeId:a.default.string.isRequired,nodeType:a.default.string.isRequired,onActionMenuClick:a.default.func.isRequired,onGalleryMenuItemMouseEnter:a.default.func.isRequired,onGalleryMenuItemMouseLeave:a.default.func.isRequired,onGalleryPricingClick:a.default.func,onGalleryStyleClickHandlers:a.default.shape(p),onOpenNodeSettingsClick:a.default.func,onOpenThemeSettingsClick:a.default.func,searchScope:a.default.string,searchScopeValue:a.default.string,urlChooseDesign:a.default.string,urlCustomizer:a.default.string,urlOrganizeNode:a.default.string,urlSearchPage:a.default.string};var S=_;exports.default=S}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-header-tracking-helpers","sm-component-menu-constants","sm-analytics","sm-component-button","sm-icon","sm-component-menu","sm-component-menu-item","sm-component-menu-label","sm-header-constants","sm-page-nodepage-constants","sm-gallery-constants"]});
YUI.add("sm-header-search-container",(function(e){SM.currentModule="sm-header-search-container";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{connect:e}=SM.import("react-redux"),r=SM.import("sm-header-search"),{getNode:t}=SM.import("sm-page-nodepage-selectors");var o=e((e,r)=>{let o,{name:a}=t(e)||{};return a&&(o='Search "'.concat(a,'" for photos')),{...r,title:o}})(r);exports.default=o}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-search","sm-page-nodepage-selectors"]});
YUI.add("sm-header-search",(function(e){SM.currentModule="sm-header-search";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-icon")),r=babelHelpers.interopRequireDefault(t("sm-component-textbox"));const o=e=>{let{placeholder:t,category:o,scope:d,scopeValue:u,title:s}=e;return a.default.createElement("form",{action:"/search/",className:"sm-page-header-search",method:"get"},a.default.createElement(l.default,{name:"Search",size:l.default.SIZE_SMALL}),a.default.createElement(r.default,{name:"q",placeholder:t,title:s,"data-testid":"header_search_field"}),a.default.createElement(r.default,{name:"c",type:"hidden",value:o}),!!d&&a.default.createElement(r.default,{name:"scope",type:"hidden",value:d}),!!u&&a.default.createElement(r.default,{name:"scopeValue",type:"hidden",value:u}))};o.displayName="Header.Search",o.propTypes={placeholder:e.default.string,category:e.default.oneOf(["everything","folders","galleries","media","pages","photos","videos"]),scope:e.default.oneOf(["album","node"]),scopeValue:e.default.string,title:e.default.string},o.defaultProps={placeholder:"Search photos",category:"photos"};var d=o;exports.default=d}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-icon","sm-component-textbox"]});
YUI.add("sm-header-selectors",(function(e){SM.currentModule="sm-header-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHelpData=function(e={}){let{ui:{help:{contextual:t,liveChat:{closureReason:r,enabled:n}={}}={}}={}}=e;return{contextualHelpEnabled:t,liveChatClosureReason:r,liveChatEnabled:n}},exports.getLogoHref=function(e={},{linkHeaderLogo:t=!0}={}){if(!t)return;if((0,s.isLoggedInUserGuest)(e))return l+r.URL_PATH_SHARED_WITH_ME;let n=(0,s.getLoggedInUser)(e);if(!n)return l;if(n.isTrial&&n.isGettingStarted)return l+r.URL_PATH_CONTENT_WIZARD;return l+r.URL_PATH_PHOTOS},exports.getActiveFeature=function(e={},t){if(t)return t;if((0,u.getNode)(e))return r.MAIN_NAV_FEATURE_PHOTO_SITE;return r.MAIN_NAV_FEATURE_FALLBACK},exports.getIsAlbumAndCanUpload=function(e={}){if(!(0,s.isLoggedInUserPageOwner)(e)&&!(0,s.isLoggedInUserAdmin)(e))return!1;if(!(0,s.ownerHasFeature)(e,n.USER_FEATURE_UPLOAD))return!1;let t=(0,u.getRealNodeType)(e);if(t===o.NODE_TYPE_SYSTEM_ALBUM||t===o.NODE_TYPE_ALBUM)return!0;return!1},exports.shouldShowHeadwayNotes=function(e={}){let t=(0,s.getLoggedInUser)(e);if(!t||t.isTrial||(0,s.isLoggedInUserGuest)(e))return!1;return!0},exports.getCanEditNodeSettings=function(e={}){if(!(0,s.isLoggedInUserPageOwner)(e)&&!(0,s.isLoggedInUserAdmin)(e))return!1;if(!(0,s.ownerHasFeature)(e,n.USER_FEATURE_THEMES))return!1;let t=(0,u.getRealNodeType)(e);if(!t)return!1;if(o.SYSTEM_NODE_TYPES.has(t))return!1;return!0},exports.getCanEditThemeSettings=function(t){if(!(0,s.isLoggedInUserPageOwner)(t)&&!(0,s.isLoggedInUserAdmin)(t))return!1;if((0,s.isLoggedInUserAssistant)(t))return!1;if(!(0,s.ownerHasFeature)(t,n.USER_FEATURE_THEMES))return!1;let r=(0,u.getNode)(t);if(!r||r.type===o.NODE_TYPE_SYSTEM_ALBUM)return!1;let i=(0,e.getExpansion)(t,r.uri,"Album");if(i&&i.HideOwner)return!1;return!0},exports.getShowUserSiteHeader=function(e={}){if(!(0,s.getLoggedInUser)(e))return!0;if(!(0,u.getNode)(e))return!1;if((0,s.isLoggedInUserPageOwnerOrAdmin)(e))return!1;return!0},exports.getShowNodeSectionBar=function(e={}){let t=(0,u.getNode)(e);if(!t)return!1;if(!(0,s.isLoggedInUserPageOwnerOrAdmin)(e))return!1;if(t.type===o.NODE_TYPE_SYSTEM_ALBUM)return!1;if(t.type===o.NODE_TYPE_SYSTEM_PAGE)return(0,s.ownerHasFeature)(e,n.USER_FEATURE_CUSTOMIZE);return(0,s.ownerHasFeature)(e,n.USER_FEATURE_THEMES)},exports.getUrlPhotoSite=function(e={}){let{webUri:t}=(0,s.getOwner)(e)||{};t||({homepageUrl:t}=(0,s.getLoggedInUser)(e)||{});return t},exports.getUserSharedWithMeUrl=U,exports.getUserGOSMUrl=E,exports.getUserGettingStartedOverviewUrl=_,exports.getSearchPageUrl=d,exports.getUserMenuUrls=function(e={}){return{urlAppsPage:l+r.URL_PATH_APPS,urlGettingStartedOverview:_(e),urlLogout:SM.env.logoutURL,urlPerksPage:l+r.URL_PATH_PERKS,urlSettings:(0,g.getAccountSettingsUrl)(),urlSharedWithMe:U(e),urlGiftOfSM:E(e),urlSearchPage:d(e)}},exports.getAdminUserSettingsUrl=A,exports.getAdminUserInfoUrl=c,exports.getAdminAlbumInfoUrl=f,exports.getAdminSubmenuData=function(e={}){if(!(0,s.isLoggedInUserAdmin)(e))return{};let t=!(0,s.isLoggedInUserAssistant)(e)&&(0,s.getOwner)(e);return{ownerNickName:null==t?void 0:t.nickName,urlAdminAlbumInfo:f(e),urlAdminHome:l+r.URL_PATH_ADMIN,urlAdminUserHome:null==t?void 0:t.webUri,urlAdminUserInfo:c(e),urlAdminUserSettings:A(e)}},exports.getGalleryUploadUrl=function(t={}){let{type:n,uri:i}=(0,u.getNode)(t)||{};if(n!==o.NODE_TYPE_ALBUM)return;let{AlbumKey:s}=(0,e.getExpansion)(t,i,"Album")||{};if(!s)return;return"".concat(l).concat(r.URL_PATH_UPLOAD,"/").concat(s)},exports.getShowGalleryPricing=function(e={}){let{type:t}=(0,u.getNode)(e)||{};if(t!==o.NODE_TYPE_ALBUM)return!1;return!(0,s.isLoggedInUserAssistant)(e)&&(0,s.ownerHasFeature)(e,n.USER_FEATURE_MULTIPLE_PRICELISTS)},exports.getDefaultTemplateUri=function(t={}){let r=(0,s.getOwnerUri)(t),{DefaultTemplateUri:n}=(0,e.getExpansion)(t,r,"SiteSettings")||{};return n},exports.getCartItemCount=function(t={}){let r=(0,e.getEntity)(t,"/api/v2/cart");return r&&r.ItemCount},exports.getCartUrl=function(e={}){let{webUri:t}=(0,s.getOwner)(e)||{};if(t)return t+r.URL_PATH_CART;return l+r.URL_PATH_CART},exports.getLoggedInProfileImageUrl=function(t){let n=(0,s.getLoggedInUserUri)(t)||"",i=(0,e.getExpansion)(t,n,"BioImage")||"";if(!(null==i?void 0:i.Uri))return;if(null==i?void 0:i.Processing)return"https://cdn.smugmug.com/img/processing-NeXT-Th.png";let o=i.Uri,u=(0,e.getExpansion)(t,o,"ImageSizeDetails");if(!u)return;let g=new a.default(u);if(g.canGenerateCustomSize()){let{Url:e}=null==g?void 0:g.getCustomSize(r.PROFILE_IMAGE_DIMENSIONS,r.PROFILE_IMAGE_DIMENSIONS,{enlargeForPixelRatio:!0,exact:!0});return e}let{Url:l}=null==g?void 0:g.containWithin(r.PROFILE_IMAGE_DIMENSIONS,r.PROFILE_IMAGE_DIMENSIONS);return l},exports.getAdminAwareUrl=S,exports.getUrlPhotosHome=function(e={}){let t=l+r.URL_PATH_PHOTOS;return S(e,t)},exports.getUrlOrganizer=function(e={},{deepLink:t=!0,isProbablyMobile:n=!1}={}){let g,a=(0,s.viewportIsGreaterThanSmall)(e),U=(0,s.getFeatureFlagValue)(e,i.EXPERIMENT_MOBILE_ORGANIZE_PREVIEW);if(a)g=l+r.URL_PATH_ORGANIZER;else{if(!U||!n)return;g=l+r.URL_PATH_ORGANIZER_PREVIEW}let{urlPath:E,type:_}=(0,u.getNode)(e)||{},d=_===o.NODE_TYPE_SYSTEM_PAGE;g+=t&&E&&!d?E:"/";return S(e,g,"nick")},exports.getUrlPhotoStories=function(e={}){if(!(0,s.getFeatureFlagValue)(e,i.ENABLE_PHOTO_STORIES)||(0,s.isLoggedInUserAssistant)(e))return;let t=l+r.URL_PATH_PHOTO_STORIES;return S(e,t)},exports.getUrlSellingTools=function(e={}){if((0,s.isLoggedInUserAssistant)(e))return;if((0,s.getOwner)(e)&&!(0,s.ownerHasFeature)(e,n.USER_FEATURE_SALES))return;if(!(0,s.loggedInUserHasFeature)(e,n.USER_FEATURE_SALES))return;let t=l+r.URL_PATH_SELLING;return S(e,t)},exports.getUrlChooseDesign=function(e={}){if((0,s.isLoggedInUserAssistant)(e))return;if(!(0,s.ownerHasFeature)(e,n.USER_FEATURE_CUSTOMIZE))return;let{isRoot:t}=(0,u.getNode)(e)||{};if(!t)return;let i=l+r.URL_PATH_CHOOSE_DESIGN;return S(e,i)},exports.getUrlCustomize=function(t={}){var i;if((0,s.isLoggedInUserAssistant)(t))return;let g=(0,u.getRealNodeType)(t),a=o.NODE_TYPE_ROOT_FOLDER===g;if(o.NODE_TYPE_SYSTEM_ALBUM===g)return;let U=(0,s.ownerHasFeature)(t,n.USER_FEATURE_CUSTOMIZE),E=(0,s.ownerHasFeature)(t,n.USER_FEATURE_BASIC_CUSTOMIZE);if(!U&&!E)return;if(!U&&!a)return;let _=(0,u.getNode)(t)||{};if(g===o.NODE_TYPE_ALBUM&&(null===(i=(0,e.getExpansion)(t,_.uri,"Album"))||void 0===i?void 0:i.HideOwner))return;let d=l+r.URL_PATH_CUSTOMIZER;if(_&&!a){let{urlPath:e=""}=_;d+=e}return S(t,d)};var e=t("sm-api-redux-selectors"),r=t("sm-header-constants"),n=t("sm-page-constants"),i=t("sm-page-feature-flag-constants"),s=t("sm-page-selectors"),o=t("sm-page-nodepage-constants"),u=t("sm-page-nodepage-selectors"),g=t("sm-controlpanel-helpers"),a=babelHelpers.interopRequireDefault(t("sm-image-sizes"));const l="https://".concat(SM.env.host.main);function U(e={}){if(!(0,s.isLoggedInUserAssistant)(e))return l+r.URL_PATH_SHARED_WITH_ME}function E(e={}){if(!(0,s.isLoggedInUserGuest)(e)&&!(0,s.isLoggedInUserAssistant)(e))return l+r.URL_PATH_GOSM}function _(e={}){let t=(0,s.getLoggedInUserTrialData)(e);if(t&&!(t.daysRemaining<1))return l+r.URL_PATH_GETTING_STARTED_OVERVIEW}function d(e){if((0,s.isLoggedInUserGuest)(e))return;let{homepageUrl:t}=(0,s.getLoggedInUser)(e);return"".concat(t,"/search")}function A(e={}){if((0,s.isLoggedInUserAssistant)(e))return;let t=(0,s.getOwner)(e);return t?(0,g.getAccountSettingsUrl)({nickname:t.nickName}):void 0}function c(e={}){if((0,s.isLoggedInUserAssistant)(e))return;let t=(0,s.getOwner)(e);return t?"".concat(l).concat(r.URL_PATH_ADMIN_USER_INFO,"?NickName=").concat(t.nickName):void 0}function f(t={}){if((0,s.isLoggedInUserAssistant)(t))return;let n=(0,e.getExpansion)(t,(0,u.getNodeUri)(t),"Album");return n?"".concat(l).concat(r.URL_PATH_ADMIN_ALBUM_INFO,"?AlbumID=").concat(n.AlbumKey):void 0}function S(e={},t,r="NickName"){if((0,s.isLoggedInUserAdmin)(e)&&!(0,s.isLoggedInUserPageOwner)(e)){let{nickName:n}=(0,s.getOwner)(e)||{};n&&(t+="?".concat(r,"=").concat(n))}return t}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-header-constants","sm-page-constants","sm-page-feature-flag-constants","sm-page-selectors","sm-page-nodepage-constants","sm-page-nodepage-selectors","sm-controlpanel-helpers","sm-image-sizes"]});
YUI.add("sm-header-subscribe-button",(function(e){SM.currentModule="sm-header-subscribe-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),n=t("sm-header-tracking-helpers"),s=t("sm-header-constants");const u="https://".concat(SM.env.host.main).concat(s.URL_PATH_SUBSCRIBE),i=t=>{let{size:r,trackingContext:s,trialDaysRemaining:i,onClick:l,...o}=t,d=0===i?"I'm Sold!":"Subscribe";return e.default.createElement(a.default,babelHelpers.extends({href:u,size:r,skin:a.default.SKIN_ACCENT,onClick:l,"data-testid":"header_subscribe_button"},(0,n.getSubscribeTrackingAttrs)(d,s),o),d)};i.displayName="Header.SubscribeButton",i.defaultProps={size:a.default.SIZE_MEDIUM},i.propTypes={trackingContext:r.default.string.isRequired,trialDaysRemaining:r.default.number.isRequired,size:r.default.string,onClick:r.default.func},i.defaultProps={onClick:()=>{}};var l=i;exports.default=l}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-header-tracking-helpers","sm-header-constants"]});
YUI.add("sm-header-subscribe-cta-container",(function(e){SM.currentModule="sm-header-subscribe-cta-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),a=babelHelpers.interopRequireDefault(r("sm-header-subscribe-cta")),t=r("sm-page-selectors");var u=(0,e.connect)(e=>{let{daysRemaining:r}=(0,t.getLoggedInUserTrialData)(e);return{trialDaysRemaining:r}})(a.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-header-subscribe-cta","sm-page-selectors"]});
YUI.add("sm-header-subscribe-cta",(function(e){SM.currentModule="sm-header-subscribe-cta";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-analytics")),s=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-header-subscribe-button")),n=t("sm-header-tracking-helpers"),u=t("sm-header-constants");const i="https://".concat(SM.env.host.main).concat(u.URL_PATH_SUBSCRIBE),c=({trialDaysRemaining:t,onClick:a})=>{let u=1===t?"1 Day Left":"".concat(t," Days Left");return e.default.createElement("div",{className:"sm-page-header-subscribe"},e.default.createElement(s.default,babelHelpers.extends({noChrome:!0,className:"sm-page-header-trial-message",skin:s.default.SKIN_NONE,href:i,onClick:a,size:s.default.SIZE_SMALL,"data-testid":"header_daysleft_link"},(0,n.getSubscribeTrackingAttrs)(u,r.default.SCREEN_CONTEXTS.SECTION_HEADER)),u),e.default.createElement(l.default,{className:"sm-header-subscribe-button",trialDaysRemaining:t,trackingContext:r.default.SCREEN_CONTEXTS.SECTION_HEADER,size:s.default.SIZE_SMALL,onClick:a}))};c.displayName="Header.SubscribeCTA",c.propTypes={trialDaysRemaining:a.default.number.isRequired,onClick:a.default.func},c.defaultProps={onClick:()=>{}};var d=c;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-analytics","sm-component-button","sm-header-subscribe-button","sm-header-tracking-helpers","sm-header-constants"]});
YUI.add("sm-header-tracking-helpers",(function(e){SM.currentModule="sm-header-tracking-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackMenuOpenEvent=function(t){let{label:a,nodeId:n,nodeType:l}=t,d=e.default.Tracker.createEvent(e.default.CATEGORY.GLOBAL_NAV,e.default.ACTION.NAVIGATION_CLICK,{label:a});n&&l&&d.addContext(e.default.CONTEXT.NODE,{node_id:n,node_type:r.NODE_TYPE_TRACKING_VALUES[l]||null});return d.log()},exports.trackMenuItemEvent=function(t){return l({action:e.default.ACTION.MENU_ITEM_CLICK,...t})},exports.trackEvent=l,exports.getLinkTrackingAttrs=d,exports.getUserMenuLinkTrackingAttrs=function(t){return d({action:e.default.ACTION.MENU_ITEM_CLICK,property:n.TRACKING_PROPERTY_USER_MENU,...t})},exports.getSubscribeTrackingAttrs=function(t,a){return{"data-link-tracking-category":e.default.CATEGORY.SUBSCRIBE,"data-link-tracking-action":e.default.ACTION.TRIAL_START,"data-link-tracking-label":t,"data-link-tracking-contexts":JSON.stringify([{schema:e.default.CONTEXT.SCREEN,data:{section_name:a}}])}};var e=babelHelpers.interopRequireDefault(t("sm-analytics")),a=babelHelpers.interopRequireDefault(t("sm-page")),n=t("sm-header-constants"),r=t("sm-page-nodepage-constants");function l(t){let{action:n=e.default.ACTION.BUTTON_CLICK,category:r=e.default.CATEGORY.GLOBAL_NAV,label:l,nodeId:d,nodeType:o,property:i}=t,u=e.default.Tracker.createEvent(r,n,{label:l,property:i});return d&&o||!a.default.model||(d=a.default.model.get("NodeID"),o=a.default.model.getTypeName()),d&&o&&u.addContext(e.default.CONTEXT.NODE,{node_id:d,node_type:o}),u.log()}function d(t){let{action:a,category:n=e.default.CATEGORY.GLOBAL_NAV,label:l,nodeId:d,nodeType:o,property:i}=t,u={"data-link-tracking-category":n,"data-link-tracking-action":a,"data-link-tracking-label":l||null,"data-link-tracking-property":i||null};return d&&o&&(u["data-link-tracking-contexts"]=JSON.stringify([{schema:e.default.CONTEXT.NODE,data:{node_id:d,node_type:r.NODE_TYPE_TRACKING_VALUES[o]||null}}])),u}}(),SM.currentModule=null}),"",{requires:["sm-analytics","sm-page","sm-header-constants","sm-page-nodepage-constants"]});
YUI.add("sm-header",(function(e){SM.currentModule="sm-header";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("react")),r=babelHelpers.interopRequireDefault(a("prop-types")),l=babelHelpers.interopRequireDefault(a("classnames"));const t=a=>{let{children:r,className:t,skinnable:s,...u}=a,n=[t,"sm-page-header",{"sm-nui":!s}];return e.default.createElement("header",babelHelpers.extends({className:(0,l.default)(n),"data-testid":"global_page_header"},u),r)};t.displayName="Header",t.defaultProps={skinnable:!1},t.propTypes={skinnable:r.default.bool};var s=t;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames"]});
YUI.add("sm-hoc-get-display-name",(function(e){SM.currentModule="sm-hoc-get-display-name";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDisplayName=void 0;exports.getDisplayName=e=>e.displayName||e.name||"Component"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-icon",(function(e){SM.currentModule="sm-icon";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("classnames")),a=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("react")),o=babelHelpers.interopRequireDefault(r("sm-smuglog"));const t=r=>{let{className:a,name:o,size:n,...i}=r,c=(0,e.default)("sm-icon","sm-icon-".concat(o),"sm-icon-".concat(n),a),s=n===t.SIZE_LARGE?"30px":"18px",d="#sm-icon-def-".concat(n,"-").concat(o);return l.default.createElement("svg",babelHelpers.extends({className:c,height:s,role:"presentation",width:s},i),l.default.createElement("use",{href:d,xlinkHref:d}))};t.displayName="Icon",t.ICON_NAMES={large:["500px","Action","ActionAlt","Add","AddPhotos","Adjust","Alert","Alert2","Amazon","Android","AngleBracketDownSlim","AngleBracketLeftSlim","AngleBracketRightSlim","AngleBracketUpSlim","Apple","ArrowBack","ArrowNext","Blogger","Book","Browser","BrowserImage","CameraPhoto","CameraPhoto2","CheckmarkEncircled","Cart","Cart2","Check","Close","Comment","Comment2","CreativeCloud","CreditCard","Crop","CursorMove","Desktop","Download","Dropbox","Facebook","FacebookColored","FacebookSquare","Flickr","FlickrColored","Folder","Folder2","FullScreen","FullScreenExit","Gallery","Gallery2","Gift","GoogleColored","GoogleDrive","GooglePhotos","GooglePlus","Heart","HeartOutlined","HelpColored","HelpEncircled","HelpEncircled2","Hide","History","History2","Home","Home2","Image","ImageProcessing","InfoColored","InfoEncircled","InfoEncircled2","Instagram","Laptop","Layout","Lightbulb","Lightroom","LightroomCC","Link","Lock","Lock2","Mail","Menu","Mobile","MoreHoriz","MoreVert","NavigateBack","NavigateBackSlim","NavigateNext","NavigateNextSlim","Package","Paint","Pause","PaypalFull","People","People2","Person","Person2","PhoneOutline","PhoneSave","Pinterest","Play","PlayEncircled","Printer","Remove","Reset","Rotate","Search","Settings","Settings2","Share","SharePrivate","ShareWindows","Sizes","SmugMug","Star","Star2","Tablet","Trash","Trash2","Tumblr","Twitter","Upload","Upload2","Vault","View","Vimeo","Warning","WarningColored","WarningEncircled","Warning3Colored","Windows","Wrench","YouTube"],small:["Action","ActionAlt","ActionRedo","ActionUndo","AddPhotos","Adjust","Alert","Alert2","AngleBracketDown","AngleBracketDownSlim","AngleBracketLeft","AngleBracketLeftSlim","AngleBracketRight","AngleBracketRightSlim","AngleBracketUp","AngleBracketUpSlim","AspectOrient","AspectSquare","Browser","Calendar","CameraPhoto","CameraPhoto2","CameraVideo2","Cart","Cart2","CartAdd2","Checkmark","CheckmarkEncircled","CheckmarkEncircled2","Comment","Comment2","CopyClipboard","CreditCard","Crop","Desktop","Download","Edit","Edit2","Email","Email2","Embed","Enhance","Facebook","Flag","Flag2","Folder","Folder2","FolderSmart","FolderCollapse","FolderExpand","FolderOpen","FolderUpload","FullScreen","FullScreenExit","Gallery","Gallery2","GallerySmart","GalleryUser","Gear","Gift","Globe","GooglePlus","Heart","HeartOutlined","Help","HelpEncircled","Hide","History","History2","Home","Home2","Image","Image2","ImageProcessing","Info","InfoEncircled","InfoEncircled2","Key","Laptop","Layout","LettersAscending","LettersDescending","Lightbulb","Link","Location","Lock","Lock2","Logout","Mail","Menu","Menu2","Minus","MinusSlim","Mobile","MoreHoriz","MoreVert","NavigateBack","NavigateNext","NumbersAscending","NumbersDescending","Package","Page","Page2","PageSmart","Pause","Play","PlayEncircled","Plus","PlusSlim","Printer","RSS","Search","Search2","Share","ShareWindows","Sizes","Slideshow2","SmugMug","Star","StarOutlined","StyleCollageLandscape","StyleCollagePortrait","StyleJournal","StyleThumbs","StyleThumbs2","StyleThumbsImage","Sync","Tablet","Tag","Thumb","ThumbInfo","Trash","Trash2","Twitter","Upload","Upload2","User","Users","VideoCamera","View","Warning","Wrench","XCross"]},t.SIZE_LARGE="large",t.SIZE_SMALL="small",t.propTypes={className:a.default.oneOfType([a.default.arrayOf(a.default.string),a.default.string]),name:function(e,r,a){let l=e.size,n=e[r];if(-1===t.ICON_NAMES[l].indexOf(n))return o.default.error(a,'"'.concat(n,'" isn\'t a valid "').concat(l,'" icon.'))},size:a.default.oneOf([t.SIZE_LARGE,t.SIZE_SMALL])},t.defaultProps={size:t.SIZE_LARGE};var n=t;exports.default=n}(),SM.currentModule=null}),"",{requires:["classnames","react","sm-smuglog"]});
YUI.add("sm-image-exif-constants",(function(e){SM.currentModule="sm-image-exif-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMAGE_EXIF_FIELD_LABELS=exports.IMAGE_EXIF_LOCATION_EXCLUSION_FIELDS=exports.IMAGE_EXIF_METADATA_ENDPOINT_EXCLUSION_FIELDS=exports.IMAGE_EXIF_IMAGE_ENDPOINT_FIELDS=exports.IMAGE_EXIF_DEFAULT_FIELDS=exports.IMAGE_EXIF_SHOW_MORE_THRESHOLD=void 0;exports.IMAGE_EXIF_SHOW_MORE_THRESHOLD=8;exports.IMAGE_EXIF_DEFAULT_FIELDS=["Camera","Make","Lens","FocalLength","Aperture","Exposure","ISO","Copyright","DateTimeCreated","DateTimeOriginal"];const e=new Set(["FileName","Latitude","Longitude","OriginalHeight","OriginalSize","OriginalWidth"]);exports.IMAGE_EXIF_IMAGE_ENDPOINT_FIELDS=e;const i=new Set(["Caption","Keywords","Title","Uri","UriDescription","Uris","GPSLatitude","GPSLongitude","LatitudeReference","LongitudeReference","DateCreated","DateDigitized","DateTime","MicroDateTimeCreated","MicroDateTimeDigitized","TimeCreated"]);exports.IMAGE_EXIF_METADATA_ENDPOINT_EXCLUSION_FIELDS=i;const t=new Set(["Altitude","AltitudeReference","City","Country","CountryCode","Latitude","Longitude","State"]);exports.IMAGE_EXIF_LOCATION_EXCLUSION_FIELDS=t;exports.IMAGE_EXIF_FIELD_LABELS={DateTimeCreated:"Date Taken",DateTimeModified:"Date Modified",DateTimeOriginal:"Date Taken",Exposure:"Exposure Time",ExposureCompensation:"Exposure Bias",FileName:"Name",Make:"Camera",OriginalSize:"File Size",OriginalWidth:"Size"}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-image-exif-container",(function(e){SM.currentModule="sm-image-exif-container";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),r=babelHelpers.interopRequireDefault(a("sm-image-exif")),t=a("sm-api-redux-selectors");var u=(0,e.connect)((e,{albumImageUri:a})=>{let r=(0,t.getEntity)(e,a),u=(0,t.getExpansion)(e,a,"AlbumImageMetadata"),{Geography:i}=(0,t.getExpansion)(e,a,"Album");return{image:r,metadata:u,showLocationData:i}})(r.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-image-exif","sm-api-redux-selectors"]});
YUI.add("sm-image-exif-row",(function(e){SM.currentModule="sm-image-exif-row";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=t("sm-image-exif-utils");const l=({field:t,value:a})=>{let l=(0,r.getLabel)(t);return e.default.createElement("tr",{"data-metadata":l},e.default.createElement("th",{scope:"row",className:"sm-imageinfo-label"},l),e.default.createElement("td",{className:"sm-imageinfo-value sm-emphasized sm-text-break-word"},a))};l.displayName="ImageExif.Row",l.propTypes={field:a.default.string.isRequired,value:a.default.oneOfType([a.default.string,a.default.number]).isRequired};var u=l;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-image-exif-utils"]});
YUI.add("sm-image-exif-utils",(function(e){SM.currentModule="sm-image-exif-utils";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFormattedData=exports.formatData=exports.getMetadataFields=exports.getImageFields=exports.hasValue=exports.FORMATTERS=exports.getLabel=void 0;var e=babelHelpers.interopRequireDefault(t("sm-pretty-size")),a=t("lodash"),r=t("sm-image-exif-constants");exports.getLabel=e=>r.IMAGE_EXIF_FIELD_LABELS[e]?r.IMAGE_EXIF_FIELD_LABELS[e]:(0,a.startCase)(e);const i=[{getValue:e=>e.Camera?e.Camera:e.Make?"".concat(e.Make," ").concat(e.Model):"",field:["Camera","Make","Model"]},{getValue:e=>e.FocalLength&&e.FocalLength35mm?"".concat(e.FocalLength," (").concat(e.FocalLength35mm," in 35mm)"):e.FocalLength,field:["FocalLength","FocalLength35mm"]},{getValue:e=>+e.Aperture?"f/".concat(e.Aperture):e.Aperture,field:"Aperture"},{getValue:e=>{let t=e.Exposure;if(t){let e=function(e){let[t,a]=e.split(" ");void 0===a&&(a=t,t=0);let[r,i]=a.split("/");void 0===i&&(i=1);var l=+r/+i;l||(l=0),t=+t,t||(t=0);var o="".concat((+t+l).toFixed(5));return"".concat(+o)}("".concat(t));return"0"===e?t:"".concat(e,"s (").concat(t,")")}return""},field:"Exposure"},{getValue:e=>"".concat(e.OriginalWidth," x ").concat(e.OriginalHeight),field:["OriginalWidth","OriginalHeight"]},{getValue:t=>t.OriginalSize?"".concat((0,e.default)(t.OriginalSize)):"",field:"OriginalSize"},{getValue:e=>{for(let t of["DateTimeCreated","DateTimeOriginal"])if(e[t])return e[t].replace("T"," ");return""},field:["DateTimeCreated","DateTimeOriginal"]},{getValue:e=>{let t=e.DateTimeModified;return t?t.replace("T"," "):""},field:"DateTimeModified"},{getValue:e=>{let t=+e.Latitude;return t?"".concat(t.toFixed(5)):""},field:"Latitude"},{getValue:e=>{let t=+e.Longitude;return t?"".concat(t.toFixed(5)):""},field:"Longitude"},{getValue:e=>e.ExposureCompensation?"".concat(e.ExposureCompensation," EV"):"",field:"ExposureCompensation"}];exports.FORMATTERS=i;const l=e=>{if(!e)return!1;let t=typeof e;return"string"===t||"number"===t};exports.hasValue=l;const o=e=>{let t={};return r.IMAGE_EXIF_IMAGE_ENDPOINT_FIELDS.forEach(a=>{l(e[a])&&(t[a]=e[a])}),t};exports.getImageFields=o;const n=e=>{let t={};return Object.keys(e).forEach(a=>{r.IMAGE_EXIF_METADATA_ENDPOINT_EXCLUSION_FIELDS.has(a)||l(e[a])&&(t[a]=e[a])}),t};exports.getMetadataFields=n;const c=e=>{let t={...e};return i.forEach(({getValue:e,field:a})=>{let r,i=Array.isArray(a)?a:[a],o=e(t);l(o)?(i.forEach(e=>{r||!t[e]?delete t[e]:r=e}),r&&(t[r]=o)):i.forEach(e=>{delete t[e]})}),t};exports.formatData=c;exports.getFormattedData=(e,t,{showLocationData:a=!0}={})=>{let i=o(e),l=n(t),u=c({...l,...i});return a||r.IMAGE_EXIF_LOCATION_EXCLUSION_FIELDS.forEach(e=>{delete u[e]}),e.IsVideo&&delete u.OriginalSize,u}}(),SM.currentModule=null}),"",{requires:["sm-pretty-size","lodash","sm-image-exif-constants"]});
YUI.add("sm-image-exif",(function(e){SM.currentModule="sm-image-exif";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-busy")),s=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-smuglog")),i=t("sm-image-exif-constants"),n=t("sm-image-exif-utils"),o=babelHelpers.interopRequireDefault(t("sm-image-exif-row"));class d extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"state",{expanded:!1}),babelHelpers.defineProperty(this,"_onExpandClick",()=>{this.setState({expanded:!this.state.expanded})}),babelHelpers.defineProperty(this,"_renderFields",(t,a)=>a.map(a=>e.default.createElement(o.default,{key:a,field:a,value:t[a]})))}render(){let{image:t,metadata:a,showLocationData:o}=this.props;if(t&&!a&&r.default.add("sm-image-exif",{message:"Image EXIF UI loaded without metadata expansion"},r.default.LEVEL_WARNING),!t||!a)return e.default.createElement(l.default,null);let d,{expanded:u}=this.state,m=(0,n.getFormattedData)(t,a,{showLocationData:o}),p=Object.keys(m).sort((e,t)=>{let a=i.IMAGE_EXIF_DEFAULT_FIELDS.indexOf(e),l=i.IMAGE_EXIF_DEFAULT_FIELDS.indexOf(t);return-1!==a&&-1!==l?a-l:-1!==a?-1:1}),f=p.slice(0,i.IMAGE_EXIF_SHOW_MORE_THRESHOLD);return p.length>f.length&&(d=p.slice(i.IMAGE_EXIF_SHOW_MORE_THRESHOLD)),e.default.createElement("div",{className:"sm-imageinfo-container sm-text-mini"},e.default.createElement("table",null,e.default.createElement("tbody",null,this._renderFields(m,f),u&&!!d&&this._renderFields(m,d))),!!d&&e.default.createElement(s.default,{className:"sm-imageinfo-advanced-btn sm-button-full-width","data-testid":"camerainfo_showmore_button",noChrome:!0,onClick:this._onExpandClick},e.default.createElement("span",{className:"sm-label-large"},u?"Show Less":"Show More")))}}exports.default=d,babelHelpers.defineProperty(d,"displayName","ImageExif"),babelHelpers.defineProperty(d,"propTypes",{image:a.default.object,metadata:a.default.object,showLocationData:a.default.bool}),babelHelpers.defineProperty(d,"defaultProps",{showLocationData:!0})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-busy","sm-component-button","sm-smuglog","sm-image-exif-constants","sm-image-exif-utils","sm-image-exif-row"]});
YUI.add("sm-image-metadata-action-types",(function(A){SM.currentModule="sm-image-metadata-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STOP_EDITING=exports.START_EDITING=exports.SAVE_SUCCESS=exports.SAVE_START=exports.SAVE_FAILURE=void 0;exports.SAVE_FAILURE="IMAGE_METADATA_SAVE_FAILURE";exports.SAVE_START="IMAGE_METADATA_SAVE_START";exports.SAVE_SUCCESS="IMAGE_METADATA_SAVE_SUCCESS";exports.START_EDITING="IMAGE_METADATA_START_EDITING";exports.STOP_EDITING="IMAGE_METADATA_STOP_EDITING"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-image-metadata-actions",(function(t){SM.currentModule="sm-image-metadata-actions";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startEditing=function(){return{type:n.START_EDITING,...i(o.ACTION.BUTTON_CLICK)}},exports.stopEditing=function(){return{type:n.STOP_EDITING,...i(o.ACTION.CANCEL)}},exports.saveStart=u,exports.saveSuccess=c,exports.saveFailure=d,exports.saveImageMetadata=function(e,n){return o=>{let{title:i,caption:l,keywords:m}=n,p=Object.keys(n).sort().map(t=>t.charAt(0).toUpperCase()+t.slice(1));return o(u(p)),o((0,s.patchToAPI)({uri:e,data:{Caption:l,Title:i,KeywordArray:m}})).then(()=>o(c())).then(()=>n).catch(e=>(o(d()),t.default.add("sm-image-metadata-actions",(0,r.getSmugLogDataForRequestFailure)(e,"saveImageMetadata"),t.default.LEVEL_ERROR),o((0,a.addError)("There was an issue updating this photo. Copy your unsaved changes (so they’re not lost) and reload the page to try again. If the problem persists, contact our Support Heroes.",e))))}};var t=babelHelpers.interopRequireDefault(e("sm-smuglog")),a=e("sm-dialogs-actions"),s=e("sm-api-redux-actions"),r=e("sm-api-redux-utils"),n=e("sm-image-metadata-action-types"),o=e("sm-analytics-constants");const i=(t,e)=>({_internal:{analytics:{category:o.CATEGORY.LIGHTBOX_IMAGE_TOOL,action:t,label:e}}});function u(t){return{type:n.SAVE_START,...i(o.ACTION.SUBMIT,t)}}function c(){return{type:n.SAVE_SUCCESS}}function d(){return{type:n.SAVE_FAILURE}}}(),SM.currentModule=null}),"",{requires:["sm-smuglog","sm-dialogs-actions","sm-api-redux-actions","sm-api-redux-utils","sm-image-metadata-action-types","sm-analytics-constants"]});
YUI.add("sm-image-metadata-container",(function(e){SM.currentModule="sm-image-metadata-container";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),t=a("sm-image-metadata-selectors"),i=a("sm-page-selectors"),n=a("sm-image-metadata-actions"),o=babelHelpers.interopRequireDefault(a("sm-image-metadata"));var r=(0,e.connect)((e,a)=>{let{albumImageUri:n,showCaption:o,showFilename:r,showKeywords:s,showTitle:d,...m}=a;if(!n)return{};(0,t.isHideOwner)(e,n)&&(s=!1);let l={showTitle:d,showCaption:o,showKeywords:s,showFilename:r},{canEdit:u,caption:c,captionHTML:g,filenameHTML:M,isVideo:w,keywords:b,title:p,collectedFrom:S,collectedWebUri:h}=(0,t.getImageData)(e,n,l),v=((0,i.getOwner)(e)||{}).webUri;return d||o||s||(u=!1),{_albumImageUri:n,_canEdit:u,isEditing:(0,t.isEditing)(e),isSaving:(0,t.isSaving)(e),isVideo:w,albumAttributionName:S,albumAttributionUrl:h,caption:c,captionHTML:g,filenameHTML:M,keywords:b,title:p,ownerWebUri:v,...m}},e=>({onCancelEdit:()=>{e((0,n.stopEditing)())},_onEdit:()=>{e((0,n.startEditing)())},_onSave:(a,t,i)=>{e((0,n.saveImageMetadata)(a,t)).then(i)}}),(e,a,{onMetadataChange:t})=>{let{_albumImageUri:i,_canEdit:n,...o}=e,{_onSave:r,_onEdit:s,...d}=a,m={onSave:e=>{r(i,e,t)}};return n&&(m.onEdit=s),{...o,...d,...m}})(o.default);exports.default=r}(),SM.currentModule=null}),"",{requires:["react-redux","sm-image-metadata-selectors","sm-page-selectors","sm-image-metadata-actions","sm-image-metadata"]});
YUI.add("sm-image-metadata-display",(function(e){SM.currentModule="sm-image-metadata-display";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),i=babelHelpers.interopRequireDefault(t("sm-icon")),d=babelHelpers.interopRequireDefault(t("sm-component-keywords")),m=babelHelpers.interopRequireDefault(t("sm-link"));const n=t=>{let{albumAttributionName:a,albumAttributionUrl:n,captionHTML:r,filenameHTML:s,isVideo:u,keywords:o,onEdit:f,ownerWebUri:c,title:p}=t,b=o&&o.length>0,g=!(p||r||b);return e.default.createElement(e.default.Fragment,null,!!p&&e.default.createElement("h2",{"data-testid":"imagemetadata_title_text"},p),!!s&&e.default.createElement("p",{className:"sm-image-metadata-filename sm-text-mini","data-testid":"imagemetadata_filename_text"},s),!!r&&e.default.createElement("div",{className:"sm-image-metadata-caption","data-testid":"imagemetadata_caption_text",dangerouslySetInnerHTML:{__html:r}}),!!b&&e.default.createElement("div",{className:"sm-image-metadata-keywords"},e.default.createElement("h5",{className:"sm-flex sm-flex-items-center"},e.default.createElement(i.default,{className:"sm-label-icon",name:"Tag",size:i.default.SIZE_SMALL}),"Keywords"),e.default.createElement(d.default,{keywords:o,ownerWebUri:c,"data-testid":"imagemetadata_keywords_list"})),!!a&&!!n&&e.default.createElement("p",{className:"sm-image-metadata-attribution","data-testid":"imagemetadata_attribution_link"},"From ",e.default.createElement(m.default,{href:n},a)),!!f&&e.default.createElement(l.default,{className:"sm-image-metadata-edit-button sm-button-full-width",onClick:f,"data-testid":"imagemetadata_edit_button"},e.default.createElement(i.default,{name:"Edit",size:i.default.SIZE_SMALL}),e.default.createElement("span",{className:"sm-button-label"},"".concat(g?"Add":"Edit"," ").concat(u?"Video":"Photo"," Details"))))};n.displayName="ImageMetadata.Display",n.propTypes={canEdit:a.default.bool,isVideo:a.default.bool,albumAttributionName:a.default.string,albumAttributionUrl:a.default.string,captionHTML:a.default.string,filenameHTML:a.default.string,keywords:a.default.arrayOf(a.default.string),title:a.default.string,onEdit:a.default.func,ownerWebUri:a.default.string};var r=n;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-component-keywords","sm-link"]});
YUI.add("sm-image-metadata-form",(function(e){SM.currentModule="sm-image-metadata-form";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-busy")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),i=babelHelpers.interopRequireDefault(t("sm-component-overheadformfield")),r=babelHelpers.interopRequireDefault(t("sm-component-textarea")),s=babelHelpers.interopRequireDefault(t("sm-component-textbox")),o=babelHelpers.interopRequireDefault(t("sm-ua")),d=babelHelpers.interopRequireDefault(t("sm-panel-alert")),u=babelHelpers.interopRequireDefault(t("sm-dom-core"));const p=!(new o.default).isIOS;class m extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",{title:this.props.title,caption:this.props.caption,keywords:this.props.keywords&&this.props.keywords.join("; "),isCancelWarningVisible:!1}),babelHelpers.defineProperty(this,"_onFieldChange",e=>{let t=e.target.name,a=e.target.value;this.setState({[t]:a})}),babelHelpers.defineProperty(this,"_onSave",()=>{let{onCancel:e,onSave:t}=this.props,a=this._getChangedFields();Object.keys(a).length?t(a):e()}),babelHelpers.defineProperty(this,"_onCancel",()=>{let{onCancel:e}=this.props,t=this._getChangedFields();Object.keys(t).length?this.setState({isCancelWarningVisible:!0}):e()}),babelHelpers.defineProperty(this,"_onAlertCancel",()=>{this.setState({isCancelWarningVisible:!1})}),babelHelpers.defineProperty(this,"_onSubmit",e=>{e.preventDefault(),this._onSave()}),babelHelpers.defineProperty(this,"_onEscapeKeyCancel",e=>{27===e.keyCode&&this._onCancel()}),babelHelpers.defineProperty(this,"_getChangedFields",()=>{let{caption:e,keywords:t,title:a}=this.state,{caption:l,keywords:n,title:i}=this.props,r={};if(void 0!==a&&a.trim()!==i&&(r.title=a.trim()),void 0!==e&&e.trim()!==l&&(r.caption=e.trim()),void 0!==t&&t.trim()!==n.join("; ")){let e=t.split(/[;,]+/);r.keywords=e.map(e=>e.trim()).filter(e=>e)}return r})}componentDidMount(){u.default.doc.addEventListener("keydown",this._onEscapeKeyCancel,!1)}componentWillUnmount(){u.default.doc.removeEventListener("keydown",this._onEscapeKeyCancel,!1)}render(){let{onCancel:t,isSaving:a}=this.props,{caption:o,keywords:u,title:m,isCancelWarningVisible:c}=this.state,f={disabled:a,onChange:this._onFieldChange},b=void 0!==m,h=void 0!==o,y=void 0!==u;return e.default.createElement("form",{onSubmit:this._onSubmit},b&&e.default.createElement(i.default,{label:"Title"},e.default.createElement(s.default,babelHelpers.extends({autoFocus:p,"data-testid":"imagemetadata_title_input",name:"title",type:"text",value:m},f))),h&&e.default.createElement(i.default,{label:"Caption"},e.default.createElement(r.default,babelHelpers.extends({autoFocus:p&&!b,"data-testid":"imagemetadata_caption_textarea",className:"sm-image-metadata-caption-form-field",name:"caption",value:o},f))),y&&e.default.createElement(i.default,{label:"Keywords"},e.default.createElement(s.default,babelHelpers.extends({autoFocus:p&&!b&&!h,"data-testid":"imagemetadata_keywords_input",name:"keywords",type:"text",value:u},f))),e.default.createElement("div",{className:"sm-form-field-overhead"},!!a&&e.default.createElement("div",{className:"sm-flex sm-flex-justify-center"},e.default.createElement(l.default,null)),!a&&e.default.createElement("div",{className:"sm-button-equal-width-set"},e.default.createElement(n.default,{size:n.default.SIZE_SMALL,onClick:this._onCancel,skin:n.default.SKIN_SECONDARY,disabled:a,"data-testid":"imagemetadata_cancel_button"},"Cancel"),e.default.createElement(n.default,{size:n.default.SIZE_SMALL,onClick:this._onSave,skin:n.default.SKIN_ACCENT,disabled:a,"data-testid":"imagemetadata_update_button",type:"submit"},"Save")),!!c&&e.default.createElement(d.default,{title:"Are you sure you want to cancel?",cancelLabel:"Continue Editing",confirmLabel:"Discard Changes",onCancel:this._onAlertCancel,onConfirm:t},e.default.createElement("p",null,"All changes will be lost."))))}}exports.default=m,babelHelpers.defineProperty(m,"displayName","ImageMetadata.Form"),babelHelpers.defineProperty(m,"propTypes",{caption:a.default.string,keywords:a.default.arrayOf(a.default.string),title:a.default.string,isSaving:a.default.bool,onCancel:a.default.func.isRequired,onSave:a.default.func.isRequired}),babelHelpers.defineProperty(m,"defaultProps",{isSaving:!1})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-busy","sm-component-button","sm-component-overheadformfield","sm-component-textarea","sm-component-textbox","sm-ua","sm-panel-alert","sm-dom-core"]});
YUI.add("sm-image-metadata-reducers",(function(e){SM.currentModule="sm-image-metadata-reducers";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=exports.imageMetadataUiReducer=void 0;var e=a("sm-image-metadata-action-types");const t=(a={saving:!1,editing:!1},t)=>{switch(t.type){case e.START_EDITING:return{...a,editing:!0};case e.STOP_EDITING:return{...a,editing:!1};case e.SAVE_START:return{...a,saving:!0};case e.SAVE_SUCCESS:return{...a,saving:!1,editing:!1};case e.SAVE_FAILURE:return{...a,saving:!1}}return a};exports.imageMetadataUiReducer=t;exports.UI=(e={},a)=>{let{imageMetadata:r={}}=e;return{...e,imageMetadata:{...e.imageMetadata,...t(r,a)}}}}(),SM.currentModule=null}),"",{requires:["sm-image-metadata-action-types"]});
YUI.add("sm-image-metadata-selectors",(function(e){SM.currentModule="sm-image-metadata-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageData=exports.isHideOwner=exports.isSaving=exports.isEditing=exports.getUIState=void 0;var e=t("sm-api-redux-selectors");const i=e=>{let{ui:{imageMetadata:t={}}={}}=e;return t};exports.getUIState=i;exports.isEditing=e=>{let{editing:t=!1}=i(e);return t};exports.isSaving=e=>{let{saving:t=!1}=i(e);return t};exports.isHideOwner=(t,i)=>{let{HideOwner:r=!1}=(0,e.getExpansion)(t,i,"Album")||{};return r};exports.getImageData=(t,i,{showTitle:r=!0,showCaption:a=!0,showKeywords:o=!0,showFilename:n=!1}={})=>{let{CanEdit:s,Caption:l,CollectedFrom:d,CollectedWebUri:u,IsVideo:m,KeywordArray:c,ShowKeywords:g,Title:M,FormattedValues:{Caption:{html:w}={},FileName:{html:S}={}}={}}=(0,e.getEntity)(t,i),p={canEdit:s,collectedFrom:d,collectedWebUri:u,isVideo:m};return r&&(p.title=M),a&&(p.caption=l,p.captionHTML=w),n&&(p.filenameHTML=S),g&&o&&(p.keywords=c),p}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors"]});
YUI.add("sm-image-metadata",(function(e){SM.currentModule="sm-image-metadata";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("sm-image-metadata-display")),l=babelHelpers.interopRequireDefault(t("sm-image-metadata-form"));const r=t=>{let{albumAttributionName:a,albumAttributionUrl:r,caption:n,captionHTML:d,emptyPlaceholder:u,filenameHTML:o,isEditing:s,isSaving:m,isVideo:f,keywords:c,onCancelEdit:p,onEdit:b,onSave:g,ownerWebUri:M,title:v}=t;if(s)return e.default.createElement("div",{className:"sm-image-metadata"},e.default.createElement(l.default,{caption:n,isSaving:m,keywords:c,onCancel:p,onSave:g,title:v}));let y=!(v||d||o||a||c&&c.length>0);return e.default.createElement("div",{className:"sm-image-metadata sm-text-break-word"},y&&u,e.default.createElement(i.default,{albumAttributionName:a,albumAttributionUrl:r,captionHTML:d,filenameHTML:o,isVideo:f,keywords:c,ownerWebUri:M,onEdit:b,title:v}))};r.displayName="ImageMetadata",r.propTypes={isEditing:a.default.bool,isSaving:a.default.bool,isVideo:a.default.bool,albumAttributionName:a.default.string,albumAttributionUrl:a.default.string,caption:a.default.string,captionHTML:a.default.string,filenameHTML:a.default.string,keywords:a.default.arrayOf(a.default.string),title:a.default.string,onEdit:a.default.func,onCancelEdit:a.default.func,onSave:a.default.func,ownerWebUri:a.default.string,emptyPlaceholder:a.default.element},r.defaultProps={isEditing:!1,isSaving:!1,isVideo:!1};var n=r;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-image-metadata-display","sm-image-metadata-form"]});
YUI.add("sm-image-model",(function(e){SM.currentModule="sm-image-model";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("sm-redux-store")),a=t("sm-favorite-actions"),l=t("sm-api-redux-selectors"),r=t("sm-api-redux-actions"),n=babelHelpers.interopRequireDefault(t("sm-model-sync-api")),s={O:{},"5K":{width:5120,height:5120},"4K":{width:3840,height:3840},X5:{width:2560,height:2560},X4:{width:2048,height:2048},X3:{width:1600,height:1200},X2:{width:1280,height:960},XL:{width:1024,height:768},L:{width:800,height:600},M:{width:600,height:450},S:{width:400,height:300},Th:{width:150,height:150},Ti:{width:100,height:100},1920:{width:1920,height:1080},1280:{width:1280,height:720},640:{width:640,height:480},320:{width:320,height:240}},u=["S","320","Th","Ti"],g=["O","5K","4K","X5","X4","X3","X2","XL","L","M","S","Th","Ti"],o=["O","1920","1280","640","320"],S={Ti:"ImageSizeTiny",Th:"ImageSizeThumb",S:"ImageSizeSmall",M:"ImageSizeMedium",L:"ImageSizeLarge",XL:"ImageSizeXLarge",X2:"ImageSizeX2Large",X3:"ImageSizeX3Large",X4:"ImageSizeX4Large",X5:"ImageSizeX5Large","4K":"ImageSize4K","5K":"ImageSize5K",O:"ImageSizeOriginal"};const h=e.Base.create("sm-image-model",e.Model,[n.default,e.ModelRelate],{idAttribute:"ImageKey",apiEndpoint:"image",getUrlForSize:function(e){return h.getUrl(this,e)},getImageSize:function(e){return h.getUsableSize(this,e)},getLargestImageSize:function(e){return e=void 0!==e?e:null,this._getLargestSize(e,!1)},getLargestVideoSize:function(e){return e=void 0!==e?e:null,this._getLargestSize(e,!0)},getLargestImageSizeForContainer:function(e,t,i){return t=void 0!==t?t:null,this._getLargestSizeForContainer(e,t,i,!1)},getLargestVideoSizeForContainer:function(e,t){return this.get("IsVideo")?(t=void 0!==t?t:null,this._getLargestSizeForContainer(e,t,"auto",!0)):null},getTemplateConfigForSize:function(t){var i=["sm-image"],a=this.getImageSize(t);return this.get("Status")===e.SM.Models.Image.STATUSES.PROCESS&&i.push("sm-image-processing"),this.get("IsArchive")&&i.push("sm-image-archive"),{dataAttrs:{},classNames:i,url:this.getUrlForSize(t),width:a.width,height:a.height}},_getLargestSize:function(e,t){var i;return i=this.get("Status")===h.STATUSES.PROCESS?h.PROCESSING_IMAGE_SIZES:this.get("Sizes"),h.getLargestSize(e,i,t)},_getLargestSizeForContainer:function(e,t,i,a){var l=this.get("Status")===h.STATUSES.PROCESS?h.PROCESSING_IMAGE_SIZES:this.get("Sizes"),r=null,n=a?o:g,s=n.length-1,u=!1,S=!1,m=null,d=1;if(i||(i="auto"),("number"!=typeof t||t<=0)&&(u=!0),!a&&window.devicePixelRatio&&window.devicePixelRatio>1&&(e*=d=window.devicePixelRatio,t*=d),"auto"===i&&(e<100||t<100&&!u))return d>1?"Th":"Ti";for(;s>=1;s--)if((r=l[n[s]])&&r.usable&&("fit"===i?(r.width>=e||!u&&r.height>=t)&&(m=n[s],S=!0):"fill"===i?(u&&r.width>=e||r.width>=e&&r.height>=t)&&(m=n[s],S=!0):(r.width>e||r.height>t&&!u)&&(m=n[s+1])&&(S=!0),S))return this._getLargestSize(m,a);return this._getLargestSize(m,a)},loadExif:function(){var t=this,i=this.get("exif");return new e.Promise((function(a){if(i)a(i);else{var l=l||new e.SM.API;l.sendRequest({method:"rpc.image.getinfo",data:{imageId:t.get("ImageID"),imageKey:t.get("ImageKey")},callback:{success:function(i){var l=i.response.results,r=e.Lang.isUndefined(l.Exif)?null:l.Exif;r&&(t.set("exif",r),a(r))}},cfg:{method:"POST"}})}}))},toggleFavorite:async function(){let e=!this.get("IsFavorite");this.set("IsFavorite",e);let t=this.getAlbumImageUri();(0,l.getEntity)(i.default.getState(),t)||await i.default.dispatch((0,r.fetchFromAPI)({uri:t}));let n=(0,l.getExpansionUri)(i.default.getState(),t,"AlbumImageFavorite");i.default.dispatch((0,a.setFavorite)(n,t,e,"Gallery"))},collect:function(t){if(t>0){var i=i||new e.SM.API;return i.sendRequest({method:"rpc.image.update",data:{imageId:this.get("ImageID"),imageKey:this.get("ImageKey"),collectToAlbumId:t,action:"collect"},freshRequest:!0,callback:{success:function(e){},context:this},cfg:{method:"POST"}})}},preLoadForContainerSize:function(e,t){var i=this.getLargestImageSizeForContainer(e,t);this.preLoadSize(i)},preLoadSize:function(e){var t=this.getUrlForSize(e);(new h).src=t},like:function(){var t=this;return new e.Promise((function(i){t.get("Liked")?i():e.SM.Page.api.sendRequest({method:"rpc.image.like",data:{ImageID:t.get("ImageID"),ImageKey:t.get("ImageKey")},cfg:{method:"POST"},callback:{success:function(e){t.set("Liked",!0),i()}}})}))},fakeImageSizeDetails:function(){var e,t=this.get("Sizes"),i={ImageUrlTemplate:this.getUrlForSize("#size#")};for(var a in t)(e=S[a])&&Object.prototype.hasOwnProperty.call(t,a)&&t[a].usable&&(i[e]={Width:t[a].width,Height:t[a].height,Url:this.getUrlForSize(a)});return i},getImageUri:function(){let e=this.get("ImageKey"),t=this.get("Serial")||0;return"/api/v2/image/".concat(e,"-").concat(t)},getAlbumImageUri:function(){let e=this.get("AlbumKey"),t=this.get("ImageKey"),i=this.get("Serial")||0;return"/api/v2/album/".concat(e,"/image/").concat(t,"-").concat(i)},hasRequestedExpansions:function(e={}){let t=this._requestedAPIv2Expansions;return Array.isArray(e)||(e=Object.keys(e).filter(t=>e[t])),!(!t||!e.every(e=>t.has(e)))},addRequestedExpansions:function(e={}){let t=this._requestedAPIv2Expansions||[];Array.isArray(e)||(e=Object.keys(e).filter(t=>e[t])),this._requestedAPIv2Expansions=new Set([...t,...e])},clearRequestedExpansions:function(e){e&&this._requestedAPIv2Expansions?(Array.isArray(e)||(e=Object.keys(e).filter(t=>e[t])),e.forEach(e=>{this._requestedAPIv2Expansions.delete(e)})):this._requestedAPIv2Expansions=null}},{ATTRS:{ImageID:{value:null},ImageKey:{value:null},Title:{value:null},AlbumID:{value:null},FileName:{value:null},Keywords:{value:null},Status:{value:null},Format:{value:null},IsProtected:{value:!1},Serial:{value:null},ShowFilename:{value:null},SEOFilename:{value:null},URLFilename:{value:null},Origin:{value:null},Latitude:{value:null},Longitude:{value:null},Sizes:{getter:function(e){return this.get("Status")===h.STATUSES.PROCESS?h.PROCESSING_IMAGE_SIZES:e},value:null},BaseUrl:{value:null},IsFavorite:{value:null},Archived:{value:null},ArchiveUrl:{value:null},IsVideo:{value:null},IsVault:{value:null},IsEZProject:{value:null},Caption:{value:null},CaptionRaw:{value:null},CaptionText:{value:null},CanBuy:{value:null},CanDownload:{value:null},NewKey:{value:null},GalleryUrl:{value:null},UrlSignature:{value:null},LightboxUrl:{value:null}},FORMATS:{ARC:"arc",GIF:"gif",JPEG:"jpeg",JPG:"jpg",MP4:"mp4",PNG:"png"},IMAGE_SIZES_SORTED:g,PROCESSING_IMAGE_SIZES:{Ti:{width:100,height:100,usable:!0},Th:{width:150,height:150,usable:!0},S:{width:300,height:300,usable:!0},M:{width:450,height:450,usable:!0},L:{width:600,height:600,usable:!0},XL:{width:768,height:768,usable:!0},X2:{width:960,height:960,usable:!0},X3:{width:1200,height:1200,usable:!0}},PROCESSING_IMAGE_URL:"//cdn.smugmug.com/img/processing-NeXT-{size}.png",RELATIONSHIPS:{Album:{key:"AlbumID",relatedKey:"AlbumID",type:"toOne",relatedModel:"SM.Models.Album"}},SIZES:s,SIZES_SORTED:["O","5K","4K","X5","X4","1920","X3","X2","1280","XL","L","640","M","S","320","Th","Ti"],STATUSES:{OPEN:"Open",PROCESS:"Preprocess",HIDDEN:"Hidden"},signedImageUrlFormat:"{base}i-{imageKey}/{serial}/{signature}/{size}/{name}{fileNameSize}.{ext}",newImageUrlFormat:"{base}i-{imageKey}/{serial}/{size}/{name}{fileNameSize}.{ext}",oldImageUrlFormat:"{base}{name}/{imageId}_{imageKey}-{size}{serial}.{ext}",getHighlightUrl:function(t,i){if(t._isYUIModel&&(t=t.toJSON()),t.HLImageUrl&&t.HLImageSize===i)return t.HLImageUrl;if(!t.HLImageID||!t.HLImageKey)return null;i||(i="Th");var a=t.Url;return/\/$/.test(a)||(a+="/"),e.Lang.sub(h.newImageUrlFormat,{base:a,ext:"jpg",fileNameSize:"O"===i?"":"-"+i,imageId:t.HLImageID,imageKey:t.HLImageKey,name:"hl",serial:"0",size:i})},getLargestStandardSize:function(e,t,i,a){var l,r;if(t||0===t||(l=!0),window.devicePixelRatio&&window.devicePixelRatio>1&&(e*=r=window.devicePixelRatio,t*=r),e<100||t<100&&!l)return r>1?"Th":"Ti";for(var n,u,S=i?o:g,h=S.length-1;h>0;h--)if((u=s[S[h]]).width>e||u.height>t&&!l){n=a?S[h]:S[h+1];break}return n||S[1]},getUrl:function(t,i){if(t._isYUIModel&&(t=t.toJSON()),t.Status===h.STATUSES.PROCESS)return e.Lang.sub(h.PROCESSING_IMAGE_URL,{size:h.PROCESSING_IMAGE_SIZES[i]?i:"S"});var a,l,r;if(i||(i="S"),a={base:t.BaseUrl,fileNameSize:"O"===i?"":"-"+i,imageId:t.ImageId,imageKey:t.ImageKey,signature:t.UrlSignature,name:t.URLFilename,size:i},!/^[0-9]+x[0-9]+$/.test(i)&&"#size#"!==i&&("D"===i.charAt(i.length-1)?t.Format===h.FORMATS.MP4?(l="320",a.fileNameSize="D",a.size=h.getLargestSize(null,t.Sizes,!0)+"D"):l="O":l=i,(r=h.getUsableSize(t,l)).url&&"D"!==a.fileNameSize))return r.url;var n=!!t.NewKey,s=t.Serial,u=h[n?"newImageUrlFormat":"oldImageUrlFormat"];return t.UrlSignature&&(u=h.signedImageUrlFormat),n||(s=s>0?"-"+s:""),e.Lang.sub(u,e.merge(a,{ext:r&&r.ext||"jpg",serial:s}))},getUsableSize:function(e,t){var i,a=(i=(e._isYUIModel?e.get("Status"):e.Status)===h.STATUSES.PROCESS?h.PROCESSING_IMAGE_SIZES:e._isYUIModel?e.get("Sizes"):e.Sizes)[t];return a&&a.usable?a:i.S},getLargestSize:function(t,i,a){var l=!0===a?"320":"S",r=0,n=!0===a?o:g,s=n.length;if(t=t||(!0===a?"1920":"X3"),-1!==e.Array.indexOf(u,t))return t;for((r=e.Array.indexOf(n,t))<0&&(r=1);r<s;r++)if(i[n[r]]&&i[n[r]].usable){l=n[r];break}return l}});e.namespace("SM.Models").Image=h;var m=h;exports.default=m}(),SM.currentModule=null}),"",{requires:["base","model","model-relate","promise","sm-api","sm-model-sync-api","sm-redux-store","sm-favorite-actions","sm-api-redux-selectors","sm-api-redux-actions"]});
YUI.add("sm-image-preloader-deprecated",(function(e){SM.currentModule="sm-image-preloader-deprecated";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const e=SM.import("sm-dom"),r=SM.import("sm-resource-core"),t=SM.import("sm-smuglog");let o,s=Object.create(null),i=Object.create(null),n=[],a=module.exports={add(...e){if(a._disabled)return;let r=e.filter(e=>e&&!("string"==typeof e&&s[e])).map(e=>"string"==typeof e?()=>Promise.resolve(e):e);r.length&&(n.unshift(...r),d())},prefetch(e){let t=[];return e.forEach(e=>{i[e]||(t.push(e),i[e]=!0)}),t.length?r.postUri("/api/v2!prefetch",{data:{ImageUrls:t},io:{query:["_prefetchImages=only","_verbosity=1"],verbose:!1}}):Promise.resolve()}};function m(e){let r=e.target;"error"===e.type&&(t.error("sm-image-preloader-deprecated",{message:"Error preloading image.",imageUrl:r.src}),s[r.src]=!1),r.removeEventListener("error",m),r.removeEventListener("load",m),d()}function l(){o=clearTimeout(o);let r=n.shift();r&&r().then(r=>{if(s[r])return void l();s[r]=!0;let t=e.doc.createElement("img");t.addEventListener("error",m),t.addEventListener("load",m),t.src=r}).catch(e=>{t.error("sm-image-preloader-deprecated",{message:"Image preload function resulted in an error.",error:e})})}function d(){o||(o=setTimeout(l,20))}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-resource-core","sm-smuglog"]});
YUI.add("sm-image-preloader",(function(e){SM.currentModule="sm-image-preloader";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("react")),l=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("sm-dom-network-info")),t=babelHelpers.interopRequireDefault(r("sm-dom-supports-link-rel"));class o extends e.default.PureComponent{render(){let{props:r}=this;if(r.saveData)return null;let l=Array.from(new Set(r.preloadUrls));if(r.useLinkPreload)return l.map(r=>r?e.default.createElement("link",{rel:"preload",as:"image",href:r,importance:"low",key:r}):null);let a={height:0,position:"absolute",visibility:"hidden",width:0};return l.map(r=>r?e.default.createElement("img",{alt:"",decoding:"async",importance:"low",key:r,src:r,style:a}):null)}}exports.default=o,babelHelpers.defineProperty(o,"displayName","ImagePreloader"),babelHelpers.defineProperty(o,"propTypes",{preloadUrls:l.default.arrayOf(l.default.string),saveData:l.default.bool,useLinkPreload:l.default.bool}),babelHelpers.defineProperty(o,"defaultProps",{preloadUrls:[],saveData:a.default.saveData,useLinkPreload:(0,t.default)("preload")})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-dom-network-info","sm-dom-supports-link-rel"]});
YUI.add("sm-image-sizes-external",(function(e){SM.currentModule="sm-image-sizes-external";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=class{constructor(e){e.isSmugMugResource?this._resourceDetails=e.get("ResourceDetails"):this._resourceDetails=e}cover(){let e;return e=this._isPortrait()?{maxWidth:"100%"}:{maxHeight:"100%"},{style:e,Url:this._resourceDetails.PreviewUrl}}_isPortrait(){let e=this._resourceDetails,{OriginalHeight:r,OriginalWidth:t}=e;return r||t?r>t:null}}}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-image-sizes",(function(e){SM.currentModule="sm-image-sizes";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),i=babelHelpers.interopRequireDefault(t("sm-deep-freeze"));class a{constructor(e,t={}){e.isSmugMugResource?this._imageSizeDetails=e.get():this._imageSizeDetails=e,this._cache={},this._pixelRatio=t.pixelRatio||a.DEVICE_PIXEL_RATIO}canGenerateCustomSize(e={}){if(e.type&&e.type!==a.TYPE_PHOTO)return!1;let t=this._cache.canGenerateCustomSize;if(void 0===t){let e=this._imageSizeDetails.ImageUrlTemplate;this._cache.canGenerateCustomSize=t=!(!e||e.toLowerCase().endsWith(".gif"))}return t}containWithin(e,t,i={}){i=Object.assign({allowCustomSize:!0,allowPixelRatioOverride:!1,type:a.TYPE_PHOTO},i);let l=this.getSortedSizes(i);if(!l.length)return null;let s=l[l.length-1],h=i.allowCustomSize&&this.canGenerateCustomSize(i),r=i.allowSquareSize||t===e||s.Height===s.Width;t=Math.min(a.MAX_SIZE,t),e=Math.min(a.MAX_SIZE,e),t*=this._pixelRatio,e*=this._pixelRatio;let o=l.find(i=>("ImageSizeOriginal"!==i.Name||!h)&&(!(i.Height===i.Width&&!r)&&(i.Height>=t||i.Width>=e)));if(h&&(!o||o.Width<e&&o.Height<t)&&(s.Height>=t||s.Width>=e)){let i=a.scaleDown(s.Width,s.Height,e,t);return this.getCustomSize(i.width,i.height)}let n=this._pixelRatio;o||(o=l[l.length-1],n>1&&i.allowPixelRatioOverride&&o.Width<=e&&o.Height<=t&&(e/=this._pixelRatio,t/=this._pixelRatio,n=1));let g=a.scaleDown(o.Width,o.Height,e,t);return a.applyPixelRatio(Object.assign({},o,{DisplayHeight:g.height,DisplayWidth:g.width,PixelRatio:1}),n)}cover(e,t,i={}){i=Object.assign({allowCustomSize:!0,allowPixelRatioOverride:!1,type:a.TYPE_PHOTO},i);let l=this.getSortedSizes(i);if(!l.length)return null;let s=l[l.length-1],h=i.allowCustomSize&&this.canGenerateCustomSize(i),r=i.allowSquareSize||t===e||s.Height===s.Width;t=Math.min(a.MAX_SIZE,t),e=Math.min(a.MAX_SIZE,e),t*=this._pixelRatio,e*=this._pixelRatio;let o=l.find(i=>("ImageSizeOriginal"!==i.Name||!h)&&(!(i.Height===i.Width&&!r)&&(i.Height>=t&&i.Width>=e)));if(!o&&h&&s.Height>=t&&s.Width>=e){let i=a.scaleDown(s.Width,s.Height,e,t,{cover:!0});return this.getCustomSize(i.width,i.height)}let n=this._pixelRatio;o||(o=s,n>1&&i.allowPixelRatioOverride&&o.Width<=e&&o.Height<=t&&(e/=this._pixelRatio,t/=this._pixelRatio,n=1));let g=a.scaleDown(o.Width,o.Height,e,t,{cover:!0});return a.applyPixelRatio(Object.assign({},o,{DisplayHeight:g.height,DisplayWidth:g.width,PixelRatio:1}),n)}getAspectRatio(e={}){let t=this.getLargestSize(e);return t?t.Width/t.Height:null}getCustomSize(e,t,{exact:i=!1,enlargeForPixelRatio:l=!1}={}){if(!this.canGenerateCustomSize()||!isFinite(e)||!isFinite(t))return null;let s="";return i&&(s="!"),l&&(e=Math.floor(e*this._pixelRatio),t=Math.floor(t*this._pixelRatio)),a.applyPixelRatio(Object.assign({},this.getLargestSize(),{DisplayHeight:t,DisplayWidth:e,Height:t,Name:"ImageSizeCustom",PixelRatio:1,Size:0,Width:e,Url:this._imageSizeDetails.ImageUrlTemplate.replace(/#size#/g,"".concat(e,"x").concat(t).concat(s))}),this._pixelRatio)}getLargestSize(e={}){let t=this._cache.getLargestSize||(this._cache.getLargestSize={}),{type:l=a.TYPE_PHOTO,allowOwnerOriginals:s=!1}=e,h="".concat(l,"-").concat(s);if(void 0===t[h]){let a=this._getLargestSize(e);t[h]=a&&(0,i.default)(a)}return t[h]}getSizes(e={}){let t=this._cache.getSizes||(this._cache.getSizes={}),{type:l=a.TYPE_PHOTO,allowOwnerOriginals:s=!1}=e,h="".concat(l,"-").concat(s);return t[h]||(t[h]=(0,i.default)(this._getSizes(e))),t[h]}getSortedSizes(e={}){let t=this._cache.getSortedSizes||(this._cache.getSortedSizes={}),{type:l=a.TYPE_PHOTO,allowOwnerOriginals:s=!1}=e,h="".concat(l,"-").concat(s);return t[h]||(t[h]=(0,i.default)(this._getSortedSizes(e))),t[h]}_getLargestSize(e={}){let t=this.getSizes(e);if(!t.length)return null;let i=t.reduce((e,t)=>e?t.Width*t.Height>e.Width*e.Height?t:e:t);return i?a.applyPixelRatio(i,this._pixelRatio):null}_getSizes(e={}){let t=this._imageSizeDetails,i=[],{type:l=a.TYPE_PHOTO,allowOwnerOriginals:s=!1}=e;return t.UsableSizes.forEach(e=>{e.endsWith("Original")&&!s&&t[e].OwnerOnly||e.startsWith(l)&&i.push(a.applyPixelRatio(Object.assign({Name:e},t[e]),this._pixelRatio))}),i}_getSortedSizes(e={}){let t=this.getSizes(e).concat();return t.sort((e,t)=>e.Width*e.Height-t.Width*t.Height),t}static applyPixelRatio(e,t=a.DEVICE_PIXEL_RATIO){let i=1,l=e.Height,s=e.Width;return e.DisplayHeight&&e.DisplayWidth&&(i=e.PixelRatio||1,l=e.DisplayHeight,s=e.DisplayWidth),Object.assign({},e,{DisplayHeight:Math.floor(l*i/t),DisplayWidth:Math.floor(s*i/t),PixelRatio:t})}static scaleDown(e,t,i,l,s={}){t=Math.min(a.MAX_SIZE,t),e=Math.min(a.MAX_SIZE,e),l=Math.min(l,t),i=Math.min(i,e);let h=Math[s&&s.cover?"max":"min"](i/e,l/t);return{height:Math.floor(t*h),width:Math.floor(e*h)}}}exports.default=a,a.DEVICE_PIXEL_RATIO=e.default.win.devicePixelRatio||1,a.MAX_SIZE=99999,a.TYPE_PHOTO="ImageSize",a.TYPE_VIDEO="VideoSize"}(),SM.currentModule=null}),"",{requires:["sm-deep-freeze","sm-dom","sm"]});
YUI.add("sm-image-stack",(function(e){SM.currentModule="sm-image-stack";var a,t;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;a=e.config.doc,t={render:function(t,r,s,i,n){n||(n={});var m,c,l=a.createDocumentFragment(),d=a.createElement("div"),o=Math.min(this.maxStackSize,r),p=4*(o-1);d.className="sm-image-stack-wrapper",d.style.marginBottom=p+"px",d.style.marginRight=p+"px";for(var u=o-1;u>=0;--u)m=a.createElement("div"),0===u&&(m.style.backgroundImage="url("+t+")"),m.className="sm-image-stack-image",m.style.width=s+"px",m.style.height=i+"px",c="translate("+4*u+"px, "+4*u+"px)",m.style.msTransform=c,m.style.webkitTransform=c,m.style.transform=c,l.appendChild(m);return r>this.maxStackSize&&new e.Node(l.lastChild).appendChild('<div class="sm-image-stack-info sm-text-mini">').set("text",r),d.appendChild(l),n.container?n.container.appendChild(d):d},maxStackSize:4},e.namespace("SM").ImageStack=t,SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-image-template",(function(a){SM.currentModule="sm-image-template";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a.Template.Micro,e=/[^a-zA-Z0-9-]/g,i=t.compile('data-<%= data.name %>="<%= data.value %>"'),l=t.compile('<div role="img" <%== data._attrs %> style="background-image:url(<%= data.url %>);"></div>'),d=t.compile('<img itemprop="image" src="<%= data.url %>" <%== data._attrs %> alt="<%= data.alt %>" title="<%= data.title %>">'),s=t.compile('<% if (data.id) { %>id="<%= data.id %>" <% } %><% if (data.classNames) { %>class="<%= data.classNames %>" <% } %><% if (!isNaN(+data.width)) { %>width="<%= data.width %>" <% } %><% if (!isNaN(+data.height)) { %>height="<%= data.height %>" <% } %><% if (data.style) { %>style="<%= data.style %>" <% } %>');const r=function(t){var r,u=t.classNames||[],m=[],c=t.dataAttrs||{};return r=s({classNames:u.join(" "),id:t.id,width:t.width,height:t.height,style:t.style}),a.Object.each(c,(function(a,t){m.push(i({name:t.replace(e,""),value:a}))})),(t.useBackground?l:d)({_attrs:r+m.join(" "),alt:t.alt,title:t.title,url:t.url})};var u=r;exports.default=u,a.namespace("SM.Templates").image=r}(),SM.currentModule=null}),"",{requires:["template","template-micro"]});
YUI.add("sm-image-tools-base-view",(function(e){SM.currentModule="sm-image-tools-base-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var s=babelHelpers.interopRequireDefault(t("sm-analytics")),i=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("react-dom")),a=babelHelpers.interopRequireDefault(t("lodash")),r=babelHelpers.interopRequireDefault(t("sm-smuglog"));const{FIELD_NICKNAME:o,FIELD_MESSAGE:u,LEVEL_ERROR:l}=r.default;var c,m,h,g,d,b,f;e.namespace("SM.ImageTools").Base=e.Base.create("sm-image-tools-base-view",e.View,[],{errorMessages:{409:"One or more of the selected photos is already processing a <%= data.detail.operation %> operation. Please try again after waiting a little while."},initializer:function(t){t||(t={}),this.buttonsVisible=!1,this._eventHandles=[this.after("imagesChange",this._afterImagesChange,this),this.after("unsavedChange",this._afterUnsavedChange,this)],e.Lang.isArray(t.images)?(this._bulkMode=t.images.length>1,this._imageCount=t.images.length):(this._bulkMode=!1,this._imageCount=1)},destructor:function(){new e.EventHandle(this._eventHandles).detach(),this._eventHandles=null,n.default.unmountComponentAtNode(this._buttons.getDOMNode()),this._promiseQueue=null,this._container.empty()},cancel:function(){return this.createBaseAnalyticsEvent("Cancel").log(),e.Array.each(this.get("images"),(function(e){e.revert()})),this._resetUI(),this.fire("cancel"),this.set("unsaved",!1),this},logError:function(t,s){r.default.add("image-tools",{[o]:e.SM.Page.user.nickName,[u]:t,ImageTool:this.get("thumbOnly")?"Crop Thumbnail":this.constructor.toolName,NumImages:this._imageCount,...s||{}},l)},createBaseAnalyticsEvent:function(e,t){var i={label:this.get("thumbOnly")?"Crop Thumbnail":this.constructor.toolName};t&&(i=a.default.merge(i,t));var n=s.default.Tracker.createEvent(s.default.CATEGORY.IMAGE_TOOL,e,i);return n.addContext(s.default.CONTEXT.COLLECTION,{total_items:this._imageCount}),n},focus:function(){},render:function(){var t=this.get("container");return!e.UA.mobile&&this.get("showLegend")&&t.addClass("sm-image-tool-with-legend"),this.template&&t.setHTML(this.template),this._renderTool(),this.get("renderButtons")&&this._renderButtons(),this.rendered=!0,this},submit:function(t){t||(t={});var s=this._batchQueue&&this._batchQueueSubmit?this._batchQueueSubmit:this._promiseQueueSubmit;return this._confirmSubmit().then(e.bind(this._showProgressBar,this)).then(e.bind(s,this)).then(e.bind(this._handleSubmitSuccess,this,t),e.bind(this._handleSubmitFailure,this))},_normalizeSubmitData:function(){},_prepareImages:function(){return this.get("images")},_renderTool:function(){},_resetUI:function(){},_batchQueueSubmit:function(){},_cancelSubmit:function(){this._batchQueue||this._promiseQueue.abort()},_confirmSubmit:function(){var t=this.get("confirmMessage");return t?e.SM.Page.confirm(t,{type:"warning",title:"Are You Sure?"}):e.when()},_fitPreview:function(t,s,i){i||(i=!1);var n=this.get("container"),a=e.SM.ImageTools.Base.CONTAINER_PADDING,r=n.get("offsetWidth")-a,o=n.get("offsetHeight")-a,u=s/t,l=t,c=s;return l>r&&(c=(l=r>0?Math.min(r,l):l)*u),c>o&&(l=(c=o>0?Math.min(o,c):c)/u),i&&c>r&&(l=(c=r>0?Math.min(r,c):c)/u),i&&l>o&&(c=(l=o>0?Math.min(o,l):l)*u),{width:Math.round(l),height:Math.round(c)}},_getContainerWidth:function(){return this._container.get("offsetWidth")||null},_getPromiseQueueFuncs:function(){var t=this._prepareImages(),s=this._progressPanel,i=0;return e.Array.map(t,(function(t){return function(){return t.sync().then((function(){return i+=1,s&&s.progressBar.set("value",i),e.when()}))}}))},_getUsablePreviewSize:function(t){return new e.Promise((function(e,s){t.expand("ImageSizeDetails",{refresh:!0}).then((function(t){var i=t.get("ImageSizeMedium")||t.get("ImageSizeSmall")||t.get("ImageSizeThumb")||t.get("ImageSizeTiny");i?e(i):s()}))}))},_hideButtons:function(){var e=this._buttons;e&&this.buttonsVisible&&(e.removeClass("visible"),this.buttonsVisible=!1,e.all(".sm-button").setAttribute("tabindex","-1"))},_promiseQueueSubmit:function(){var t=this;return new e.Promise((function(s,i){var n=t._getPromiseQueueFuncs();(t._promiseQueue=new e.SM.PromiseQueue(n,5)).then((function(){s({ProcessedImages:t._imageCount})}),(function(e){e.aborted?s({UserAbort:!0,ProcessedImages:e.processed}):i(e)}))}))},_renderButtons:function(){var e=this._buttons=this._container.appendChild('<div class="sm-image-tool-footer"></div>');this._renderToolFooter(),e.all(".sm-button").setAttribute("tabindex","-1")},_renderToolFooter:function(){this._footerComponent=n.default.render(i.default.createElement(c,{bulkMode:this._bulkMode,onSubmitClick:this._onSubmitClick.bind(this),onCancelClick:this._onCancelClick.bind(this),withLegend:this.get("showLegend")&&!e.UA.mobile}),this._buttons.getDOMNode())},_showButtons:function(){var e=this._buttons;e&&(this.buttonsVisible||(e.addClass("visible"),this.buttonsVisible=!0,e.all(".sm-button").removeAttribute("tabindex")))},_showError:function(t,s){var i,n=this.errorMessages,a=n&&n[t];a?i=e.Template.Micro.compile(a)({detail:s}):i="Oops, something went wrong. Please try again.";this._progressPanel&&(this._progressPanel.destroy(),this._progressPanel=null),this.logError("Failed",s),new e.SM.Panel.Alert({message:i}).render()},_showProgressBar:function(){var t,s,i=this._imageCount||"";return s=this._batchQueue?{message:"Saving..."}:{maxValue:i,message:1===i?"Saving item...":"Saving "+i+" items..."},(t=new e.SM.Panel.Progress({cancelable:!this._batchQueue,progressBar:new e.SM.ProgressBar(s),render:!0})).onceAfter("cancel",this._cancelSubmit,this),this._progressPanel=t,e.when()},_handleSubmitFailure:function(t){if("string"==typeof t&&"no"===t)return"cancel";var s;try{s=t&&t.error.response.Code}catch(e){}switch(this._progressPanel&&(this._progressPanel.destroy(),this._progressPanel=null),s){case 409:var i=t.error.response.Conflicts,n=i[e.Object.keys(i)[0]],a=n[n.Locator];this._showError(s,e.merge(t,{operation:a.QueueName})),this.createBaseAnalyticsEvent("Tool Conflict",{property:"Conflict With "+a.QueueName,systemAction:!0}).log();break;default:this._showError(s,t)}return this.set("unsaved",!1),this.fire("submitFail"),"fail"},_handleSubmitSuccess:function(e,t){var i=t&&t.request&&t.request.data;return i=this._normalizeSubmitData(i),this._progressPanel&&(this._progressPanel.destroy(),this._progressPanel=null),this.createBaseAnalyticsEvent("Submit",{property:e.source}).addContext(s.default.CONTEXT.IMAGE_EDIT,i).log(),this.set("unsaved",!1),this.fire("submitSuccess",{submitData:void 0,toolName:this.constructor.toolName}),"success"},_afterImagesChange:function(){this._resetUI(),this._renderToolFooter()},_afterUnsavedChange:function(e){e.newVal?this._showButtons():this._hideButtons()},_onCancelClick:function(t){t.preventDefault();var s=this;e.soon((function(){s.cancel()}))},_onSubmitClick:function(e){0===e.button&&(e.preventDefault(),this.submit({source:"Click"}))}},{ATTRS:{album:{},confirmMessage:{value:""},images:{value:null,setter:function(t){return e.Lang.isArray(t)||(t=[t]),this._bulkMode=t.length>1,this._imageCount=t.length,t}},visible:{},renderButtons:{value:!0},showLegend:{value:!0},unsaved:{value:!1}}}),e.SM.ImageTools.Base.CONTAINER_PADDING=48,m=SM.import("prop-types"),h=SM.import("react"),g=SM.import("classnames"),d=e.SM.Component.ButtonGroup,b=SM.import("sm-component-button"),f=SM.import("create-class"),c=f({propTypes:{bulkMode:m.bool.isRequired,onCancelClick:m.func.isRequired,onSubmitClick:m.func.isRequired,withLegend:m.bool},getDefaultProps:function(){return{withLegend:!0}},render:function(){var e,t=this.props,s=t.bulkMode;if(t.withLegend){var i={"sm-hidden":!s,"yui3-u-1-2":!0},n={"sm-hidden":s,"yui3-u-1-2":!0};e=h.createElement("div",{className:"sm-image-tool-legend yui3-g"},h.createElement("div",{className:g(i)},h.createElement("span",{className:"sm-image-tool-shortcut sm-image-tool-shortcut-cancel"},"cancel")),h.createElement("div",{className:"yui3-u-1-2"},h.createElement("span",{className:"sm-image-tool-shortcut sm-image-tool-shortcut-save"},"save changes")),h.createElement("div",{className:g(n)},h.createElement("span",{className:"sm-image-tool-shortcut sm-image-tool-shortcut-savenext"},"save and next")))}return h.createElement("div",null,e,h.createElement(d,null,h.createElement(b,{onClick:t.onCancelClick,value:"cancel"},"Cancel"),h.createElement(b,{onClick:t.onSubmitClick,skin:"accent",value:"submit"},"Save")))}})}(),SM.currentModule=null}),"",{requires:["classnames","promise","react","react-dom","template-micro","view","sm","sm-component-buttongroup","sm-promise-queue","sm-resource-image","sm-resource-album-image","sm-smuglog","sm-templates-form","sm-templates-button","sm-page-confirm","sm-panel-alert-deprecated","create-class"]});
YUI.add("sm-image-tools-color-effects-view",(function(e){SM.currentModule="sm-image-tools-color-effects-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var SM=e.SM,t=e.Node,s=e.Array,a=e.Template.Micro,o=a.compile('<%== "https://" + SM.env.host.api %><%== data.colorUri %>?_accept=image/jpeg&Color=<%== encodeURIComponent(data.effect.value) %>'),i=a.compile('<div class="<%= data.classNames.effectPreview %>" data-effect="<%= data.effect.value %>"><div class="<%= data.classNames.effectLabel %>"><%= data.effect.label %></div></div>');e.namespace("SM.ImageTools").ColorEffects=e.Base.create("sm-image-tools-color-effects-view",SM.ImageTools.Base,[],{_batchQueue:!0,classNames:{effectLabel:"sm-color-effect-label",effectPreview:"sm-color-effect-preview",landscapePreviews:"sm-color-effect-previews-landscape",portraitPreviews:"sm-color-effect-previews-portrait",previewsContainer:"sm-image-tool-previews",selectedEffect:"sm-color-effect-selected"},template:'<div class="sm-image-tool sm-image-tool-color-effects"></div>',effectOptions:[{label:"Auto Color Corrected",value:"Auto"},{label:"Sepia Tone",value:"Sepia"},{label:"Tanning Salon",value:"Tan"},{label:"Negative",value:"Negative"},{label:"Black & White",value:"B/W"}],initializer:function(){this._previewNodes=[]},destructor:function(){var e=this._toolNode.one("."+this.classNames.previewsContainer);s.each(this._previewNodes,(function(e){e.destroy(!0)})),this._previewNodes=null,e.destroy(!0),e=null},_batchQueueSubmit:function(){return SM.Resource.Image.colorImages(this.get("images"),this._selectedOption)},_normalizeSubmitData:function(e){return{color:e&&e.Color}},_renderTool:function(){this._toolNode=this._container.one(".sm-image-tool-color-effects"),this._renderPreviews(),this._eventHandles.push(this._toolNode.delegate("click",this._onEffectClick,"."+this.classNames.effectPreview,this))},_resetUI:function(){var e=this._toolNode.one("."+this.classNames.previewsContainer);e&&e.destroy(!0),e=null,this._selectedOption="",this._renderPreviews()},_renderPreviews:function(){for(var e=this,a=this.get("images"),l=0,r=a[0];r.get("IsVideo");)++l,r=a[l];this._getUsablePreviewSize(r).then((function(l){var c,n,f=e.classNames,d=t.create('<div class="'+f.previewsContainer+'"></div>'),m=l.Width,v=l.Height;r.get("OriginalWidth")>=r.get("OriginalHeight")?(c=Math.min(m,300),n=Math.min(v,200),d.addClass(f.landscapePreviews)):(c=Math.min(m,200),n=Math.min(v,300),d.addClass(f.portraitPreviews)),s.each(e.effectOptions,(function(s){var l=o({classNames:f,colorUri:r.getExpansionUri("ColorImage"),effect:s}),m=t.create(i({classNames:f,effect:s}));e._previewNodes.push(m),m.prepend(SM.ImageStack.render(l,a.length,c,n)),d.appendChild(m)})),e._toolNode.setHTML(d)}))},_onEffectClick:function(e){var t=e.currentTarget,s=this.classNames;this._toolNode.all("."+s.effectPreview).removeClass(s.selectedEffect),t.addClass(s.selectedEffect),this._selectedOption=t.getData("effect"),this.set("unsaved",!0)}},{toolName:"Color Effects",toolId:"colorEffects",ATTRS:{confirmMessage:{value:"Saving will permanently change selected images and will take a few minutes. Are you sure you want to do this?"}}})}(),SM.currentModule=null}),"",{requires:["template-micro","sm-image-model","sm-image-tools-base-view"]});
YUI.add("sm-image-tools-crop-view",(function(t){SM.currentModule="sm-image-tools-crop-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var e=t.Template.Micro,i=e.compile('<div><div class="sm-image-tool-crop-image" style="background-image: url(<%= data.imageUrl %>);background-size: contain;height: <%= data.previewHeight %>px;width: <%= data.previewWidth %>px;<% if (data.centered) { %>margin: 0 auto;<% } %>"><img class="sm-image-tool-masked-image" src="<%= data.imageUrl %>" style="height: <%= data.previewHeight %>px;width: <%= data.previewWidth %>px;clip: rect(0px <%= data.previewWidth %>px <%= data.previewHeight %>px 0px);"/><div class="sm-image-tool-crop-mask"><div class="sm-image-tool-crop-thirds"><div class="sm-image-tool-crop-thirds-horizontal"></div><div class="sm-image-tool-crop-thirds-vertical"></div></div></div><div class="sm-image-tool-crop-overlay"></div><div class="sm-image-tool-crop-handles" style="height: <%= data.previewHeight %>px;width: <%= data.previewWidth %>px;"></div></div></div>'),s=e.compile("rect(<%= data.top %>px <%= data.right %>px <%= data.bottom %>px <%= data.left %>px)");t.namespace("SM").CropOverlay=t.Base.create("sm-crop-overlay",t.View,[],{initializer:function(){this._attachEvents()},destructor:function(){this._maskDom=null,this._handlesDom=null,this.get("container").empty(),this._drag=null,this._handle=null,this._image=null,this._mask=null,this._resize=null,this._detachEvents()},getCrop:function(){var t=this.get("model"),e=t.originalWidth/t.previewWidth,i=t.originalHeight/t.previewHeight;return{top:i*parseInt(this._mask.getComputedStyle("top"),10),left:e*parseInt(this._mask.getComputedStyle("left"),10),width:e*parseInt(this._mask.getComputedStyle("width"),10),height:i*parseInt(this._mask.getComputedStyle("height"),10)}},render:function(){var e=this.get("container"),s=this._model=this.get("model"),o=s.previewWidth,a=s.previewHeight;this._previewIsLandscape=o>a;var n=t.Node.create(i({centered:this.get("centered"),imageUrl:s.imageUrl,previewHeight:a,previewWidth:o}));this._handles=n.one(".sm-image-tool-crop-handles"),this._image=n.one(".sm-image-tool-crop-image"),this._mask=n.one(".sm-image-tool-crop-mask"),this._darkened=n.one(".sm-image-tool-masked-image"),e.setHTML(n),this._handlesDom=this._handles.getDOMNode(),this._maskDom=this._mask.getDOMNode(),this._image.setStyles({top:(1-this._image.getY()%1)%1,left:(1-this._image.getX()%1)%1});var r=this._resize=new t.Resize({node:this._handles}).plug(t.Plugin.ResizeConstrained,{constrain:this._image}),h=this._drag=new t.DragDrop({container:this._image,dragSelector:".sm-image-tool-crop-handles",touchCancelDistance:25,touchDelay:300});return this._eventHandles.push(r.on("resize:start",this._onResizeStart,this),r.after("resize:resize",this._afterResize,this),r.on("resize:align",this._onResizeAlign,this),r.on("resize:end",this._onResizeEnd,this),h.on("drag",this._onDrag,this),h.on("dragend",this._onDragEnd,this)),this},resetCrop:function(){var t=this.get("model");this._handles.setStyles({top:0,left:0,width:t.previewWidth,height:t.previewHeight}),this._syncMask(),this.set("cropRatio","unconstrained")},rotateCrop:function(){var t,e,i,s,o=this.get("model"),a=parseInt(this._handles.getStyle("height"),10),n=parseInt(this._handles.getStyle("width"),10),r=parseInt(this._handles.getStyle("left"),10),h=parseInt(this._handles.getStyle("top"),10),l=a,d=n,c=n/a;n>a?(s=o.previewHeight-d)<0&&(l=(d+=s)/c):(i=o.previewWidth-l)<0&&(d=(l+=i)*c),e=h+a/2-d/2,(t=r+n/2-l/2)<0?t=0:t+l>o.previewWidth&&(t=o.previewWidth-l),e<0?e=0:e+d>o.previewHeight&&(e=o.previewHeight-d),this._handles.setStyles({width:l,height:d,left:t,top:e}),this._syncMask()},_attachEvents:function(){this._eventHandles=[this.on("showGridChange",this._onShowGridChange),this.on("cropRatioChange",this._onCropRatioChange),this.after("modelChange",this.render,this)]},_detachEvents:function(){new t.EventHandle(this._eventHandles).detach(),this._eventHandles=null},_fitCrop:function(t){var e,i,s,o,a=this.get("model"),n=t.width,r=t.height;0!==(s=a.previewWidth-n)&&(n+=s,r=this._previewIsLandscape?n*t.ratio:n/t.ratio),(o=a.previewHeight-r)<0&&(r+=o,n=this._previewIsLandscape?r/t.ratio:r*t.ratio),e=(s=a.previewWidth-n)/2,i=(o=a.previewHeight-r)/2,this._handles.setStyles({width:Math.round(n),height:Math.round(r),left:Math.round(e),top:Math.round(i)}),this._syncMask()},_syncClippingImage:function(){var t=this._handlesDom,e=parseInt(t.style.top||0,10),i=parseInt(t.style.left||0,10),o=i+parseInt(t.style.width,10),a=e+parseInt(t.style.height,10);this._darkened.setStyle("clip",s({bottom:a,left:i,right:o,top:e}))},_syncMask:function(){this._syncMaskPosition();var t=this._handlesDom,e=this._maskDom;e.style.width=t.style.width,e.style.height=t.style.height},_syncMaskPosition:function(){this._syncClippingImage(),this._maskDom.style.top=this._handlesDom.style.top,this._maskDom.style.left=this._handlesDom.style.left},_onShowGridChange:function(){this._mask.one(".sm-crop-thirds").toggleClass("sm-crop-thirds-hidden")},_afterResize:function(){this.fire("cropChanged"),this._syncMask()},_onCropRatioChange:function(t){var e,i,s,o,a=this.get("model");"unconstrained"===t.newVal?this._resize.con.set("preserveRatio",!1):(e="original"===t.newVal?this._previewIsLandscape?a.previewHeight/a.previewWidth:a.previewWidth/a.previewHeight:(i=t.newVal.split("x"))[0]/i[1],this._previewIsLandscape?o=(s=parseInt(this._handles.getStyle("width"),10))*e:s=(o=parseInt(this._handles.getStyle("height"),10))*e,this._fitCrop({width:s,height:o,ratio:e}),this._resize.con.set("preserveRatio",!0))},_onDrag:function(t){this._resizing?t.preventDefault():(this.fire("cropChanged"),this._syncMaskPosition())},_onDragEnd:function(){this._resizing||this._syncMaskPosition()},_onResizeAlign:function(t){var e=t.target.info,i=this._image.getX(),s=this.get("model").previewWidth,o=e.left-i+e.offsetWidth;o>s&&(e.offsetWidth-=o-s)},_onResizeEnd:function(){this._resizing=!1},_onResizeStart:function(){this._resizing=!0}},{ATTRS:{model:{value:null},showGrid:{value:!0},cropRatio:{value:"unconstrained",validator:function(t){var e,i,s,o;return"custom"===t||"original"===t||"unconstrained"===t?e=!0:/^\d+x\d+$/.test(t)?(i=t.split("x"),s=parseInt(i[0]),o=parseInt(i[1]),e=s&&o):e=!1,e}},centered:{value:!1}}});var o=t.Template.Micro.compile('<div class="sm-image-tool <%= data.classNames.toolContent %>"><div class="<%= data.classNames.previewContent %>"></div><div class="<%= data.classNames.controls %>"></div></div>');t.namespace("SM.ImageTools").Crop=t.Base.create("sm-image-tools-crop-view",t.SM.ImageTools.Base,[],{_batchQueue:!0,classNames:{cropRatio:"sm-crop-ratio",customRatioInput:"sm-crop-custom-ratio-input",customRatioX:"sm-crop-custom-ratio-x",controls:"sm-image-tool-crop-controls",previewContent:"sm-image-tool-crop-preview",toolContent:"sm-image-tool-crop"},initializer:function(){this._eventHandles.push(this.on("visibleChange",this._onVisibleChange,this))},destructor:function(){this._detachCropOverlayEvent(),this._cropOverlay.destroy({remove:!0}),this._cropOverlay=null},_batchQueueSubmit:function(){var t=this._cropOverlay.getCrop();return this.get("images")[0].crop(t.left,t.top,t.height,t.width)},_attachCropOverlayEvent:function(){this._detachCropOverlayEvent();var t=this._cropOverlay;this._cropOverlayEvent=t.on("cropChanged",(function(){var t=this._customRatio1Input,e=this._customRatio2Input;this.set("unsaved",!0),t&&t.blur(),e&&e.blur()}),this)},_detachCropOverlayEvent:function(){this._cropOverlayEvent&&this._cropOverlayEvent.detach(),this._cropOverlayEvent=null},_renderControls:function(){var e,i,s,o,a,n,r=this._controls,h=this.classNames;n=[{value:"unconstrained",label:"Unconstrained"},{value:"1x1",label:"1x1"},{value:"4x6",label:"4x6"},{value:"5x7",label:"5x7"},{value:"8x10",label:"8x10"},{value:"original",label:"Original"},{value:"custom",label:"Custom"}],s=this._controlsForm=new t.SM.Form({container:r,fields:[{name:"cropRatio",type:"select",label:"Lock Ratio",options:n},{name:"customRatio1",type:"text",value:4,label:"Aspect Ratio",hidden:!0},{name:"customRatio2",type:"text",value:6,hidden:!0}]}).render(),o=this._controlsFormModel=s.get("model"),a=t.Node.create(t.SM.Templates.button({icon:"RotateRight",value:"rotateCrop"})),s.getField("cropRatio").container.addClass(h.cropRatio),e=s.getField("customRatio1").container,i=s.getField("customRatio2").container,this._customRatio1Input=e.one(".sm-form-field-text-input"),this._customRatio2Input=i.one(".sm-form-field-text-input"),e.addClass(h.customRatioInput).insert(a,"before"),i.addClass(h.customRatioInput).insert('<span class="'+h.customRatioX+'">x</span>',"before"),this._eventHandles.push(o.on("cropRatioChange",this._onCropRatioChange,this),o.on("customRatio1Change",this._onCustomRatioChange,this),o.on("customRatio2Change",this._onCustomRatioChange,this),a.on("click",this._onRotateButtonClick,this))},_renderPreview:function(){var e=this.get("images")[0],i=this._previewNode,s=this;i.setStyle("visibility","hidden"),this._getUsablePreviewSize(e).then((function(o){var a=s._cropOverlay,n=s._fitPreview(o.Width,o.Height),r=n.width,h=n.height,l={imageUrl:o.Url,originalWidth:e.get("OriginalWidth"),originalHeight:e.get("OriginalHeight"),previewWidth:r,previewHeight:h};a?a.set("model",l):(a=new t.SM.CropOverlay({centered:!0,container:i,model:l}).render(),s._cropOverlay=a,s._attachCropOverlayEvent()),s.fire("renderedPreview",{height:o.Height}),i.setStyle("visibility","visible")}))},_renderTool:function(){var e=this._container,i=this.classNames,s=t.Node.create(o({classNames:i}));return this._controls=s.one("."+i.controls),this._previewNode=s.one("."+i.previewContent),e.setHTML(s),this._renderControls(),this},_resetUI:function(){var t=this;this.get("images")[0].refresh().then((function(){var e=t._cropOverlay;e&&(e.destroy(),t._cropOverlay=null),t._renderPreview(),t._controlsFormModel.set("cropRatio","unconstrained",{dontSetUnsaved:!0})}))},_onRotateButtonClick:function(t){this._cropOverlay.rotateCrop(),this.set("unsaved",!0)},_onCropRatioChange:function(t){var e=t.newVal,i=this._controlsForm,s=this._controls.one("."+this.classNames.customRatioX);if("custom"===e){i.showItem("customRatio1"),i.showItem("customRatio2"),s.setStyle("visibility","visible");var o=this._controls.one("."+this.classNames.customRatioInput+" .sm-form-field-container input").getDOMNode();o.focus(),o.value=o.value,this._onCustomRatioChange()}else i.hideItem("customRatio1"),i.hideItem("customRatio2"),s.setStyle("visibility","hidden"),this._cropOverlay&&this._cropOverlay.set("cropRatio",e);t.dontSetUnsaved||this.set("unsaved",!0)},_onCustomRatioChange:function(t){var e,i,s=this._controlsForm,o=this._customRatio1Input.get("value"),a=this._customRatio2Input.get("value"),n=[];""!==o&&""!==a&&(e=Math.round(10*parseFloat(o))/10,i=Math.round(10*parseFloat(a))/10,e||n.push({Field:"customRatio1",Message:"Value must be a number"}),i||n.push({Field:"customRatio2",Message:"Value must be a number"}),e<=0&&n.push({Field:"customRatio1",Message:"Value must be greater than zero"}),i<=0&&n.push({Field:"customRatio2",Message:"Value must be greater than zero"}),n.length>0?s.setErrors(n):(this._customRatio1Input.once("blur",(function(){this._customRatio1Input.set("value",e)}),this),this._customRatio2Input.once("blur",(function(){this._customRatio2Input.set("value",i)}),this),s.clearError("customRatio1"),s.clearError("customRatio2"),this._cropOverlay.set("cropRatio",e+"x"+i)))},_onVisibleChange:function(t){t.newVal?this._resetUI():this._previewNode&&this._previewNode.setStyle("visibility","hidden")}},{toolName:"Crop",toolId:"crop",ATTRS:{confirmMessage:{value:"Saving will permanently change the image and will take a few minutes. Are you sure you want to do this?"}}})}(),SM.currentModule=null}),"",{requires:["resize","gallery-sm-dragdrop","sm-image-model","sm-image-tools-base-view","sm-form"]});
YUI.add("sm-image-tools-geodata-constants",(function(e){SM.currentModule="sm-image-tools-geodata-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STRINGS=void 0;exports.STRINGS={latitude:"Latitude",longitude:"Longitude",noCoords:"No data.",multipleCoords:"Multiple Sets of Data.",newLocation:"Set new location",removeData:"Remove  Location"}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-image-tools-geodata-map",(function(e){SM.currentModule="sm-image-tools-geodata-map";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=babelHelpers.interopRequireDefault(t("leaflet")),r=babelHelpers.interopRequireDefault(t("sm-dom-core")),i=t("sm-map-utils"),o=t("sm-map-constants"),n=babelHelpers.interopRequireDefault(t("sm-image-tools-geodata-search-control"));const s=e.Base.create("locationDataToolMap",e.View,[],{initializer:function(){this.map=null,this.markers=[],this.markerHash={},this.controls={},this.layers={},this._published={},this._readOnly=this.get("readOnly"),this._hasSearch=this.get("searchControl")},destructor:function(){this._detachGeoMapEvents(),this._detachDraggableMarkerEvents(),this.draggableMarker=null,this.markers=null,this._published=null,this._detachMapEvents(),this.markers&&(this.markers.length=0),Object.keys(this.controls).forEach(e=>{delete this.controls[e]}),Object.keys(this.layers).forEach(e=>{delete this.layers[e]}),this.map.remove(),this.map=null},addDraggableMarker:function(e){var t;return this.draggableMarker?this.draggableMarker.setLatLng(e):(t=this.addMarker(e,{accent:!0,draggable:!0}),this._fireMapEvent("markerAdd",{latLng:e,marker:t}),this.draggableMarker=t,this._attachDraggableMarkerEvents()),this.draggableMarker},addMarker:function(e,t){let r=a.default.latLng(e),o=new a.default.Marker(r,{icon:t.accent?i.smugMapAccentIcon:i.smugMapIcon,...t});return o.addTo(this.map),this.markers.push(o),o},fitWorld:function(){var e=this.map,t=e.getContainer().offsetWidth,a=this.draggableMarker,r=a&&a.getLatLng(),i=e.getZoom();t>=1300&&i<=2?e.setView(r||[6,-14],3):t>=1300&&i>=3?e.setView(r||[6,-14],i):r?e.panTo(r):e.fitWorld()},getDraggableMarker:function(){return this.draggableMarker||null},render:function(){s.superclass.render.call(this);let e=this.get("container").getDOMNode(),{controls:t,layers:a,map:l}=(0,i.createMap)(e,{minZoom:this.get("minZoom"),scrollWheelZoom:this.get("scrollWheelZoom")}),h=r.default.doc.createElement("a");h.href=o.MAP_BOX_LINK,h.className="mapbox-maplogo",h.target="_blank",h.textContent="Mapbox",e.appendChild(h),this.map=l,this.layers=a,this.controls=t,this._hasSearch&&(this.controls.search=new n.default({smugMap:this}).addTo(this.map)),this._readOnly&&this._disableZoomAndPan(),(0,i.fitMarkerBounds)(this.map,this.layers.markerCluster),this._attachGeoMapEvents();let u=this.get("zoomControlPosition");return u&&this.map.zoomControl.setPosition(u),(0,i.setZoomControl)(this.map,{allowZoom:this.get("zoomControl")}),(0,i.setSatelliteControl)(this.map,this.controls.layer,{allowSatellite:this.get("satellite")}),this},removeAllMarkers:function(){for(var e=0,t=this.markers.length;e<t;e++)this.removeMarker(this.markers[e],e);return this.markers=[],this},removeMarker:function(e,t){return e.options.draggable&&(this._detachDraggableMarkerEvents(),this.draggableMarker=null),this.map.removeLayer(e),delete this.markers[t],this},_attachDraggableMarkerEvents:function(){if(this.draggableMarker){var e=this.draggableMarker;e.on("dragstart",this._onMarkerDragStart,this),e.on("dragend",this._onMarkerDragEnd,this),e.on("move",this._onMarkerMove,this),e.on("mousedown",this._onMarkerMousedown,this),e.on("mouseover",this._onMarkerMouseover,this),e.on("mouseout",this._onMarkerMouseout,this)}},_attachGeoMapEvents:function(){if(!this._readOnly){var t=this.map,a=e.one(t.getContainer());this._geodataToolMapEventHandles=[a.on("contextmenu",this._onMapRightClick,this)],t.on("autopanstart",this._onMapAutoPanStart,this),t.on("click",this._onMapClick,this),t.on("dblclick",this._onMapDblClick,this),t.on("mousedown",this._onMapMousedown,this),t.on("moveend",this._onMapMoveEnd,this),t.on("resize",this._onMapResize,this)}},_detachDraggableMarkerEvents:function(){if(this.draggableMarker){var e=this.draggableMarker;e.off("dragstart",this._onMarkerDragStart),e.off("dragend",this._onMarkerDragEnd),e.off("move",this._onMarkerMove),e.off("mousedown",this._onMarkerMousedown),e.off("mouseover",this._onMarkerMouseover),e.off("mouseout",this._onMarkerMouseout)}},_detachGeoMapEvents:function(){if(!this._readOnly){new e.EventHandle(this._geodataToolMapEventHandles).detach(),this._geodataToolMapEventHandles=null;var t=this.map;t.off("autopanstart",this._onMapAutoPanStart),t.off("click",this._onMapClick),t.off("dblclick",this._onMapDblClick),t.off("mousedown",this._onMapMousedown),t.off("moveend",this._onMapMoveEnd),t.off("resize",this._onMapResize)}},_detachMapEvents:function(){this.layers.markerCluster&&this.layers.markerCluster.off("clusterclick")},_disableZoomAndPan:function(){var e=this.map;e.dragging.disable(),e.touchZoom.disable(),e.doubleClickZoom.disable(),e.scrollWheelZoom.disable(),e.tap&&e.tap.disable()},_fireMapEvent:function(e,t,a){return a&&!this._published[e]&&(this._published[e]=this.publish(e,{defaultFn:a})),this.fire(e,t),this},_defMapDblClick:function(){this._dblClickTimer&&(clearTimeout(this._dblClickTimer),this._dblClickTimer=null)},_defMapRightClick:function(e){e.originalEvent.preventDefault();var t=e.latLng,a=this.map;this.addDraggableMarker(t),a.getZoom()<7&&setTimeout((function(){a.setView(t,7)}),50)},_defMarkerDragEnd:function(e){var t=e.latLng;e.inBounds||this.map.panTo(t)},_onMapRightClick:function(e){var t=this.map,a=t.mouseEventToContainerPoint(e),r=t.containerPointToLayerPoint(a),i=t.layerPointToLatLng(r);this._fireMapEvent("mapRightClick",{latLng:i,originalEvent:e},this._defMapRightClick)},_onMapAutoPanStart:function(){this.autoPanning=!0},_onMapClick:function(e){var t=this;clearTimeout(this._dblClickTimer),this._hasSearch&&this.map.doubleClickZoom.enable(),this._dblClickTimer=setTimeout((function(){t._fireMapEvent("mapClick",{latLng:e.latlng})}),250)},_onMapDblClick:function(e){this._fireMapEvent("mapDblClick",{latLng:e.latlng},this._defMapDblClick)},_onMapMousedown:function(e){this._fireMapEvent("mapMousedown",{latLng:e.latlng,originalEvent:e.originalEvent})},_onMapMoveEnd:function(){this.autoPanning=!1},_onMapResize:function(t){this._initialResize?(this._resizeTimer&&(this._resizeTimer.cancel(),this._resizeTimer=null),this._resizeTimer=e.later(300,this,(function(){this._fireMapEvent("mapResize",{newSize:t.newSize,oldsize:t.oldSize})}))):this._initialResize=!0},_onMarkerAdd:function(e){this._fireMapEvent("markerAdd",{latLng:e.latlng})},_onMarkerDragEnd:function(e){this.markerDragging=!1;var t=e.target,a=t.getLatLng();this._fireMapEvent("markerDragEnd",{distance:e.distance,inBounds:this.map.getBounds().contains(a),latLng:a,marker:t},this._defMarkerDragEnd)},_onMarkerDragStart:function(e){this.markerDragging=!0,this._fireMapEvent("markerDragStart",{marker:e.target})},_onMarkerMousedown:function(e){this._fireMapEvent("markerMousedown",{marker:e.target})},_onMarkerMouseout:function(t){var a=e.one(t.originalEvent.relatedTarget);a&&(a.hasClass("plug")||a.hasClass("sm-fonticon-Location3"))||this._fireMapEvent("markerMouseout",{latLng:t.latlng,marker:t.target})},_onMarkerMouseover:function(t){var a=e.one(t.originalEvent.relatedTarget);a&&(a.hasClass("plug")||a.hasClass("sm-fonticon-Location3"))||this._fireMapEvent("markerMouseover",{latLng:t.latlng,marker:t.target})},_onMarkerMove:function(e){this._fireMapEvent("markerMove",{drag:this.markerDragging,latLng:e.latlng})}},{ATTRS:{readOnly:{value:!1},searchControl:{value:!1},minZoom:{value:2},scrollWheelZoom:{value:!1},satellite:{value:!0},zoomControl:{value:!0},zoomControlPosition:{value:"bottomright"}}});var l=s;exports.default=l}(),SM.currentModule=null}),"",{requires:["sm-image-tools-geodata-search-control","sm-map-utils","sm-dom-core","sm-map-constants","leaflet"]});
YUI.add("sm-image-tools-geodata-panel",(function(e){SM.currentModule="sm-image-tools-geodata-panel";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=babelHelpers.interopRequireDefault(t("sm-analytics")),i=babelHelpers.interopRequireDefault(t("sm-image-tools-geodata-map")),o=babelHelpers.interopRequireDefault(t("leaflet")),n=babelHelpers.interopRequireDefault(t("sm-image-tools-geodata-templates")),s=t("sm-image-tools-geodata-constants"),r=e.Base.create("locationDataToolMapPanel",e.SM.Panel,[],{classNames:{boundingBox:"sm-panel-imageedit-tool-geo",markerPopupContainer:"sm-map-popup-marker-details-container",markerPopupDetails:"sm-map-popup-marker-details"},initializer:function(t){t||(t={}),this._toolView=t.toolView,this.classNames=e.merge(this.classNames,t.classNames),this.get("boundingBox").addClass(this.classNames.boundingBox),this.onceAfter("render",this._afterRender,this),this.set("height",.85*e.DOM.winHeight()),this.set("width",.9*e.DOM.winWidth()),this._geoEventHandles=[this.on("visibleChange",this._onVisibleChange,this)]},destructor:function(){new e.EventHandle(this._geoEventHandles).detach(),this._detachUIEvents(),this.mapView.destroy({remove:!0}),this.mapView=null,this._toolView=null,this._geoEventHandles=null},getLatLng:function(){var e=this.mapView.getDraggableMarker();return e?e.getLatLng():null},createBaseAnalyticsEvent:function(e,t){return this._toolView.createBaseAnalyticsEvent(e,t)},_attachUIEvents:function(){this._detachUIEvents();var t=this.mapView,a=this.getStdModNode(e.WidgetStdMod.FOOTER);this._uiEvents=[e.on("windowresize",this._onWindowResize,null,this),a.delegate("click",this._onDoneButtonClick,".sm-button",this),t.after("markerMouseout",this._afterMarkerMouseout,this),t.after("markerMouseover",this._afterMarkerMouseover,this),t.on("markerDragStart",this._onMarkerDragStart,this),t.after("markerDragEnd",this._afterMarkerDragEnd,this),t.controls.search.on("lookup",this._onSearchLookup,this)]},_detachUIEvents:function(){new e.EventHandle(this._uiEvents).detach(),this._uiEvents=null},_getMarkerPopup:function(){if(!this._markerPopup){var e=o.default.popup({closeButton:!1});this._markerPopup=e}return this._markerPopup},_hide:function(){this._detachUIEvents(),e.one("body").removeClass("sm-geodata-map-enlarged")},_hideMarkerPopup:function(){var e=this._getMarkerPopup();this.mapView.map.closePopup(e)},_renderButton:function(){return this.setStdModContent(e.WidgetStdMod.FOOTER,e.SM.Templates.button({label:"Done",value:"done",size:"small",skin:"submit",className:"sm-button-width-medium"})),this},_renderMapAndMarker:function(){var t,a=this.get("markerLatLng"),o=e.Node.create("<div/>");return this.setStdModContent(e.WidgetStdMod.BODY,o),t=this.mapView=new i.default({container:o,searchControl:!0,scrollWheelZoom:!0,zoomControlPosition:"bottomright"}).render(),a&&(t.addDraggableMarker(a),t.map.setView(a,12)),this},_show:function(){this._attachUIEvents();var t=this.mapView,a=t.getDraggableMarker();a?t.map.panTo(a.getLatLng()):t.fitWorld(),e.one("body").addClass("sm-geodata-map-enlarged"),this._uiEvents.push(t.after("mapResize",this._afterMapResize,this))},_showMarkerPopup:function(t,a){a||(a={});var i,o,r=this.mapView,u=r.map,l=this.classNames,d=this;r.markerDragging||(this._popupAutoHideTimeout&&(clearTimeout(this._popupAutoHideTimeout),this._popupAutoHideTimeout=null),o=n.default.dataTable({classNames:l,latLng:t,strings:s.STRINGS}),(i=this._getMarkerPopup()).setContent(n.default.markerPopup({classNames:l,renderedDataTable:o})),u.once("layeradd",(function(){e.one(i._container).addClass(l.markerPopupContainer),i.options.offset=[i._containerWidth/2+21,21],i.update(),u.once("autopanstart",(function(){d._popupAutoHideTimeout=setTimeout(e.bind(d._hideMarkerPopup,d),1500)}))})),u.openPopup(i.setLatLng(t)),a.autoHide&&(this._popupAutoHideTimeout=setTimeout(e.bind(this._hideMarkerPopup,this),1500)))},_syncSize:function(){var t=this.getStdModNode(e.WidgetStdMod.BODY,!0),a=this.mapView;return t.setStyle("height",this.get("height")-52+"px"),a&&a.map.invalidateSize(),this},_afterMapResize:function(){this.mapView.fitWorld()},_afterMarkerDragEnd:function(e){this._showMarkerPopup(e.latLng,{autoHide:!e.inBounds})},_afterMarkerMouseout:function(){this.mapView.autoPanning||this._hideMarkerPopup()},_afterMarkerMouseover:function(e){this._showMarkerPopup(e.latLng)},_afterRender:function(){this._renderMapAndMarker()._renderButton()._syncSize()},_onDoneButtonClick:function(e){e.halt(),this.hide()},_onMarkerDragStart:function(){this._hideMarkerPopup()},_onPopupMouseout:function(){this._hideMarkerPopup()},_onSearchLookup:function(e){var t=this.createBaseAnalyticsEvent("Look Up Location");t.addContext(a.default.CONTEXT.SEARCH,{search_string:e.value}),t.log()},_onVisibleChange:function(e){e.newVal?this._show():this._hide()},_onWindowResize:function(){this.set("height",.85*e.DOM.winHeight()),this.set("width",.9*e.DOM.winWidth()),this._syncSize(),this.centered()}},{CSS_PREFIX:"sm-panel",ATTRS:{centered:{readOnly:!0,value:!0},constrain:{readOnly:!0,value:!0},modal:{readOnly:!0,value:!0},markerLatLng:{value:null},title:{value:" "}}});exports.default=r}(),SM.currentModule=null}),"",{requires:["leaflet","sm-analytics","sm-image-tools-geodata-constants","sm-image-tools-geodata-map","sm-image-tools-geodata-templates","sm-panel"]});
YUI.add("sm-image-tools-geodata-search-control",(function(e){SM.currentModule="sm-image-tools-geodata-search-control";var exports={},s=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=babelHelpers.interopRequireDefault(s("leaflet")),a=e.Template.Micro,n=a.compile("https://open.mapquestapi.com/nominatim/v1/search.php?key=onZAqut7JYFQjHsRJEOTpmClDWGBn5w5&format=json&limit=<%= data.limit %>&json_callback={callback}&addressdetails=1&q=<%= encodeURIComponent(data.address) %>"),i=/^(-?[1-8]?\d(?:\.\d{1,18})?|90(?:\.0{1,18})?)$/,o=/^(-?(?:1[0-7]|[1-9])?\d(?:\.\d{1,18})?|180(?:\.0{1,18})?)$/,l=a.compile('<div class="<%= data.classNames.container %>"><div class="<%= data.classNames.searchLookup %>">'+e.SM.Templates.textbox({className:"sm-map-search-input",name:"lookupValue",placeholder:"Search for location"})+e.SM.Templates.button({className:"sm-map-search-submit",icon:"Search",size:"small",skin:"submit",value:"lookup"})+'<div class="<%= data.classNames.spinner %>"><div class="sm-progress-spinner"></div></div><div class="<%= data.classNames.searchResults %>"></div></div>'+e.SM.Templates.button({className:"sm-map-search-clear",label:"Reset",size:"small",skin:"submit",value:"clear"})+e.SM.Templates.button({className:"sm-map-search-drop",label:"Drop Pin",size:"small",skin:"submit",value:"drop"})+"</div>"),r=a.compile('<ul class="sm-map-search-results-list<% if (data.isEmpty) { %> sm-map-search-results-empty<% } %>"><% if (!data.isEmpty) { %><% for (var i = 0, len = data.places.length; i < len; i++) { %><li class="sm-map-search-results-item<% if (i === 0) { %> sm-map-search-results-item-selected<% } %>" data-index="<%= data.places[i].index %>" title="<%= data.places[i].displayName %>"><%= data.places[i].displayName %></li><% } %><% } else { %><li>No results for <span class="sm-map-search-value"><%= data.inputValue %></span>.</li><% } %></ul>'),u=t.default.Control.extend({classNames:{container:"sm-map-search-container",expandedSearchResults:"sm-map-search-results-container-expanded",searchLookup:"sm-map-search-lookup",searchResults:"sm-map-search-results-container",searchResultsItem:"sm-map-search-results-item",searchResultsItemSel:"sm-map-search-results-item-selected",searchResultsMinimized:"sm-map-search-results-minimized",searchSubmitButton:"sm-map-search-submit",spinner:"sm-map-search-spinner-container",spinnerVisible:"sm-map-search-spinner-container-visible"},options:{position:"topleft"},initialize:function(e){t.default.Util.setOptions(this,e),this._selectedSuggestionIndex=null},focusSearch:function(){this._searchInput&&this._searchInput.getDOMNode().focus()},onAdd:function(s){var a=this.classNames,n=this._containerYNode=e.Node.create(l({classNames:a})),i=this._smugMap=this.options.smugMap,o=this._searchInput=n.one("input"),r=this._searchResults=n.one("."+a.searchResults);return this._eventHandles=[n.on("mousedown",this._onControlMouseDown,this),n.on("click",this._onControlClick,this),o.on("keydown",this._onInputKeydown,this),o.on("keyup",this._onInputKeyup,this),r.delegate("click",this._onSuggestionClick,"."+a.searchResultsItem,this),i.on("mapMousedown",this._onMapMousedown,this),i.on("mapRightClick",this._onMapRightClick,this),i.on("markerMousedown",this._onMarkerMousedown,this)],e.UA.mobile?t.default.Browser.touch&&this._eventHandles.push(n.on("touchstart",this._onControlTouchStart,this),n.on("touchend",this._onControlTouchEnd,this)):this._eventHandles.push(n.on("mouseenter",this._onControlMouseEnter,this),n.on("mouseleave",this._onControlMouseLeave,this)),this._map=s,this._mapContainer=e.one(s.getContainer()),this._searchButton=n.one("."+a.searchSubmitButton),this._spinner=n.one("."+a.spinner),n.getDOMNode()},onRemove:function(){new e.EventHandle(this._eventHandles).detach(),this._eventHandles=null,this._containerYNode.empty(),this._containerYNode=null,this._container=null,this._searchInput=null,this._places=null,this._lastLookupValue=null,this._mapContainer=null},_clearState:function(){var e=this._smugMap,s=e.getDraggableMarker();return e.fitWorld(),s&&e.removeMarker(s),this._searchInput.set("value",null),this._clearSuggestionList(),this._lastLookupValue=null,this},_clearSuggestionList:function(){return this._searchResults.empty().removeClass(this.classNames.expandedSearchResults).setStyle("height",null),this._places=null,this._selectedSuggestionIndex=null,this},_handleLookupError:function(e){console.log(e)},_handleLookupResponse:function(e){0!==e.length?e.length>1?(this._hasSuggestions=!0,this._renderSuggestionContent(this._prepareSuggestions(e)),this._selectSuggestion()):this._clearSuggestionList()._positionDraggableMarkerFromPlace(e[0],{moveMap:!0}):this._renderSuggestionContent()},_hideProcessing:function(){var e=this.classNames,s=this._map;return s.dragging.enable(),s.touchZoom.enable(),s.doubleClickZoom.enable(),s.scrollWheelZoom.enable(),this._searchButton.set("disabled",!1).removeClass("sm-hidden"),this._spinner.removeClass(e.spinnerVisible),this},_lookup:function(){var e=this._searchInput.get("value"),s=this._normalizeLookupData(e),t=this._lastLookupValue,a=this;this._lookupInProgress||!e||t&&e===t||(this._lastLookupValue=e,this._hasSuggestions=!1,this._searchResultsMinimized=!1,this._queryNominatim(s).then((function(e){a._hideProcessing()._handleLookupResponse(e)}),(function(e){a._hideProcessing()._handleLookupError(e)})))},_minimizeSuggestions:function(){if(this._hasSuggestions){var e=this.classNames,s=this._searchResults;s.all("."+e.searchResultsItem).each((function(s){s.hasClass(e.searchResultsItemSel)||s.addClass("sm-hidden")})),s.addClass(e.searchResultsMinimized),this._searchResultsMinimized=!0}},_normalizeLookupData:function(e){var s,t,a=e.split(/,\s*/);return a&&2===a.length&&(s=i.test(a[0]),t=o.test(a[1])),s&&t?{lat:a[0],lng:a[1]}:e.trim()},_positionDraggableMarkerFromPlace:function(e,s){s||(s={});var t=this._map,a=e.lat,n=e.lon||e.lng,i=e.boundingBox||e.boundingbox;this._smugMap.addDraggableMarker([a,n]),s.moveMap&&(i?(t.fitBounds([[i[0],i[2]],[i[1],i[3]]]),t.getZoom()===t.getMaxZoom()&&t.setZoom(16)):t.setView([a,n],16))},_prepareSuggestions:function(e){var s,t=[];this._places=e;for(var a=0;a<e.length;a++)s=e[a],t.push({displayName:s.display_name,index:a});return t},_queryNominatim:function(s){var t,a=this;return"string"==typeof s&&(t=n({address:s,limit:5})),new e.Promise((function(n,i){t?(a._lookupInProgress=!0,a._showProcessing(),a.fire("lookup",{value:s}),e.jsonp(t,{on:{success:function(e){a._lookupInProgress=!1,n(e)},failure:function(e){a._lookupInProgress=!1,i(e)},timeout:function(){a._lookupInProgress=!1,i("Request timed out")}}})):n([s])}))},_renderSuggestionContent:function(e){e||(e=[]);var s=this._searchResults;s.setHTML(r({inputValue:this._searchInput.get("value"),isEmpty:0===e.length,places:e})),s.addClass(this.classNames.expandedSearchResults).setStyle("height",28*(e.length||1)+"px")},_selectSuggestion:function(e){e||(e=0);var s=this._places[parseInt(e,10)],t=this.classNames;this._searchResults.all("."+t.searchResultsItem).each((function(s){s.getData("index")==e?s.addClass(t.searchResultsItemSel):s.removeClass(t.searchResultsItemSel)})),this._positionDraggableMarkerFromPlace(s,{moveMap:!0}),this._selectedSuggestionIndex=e},_showProcessing:function(){var e=this.classNames,s=this._map;return s.dragging.disable(),s.touchZoom.disable(),s.doubleClickZoom.disable(),s.scrollWheelZoom.disable(),this._searchResults.removeClass(e.expandedSearchResults),this._searchButton.set("disabled",!0).addClass("sm-hidden"),this._spinner.addClass(e.spinnerVisible),this},_onControlClick:function(e){var s=e.target.ancestor(".sm-button"),t=s&&s.getData("value")||e.target.getData("value");switch(e.halt(!0),this._map.doubleClickZoom.disable(),t){case"clear":this._clearState();break;case"drop":this._smugMap.addDraggableMarker(this._map.getCenter());break;case"lookup":this._lookup()}},_onControlMouseDown:function(e){var s=this._map,t=this._smugMap;s.dragging.disable(),3===e.button&&(t.disableContextMenu=!0),this._mapContainer.once("mouseup",(function(){s.dragging.enable(),3===e.button&&(t.disableContextMenu=!1)}))},_onControlMouseEnter:function(){this._map.scrollWheelZoom.disable();var e=this._searchResults;this._hasSuggestions&&this._searchResultsMinimized&&(e.all(".sm-hidden").removeClass("sm-hidden"),e.removeClass(this.classNames.searchResultsMinimized),this._searchResultsMinimized=!1)},_onControlMouseLeave:function(){this._map.scrollWheelZoom.enable()},_onControlTouchEnd:function(e){var s=this._map;e.touches&&1===e.touches.length&&(e.stopPropagation(),s.dragging.enable(),s.doubleClickZoom.enable())},_onControlTouchStart:function(e){var s=this._map;e.touches&&1===e.touches.length&&(e.stopPropagation(),s.dragging.disable(),s.doubleClickZoom.disable())},_onInputKeydown:function(e){var s=e.charCode;this._places&&(38!==s&&40!==s||e.preventDefault())},_onInputKeyup:function(e){var s,t=e.charCode,a=this._places,n=a&&a.length,i=this._selectedSuggestionIndex;switch(t){case 13:e.preventDefault(),this._lookup();break;case 38:case 40:a&&null!==i&&((s=(38===t?-1:1)+i)<0&&(s=n-1),s>=n&&(s=0),this._selectSuggestion(s))}},_onMapMousedown:function(s){var t=e.one(s.originalEvent.target);this._hasSuggestions&&!t.ancestor("."+this.classNames.container,!0)&&this._minimizeSuggestions()},_onMapRightClick:function(e){this._containerYNode.contains(e.originalEvent.target)&&e.preventDefault()},_onMarkerMousedown:function(){this._hasSuggestions&&this._minimizeSuggestions()},_onSuggestionClick:function(e){this._selectSuggestion(e.currentTarget.getData("index"))}});e.augment(u,e.EventTarget);var h=u;exports.default=h}(),SM.currentModule=null}),"",{requires:["jsonp","leaflet","promise","sm-fields","sm-image-tools-geodata-search-control","template-micro"]});
YUI.add("sm-image-tools-geodata-templates",(function(a){SM.currentModule="sm-image-tools-geodata-templates";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a.Template.Micro,t={dataTable:e.compile('<table class="<%= data.classNames.dataTable %>"><tbody><tr><td class="<%= data.classNames.valueLabel %>"><%= data.strings.latitude %></td><td class="<%= data.classNames.value %> <%= data.classNames.latitudeValue %>"><% if (data.latLng) { %><%= data.latLng.lat %><% } %></td></tr><tr><td class="<%= data.classNames.valueLabel %>"><%= data.strings.longitude %></td><td class="<%= data.classNames.value %> <%= data.classNames.longitudeValue %>"><% if (data.latLng) { %><%= data.latLng.lng %><% } %></td></tr></tbody></table>'),markerPopup:e.compile('<div class="<%= data.classNames.markerPopupDetails %>"><%== data.renderedDataTable %></div>'),toolContainer:e.compile('<div class="sm-image-tool <%= data.classNames.toolContent %>"><div class="<%= data.classNames.mapContainer %>"><div class="<%= data.classNames.overlayEnlarge %> sm-hidden"><div>'+a.SM.Templates.button({icon:"ZoomIn",noChrome:!0,value:"expand"})+'<%= data.strings.newLocation %></div></div></div><%== Y.SM.Templates.button({className: data.classNames.enlargeMap,icon     : "ZoomIn",title    : "Enlarge Map",value    : "expand"}) %><%== data.renderedDataTable %><%== Y.SM.Templates.button({ className: data.classNames.clearData, label: data.strings.removeData, size: "small", value: "clear" }) %></div>')};exports.default=t}(),SM.currentModule=null}),"",{requires:["template-micro"]});
YUI.add("sm-image-tools-geodata-view",(function(e){SM.currentModule="sm-image-tools-geodata-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var a=babelHelpers.interopRequireDefault(t("sm-image-tools-geodata-map")),s=babelHelpers.interopRequireDefault(t("sm-image-tools-geodata-panel")),i=babelHelpers.interopRequireDefault(t("leaflet")),o=babelHelpers.interopRequireDefault(t("sm-image-tools-geodata-templates")),n=t("sm-image-tools-geodata-constants");const l=e.SM.ImageTools;e.namespace("SM.ImageTools").LocationData=e.Base.create("locationDataToolView",l.Base,[],{classNames:{clearData:"sm-image-tool-geo-clear",dataTable:"sm-image-tool-geo-latlng-values",enlargeMap:"sm-image-tool-geo-expand",latitudeValue:"sm-image-tool-geo-lat-value",longitudeValue:"sm-image-tool-geo-lng-value",mapContainer:"sm-image-tool-geo-map",overlayEnlarge:"sm-image-tool-geo-overlay-expand",toolContent:"sm-image-tool-geo",value:"sm-image-tool-geo-value",valueLabel:"sm-image-tool-geo-label"},destructor:function(){this._detachGeoEvents(),this._mapView.destroy({remove:!0}),this._mapView=null,this._mapContainer=null,this._clearButton=null,this._dataTable=null,this._latitudeValue=null,this._longitudeValue=null,this._launchButton=null,this._previousLatLng=null},_renderTool:function(){var t,a,s=this._container,i=this.classNames;a=o.default.dataTable({classNames:i,strings:n.STRINGS}),this._toolContainer=t=e.Node.create(o.default.toolContainer({classNames:i,renderedDataTable:a,strings:n.STRINGS})),this._clearButton=t.one("."+i.clearData),this._dataTable=t.one("."+i.dataTable),this._latitudeValue=t.one("."+i.latitudeValue),this._longitudeValue=t.one("."+i.longitudeValue),this._mapContainer=t.one("."+i.mapContainer),this._launchOverlay=t.one("."+i.overlayEnlarge),this._launchButton=t.one("."+i.enlargeMap),s.setHTML(t),this._setMapHeight(this._getContainerWidth()-48)._createMap(),this._attachGeoEvents()._resetUI()},_resetUI:function(){var t=this._getImageLocationData(),a=e.Object.size(t),s=this._mapView;s.removeAllMarkers(),s.fitWorld(),this._previousLatLng=null,this.draggableMarker=null,0===a?this._setMapEmpty():this._setMapNotEmpty(t)},_attachGeoEvents:function(){this._detachGeoEvents();var e=this._mapView;return this._geoEventHandles=[this._toolContainer.delegate("click",this._onToolButtonClick,".sm-button",this),this._launchOverlay.on("click",this._onLaunchOverlayClick,this),e.after("markerAdd",this._afterMarkerAdd,this),e.on("markerMove",this._onMarkerMove,this),e.after("markerDragEnd",this._afterMarkerDragEnd,this)],this},_createMap:function(){var e=this._mapView=new a.default({container:this._mapContainer,minZoom:1,readOnly:!0,render:!0,satellite:!1,zoomControl:!1});return e.render(),e},_detachGeoEvents:function(){new e.EventHandle(this._geoEventHandles).detach(),this._geoEventHandles=null},_getImageLocationData:function(){var t=this.get("images"),a={};return e.Array.each(t,(function(e){var t=parseFloat(e.get("Latitude")),s=parseFloat(e.get("Longitude")),i=t+","+s;(t||s)&&(a[i]?a[i]+=1:a[i]=1)})),a},_removeData:function(){this._mapView.removeAllMarkers(),this._setMapEmpty()._updateResources()},_setMapEmpty:function(){return this._mapView.fitWorld(),this._updateLatLngValues(),this._clearButton.set("disabled",!0),this._launchOverlay.removeClass("sm-hidden"),this._launchButton.addClass("sm-hidden"),this},_setMapNotEmpty:function(t){var a,s,o=e.Object.size(t),l=e.Object.values(t),r=1===o&&l[0]===this._imageCount,u=this._mapView;this._clearButton.set("disabled",!1),this._launchOverlay.toggleClass("sm-hidden",r),this._launchButton.toggleClass("sm-hidden",!r),this._bulkMode&&!r?this._dataTable.all("."+this.classNames.value).setHTML(n.STRINGS.multipleCoords):(a=e.Object.keys(t)[0].split(","),s=new i.default.LatLng(a[0],a[1]),this._previousLatLng=s,u.addDraggableMarker(s))},_setMapHeight:function(e){e||(e=this._getContainerWidth()/2);var t=this._mapView;return this._mapContainer.setStyle("height",parseInt(e,10)+"px"),t&&t.map.invalidateSize(),this},_showEnlargedMapPanel:function(){var e=this._previousLatLng,t=e&&e.lat||0,a=e&&e.lng||0,i=this._mapPanel=new s.default({classNames:this.classNames,toolView:this,visible:!1});(t||a)&&i.set("markerLatLng",[t,a]),i.render().centered(),i.show(),i.onceAfter("visibleChange",this._afterPanelHide,this),this.createBaseAnalyticsEvent("Open Map").log()},_updateLatLngValues:function(e){e||(e=new i.default.LatLng(0,0)),this._latitudeValue.setHTML(e.lat||n.STRINGS.noCoords),this._longitudeValue.setHTML(e.lng||n.STRINGS.noCoords),this._clearButton.set("disabled",!(e.lat||e.lng)),this._previousLatLng=e},_updateResources:function(t){t||(t=new i.default.LatLng(0,0)),e.Array.each(this.get("images"),(function(e){e.update({Latitude:t.lat,Longitude:t.lng})})),this.set("unsaved",!0)},_afterMarkerAdd:function(e){var t=e.latLng,a=this._previousLatLng;this._launchOverlay.addClass("sm-hidden"),this._launchButton.removeClass("sm-hidden"),this._mapView.map.setView(t,7),this._updateLatLngValues(t),a&&a.equals(t)||this._updateResources(t)},_afterMarkerDragEnd:function(e){this._updateResources(e.latLng)},_afterPanelHide:function(){var e=this._mapPanel,t=e.getLatLng();t&&this._mapView.addDraggableMarker(t),e.destroy(!0),this._mapPanel=null},_onLaunchOverlayClick:function(e){e.stopPropagation(),this._showEnlargedMapPanel()},_onToolButtonClick:function(e){if(1===e.button)switch(e.currentTarget.getData("value")){case"clear":this._removeData();break;case"expand":this._showEnlargedMapPanel()}},_onMarkerMove:function(e){var t=e.latLng,a=this._previousLatLng;a&&a.equals(t)||(this._updateLatLngValues(t),e.drag||(this._mapView.map.setView(t,7),this._updateResources(t)))}},{STRINGS:n.STRINGS,toolName:"Location Data",toolId:"locationData",ATTRS:{}})}(),SM.currentModule=null}),"",{requires:["leaflet","sm-image-tools-base-view","sm-image-tools-geodata-constants","sm-image-tools-geodata-map","sm-image-tools-geodata-panel","sm-image-tools-geodata-search-control","sm-image-tools-geodata-templates"]});
YUI.add("sm-image-tools-rotate-view",(function(t){SM.currentModule="sm-image-tools-rotate-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var SM=t.SM,e=SM.Templates,i=SM.ImageStack,a=t.Node,o=t.Template.Micro.compile('<div class="sm-image-tool sm-image-tool-rotate"><div class="<%= data.classNames.previewContainer %>"></div><div class="<%= data.classNames.buttons %>">'+e.button({icon:"RotateLeft",value:"left"})+e.button({icon:"ReflectHorizontal",value:"flipHorizontal"})+e.button({icon:"ReflectVertical",value:"flipVertical"})+e.button({icon:"RotateRight",value:"right"})+"</div></div>");t.namespace("SM.ImageTools").Rotate=t.Base.create("sm-image-tools-rotate-view",SM.ImageTools.Base,[],{_batchQueue:!0,classNames:{previewContainer:"sm-rotate-preview-container",preview:"sm-rotate-preview",buttons:"sm-rotate-buttons",topImage:"sm-rotate-top-image",topImageAnimated:"sm-rotate-top-image-animated",horizontalStack:"sm-image-stack-horizontal",verticalStack:"sm-image-stack-vertical",stackInfo:"sm-image-stack-info",stackImage:"sm-image-stack-image"},flipHorizontal:!1,flipVertical:!1,rotation:0,initializer:function(){this._eventHandles.push(this.on("visibleChange",this._onVisibleChange,this))},destructor:function(){this._preview.destroy(!0),this._preview=null,this._previewContainer.destroy(!0),this._previewContainer=null},_applyMutation:function(){var e=[],i=t.UA.ie,a=t.UA.gecko;this.flipHorizontal&&(i&&i<=11||a?e.push("scaleX(-1)"):e.push("rotateY(180deg)")),this.flipVertical&&(i&&i<=11||a?e.push("scaleY(-1)"):e.push("rotateX(180deg)")),e.push("rotate("+this.rotation+"deg)"),this._topImage.one("."+this.classNames.stackImage).setStyles(this._prefixMutation(e.join(" ")))},_batchQueueSubmit:function(){var e,i=this.rotation,a=this.flipHorizontal,o=this.flipVertical;return a&&o&&(i+=180,a=!1,o=!1),e=o?"Vertical":a?"Horizontal":"None",SM.Resource.Image.rotateImages(this.get("images"),{degrees:i,flip:e}).then((function(e){return t.SM.Toast.display("Please be patient, we will rotate your photos while you browse."),e}))},_normalizeSubmitData:function(t){return{rotate_degrees:t&&t.Degrees,flip:t&&t.Flip}},_prefixMutation:function(t){return{"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t}},_renderPreview:function(){var t,e=this,o=this.get("images"),s=o[0],r=this._previewContainer,n=this.classNames;this._preview=a.create('<div class="'+n.preview+'"></div>'),this._getUsablePreviewSize(s).then((function(a){var s=a.Url,l=e._fitPreview(a.Width,a.Height,!0),h=l.width,c=l.height;r.setStyle("height",Math.max(h,c)),r.setStyle("width",Math.max(h,c)),e._topImage=t=i.render(s,1,h,c,{container:e._preview}).addClass(n.topImage),e.get("animated")&&t.addClass(n.topImageAnimated),o.length>1&&e._renderStacks(h,c,t),h>=c&&t.setStyle("top",Math.floor(h/2-c/2)),e._resetMutation(),r.setHTML(e._preview)}))},_renderStacks:function(t,e){var o,s,r=this.get("images"),n=this.classNames;if(this._horizontalStack=o=i.render("",r.length,t,e,{container:this._topImage}).addClass(n.horizontalStack),o.getDOMNode().lastChild.style.backgroundImage="",this._verticalStack=s=i.render("",r.length,e,t,{container:this._preview}).addClass(n.verticalStack),s.getDOMNode().lastChild.style.backgroundImage="",s.setStyle("marginLeft",Math.floor(-e/2)),s.hide(),r.length>i.maxStackSize){var l=a.create('<div class="'+n.stackInfo+'">'+r.length+"</div>");o.appendChild(l),s.appendChild(l.cloneNode(!0))}t<e&&s.setStyle("top",Math.floor(e/2-t/2))},_renderTool:function(){var t=this.get("container"),e=this.classNames;return t.setHTML(o({classNames:e})),this._previewContainer=t.one("."+e.previewContainer),this._eventHandles.push(t.one("."+e.buttons).delegate("click",this._onRotateButtonClick,".sm-button",this)),this},_resetMutation:function(){this._resetRotationAttrs(),this._topImage.one("."+this.classNames.stackImage).setStyles(this._prefixMutation(""))},_resetRotationAttrs:function(){this.flipHorizontal=!1,this.flipVertical=!1,this.rotation=0},_resetUI:function(){this._preview&&this._preview.destroy(!0),this._preview=null,this._horizontalStack=null,this._verticalStack=null,this._renderPreview()},_rotateLeft:function(){var t=this.flipHorizontal,e=this.flipVertical;t&&!e||!t&&e?this.rotation+=90:this.rotation-=90},_rotateRight:function(){var t=this.flipHorizontal,e=this.flipVertical;t&&!e||!t&&e?this.rotation-=90:this.rotation+=90},_toggleStacks:function(){var t=this._horizontalStack,e=this._verticalStack;t&&e&&(this.get("animated")?t.hasAttribute("hidden")?e.hide("fadeOut",{duration:.0625},(function(){t.show("fadeIn",{duration:.0625})})):t.hide("fadeOut",{duration:.0625},(function(){e.show("fadeIn",{duration:.0625})})):(e.toggleView(),t.toggleView()))},_onRotateButtonClick:function(t){switch(t.currentTarget.getData("value")){case"left":this._toggleStacks(),this._rotateLeft();break;case"flipHorizontal":this.flipHorizontal=!this.flipHorizontal;break;case"flipVertical":this.flipVertical=!this.flipVertical;break;case"right":this._toggleStacks(),this._rotateRight()}this._applyMutation(),this.set("unsaved",!0)},_onVisibleChange:function(t){t.newVal&&this._resetUI()}},{toolName:"Rotate",toolId:"rotate",ATTRS:{animated:{valueFn:function(){var e=t.UA.ie;return!(t.UA.gecko||e&&e<=11)}}}})}(),SM.currentModule=null}),"",{requires:["sm-image-model","sm-image-stack","sm-image-tools-base-view","sm-toast"]});
YUI.add("sm-image-tools-title-caption-keywords-view",(function(e){SM.currentModule="sm-image-tools-title-caption-keywords-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var o,i,n,s,a,r,l=babelHelpers.interopRequireDefault(t("prop-types")),d=babelHelpers.interopRequireDefault(t("react")),c=babelHelpers.interopRequireDefault(t("react-dom")),u=babelHelpers.interopRequireDefault(t("classnames")),p=babelHelpers.interopRequireDefault(t("create-class"));!function(){var t=e.Template.Micro,i=SM.import("prop-types"),n=SM.import("react"),s=SM.import("react-dom"),a=e.SM.Component,r=SM.import("classnames"),l=SM.import("sm-component-textbox"),d=SM.import("sm-component-overheadformfield"),{Select:c,SelectOption:u}=SM.import("sm-component-select"),p=SM.import("create-class"),h=SM.import("sm-component-textarea"),m=a.UnderlineFormField,y=t.compile('<% switch (data.action) { %><% case "append": %><% case "prepend": %>Enter additional <%= data.name %> text for <%= data.count %> items...<% break; %><% case "replace": %>Enter a new <%= data.name %> for <%= data.count %> items...<% break; %><% default: %>Enter a <%= data.name %>...<% } %>'),w=t.compile("This text will be added <%= data.place %> any existing <%= data.name %> on each of the <%= data.count %> items."),f=p({propTypes:{className:i.string.isRequired,hidden:i.bool.isRequired,label:i.string.isRequired,onChange:i.func.isRequired,value:i.string.isRequired},UNSAFE_componentWillReceiveProps:function(e){"string"==typeof e.value&&""===e.value&&this.setState({defaultDisabled:!1})},getDefaultProps:function(){return{className:"",hidden:!0,value:""}},getInitialState:function(){return{defaultDisabled:!1}},render:function(){var e=this.props.className;return this.props.hidden&&(e+=" sm-hidden"),n.createElement(m,{className:e,label:this.props.label},n.createElement(c,{name:this.props.name,noChrome:!0,value:this.props.value,onChange:this._handleChange},n.createElement(u,{disabled:!!this.state.defaultDisabled,value:""},"Choose Action"),n.createElement(u,{value:"replace"},"Replace All"),n.createElement(u,{value:"remove"},"Remove All"),n.createElement(u,{value:"append"},"Insert After"),n.createElement(u,{value:"prepend"},"Insert Before")))},_handleChange:function(e){this.state.defaultDisabled||this.setState({defaultDisabled:!0}),this.props.onChange(e)}});o=p({propTypes:{bulkCaption:i.string.isRequired,caption:i.string.isRequired,isBulk:i.bool.isRequired,onCaptionChange:i.func.isRequired,onCaptionActionChange:i.func.isRequired,onTitleChange:i.func.isRequired,title:i.string.isRequired,bulkTitle:i.string.isRequired},getDefaultProps:function(){return{caption:"",bulkCaption:"",isBulk:!0,title:"",bulkTitle:""}},getInitialState:function(){return{bulkCaption:this.props.bulkCaption,caption:this.props.caption,title:this.props.title,bulkTitle:this.props.bulkTitle}},UNSAFE_componentWillReceiveProps:function(e){this.setState(e)},focus:function(){s.findDOMNode(this.refs.titleField).children[1].focus()},render:function(){var e=this.props.isBulk,t=this.state.bulkTitle,o=this.state.bulkCaption,i={"sm-hidden":e&&(!t||"remove"===t)},s={"sm-hidden":e&&(!o||"remove"===o)};return n.createElement("div",null,n.createElement("h2",null,"Info"),n.createElement("div",{className:"sm-image-tool-titlecaption-title"},n.createElement(f,{className:"sm-image-tool-titlecaption-action",hidden:!e,label:"Title",name:"bulkTitle",onChange:this._handleTitleActionChange,value:t}),n.createElement(d,{className:r(i),label:e?null:"Title",ref:"titleField"},n.createElement(l,{name:"title",onChange:this._handleTitleChange,placeholder:this._getPlaceholderText(t,"title"),title:this._getHoverText(t,"title"),value:this.state.title}))),n.createElement("div",{className:"sm-image-tool-titlecaption-caption"},n.createElement(f,{className:"sm-image-tool-titlecaption-action",hidden:!e,label:"Caption",name:"bulkCaption",onChange:this._handleCaptionActionChange,value:o}),n.createElement(d,{className:r(s),label:e?null:"Caption"},n.createElement(h,{name:"caption",onChange:this._handleCaptionChange,placeholder:this._getPlaceholderText(o,"caption"),rows:"5",title:this._getHoverText(o,"caption"),value:this.state.caption}))))},_getHoverText:function(e,t){var o=null;if(this.props.isBulk)switch(e){case"append":case"prepend":o=w({count:this.props.count,name:t,place:"append"===e?"after":"before"})}return o},_getPlaceholderText:function(e,t){return y({action:e,count:this.props.count,name:t})},_handleCaptionActionChange:function(e){this.setState({bulkCaption:e.target.value}),this.props.onCaptionActionChange(e)},_handleCaptionChange:function(e){var t=e.target.value;t!==this.state.caption&&(this.setState({caption:t}),this.props.onCaptionChange(e))},_handleTitleActionChange:function(e){this.setState({bulkTitle:e.target.value}),this.props.onTitleActionChange(e)},_handleTitleChange:function(e){var t=e.target.value;t!==this.state.title&&(this.setState({title:t}),this.props.onTitleChange(e))}})}(),i=e.Array,n=SM.import("react"),s=SM.import("react-dom"),a=SM.import("lodash"),r=e.Template.Micro.compile("Saving will permanently change the <%= data.field %> for the selected images. Are you sure you want to do this?"),e.namespace("SM.ImageTools").TitleCaptionKeywords=e.Base.create("titleCaptionKeywordsToolView",e.SM.ImageTools.Base,[],{initializer:function(){this._titleCaptionFormValues={},this._changes={},this._topKeywords=[],this._initKeywordMap(),this._eventHandles.push(this.on("visibleChange",this._onVisibleChange,this),e.on("windowresize",this._onWindowResize,null,this),this.on("submitSuccess",this._onSubmitSucess,this))},destructor:function(){s.unmountComponentAtNode(this._titleCaptionDOMNode),s.unmountComponentAtNode(this._keywordsDOMNode)},addKeyword:function(e,t){if(t||(t={}),""!==e){var o=t.image;o?this._addKeywordToImage(e,o):this._addKeywordToAllImages(e),this._keywordMap.push(this._keywordMap.splice(this._findKeyword(e),1)[0]),this._renderKeywordList(),this._setUnsaved("keywords"),this._fitKeywordList();var i=this._container.one(".sm-keywords-all .sm-keywords-list");i.set("scrollTop",i.get("scrollHeight"))}},focus:function(){var e=this._bulkMode?this._keywordsComponent:this._titleCaptionComponent;e&&e.focus()},removeKeyword:function(e){var t,o,n=this.get("images"),s=this._findKeyword(e);-1!==s&&(this._keywordMap.splice(s,1),i.each(n,(function(i){t=i.get("KeywordArray"),-1!==(o=t.indexOf(e))&&(t.splice(o,1),i.update({KeywordArray:t}))}),this),this._renderKeywordList(),this._setUnsaved("keywords"),this._fitKeywordList())},replaceKeyword:function(e,t){var o,i,n=this._findKeyword(t);"number"==typeof e?(o=this._keywordMap[e].keyword,i=e):"string"==typeof e&&(o=e,i=this._findKeyword(e)),o!==t&&(""===t?this.removeKeyword(o):-1!==i&&-1!==n?(this._keywordMap.splice(i,1),this._replaceKeyword(o,t),this._renderKeywordList(),this._setUnsaved("keywords")):-1!==i&&-1===n&&(this._keywordMap[i].keyword=t,this._replaceKeyword(o,t),this._renderKeywordList(),this._setUnsaved("keywords")))},_normalizeSubmitData:function(){var e,t=a.assign({},this._changes);if(t.bulkCaption&&"remove"!==t.bulkCaption&&!t.caption&&delete t.bulkCaption,t.bulkTitle&&"remove"!==t.bulkTitle&&!t.title&&delete t.bulkTitle,e={title_updated:!!t.title,caption_updated:!!t.caption,keywords_updated:!!t.keywords},t.bulkCaption){var o=t.bulkCaption;e.bulk_caption_update=o.charAt(0).toUpperCase()+o.slice(1)}if(t.bulkTitle){var i=t.bulkTitle;e.bulk_title_update=i.charAt(0).toUpperCase()+i.slice(1)}return e},_prepareImages:function(){var t=this._titleCaptionFormValues,o=this.get("images"),i=t.bulkCaption,n=t.bulkTitle;return this._keywordsComponent.applyUnsavedKeyword(),this._bulkMode?o.map((function(t){var o,s,a={};i&&(o=this._formatNewTitleCaption("caption",t.get("Caption"),i)),n&&(s=this._formatNewTitleCaption("title",t.get("Title"),n)),"string"==typeof o&&(a.Caption=o),"string"==typeof s&&(a.Title=s),e.Object.isEmpty(a)||t.update(a)}),this):o[0].update({Title:t.title,Caption:t.caption}),o},_renderTool:function(){this._renderTitleCaption(),this._renderKeywords(),this._eventHandles.push(this._container.on("keyup",this._onKeyup,this))},_resetUI:function(){this._changes={},this._setTitleCaptionFields(),this._isVisible?(this._initKeywordMap(),this._keywordsComponent&&(this._renderKeywordList(),this._fitKeywordList())):this._delayedRender=!0},_addKeywordToAllImages:function(e){for(var t=this.get("images"),o=0,i=t.length;o<i;++o)this._addKeywordToImage(e,t[o])},_addKeywordToImage:function(e,t){-1===t.get("KeywordArray").indexOf(e)&&(t.push("KeywordArray",e),this._addKeywordToMap(e))},_addKeywordToMap:function(e){var t=this._findKeyword(e);-1===t?this._keywordMap.push({keyword:e,numImages:1}):this._keywordMap[t].numImages++},_filterSuggestedKeywords:function(){return i.filter(this._topKeywords,(function(e){return-1===this._findKeyword(e)}),this)},_findKeyword:function(e){for(var t=this._keywordMap,o=0,i=t.length;o<i;++o)if(t[o].keyword===e)return o;return-1},_fitKeywordList:function(){var e=this._container,t=e.get("offsetHeight"),o=e.one(".yui3-aclist");o.setStyle("maxHeight",t-o.get("offsetTop"))},_formatNewTitleCaption:function(e,t,o){var i=this._titleCaptionFormValues[e]||null;switch(o){case"append":i&&(i=t+" "+i);break;case"prepend":i&&(i=i+" "+t);break;case"remove":i=""}return i},_initKeywordMap:function(){var e=this.get("images");this._keywordMap=[],i.each(e,(function(e){for(var t=e.get("KeywordArray"),o=0,i=t.length;o<i;++o)this._addKeywordToMap(t[o])}),this),this._sortKeywords()},_loadSuggestedKeywords:function(){var t=this;e.SM.Resource.User.loadByNickName(e.SM.Page.owner.nickName,{expand:{UserTopKeywords:{}}}).then((function(e){e.hasExpansion("UserTopKeywords")?(t._topKeywords=e.getExpansion("UserTopKeywords").get("TopKeywords"),t._renderKeywordList()):t._topKeywords=[]}))},_renderKeywords:function(){this._container.append('<div class="sm-image-tool sm-image-tool-keywords"></div>')},_renderKeywordList:function(){this._keywordsComponent=s.render(n.createElement(e.SM.Keywords.KeywordList,{keywordMap:this._keywordMap,numImages:this._imageCount,onAddKeyword:this.addKeyword.bind(this),onAuxButtonClick:this._onAuxButtonClick.bind(this),onRemoveKeyword:this.removeKeyword.bind(this),onReplaceKeyword:this.replaceKeyword.bind(this),suggestedKeywords:this._filterSuggestedKeywords()}),this._keywordsDOMNode)},_renderTitleCaption:function(){var e=this._container.appendChild('<div class="sm-image-tool-titlecaption"></div>');this._titleCaptionDOMNode=e.getDOMNode(),this._renderTitleCaptionComponent(),this._setTitleCaptionFields()},_renderTitleCaptionComponent:function(e){this._titleCaptionComponent=s.render(n.createElement(o,babelHelpers.extends({count:this._imageCount,isBulk:this._bulkMode,onCaptionChange:this._onFormFieldChange.bind(this),onCaptionActionChange:this._onFormFieldChange.bind(this),onTitleChange:this._onFormFieldChange.bind(this),onTitleActionChange:this._onFormFieldChange.bind(this)},e)),this._titleCaptionDOMNode)},_replaceKeyword:function(e,t){i.each(this.get("images"),(function(o){var i=o.get("KeywordArray"),n=i.indexOf(e);-1!==n&&(i.splice(n,1),-1===i.indexOf(t)&&i.push(t),o.update({KeywordArray:i}))}),this)},_setTitleCaptionFields:function(){var e=this.get("images")[0],t=this._bulkMode,o=t?"":e.get("Caption"),i=t?"":e.get("Title");this._renderTitleCaptionComponent({caption:o,bulkCaption:"",title:i,bulkTitle:""}),this._titleCaptionFormValues={caption:o,bulkCaption:"",title:i,bulkTitle:""},this.set("confirmMessage","")},_setUnsaved:function(e){"keywords"===e&&(this._changes.keywords=!0);var t=this._changes;if(this._bulkMode&&(t.caption||t.title)){var o,n=[];switch(i.each(["title","caption","keywords"],(function(e){t[e]&&n.push(e)})),n.length){case 1:o=n[0];break;case 2:o=n[0]+" and "+n[1];break;case 3:o=n[0]+", "+n[1]+", and "+n[2]}this.set("confirmMessage",r({field:o}))}else this.set("confirmMessage","");this.set("unsaved",!0)},_sortKeywords:function(){this._keywordMap.sort((function(t,o){return e.ArraySort.naturalCompare(t.keyword,o.keyword)})),this._keywordsComponent&&this._renderKeywordList()},_onAuxButtonClick:function(t){var o=this._keywordMap.slice(0);switch(e.one(t.currentTarget).getData("value")){case"removeAll":this._keywordMap=[],i.each(this.get("images"),(function(e){e.update({KeywordArray:[]})})),this._renderKeywordList(),this._setUnsaved("keywords");break;case"removeNumeric":i.each(o,(function(e){var t=e.keyword;t.match(/^[0-9]+$/)&&this.removeKeyword(t)}),this)}this._renderKeywordList()},_onFormFieldChange:function(e){var t=e.target.name,o=e.target.value,i=this._bulkMode,n=this._changes;switch(this._titleCaptionFormValues[t]=o,t){case"bulkCaption":case"bulkTitle":var s="bulkCaption"===t?"caption":"title";n[t]=o,this._titleCaptionFormValues[s]||"remove"===o?"remove"===o&&(n[s]=!0):delete n[s];break;default:!i||i&&o?n[t]=!0:delete n[t]}n.caption||n.keywords||n.title?this._setUnsaved("titleCaption"):this.set("unsaved",!1)},_onKeyup:function(e){"INPUT"===e.target.get("nodeName")&&e.stopPropagation()},_onSubmitSucess:function(){this._bulkMode&&(this._setTitleCaptionFields(),this._changes={})},_onVisibleChange:function(e){if(e.newVal){if(this._isVisible=!0,!this._keywordsComponent){var t=this._container.one(".sm-image-tool-keywords");this._keywordsDOMNode=t.getDOMNode(),this._renderKeywordList(),this._loadSuggestedKeywords(),this._fitKeywordList()}this._delayedRender&&(this._resetUI(),this._delayedRender=!1)}else this._sortKeywords(),this._isVisible=!1},_onWindowResize:function(){this._fitKeywordList()}},{toolName:"Title, Caption, and Keywords",toolId:"titleCaptionKeywords",ATTRS:{}}),e.namespace("SM.Keywords").Keyword=(0,p.default)({propTypes:{keyword:l.default.string.isRequired,section:l.default.oneOf(["all","some"]),numImages:l.default.number.isRequired,focused:l.default.bool.isRequired,editing:l.default.bool.isRequired,index:l.default.number.isRequired,onAddKeyword:l.default.func.isRequired,onRemoveKeyword:l.default.func.isRequired,onKeywordClick:l.default.func.isRequired,onKeywordBlur:l.default.func.isRequired},componentDidUpdate:function(e,t){if(this.props.editing){var o=c.default.findDOMNode(this).firstChild,i=document.createRange();i.selectNodeContents(o),i.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(i)}},render:function(){var e,t=this.props.keyword,o=this.props.section,i=this.props.numImages,n=(0,u.default)({"sm-keyword":!0,"sm-keyword-some":"some"===o,"sm-keyword-all":"all"===o,"sm-keyword-bubble-enter":!0});return"some"===o?(e=i,e+=i>1?" Images":" Image"):e="All Images ("+i+")",this.props.editing?d.default.createElement("span",{onBlur:this.props.onKeywordBlur,contentEditable:"true",className:"sm-keyword-editing"},t):d.default.createElement("li",{title:e,className:n,onClick:this.props.onKeywordClick.bind(null,o,this.props.index)},t,d.default.createElement("span",{className:"sm-fonticon sm-fonticon-"+("some"===o?"PlusSlim":"XCrossSlim"),onClick:this._onIconClick.bind(null,t)}))},_onIconClick:function(e,t){t.stopPropagation(),"some"===this.props.section?this.props.onAddKeyword(e):this.props.onRemoveKeyword(e)}}),function(){var t=SM.import("prop-types"),o=SM.import("react"),i=SM.import("react-dom"),n=SM.import("classnames"),s=SM.import("sm-component-textbox"),a=e.SM.Component,r=SM.import("sm-component-button"),l=SM.import("sm-component-icon"),d=SM.import("create-class"),c=e.SM.Keywords.Keyword,u=a.Label;e.namespace("SM.Keywords").KeywordList=d({_partitionedKeywordMap:{},propTypes:{keywordMap:t.array.isRequired,numImages:t.number.isRequired,suggestedKeywords:t.array,onAddKeyword:t.func.isRequired,onAuxButtonClick:t.func.isRequired,onRemoveKeyword:t.func.isRequired,onReplaceKeyword:t.func.isRequired},getInitialState:function(){return{focusedIndex:0,editingKeyword:!1}},UNSAFE_componentWillMount:function(){this._partitionKeywordMap(this.props.keywordMap,this.props.numImages)},componentDidMount:function(){var t=this._autocomplete=new e.AutoComplete({inputNode:i.findDOMNode(this.refs.keywordInput),source:[],resultFilters:"startsWith",maxResults:20,render:!0});t._boundingBox.plug(e.Plugin.ScrollInfo),this._autoCompleteEvents=[t.after("select",this._afterAutocompleteSelect,this),t.after("activeItemChange",this._afterAutocompleteActiveChange,this),t.after("visibleChange",this._afterAutocompleteVisibleChange,this)]},UNSAFE_componentWillReceiveProps:function(e){var t=e.suggestedKeywords;t&&this._autocomplete.set("source",t),this._partitionKeywordMap(e.keywordMap,e.numImages)},componentDidUpdate:function(e,t){var o=this.state.focusedSection,n=this.state.focusedIndex;"input"!==o&&!(null==o)&&!(null==n)&&n<this._partitionedKeywordMap[o].length&&i.findDOMNode(this.refs["keyword-"+o+"-"+n]).focus(),t.editingKeyword&&!this.state.editingKeyword&&window.getSelection().removeAllRanges()},componentWillUnmount:function(){new e.EventHandle(this._autoCompleteEvents).detach(),this._autocomplete.destroy(!0),this._autocomplete=null,this._partitionedKeywordMap=null},render:function(){var t,i,a=[],d=[];e.Array.each(this._partitionedKeywordMap.all,(function(e,t){a.push(this._createKeywordNode(e,t))}),this),e.Array.each(this._partitionedKeywordMap.some,(function(e,t){d.push(this._createKeywordNode(e,t))}),this),d.length&&(t=o.createElement("div",{className:"sm-keywords-some"},o.createElement(u,{className:"sm-keywords-list-label"},"Some Selected"),o.createElement("div",{className:"sm-keywords-list",onKeyDown:this._onKeyDown},o.createElement("ul",null,d))));var c={"sm-keywords-list":!0,"sm-keywords-list-empty":!a.length};this.props.numImages>1&&(i=o.createElement(u,{className:"sm-keywords-list-label sm-keywords-list-label-all"},"All Selected"));var p="Enter a keyword"+(this.props.numImages>1?" for "+this.props.numImages+" items":"")+"...";return o.createElement("div",null,o.createElement("h2",null,"Keywords"),o.createElement("div",{className:"sm-keywords-container"},o.createElement("div",{className:"sm-keywords-all"},i,o.createElement("div",{className:n(c),onClick:this._onKeywordsListClick,onKeyDown:this._onKeyDown},o.createElement("ul",null,a)),o.createElement(s,{className:"sm-keywords-input",noChrome:!0,onKeyDown:this._onKeyDown,onClick:this._onKeywordsListClick,placeholder:p,ref:"keywordInput"})),t),o.createElement("div",{className:"sm-keywords-aux-controls"},o.createElement(r,{className:"sm-keywords-button",noChrome:!0,onClick:this.props.onAuxButtonClick,size:"small",value:"removeAll"},o.createElement(l,{icon:"XCrossSlim"}),"Remove All"),o.createElement(r,{className:"sm-keywords-button",noChrome:!0,onClick:this.props.onAuxButtonClick,size:"small",value:"removeNumeric"},o.createElement(l,{icon:"XCrossSlim"}),"Remove Numeric")))},focus:function(){this.setState({focusedIndex:0,focusedSection:"input"}),this.refs.keywordInput.focus()},applyUnsavedKeyword:function(){""!==i.findDOMNode(this.refs.keywordInput).value&&this._keyEnter()},_createKeywordNode:function(e,t){var i=e.numImages===this.props.numImages?"all":"some",n=e.keyword,s=t===this.state.focusedIndex&&i===this.state.focusedSection;return o.createElement(c,{key:n,editing:this.state.editingKeyword&&s,focused:s,section:i,index:t,keyword:n,numImages:e.numImages,onAddKeyword:this.props.onAddKeyword,onRemoveKeyword:this.props.onRemoveKeyword,onKeywordClick:this._onKeywordClick,onKeywordBlur:this._onKeywordBlur,ref:"keyword-"+i+"-"+t})},_partitionKeywordMap:function(t,o){var i={all:[],some:[]};e.Array.each(t,(function(e){e.numImages===o?i.all.push(e):i.some.push(e)}),this),this._partitionedKeywordMap=i},_afterAutocompleteSelect:function(e){"keydown"!==e.originEvent.type&&(this.props.onAddKeyword.call(null,e.result.text),i.findDOMNode(this.refs.keywordInput).value="",this.focus())},_afterAutocompleteActiveChange:function(e){var t=e.newVal,o=this._autocomplete;t?o._boundingBox.scrollInfo.isNodeOnscreen(t,-25)||o._boundingBox.set("scrollTop",t.get("offsetTop")):o._boundingBox.set("scrollTop",0)},_afterAutocompleteVisibleChange:function(e){e.newVal&&this._autocomplete._boundingBox.scrollInfo.refreshDimensions()},_onKeyDown:function(e){var t=i.findDOMNode(this.refs.keywordInput).value,o=e.charCode||e.keyCode,n=this.state.editingKeyword,s=this.state.focusedSection,a=this.state.focusedIndex;if(!n)return"input"!==s||13!==o||""===t||(this._keyEnter({focus:!0}),!1);13===o?(e.preventDefault(),this.props.onReplaceKeyword.call(null,this._partitionedKeywordMap[s][a].keyword,e.target.textContent),this.setState({editingKeyword:!1})):27===o&&this.setState({editingKeyword:!1})},_keyEnter:function(e){e||(e={});for(var t=i.findDOMNode(this.refs.keywordInput),o=t.value.split(/,\s*|;\s*|\|\s*/),n=0,s=o.length;n<s;++n)this.props.onAddKeyword(o[n].trim());t.value="",e.focus&&this.focus()},_onKeywordBlur:function(e){this.props.onReplaceKeyword.call(null,this._partitionedKeywordMap[this.state.focusedSection][this.state.focusedIndex].keyword,e.target.textContent),this.setState({focusedSection:null,focusedIndex:null,editingKeyword:!1})},_onKeywordClick:function(e,t,o){o.stopPropagation(),this.setState({focusedSection:e,focusedIndex:t,editingKeyword:!0})},_onKeywordsListClick:function(){this.state.editingKeyword||this.focus()}})}()}(),SM.currentModule=null}),"",{requires:["arraysort","autocomplete","autocomplete-filters","classnames","lodash","template-micro","sm-component-label","sm-component-overheadformfield","sm-component-select","sm-component-textarea","sm-component-textbox","sm-component-underlineformfield","sm-image-tools-base-view","sm-resource-user","create-class"]});
YUI.add("sm-image-tools-watermark-view",(function(e){SM.currentModule="sm-image-tools-watermark-view";var t;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Array,e.namespace("SM.ImageTools").Watermark=e.Base.create("sm-image-tools-watermark-view",e.SM.ImageTools.Base,[],{classNames:{select:"sm-imageedit-tool-watermark-select",message:"sm-imageedit-tool-watermark-message",status:"sm-imageedit-tool-watermark-status",link:"sm-imageedit-tool-watermark-link"},_batchQueue:!0,destructor:function(){this._watermarks=null,this._detachUIEvents()},_batchQueueSubmit:function(){var a,s,n=this._container,i=n.one("select[name=select]").get("value"),o=n.one(".yui3-button-selected").get("value");return"on"===o&&this._watermarks?t.find(this._watermarks,(function(e){e.WatermarkID===parseInt(i,10)&&(a=e.Uri)})):"off"===o&&(s={remove:!0}),e.SM.Resource.Image.watermarkImages(this.get("images"),a,s).then((function(){e.SM.Toast.display("Please be patient, we will watermark your photos while you browse.")}))},_renderTool:function(){var a=this._container,s=[{label:"Choose a watermark...",disabled:!0},{label:"Default",value:0}],n=this.classNames,i=this,o=a.appendChild('<div class="sm-image-tool sm-image-tool-watermark"></div>');new e.Promise((function(a,l){e.SM.API2.getUser(SM.env.pageOwner.nickName,{expand:["UserWatermarks"]}).then((function(a){var l=i._watermarks=a.response.UserWatermarks;l?t.each(l,(function(e){s.push({label:e.Name,value:e.WatermarkID})})):o.append('<div class="'+n.message+'">You can apply or remove watermarks only. To create a custom watermark or change its settings, <a class="'+n.link+'" href="/watermarking/?nick='+SM.env.pageOwner.nickName+'" target="_blank">go here</a>.</div>'),o.append('<div class="'+n.status+' sm-form-field-underline"><label class="sm-label">WATERMARK</label><div class="sm-form-field-container"></div></div>'),new e.ButtonGroup({srcNode:e.Node.create(e.SM.Templates.toggle({labelOff:"REMOVE",labelOn:"APPLY",value:"on"}))}).render(o.one(".sm-form-field-container")),o.append('<div class="'+n.select+' sm-form-field-underline"><label class="sm-label">SELECT</label><div class="sm-form-field-container">'+e.SM.Templates.select({name:"select",noChrome:!0,options:s})+"</div></div>"),i._attachUIEvents(),i._fullyRendered=!0,i._resetUI()}),l)}))},_resetUI:function(){if(this._fullyRendered){var e=this._container.one(".sm-form-field-select option:disabled"),t=this._container.one(".sm-form-field-toggle-item-on"),a=this._container.one(".sm-form-field-toggle-item-off"),s=this._container.one("."+this.classNames.select);t.addClass("yui3-button-selected"),a.removeClass("yui3-button-selected"),e.set("selected","true"),s.show()}},_attachUIEvents:function(){this._detachUIEvents();var e=this._container,t=e.one("."+this.classNames.link);this._uiEventHandles=[e.delegate("click",this._onToggleClick,".sm-form-field-toggle-item",this),e.one(".sm-form-field-select").on("change",this._onSelectChange,this),e.one('[data-value="submit"]').on("click",this._onSaveClick,this),this.on("visibleChange",this._onVisibleChange,this)],t&&this._uiEventHandles.push(t.on("click",this._onGoToLinkClick,this))},_detachUIEvents:function(){new e.EventHandle(this._uiEventHandles).detach(),this._uiEventHandles=null},_onSaveClick:function(t){var a=this._container.one("select[name=select]").get("value");"on"!==this._container.one(".yui3-button-selected").get("value")||a||(t.stopPropagation(),new e.SM.Panel.Alert({message:"Choose a watermark to apply."}).render())},_onSelectChange:function(){this.set("unsaved",!0)},_onToggleClick:function(e){var t=this._container.one("."+this.classNames.select),a=t.one("select[name=select]").get("value"),s=e.currentTarget.get("value");"on"===s?t.show():t.hide(),("on"===s&&a||"off"===s)&&this.set("unsaved",!0)},_onGoToLinkClick:function(){this.fire("forceClose")}},{toolName:"Watermark",toolId:"watermark",ATTRS:{}}),SM.currentModule=null}),"",{requires:["sm-image-tools-base-view","sm-marks-itemsview","sm-toast","sm-api2"]});
YUI.add("sm-imagesrcconfig",(function(e){SM.currentModule="sm-imagesrcconfig";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var i=SM.import("sm-dom"),t=SM.import("sm-smuglog"),r=/^[1-9]\d*x[1-9]\d*$/,a=["ImageSizeTiny","ImageSizeThumb","ImageSizeSmall","ImageSizeMedium","ImageSizeLarge","ImageSizeXLarge","ImageSizeX2Large","ImageSizeX3Large","ImageSizeX4Large","ImageSizeX5Large","ImageSize4K","ImageSize5K"],n={Ti:"ImageSizeTiny",Th:"ImageSizeThumb",S:"ImageSizeSmall",M:"ImageSizeMedium",L:"ImageSizeLarge",XL:"ImageSizeXLarge",X2:"ImageSizeX2Large",X3:"ImageSizeX3Large",X4:"ImageSizeX4Large",X5:"ImageSizeX5Large","4K":"ImageSize4K","5K":"ImageSize5K"},g=/#size#/g,o={aspectRatio:{"1x1":1,"4x3":4/3,"3x4":3/4,"3x2":1.5,"2x3":2/3,"3x1":3,"1x3":1/3,"5x1":5},coverDimensions:function(e,i,r){e||(e={});var a=e.width,n=e.height;if(!a||!n)return t.console("ImageSrcConfig","The first parameter of the `coverDimensions` method must be an object containing `width` and `height` properties.",t.LEVEL_WARNING),null;i&&isFinite(i)||(i=0),r&&isFinite(r)||(r=0);var g=Math.max(i/a,r/n);return{height:Math.round(n*g),width:Math.round(a*g)}},fitInDimensions:function(e,i,r){e||(e={});var a=e.width,n=e.height;if(!a||!n)return t.console("ImageSrcConfig","The first parameter of the `fitInDimensions` method must be an object containing `width` and `height` properties.",t.LEVEL_WARNING),null;(!i||i>a)&&(i=a),(!r||r>n)&&(r=n);var g=Math.min(i/a,r/n);return{height:Math.round(n*g),width:Math.round(a*g)}},get:function(e){var i;e||(e={});var a=e.sources;if(!(a||e.size&&e.shortSize&&e.minWidth))return t.console("ImageSrcConfig","The `get` method requires an object containing `sources` and one of `size`, `shortSize` or `minWidth`.",t.LEVEL_WARNING),null;if(e.size?i=o._getAvailableSize(e):e.shortSize?(e.size=n[e.shortSize],i=o._getAvailableSize(e)):e.minWidth&&(i=e.coverAspectRatio?o._getAspectRatioSize(e):o._getClosestSize(e)),a[i]){var m=a[i];if(m)return{width:m.Width,height:m.Height,url:m.Url,size:i,sizeDetails:m}}else if(a.ImageUrlTemplate&&r.test(i)){var s=i.split("x");return{width:parseInt(s[0],10),height:parseInt(s[1],10),url:a.ImageUrlTemplate.replace(g,i),size:"ImageSizeCustom"}}return null},_getAspectRatioSize:function(i){var r=i.coverAspectRatio;return"string"==typeof r&&(r=o.aspectRatio[r]),r?o._getClosestSize(e.merge(i,{largerThanBoth:!0,minHeight:i.minWidth/r})):(t.console("ImageSrcConfig","The `coverAspectRatio` property must be a number or one of: '"+Object.keys(o.aspectRatio).join("', '")+"'.",t.LEVEL_WARNING),null)},_getAvailableSize:function(e){var i=e.size,t=e.sources;if(i&&t){if(t[i])return i;for(var r=a.indexOf(i);r>-1;--r)if(t[i=a[r]])return i}return null},_getClosestSize:function(e){var t,r,n=e.sources,g=e.minWidth,m=e.minHeight||1/0,s=isFinite(m)&&e.largerThanBoth,h=e.pixelRatio||i.win.devicePixelRatio||1;h>1&&(g*=h,m*=h);for(var u,l=0;u=a[l];l++)if((r=n[u])&&(t=u,s&&r.Height>=m&&r.Width>=g||!s&&(r.Height>=m||r.Width>=g)))return u;if(n.ImageSizeOriginal){r=n.ImageSizeOriginal;var S=o.coverDimensions({width:r.Width,height:r.Height},g,m);if(S&&s&&(r.Height<=S.height||r.Width<=S.width)||!s&&r.Height<=S.height&&r.Width<=S.width)return"ImageSizeOriginal";if(S&&n.ImageUrlTemplate)return S.width+"x"+S.height}return t||null}};e.namespace("SM").ImageSrcConfig=o,module.exports=o}(),SM.currentModule=null}),"",{requires:["sm","sm-dom","sm-smuglog"]});
YUI.add("sm-io-core",(function(n){SM.currentModule="sm-io-core";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";function r(e,t){var o,i,s,u,a,c;function f(r,e,t){return function(){r.apply(e,t?n.Array(arguments,0,!0).concat(t):arguments)}}if("string"==typeof e&&(t&&"object"==typeof t?((t=n.merge(t)).url=e,e=t):e={url:e}),o=new(r.Transaction[e.type||r._defaultType]||r.Transaction._missing)(e),e.on&&o.on)for(s in a=(i=e.on).context||i.thisObj,c=i.args||i.arguments,i)if(i.hasOwnProperty(s)){if(u=i[s],a||c)switch(s){case"context":case"thisObj":case"args":case"arguments":continue;default:u=f(u,a,c)}o.on(s,u)}return o}r._defaultType="xhr",r.Transaction={_missing:function(e){return new n.Promise((function(n,t){var o=e.transport&&r[e.transport];o?o.send(e,(function(r,e){r?t(r):n(e)})):t(new Error("Could not find transport"))}))}},n.namespace("SM").io=n.mix(r,n.SM.io,!0),module.exports=r}(),SM.currentModule=null}),"",{requires:["sm","promise"]});
YUI.add("sm-io-xhr-transaction",(function(e){SM.currentModule="sm-io-xhr-transaction";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){var t=e.SM.io,s=new e.Promise((function(){}));function n(e){this.request=e,this._init(),e.lazy||this.send()}s.then=function(){return s},s.on=function(t,n){return"abort"===t&&e.soon(n),s},e.mix(n.prototype,{_defaultTransport:"xhr",_init:function(){var t=this.request=e.merge(this.request),s=t.url||(t.url=""),n=t.data;t.method=(t.method||"GET").toUpperCase(),n&&("object"==typeof n&&(n=e.QueryString.stringify(n)),"PUT"!==t.method&&"POST"!==t.method?(t.url+=(s.indexOf("?")>-1?"&":"?")+n,t.data=null):t.data=n)},abort:function(){this._complete||(this._complete=!0,this._aborted=!0,this._connection&&this._connection.abort(),this.response=s,this._notifier?this._notifier.fire("abort"):this._addQueuedSubs())},then:function(e,t){return(this.response||this.send()).then(e,t)},on:function(e,t){if(this.response)switch(e){case"success":this.response.then(t);break;case"failure":this.response.then(null,t);break;case"complete":this.response.then(t,t);break;default:this.response.on&&this.response.on(e,t)}else this._queuedSubs||(this._queuedSubs={}),this._queuedSubs[e]||(this._queuedSubs[e]=[]),this._queuedSubs[e].push(t)},send:function(){var s,n,i=this;return this.response||(s=this.request.transport,n=s&&t[s]||t[this._defaultTransport],this.response=new e.Promise((function(e,t){i._connection=n.send(i.request,(function(s,n){i._complete||(i._complete=!0,s?t(s):e(n))}))})),this._notifier=new e.Promise.EventNotifier,this._notifier.addEvents(this.response),this._addQueuedSubs()),this.response},_addQueuedSubs:function(){var e,t,s,n,i=this._queuedSubs;if(i)for(e in this._queuedSubs=null,i)if(i.hasOwnProperty(e))for(s=0,n=(t=i[e]).length;s<n;++s)this.on(e,t[s])}},!0),e.SM.io.Transaction.xhr=n,module.exports=exports=n}(),SM.currentModule=null}),"",{requires:["sm-io-core","querystring-stringify-simple","sm-io-xhr-transport","gallery-sm-promise-events"]});
YUI.add("sm-io-xhr-transport",(function(e){SM.currentModule="sm-io-xhr-transport";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";var t=e.config.win,n=t&&t.XMLHttpRequest,r={send:function(e,t){var n;try{(n=this.connect(e,t))?(e.data?n.send(e.data):n.send(),e.sync&&this._handleResponse(n,t,e)):t&&t(new Error("Could not create XHR connection"))}catch(e){t&&t(e)}return n},connect:function(e,t){if(!e.url)return null;var r=new n;return r&&(e.sync||(r.onreadystatechange=this._bindNotifier(t,e)),e.on&&e.on.upload&&e.on.upload.load&&(r.upload.onload=e.on.upload.load),e.on&&e.on.upload&&e.on.upload.progress&&(r.upload.onprogress=e.on.upload.progress),r.open(e.method,e.url,!e.sync),e.withCredentials&&(r.withCredentials=!0),e.responseType&&(r.responseType=e.responseType),this.setHeaders(r,e)),r},setHeaders:function(e,t){var n,r=t.headers;if(r=this.addDefaultHeaders(e,t))for(n in r)r.hasOwnProperty(n)&&(r[n]||"string"==typeof r[n])&&e.setRequestHeader(n,r[n])},addDefaultHeaders:function(e,t){var n,r,o,s=t.headers,a=!("xdr"===t.transport||t.withCredentials)||t.allowXDRPreflight,d="POST"===t.method||"PUT"===t.method||"PATCH"===t.method;if(s)for(n in o={},s)r=s[n],"x-requested-with"===n.toLowerCase()?(o["X-Requested-With"]=r,a=!1):"content-type"===n.toLowerCase()?(o["Content-Type"]=r,d=!1):o[n]=r;return a&&(o||(o={}),o["X-Requested-With"]="XMLHttpRequest"),d&&(o||(o={}),o["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),o},_bindNotifier:function(e,t){var n=this;return function(){4===this.readyState&&n._handleResponse(this,e,t)}},_handleResponse:function(e,t,n){var r,o;try{r=e.status}catch(e){r=0}if(o="document"===e.responseType?e.responseXML:e.response||e.responseText,0===(e.getResponseHeader("Content-Type")||"").indexOf("application/json"))try{o=JSON.parse(o,n.jsonReviver)}catch(n){n.responseText=o,t.call(e,n)}if(r>=200&&(r<300||304===r||1223===r))t.call(e,null,o);else{var s=new Error(r+" "+e.statusText);s.response=o,t.call(e,s)}},XHRClass:n};e.namespace("SM.io"),e.SM.io.xhr=r,module.exports=exports=r}(),SM.currentModule=null}),"",{requires:["json-parse"]});
YUI.add("sm-keyboard-shortcuts",(function(e){SM.currentModule="sm-keyboard-shortcuts";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireWildcard(r("react"));class l extends t.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_renderColumn",(e,r)=>t.default.createElement("table",{key:"column".concat(r)},t.default.createElement("tbody",null,e.map(this._renderKey)))),babelHelpers.defineProperty(this,"_renderKey",(e,r)=>t.default.createElement("tr",{key:"key".concat(r)},t.default.createElement("th",{scope:"row"},e.label),t.default.createElement("td",null,t.default.createElement("kbd",null,e.key))))}render(){let{keys:e}=this.props;return t.default.createElement("div",{className:"sm-keyboard-shortcuts sm-flex sm-flex-wrap"},e.map(this._renderColumn))}}exports.default=l,babelHelpers.defineProperty(l,"propTypes",{keys:e.default.arrayOf(e.default.arrayOf(e.default.shape({key:e.default.string.isRequired,label:e.default.string.isRequired}).isRequired).isRequired).isRequired}),babelHelpers.defineProperty(l,"displayName","KeyboardShortcutPanel")}(),SM.currentModule=null}),"",{requires:["prop-types","react"]});
YUI.add("sm-launchdarkly",(function(e){SM.currentModule="sm-launchdarkly";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAllLaunchDarklyFlags=void 0;var e=babelHelpers.interopRequireDefault(r("sm-redux-store")),l=r("sm-page-selectors");exports.getAllLaunchDarklyFlags=()=>{let r=e.default.getState();return(0,l.getAllFeatureFlags)(r)}}(),SM.currentModule=null}),"",{requires:["sm-redux-store","sm-page-selectors"]});
YUI.add("sm-lightbox-action-types",(function(E){SM.currentModule="sm-lightbox-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SET_MODE=exports.SET_HIDE_UI=exports.SET_DISABLE_UI=exports.SET_DELETE_WARNING=exports.SET_CONTAINER_DIMENSIONS=exports.RESET_VIDEO_STATE=exports.RESET=exports.REQUEST_DOWNLOAD=exports.RENDER_VIDEO_PLAYER=void 0;exports.RENDER_VIDEO_PLAYER="LIGHTBOX_RENDER_VIDEO_PLAYER";exports.REQUEST_DOWNLOAD="LIGHTBOX_REQUEST_DOWNLOAD";exports.RESET="LIGHTBOX_RESET";exports.RESET_VIDEO_STATE="LIGHTBOX_RESET_VIDEO_STATE";exports.SET_CONTAINER_DIMENSIONS="LIGHTBOX_SET_CONTAINER_DIMENSIONS";exports.SET_DELETE_WARNING="LIGHTBOX_SET_DELETE_WARNING";exports.SET_DISABLE_UI="LIGHTBOX_SET_DISABLE_UI";exports.SET_HIDE_UI="LIGHTBOX_SET_HIDE_UI";exports.SET_MODE="LIGHTBOX_SET_MODE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-lightbox-actions",(function(e){SM.currentModule="sm-lightbox-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyImage=exports.onOverflowMenuSharePhotoClick=exports.updateImageVisibility=exports.showDeleteWarning=exports.hideDeleteWarning=exports.requestDownload=exports.enableUI=exports.disableUI=exports.showUI=exports.hideUI=exports.setContainerDimensions=exports.reset=exports.resetVideoState=exports.renderVideoPlayer=exports.setLightboxMode=exports.prefetchImages=void 0;var e=t("sm-api-redux-actions"),i=t("sm-dialogs-actions"),s=t("sm-lightbox-action-types"),a=t("sm-lightbox-analytics"),o=t("sm-lightbox-selectors"),r=t("sm-lightbox-constants");const n=new(babelHelpers.interopRequireDefault(t("sm-ua")).default),l=n.isIOS||n.isAndroid||n.isWindowsPhone,c=new Set,d=1e4;exports.prefetchImages=(t,i={})=>(s,a)=>{let{cache:r=c,cacheMaxSize:n=d}=i,l=(0,o.getPrefetchImageUrls)(a(),t).filter(e=>!r.has(e));return 0===l.length?Promise.resolve():(r.size+l.length>n&&r.clear(),l.forEach(e=>{r.add(e)}),s((0,e.postToAPI)({uri:"/api/v2!prefetch",data:{ImageUrls:l},query:["_prefetchImages=only","_verbosity=1"],verbose:!1})))};exports.setLightboxMode=(e,{setInitialMode:t=!1}={})=>({type:s.SET_MODE,mode:e,setInitialMode:t});exports.renderVideoPlayer=e=>({type:s.RENDER_VIDEO_PLAYER,videoUri:e});exports.resetVideoState=()=>({type:s.RESET_VIDEO_STATE});exports.reset=()=>({type:s.RESET});exports.setContainerDimensions=(e,t)=>({type:s.SET_CONTAINER_DIMENSIONS,width:e,height:t});exports.hideUI=()=>({type:s.SET_HIDE_UI,hideUI:!0});exports.showUI=()=>({type:s.SET_HIDE_UI,hideUI:!1});exports.disableUI=()=>({type:s.SET_DISABLE_UI,disableUI:!0});exports.enableUI=()=>({type:s.SET_DISABLE_UI,disableUI:!1});exports.requestDownload=()=>({type:s.REQUEST_DOWNLOAD,_internal:{analytics:(0,a.getDownloadFileClickAnalytics)()}});exports.hideDeleteWarning=()=>({type:s.SET_DELETE_WARNING,isDeleteWarningVisible:!1});exports.showDeleteWarning=()=>({type:s.SET_DELETE_WARNING,isDeleteWarningVisible:!0});exports.updateImageVisibility=(t,s)=>o=>{let r=s?"Hide":"Show";return o((0,e.patchToAPI)({uri:t,data:{Hidden:s},_internal:{analytics:(0,a.getToolMenuItemClickAnalytics)(r)}})).catch(e=>o((0,i.addError)("There was an issue updating this photo's visibility. If the problem persists, contact our Support Heroes.",e)))};exports.onOverflowMenuSharePhotoClick=(e,t)=>async i=>{var s;if((null===(s=navigator)||void 0===s?void 0:s.share)&&(null==e?void 0:e.webUri)&&l)try{await navigator.share({url:e.webUri}),i(t(r.LIGHTBOX_MODE_DEFAULT))}catch(e){"AbortError"===e.name?i(t(r.LIGHTBOX_MODE_DEFAULT)):i(t(r.LIGHTBOX_MODE_SHARE_PHOTO))}else i(t(r.LIGHTBOX_MODE_SHARE_PHOTO))};exports.copyImage=t=>async s=>{try{return await s((0,e.postToAPI)({uri:t,_internal:{analytics:(0,a.getToolMenuItemClickAnalytics)("Make a Copy")}}))}catch(e){s((0,i.addError)("There was an issue copying this photo. If the problem persists, contact our Support Heroes.",e))}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-actions","sm-dialogs-actions","sm-lightbox-action-types","sm-lightbox-analytics","sm-lightbox-selectors","sm-lightbox-constants","sm-ua"]});
YUI.add("sm-lightbox-analytics",(function(e){SM.currentModule="sm-lightbox-analytics";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getToolMenuItemClickAnalytics=exports.getDownloadFileClickAnalytics=exports.trackChangeLightboxMode=exports.trackStartSlideshow=exports.trackShowLightboxImageDetails=exports.trackSubmitImageDetailsUpdate=exports.trackSidebarClose=exports.trackCancelImageDetailsUpdate=exports.trackOpenShareMode=exports.trackOpenComments=exports.getOpenImageToolsMenuAnalytics=exports.trackOpenCommerceMode=exports.trackCloseLightbox=exports.trackOpenLightbox=exports.trackDeleteImage=exports.FIELD_KEYWORDS=exports.FIELD_CAPTION=exports.FIELD_TITLE=void 0;var e=babelHelpers.interopRequireDefault(t("sm-analytics-tracker")),a=t("sm-analytics-constants"),l=t("sm-lightbox-constants");const{BUY:o,IMAGE_TOOL:n,LIGHTBOX:O,LIGHTBOX_IMAGE_TOOL:c,SHARE_PANEL:r,SLIDESHOW:I}=a.CATEGORY,{CANCEL:s,CLOSE:E,COMMENTS:L,DOWNLOAD_FILE_CLICK:T,MENU_ITEM_CLICK:i,OPEN_TOOL:_,PHOTO_DETAILS:u,SIDEBAR_CLOSE:M,START:g,SUBMIT:C,TOOLS:S}=a.ACTION,d={[l.LIGHTBOX_MODE_BUY]:"Commerce",[l.LIGHTBOX_MODE_COMMENTS]:"Comments",[l.LIGHTBOX_MODE_EDITOR]:"Image Editor",[l.LIGHTBOX_MODE_IMAGE_INFO]:"Photo Details",[l.LIGHTBOX_MODE_SHARE]:"Share",[l.LIGHTBOX_MODE_SLIDESHOW]:"Slideshow"};exports.FIELD_TITLE="Title";exports.FIELD_CAPTION="Caption";exports.FIELD_KEYWORDS="Keywords";const D=(e,t,l)=>({...e&&{[a.EVENT_PARAM.LABEL]:e},...t&&{[a.EVENT_PARAM.PROPERTY]:t},...l&&{[a.EVENT_PARAM.VALUE]:l}});exports.trackDeleteImage=t=>{let l=t?"Remove from Collection":"Delete";e.default.createEvent(n,_,D(l,a.LOCATION_LIGHTBOX)).log()};exports.trackOpenLightbox=t=>{e.default.createEvent(O,g,D(null,t)).log()};exports.trackCloseLightbox=(t,a)=>{e.default.createEvent(O,E,D(t,null,a)).log()};const A=()=>{e.default.createEvent(o,i,D(a.TRIGGER_THIS_PHOTO,a.LOCATION_LIGHTBOX)).log(),e.default.createEvent(o,g,D(null,a.LOCATION_LIGHTBOX)).log()};exports.trackOpenCommerceMode=A;exports.getOpenImageToolsMenuAnalytics=e=>({category:O,action:S,...D(null,e)});const m=t=>{e.default.createEvent(O,L,D(null,t)).log()};exports.trackOpenComments=m;const H=t=>{e.default.createEvent(r,g,D(null,t)).log()};exports.trackOpenShareMode=H;exports.trackCancelImageDetailsUpdate=()=>{e.default.createEvent(c,s).log()};const G=t=>{let a=d[t]||t;e.default.createEvent(O,M,D(a)).log()};exports.trackSidebarClose=G;exports.trackSubmitImageDetailsUpdate=t=>{e.default.createEvent(c,C,D(t.sort().join(","))).log()};const k=t=>{e.default.createEvent(O,u,D(t)).log()};exports.trackShowLightboxImageDetails=k;const B=t=>{e.default.createEvent(I,g,D(null,t)).log()};exports.trackStartSlideshow=B;exports.trackChangeLightboxMode=(e,t={})=>{switch(e){case l.LIGHTBOX_MODE_IMAGE_INFO:return k(t.trigger||a.TRIGGER_ICON_BAR);case l.LIGHTBOX_MODE_COMMENTS:return m(a.LOCATION_LIGHTBOX);case l.LIGHTBOX_MODE_BUY:return A();case l.LIGHTBOX_MODE_SHARE:return H(a.LOCATION_LIGHTBOX);case l.LIGHTBOX_MODE_SLIDESHOW:return B(a.LOCATION_LIGHTBOX);case l.LIGHTBOX_MODE_DEFAULT:return G(t.previousMode)}};exports.getDownloadFileClickAnalytics=()=>({category:O,action:T,...D(null,a.LOCATION_LIGHTBOX)});exports.getToolMenuItemClickAnalytics=e=>({category:n,action:_,...D(e,a.LOCATION_LIGHTBOX)})}(),SM.currentModule=null}),"",{requires:["sm-analytics-tracker","sm-analytics-constants","sm-lightbox-constants"]});
YUI.add("sm-lightbox-basic-layout-container",(function(e){SM.currentModule="sm-lightbox-basic-layout-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),o=babelHelpers.interopRequireDefault(t("sm-resize-observer-hoc")),r=babelHelpers.interopRequireDefault(t("sm-lightbox-basic-layout")),a=t("sm-lightbox-layout-container-hoc"),s=t("sm-lightbox-keyboard-container-hoc"),i=t("sm-lightbox-selectors"),l=t("sm-page-selectors");const n=(0,a.withCommonLayoutStateProps)((e,{allowBuyButton:t,imageUri:o,hasGalleryContext:r})=>({showBuyButton:t&&(0,i.canBuyImage)(e,o,{hasGalleryContext:r}),nativeShareData:(0,i.getNativeShareData)(e,o),isOwnerOrAdmin:(0,l.isLoggedInUserPageOwnerOrAdmin)(e)})),u=(0,s.withCommonKeyboardDispatchProps)((0,a.withCommonLayoutDispatchProps)());var c=(0,e.connect)(n,u)((0,o.default)(r.default));exports.default=c}(),SM.currentModule=null}),"",{requires:["react-redux","sm-resize-observer-hoc","sm-lightbox-basic-layout","sm-lightbox-layout-container-hoc","sm-lightbox-keyboard-container-hoc","sm-lightbox-selectors","sm-page-selectors"]});
YUI.add("sm-lightbox-basic-layout",(function(e){SM.currentModule="sm-lightbox-basic-layout";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-image-preloader")),l=babelHelpers.interopRequireDefault(t("sm-lightbox-close-button")),r=babelHelpers.interopRequireDefault(t("sm-lightbox-content-pane")),s=babelHelpers.interopRequireDefault(t("sm-lightbox-favorite-buttons-container")),n=babelHelpers.interopRequireDefault(t("sm-lightbox-view")),i=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-bar")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-buttons")),b=babelHelpers.interopRequireDefault(t("sm-lightbox-primary-controls-container")),d=babelHelpers.interopRequireDefault(t("sm-lightbox-sidebar")),m=babelHelpers.interopRequireDefault(t("sm-lightbox-sidebar-content")),p=babelHelpers.interopRequireDefault(t("sm-lightbox-swipeable-content")),h=t("sm-lightbox-constants"),c=t("sm-lightbox-layout-props"),g=t("sm-lightbox-layout-helpers");class f extends e.PureComponent{componentDidUpdate(e){let t=e.mode,o=this.props.mode;t===o||t!==h.LIGHTBOX_MODE_DEFAULT&&o!==h.LIGHTBOX_MODE_DEFAULT||this.props.onResize()}render(){let{mode:t,isSidebarLoading:o,isUIDisabled:c,isUIHidden:f,onCloseRequest:w,onCloseSidebar:I,onHideUI:x,onImageDataChange:y,onKeyDownRequest:R,onModeChangeRequest:D,onNavBackwardRequest:H,onNavForwardRequest:U,onShowUI:q,currentImageUri:v,nextImageUri:E,previousImageUri:B,preloadImageUrls:M,resizeRef:O,autoHideUI:S,buyButtonSkin:T,buyButtonStyle:_,showCaption:L,showKeywords:C,showTitle:F,showBuyButton:P,showEXIF:A,showFavoriteButtons:N,showFilename:X,showImageInfo:G,showMap:k,isOwnerOrAdmin:K}=this.props;return e.default.createElement(n.default,{autoHideUI:S,isUIDisabled:c,isUIHidden:f,mode:t,onHideUI:x,onKeyDownRequest:R,onShowUI:q},e.default.createElement(i.default,{className:"sm-lightbox-v2-navbar-primary"},e.default.createElement(b.default,(0,g.extractPrimaryControlsProps)(this.props))),t!==h.LIGHTBOX_MODE_DEFAULT&&e.default.createElement(d.default,{onCloseSidebar:c?null:I},e.default.createElement(m.default,{albumImageUri:v,isOwnerOrAdmin:K,isLoading:o,mode:t,onImageDataChange:y,showCaption:L,showEXIF:A,showFilename:X,showKeywords:C,showMap:k,showTitle:F})),e.default.createElement(r.default,{containerRef:O},e.default.createElement(p.default,{onNavBackwardRequest:c?null:H,onNavForwardRequest:c?null:U,onModeChangeRequest:D,currentImageUri:v,nextImageUri:E,previousImageUri:B,buyButtonSkin:T,buyButtonStyle:_,showBuyButton:P,showCaption:L,showEXIF:A,showFilename:X,showImageInfo:G,showMap:k,showTitle:F})),e.default.createElement(i.default,{className:"sm-lightbox-v2-navbar-secondary"},e.default.createElement(l.default,{onCloseRequest:w}),!!N&&e.default.createElement(s.default,{albumImageUri:v,onImageDataChange:y})),(!!H||!!U)&&e.default.createElement(u.default,{onNavBackwardRequest:H,onNavForwardRequest:U}),e.default.createElement(a.default,{preloadUrls:M}))}}babelHelpers.defineProperty(f,"displayName","Lightbox.Layout.Basic"),babelHelpers.defineProperty(f,"propTypes",{...c.LIGHTBOX_LAYOUT_PROP_TYPES,mode:o.default.oneOf(h.LIGHTBOX_BASIC_MODES)}),babelHelpers.defineProperty(f,"defaultProps",c.LIGHTBOX_LAYOUT_DEFAULT_PROPS);var w=f;exports.default=w}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-image-preloader","sm-lightbox-close-button","sm-lightbox-content-pane","sm-lightbox-favorite-buttons-container","sm-lightbox-view","sm-lightbox-nav-bar","sm-lightbox-nav-buttons","sm-lightbox-primary-controls-container","sm-lightbox-sidebar","sm-lightbox-sidebar-content","sm-lightbox-swipeable-content","sm-lightbox-constants","sm-lightbox-layout-props","sm-lightbox-layout-helpers"]});
YUI.add("sm-lightbox-buy-button",(function(e){SM.currentModule="sm-lightbox-buy-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("classnames")),o=babelHelpers.interopRequireDefault(t("sm-icon")),u=babelHelpers.interopRequireDefault(t("sm-component-button")),s=babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")),n=t("sm-lightbox-constants");const i=(0,s.default)(u.default),r=t=>{let l,{className:s,onClick:r,skin:d,style:m,isVideo:b,...c}=t,f=u.default,p="Buy ".concat(b?"Video":"Photo");if(m===n.BUY_BUTTON_STYLE_DEFAULT)l=e.default.createElement(e.default.Fragment,null,e.default.createElement(o.default,{name:"Cart",size:o.default.SIZE_SMALL}),e.default.createElement("span",{className:"sm-button-label"},p));else{f=i;let t=m===n.BUY_BUTTON_STYLE_ICON;l=e.default.createElement(o.default,{name:"Cart",size:t?o.default.SIZE_LARGE:o.default.SIZE_SMALL});let a=t?i.TOOLTIP_ALIGN_RIGHT:i.TOOLTIP_ALIGN_TOP;c={...c,tooltipLabel:p,tooltipAlignment:a,noChrome:m===n.BUY_BUTTON_STYLE_ICON}}let T=(0,a.default)(["sm-lightbox-buy-button","sm-lightbox-v2-hideable",s]);return e.default.createElement(f,babelHelpers.extends({className:T,"data-disable-auto-hide":!0,skin:d,onClick:r},c),l)};r.displayName="LightBox.Common.BuyButton",r.propTypes={onClick:l.default.func.isRequired,skin:l.default.oneOf(n.BUY_BUTTON_SKINS),style:l.default.oneOf(n.BUY_BUTTON_STYLES),isVideo:l.default.bool},r.defaultProps={skin:n.BUY_BUTTON_SKIN_DEFAULT,style:n.BUY_BUTTON_STYLE_DEFAULT,isVideo:!1};var d=r;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-icon","sm-component-button","sm-tooltip-hoc","sm-lightbox-constants"]});
YUI.add("sm-lightbox-close-button",(function(e){SM.currentModule="sm-lightbox-close-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),u=babelHelpers.interopRequireDefault(t("sm-icon"));const r=(0,babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")).default)(l.default),a=({onCloseRequest:t})=>e.default.createElement(r,{className:"user-ui-lightbox-close-button sm-lightbox-v2-hideable","data-disable-auto-hide":!0,tooltipLabel:"Close",tooltipAlignment:r.TOOLTIP_ALIGN_LEFT,"data-testid":"lightbox_close_button",onClick:t,noChrome:!0},e.default.createElement(u.default,{name:"Close"}));a.displayName="Lightbox.Navigation.CloseButton",a.propTypes={onCloseRequest:o.default.func.isRequired};var i=a;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-tooltip-hoc"]});
YUI.add("sm-lightbox-commerce-layout-container",(function(e){SM.currentModule="sm-lightbox-commerce-layout-container";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),o=a("sm-api-redux-selectors"),t=babelHelpers.interopRequireDefault(a("sm-resize-observer-hoc")),s=babelHelpers.interopRequireDefault(a("sm-lightbox-commerce-layout")),r=a("sm-page-selectors"),l=a("sm-lightbox-selectors"),i=a("sm-com-lb-selectors-common"),c=a("sm-com-lb-selectors"),n=a("sm-batch-add-selectors"),d=a("sm-batch-add-constants"),u=a("sm-lightbox-layout-container-hoc"),m=a("sm-lightbox-keyboard-container-hoc");const h=(0,u.withCommonLayoutStateProps)((e,{allowBuyButton:a,imageUri:t,hasGalleryContext:s,isAndroidDevice:u})=>{let m=(0,i.isBatchAddFlowEnabled)(e),h=!(0,r.viewportIsGreaterThanMedium)(e),g={batchAddFlowEnabled:m,hasPackagesAvailable:s&&(0,i.hasPackagesAvailable)(e,t),isMobileClb:h,isSmugMugWebView:(0,r.isSmugMugWebView)(e),productImageGalleryUri:(0,i.getProductImageGalleryUri)(e),showBatchAddCTA:!1,showBatchAddInSidebar:!1,showCartSummary:!1};if(m){let r=(0,n.getBatchAddAlbumImagesUriByAlbumImage)(e,t),c=(0,n.getBatchAddAlbumImages)(e,r),u=(0,n.getBatchAddSkusForItemSelection)(e,r,{includeAlbumSkus:s}),m=(0,n.getBatchAddActivePane)(e);return{...g,showErrorMessage:(0,n.hasBatchAddBannerMessage)(e,t,{includeAlbumSkus:s}),isInitializingBatchAdd:(0,n.isBatchAddInitializing)(e),isLoadingBatchAddImages:(0,n.isBatchAddAlbumLoading)(e),isPricelistDataLoading:(0,n.isDataLoadingForImages)(e,c),catalogDisplayType:(0,i.getCatalogDisplayTypeForSkus)(e,u),showBatchAddInSidebar:h&&m!==d.PRODUCT_SELECT,showBuyButton:a&&(0,l.canBuyAlbum)(e,(0,o.getExpansionUri)(e,t,"Album")),showInlineCropper:!1}}return{...g,showErrorMessage:(0,c.hasErrorMessage)(e,t,{includeAlbumSkus:s}),isPricelistDataLoading:(0,c.isDataLoading)(e,t),catalogDisplayType:(0,i.getCatalogDisplayType)(e,t,{includeAlbumSkus:s,isAndroidDevice:u}),showBuyButton:a&&(0,l.canBuyImage)(e,t,{hasGalleryContext:s}),showCartSummary:(0,c.getShowCartSummary)(e),showInlineCropper:(0,c.needsInlineCropper)(e)}}),g=(0,m.withCommonKeyboardDispatchProps)((0,u.withCommonLayoutDispatchProps)());var b=(0,e.connect)(h,g,(function(e,{onKeyDownRequest:a,...o},t){return{...e,...o,...t,onKeyDownRequest:e.batchAddFlowEnabled?()=>{}:a}}))((0,t.default)(s.default));exports.default=b}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-selectors","sm-resize-observer-hoc","sm-lightbox-commerce-layout","sm-page-selectors","sm-lightbox-selectors","sm-com-lb-selectors-common","sm-com-lb-selectors","sm-batch-add-selectors","sm-batch-add-constants","sm-lightbox-layout-container-hoc","sm-lightbox-keyboard-container-hoc"]});
YUI.add("sm-lightbox-commerce-layout",(function(e){SM.currentModule="sm-lightbox-commerce-layout";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=t("react-router"),l=t("react-router-dom"),o=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("sm-component-busy")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),i=babelHelpers.interopRequireDefault(t("sm-icon")),d=babelHelpers.interopRequireDefault(t("sm-image-preloader")),u=t("sm-webview"),c=babelHelpers.interopRequireDefault(t("sm-batch-add-container")),m=babelHelpers.interopRequireDefault(t("sm-batch-add-signposts")),b=babelHelpers.interopRequireDefault(t("sm-com-lb-cart-summary-container")),p=babelHelpers.interopRequireDefault(t("sm-com-lb-catalog-back-button-container")),h=babelHelpers.interopRequireDefault(t("sm-com-lb-catalog-routes")),f=babelHelpers.interopRequireDefault(t("sm-com-lb-error-banner-container")),g=babelHelpers.interopRequireDefault(t("sm-com-lb-flat-catalog-routes")),y=babelHelpers.interopRequireDefault(t("sm-com-lb-flat-redirect-container")),E=babelHelpers.interopRequireDefault(t("sm-com-lb-greeting-cards-occasion-container")),_=babelHelpers.interopRequireDefault(t("sm-com-lb-albums-flow-container")),R=babelHelpers.interopRequireDefault(t("sm-com-lb-image-cropper-wrapper-container")),w=babelHelpers.interopRequireDefault(t("sm-com-lb-print-watermark-banner-container")),C=babelHelpers.interopRequireDefault(t("sm-com-lb-no-product-available-container")),P=babelHelpers.interopRequireDefault(t("sm-com-lb-router-redirect-container")),A=babelHelpers.interopRequireDefault(t("sm-com-lb-sidebar-footer-container")),H=babelHelpers.interopRequireDefault(t("sm-com-lb-sidebar-title-container")),x=babelHelpers.interopRequireDefault(t("sm-product-image-gallery-container")),U=babelHelpers.interopRequireDefault(t("sm-lightbox-close-button")),I=babelHelpers.interopRequireDefault(t("sm-lightbox-content-pane")),S=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-bar")),v=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-buttons")),D=babelHelpers.interopRequireDefault(t("sm-lightbox-primary-controls-container")),q=babelHelpers.interopRequireDefault(t("sm-lightbox-swipeable-content")),T=babelHelpers.interopRequireDefault(t("sm-lightbox-view")),B=babelHelpers.interopRequireDefault(t("sm-lightbox-favorite-buttons-container")),G=t("sm-lightbox-constants"),k=t("sm-lightbox-layout-props"),L=t("sm-com-lb-constants"),M=t("sm-com-lb-helpers"),N=t("sm-lightbox-layout-helpers");const O=(0,a.withRouter)(T.default);class F extends e.default.Component{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_onCloseRequest",()=>{let{onCloseRequest:e}=this.props;(0,u.sendWebviewMessage)({type:"commerceLightboxClose"}),e()}),babelHelpers.defineProperty(this,"_onCloseSidebar",()=>{let{onCloseSidebar:e}=this.props;(0,u.sendWebviewMessage)({type:"commerceLightboxClose"}),e()}),babelHelpers.defineProperty(this,"_renderSidebar",({location:t})=>{let{batchAddFlowEnabled:r,currentImageUri:l,isInitializingBatchAdd:s,isMobileClb:d,showBatchAddInSidebar:u,showCartSummary:c,showErrorMessage:b}=this.props,p=d&&r,h=(0,o.default)("sm-lightbox-v2-sidebar","sm-com-lb-sidebar","sm-flex","sm-flex-column","sm-position-relative",(0,M.getSidebarLocationClass)(t),{"sm-com-lb-sidebar-has-summary":c},{"sm-com-lb-sidebar-mobile-batch-add":p});return e.default.createElement("aside",{className:h,"data-disable-auto-hide":!0,"data-elem-app-id":"com_lb_sidebar"},e.default.createElement(a.Route,{render:this._renderRouterRedirect}),b&&e.default.createElement(f.default,{imageUri:l,considerAlbumSkus:this.props.hasGalleryContext}),d&&e.default.createElement(a.Route,{path:"/:category/:subcategory/:product/:sku",render:this._renderMarkBanner}),e.default.createElement("div",{className:"sm-com-lb-sidebar-inner-wrapper sm-flex sm-flex-column sm-position-relative"},e.default.createElement("div",{className:"sm-com-lb-sidebar-header-container"},e.default.createElement("div",{className:"sm-com-lb-sidebar-controls sm-flex sm-flex-justify-between"},u?this._renderControlsButtonPlaceholder():e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/",exact:!0,strict:!0,render:this._renderControlsButtonPlaceholder}),e.default.createElement(a.Route,{path:"/start",exact:!0,strict:!0,render:this._renderControlsButtonPlaceholder}),e.default.createElement(a.Route,{render:this._renderBackButton})),p&&e.default.createElement(m.default,null),e.default.createElement(n.default,{className:"sm-com-lb-sidebar-controls-close","data-elem-app-id":"com_lb_sidebar_btn_close",noChrome:!0,onClick:this._onCloseSidebar,size:n.default.SIZE_LARGE},d?e.default.createElement(i.default,{name:"Close"}):e.default.createElement("span",{className:"sm-mr-4 sm-label-large"},"Close"))),e.default.createElement("div",{className:"sm-com-lb-sidebar-header","data-elem-app-id":"com_lb_sidebar_header"},e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/:category/:subcategory/:product/:sku/confirmation",component:null}),u?null:e.default.createElement(a.Route,{render:this._renderSidebarTitle})))),d&&r&&!s&&e.default.createElement(a.Route,{path:"/",render:this._renderBatchAddFlow}),this._renderSidebarContent(),c&&e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/:category/:subcategory/:product/:sku",component:null}),e.default.createElement(a.Route,{render:this._renderCartSummary}))))}),babelHelpers.defineProperty(this,"_renderRoutes",({location:t,history:r})=>{let a=(0,M.calculateDirection)(t,r);return e.default.createElement(h.default,{location:t,direction:a,imageUri:this.props.currentImageUri,showAlbumSkus:this.props.hasGalleryContext,showInlineCropper:this.props.showInlineCropper,showInlineCards:this.props.isMobileClb})}),babelHelpers.defineProperty(this,"_renderFlatRoutes",({location:t,history:r})=>{let a=(0,M.calculateDirection)(t,r);return e.default.createElement(g.default,{location:t,direction:a,imageUri:this.props.currentImageUri,showAlbumSkus:this.props.hasGalleryContext,showInlineCropper:this.props.showInlineCropper,showInlineCards:this.props.isMobileClb})}),babelHelpers.defineProperty(this,"_renderCartSummary",()=>e.default.createElement(b.default,{imageUri:this.props.imageUri})),babelHelpers.defineProperty(this,"_renderSwipeableContent",()=>{let{currentImageUri:t,nextImageUri:r,previousImageUri:a,onModeChangeRequest:l,onNavBackwardRequest:o,onNavForwardRequest:s}=this.props;return e.default.createElement(q.default,{onNavBackwardRequest:o,onNavForwardRequest:s,onModeChangeRequest:l,currentImageUri:t,nextImageUri:r,previousImageUri:a})}),babelHelpers.defineProperty(this,"_renderSidebarContent",()=>{let{hasGalleryContext:t,isInitializingBatchAdd:r,isLoadingBatchAddImages:l,isPricelistDataLoading:s,catalogDisplayType:n,showBatchAddInSidebar:i}=this.props,d=(0,o.default)("sm-com-lb-sidebar-content",{"sm-hidden":i}),u=s||r||l;return e.default.createElement("div",{className:d},u?e.default.createElement(a.Route,{render:this._renderBusyIndicator}):this._renderCatalog(n),u||!t?null:this._renderBottomFooter())}),babelHelpers.defineProperty(this,"_renderBottomFooter",()=>e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/",strict:!0,exact:!0,render:()=>e.default.createElement(A.default,{imageUri:this.props.imageUri})}),e.default.createElement(a.Route,{path:"/start",strict:!0,exact:!0,render:()=>e.default.createElement(A.default,{imageUri:this.props.imageUri})}))),babelHelpers.defineProperty(this,"_renderBusyIndicator",()=>e.default.createElement("div",{className:"sm-com-lb-busy-container"},e.default.createElement(s.default,null))),babelHelpers.defineProperty(this,"_renderMarkBanner",({location:t})=>this.props.batchAddFlowEnabled?null:e.default.createElement(w.default,{location:t,imageUri:this.props.imageUri})),babelHelpers.defineProperty(this,"_renderCroppedThumbnail",({location:t})=>{let{imageUri:r}=this.props;return e.default.createElement(R.default,{forcePreview:!0,location:t,imageUri:r})}),babelHelpers.defineProperty(this,"_renderProductImageGallery",()=>{let{productImageGalleryUri:t}=this.props;return e.default.createElement(x.default,{uri:t})}),babelHelpers.defineProperty(this,"_renderImageCropper",({location:t})=>{let r=t.pathname.includes("download");return e.default.createElement(R.default,{forcePreview:r,location:t,imageUri:this.props.imageUri})}),babelHelpers.defineProperty(this,"_renderRouterRedirect",({location:t})=>{switch(this.props.catalogDisplayType){case L.NONE_CATALOG_TYPE:return null;case L.TREE_CATALOG_TYPE:return e.default.createElement(P.default,{location:t,imageUri:this.props.imageUri,showAlbumSkus:this.props.hasGalleryContext});case L.FLAT_CATALOG_TYPE:return e.default.createElement(y.default,{location:t,imageUri:this.props.imageUri,showAlbumSkus:this.props.hasGalleryContext})}}),babelHelpers.defineProperty(this,"_renderBackButton",({history:t,location:r})=>e.default.createElement(p.default,{history:t,imageUri:this.props.imageUri,location:r,onClick:this.props.onBackClick,showAlbumSkus:this.props.hasGalleryContext})),babelHelpers.defineProperty(this,"_renderControlsButtonPlaceholder",()=>e.default.createElement("div",{className:"sm-com-lb-sidebar-controls-placeholder"})),babelHelpers.defineProperty(this,"_renderSidebarTitle",({location:t})=>e.default.createElement(H.default,{location:t,imageUri:this.props.imageUri,isMobileClb:this.props.isMobileClb,showAlbumSkus:this.props.hasGalleryContext})),babelHelpers.defineProperty(this,"_renderPrimaryControls",()=>e.default.createElement(D.default,(0,N.extractPrimaryControlsProps)(this.props))),babelHelpers.defineProperty(this,"_renderNavButtons",()=>{let{onNavBackwardRequest:t,onNavForwardRequest:r,batchAddFlowEnabled:a}=this.props;return a||!t&&!r?null:e.default.createElement(v.default,{onNavBackwardRequest:t,onNavForwardRequest:r})}),babelHelpers.defineProperty(this,"_renderAlbumsFlow",({location:t})=>e.default.createElement(_.default,{location:t,imageUri:this.props.imageUri,showAlbumSkus:this.props.hasGalleryContext})),babelHelpers.defineProperty(this,"_renderBatchAddFlow",({location:t})=>e.default.createElement(c.default,{albumImageUri:this.props.imageUri,isMobileClb:this.props.isMobileClb,location:t,productImageGalleryUri:this.props.productImageGalleryUri,showAlbumSkus:this.props.hasGalleryContext,showBatchAddInSidebar:this.props.showBatchAddInSidebar})),babelHelpers.defineProperty(this,"_renderGreetingCards",({location:t})=>e.default.createElement(E.default,{location:t,imageUri:this.props.imageUri,showAlbumSkus:this.props.hasGalleryContext}))}componentDidUpdate(e){!0===e.isPricelistDataLoading&&!1===this.props.isPricelistDataLoading&&(0,u.sendWebviewMessage)({type:"commerceLightboxLoaded"})}_renderCatalog(t){switch(t){case L.NONE_CATALOG_TYPE:return e.default.createElement(C.default,{imageUri:this.props.currentImageUri,hasPackagesAvailable:this.props.hasPackagesAvailable});case L.TREE_CATALOG_TYPE:return e.default.createElement(a.Route,{render:this._renderRoutes});case L.FLAT_CATALOG_TYPE:return e.default.createElement(a.Route,{render:this._renderFlatRoutes})}}_renderContentPane(t){let{productImageGalleryUri:r}=this.props;if(r)return this._renderProductImageGallery();switch(t){case L.NONE_CATALOG_TYPE:case L.TREE_CATALOG_TYPE:return e.default.createElement(a.Route,{render:this._renderSwipeableContent});case L.FLAT_CATALOG_TYPE:return e.default.createElement(a.Route,{render:this._renderCroppedThumbnail})}}render(){let{allowRouting:t,basePath:r,batchAddFlowEnabled:o,catalogDisplayType:s,isInitializingBatchAdd:n,isSmugMugWebView:i,isUIHidden:u,onHideUI:c,onImageDataChange:m,onKeyDownRequest:b,onShowUI:p,currentImageUri:h,resizeRef:f,preloadImageUrls:g,autoHideUI:y,showFavoriteButtons:E}=this.props,_=t?l.BrowserRouter:a.MemoryRouter;return e.default.createElement(_,{basename:r},e.default.createElement(O,{key:h,mode:G.LIGHTBOX_MODE_BUY,autoHideUI:y,isUIHidden:u,onHideUI:c,onShowUI:p,onKeyDownRequest:b},!i&&e.default.createElement(S.default,{className:"sm-lightbox-v2-navbar-primary"},e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/:category",component:null}),e.default.createElement(a.Route,{render:this._renderPrimaryControls}))),e.default.createElement(a.Route,{render:this._renderSidebar}),e.default.createElement(I.default,{className:"sm-flex-column",containerRef:f},e.default.createElement(a.Route,{path:"/:category/:subcategory/:product/:sku",render:this._renderMarkBanner}),e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/cards/greeting-cards/:occasion",render:this._renderGreetingCards}),e.default.createElement(a.Route,{path:"/albums/albums/:albumSize",render:this._renderAlbumsFlow}),o&&!n?e.default.createElement(a.Route,{path:"/",render:this._renderBatchAddFlow}):null,s!==L.NONE_CATALOG_TYPE?e.default.createElement(a.Route,{exact:!0,path:"/:category/:subcategory/:product/:sku/confirmation",render:this._renderCroppedThumbnail}):null,s!==L.NONE_CATALOG_TYPE?e.default.createElement(a.Route,{exact:!0,path:"/:category/:subcategory/:product/:sku",render:this._renderImageCropper}):null,e.default.createElement(a.Route,{exact:!0,path:"/:category/:subcategory/:product",render:this._renderCroppedThumbnail}),e.default.createElement(a.Route,{exact:!0,path:"/:category/:subcategory",render:this._renderCroppedThumbnail}),this._renderContentPane(s))),e.default.createElement(S.default,{className:"sm-lightbox-v2-navbar-secondary"},e.default.createElement(U.default,{onCloseRequest:this._onCloseRequest}),!!E&&e.default.createElement(B.default,{albumImageUri:h,onImageDataChange:m})),e.default.createElement(a.Switch,null,e.default.createElement(a.Route,{path:"/albums/albums/:albumSize",component:null}),e.default.createElement(a.Route,{path:"/cards/greeting-cards/:occasion",component:null}),e.default.createElement(a.Route,{render:this._renderNavButtons})),e.default.createElement(d.default,{preloadUrls:g})))}}babelHelpers.defineProperty(F,"displayName","Lightbox.Layout.Commerce"),babelHelpers.defineProperty(F,"propTypes",{...k.LIGHTBOX_LAYOUT_PROP_TYPES,mode:r.default.oneOf([G.LIGHTBOX_MODE_BUY]),allowRouting:r.default.bool,basePath:r.default.string,batchAddFlowEnabled:r.default.bool,catalogDisplayType:r.default.oneOf([...L.CATALOG_TYPES]),hasGalleryContext:r.default.bool,hasPackagesAvailable:r.default.bool,isInitializingBatchAdd:r.default.bool,isLoadingBatchAddImages:r.default.bool,isMobileClb:r.default.bool,isPricelistDataLoading:r.default.bool,isSmugMugWebView:r.default.bool,location:r.default.string,productImageGalleryUri:r.default.string,showBatchAddInSidebar:r.default.bool,showCartSummary:r.default.bool,showInlineCards:r.default.bool,showErrorMessage:r.default.bool,useInMemoryRouter:r.default.bool}),babelHelpers.defineProperty(F,"defaultProps",{...k.LIGHTBOX_LAYOUT_DEFAULT_PROPS,allowRouting:!1,basePath:"",batchAddFlowEnabled:!1,hasGalleryContext:!1,isInitializingBatchAdd:!1,isLoadingBatchAddImages:!1,isMobileClb:!1,isPricelistDataLoading:!1,showBatchAddInSidebar:!1,showErrorMessage:!1,showCartSummary:!1,hasPackagesAvailable:!1});var Y=F;exports.default=Y}(),SM.currentModule=null}),"",{requires:["react","prop-types","react-router","react-router-dom","classnames","sm-component-busy","sm-component-button","sm-icon","sm-image-preloader","sm-webview","sm-batch-add-container","sm-batch-add-cta","sm-batch-add-signposts","sm-com-lb-cart-summary-container","sm-com-lb-catalog-back-button-container","sm-com-lb-catalog-routes","sm-com-lb-error-banner-container","sm-com-lb-flat-catalog-routes","sm-com-lb-flat-redirect-container","sm-com-lb-greeting-cards-occasion-container","sm-com-lb-albums-flow-container","sm-com-lb-image-cropper-wrapper-container","sm-com-lb-print-watermark-banner-container","sm-com-lb-no-product-available-container","sm-com-lb-router-redirect-container","sm-com-lb-sidebar-footer-container","sm-com-lb-sidebar-title-container","sm-product-image-gallery-container","sm-lightbox-close-button","sm-lightbox-content-pane","sm-lightbox-nav-bar","sm-lightbox-nav-buttons","sm-lightbox-primary-controls-container","sm-lightbox-swipeable-content","sm-lightbox-view","sm-lightbox-favorite-buttons-container","sm-lightbox-constants","sm-lightbox-layout-props","sm-com-lb-constants","sm-com-lb-helpers","sm-lightbox-layout-helpers"]});
YUI.add("sm-lightbox-constants",(function(_){SM.currentModule="sm-lightbox-constants";var exports={},E=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BUY_BUTTON_SKIN_DEFAULT=exports.BUY_BUTTON_SKINS=exports.BUY_BUTTON_STYLES=exports.BUY_BUTTON_STYLE_ICON_BUTTON=exports.BUY_BUTTON_STYLE_ICON=exports.BUY_BUTTON_STYLE_DEFAULT=exports.CONTENT_TYPE_IMAGE=exports.CONTENT_TYPE_VIDEO_POSTER=exports.CONTENT_TYPE_VIDEO=exports.CONTENT_TYPE_PROCESSING=exports.CONTENT_TYPE_ARCHIVE=exports.CONTENT_TYPE_BUSY=exports.SLIDESHOW_SLIDE_CURRENT=exports.SLIDESHOW_SLIDE_PREV=exports.LIGHTBOX_SLIDESHOW_DEFAULT_TRANSITION_SPEED=exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEEDS=exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEED_SLOW=exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEED_MEDIUM=exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEED_FAST=exports.LIGHTBOX_SLIDESHOW_SPEED_MIN=exports.LIGHTBOX_SLIDESHOW_SPEED_MAX=exports.LIGHTBOX_SLIDESHOW_DEFAULT_SPEED=exports.NAV_TYPE_NEXT=exports.NAV_TYPE_PREV=exports.REQUEST_MAX_PAGE_SIZE=exports.EARLY_PAGE_REQUEST_THRESHOLD=exports.PRELOAD_COUNT_BEFORE=exports.PRELOAD_COUNT_AFTER=exports.LOCK_UI_SELECTOR=exports.AUTO_HIDE_MOUSE_MOVE_THROTTLE=exports.AUTO_HIDE_INITIAL_DELAY=exports.AUTO_HIDE_DELAY=exports.MODE_IMAGE_EXPANSIONS=exports.DEFAULT_IMAGE_EXPANSIONS=exports.LIGHTBOX_TOOLS_MENU_ID=exports.LIGHTBOX_OVERFLOW_POP_UP_MENU_ID=exports.LIGHTBOX_OVERFLOW_MENU_ID=exports.LIGHTBOX_BASIC_MODES=exports.LIGHTBOX_MODES=exports.LIGHTBOX_MODE_SLIDESHOW=exports.LIGHTBOX_MODE_SHORTCUTS=exports.LIGHTBOX_MODE_SHARE_PHOTO=exports.LIGHTBOX_MODE_SHARE_EMBED=exports.LIGHTBOX_MODE_SHARE=exports.LIGHTBOX_MODE_IMAGE_INFO=exports.LIGHTBOX_MODE_EDITOR=exports.LIGHTBOX_MODE_DEFAULT=exports.LIGHTBOX_MODE_COMMENTS=exports.LIGHTBOX_MODE_BUY=exports.LIGHTBOX_CONTAINER_SELECTOR=void 0;var _=babelHelpers.interopRequireDefault(E("sm-component-button")),T=E("sm-share-constants");const O=E("sm-modal-constants").SKINNED_MODAL_SELECTOR;exports.LIGHTBOX_CONTAINER_SELECTOR=O;exports.LIGHTBOX_MODE_BUY="buy";exports.LIGHTBOX_MODE_COMMENTS="comments";exports.LIGHTBOX_MODE_DEFAULT="default";exports.LIGHTBOX_MODE_EDITOR="editor";exports.LIGHTBOX_MODE_IMAGE_INFO="info";exports.LIGHTBOX_MODE_SHARE="share";exports.LIGHTBOX_MODE_SHARE_EMBED="share embed";exports.LIGHTBOX_MODE_SHARE_PHOTO="share photo";exports.LIGHTBOX_MODE_SHORTCUTS="shortcuts";exports.LIGHTBOX_MODE_SLIDESHOW="slideshow";const I=["buy","comments","default","editor","info","share","share embed","share photo","shortcuts","slideshow"];exports.LIGHTBOX_MODES=I;const S=["comments","default","info","share","share embed","share photo","shortcuts"];exports.LIGHTBOX_BASIC_MODES=S;exports.LIGHTBOX_OVERFLOW_MENU_ID="lightboxOverflowMenu";exports.LIGHTBOX_OVERFLOW_POP_UP_MENU_ID="lightboxOverflowPopUpMenu";exports.LIGHTBOX_TOOLS_MENU_ID="lightboxToolsMenu";const N={Album:!0,Image:!0,ImageSizeDetails:!0};exports.DEFAULT_IMAGE_EXPANSIONS=N;const L={default:N,editor:N,shortcuts:N,slideshow:N,info:{...N,Components:!0,AlbumImageMetadata:!0},comments:N,buy:{...N,AlbumImagePricelistExclusions:!0,"AlbumImagePricelistExclusions.CatalogPrintVendor":!0,ImagePricelistExclusions:!0,"ImagePricelistExclusions.CatalogPrintVendor":!0,"Album.[Printmark]":!0,"Album.AlbumPricelistExclusions":!0,"AlbumImagePricelistExclusions.PricelistKey":!0,"ImagePricelistExclusions.PricelistKey":!0},share:{...N,...T.SHARE_EXPANSIONS},"share embed":{...N,...T.SHARE_EXPANSIONS},"share photo":{...N,...T.SHARE_EXPANSIONS}};exports.MODE_IMAGE_EXPANSIONS=L;exports.AUTO_HIDE_DELAY=3e3;exports.AUTO_HIDE_INITIAL_DELAY=5e3;exports.AUTO_HIDE_MOUSE_MOVE_THROTTLE=500;exports.LOCK_UI_SELECTOR='[data-disable-auto-hide="true"]';exports.PRELOAD_COUNT_AFTER=3;exports.PRELOAD_COUNT_BEFORE=2;exports.EARLY_PAGE_REQUEST_THRESHOLD=10;exports.REQUEST_MAX_PAGE_SIZE=100;exports.NAV_TYPE_PREV="prev";exports.NAV_TYPE_NEXT="next";exports.LIGHTBOX_SLIDESHOW_DEFAULT_SPEED=6;exports.LIGHTBOX_SLIDESHOW_SPEED_MAX=60;exports.LIGHTBOX_SLIDESHOW_SPEED_MIN=1;exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEED_FAST="fast";exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEED_MEDIUM="medium";exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEED_SLOW="slow";const e=new Map([["fast",1e3],["medium",2e3],["slow",4e3]]);exports.LIGHTBOX_SLIDESHOW_TRANSITION_SPEEDS=e;exports.LIGHTBOX_SLIDESHOW_DEFAULT_TRANSITION_SPEED="medium";exports.SLIDESHOW_SLIDE_PREV="previous";exports.SLIDESHOW_SLIDE_CURRENT="current";exports.CONTENT_TYPE_BUSY="CONTENT_TYPE_BUSY";exports.CONTENT_TYPE_ARCHIVE="CONTENT_TYPE_ARCHIVE";exports.CONTENT_TYPE_PROCESSING="CONTENT_TYPE_PROCESSING";exports.CONTENT_TYPE_VIDEO="CONTENT_TYPE_VIDEO";exports.CONTENT_TYPE_VIDEO_POSTER="CONTENT_TYPE_VIDEO_POSTER";exports.CONTENT_TYPE_IMAGE="CONTENT_TYPE_IMAGE";exports.BUY_BUTTON_STYLE_DEFAULT="button";exports.BUY_BUTTON_STYLE_ICON="icon";exports.BUY_BUTTON_STYLE_ICON_BUTTON="iconbutton";const D=["button","icon","iconbutton"];exports.BUY_BUTTON_STYLES=D;const t=[_.default.SKIN_ACCENT,_.default.SKIN_PRIMARY,_.default.SKIN_SECONDARY];exports.BUY_BUTTON_SKINS=t;const A=_.default.SKIN_ACCENT;exports.BUY_BUTTON_SKIN_DEFAULT=A}(),SM.currentModule=null}),"",{requires:["sm-component-button","sm-share-constants","sm-modal-constants"]});
YUI.add("sm-lightbox-content-container",(function(e){SM.currentModule="sm-lightbox-content-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),n=babelHelpers.interopRequireDefault(t("sm-lightbox-content")),r=t("sm-lightbox-selectors");var o=(0,e.connect)((e,{imageUri:t,isActive:n})=>({type:(0,r.getContentTypeForUri)(e,t,n),...(0,r.getContentContainerDimensions)(e)}),()=>({}))(n.default);exports.default=o}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-content","sm-lightbox-selectors"]});
YUI.add("sm-lightbox-content-pane",(function(e){SM.currentModule="sm-lightbox-content-pane";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("classnames"));const l=({containerRef:t,children:l,className:a,...r})=>e.default.createElement("div",babelHelpers.extends({className:(0,n.default)("sm-lightbox-v2-content sm-flex sm-flex-column",a),ref:t},r),l);l.displayName="Lightbox.Content.ContentPane";var a=l;exports.default=a}(),SM.currentModule=null}),"",{requires:["react","classnames"]});
YUI.add("sm-lightbox-content",(function(e){SM.currentModule="sm-lightbox-content";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Content=void 0;var e=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-busy")),a=babelHelpers.interopRequireDefault(t("sm-lightbox-photo-wrapper-container")),n=babelHelpers.interopRequireDefault(t("sm-lightbox-placeholder")),i=babelHelpers.interopRequireDefault(t("sm-lightbox-video-container")),s=t("sm-lightbox-constants");const u=t=>{let o,{allowZoom:u,imageUri:r,type:c,isActive:d,containerHeight:b,containerWidth:T,onModeChangeRequest:m,mode:E,buyButtonSkin:h,buyButtonStyle:f,showBuyButton:p,showCaption:_,showEXIF:N,showFilename:g,showImageInfo:O,showMap:C,showTitle:y,...S}=t;switch(c){case s.CONTENT_TYPE_BUSY:o=e.default.createElement(l.default,{className:"sm-lightbox-v2-busy"});break;case s.CONTENT_TYPE_ARCHIVE:o=e.default.createElement(n.default,{icon:"Vault",label:"Archive"});break;case s.CONTENT_TYPE_PROCESSING:o=e.default.createElement(n.default,{icon:"ImageProcessing",label:"Processing..."});break;case s.CONTENT_TYPE_VIDEO:o=e.default.createElement(i.default,{videoUri:r,containerWidth:T,containerHeight:b,isActive:!0});break;case s.CONTENT_TYPE_VIDEO_POSTER:case s.CONTENT_TYPE_IMAGE:o=e.default.createElement(a.default,{allowZoom:u&&c===s.CONTENT_TYPE_IMAGE,buyButtonSkin:h,buyButtonStyle:f,containerHeight:b,containerWidth:T,imageUri:r,onModeChangeRequest:m,showBuyButton:p,showCaption:_,showFilename:g,showImageInfo:O,showTitle:y,type:c})}return e.default.createElement("div",babelHelpers.extends({key:r,className:"sm-lightbox-v2-content-item sm-flex sm-flex-items-center sm-flex-justify-center"},S),o)};exports.Content=u,u.propTypes={allowZoom:o.default.bool,imageUri:o.default.string,onModeChangeRequest:o.default.func,isActive:o.default.bool,type:o.default.oneOf([s.CONTENT_TYPE_ARCHIVE,s.CONTENT_TYPE_BUSY,s.CONTENT_TYPE_IMAGE,s.CONTENT_TYPE_PROCESSING,s.CONTENT_TYPE_VIDEO,s.CONTENT_TYPE_VIDEO_POSTER]).isRequired,buyButtonSkin:o.default.oneOf(s.BUY_BUTTON_SKINS),buyButtonStyle:o.default.oneOf(s.BUY_BUTTON_STYLES),showBuyButton:o.default.bool,showEXIF:o.default.bool,showFilename:o.default.bool,showImageInfo:o.default.bool,showMap:o.default.bool,showTitle:o.default.bool},u.displayName="Lightbox.Content.ContentItem";var r=u;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-busy","sm-lightbox-photo-wrapper-container","sm-lightbox-placeholder","sm-lightbox-video-container","sm-lightbox-constants"]});
YUI.add("sm-lightbox-download-button-container",(function(e){SM.currentModule="sm-lightbox-download-button-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),l=babelHelpers.interopRequireDefault(t("sm-lightbox-download-button")),o=t("sm-lightbox-selectors"),r=t("sm-lightbox-actions"),a=t("sm-page-selectors"),s=babelHelpers.interopRequireDefault(t("sm-image-sizes"));var i=(0,e.connect)((e,{albumImageUri:t})=>{let l=(0,o.getAlbumKey)(e,t)||"",r="",i=(0,o.getImageKey)(e,t)||"",n=!!(0,a.getLoggedInUserUri)(e),u=(0,a.isLoggedInUserPageOwner)(e),{ImageUrlTemplate:g="",VideoUrlTemplate:d=""}=(0,o.getImageSizeDetails)(e,t)||{};if((0,o.isVideo)(e,t)){let l=(0,o.getImageSizesInstance)(e,t);if(l){let e=l.getLargestSize({type:s.default.TYPE_VIDEO});if(e){let t=e.Name.replace("VideoSize","");r=d.replace(/#size#/g,String(t)+"D")}}}else{r=g.replace(/#size#/g,"D");let l=(0,o.getAlbumUrlPath)(e,t);l&&!r.includes("".concat(l,"/"))&&(r=r.replace("/photos/","".concat(l,"/")))}return{albumKey:l,downloadUrl:r,imageKey:i,isLoggedInUser:n,isOwner:u}},e=>({onRequestDownload:()=>{e((0,r.requestDownload)())}}))(l.default);exports.default=i}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-download-button","sm-lightbox-selectors","sm-lightbox-actions","sm-page-selectors","sm-image-sizes"]});
YUI.add("sm-lightbox-download-button",(function(e){SM.currentModule="sm-lightbox-download-button";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(o("sm-dom")),l=babelHelpers.interopRequireDefault(o("prop-types")),a=babelHelpers.interopRequireWildcard(o("react")),t=o("sm-gallery-views-constants"),n=babelHelpers.interopRequireDefault(o("sm-component-button")),d=babelHelpers.interopRequireDefault(o("sm-gallery-download-panel-modal")),s=babelHelpers.interopRequireDefault(o("sm-icon"));const r=(0,babelHelpers.interopRequireDefault(o("sm-tooltip-hoc")).default)(n.default);class i extends a.PureComponent{constructor(...o){super(...o),babelHelpers.defineProperty(this,"state",{showDownloadPanel:!1}),babelHelpers.defineProperty(this,"_onDownloadRequest",()=>{let{albumKey:o,downloadUrl:l,downloadsUnlocked:a,imageKey:n,isOwner:d,hasDownloadPassword:s,onRequestDownload:r}=this.props;var i,u,p;(r&&r(),d||a||!s)?e.default.isStandalone?e.default.escapeMobileWebApp(l):e.default.doc.location.href=l:(null===(i=SM)||void 0===i||null===(u=i.env)||void 0===u||null===(p=u.host)||void 0===p?void 0:p.customDomain)?e.default.doc.location="".concat(t.DOWNLOAD_PAGE_PREFIX,"/").concat(o,"/").concat(n):this.setState({showDownloadPanel:!0})}),babelHelpers.defineProperty(this,"_onClose",()=>{this.setState({showDownloadPanel:!1})})}render(){let{albumKey:e,className:o,downloadEnabled:l,downloadUrl:t,downloadsUnlocked:n,hasDownloadPassword:i,imageKey:u,isLoggedInUser:p,isOwner:b,onUnlockDownloads:c,albumImageUri:m,onRequestDownload:w,...f}=this.props,{showDownloadPanel:h}=this.state;return a.default.createElement(a.default.Fragment,null,a.default.createElement(r,babelHelpers.extends({tooltipLabel:"Download",onClick:this._onDownloadRequest,className:o,"data-testid":"lightbox_download_button"},f),a.default.createElement(s.default,{name:"Download",size:s.default.SIZE_SMALL})),!!h&&a.default.createElement(d.default,{albumKey:e,imageUrl:t,downloadEnabled:l,downloadPassword:i,isOwner:b,isLoggedInUser:p,isUnlocked:n,onClose:this._onClose,unlockStateCallback:c}))}}exports.default=i,babelHelpers.defineProperty(i,"displayName","Lightbox.Common.DownloadButton"),babelHelpers.defineProperty(i,"propTypes",{albumKey:l.default.string.isRequired,downloadEnabled:l.default.bool.isRequired,downloadUrl:l.default.string,downloadsUnlocked:l.default.bool,hasDownloadPassword:l.default.bool.isRequired,imageKey:l.default.string.isRequired,isLoggedInUser:l.default.bool.isRequired,isOwner:l.default.bool.isRequired,onUnlockDownloads:l.default.func,onRequestDownload:l.default.func}),babelHelpers.defineProperty(i,"defaultProps",{downloadsUnlocked:!1})}(),SM.currentModule=null}),"",{requires:["sm-dom","prop-types","react","sm-gallery-views-constants","sm-component-button","sm-gallery-download-panel-modal","sm-icon","sm-tooltip-hoc"]});
YUI.add("sm-lightbox-fatal-error-message",(function(e){SM.currentModule="sm-lightbox-fatal-error-message";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("sm-link"));const l=()=>e.default.createElement(e.default.Fragment,null,e.default.createElement("p",null,"A gremlin must have snuck into the engine room, but our engineers are on the case. Please refresh the page and try again."),e.default.createElement("p",null,"If the problem persists, contact our support heroes,",e.default.createElement(r.default,{href:"mailto:help@smugmug.com"}," help@smugmug.com"),", and they'll help make this right."));l.displayName="LightBox.Common.FatalErrorMessage";var a=l;exports.default=a}(),SM.currentModule=null}),"",{requires:["react","sm-link"]});
YUI.add("sm-lightbox-favorite-buttons-container",(function(e){SM.currentModule="sm-lightbox-favorite-buttons-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-favorite-container-hoc")),r=babelHelpers.interopRequireDefault(t("sm-lightbox-favorite-buttons")),o=(0,e.default)(r.default);exports.default=o}(),SM.currentModule=null}),"",{requires:["sm-favorite-container-hoc","sm-lightbox-favorite-buttons"]});
YUI.add("sm-lightbox-favorite-buttons",(function(e){SM.currentModule="sm-lightbox-favorite-buttons";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon")),i=babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")),r=t("sm-analytics-constants");const u=(0,i.default)(l.default),n=t=>{let{isFavorite:a,onFavoriteRequest:i,viewAllUrl:n}=t,s=!i,d=a&&!s?"Unfavorite":"Favorite",c=a&&!s?"Heart":"HeartOutlined",f=a&&!s?l.default.SKIN_ACCENT:l.default.SKIN_SECONDARY;return e.default.createElement("ul",{className:"sm-lightbox-v2-hideable","data-disable-auto-hide":!0},e.default.createElement("li",null,e.default.createElement(u,{className:"user-ui-lightbox-favorite-button","data-testid":"lightbox_togglefavorite_button",tooltipLabel:d,tooltipAlignment:u.TOOLTIP_ALIGN_LEFT,onClick:i,skin:f,disabled:s,noChrome:!0},e.default.createElement(o.default,{name:c,size:o.default.SIZE_LARGE}))),e.default.createElement("li",{className:"sm-lightbox-v2-hide-portrait"},e.default.createElement(u,{className:"user-ui-lightbox-view-favorites-button","data-testid":"lightbox_viewfavorites_button",tooltipLabel:"View Favorites",tooltipAlignment:u.TOOLTIP_ALIGN_LEFT,"data-link-tracking-category":r.CATEGORY.FAVORITE,"data-link-tracking-action":r.ACTION.SEE_ALL,href:n,noChrome:!0},e.default.createElement(o.default,{name:"Gallery",size:o.default.SIZE_LARGE}))))};n.displayName="Lightbox.Common.FavoriteButtons",n.propTypes={isFavorite:a.default.bool,onFavoriteRequest:a.default.func,onViewAllClick:a.default.func,viewAllUrl:a.default.string.isRequired},n.defaultProps={isFavorite:!1};var s=n;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-tooltip-hoc","sm-analytics-constants"]});
YUI.add("sm-lightbox-favorite-menu-items",(function(e){SM.currentModule="sm-lightbox-favorite-menu-items";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-icon")),r=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),u=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),n=t("sm-component-menu-constants");const o=t=>{let{isFavorite:l,onFavoriteRequest:o,viewAllUrl:i}=t;return e.default.createElement(e.default.Fragment,null,e.default.createElement(r.default,{dataAttrs:{"data-testid":"lightbox_togglefavorite_menuitem"},onClick:o},e.default.createElement(a.default,{name:l?"Heart":"HeartOutlined",size:a.default.SIZE_SMALL,className:l?"sm-accent":null}),e.default.createElement(u.default,null,l?"Remove From":"Add To"," Favorites")),e.default.createElement(r.default,{dataAttrs:{"data-testid":"lightbox_viewfavorites_menuitem"},href:i,type:n.ITEM_TYPE_LINK},e.default.createElement(a.default,{name:"Gallery",size:a.default.SIZE_SMALL}),e.default.createElement(u.default,null,"View Favorites")))};o.displayName="Lightbox.Common.FavoriteMenuItems",o.propTypes={isFavorite:l.default.bool,onFavoriteRequest:l.default.func.isRequired,viewAllUrl:l.default.string.isRequired},o.defaultProps={isFavorite:!1};var i=o;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon","sm-component-menu-item","sm-component-menu-label","sm-component-menu-constants"]});
YUI.add("sm-lightbox-image-editor-layout-container",(function(e){SM.currentModule="sm-lightbox-image-editor-layout-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=t("sm-api-redux-actions"),i=t("sm-api-redux-selectors"),o=babelHelpers.interopRequireDefault(t("sm-lightbox-image-editor-layout")),a=t("sm-lightbox-constants");var u=(0,e.connect)((e,t)=>{let{imageUris:r,imageUri:o}=t;return{albumUri:(0,i.getExpansionUri)(e,o,"Album"),imageUris:r,imageUri:o}},(e,{onModeChangeRequest:t})=>({_onExitEditor:i=>{e((0,r.fetchFromAPI)({uri:i})),t(a.LIGHTBOX_MODE_DEFAULT)}}),(e,t)=>{let{imageUri:r}=e,{_onExitEditor:i}=t;return{...e,onExitEditor:()=>{i(r)}}})(o.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-actions","sm-api-redux-selectors","sm-lightbox-image-editor-layout","sm-lightbox-constants"]});
YUI.add("sm-lightbox-image-editor-layout",(function(e){SM.currentModule="sm-lightbox-image-editor-layout";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react"),i=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("sm-image-editor-panel"));class o extends e.PureComponent{componentDidMount(){let{albumUri:e,imageUris:r,imageUri:i}=this.props;this._editor=new t.default({imageUris:i,render:!0,albumUri:e,startIndex:r.indexOf(i)+1}),this._editor.show(),this._editor.onceAfter("visibleChange",e=>{e.newVal||this.props.onExitEditor()})}componentWillUnmount(){this._editor&&this._editor.destroy()}render(){return null}}exports.default=o,babelHelpers.defineProperty(o,"displayName","Lightbox.Layout.ImageEditor"),babelHelpers.defineProperty(o,"propTypes",{albumUri:i.default.string.isRequired,imageUris:i.default.array.isRequired,imageUri:i.default.string.isRequired,onExitEditor:i.default.func.isRequired})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-image-editor-panel"]});
YUI.add("sm-lightbox-keyboard-container-hoc",(function(e){SM.currentModule="sm-lightbox-keyboard-container-hoc";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withCommonKeyboardDispatchProps=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),a=t("sm-fullscreen-actions"),o=t("sm-analytics-constants"),s=t("sm-lightbox-constants"),r=t("sm-image-metadata-actions"),n=t("sm-lightbox-layout-helpers");const i=["INPUT","TEXTAREA","A"];exports.withCommonKeyboardDispatchProps=t=>(l,c)=>{let u,m=t(l,c),{onCloseRequest:d,onModeChangeRequest:E,mode:_,canEdit:I}=c,{onNavBackwardRequest:M,onNavForwardRequest:O}=m;return m.onKeyDownRequest=t=>{if(i.includes(e.default.doc.activeElement.nodeName))return;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;let m=!1;switch(t.key){case"ArrowLeft":M&&(m=!0,M());break;case"ArrowRight":O&&(m=!0,O());break;case"Escape":m=!0,_===s.LIGHTBOX_MODE_DEFAULT?d(o.TRIGGER_ESC):E(s.LIGHTBOX_MODE_DEFAULT);break;case"f":m=!0,l((0,a.setFullscreen)(!e.default.isFullscreen(),o.TRIGGER_KEYPRESS));break;case"e":if(!(0,n.shouldShowImageInfo)(c)||!I)break;m=!0,t.preventDefault(),E(s.LIGHTBOX_MODE_IMAGE_INFO),e.default.win.requestAnimationFrame(()=>{l((0,r.startEditing)())});break;case"i":if(!(0,n.shouldShowImageInfo)(c))break;m=!0,u=_===s.LIGHTBOX_MODE_IMAGE_INFO?s.LIGHTBOX_MODE_DEFAULT:s.LIGHTBOX_MODE_IMAGE_INFO,E(u);break;case"/":m=!0,u=_===s.LIGHTBOX_MODE_SHORTCUTS?s.LIGHTBOX_MODE_DEFAULT:s.LIGHTBOX_MODE_SHORTCUTS,E(u)}m&&(t.preventDefault(),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation())},m}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-fullscreen-actions","sm-analytics-constants","sm-lightbox-constants","sm-image-metadata-actions","sm-lightbox-layout-helpers"]});
YUI.add("sm-lightbox-layout-container-hoc",(function(e){SM.currentModule="sm-lightbox-layout-container-hoc";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withCommonLayoutDispatchProps=exports.withCommonLayoutStateProps=void 0;var e=o("sm-lightbox-actions"),i=o("sm-lightbox-constants"),s=o("sm-lightbox-selectors"),t=o("sm-page-selectors"),a=o("sm-lightbox-layout-helpers"),r=o("sm-analytics-constants");exports.withCommonLayoutStateProps=e=>(o,i)=>{let{allowLoopingNavigation:r,imageUri:n,imageUris:l}=i,{previousImageUri:g,nextImageUri:m}=(0,a.getNextPrevImageUris)({imageUris:l,imageUri:n,allowLooping:r}),u=(0,s.getLightboxMode)(o),d=(0,t.isLoggedInUserPageOwner)(o)||(0,t.isLoggedInUserAdmin)(o),h={mode:u,currentImageUri:n,previousImageUri:g,nextImageUri:m,isSidebarLoading:!(0,s.hasExpansionsForMode)(o,u,n),isUIDisabled:(0,s.isUIDisabled)(o),isUIHidden:(0,s.isUIHidden)(o),isOwner:d,preloadImageUrls:(0,s.getPreloadImageUrls)(o,l,n),showImageInfo:(0,a.shouldShowImageInfo)(i)};return(!Array.isArray(l)||l.length<=1)&&(h.showSlideshowButton=!1),e?{...h,...e(o,i)}:h};exports.withCommonLayoutDispatchProps=o=>(s,t)=>{let{allowLoopingNavigation:n,imageUri:l,imageUris:g,onCloseRequest:m,onModeChangeRequest:u,onNavRequest:d}=t,h={onCloseRequest:()=>{m(r.TRIGGER_BUTTON)},onResize:(o,i)=>{s((0,e.setContainerDimensions)(o,i)),s((0,e.prefetchImages)(g))},onHideUI:()=>{s((0,e.hideUI)())},onShowUI:()=>{s((0,e.showUI)())}};if(d){let{previousImageUri:o,nextImageUri:t}=(0,a.getNextPrevImageUris)({imageUris:g,imageUri:l,allowLooping:n});void 0!==o&&(h.onNavBackwardRequest=()=>{s((0,e.resetVideoState)(!1)),d(i.NAV_TYPE_PREV)}),void 0!==t&&(h.onNavForwardRequest=()=>{s((0,e.resetVideoState)(!1)),d(i.NAV_TYPE_NEXT)})}return u&&(h={...h,onCloseSidebar:()=>{u(i.LIGHTBOX_MODE_DEFAULT)}}),o?{...h,...o(s,t)}:h}}(),SM.currentModule=null}),"",{requires:["sm-lightbox-actions","sm-lightbox-constants","sm-lightbox-selectors","sm-page-selectors","sm-lightbox-layout-helpers","sm-analytics-constants"]});
YUI.add("sm-lightbox-layout-helpers",(function(o){SM.currentModule="sm-lightbox-layout-helpers";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shouldShowImageInfo=exports.getNextPrevImageUris=exports.extractPrimaryControlsProps=void 0;var o=e("sm-circular-array"),t=e("sm-lightbox-layout-props"),n=e("sm-lightbox-constants");exports.extractPrimaryControlsProps=o=>{let{mode:e,allowToolsMenu:t,isOwner:n,currentImageUri:a,onImageDataChange:s,onImageDeleteRequest:r,onModeChangeRequest:l,buyButtonSkin:u,buyButtonStyle:i,downloadsUnlocked:h,onUnlockDownloads:w,hasDownloadPassword:m,showBuyButton:d,showCommentsButton:g,showDownloadButton:I,showFavoriteButtons:S,showImageInfo:B,showShareButton:c,showSlideshowButton:p,nativeShareData:y,isOwnerOrAdmin:M}=o;return{mode:e,allowToolsMenu:t,isOwner:n,albumImageUri:a,onImageDataChange:s,onImageDeleteRequest:r,onModeChangeRequest:l,buyButtonSkin:u,buyButtonStyle:i,downloadsUnlocked:h,onUnlockDownloads:w,hasDownloadPassword:m,showBuyButton:d,showCommentsButton:g,showDownloadButton:I,showFavoriteButtons:S,showImageInfo:B,showShareButton:c,showSlideshowButton:p,nativeShareData:y,isOwnerOrAdmin:M}};exports.getNextPrevImageUris=({imageUris:e,imageUri:t,allowLooping:n=!0})=>{if(!t)return{};if(n&&e.length>2){let n=(0,o.getRange)(e,t,1,1),a=n.shift(),s=n.pop();return a===t&&(a=void 0),s===t&&(s=void 0),{previousImageUri:a,nextImageUri:s}}let a=e.indexOf(t);return{previousImageUri:e[a-1],nextImageUri:e[a+1]}};exports.shouldShowImageInfo=o=>{let e={...t.LIGHTBOX_LAYOUT_DEFAULT_PROPS,...o};return!!e.allowImageInfo&&(e.mode===n.LIGHTBOX_MODE_SLIDESHOW?!!e.allowSlideshowImageInfo&&Boolean(e.showCaption||e.showTitle):Boolean(e.showCaption||e.showEXIF||e.showFilename||e.showKeywords||e.showMap||e.showTitle))}}(),SM.currentModule=null}),"",{requires:["sm-circular-array","sm-lightbox-layout-props","sm-lightbox-constants"]});
YUI.add("sm-lightbox-layout-props",(function(o){SM.currentModule="sm-lightbox-layout-props";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LIGHTBOX_LAYOUT_DEFAULT_PROPS=exports.LIGHTBOX_LAYOUT_PROP_TYPES=void 0;var o=babelHelpers.interopRequireDefault(e("prop-types")),l=e("sm-lightbox-constants");const t={mode:o.default.oneOf(l.LIGHTBOX_MODES),allowBuyButton:o.default.bool,allowImageInfo:o.default.bool,allowLoopingNavigation:o.default.bool,allowSlideshowImageInfo:o.default.bool,allowToolsMenu:o.default.bool,isOwner:o.default.bool.isRequired,isSidebarLoading:o.default.bool,isUIDisabled:o.default.bool,isUIHidden:o.default.bool,onCloseRequest:o.default.func.isRequired,onCloseSidebar:o.default.func.isRequired,onHideUI:o.default.func.isRequired,onImageDataChange:o.default.func,onImageDeleteRequest:o.default.func,onKeyDownRequest:o.default.func.isRequired,onModeChangeRequest:o.default.func.isRequired,onNavBackwardRequest:o.default.func,onNavForwardRequest:o.default.func,onResize:o.default.func.isRequired,onShowUI:o.default.func.isRequired,currentImageUri:o.default.string,nextImageUri:o.default.string,previousImageUri:o.default.string,preloadImageUrls:o.default.arrayOf(o.default.string),resizeRef:o.default.object.isRequired,downloadsUnlocked:o.default.bool,hasDownloadPassword:o.default.bool,onUnlockDownloads:o.default.func,autoHideUI:o.default.bool,buyButtonSkin:o.default.oneOf(l.BUY_BUTTON_SKINS),buyButtonStyle:o.default.oneOf(l.BUY_BUTTON_STYLES),showCaption:o.default.bool,showKeywords:o.default.bool,showTitle:o.default.bool,slideshowSpeed:o.default.number,slideshowTransitionSpeed:o.default.oneOf(Array.from(l.LIGHTBOX_SLIDESHOW_TRANSITION_SPEEDS.keys())),showBuyButton:o.default.bool,showCommentsButton:o.default.bool,showDownloadButton:o.default.bool,showEXIF:o.default.bool,showFavoriteButtons:o.default.bool,showFilename:o.default.bool,showMap:o.default.bool,showShareButton:o.default.bool,showSlideshowButton:o.default.bool};exports.LIGHTBOX_LAYOUT_PROP_TYPES=t;const a={mode:l.LIGHTBOX_MODE_DEFAULT,allowImageInfo:!0,allowLoopingNavigation:!0,allowSlideshowImageInfo:!0,allowToolsMenu:!0,isSidebarLoading:!1,isUIDisabled:!1,isUIHidden:!1,preloadImageUrls:[],autoHideUI:!0,buyButtonSkin:l.BUY_BUTTON_SKIN_DEFAULT,buyButtonStyle:l.BUY_BUTTON_STYLE_DEFAULT,showCaption:!0,showKeywords:!0,showTitle:!0,slideshowSpeed:l.LIGHTBOX_SLIDESHOW_DEFAULT_SPEED,slideshowTransitionSpeed:l.LIGHTBOX_SLIDESHOW_DEFAULT_TRANSITION_SPEED,hasDownloadPassword:!1,showBuyButton:!1,showCommentsButton:!0,showDownloadButton:!1,showEXIF:!0,showFavoriteButtons:!1,showFilename:!1,showMap:!0,showShareButton:!0,showSlideshowButton:!0};exports.LIGHTBOX_LAYOUT_DEFAULT_PROPS=a}(),SM.currentModule=null}),"",{requires:["prop-types","sm-lightbox-constants"]});
YUI.add("sm-lightbox-layout-switch-container",(function(e){SM.currentModule="sm-lightbox-layout-switch-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),o=t("sm-lightbox-selectors"),r=t("sm-com-lb-helpers"),s=babelHelpers.interopRequireDefault(t("sm-lightbox-layout-switch")),i=t("sm-page-selectors");const l=(0,r.isAndroidDevice)();var c=(0,e.connect)(e=>({canEdit:(0,i.isLoggedInUserPageOwner)(e)||(0,i.isLoggedInUserAdmin)(e),mode:(0,o.getLightboxMode)(e)}),()=>({}),(e,t,o)=>({...e,...o,isAndroidDevice:l}))(s.default);exports.default=c}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-selectors","sm-com-lb-helpers","sm-lightbox-layout-switch","sm-page-selectors"]});
YUI.add("sm-lightbox-layout-switch",(function(e){SM.currentModule="sm-lightbox-layout-switch";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-lightbox-basic-layout-container")),r=babelHelpers.interopRequireDefault(t("sm-lightbox-slideshow-layout-container")),o=babelHelpers.interopRequireDefault(t("sm-lightbox-image-editor-layout-container")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-commerce-layout-container")),i=t("sm-lightbox-constants");const n=t=>{switch(t.mode){case i.LIGHTBOX_MODE_SLIDESHOW:return e.default.createElement(r.default,t);case i.LIGHTBOX_MODE_EDITOR:return e.default.createElement(o.default,t);case i.LIGHTBOX_MODE_BUY:return e.default.createElement(u.default,t);default:return e.default.createElement(a.default,t)}};n.displayName="Lightbox.LayoutSwitch",n.propTypes={mode:l.default.oneOf(i.LIGHTBOX_MODES)},n.defaultProps={mode:i.LIGHTBOX_MODE_DEFAULT};var s=n;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-lightbox-basic-layout-container","sm-lightbox-slideshow-layout-container","sm-lightbox-image-editor-layout-container","sm-lightbox-commerce-layout-container","sm-lightbox-constants"]});
YUI.add("sm-lightbox-modal",(function(e){SM.currentModule="sm-lightbox-modal";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(l("react")),t=babelHelpers.interopRequireDefault(l("sm-dom")),a=babelHelpers.interopRequireWildcard(l("sm-modal"));const r=()=>{},o=({children:l})=>{let o=(0,e.useCallback)(e=>{let l=t.default.doc.querySelector(".sm-lightbox-v2-sidebar");return!(!l||!(null==l?void 0:l.contains(e)))&&t.default.closest(e,e=>!!l.contains(e)&&e.clientHeight!==e.scrollHeight)},[]);return e.default.createElement(a.default,{applyUserSkin:!0,maskOpacity:a.MASK_OPAQUE,className:"sm-lightbox-v2-modal",maskClassName:"sm-lightbox-v2-modal-mask",initialFocus:r,preventTouch:o},l)};o.displayName="Lightbox.Common.Modal";var i=o;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","sm-dom","sm-modal"]});
YUI.add("sm-lightbox-nav-bar",(function(e){SM.currentModule="sm-lightbox-nav-bar";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("react")),r=babelHelpers.interopRequireDefault(a("classnames"));const l=({children:a,className:l})=>{let t=(0,r.default)(["sm-lightbox-v2-navbar",l,"sm-flex"]);return e.default.createElement("nav",{className:t},a)};l.displayName="Lightbox.Navigation.NavBar";var t=l;exports.default=t}(),SM.currentModule=null}),"",{requires:["react","classnames"]});
YUI.add("sm-lightbox-nav-button",(function(e){SM.currentModule="sm-lightbox-nav-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("classnames")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon")),u=t("sm-lightbox-constants");const r=({type:t,onClick:a,className:r})=>{let s=t===u.NAV_TYPE_NEXT,i=s?"NavigateNext":"NavigateBack",d=s?"Next":"Previous",c=(0,l.default)(["sm-lightbox-v2-nav-button","sm-lightbox-v2-hideable","sm-flex-self-center",r]);return e.default.createElement(n.default,{"aria-label":d,className:c,"data-direction":t,"data-disable-auto-hide":!0,"data-testid":"lightbox_".concat(s?"next":"previous","_button"),disabled:!a||null,noChrome:!0,onClick:a||null},e.default.createElement(o.default,{name:i}))};r.displayName="Lightbox.Navigation.NavButton",r.propTypes={type:a.default.oneOf([u.NAV_TYPE_NEXT,u.NAV_TYPE_PREV]).isRequired,onClick:a.default.func},r.defaultProps={disabled:!1};var s=r;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-component-button","sm-icon","sm-lightbox-constants"]});
YUI.add("sm-lightbox-nav-buttons",(function(e){SM.currentModule="sm-lightbox-nav-buttons";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-button")),r=t("sm-lightbox-constants");const l=({onNavBackwardRequest:t,onNavForwardRequest:a})=>e.default.createElement(e.default.Fragment,null,e.default.createElement(u.default,{type:r.NAV_TYPE_PREV,onClick:t}),e.default.createElement(u.default,{type:r.NAV_TYPE_NEXT,onClick:a}));l.displayName="Lightbox.Navigation.NavButtons",l.propTypes={onNavBackwardRequest:a.default.func,onNavForwardRequest:a.default.func};var n=l;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-lightbox-nav-button","sm-lightbox-constants"]});
YUI.add("sm-lightbox-overflow-menu",(function(e){SM.currentModule="sm-lightbox-overflow-menu";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-icon")),o=babelHelpers.interopRequireDefault(t("sm-component-menu")),u=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),n=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),d=babelHelpers.interopRequireDefault(t("sm-lightbox-favorite-menu-items")),r=babelHelpers.interopRequireDefault(t("sm-favorite-container-hoc")),i=babelHelpers.interopRequireDefault(t("sm-os-based-share-icon")),m=t("sm-lightbox-constants");const s=(0,r.default)(d.default),f=t=>{let{albumImageUri:l,isVideo:d,onCommentsModeRequest:r,onImageInfoModeRequest:f,onShareEmbedModeRequest:c,onSlideshowModeRequest:b,onToggleOverflowMenu:h,onOverflowMenuSharePhotoClick:p,showFavoriteButtons:E}=t,M="".concat(d?"Video":"Photo"," Details");return e.default.createElement(o.default,{menuId:m.LIGHTBOX_OVERFLOW_MENU_ID,"aria-label":"Lightbox Actions",noChrome:!0,alwaysVisible:!0,dataAttrs:{"data-testid":"lightbox_overflow_menu"}},e.default.createElement(u.default,{onClick:h,customSubmenuIndicator:e.default.createElement(a.default,{name:"MoreHoriz",size:a.default.SIZE_LARGE})},e.default.createElement(o.default,{menuId:m.LIGHTBOX_OVERFLOW_POP_UP_MENU_ID,alignments:["bl-tl"]},!!b&&e.default.createElement(u.default,{onClick:b,dataAttrs:{"data-testid":"lightbox_slideshow_menuitem"}},e.default.createElement(a.default,{name:"Play",size:a.default.SIZE_SMALL}),e.default.createElement(n.default,null,"Play Slideshow")),!!f&&e.default.createElement(u.default,{onClick:f,dataAttrs:{"data-testid":"lightbox_details_menuitem"}},e.default.createElement(a.default,{name:"InfoEncircled",size:a.default.SIZE_SMALL}),e.default.createElement(n.default,null,M)),!!E&&e.default.createElement(s,{albumImageUri:l}),!!p&&e.default.createElement(u.default,{onClick:p,dataAttrs:{"data-testid":"lightbox_share_menuitem"}},e.default.createElement(i.default,{size:i.default.SIZE_SMALL}),e.default.createElement(n.default,null,"Share Photo Link")),!!c&&e.default.createElement(u.default,{onClick:c,dataAttrs:{"data-testid":"lightbox_embed_menuitem"}},e.default.createElement(a.default,{name:"Embed",size:a.default.SIZE_SMALL}),e.default.createElement(n.default,null,"Embed Photo")),!!r&&e.default.createElement(u.default,{onClick:r,dataAttrs:{"data-testid":"lightbox_comments_menuitem"}},e.default.createElement(a.default,{name:"Comment",size:a.default.SIZE_SMALL}),e.default.createElement(n.default,null,"Comments")))))};f.displayName="Lightbox.Navigation.OverflowMenu",f.propTypes={albumImageUri:l.default.string.isRequired,isVideo:l.default.bool,onCommentsModeRequest:l.default.func,onImageInfoModeRequest:l.default.func,onShareEmbedModeRequest:l.default.func,onSlideshowModeRequest:l.default.func,onToggleOverflowMenu:l.default.func.isRequired,onOverflowMenuSharePhotoClick:l.default.func,showFavoriteButtons:l.default.bool};var c=f;exports.default=c}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon","sm-component-menu","sm-component-menu-item","sm-component-menu-label","sm-lightbox-favorite-menu-items","sm-favorite-container-hoc","sm-os-based-share-icon","sm-lightbox-constants"]});
YUI.add("sm-lightbox-pagination-helpers",(function(e){SM.currentModule="sm-lightbox-pagination-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPageRequestSettings=void 0;var e=t("sm-lightbox-constants");exports.getPageRequestSettings=(t,n,i,r=e.REQUEST_MAX_PAGE_SIZE)=>{let s=t.length,l=Math.min(e.REQUEST_MAX_PAGE_SIZE,r,s),a=Math.min(Math.ceil(r/2),l,e.EARLY_PAGE_REQUEST_THRESHOLD),o=Math.max(0,n-a),u=n+a,M=t.slice(o,n).reverse().findIndex(i),d=t.slice(n,u).findIndex(i),c=M>-1,h=d>-1,S=0;if(c&&h){let e=Math.floor(l/2),r=s-n,a=Math.max(0,l-e-r);S=Math.max(0,n-e-a),S+=t.slice(S,n).findIndex(i)}else if(c)S=Math.max(0,n-l-M),S+=t.slice(S,S+l).findIndex(i);else{if(!h)return{count:0};S=n+d}let g=t.slice(S,S+l).reverse();return{start:S+1,count:g.length-g.findIndex(i)}}}(),SM.currentModule=null}),"",{requires:["sm-lightbox-constants"]});
YUI.add("sm-lightbox-photo-buttons-container",(function(t){SM.currentModule="sm-lightbox-photo-buttons-container";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.mapStateToProps=void 0;var t=e("react-redux"),o=e("sm-lightbox-selectors"),r=e("sm-lightbox-constants"),s=babelHelpers.interopRequireDefault(e("sm-lightbox-photo-buttons"));const u=(t,e)=>({...e,allowAutoHide:(0,o.getLightboxMode)(t)!==r.LIGHTBOX_MODE_SLIDESHOW});exports.mapStateToProps=u;var l=(0,t.connect)(u)(s.default);exports.default=l}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-selectors","sm-lightbox-constants","sm-lightbox-photo-buttons"]});
YUI.add("sm-lightbox-photo-buttons",(function(e){SM.currentModule="sm-lightbox-photo-buttons";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("classnames")),i=babelHelpers.interopRequireDefault(t("sm-lightbox-buy-button")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-photo-info-button")),a=t("sm-lightbox-constants");const s=t=>{let{allowAutoHide:o,buyButtonSkin:s,buyButtonStyle:n,caption:r,filename:d,isVideo:b,onBuyModeRequest:m,onImageInfoModeRequest:f,title:p,width:h}=t,c=!(!m||n===a.BUY_BUTTON_STYLE_ICON),g=!!(f&&h>140);h<600&&(n=a.BUY_BUTTON_STYLE_ICON_BUTTON);let x=h<600,y=Boolean(!x&&p&&r),S=(0,l.default)({"sm-lightbox-v2-photo-buttons":!0,"sm-lightbox-v2-photo-buttons-scrim":f&&!r,"sm-lightbox-v2-photo-buttons-scrim-dark":f&&!!r,"sm-lightbox-v2-hideable":o,"sm-flex":!0,"sm-flex-items-center":!y,"sm-flex-items-end":y});return e.default.createElement("div",{className:S},g&&e.default.createElement(u.default,{className:"sm-lightbox-v2-hide-landscape sm-flex-justify-start","data-testid":"lightbox_image_title",imageCaption:r,imageFilename:d,imageTitle:p,imageWidth:h,isSmall:x,onClick:f}),c&&e.default.createElement(i.default,{className:"sm-lightbox-v2-hide-portrait","data-testid":"lightbox_imagebuy_button",isVideo:b,onClick:m,skin:s,style:n}))};s.displayName="Lightbox.Content.PhotoButtons",s.propTypes={allowAutoHide:o.default.bool,buyButtonSkin:o.default.oneOf(a.BUY_BUTTON_SKINS),buyButtonStyle:o.default.oneOf(a.BUY_BUTTON_STYLES),onBuyModeRequest:o.default.func,onImageInfoModeRequest:o.default.func,title:o.default.string,filename:o.default.string,width:o.default.number.isRequired,isVideo:o.default.bool},s.defaultProps={allowAutoHide:!0,isVideo:!1};var n=s;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-lightbox-buy-button","sm-lightbox-photo-info-button","sm-lightbox-constants"]});
YUI.add("sm-lightbox-photo-info-button",(function(e){SM.currentModule="sm-lightbox-photo-info-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),s=babelHelpers.interopRequireDefault(t("sm-component-button"));function i(t){let{className:l,imageCaption:i,imageFilename:o,imageTitle:n,isSmall:u,onClick:r}=t,m=Boolean(n),d=Boolean(i),p="";if(m||d){let e=u?"h4":"h2";p=a.default.createElement("div",{className:"sm-button-label"},m&&a.default.createElement(e,{className:"sm-text-ellipsis"},n),d&&a.default.createElement("p",{className:"sm-text-ellipsis"},i))}else o&&(p=a.default.createElement("span",{className:"sm-button-label sm-text-ellipsis"},o));let f=(0,e.default)(["sm-lightbox-v2-photo-title",{"sm-lightbox-v2-photo-title-and-caption":m&&d},l]);return a.default.createElement(s.default,{className:f,"data-disable-auto-hide":!0,"data-testid":t["data-testid"],noChrome:!0,skin:s.default.SKIN_NONE,size:u?s.default.SIZE_SMALL:s.default.SIZE_MEDIUM,onClick:r},p)}i.displayName="Lightbox.Common.PhotoInfoButton",i.propTypes={className:l.default.string,"data-testid":l.default.string,imageCaption:l.default.string,imageFilename:l.default.string,imageTitle:l.default.string,onClick:l.default.func,isSmall:l.default.bool},i.defaultProps={isSmall:!1};var o=i;exports.default=o}(),SM.currentModule=null}),"",{requires:["classnames","prop-types","react","sm-component-button"]});
YUI.add("sm-lightbox-photo-wrapper-container",(function(e){SM.currentModule="sm-lightbox-photo-wrapper-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.mapStateToProps=void 0;var e=t("react-redux"),o=babelHelpers.interopRequireDefault(t("sm-lightbox-photo-wrapper")),a=t("sm-lightbox-actions"),s=t("sm-image-metadata-selectors"),i=t("sm-page-selectors"),n=t("sm-lightbox-constants"),l=t("sm-lightbox-selectors"),r=t("sm-analytics-constants"),u=t("sm-page-constants");const m=new Set([n.LIGHTBOX_MODE_BUY,n.LIGHTBOX_MODE_IMAGE_INFO]),c=(e,t)=>{let{allowZoom:o,containerHeight:a,containerWidth:c,imageUri:g,onModeChangeRequest:d,type:h,buyButtonSkin:p,buyButtonStyle:_,showBuyButton:M,showCaption:O,showFilename:S,showImageInfo:I,showTitle:E}=t,{title:T,caption:b,filenameHTML:y,url:B,width:x,height:w,maxZoomScale:D,zoomUrl:L}=(0,l.getImageData)(e,g,c,a),f=(0,l.getLightboxMode)(e),G=(0,s.isEditing)(e),H=f===n.LIGHTBOX_MODE_DEFAULT,P=(0,l.isProtected)(e,g),R=null;if(P){let t=(0,i.getOwnerSiteSettings)(e);R=(null==t?void 0:t.rightClickMessage)||u.RIGHT_CLICK_MESSAGE_DEFAULT}let U={_type:h,allowZoom:!!o&&H,alt:T||b||y||"",filename:S?y:null,height:w,isProtected:P,rightClickMessage:R,maxZoomScale:D,title:E?T:void 0,caption:O?b:void 0,url:B,width:x,zoomUrl:L};if(d){let e,t=Boolean(T||b);e=f===n.LIGHTBOX_MODE_SLIDESHOW?I&&t:Boolean(I&&!m.has(f)&&(t||S)),e&&(U.onImageInfoModeRequest=()=>d(n.LIGHTBOX_MODE_IMAGE_INFO,{trigger:r.TRIGGER_PHOTO})),M&&(U.onBuyModeRequest=()=>d(n.LIGHTBOX_MODE_BUY),U.buyButtonSkin=p,U.buyButtonStyle=_),H||G||(U.onPhotoClick=()=>d(n.LIGHTBOX_MODE_DEFAULT))}return U};exports.mapStateToProps=c;var g=(0,e.connect)(c,(e,{imageUri:t})=>({_onPlayVideoRequest:()=>{e((0,a.renderVideoPlayer)(t))}}),(e,t)=>{let{_type:o,...a}=e,{_onPlayVideoRequest:s,...i}=t;return{...a,...i,...o===n.CONTENT_TYPE_VIDEO_POSTER&&{onPlayVideoRequest:s}}})(o.default);exports.default=g}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-photo-wrapper","sm-lightbox-selectors","sm-lightbox-actions","sm-image-metadata-selectors","sm-page-selectors","sm-lightbox-constants","sm-analytics-constants","sm-page-constants"]});
YUI.add("sm-lightbox-photo-wrapper",(function(e){SM.currentModule="sm-lightbox-photo-wrapper";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),a=babelHelpers.interopRequireDefault(t("sm-icon")),n=babelHelpers.interopRequireDefault(t("sm-zoomable")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-photo")),i=babelHelpers.interopRequireDefault(t("sm-lightbox-photo-buttons-container")),r=t("sm-lightbox-constants");const s=t=>{let{alt:o,caption:r,filename:s,title:d,url:m,isProtected:c,rightClickMessage:f,width:p=0,height:b=0,allowZoom:h,maxZoomScale:g,zoomUrl:S,onBuyModeRequest:y,onImageInfoModeRequest:M,onPhotoClick:x,onPlayVideoRequest:q,buyButtonSkin:R,buyButtonStyle:B}=t,[P,v]=(0,e.useState)({isPinching:!1,zoomScale:1}),k=!!h&&g>1,C=m,z=!!q&&1===P.zoomScale,E=!(!y&&!M)&&1===P.zoomScale;return S&&P.zoomScale>1&&!P.isPinching&&(C=S),C&&p&&b?e.default.createElement("div",{className:"sm-position-relative"},e.default.createElement(n.default,{maxZoomScale:k?g:1,onZoomChange:v},e.default.createElement(u.default,{alt:o,height:b,isProtected:c,onClick:x,rightClickMessage:f,url:C,width:p})),z&&e.default.createElement(l.default,{className:"sm-lightbox-v2-video-poster sm-flex sm-flex-items-center sm-flex-justify-center",onClick:q,"aria-label":"Play Video",noChrome:!0},e.default.createElement(a.default,{name:"PlayEncircled",size:a.default.SIZE_SMALL,className:"sm-lightbox-v2-video-play-icon"})),E&&e.default.createElement(i.default,{buyButtonSkin:R,buyButtonStyle:B,caption:r,filename:s,isVideo:!!q,onBuyModeRequest:y,onImageInfoModeRequest:M,title:d,width:p})):null};s.displayName="Lightbox.Content.PhotoWrapper",s.propTypes={alt:o.default.string,filename:o.default.string,title:o.default.string,url:o.default.string,isProtected:o.default.bool,rightClickMessage:o.default.string,height:o.default.number,width:o.default.number,allowZoom:o.default.bool,maxZoomScale:o.default.number,zoomUrl:o.default.string,onBuyModeRequest:o.default.func,onImageInfoModeRequest:o.default.func,onPhotoClick:o.default.func,onPlayVideoRequest:o.default.func,buyButtonSkin:o.default.oneOf(r.BUY_BUTTON_SKINS),buyButtonStyle:o.default.oneOf(r.BUY_BUTTON_STYLES)};var d=s;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-zoomable","sm-lightbox-photo","sm-lightbox-photo-buttons-container","sm-lightbox-constants"]});
YUI.add("sm-lightbox-photo",(function(e){SM.currentModule="sm-lightbox-photo";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),i=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("classnames")),o=babelHelpers.interopRequireDefault(t("sm-dom")),s=babelHelpers.interopRequireDefault(t("sm-teleport")),l=babelHelpers.interopRequireDefault(t("sm-smuglog")),n=babelHelpers.interopRequireDefault(t("sm-tooltip")),a=t("sm-modal-constants");const d=(0,s.default)(n.default,()=>o.default.doc.querySelector(a.SKINNED_MODAL_SELECTOR));class c extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_imgRef",e.default.createRef()),babelHelpers.defineProperty(this,"state",{rightClickProtectionXY:null}),babelHelpers.defineProperty(this,"_checkDimensionsAfterLoad",e=>{if(this._imgRef.current&&this._imgRef.current.offsetWidth!==this.props.width){let t=this.props.width-this._imgRef.current.offsetWidth;this._imgRef.current.offsetWidth&&Math.abs(t)>1&&l.default.add("sm-lightbox-component-photo",{message:"Incorrect image dimensions after load",calledFrom:void 0===e?"componentDidUpdate":"image onLoad",imageWidth:this._imgRef.current.offsetWidth,desiredWidth:this.props.width,backgroundImage:!!this.props.isProtected},l.default.LEVEL_WARNING);let i=this._imgRef.current.style.width;this._imgRef.current.style.width="",this._imgRef.current.offsetWidth,this._imgRef.current.style.width=i,this._imgRef.current.offsetWidth}}),babelHelpers.defineProperty(this,"_onContextMenu",e=>{this.props.isProtected&&(e.preventDefault(),this.setState({rightClickProtectionXY:[e.pageX,e.pageY]}),o.default.doc.addEventListener("click",this._handleBodyClick))}),babelHelpers.defineProperty(this,"_handleBodyClick",()=>{this.setState({rightClickProtectionXY:null}),this._removeBodyClickListener()}),babelHelpers.defineProperty(this,"_removeBodyClickListener",()=>{o.default.doc.removeEventListener("click",this._handleBodyClick)})}componentDidUpdate(){this._checkDimensionsAfterLoad()}componentWillUnmount(){this._removeBodyClickListener()}render(){let t,{alt:i,url:o,isProtected:s,rightClickMessage:l,width:n,height:a,onClick:c}=this.props,u={width:n,height:a};if(s){u.backgroundImage="url(".concat(o,")"),u.backgroundSize="".concat(n,"px ").concat(a,"px");let{rightClickProtectionXY:i}=this.state;if(i){let[r,o]=i;t=e.default.createElement(d,{style:{left:r,top:o}},l)}}let h=(0,r.default)({"sm-lightbox-v2-photo":!0,"sm-lightbox-v2-photo-clickable":!!c});return e.default.createElement(e.default.Fragment,null,e.default.createElement("img",{className:h,alt:i,"data-protected":s||null,src:s?"/img/spacer.gif":o,style:u,ref:this._imgRef,onContextMenu:this._onContextMenu,onLoad:this._checkDimensionsAfterLoad,onClick:c,onBlur:this._onBlur}),t)}}c.displayName="Lightbox.Content.Photo",c.propTypes={alt:i.default.string,url:i.default.string.isRequired,isProtected:i.default.bool,rightClickMessage:i.default.string,width:i.default.number.isRequired,height:i.default.number.isRequired,onClick:i.default.func},c.defaultProps={alt:""};var u=c;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-dom","sm-teleport","sm-smuglog","sm-tooltip","sm-modal-constants"]});
YUI.add("sm-lightbox-placeholder",(function(e){SM.currentModule="sm-lightbox-placeholder";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),t=babelHelpers.interopRequireDefault(l("prop-types")),r=babelHelpers.interopRequireDefault(l("sm-icon"));const a=({icon:l,label:t})=>e.default.createElement("div",{className:"sm-text-center"},e.default.createElement(r.default,{className:"sm-lightbox-v2-placeholder-icon",name:l,size:r.default.SIZE_LARGE}),t&&e.default.createElement("p",{className:"sm-label-large"},t));a.displayName="Lightbox.Content.Placeholder",a.propTypes={icon:t.default.string.isRequired,label:t.default.string},a.defaultProps={label:""};var u=a;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon"]});
YUI.add("sm-lightbox-primary-controls-container",(function(e){SM.currentModule="sm-lightbox-primary-controls-container";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(o("sm-ua")),t=o("react-redux"),n=o("sm-lightbox-selectors"),s=o("sm-component-menu-actions"),r=o("sm-lightbox-constants"),u=babelHelpers.interopRequireDefault(o("sm-lightbox-primary-controls")),l=o("sm-lightbox-actions");const i=(new e.default).isIOS;var a=(0,t.connect)((e,{albumImageUri:o,showDownloadButton:t,allowToolsMenu:s,isOwner:r})=>{let u=(0,n.isVideo)(e,o);return i&&u&&(t=!1),{isVideo:u,showDownloadButton:t,showToolsMenu:s&&r}},(e,{nativeShareData:o,...t})=>{let{isOwner:n,isOwnerOrAdmin:u,mode:i,onModeChangeRequest:a,showBuyButton:M,showCommentsButton:m,showDownloadButton:d,showImageInfo:O,showShareButton:c,showSlideshowButton:h}=t,_={onToggleOverflowMenu:()=>{e((0,s.toggle)(r.LIGHTBOX_OVERFLOW_POP_UP_MENU_ID))}};if(a){let t=e=>()=>{a(i===e?r.LIGHTBOX_MODE_DEFAULT:e)};_={..._,...n&&{onEditorModeRequest:t(r.LIGHTBOX_MODE_EDITOR)},...M&&{onBuyModeRequest:t(r.LIGHTBOX_MODE_BUY)},...m&&{onCommentsModeRequest:t(r.LIGHTBOX_MODE_COMMENTS)},...O&&{onImageInfoModeRequest:t(r.LIGHTBOX_MODE_IMAGE_INFO)},...c&&(d||u)&&{onShareEmbedModeRequest:t(r.LIGHTBOX_MODE_SHARE_EMBED)},...c&&{onShareModeRequest:t(r.LIGHTBOX_MODE_SHARE)},...h&&{onSlideshowModeRequest:t(r.LIGHTBOX_MODE_SLIDESHOW)},...c&&{onOverflowMenuSharePhotoClick:()=>e((0,l.onOverflowMenuSharePhotoClick)(o,t))}}}return _})(u.default);exports.default=a}(),SM.currentModule=null}),"",{requires:["sm-ua","react-redux","sm-lightbox-selectors","sm-component-menu-actions","sm-lightbox-constants","sm-lightbox-primary-controls","sm-lightbox-actions"]});
YUI.add("sm-lightbox-primary-controls",(function(e){SM.currentModule="sm-lightbox-primary-controls";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),l=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-fullscreen-button-container")),u=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")),d=babelHelpers.interopRequireDefault(t("sm-lightbox-buy-button")),i=babelHelpers.interopRequireDefault(t("sm-lightbox-download-button-container")),r=babelHelpers.interopRequireDefault(t("sm-lightbox-overflow-menu")),m=babelHelpers.interopRequireDefault(t("sm-lightbox-tools-menu-container")),b=babelHelpers.interopRequireDefault(t("sm-os-based-share-icon")),f=t("sm-lightbox-constants");const c=(0,s.default)(a.default),h=t=>{let o,{mode:s,albumImageUri:h,isVideo:g,showDownloadButton:p,showFavoriteButtons:E,showFullScreenButton:M,showToolsMenu:w,onBuyModeRequest:S,onCommentsModeRequest:_,onEditorModeRequest:x,onImageDataChange:R,onImageDeleteRequest:q,onImageInfoModeRequest:I,onOverflowMenuSharePhotoClick:D,onShareModeRequest:B,onShareEmbedModeRequest:O,onSlideshowModeRequest:y,onToggleOverflowMenu:H,downloadsUnlocked:N,onUnlockDownloads:v,buyButtonSkin:T,buyButtonStyle:C,hasDownloadPassword:U}=t,L={noChrome:!0,disabled:!h};p&&(o=l.default.createElement(i.default,babelHelpers.extends({albumImageUri:h,className:"user-ui-lightbox-download-button",downloadsUnlocked:N,hasDownloadPassword:U,onUnlockDownloads:v,downloadEnabled:p},L)));let k=h&&!!(E||_||I||B||y||D),P="".concat(g?"Video":"Photo"," Details");return l.default.createElement(l.default.Fragment,null,l.default.createElement("ul",{className:"sm-lightbox-v2-primary-controls-list sm-lightbox-v2-hide-portrait sm-lightbox-v2-hideable","data-disable-auto-hide":!0},!!e.default.fullscreenEnabled&&!!M&&l.default.createElement("li",{className:"sm-hide-medium-and-down"},l.default.createElement(n.default,babelHelpers.extends({className:"user-ui-lightbox-fullscreen-button","data-testid":"lightbox_fullscreen_button"},L))),!!y&&l.default.createElement("li",null,l.default.createElement(c,babelHelpers.extends({className:"user-ui-lightbox-slideshow-button",tooltipLabel:"Play Slideshow","data-testid":"lightbox_slideshow_button",onClick:y},L),l.default.createElement(u.default,{name:"Play",size:u.default.SIZE_SMALL}))),!!I&&l.default.createElement("li",null,l.default.createElement(c,babelHelpers.extends({className:"user-ui-lightbox-details-button",tooltipLabel:P,"data-testid":"lightbox_details_button","data-selected":s===f.LIGHTBOX_MODE_IMAGE_INFO||null,onClick:I},L),l.default.createElement(u.default,{name:"InfoEncircled",size:u.default.SIZE_LARGE}))),!!B&&l.default.createElement("li",null,l.default.createElement(c,babelHelpers.extends({tooltipLabel:"Share",className:"user-ui-lightbox-share-button","data-testid":"lightbox_share_button","data-selected":s===f.LIGHTBOX_MODE_SHARE||null,onClick:B,shape:a.default.SHAPE_SQUARE},L),l.default.createElement(b.default,{size:b.default.SIZE_SMALL}))),!!_&&l.default.createElement("li",null,l.default.createElement(c,babelHelpers.extends({tooltipLabel:"Comments",className:"user-ui-lightbox-comments-button","data-testid":"lightbox_comments_button","data-selected":s===f.LIGHTBOX_MODE_COMMENTS||null,onClick:_},L),l.default.createElement(u.default,{name:"Comment",size:u.default.SIZE_LARGE}))),!!o&&l.default.createElement("li",null,o),!!w&&l.default.createElement("li",{className:"sm-hide-medium-and-down"},l.default.createElement(m.default,{albumImageUri:h,className:"user-ui-lightbox-tools-button",onEditorModeRequest:x,onImageDataChange:R,onImageDeleteRequest:q})),!!S&&C===f.BUY_BUTTON_STYLE_ICON&&l.default.createElement("li",null,l.default.createElement(d.default,{"data-testid":"lightbox_actionsbuy_button",isVideo:g,onClick:S,skin:a.default.SKIN_SECONDARY,style:f.BUY_BUTTON_STYLE_ICON,"data-selected":s===f.LIGHTBOX_MODE_BUY||null}))),l.default.createElement("div",{className:"sm-hide-large-and-up sm-lightbox-v2-hide-landscape sm-lightbox-v2-hideable sm-flex sm-flex-items-center","data-disable-auto-hide":!0},!!k&&l.default.createElement(r.default,{albumImageUri:h,isVideo:g,onCommentsModeRequest:_,onImageInfoModeRequest:I,onOverflowMenuSharePhotoClick:D,onShareEmbedModeRequest:O,onSlideshowModeRequest:y,onToggleOverflowMenu:H,showFavoriteButtons:E}),o),!!S&&l.default.createElement(d.default,{className:"sm-hide-large-and-up sm-lightbox-v2-hide-landscape","data-testid":"lightbox_footerbuy_button",isVideo:g,onClick:S,skin:T,style:C}))};h.displayName="Lightbox.Navigation.PrimaryControls",h.propTypes={albumImageUri:o.default.string,mode:o.default.oneOf(f.LIGHTBOX_MODES).isRequired,isVideo:o.default.bool,showDownloadButton:o.default.bool,showFavoriteButtons:o.default.bool,showFullScreenButton:o.default.bool,showToolsMenu:o.default.bool,onBuyModeRequest:o.default.func,onCommentsModeRequest:o.default.func,onEditorModeRequest:o.default.func,onImageDataChange:o.default.func,onImageDeleteRequest:o.default.func,onImageInfoModeRequest:o.default.func,onShareEmbedModeRequest:o.default.func,onShareModeRequest:o.default.func,onSlideshowModeRequest:o.default.func,onToggleOverflowMenu:o.default.func.isRequired,downloadsUnlocked:o.default.bool,onUnlockDownloads:o.default.func,buyButtonSkin:o.default.oneOf(f.BUY_BUTTON_SKINS),buyButtonStyle:o.default.oneOf(f.BUY_BUTTON_STYLES)},h.defaultProps={isVideo:!1,showDownloadButton:!1,showFavoriteButtons:!1,showFullScreenButton:!0,showToolsMenu:!1};var g=h;exports.default=g}(),SM.currentModule=null}),"",{requires:["sm-dom","react","prop-types","sm-component-button","sm-fullscreen-button-container","sm-icon","sm-tooltip-hoc","sm-lightbox-buy-button","sm-lightbox-download-button-container","sm-lightbox-overflow-menu","sm-lightbox-tools-menu-container","sm-os-based-share-icon","sm-lightbox-constants"]});
YUI.add("sm-lightbox-reducers",(function(e){SM.currentModule="sm-lightbox-reducers";var exports={},i=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=exports.lightbox=void 0;var e=i("sm-lightbox-constants"),r=i("sm-lightbox-action-types"),t=i("sm-fullscreen-action-types"),o=i("sm-image-metadata-action-types");const n={containerWidth:0,containerHeight:0,mode:e.LIGHTBOX_MODE_DEFAULT,initialMode:e.LIGHTBOX_MODE_DEFAULT,hideUI:!1,disableUI:!1,renderVideoPlayerFor:void 0,isDeleteWarningVisible:!1},s=(i=n,s)=>{switch(s.type){case r.RENDER_VIDEO_PLAYER:return{...i,renderVideoPlayerFor:s.videoUri,mode:i.mode===e.LIGHTBOX_MODE_SLIDESHOW?e.LIGHTBOX_MODE_DEFAULT:i.mode};case r.RESET:return{...i,...n};case r.RESET_VIDEO_STATE:return{...i,renderVideoPlayerFor:void 0};case r.SET_CONTAINER_DIMENSIONS:return{...i,containerWidth:s.width,containerHeight:s.height};case r.SET_MODE:return{...i,mode:s.mode,initialMode:s.setInitialMode?s.mode:i.initialMode,renderVideoPlayerFor:s.mode===e.LIGHTBOX_MODE_SLIDESHOW?void 0:i.renderVideoPlayerFor};case t.SYNC_FULLSCREEN:return{...i,mode:i.mode===e.LIGHTBOX_MODE_SLIDESHOW?e.LIGHTBOX_MODE_DEFAULT:i.mode};case r.SET_HIDE_UI:return{...i,hideUI:s.hideUI};case r.SET_DELETE_WARNING:return{...i,disableUI:s.isDeleteWarningVisible,isDeleteWarningVisible:s.isDeleteWarningVisible};case r.SET_DISABLE_UI:return{...i,disableUI:s.disableUI};case o.START_EDITING:return{...i,disableUI:!0};case o.STOP_EDITING:case o.SAVE_SUCCESS:return{...i,disableUI:!1};default:return i}};exports.lightbox=s;exports.UI=(e={},i)=>{let{lightbox:r}=e;return{...e,lightbox:s(r,i)}}}(),SM.currentModule=null}),"",{requires:["sm-lightbox-constants","sm-lightbox-action-types","sm-fullscreen-action-types","sm-image-metadata-action-types"]});
YUI.add("sm-lightbox-selectors",(function(e){SM.currentModule="sm-lightbox-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDisplayableComponentFileDetails=exports.getNativeShareData=exports.getLightboxImageExpansions=exports.getLightboxImageExpansionsMap=exports.canBuyImage=exports.canBuyAlbum=exports.getPreloadImageUrls=exports.getPrefetchImageUrls=exports.getVideoSource=exports.hasExpansionsForMode=exports.getAlbumUrlPath=exports.getAlbumKey=exports.showCommentsUI=exports.allowDownloads=exports.showShareUI=exports.getImageKey=exports.getImageData=exports.getImageZoomData=exports.getImageSizeDataByType=exports.getImageSizesInstance=exports.getContentContainerDimensions=exports.getImageSizeDetails=exports.isProtected=exports.isHidden=exports.isCollected=exports.isVideo=exports.getContentTypeForUri=exports.isUIDisabled=exports.isUIHidden=exports.isDeleteWarningVisible=exports.getLightboxInitialMode=exports.getLightboxMode=void 0;var e=babelHelpers.interopRequireDefault(t("sm-image-sizes")),i=t("sm-api-redux-selectors"),a=t("sm-video-player"),n=t("sm-lightbox-constants"),r=t("sm-circular-array");const l=new Set([n.LIGHTBOX_MODE_SHARE,n.LIGHTBOX_MODE_SHARE_EMBED,n.LIGHTBOX_MODE_SHARE_PHOTO]),o=e=>{let{ui:{lightbox:t={}}={}}=e;return t};exports.getLightboxMode=e=>o(e).mode;exports.getLightboxInitialMode=e=>o(e).initialMode;exports.isDeleteWarningVisible=e=>o(e).isDeleteWarningVisible;exports.isUIHidden=e=>o(e).hideUI;exports.isUIDisabled=e=>o(e).disableUI;exports.getContentTypeForUri=(e,t,a)=>{if(!t)return n.CONTENT_TYPE_BUSY;let r=(0,i.getEntity)(e,t);return r?r.IsArchive?n.CONTENT_TYPE_ARCHIVE:r.Processing?n.CONTENT_TYPE_PROCESSING:r.IsVideo?a&&o(e).renderVideoPlayerFor===t?n.CONTENT_TYPE_VIDEO:n.CONTENT_TYPE_VIDEO_POSTER:n.CONTENT_TYPE_IMAGE:n.CONTENT_TYPE_BUSY};exports.isVideo=(e,t)=>{let{IsVideo:a=!1}=(0,i.getEntity)(e,t)||{};return a};exports.isCollected=(e,t)=>{let{Origin:a}=(0,i.getEntity)(e,t)||{};return"Collected"===a||"Smart"===a};exports.isHidden=(e,t)=>((0,i.getEntity)(e,t)||{}).Hidden;exports.isProtected=(e,t)=>{let{Protected:a}=(0,i.getEntity)(e,t)||{};if(a)return!0;let{Protected:n}=(0,i.getExpansion)(e,t,"Album")||{};return!!n};const s=(e,t)=>{let{Watermarked:a}=(0,i.getEntity)(e,t)||{},n=(0,i.getExpansion)(e,t,"ImageSizeDetails");if(!n)return;if(!a)return n;let{ImageSizeOriginal:r,...l}=n;return l.UsableSizes=n.UsableSizes.filter(e=>"ImageSizeOriginal"!==e),l};exports.getImageSizeDetails=s;const g=e=>{let{containerWidth:t,containerHeight:i}=o(e)||{};return{containerWidth:t,containerHeight:i}};exports.getContentContainerDimensions=g;const u=(t,i)=>{let a=s(t,i);return a?new e.default(a):null};exports.getImageSizesInstance=u;const m=(e,t,i,a,n)=>{let r=u(e,t);if(r)return r.containWithin(i,a,{allowCustomSize:!1,allowPixelRatioOverride:!0,type:n})};exports.getImageSizeDataByType=m;const d=(e,t,i,a)=>{let n=u(e,t);if(!n)return{maxZoomScale:1};let r=n.getLargestSize();return r.DisplayWidth<=i&&r.DisplayHeight<=a?{maxZoomScale:1}:{maxZoomScale:Math.max(r.DisplayWidth/i,r.DisplayHeight/a),zoomUrl:r.Url}};exports.getImageZoomData=d;const E=(t,a,n,r)=>{let{Title:l,Keywords:o,Latitude:s,Longitude:g,FormattedValues:{FileName:{html:u}={},Caption:{text:E}={}}={}}=(0,i.getEntity)(t,a)||{},c=Boolean(Number(s)&&Number(g)),{Url:I,DisplayWidth:y,DisplayHeight:S}=m(t,a,n,r,e.default.TYPE_PHOTO)||{},{maxZoomScale:h,zoomUrl:P}=d(t,a,y,S);return{title:l,caption:E,keywords:o,filenameHTML:u,url:I,width:y,height:S,maxZoomScale:h,zoomUrl:P,hasLocationData:c}};exports.getImageData=E;exports.getImageKey=(e,t)=>{let{ImageKey:a}=(0,i.getEntity)(e,t)||{};return a};exports.showShareUI=(e,t)=>{let{CanShare:a,Hidden:n}=(0,i.getEntity)(e,t)||{};return!n&&a};exports.allowDownloads=(e,t)=>{var a,n,r;let l=null===(a=(0,i.getEntity)(e,t))||void 0===a||null===(n=a.Uris)||void 0===n?void 0:n.Album;return null===(r=(0,i.getEntity)(e,l))||void 0===r?void 0:r.AllowDownloads};exports.showCommentsUI=(e,t)=>{let{Comments:a}=(0,i.getEntity)(e,t)||{};return a};exports.getAlbumKey=(e,t)=>{let{AlbumKey:a}=(0,i.getExpansion)(e,t,"Album")||{};return a};exports.getAlbumUrlPath=(e,t)=>{let{UrlPath:a}=(0,i.getExpansion)(e,t,"Album")||{};return a};exports.hasExpansionsForMode=(e,t,a)=>{let r=Object.keys(n.MODE_IMAGE_EXPANSIONS[t]),o=new Set,{ComponentFileTypes:s,EXIF:g}=(0,i.getExpansion)(e,a,"Album")||{};if(g||o.add("AlbumImageMetadata"),s||o.add("Components"),l.has(t)){let{IsVideo:t}=(0,i.getEntity)(e,a)||{};t||o.add("EmbedVideo"),o.add("Album.User")}return r=r.filter(e=>!o.has(e)),(0,i.hasExpansions)(e,a,r)};exports.getVideoSource=(t,i,n,r)=>{let l=m(t,i,n,r,e.default.TYPE_VIDEO);if(!l)return;let o=s(t,i);return a.HLS_SUPPORTED&&o.VideoSMIL?(l.Url=o.VideoSMIL.Url,l.Ext=a.MIME_TYPES.HLS):"smil"!==l.Ext&&(l.Ext="mp4"===l.Ext?a.MIME_TYPES.MP4:null),{url:l.Url,type:l.Ext}};exports.getPrefetchImageUrls=(t,i)=>{let{containerHeight:a,containerWidth:n}=g(t);return n?i.map(i=>(m(t,i,n,a,e.default.TYPE_PHOTO)||{}).Url).filter(Boolean):[]};exports.getPreloadImageUrls=(e,t,i)=>{let{containerWidth:a,containerHeight:l}=g(e);return a?(0,r.getRange)(t,i,n.PRELOAD_COUNT_BEFORE,n.PRELOAD_COUNT_AFTER).map(t=>E(e,t,a,l).url).filter(Boolean):[]};exports.canBuyAlbum=(e,t)=>{let{CanBuy:a=!1}=(0,i.getEntity)(e,t)||{};return a};exports.canBuyImage=(e,t,{hasGalleryContext:a=!1}={})=>{let n=!!((0,i.getEntity)(e,t)||{}).CanBuy;if(a){let a=(0,i.getExpansion)(e,t,"Album");return n||!a||a.CanBuy}return n};const c=e=>({...n.MODE_IMAGE_EXPANSIONS,[n.LIGHTBOX_MODE_BUY]:{...n.MODE_IMAGE_EXPANSIONS[n.LIGHTBOX_MODE_BUY],"ImagePricelistExclusions.CatalogPrintVendor.CatalogPrintVendorSkuPrices":{data:{Currency:e}},"ImagePricelistExclusions.PricelistKey.PricelistSkuPrices":{data:{Currency:e}},"AlbumImagePricelistExclusions.CatalogPrintVendor.CatalogPrintVendorSkuPrices":{data:{Currency:e}},"AlbumImagePricelistExclusions.PricelistKey.PricelistSkuPrices":{data:{Currency:e}}}});exports.getLightboxImageExpansionsMap=c;exports.getLightboxImageExpansions=(e,t)=>{let i=c(t);return i&&i[e]||n.DEFAULT_IMAGE_EXPANSIONS};exports.getNativeShareData=(e={},t)=>{let a=(0,i.getEntity)(e,t);return{webUri:null==a?void 0:a.WebUri}};exports.getDisplayableComponentFileDetails=(e={},t)=>{let a=(0,i.getExpansion)(e,t,"Components")||[];if(Array.isArray(a)&&!(a.length<=1))return a.filter(({Extension:e})=>"ARC"!==e).length>1?a:void 0}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-circular-array","sm-image-sizes","sm-lightbox-constants","sm-video-player"]});
YUI.add("sm-lightbox-sidebar-comments-container",(function(e){SM.currentModule="sm-lightbox-sidebar-comments-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=t("sm-api-redux-selectors"),s=babelHelpers.interopRequireDefault(t("sm-lightbox-sidebar-comments")),i=t("sm-lightbox-selectors");var o=(0,e.connect)((e,t)=>{let{albumImageUri:s}=t,o=(0,r.getExpansionUri)(e,s,"Image"),a=(0,r.getEntity)(e,o);return{commentsEnabled:(0,i.showCommentsUI)(e,s),isVideo:(0,i.isVideo)(e,s),imageUri:o,imageData:a}})(s.default);exports.default=o}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-selectors","sm-lightbox-sidebar-comments","sm-lightbox-selectors"]});
YUI.add("sm-lightbox-sidebar-comments",(function(e){SM.currentModule="sm-lightbox-sidebar-comments";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),l=babelHelpers.interopRequireDefault(r("sm-resource-image")),a=babelHelpers.interopRequireDefault(r("sm-resource-core")),o=babelHelpers.interopRequireDefault(r("sm-comments")),s=babelHelpers.interopRequireDefault(r("sm-lightbox-sidebar-placeholder"));class i extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_imageResource",null)}render(){let{commentsEnabled:r,imageData:t,imageUri:i,isVideo:u}=this.props;return r?(this._imageResource&&this._imageResource.getCanonicalUri()===i||(this._imageResource=a.default._makeResource(l.default,t,{endpointType:"Image"})),e.default.createElement(e.default.Fragment,null,e.default.createElement("h2",null,"Comments"),e.default.createElement(o.default,{resource:this._imageResource}))):e.default.createElement(s.default,{label:"Commenting is disabled for this ".concat(u?"video":"photo","."),iconName:"Comment"})}}exports.default=i,babelHelpers.defineProperty(i,"displayName","Lightbox.Sidebar.Content.Comments"),babelHelpers.defineProperty(i,"propTypes",{commentsEnabled:t.default.bool,imageData:t.default.object.isRequired,imageUri:t.default.string.isRequired,isVideo:t.default.bool}),babelHelpers.defineProperty(i,"defaultProps",{commentsEnabled:!0})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-resource-image","sm-resource-core","sm-comments","sm-lightbox-sidebar-placeholder"]});
YUI.add("sm-lightbox-sidebar-content",(function(e){SM.currentModule="sm-lightbox-sidebar-content";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("react")),t=babelHelpers.interopRequireDefault(a("prop-types")),s=babelHelpers.interopRequireDefault(a("sm-component-busy")),l=babelHelpers.interopRequireDefault(a("classnames")),o=babelHelpers.interopRequireDefault(a("sm-lightbox-sidebar-comments-container")),i=babelHelpers.interopRequireDefault(a("sm-lightbox-sidebar-image-info")),r=babelHelpers.interopRequireDefault(a("sm-lightbox-sidebar-shortcuts")),n=babelHelpers.interopRequireDefault(a("sm-lightbox-sidebar-share-container")),u=a("sm-lightbox-constants");const b=a=>{let t,b,{albumImageUri:d,isLoading:m,mode:h,onImageDataChange:c,showCaption:f,showEXIF:_,showFilename:g,showKeywords:p,showMap:O,showTitle:E}=a,M=(0,l.default)({"sm-lightbox-v2-sidebar-content":!0,"sm-lightbox-v2-sidebar-content-loading":m,"sm-flex":m,"sm-flex-justify-center":m});if(m||!d)t=e.default.createElement(s.default,null);else switch(h){case u.LIGHTBOX_MODE_IMAGE_INFO:b="lightbox_imagedetails_sidebar",t=e.default.createElement(i.default,{albumImageUri:d,onImageDataChange:c,showCaption:f,showEXIF:_,showFilename:g,showKeywords:p,showMap:O,showTitle:E});break;case u.LIGHTBOX_MODE_COMMENTS:b="lightbox_comments_sidebar",t=e.default.createElement(o.default,{albumImageUri:d});break;case u.LIGHTBOX_MODE_SHARE:case u.LIGHTBOX_MODE_SHARE_EMBED:case u.LIGHTBOX_MODE_SHARE_PHOTO:b="lightbox_share_sidebar",t=e.default.createElement(n.default,{albumImageUri:d,mode:h});break;case u.LIGHTBOX_MODE_SHORTCUTS:b="lightbox_shortcuts_sidebar",t=e.default.createElement(r.default,null)}return e.default.createElement("div",{className:M,"data-testid":b||null},t)};b.displayName="Lightbox.Sidebar.Content",b.propTypes={albumImageUri:t.default.string,onImageDataChange:t.default.func,isLoading:t.default.bool,mode:t.default.oneOf([u.LIGHTBOX_MODE_COMMENTS,u.LIGHTBOX_MODE_IMAGE_INFO,u.LIGHTBOX_MODE_SHARE,u.LIGHTBOX_MODE_SHARE_EMBED,u.LIGHTBOX_MODE_SHARE_PHOTO,u.LIGHTBOX_MODE_SHORTCUTS]).isRequired,showCaption:t.default.bool,showEXIF:t.default.bool,showFilename:t.default.bool,showKeywords:t.default.bool,showMap:t.default.bool,showTitle:t.default.bool},b.defaultProps={isLoading:!1};var d=b;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-busy","classnames","sm-lightbox-sidebar-comments-container","sm-lightbox-sidebar-image-info","sm-lightbox-sidebar-share-container","sm-lightbox-sidebar-shortcuts","sm-lightbox-constants"]});
YUI.add("sm-lightbox-sidebar-image-info",(function(e){SM.currentModule="sm-lightbox-sidebar-image-info";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),t=babelHelpers.interopRequireDefault(a("prop-types")),l=babelHelpers.interopRequireDefault(a("react")),o=a("sm-map-selectors"),r=a("sm-page-selectors"),i=a("sm-lightbox-selectors"),s=babelHelpers.interopRequireDefault(a("sm-image-exif-container")),n=babelHelpers.interopRequireDefault(a("sm-image-metadata-container")),m=babelHelpers.interopRequireDefault(a("sm-pretty-size")),u=babelHelpers.interopRequireDefault(a("sm-lightbox-sidebar-section-label")),d=babelHelpers.interopRequireDefault(a("sm-lightbox-sidebar-placeholder")),c=babelHelpers.interopRequireDefault(a("sm-map"));const f=a=>{let t,{albumImageUri:m,onImageDataChange:f,showCaption:p,showEXIF:g,showFilename:h,showKeywords:w,showMap:E,showTitle:x}=a,y=p||w||x||h,I=(0,e.useSelector)(e=>{if((0,r.isLoggedInUserPageOwnerOrAdmin)(e))return(0,i.getDisplayableComponentFileDetails)(e,m)}),M=(0,e.useSelector)(e=>E?(0,o.getImageMapMarkerData)(e,m):null),F=(0,e.useSelector)(e=>(0,i.isVideo)(e,m));return g||M||(t=l.default.createElement(d.default,{iconName:"InfoEncircled",label:"Details are not available for this ".concat(F?"video":"photo",".")})),l.default.createElement(l.default.Fragment,null,!y&&t,!!y&&l.default.createElement(n.default,{albumImageUri:m,emptyPlaceholder:t,onMetadataChange:f,showCaption:p,showFilename:h,showKeywords:w,showTitle:x}),Boolean(I)&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.default,{label:"Associated Files",icon:"Page"}),l.default.createElement(b,{components:I})),!!g&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.default,{label:"Camera Info",icon:"InfoEncircled"}),l.default.createElement(s.default,{albumImageUri:m})),!!M&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.default,{label:"Location",icon:"Location"}),l.default.createElement(c.default,{images:[M],key:m,minZoom:1,initialZoom:13})))};f.displayName="Lightbox.Sidebar.Content.ImageInfo",f.propTypes={albumImageUri:t.default.string.isRequired,onImageDataChange:t.default.func,showCaption:t.default.bool,showEXIF:t.default.bool,showFilename:t.default.bool,showKeywords:t.default.bool,showMap:t.default.bool,showTitle:t.default.bool},f.defaultProps={showCaption:!0,showEXIF:!0,showFilename:!1,showKeywords:!0,showTitle:!0};var p=f;function b({components:e}){return l.default.createElement("div",{className:"sm-imageinfo-container sm-text-mini","data-testid":"imagemetadata_component_list"},l.default.createElement("table",{className:"sm-imageinfo-components"},l.default.createElement("tbody",null,e.map(({ComponentKey:e,FileName:a,FileSize:t})=>l.default.createElement("tr",{key:e},l.default.createElement("th",{scope:"row",className:"sm-imageinfo-label",title:a},a),l.default.createElement("td",{className:"sm-imageinfo-value sm-emphasized sm-text-break-word"},(0,m.default)(t)))))))}exports.default=p}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","react","sm-image-exif-container","sm-image-metadata-container","sm-lightbox-selectors","sm-lightbox-sidebar-image-info","sm-lightbox-sidebar-placeholder","sm-lightbox-sidebar-section-label","sm-map-selectors","sm-map","sm-page-selectors","sm-pretty-size"]});
YUI.add("sm-lightbox-sidebar-placeholder",(function(e){SM.currentModule="sm-lightbox-sidebar-placeholder";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("react")),l=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("sm-icon"));const a=({label:r,iconName:l})=>e.default.createElement("div",{className:"sm-lightbox-v2-sidebar-placeholder sm-text-center"},e.default.createElement(t.default,{size:t.default.SIZE_LARGE,name:l}),e.default.createElement("h4",{className:"sm-muted"},r));a.displayName="Lightbox.Sidebar.Placeholder",a.propTypes={label:l.default.string.isRequired,iconName:l.default.string.isRequired};var i=a;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon"]});
YUI.add("sm-lightbox-sidebar-section-label",(function(e){SM.currentModule="sm-lightbox-sidebar-section-label";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(l("react")),r=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("sm-icon"));const a=({label:l,icon:r})=>e.default.createElement("h5",{className:"sm-flex sm-flex-items-center"},e.default.createElement(t.default,{className:"sm-label-icon",name:r,size:t.default.SIZE_SMALL}),l);a.displayName="SidebarSectionLabel",a.propTypes={label:r.default.string.isRequired,icon:r.default.string.isRequired};var i=a;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-icon"]});
YUI.add("sm-lightbox-sidebar-share-container",(function(e){SM.currentModule="sm-lightbox-sidebar-share-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),s=r("sm-share-selectors"),a=babelHelpers.interopRequireDefault(r("sm-lightbox-sidebar-share")),t=r("sm-analytics-constants"),l=r("sm-lightbox-selectors"),o=r("sm-page-selectors");var n=(0,e.connect)((e,{albumImageUri:r})=>{let a=(0,l.showShareUI)(e,r);return{sharingEnabled:a,allowDownload:(0,l.allowDownloads)(e,r),panelLocation:t.LOCATION_LIGHTBOX,isOwnerOrAdmin:(0,o.isLoggedInUserPageOwnerOrAdmin)(e),...a&&(0,s.getShareData)(e,r)}})(a.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-share-selectors","sm-lightbox-sidebar-share","sm-analytics-constants","sm-lightbox-selectors","sm-page-selectors"]});
YUI.add("sm-lightbox-sidebar-share",(function(e){SM.currentModule="sm-lightbox-sidebar-share";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-share-tabs")),r=babelHelpers.interopRequireDefault(t("sm-lightbox-sidebar-placeholder")),o=t("sm-lightbox-constants");const s=({sharingEnabled:t,...a})=>{if(!t)return e.default.createElement(r.default,{iconName:"Action",label:"Sharing is disabled for this ".concat(a.isVideo?"video":"photo",".")});let s,i="Share ",d=a.mode;return d===o.LIGHTBOX_MODE_SHARE_EMBED?(i="Embed ",s=l.default.RENDERED_PANEL.EMBED):d===o.LIGHTBOX_MODE_SHARE_PHOTO&&(s=l.default.RENDERED_PANEL.LINK),i+=a.isVideo?"Video":"Photo",e.default.createElement(e.default.Fragment,null,e.default.createElement("h2",null,i),e.default.createElement(l.default,babelHelpers.extends({panelToRender:s},a)))};s.displayName="Lightbox.Sidebar.Content.Share",s.propTypes={isVideo:a.default.bool,sharingEnabled:a.default.bool},s.defaultProps={sharingEnabled:!0};var i=s;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-share-tabs","sm-lightbox-sidebar-placeholder","sm-lightbox-constants"]});
YUI.add("sm-lightbox-sidebar-shortcuts",(function(e){SM.currentModule="sm-lightbox-sidebar-shortcuts";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-keyboard-shortcuts"));const r=()=>e.default.createElement(e.default.Fragment,null,e.default.createElement("h2",null,"Keyboard Shortcuts"),e.default.createElement(l.default,{keys:[[{key:"←",label:"Previous Image"},{key:"→",label:"Next Image"},{key:"Esc",label:"Close Sidebar or Lightbox"},{key:"F",label:"Toggle Fullscreen"},{key:"E",label:"Edit Photo Details"},{key:"I",label:"Show Photo Details"}]]}));r.displayName="Lightbox.Sidebar.Content.Shortcuts";var a=r;exports.default=a}(),SM.currentModule=null}),"",{requires:["react","sm-keyboard-shortcuts"]});
YUI.add("sm-lightbox-sidebar",(function(e){SM.currentModule="sm-lightbox-sidebar";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-icon"));const o=({children:t,onCloseSidebar:l})=>e.default.createElement("aside",{className:"sm-lightbox-v2-sidebar sm-flex-large-and-up sm-flex-column","data-disable-auto-hide":!0},e.default.createElement(a.default,{onClick:l,disabled:!l,className:"sm-lightbox-v2-close-sidebar-button sm-hide-large-and-up",size:a.default.SIZE_SMALL,noChrome:!0},e.default.createElement(r.default,{name:"AngleBracketDownSlim",size:r.default.SIZE_SMALL})),t);o.displayName="Lightbox.Sidebar",o.propTypes={onCloseSidebar:l.default.func};var u=o;exports.default=u}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon"]});
YUI.add("sm-lightbox-slideshow-content",(function(e){SM.currentModule="sm-lightbox-slideshow-content";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("prop-types")),i=t("react-transition-group"),o=babelHelpers.interopRequireDefault(t("sm-lightbox-content-container")),r=t("sm-lightbox-constants");class l extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_clearSlideshowTimer",()=>{clearTimeout(this._slideshowTimer),this._slideshowTimer=null}),babelHelpers.defineProperty(this,"_setSlideshowTimer",()=>{this._clearSlideshowTimer(),this._slideshowTimer=setTimeout(this._stepSlideshow,1e3*this.props.slideshowSpeed)}),babelHelpers.defineProperty(this,"_stepSlideshow",()=>{this._setSlideshowTimer(),this.props.onSlideshowNavigate()})}componentDidMount(){this._setSlideshowTimer()}componentDidUpdate(e){this.props.slideshowSpeed!==e.slideshowSpeed&&this._setSlideshowTimer()}componentWillUnmount(){this._clearSlideshowTimer()}render(){let{currentImageUri:t,onModeChangeRequest:s,previousImageUri:l,showCaption:n,showImageInfo:a,showTitle:d,slideshowTransitionSpeed:p}=this.props,u={classNames:"sm-lightbox-v2-slideshow-transition",timeout:r.LIGHTBOX_SLIDESHOW_TRANSITION_SPEEDS.get(p)},h={onModeChangeRequest:s,showCaption:n,showImageInfo:a,showTitle:d,style:{transitionDuration:"".concat(u.timeout,"ms")}};return e.default.createElement(i.TransitionGroup,{exit:!1},!!l&&e.default.createElement(i.CSSTransition,babelHelpers.extends({},u,{key:l}),e.default.createElement(o.default,babelHelpers.extends({},h,{imageUri:l,"data-position":r.SLIDESHOW_SLIDE_PREV}))),e.default.createElement(i.CSSTransition,babelHelpers.extends({},u,{key:t}),e.default.createElement(o.default,babelHelpers.extends({},h,{imageUri:t,"data-position":r.SLIDESHOW_SLIDE_CURRENT,isActive:!0}))))}}exports.default=l,babelHelpers.defineProperty(l,"displayName","Lightbox.Content.Slideshow"),babelHelpers.defineProperty(l,"defaultProps",{slideshowSpeed:r.LIGHTBOX_SLIDESHOW_DEFAULT_SPEED,slideshowTransitionSpeed:r.LIGHTBOX_SLIDESHOW_DEFAULT_TRANSITION_SPEED}),babelHelpers.defineProperty(l,"propTypes",{currentImageUri:s.default.string.isRequired,onModeChangeRequest:s.default.func,onSlideshowNavigate:s.default.func.isRequired,previousImageUri:s.default.string,showCaption:s.default.bool,showImageInfo:s.default.bool,showTitle:s.default.bool,slideshowSpeed:s.default.number,slideshowTransitionSpeed:s.default.oneOf(Array.from(r.LIGHTBOX_SLIDESHOW_TRANSITION_SPEEDS.keys()))})}(),SM.currentModule=null}),"",{requires:["react","prop-types","react-transition-group","sm-lightbox-content-container","sm-lightbox-constants"]});
YUI.add("sm-lightbox-slideshow-layout-container",(function(e){SM.currentModule="sm-lightbox-slideshow-layout-container";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o("react-redux"),t=babelHelpers.interopRequireDefault(o("sm-lightbox-slideshow-layout")),r=o("sm-lightbox-layout-container-hoc"),a=o("sm-lightbox-keyboard-container-hoc"),n=o("sm-lightbox-constants");const s=(0,r.withCommonLayoutStateProps)(),u=(0,a.withCommonKeyboardDispatchProps)((0,r.withCommonLayoutDispatchProps)((e,{onNavRequest:o,onModeChangeRequest:t})=>{let r={};return o&&(r.onNextSlideRequest=()=>{o(n.NAV_TYPE_NEXT)},t&&(r.onNavBackwardRequest=()=>{t(n.LIGHTBOX_MODE_DEFAULT),o(n.NAV_TYPE_PREV)},r.onNavForwardRequest=()=>{t(n.LIGHTBOX_MODE_DEFAULT),o(n.NAV_TYPE_NEXT)})),t&&(r.onStopSlideshowRequest=()=>{t(n.LIGHTBOX_MODE_DEFAULT)}),r}));var l=(0,e.connect)(s,u)(t.default);exports.default=l}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-slideshow-layout","sm-lightbox-layout-container-hoc","sm-lightbox-keyboard-container-hoc","sm-lightbox-constants"]});
YUI.add("sm-lightbox-slideshow-layout",(function(e){SM.currentModule="sm-lightbox-slideshow-layout";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),l=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-image-preloader")),r=babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")),i=babelHelpers.interopRequireDefault(t("sm-resize-observer-hoc")),n=babelHelpers.interopRequireDefault(t("sm-lightbox-close-button")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-content-pane")),d=babelHelpers.interopRequireDefault(t("sm-lightbox-favorite-buttons-container")),m=babelHelpers.interopRequireDefault(t("sm-fullscreen-button-container")),b=babelHelpers.interopRequireDefault(t("sm-lightbox-view")),h=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-bar")),p=babelHelpers.interopRequireDefault(t("sm-lightbox-nav-buttons")),f=babelHelpers.interopRequireDefault(t("sm-lightbox-slideshow-content")),c=t("sm-lightbox-constants"),g=t("sm-lightbox-layout-props");const w=(0,r.default)(a.default),R=e.default.fullscreenEnabled,q=e=>{let{isLastSlide:t,onCloseRequest:a,onImageDataChange:r,onKeyDownRequest:i,onModeChangeRequest:g,onNavBackwardRequest:q,onNavForwardRequest:v,onNextSlideRequest:x,onStopSlideshowRequest:I,previousImageUri:S,currentImageUri:H,autoHideUI:D,isUIHidden:E,onHideUI:U,onShowUI:_,resizeRef:M,preloadImageUrls:y,slideshowSpeed:L,slideshowTransitionSpeed:T,showCaption:C,showFavoriteButtons:N,showImageInfo:O,showTitle:P}=e;return l.default.createElement(b.default,{autoHideUI:D,isUIHidden:E,onHideUI:U,onShowUI:_,onKeyDownRequest:i,mode:c.LIGHTBOX_MODE_SLIDESHOW},l.default.createElement(h.default,{className:"sm-lightbox-v2-navbar-primary"},l.default.createElement("ul",{className:"sm-lightbox-v2-hideable","data-disable-auto-hide":!0},!!R&&l.default.createElement("li",{className:"sm-lightbox-v2-hide-portrait"},l.default.createElement(m.default,{"data-testid":"lightbox_fullscreen_button",noChrome:!0})),l.default.createElement("li",null,l.default.createElement(w,{"data-testid":"lightbox_slideshow_button",tooltipLabel:"Pause Slideshow",onClick:I,noChrome:!0},l.default.createElement(o.default,{name:"Pause",size:o.default.SIZE_LARGE}))))),l.default.createElement(u.default,{"data-slideshow":!0,containerRef:M},l.default.createElement(f.default,{currentImageUri:H,isLastSlide:t,onModeChangeRequest:g,onSlideshowNavigate:x,previousImageUri:S,showBuyButton:!1,showCaption:C,showFilename:!1,showImageInfo:O,showTitle:P,slideshowSpeed:L,slideshowTransitionSpeed:T})),l.default.createElement(h.default,{className:"sm-lightbox-v2-navbar-secondary"},l.default.createElement(n.default,{onCloseRequest:a}),!!N&&l.default.createElement(d.default,{albumImageUri:H,onImageDataChange:r})),l.default.createElement(p.default,{onNavBackwardRequest:q,onNavForwardRequest:v}),l.default.createElement(s.default,{preloadUrls:y}))};q.displayName="Lightbox.Layout.Slideshow",q.propTypes=g.LIGHTBOX_LAYOUT_PROP_TYPES,q.defaultProps=g.LIGHTBOX_LAYOUT_DEFAULT_PROPS;var v=(0,i.default)(q);exports.default=v}(),SM.currentModule=null}),"",{requires:["sm-dom","react","sm-component-button","sm-icon","sm-image-preloader","sm-tooltip-hoc","sm-resize-observer-hoc","sm-lightbox-close-button","sm-lightbox-content-pane","sm-lightbox-favorite-buttons-container","sm-fullscreen-button-container","sm-lightbox-view","sm-lightbox-nav-bar","sm-lightbox-nav-buttons","sm-lightbox-slideshow-content","sm-lightbox-constants","sm-lightbox-layout-props"]});
YUI.add("sm-lightbox-swipeable-content",(function(e){SM.currentModule="sm-lightbox-swipeable-content";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireDefault(t("sm-swipeable")),n=babelHelpers.interopRequireDefault(t("sm-lightbox-content-container")),l=t("sm-lightbox-constants"),s=t("sm-swipeable-constants");const u=t=>{let{onNavBackwardRequest:a,onNavForwardRequest:l,onModeChangeRequest:u,previousImageUri:r,currentImageUri:i,nextImageUri:d,buyButtonSkin:b,buyButtonStyle:c,showBuyButton:p,showCaption:f,showEXIF:w,showFilename:m,showImageInfo:h,showMap:g,showTitle:S}=t,B={buyButtonSkin:b,buyButtonStyle:c,onModeChangeRequest:u,showBuyButton:p,showCaption:f,showEXIF:w,showFilename:m,showImageInfo:h,showMap:g,showTitle:S};return e.default.createElement(o.default,{canNavBackward:!!a,canNavForward:!!l,onNavBackward:a,onNavForward:l},!!r&&e.default.createElement(n.default,babelHelpers.extends({imageUri:r,"data-testid":"lightbox_previous_content","data-position":s.SLIDE_PREV},B)),e.default.createElement(n.default,babelHelpers.extends({allowZoom:!0,imageUri:i,"data-testid":"lightbox_current_content","data-position":s.SLIDE_CURRENT,isActive:!0},B)),!!d&&e.default.createElement(n.default,babelHelpers.extends({imageUri:d,"data-testid":"lightbox_next_content","data-position":s.SLIDE_NEXT},B)))};u.displayName="Lightbox.Content.Swipeable",u.propTypes={onNavBackwardRequest:a.default.func,onNavForwardRequest:a.default.func,onModeChangeRequest:a.default.func.isRequired,currentImageUri:a.default.string,nextImageUri:a.default.string,previousImageUri:a.default.string,buyButtonSkin:a.default.oneOf(l.BUY_BUTTON_SKINS),buyButtonStyle:a.default.oneOf(l.BUY_BUTTON_STYLES),showBuyButton:a.default.bool,showEXIF:a.default.bool,showFilename:a.default.bool,showImageImage:a.default.bool,showMap:a.default.bool,showTitle:a.default.bool};var r=u;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-swipeable","sm-lightbox-content-container","sm-lightbox-constants","sm-swipeable-constants"]});
YUI.add("sm-lightbox-tools-menu-container",(function(e){SM.currentModule="sm-lightbox-tools-menu-container";var exports={},o=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o("react-redux"),s=babelHelpers.interopRequireDefault(o("sm-lightbox-tools-menu")),n=o("sm-api-redux-selectors"),i=o("sm-lightbox-actions"),t=o("sm-lightbox-selectors"),l=o("sm-page-selectors"),a=o("sm-lightbox-analytics"),r=o("sm-lightbox-constants"),m=o("sm-component-menu-actions"),g=o("sm-component-menu-selectors");var u=(0,e.connect)((e,{albumImageUri:o})=>{let s=(0,t.isCollected)(e,o),i=!s&&(0,n.getExpansionUri)(e,o,"CopyImage");return{isToolsMenuOpen:(0,g.isVisible)(e,r.LIGHTBOX_TOOLS_MENU_ID),imageKey:(0,t.getImageKey)(e,o),isCollected:s,isDeleteWarningVisible:(0,t.isDeleteWarningVisible)(e),isHidden:(0,t.isHidden)(e,o),isVideo:(0,t.isVideo)(e,o),isLoggedInUserAssistant:(0,l.isLoggedInUserAssistant)(e),_albumImageCopyUri:i}},e=>({_onCopyImage:o=>e((0,i.copyImage)(o)),_onToggleToolsMenu(o){e((0,m.toggle)(r.LIGHTBOX_TOOLS_MENU_ID,o&&(0,a.getOpenImageToolsMenuAnalytics)()))},_onUpdateVisibility(o,s,n){e((0,i.updateImageVisibility)(o,s)).then(()=>{n({hidden:s})})},onHideDeleteWarning(){e((0,i.hideDeleteWarning)())},onShowDeleteWarning(){e((0,i.showDeleteWarning)())}}),(e,o,s)=>{let{_albumImageCopyUri:n,...i}=e,{_onCopyImage:t,_onToggleToolsMenu:l,_onUpdateVisibility:a,...r}=o,{onImageDataChange:m}=s;return l&&(r.onToggleToolsMenu=()=>{l(!e.isToolsMenuOpen)}),r.onUpdateVisibility=e=>{a(s.albumImageUri,e,m)},n&&(r.onCopyImage=()=>t(n)),{...i,...r,...s}})(s.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-tools-menu","sm-api-redux-selectors","sm-lightbox-actions","sm-lightbox-selectors","sm-lightbox-analytics","sm-lightbox-constants","sm-component-menu-actions","sm-component-menu-selectors","sm-page-selectors"]});
YUI.add("sm-lightbox-tools-menu",(function(e){SM.currentModule="sm-lightbox-tools-menu";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireDefault(t("sm-dom-core")),n=babelHelpers.interopRequireDefault(t("sm-panel-alert")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),i=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-component-menu")),r=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),u=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),d=babelHelpers.interopRequireDefault(t("sm-panel-progress")),m=babelHelpers.interopRequireDefault(t("sm-tooltip-hoc")),p=t("sm-component-menu-constants"),c=t("sm-analytics-constants"),f=t("sm-lightbox-constants");const b=(0,m.default)(a.default);class g extends e.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",{isMakeCopyProgressVisible:!1}),babelHelpers.defineProperty(this,"_bindMenuAnchorRef",e=>{this._menuAnchorRef=e,this.forceUpdate()}),babelHelpers.defineProperty(this,"_onDelete",()=>{this.props.onShowDeleteWarning()}),babelHelpers.defineProperty(this,"_onDeleteConfirm",()=>{this.props.onHideDeleteWarning(),this.props.onImageDeleteRequest()}),babelHelpers.defineProperty(this,"_onDeleteCancel",()=>{this.props.onHideDeleteWarning()}),babelHelpers.defineProperty(this,"_onUpdateVisibility",()=>{let{isHidden:e,onUpdateVisibility:t}=this.props;t(!e)}),babelHelpers.defineProperty(this,"_onMakeCopyRequest",()=>{this.setState({isMakeCopyProgressVisible:!0},async()=>{await this.props.onCopyImage(),o.default.win.location.reload()})}),babelHelpers.defineProperty(this,"_getReplaceLink",()=>this._buildToolLink("replace")),babelHelpers.defineProperty(this,"_buildToolLink",e=>"/photos/tools.mg?ImageKey=".concat(this.props.imageKey,"&tool=").concat(e,"&url=").concat(encodeURIComponent(o.default.win.location.href)))}render(){let{className:t,isCollected:l,isDeleteWarningVisible:o,isHidden:m,isToolsMenuOpen:g,isVideo:h,onCopyImage:_,onEditorModeRequest:y,onImageDeleteRequest:R,onToggleToolsMenu:H,isLoggedInUserAssistant:M}=this.props,{isMakeCopyProgressVisible:C}=this.state,D="".concat(l?"Remove this collected":"Delete this"," ").concat(h?"video":"photo","?"),E="Are you sure you want to remove this collected ".concat(h?"video":"photo","?\n            The original ").concat(h?"video":"photo"," will still be available in its primary gallery."),k="Are you sure you want to delete the selected\n            ".concat(h?"video":"photo"," from SmugMug?"),q=l?"Remove from Gallery":"Delete",T=g?a.default:b,I=g?{"aria-label":"Tools"}:{tooltipLabel:"Tools"};return e.default.createElement(e.default.Fragment,null,e.default.createElement(T,babelHelpers.extends({className:t,"data-testid":"lightbox_tools_button",onClick:H,ref:this._bindMenuAnchorRef,noChrome:!0},I),e.default.createElement(i.default,{name:"Wrench",size:i.default.SIZE_LARGE})),e.default.createElement(s.default,{key:g,menuId:f.LIGHTBOX_TOOLS_MENU_ID,anchor:this._menuAnchorRef,alignments:p.SUBMENU_ALIGNMENTS},e.default.createElement(r.default,{onClick:y,"data-testid":"imagetoolsmenu_editor_menuitem",dataAttrs:{"data-testid":"imagetoolsmenu_editor_menuitem"}},e.default.createElement(u.default,null,"Open in Editor")),e.default.createElement(r.default,{onClick:this._onUpdateVisibility,"data-testid":"imagetoolsmenu_visibility_menuitem",dataAttrs:{"data-testid":"imagetoolsmenu_visibility_menuitem"}},e.default.createElement(u.default,null,m?"Show":"Hide")),!!R&&!M&&e.default.createElement(r.default,{onClick:this._onDelete,"data-testid":"imagetoolsmenu_delete_menuitem",dataAttrs:{"data-testid":"imagetoolsmenu_delete_menuitem"}},e.default.createElement(u.default,null,q)),e.default.createElement(r.default,{href:this._getReplaceLink(),type:p.ITEM_TYPE_LINK,"data-testid":"imagetoolsmenu_replace_menuitem",dataAttrs:{"data-testid":"imagetoolsmenu_replace_menuitem","data-link-tracking-category":c.CATEGORY.IMAGE_TOOL,"data-link-tracking-action":c.ACTION.OPEN_TOOL,"data-link-tracking-label":"Replace","data-link-tracking-property":c.LOCATION_LIGHTBOX}},e.default.createElement(u.default,null,h?"Replace Preview":"Replace")),_&&e.default.createElement(r.default,{onClick:this._onMakeCopyRequest,"data-testid":"imagetoolsmenu_copy_menuitem",dataAttrs:{"data-testid":"imagetoolsmenu_copy_menuitem"}},e.default.createElement(u.default,null,"Make a Copy"))),!!o&&e.default.createElement(n.default,{title:D,cancelLabel:"Cancel",confirmLabel:l?"Remove":"Delete",onCancel:this._onDeleteCancel,onConfirm:this._onDeleteConfirm,isDestructive:!0,iconName:null},e.default.createElement("p",null,l?E:k)),!!C&&e.default.createElement(d.default,{title:"Making a Copy"}))}}exports.default=g,babelHelpers.defineProperty(g,"displayName","Lightbox.Navigation.PrimaryControls.ToolsMenu"),babelHelpers.defineProperty(g,"propTypes",{isCollected:l.default.bool,isDeleteWarningVisible:l.default.bool,isHidden:l.default.bool,isToolsMenuOpen:l.default.bool,isVideo:l.default.bool,onCopyImage:l.default.func,onEditorModeRequest:l.default.func.isRequired,onHideDeleteWarning:l.default.func.isRequired,onImageDeleteRequest:l.default.func,onShowDeleteWarning:l.default.func.isRequired,onToggleToolsMenu:l.default.func.isRequired,onUpdateVisibility:l.default.func.isRequired,isLoggedInUserAssistant:l.default.bool}),babelHelpers.defineProperty(g,"defaultProps",{isCollected:!1,isDeleteWarningVisible:!1,isHidden:!1,isToolsMenuOpen:!1,isVideo:!1,isLoggedInUserAssistant:!1})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-dom-core","sm-panel-alert","sm-component-button","sm-icon","sm-component-menu","sm-component-menu-item","sm-component-menu-label","sm-panel-progress","sm-tooltip-hoc","sm-component-menu-constants","sm-analytics-constants","sm-lightbox-constants"]});
YUI.add("sm-lightbox-video-container",(function(e){SM.currentModule="sm-lightbox-video-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("react-redux"),r=t("sm-lightbox-selectors"),o=babelHelpers.interopRequireDefault(t("sm-lightbox-video"));var i=(0,e.connect)((e,t)=>{let{videoUri:o,containerHeight:i,containerWidth:u}=t,{height:l,url:d,width:n}=(0,r.getImageData)(e,o,u,i)||{};return{height:l,posterUrl:d,videoSources:(0,r.getVideoSource)(e,o,u,i)||{},width:n}})(o.default);exports.default=i}(),SM.currentModule=null}),"",{requires:["react-redux","sm-lightbox-selectors","sm-lightbox-video"]});
YUI.add("sm-lightbox-video",(function(e){SM.currentModule="sm-lightbox-video";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),i=babelHelpers.interopRequireWildcard(t("sm-video-player"));const l=e=>{let{height:t,posterUrl:l,videoSources:o,width:u}=e;return r.default.createElement("div",{className:"sm-lightbox-v2-video-player-container",style:{height:"".concat(t,"px"),width:"".concat(u,"px")}},r.default.createElement(i.default,{autoPlay:!0,stretching:i.STRETCHING_TYPES.NONE,className:"sm-lightbox-v2-video-player",height:"100%",poster:l,sources:o,width:"100%",controls:!0}))};l.displayName="Lightbox.Content.Video",l.propTypes={height:e.default.number.isRequired,posterUrl:e.default.string,videoSources:e.default.shape({type:e.default.string,url:e.default.string.isRequired}).isRequired,width:e.default.number.isRequired};var o=l;exports.default=o}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-video-player"]});
YUI.add("sm-lightbox-view",(function(e){SM.currentModule="sm-lightbox-view";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("sm-ua")),i=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("classnames")),l=babelHelpers.interopRequireDefault(t("lodash")),u=t("sm-lightbox-constants"),a=babelHelpers.interopRequireDefault(t("sm-tappable"));const d=new o.default,n=d.isIOS||d.isAndroid;class p extends i.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_lightboxViewRef",i.default.createRef()),babelHelpers.defineProperty(this,"_focusLightbox",()=>{this._lightboxViewRef.current&&this._lightboxViewRef.current.focus()}),babelHelpers.defineProperty(this,"_onMouseMove",e=>{let{autoHideUI:t,isUIDisabled:o,isUIHidden:i,onShowUI:s}=this.props;n||!t||o||(i&&s(),this._throttleMouseMove(e.target))}),babelHelpers.defineProperty(this,"_throttleMouseMove",l.default.throttle(t=>{e.default.closest(t,u.LOCK_UI_SELECTOR)?this._clearAutoHideTimeout():this._resetAutoHideTimeout(u.AUTO_HIDE_DELAY)},u.AUTO_HIDE_MOUSE_MOVE_THROTTLE)),babelHelpers.defineProperty(this,"_onMouseLeave",()=>{!n&&this.props.autoHideUI&&this._resetAutoHideTimeout(u.AUTO_HIDE_DELAY)}),babelHelpers.defineProperty(this,"_onTouchStart",e=>{this._touchStartTime=e.timeStamp}),babelHelpers.defineProperty(this,"_onTap",t=>{if(t.timeStamp-this._touchStartTime>500)return;let{mode:o}=this.props;if(!(o===u.LIGHTBOX_MODE_DEFAULT||o===u.LIGHTBOX_MODE_SLIDESHOW)||e.default.closest(t.target,u.LOCK_UI_SELECTOR))return;let{isUIHidden:i,onHideUI:s,onShowUI:r}=this.props;i?r():s()}),babelHelpers.defineProperty(this,"_resetAutoHideTimeout",e=>{this._clearAutoHideTimeout(),this._autoHideTimeout=setTimeout(()=>{this.props.onHideUI()},e)}),babelHelpers.defineProperty(this,"_clearAutoHideTimeout",()=>{clearTimeout(this._autoHideTimeout)})}componentDidMount(){this._focusLightbox(),!n&&this.props.autoHideUI&&this._resetAutoHideTimeout(u.AUTO_HIDE_INITIAL_DELAY)}componentDidUpdate(t){let{autoHideUI:o,isUIDisabled:i,onShowUI:s}=this.props,r=t.isUIDisabled&&!i,l=e.default.doc.activeElement===e.default.doc.body;(r||l)&&this._focusLightbox(),o!==t.autoHideUI&&(t.autoHideUI?(this._clearAutoHideTimeout(),s()):this._resetAutoHideTimeout(u.AUTO_HIDE_DELAY))}componentWillUnmount(){this._clearAutoHideTimeout()}render(){let{children:e,className:t,isUIDisabled:o,isUIHidden:s,mode:l,onKeyDownRequest:u}=this.props,d=(0,r.default)(["sm-lightbox-v2","sm-no-focus-visible",t]);return i.default.createElement(a.default,{onTap:n?this._onTap:null},i.default.createElement("div",{className:d,tabIndex:"-1","data-hide-ui":s||o||null,"data-lightbox-mode":l,onKeyDown:o?null:u,onMouseMove:this._onMouseMove,onMouseLeave:this._onMouseLeave,onTouchStart:this._onTouchStart,ref:this._lightboxViewRef},e))}}exports.default=p,babelHelpers.defineProperty(p,"displayName","Lightbox.Common.View"),babelHelpers.defineProperty(p,"propTypes",{autoHideUI:s.default.bool,isUIDisabled:s.default.bool,isUIHidden:s.default.bool,mode:s.default.oneOf(u.LIGHTBOX_MODES).isRequired,onHideUI:s.default.func.isRequired,onKeyDownRequest:s.default.func.isRequired,onShowUI:s.default.func.isRequired}),babelHelpers.defineProperty(p,"defaultProps",{autoHideUI:!0,isUIDisabled:!1,isUIHidden:!1})}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-ua","react","prop-types","classnames","lodash","sm-lightbox-constants","sm-tappable"]});
YUI.add("sm-lightbox-wrapper",(function(e){SM.currentModule="sm-lightbox-wrapper";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("react")),t=r("react-redux"),l=babelHelpers.interopRequireDefault(r("sm-error-boundary-hoc")),a=babelHelpers.interopRequireDefault(r("sm-lightbox-fatal-error-message")),u=(0,l.default)(t.Provider,{logCategory:"lightbox-v2",dismissible:!1,message:e.default.createElement(a.default,null)});exports.default=u}(),SM.currentModule=null}),"",{requires:["react","react-redux","sm-error-boundary-hoc","sm-lightbox-fatal-error-message"]});
YUI.add("sm-link",(function(e){SM.currentModule="sm-link";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("react"));const l=e=>{let{children:r,rel:l,...n}=e;return e.target&&(l?-1===l.indexOf("noopener")&&(l+=" ".concat("noopener")):l="noopener"),t.default.createElement("a",babelHelpers.extends({rel:l},n),r)};l.displayName="Link",l.propTypes={href:e.default.string.isRequired,rel:e.default.string};var n=l;exports.default=n}(),SM.currentModule=null}),"",{requires:["react"]});
YUI.add("sm-live-chat",(function(t){SM.currentModule="sm-live-chat";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},e=SM._requireShim;!function(){"use strict";var n=babelHelpers.interopRequireDefault(e("rsvp")),a=babelHelpers.interopRequireDefault(e("sm-dom")),i=e("sm-controlpanel-helpers"),o=e("sm-page-feature-flag-constants");const s=SM.env.featureFlags[o.ENABLE_CHAT_BUBBLE];var r,_=a.default.doc,c=a.default.win;const d=["/close"];c.__lc={license:SM.env.liveChat.license},c.LC_API={},t.namespace("SM").LiveChat=module.exports={hasMenu:!1,addCustomParam:function(t){__lc.params||(__lc.params=[]),__lc.params.push(t)},displayChat:function(){switch(this.getChatWindowState()){case 2:case 0:case 1:LC_API.open_chat_window();break;default:return}},getChatWindowState:function(){return LC_API.chat_window_maximized()?0:LC_API.chat_window_minimized()?1:LC_API.chat_window_hidden()?2:3},initialize:function(){if(!r){r=n.default.defer(),this._setupCustomParams(),this._setupCallbacks();var t,e=_.createElement("script");e.async=!0,e.src="//cdn.livechatinc.com/tracking.js",e.onerror=r.reject,(t=_.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)}return r.promise},_isForcedChatLocation:function(){for(let t of d)if(t===window.location.pathname)return!0;return!1},_setupCallbacks:function(){LC_API.on_before_load=this._onBeforeLoad.bind(this),LC_API.on_after_load=this._onAfterLoad.bind(this),LC_API.on_chat_started=this._onChatStart.bind(this),LC_API.on_chat_state_changed=this._onChatStateChanged.bind(this),LC_API.on_chat_window_opened=this._onWindowOpen.bind(this),LC_API.on_chat_ended=this._onChatEnd.bind(this),LC_API.on_chat_window_minimized=this._onChatMinimized.bind(this)},_setupCustomParams:function(){var t=this.customParams;if(__lc.params=[{name:"Account Status",value:this.isTrial?"Trial":"Paid"},{name:"Account Settings",value:(0,i.getAccountSettingsUrl)({nickname:this.nickName})},{name:"Homepage",value:this.userHomepage}],t)for(var e=0,n=t.length;e<n;e++)this.addCustomParam(t[e])},_onAfterLoad:function(){r.promise._state?this.displayChat():(s&&LC_API.agents_are_available()&&!LC_API.visitor_engaged()&&LC_API.minimize_chat_window(),r.resolve())},_onBeforeLoad:function(){LC_API.visitor_engaged()?LC_API.open_chat_window():this._isForcedChatLocation()||LC_API.hide_chat_window()},_onChatEnd:function(){this._chatEnded=!0},_onChatMinimized:function(){},_onChatStart:function(){},_onWindowOpen:function(){},_onChatStateChanged:function(t){t.state}}}(),SM.currentModule=null}),"",{requires:["rsvp","sm","sm-dom","sm-controlpanel-helpers","sm-page-feature-flag-constants"]});
YUI.add("sm-load-external-svg",(function(e){SM.currentModule="sm-load-external-svg";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{doc:e}=SM.import("sm-dom"),r=SM.import("sm-io-xhr-transport");let o={};exports.default=t=>o[t]?Promise.resolve():new Promise((d,s)=>{let n={method:"GET",headers:{"x-requested-with":null},responseType:"document",url:t};r.send(n,(r,n)=>{r||!n.documentElement?s():(o[t]=!0,e.body.insertBefore(n.documentElement,e.body.childNodes[0]),d())})})}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-io-xhr-transport"]});
YUI.add("sm-load-script",(function(e){SM.currentModule="sm-load-script";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){return new Promise((o,t)=>{let u=e.default.doc.createElement("script");u.src=r,u.onload=o,u.onerror=t,e.default.doc.body.appendChild(u)})};var e=babelHelpers.interopRequireDefault(r("sm-dom"))}(),SM.currentModule=null}),"",{requires:["sm-dom"]});
YUI.add("sm-logo",(function(e){SM.currentModule="sm-logo";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types"));const l=({smuggyOnly:t,...a})=>{let l=t?20:108,C=t?88:0;return e.default.createElement("svg",babelHelpers.extends({width:l,height:24,viewBox:"".concat(C," 0 ").concat(l," ").concat(24),fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{"data-smuggy-only":t||null}),!t&&e.default.createElement(e.default.Fragment,null,e.default.createElement("path",{className:"sm-logo-wordmark",d:"M81.2159 15.9836C79.4609 15.9836 78.2999 14.9036 78.2999 13.0136C78.2999 11.2046 79.5149 10.0976 81.2159 10.0976C82.8629 10.0976 84.0779 11.1776 84.0779 13.0136C84.0779 14.8766 82.9169 15.9836 81.2159 15.9836ZM78.5429 19.3586C78.5429 19.3586 76.4099 20.5196 76.4099 20.5466V20.5736C77.1659 22.1126 78.8669 23.2196 81.1349 23.2196C85.1579 23.2196 86.4539 20.5736 86.4539 17.7116V8.04559H84.1859V9.36859C84.1859 9.36859 84.1859 9.36859 84.1589 9.36859C83.6999 8.50459 82.5119 7.82959 81.0269 7.82959C78.0839 7.82959 76.0319 10.1246 76.0319 12.9866C76.0319 15.9836 78.1649 18.2246 81.0269 18.2246C82.5659 18.2246 83.6459 17.5226 84.1049 16.6856H84.1319V17.7656C84.1319 19.9256 83.1329 20.9786 81.1079 20.9786C79.8389 21.0056 78.9479 20.3306 78.5429 19.3586C78.5429 19.3856 78.5429 19.3856 78.5429 19.3586Z"}),e.default.createElement("path",{className:"sm-logo-wordmark",d:"M72.4409 8.0459C72.4409 8.0459 72.4139 8.0459 72.4409 8.0459V13.5539C72.4409 15.1199 71.6579 16.0109 70.3079 16.0109H70.065C68.688 16.0109 67.932 15.1199 67.932 13.5539V8.0459H65.61V13.7969C65.61 16.2539 67.5809 18.2249 70.0379 18.2249H70.2809C72.7379 18.2249 74.709 16.2269 74.709 13.7969V8.0459H72.4409Z"}),e.default.createElement("path",{className:"sm-logo-wordmark",d:"M50.895 4.77832H53.352L57.375 11.0153C57.375 11.0153 57.375 11.0153 57.402 11.0153L61.425 4.77832H63.882V18.0083H61.56V8.55832C61.56 8.55832 61.56 8.55832 61.533 8.55832L57.348 14.8223C57.348 14.8223 57.348 14.8223 57.321 14.8223L53.19 8.58532H53.163V18.0083H50.895V4.77832Z"}),e.default.createElement("path",{className:"sm-logo-wordmark",d:"M43.821 15.9836C42.066 15.9836 40.905 14.9036 40.905 13.0136C40.905 11.2046 42.12 10.0976 43.821 10.0976C45.468 10.0976 46.683 11.1776 46.683 13.0136C46.71 14.8766 45.522 15.9836 43.821 15.9836ZM41.148 19.3586C41.148 19.3586 39.015 20.5196 39.015 20.5466V20.5736C39.771 22.1126 41.472 23.2196 43.74 23.2196C47.763 23.2196 49.059 20.5736 49.059 17.7116V8.04559H46.791V9.36859C46.791 9.36859 46.791 9.36859 46.764 9.36859C46.305 8.50459 45.117 7.82959 43.632 7.82959C40.689 7.82959 38.637 10.1246 38.637 12.9866C38.637 15.9836 40.77 18.2246 43.632 18.2246C45.171 18.2246 46.251 17.5226 46.71 16.6856H46.737V17.7656C46.737 19.9256 45.738 20.9786 43.713 20.9786C42.471 21.0056 41.553 20.3306 41.148 19.3586C41.175 19.3856 41.175 19.3856 41.148 19.3586Z"}),e.default.createElement("path",{className:"sm-logo-wordmark",d:"M35.1 8.0459V13.5539C35.1 15.1199 34.317 16.0109 32.967 16.0109H32.724C31.347 16.0109 30.591 15.1199 30.591 13.5539V8.0459H28.323V13.7969C28.323 16.2539 30.294 18.2249 32.751 18.2249H32.994C35.451 18.2249 37.422 16.2269 37.422 13.7969V8.0459H35.1Z"}),e.default.createElement("path",{className:"sm-logo-wordmark",d:"M11.556 8.04559H13.824V9.53059C13.824 9.53059 13.824 9.53059 13.851 9.53059C14.499 8.63959 15.363 7.82959 16.875 7.82959C18.306 7.82959 19.305 8.53159 19.845 9.58459C19.845 9.58459 19.845 9.58459 19.872 9.58459C20.682 8.53159 21.735 7.82959 23.247 7.82959C25.434 7.82959 26.757 9.20659 26.757 11.6636V18.0356H24.489V12.3656C24.489 10.7726 23.76 9.93558 22.464 9.93558C21.222 9.93558 20.331 10.7996 20.331 12.4196V18.0626H18.063V12.3386C18.063 10.7996 17.307 9.90858 16.038 9.90858C14.769 9.90858 13.905 10.8536 13.905 12.4196V18.0356H11.637L11.556 8.04559Z"}),e.default.createElement("path",{className:"sm-logo-wordmark",d:"M0 16.0918L1.377 14.4448C2.646 15.5518 3.915 16.1728 5.562 16.1728C6.993 16.1728 7.911 15.4978 7.911 14.4988V14.4718C7.911 13.5268 7.371 13.0138 4.914 12.4468C2.106 11.7448 0.513 10.9078 0.513 8.47784V8.45084C0.513 6.15584 2.43 4.58984 5.049 4.58984C6.966 4.58984 8.505 5.18384 9.855 6.23684L8.613 7.99184C7.425 7.10084 6.237 6.64184 5.022 6.64184C3.672 6.64184 2.862 7.34384 2.862 8.20784V8.23484C2.862 9.26084 3.456 9.71984 5.994 10.3138C8.802 11.0158 10.26 12.0418 10.26 14.2288V14.2558C10.26 16.7398 8.316 18.2248 5.535 18.2248C3.51 18.2248 1.593 17.5228 0 16.0918Z"})),e.default.createElement("path",{fill:"#6EB800",d:"M95.3911 3.94153C97.2271 3.91453 98.0911 2.83453 97.9831 1.86253C97.8751 1.05253 97.0921 0.296531 95.5801 0.269531C94.3381 0.269531 93.5281 1.18753 93.4201 2.10553C93.2851 3.02353 93.8521 3.96853 95.3911 3.94153Z"}),e.default.createElement("path",{fill:"#6EB800",d:"M104.301 3.72594C106.056 3.61794 106.812 2.75394 106.839 1.86294C106.839 0.863936 105.894 -0.108064 104.328 -6.40329e-05C103.059 0.107936 102.33 0.971936 102.222 1.86294C102.087 2.83494 102.735 3.80694 104.301 3.72594Z"}),e.default.createElement("path",{fill:"#6EB800",d:"M97.578 17.3339C91.503 17.3339 92.34 10.1789 93.366 10.1249C100.414 9.82793 102.222 9.61195 104.734 9.55795C107.326 9.50395 102.358 17.3069 97.578 17.3339ZM105.3 7.37095C101.008 7.80295 100.792 7.85695 92.88 8.01895C89.532 8.04595 90.207 19.4939 97.335 19.4939C104.14 19.5209 112.348 6.80395 105.3 7.37095Z"}))};l.displayName="SmugMugLogo",l.propTypes={smuggyOnly:a.default.bool};var C=l;exports.default=C}(),SM.currentModule=null}),"",{requires:["react","prop-types"]});
YUI.add("sm-main-nav-container",(function(e){SM.currentModule="sm-main-nav-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=babelHelpers.interopRequireDefault(r("sm-main-nav")),o=r("sm-page-selectors"),a=r("sm-page-nodepage-selectors"),l=r("sm-header-actions"),s=r("sm-header-selectors");const n=new(babelHelpers.interopRequireDefault(r("sm-ua")).default),i=n.isIOS||n.isAndroid;var u=(0,e.connect)(e=>{let r,t,l=(0,a.getNode)(e);l&&(t=l.id,r=(0,a.getRealNodeType)(e));let n=(0,s.getUrlOrganizer)(e,{deepLink:!1,isProbablyMobile:i}),u=(0,o.viewportIsGreaterThanSmall)(e);return{collapseMainNav:(0,o.viewportIsLessThanExtraLarge)(e),nodeId:t,nodeType:r,showUploadButton:u,urlOrganize:n,urlPhotos:(0,s.getUrlPhotosHome)(e),urlPhotoSite:(0,s.getUrlPhotoSite)(e),urlPhotoStories:(0,s.getUrlPhotoStories)(e),urlSelling:(0,s.getUrlSellingTools)(e)}},e=>({onMainNavMenuClick:()=>{e((0,l.toggleMainNav)())}}))(t.default);exports.default=u}(),SM.currentModule=null}),"",{requires:["react-redux","sm-main-nav","sm-page-selectors","sm-page-nodepage-selectors","sm-header-actions","sm-header-selectors","sm-ua"]});
YUI.add("sm-main-nav-menu-item",(function(e){SM.currentModule="sm-main-nav-menu-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("sm-analytics")),r=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),l=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),u=t("sm-component-menu-constants"),i=t("sm-header-tracking-helpers");const s=t=>{let{children:a,className:s,dataTestId:d,href:o,isActive:m,nodeId:c,nodeType:p,onNavItemClick:f,trackingLabel:b}=t,v={"data-testid":d};m&&(v["data-active"]=!0);return e.default.createElement(r.default,{className:s,dataAttrs:v,href:o,onClick:e=>{(0,i.trackEvent)({action:n.default.ACTION.NAVIGATION_CLICK,label:b,nodeId:c,nodeType:p}),f(e)},type:u.ITEM_TYPE_LINK},e.default.createElement(l.default,null,a))};s.displayName="Header.MainNav.MainNavMenuItem",s.propTypes={dataTestId:a.default.string.isRequired,href:a.default.string.isRequired,isActive:a.default.bool,nodeId:a.default.string,nodeType:a.default.string,onNavItemClick:a.default.func,trackingLabel:a.default.string.isRequired},s.defaultProps={onNavItemClick:()=>{}};var d=s;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-analytics","sm-component-menu-item","sm-component-menu-label","sm-component-menu-constants","sm-header-tracking-helpers"]});
YUI.add("sm-main-nav-upload-button-container",(function(e){SM.currentModule="sm-main-nav-upload-button-container";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a("react-redux"),l=babelHelpers.interopRequireDefault(a("sm-analytics")),o=babelHelpers.interopRequireDefault(a("sm-ua")),n=babelHelpers.interopRequireDefault(a("sm-main-nav-upload-button")),r=a("sm-api-redux-selectors"),t=a("sm-main-nav-upload-helpers"),s=a("sm-header-node-section-bar-helpers"),d=a("sm-header-selectors"),u=a("sm-header-tracking-helpers"),i=a("sm-header-constants"),p=a("sm-page-nodepage-selectors");const m=new o.default,c=!m.isIOS&&!m.isAndroid;var b=(0,e.connect)((e,{useUploadButtonLink:a})=>{let o,n,m,b,h,f=(0,p.getUploadableNode)(e),g=f&&(0,r.getExpansion)(e,f.uri,"Album");if(g&&(0,d.getIsAlbumAndCanUpload)(e)&&(h=()=>(0,t.uploadToThisGallery)(f.name,f.id,g.AlbumKey)),f&&c){let e=f.isRoot?"Your site":f.name,a=null==g?void 0:g.AlbumKey;m=()=>(0,t.uploadBulkFolders)(e,f.id,f.webUri,a)}if(f){let e=(0,s.getOpenNodeSettingsPanelClickHandler)({createNew:!0,node:f});b=()=>{(0,u.trackEvent)({action:l.default.ACTION.UPLOAD_CLICK,label:i.TRACKING_LABEL_UPLOAD_TO_NEW_GALLERY}),e()}}if(f&&!f.isRoot){o=f.name,n=((0,r.getExpansion)(e,f.uri,"ParentNode")||{}).IsRoot}return{currentNodeName:o,isParentRootNode:n,onUploadBulkFolders:m,onUploadToExistingGalleryClick:()=>(0,t.uploadToExistingGallery)(null==f?void 0:f.id),onUploadToNewGalleryClick:b,onUploadToThisGallery:h,useUploadButtonLink:a||!f}})(n.default);exports.default=b}(),SM.currentModule=null}),"",{requires:["react-redux","sm-analytics","sm-ua","sm-main-nav-upload-button","sm-api-redux-selectors","sm-main-nav-upload-helpers","sm-header-node-section-bar-helpers","sm-header-selectors","sm-header-tracking-helpers","sm-header-constants","sm-page-nodepage-selectors"]});
YUI.add("sm-main-nav-upload-button",(function(e){SM.currentModule="sm-main-nav-upload-button";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(l("react")),a=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("sm-component-button")),o=babelHelpers.interopRequireDefault(l("sm-icon")),n=babelHelpers.interopRequireDefault(l("sm-modal")),u=babelHelpers.interopRequireDefault(l("sm-upload-options")),d=l("sm-header-constants");const r="https://".concat(SM.env.host.main).concat(d.URL_PATH_UPLOAD_OPTIONS),s=l=>{let[a,d]=(0,e.useState)(!1),{currentNodeName:s,isParentRootNode:i,onUploadBulkFolders:p,onUploadButtonClick:c,onUploadToExistingGalleryClick:f,onUploadToNewGalleryClick:m,onUploadToThisGallery:b,useUploadButtonLink:U}=l;return e.default.createElement(e.default.Fragment,null,e.default.createElement(t.default,{"aria-label":b?"Upload to this gallery":"Upload",className:"sm-header-upload-button","data-testid":"header_upload_button",href:U?r:null,onClick:function(e){c?c(e):U||(b?b():d(!0))},size:t.default.SIZE_SMALL,skin:t.default.SKIN_ACCENT},b?e.default.createElement(o.default,{name:"AddPhotos",size:o.default.SIZE_SMALL}):e.default.createElement("svg",{"data-upload-icon":!0,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.default.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12.146 3.012l.027.005a.743.743 0 01.102.023 1.026 1.026 0 01.474.296l3.958 3.959a1 1 0 01-1.414 1.414L13 6.417v7.585a1 1 0 01-1.993.117L11 14.002V6.416L8.707 8.71A1 1 0 017.21 7.39l.083-.094 4-4a.979.979 0 01.854-.283z",fill:"currentColor"})),e.default.createElement("span",{className:"sm-button-label"},"Upload")),a&&e.default.createElement(n.default,{onClose:()=>d(!1)},e.default.createElement(u.default,{currentNodeName:s,isParentRootNode:i,onCancel:()=>d(!1),onUploadBulkFoldersClick:p&&(()=>{d(!1),p()}),onUploadToExistingGalleryClick:()=>{d(!1),f()},onUploadToNewGalleryClick:()=>{d(!1),m()}})))};s.displayName="Header.MainNav.UploadButton",s.propTypes={currentNodeName:a.default.string,isParentRootNode:a.default.bool,onUploadBulkFolders:a.default.func,onUploadButtonClick:a.default.func,onUploadToExistingGalleryClick:a.default.func,onUploadToNewGalleryClick:a.default.func,onUploadToThisGallery:a.default.func,useUploadButtonLink:a.default.bool};var i=s;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-modal","sm-upload-options","sm-header-constants"]});
YUI.add("sm-main-nav-upload-helpers",(function(e){SM.currentModule="sm-main-nav-upload-helpers";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uploadToExistingGallery=function(a){(0,t.trackEvent)({label:d.TRACKING_LABEL_UPLOAD_TO_EXISTING,action:l.default.ACTION.UPLOAD_CLICK});let n=e.one("#upload-picker-plugin-host");n||(n=e.Node.create('<div id="upload-picker-plugin-host"></div>'),e.one("body").append(n));o.default.handleExistingClick(null,n,{startNodeId:a})},exports.uploadToThisGallery=function(e,a,r){(0,t.trackEvent)({label:d.TRACKING_LABEL_UPLOAD_TO_CURRENT_GALLERY,action:l.default.ACTION.UPLOAD_CLICK}),o.default.showUploadPanel(e,{albumKey:r,nodeId:a},e=>{e&&n.default.win.location.reload()})},exports.uploadBulkFolders=function(e,a,r,u){(0,t.trackEvent)({label:d.TRACKING_LABEL_UPLOAD_FOLDERS,action:l.default.ACTION.UPLOAD_CLICK}),o.default.showUploadPanel(e,{nodeId:a,albumKey:u,allowFolders:!0},e=>{e&&(n.default.win.location=r)})};var l=babelHelpers.interopRequireDefault(a("sm-analytics")),n=babelHelpers.interopRequireDefault(a("sm-dom")),o=babelHelpers.interopRequireDefault(a("sm-page-nav-upload")),t=a("sm-header-tracking-helpers"),d=a("sm-header-constants")}(),SM.currentModule=null}),"",{requires:["sm-analytics","sm-dom","sm-page-nav-upload","sm-header-tracking-helpers","sm-header-constants"]});
YUI.add("sm-main-nav",(function(e){SM.currentModule="sm-main-nav";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-icon")),r=babelHelpers.interopRequireDefault(t("sm-component-menu")),o=babelHelpers.interopRequireDefault(t("sm-main-nav-menu-item")),u=babelHelpers.interopRequireDefault(t("sm-main-nav-upload-button-container")),s=t("sm-header-constants"),i=t("sm-component-menu-constants");const d=t=>{let a=(0,e.useRef)(null),[d,m]=(0,e.useState)(!1);(0,e.useLayoutEffect)(()=>{m(!0)},[]);let{activeFeature:c,collapseMainNav:_,nodeId:f,nodeType:p,onMainNavMenuClick:A,onNavItemClick:N,onUploadButtonClick:E,showUploadButton:I,urlOrganize:b,urlPhotos:T,urlPhotoSite:R,urlPhotoStories:h,urlSelling:M,useUploadButtonLink:v}=t,S={nodeId:f,nodeType:p,onNavItemClick:N};return e.default.createElement("nav",{className:"sm-position-relative sm-flex sm-flex-items-center"},I&&e.default.createElement(u.default,{useUploadButtonLink:v,onUploadButtonClick:E}),e.default.createElement(n.default,{className:"sm-header-main-nav-overflow-menu-button sm-hide-extra-large-and-up","data-testid":"header_overflow_button",noChrome:!0,onClick:A,ref:a},e.default.createElement("span",{className:"sm-button-label sm-emphasized"},c),e.default.createElement(l.default,{name:"AngleBracketDownSlim",size:l.default.SIZE_SMALL})),e.default.createElement(r.default,{alwaysVisible:!_,anchor:_?a.current:null,className:"sm-header-main-nav",menuId:s.MENU_ID_MAIN_NAV,noChrome:!_,orientation:_?i.ORIENTATION_VERTICAL:i.ORIENTATION_HORIZONTAL},e.default.createElement(o.default,babelHelpers.extends({dataTestId:"header_photos_menuitem",href:T,trackingLabel:s.MAIN_NAV_FEATURE_PHOTOS},S),s.MAIN_NAV_FEATURE_PHOTOS),!!b&&e.default.createElement(o.default,babelHelpers.extends({className:"sm-page-header-navitem-organize",dataTestId:"header_organize_menuitem",href:b,isActive:c===s.MAIN_NAV_FEATURE_ORGANIZER,trackingLabel:s.MAIN_NAV_FEATURE_ORGANIZER},S),s.MAIN_NAV_FEATURE_ORGANIZER),!!h&&e.default.createElement(o.default,babelHelpers.extends({dataTestId:"header_photostories_menuitem",href:h,trackingLabel:s.MAIN_NAV_FEATURE_PHOTO_STORIES},S),s.MAIN_NAV_FEATURE_PHOTO_STORIES),e.default.createElement(o.default,babelHelpers.extends({dataTestId:"header_photosite_menuitem",href:R,isActive:c===s.MAIN_NAV_FEATURE_PHOTO_SITE,trackingLabel:s.MAIN_NAV_FEATURE_PHOTO_SITE},S),s.MAIN_NAV_FEATURE_PHOTO_SITE),!!M&&e.default.createElement(o.default,babelHelpers.extends({className:"sm-page-header-navitem-sell",dataTestId:"header_sell_menuitem",href:M,isActive:c===s.MAIN_NAV_FEATURE_SELLING,trackingLabel:"Sell"},S),s.MAIN_NAV_FEATURE_SELLING)))};d.displayName="Header.MainNav",d.propTypes={activeFeature:a.default.string,collapseMainNav:a.default.bool,onMainNavMenuClick:a.default.func,onNavItemClick:a.default.func,onUploadButtonClick:a.default.func,showUploadButton:a.default.bool,urlOrganize:a.default.string,urlPhotos:a.default.string.isRequired,urlPhotoSite:a.default.string.isRequired,urlPhotoStories:a.default.string,urlSelling:a.default.string,useUploadButtonLink:a.default.bool,nodeId:a.default.string,nodeType:a.default.string},d.defaultProps={activeFeature:s.MAIN_NAV_FEATURE_FALLBACK};var m=d;exports.default=m}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon","sm-component-menu","sm-main-nav-menu-item","sm-main-nav-upload-button-container","sm-header-constants","sm-component-menu-constants"]});
YUI.add("sm-map-constants",(function(e){SM.currentModule="sm-map-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAP_BOX_LINK=exports.DEFAULT_MAX_ZOOM=exports.DEFAULT_MIN_ZOOM=void 0;exports.DEFAULT_MIN_ZOOM=2;exports.DEFAULT_MAX_ZOOM=18;exports.MAP_BOX_LINK="https://mapbox.com/about/maps"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-map-selectors",(function(e){SM.currentModule="sm-map-selectors";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageMapMarkerData=void 0;var e=r("sm-api-redux-selectors");exports.getImageMapMarkerData=(r,t)=>{let{ImageKey:i,Latitude:u,Longitude:a,WebUri:s,Processing:l,IsArchive:n}=(0,e.getEntity)(r,t);if(!Number(u)&&!Number(a))return;let{ImageSizeThumb:m}=(0,e.getExpansion)(r,t,"ImageSizeDetails")||{};if(!m)return;let{Width:o,Height:d,Url:c}=m;return{imageKey:i,isArchive:n,isProcessing:l,latitude:u,longitude:a,webUri:s,thumbnailUrl:c,thumbnailWidth:o,thumbnailHeight:d}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors"]});
YUI.add("sm-map-utils",(function(e){SM.currentModule="sm-map-utils";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitMarkerBounds=exports.setSatelliteControl=exports.setZoomControl=exports.createImageMarker=exports.smugMapAccentIcon=exports.smugMapIcon=exports.createMap=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),o=babelHelpers.interopRequireDefault(t("sm-dom-core")),a=babelHelpers.interopRequireDefault(t("leaflet")),n=t("sm-map-constants");const i='&copy; <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';exports.createMap=(e,t={})=>{let{hasClusters:o=!0,minZoom:s=n.DEFAULT_MIN_ZOOM,maxZoom:l=n.DEFAULT_MAX_ZOOM,scrollWheelZoom:r=!1}=t,c=[],u={},m={};u.map=new a.default.TileLayer("https://api.mapbox.com/styles/v1/smugmug/ciqik1p6l0000bdnp18jsr2fx/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic211Z211ZyIsImEiOiJjaXFpanV4bjAwNnFjZnlucG55c2c0OXBsIn0.lgUMqNddcj0P85SXQVRejQ",{attribution:i}),c[c.length]=u.map,u.sat=new a.default.TileLayer("https://api.mapbox.com/styles/v1/smugmug/ciqikr4xb0001bima0uo6subk/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic211Z211ZyIsImEiOiJjaXFpanV4bjAwNnFjZnlucG55c2c0OXBsIn0.lgUMqNddcj0P85SXQVRejQ",{attribution:i}),o&&(u.markerCluster=new a.default.MarkerClusterGroup({maxClusterRadius:50,showCoverageOnHover:!1,spiderfyDistanceMultiplier:1.3,spiderfyOnMaxZoom:!1,zoomToBoundsOnClick:!1}),c[c.length]=u.markerCluster);let p=new a.default.Map(e,{attributionControl:!1,layers:c,zoomControl:!0,minZoom:s,maxZoom:l,scrollWheelZoom:r,keyboard:!1,trackResize:!1,worldCopyJump:!0});return m.attribution=new a.default.Control.Attribution({prefix:!1}).addTo(p),m.layer=new a.default.Control.Layers({Normal:u.map,Satellite:u.sat}).addTo(p),a.default.Marker.prototype._setPos=function(e){this._icon&&(a.default.DomUtil.setPosition(this._icon,e),this._shadow&&a.default.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex())},a.default.DistanceGrid.prototype._sqDist=function(e,t){if(e&&t){var o=t.x-e.x,a=t.y-e.y;return o*o+a*a}},{controls:m,layers:u,map:p}};const s=new a.default.DivIcon({className:"smugmap-pin",html:'<div class="plug" style="position: absolute; width: 10px; height: 10px; left: 11px; top: 10px; border-radius: 5px;"></div><span class="sm-fonticon sm-fonticon-Location3" style="font-size: 48px; height: 100%; line-height: 24px; overflow: hidden; width: auto;"></span>',iconAnchor:new a.default.Point(16,39),iconSize:new a.default.Point(32,42),popupAnchor:new a.default.Point(0,-36)});exports.smugMapIcon=s;const l=new a.default.DivIcon({className:"smugmap-pin smugmap-pin-selected",html:'<div class="plug" style="position: absolute; width: 10px; height: 10px; left: 11px; top: 10px; border-radius: 5px;"></div><span class="sm-fonticon sm-fonticon-Location3" style="font-size: 48px; height: 100%; line-height: 24px; overflow: hidden; width: auto;"></span>',iconAnchor:new a.default.Point(16,39),iconSize:new a.default.Point(32,42),popupAnchor:new a.default.Point(0,-36)});exports.smugMapAccentIcon=l;exports.createImageMarker=(t,o={})=>{let{latitude:n,longitude:i,thumbnailWidth:r,thumbnailHeight:c,thumbnailUrl:u,isArchive:m,isProcessing:p,webUri:d}=t,f=(0,e.default)({"sm-image-processing":p,"sm-image-archive":m}),h=new a.default.LatLng(n,i),g=new a.default.Marker(h,{icon:o.accent?l:s}),w='<img src="'.concat(u,'" class="').concat(f,'" width="').concat(r,'" height="').concat(c,'" />');return d&&(w='<a href="'.concat(d,'">').concat(w,"</a>")),g.bindPopup(w,{closeButton:!0}),g};exports.setZoomControl=(e,{allowZoom:t=!0})=>{e&&(t&&!e.zoomControl._map?e.zoomControl.addTo(e):!t&&e.zoomControl._map&&e.zoomControl.removeFrom(e))};exports.setSatelliteControl=(e,t,{allowSatellite:a=!0})=>{if(e&&(a&&!t._map?t.addTo(e):!a&&t._map&&t.removeFrom(e),a&&t)){let e=o.default.doc.createElement("SPAN");e.className="sm-fonticon sm-fonticon-Menu",t._container.querySelector(".leaflet-control-layers-toggle").appendChild(e)}};exports.fitMarkerBounds=(e,t)=>{var o;if(e&&t)try{(o=t.getBounds()).isValid()?e.fitBounds(o):e.fitWorld()}catch(e){}else e&&e.fitWorld()}}(),SM.currentModule=null}),"",{requires:["classnames","sm-dom-core","leaflet","leaflet-markercluster","sm-map-constants"]});
YUI.add("sm-map",(function(e){SM.currentModule="sm-map";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),a=babelHelpers.interopRequireDefault(r("sm-dom-core")),s=babelHelpers.interopRequireDefault(r("sm-link")),l=r("sm-map-utils"),o=r("sm-map-constants");class i extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"controls",{}),babelHelpers.defineProperty(this,"layers",{}),babelHelpers.defineProperty(this,"map",null),babelHelpers.defineProperty(this,"markers",[]),babelHelpers.defineProperty(this,"markerHash",{}),babelHelpers.defineProperty(this,"_mapRef",e.default.createRef()),babelHelpers.defineProperty(this,"_attachMapEvents",()=>{this.map.on("baselayerchange",this._onMapBaseLayerChange,this),this.layers.markerCluster&&this.layers.markerCluster.on("clusterclick",this._onMarkerClusterClick,this),this.map.on("overlayadd",(function(e){this.overlayLayer=e.name}),this),this.map.on("overlayremove",(function(){this.overlayLayer=""}),this)}),babelHelpers.defineProperty(this,"_detachMapEvents",()=>{this.layers.markerCluster&&this.layers.markerCluster.off("clusterclick")}),babelHelpers.defineProperty(this,"_onMapBaseLayerChange",e=>{this.selectedLayer=e.name}),babelHelpers.defineProperty(this,"_addImageMarkers",(e,r)=>{let t=[];e.length&&(e.forEach(e=>{let{imageKey:a,latitude:s=0,longitude:o=0}=e;if(0!==s&&0!==o&&!this.markerHash[a])if(this.layers.markerCluster){let s=(0,l.createImageMarker)(e,r);this.markers.push(s),this.markerHash[a]=s,t.push(s)}else this._addImageMarker(e,r)}),this.layers.markerCluster&&this.layers.markerCluster.addLayers(t))}),babelHelpers.defineProperty(this,"_addImageMarker",(e,r)=>{let t=e.imageKey;if(this.markerHash[t])return this.markerHash[t];var a=(0,l.createImageMarker)(e,r);return this.layers.markerCluster?this.layers.markerCluster.addLayer(a):a.addTo(this.map),this.markers.push(a),this.markerHash[t]=a,a}),babelHelpers.defineProperty(this,"_renderMap",()=>{let{controls:e,layers:r,map:t}=(0,l.createMap)(this._mapRef.current,{hasClusters:this.props.clusters,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,scrollWheelZoom:this.props.scrollWheelZoom});this.controls=e,this.layers=r,this.map=t,this._addImageMarkers(this.props.images),(0,l.fitMarkerBounds)(this.map,this.layers.markerCluster),this._attachMapEvents(),(0,l.setZoomControl)(this.map,{allowZoom:this.props.zoomControl}),(0,l.setSatelliteControl)(this.map,this.controls.layer,{allowSatellite:this.props.satellite}),this.props.initialZoom&&this.map.setZoom(this.props.initialZoom)}),babelHelpers.defineProperty(this,"_onMarkerClusterClick",e=>{var r=e.layer,t=this.map;9>=r.getChildCount()||t.getMaxZoom()===t.getZoom()?r.spiderfy():r.zoomToBounds()})}componentWillUnmount(){this._detachMapEvents()}componentDidMount(){a.default.win.requestAnimationFrame(this._renderMap)}render(){return e.default.createElement("div",{ref:this._mapRef},e.default.createElement(s.default,{href:o.MAP_BOX_LINK,className:"mapbox-maplogo",target:"_blank"},"Mapbox"),this.props.children)}}exports.default=i,babelHelpers.defineProperty(i,"displayName","SmugMap"),babelHelpers.defineProperty(i,"propTypes",{minZoom:t.default.number,maxZoom:t.default.number,initialZoom:t.default.number,scrollWheelZoom:t.default.bool,satellite:t.default.bool,clusters:t.default.bool,zoomControl:t.default.bool,images:t.default.arrayOf(t.default.shape({imageKey:t.default.string,latitude:t.default.oneOfType([t.default.number,t.default.string]),longitude:t.default.oneOfType([t.default.number,t.default.string]),thumbnailUrl:t.default.string,thumbnailWidth:t.default.number,thumbnailHeight:t.default.number,webUri:t.default.string,isProcessing:t.default.bool,isArchive:t.default.bool}))}),babelHelpers.defineProperty(i,"defaultProps",{minZoom:o.DEFAULT_MIN_ZOOM,maxZoom:o.DEFAULT_MAX_ZOOM,scrollWheelZoom:!1,satellite:!0,clusters:!0,zoomControl:!0,images:[]})}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-dom-core","sm-link","sm-map-utils","sm-map-constants"]});
YUI.add("sm-menu",(function(e){SM.currentModule="sm-menu";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){e.namespace("SM.Extension").MenuSkinClass=function(){},e.SM.Extension.MenuSkinClass.prototype._getNodeSkinClass=function(e){var n=e.ancestor((function(e){return e.hasClass("sm-nui")||e.hasClass("sm-user-ui")}));return n?n.hasClass("sm-nui")?"sm-nui":"sm-user-ui":null},e.namespace("SM.Extension").MenuIcons=function(){},e.SM.Extension.MenuIcons.prototype._renderNodeIcon=function(e,n){if(n.icon){var s=n.icon.replace(/\W/g,"");e.one("."+this.classNames.label).prepend('<span class="sm-fonticon sm-fonticon-small sm-fonticon-'+s+'"></span>')}return e};var n=e.Base.create("sm-menu",e.Menu,[e.SM.Extension.MenuSkinClass,e.SM.Extension.MenuIcons],{show:function(s){if(n.superclass.show.apply(this,arguments),s&&s.anchorPoint&&s.anchorPoint instanceof e.Node){var t=this._getNodeSkinClass(s.anchorPoint);t&&this.get("container").addClass(t)}},renderNode:function(e,s){var t=n.superclass.renderNode.apply(this,arguments);return this._renderNodeIcon(t,e),t},_afterDisable:function(s){n.superclass._afterDisable.apply(this,arguments),s.item.disabledMessage&&(s.item.tooltip=e.SM.Page.Tooltip.attachToNode(s.item.disabledMessage,this.getHTMLNode(s.item)))},_afterEnable:function(e){n.superclass._afterEnable.apply(this,arguments),e.item.tooltip&&e.item.tooltip.destroy()}},{});e.namespace("SM").Menu=n;var s=e.Base.create("sm-menu-plugin",e.Plugin.Menu,[e.SM.Extension.MenuSkinClass,e.SM.Extension.MenuIcons],{destructor:function(){s.superclass.destructor(),this.get("container").remove(!0)},render:function(){s.superclass.render.call(this);var e=this._getNodeSkinClass(this.get("host"));e&&this.get("container").addClass(e)},renderNode:function(e,n){var t=s.superclass.renderNode.apply(this,arguments);return this._renderNodeIcon(t,e),e.dataTestId&&t.setAttribute("data-testid",e.dataTestId),t},_afterHostClick:function(){this._host.getAttribute("disabled")||s.superclass._afterHostClick.call(this)}},{NS:"menu"});e.namespace("SM.Plugin").Menu=s}(),SM.currentModule=null}),"",{requires:["gallery-sm-menu","gallery-sm-menu-plugin","sm-page-tooltip"]});
YUI.add("sm-messagebox",(function(e){SM.currentModule="sm-messagebox";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var s=e.Node,t=(e.Lang,e.config.doc);e.namespace("SM");var i=e.Base.create("sm-messagebox",e.Widget,[],{renderUI:function(){var e=this.get("boundingBox"),i=this.get("contentBox"),n=t.createDocumentFragment(),a=s.create('<div class="sm-messagebox-icon"></div>'),o=s.create('<div class="sm-messagebox-msg"></div>'),m=this.get("message");e.addClass(this.getClassName(this.get("type"))),o.setHTML(m),n.appendChild(s.getDOMNode(a)),n.appendChild(s.getDOMNode(o)),i.append(n)},bindUI:function(){},syncUI:function(){},setMessage:function(e){var s=this.get("boundingBox").one(".sm-messagebox-msg");s&&s.setHTML(e)},setType:function(e){var s;e&&(s=this.get("type"),this.get("boundingBox").removeClass(this.getClassName(s)).addClass(this.getClassName(e)),this.set("type",e))}},{CSS_PREFIX:"sm-messagebox",ATTRS:{message:{value:""},type:{value:"info"}},TYPES:{INFO:"info",ERROR:"error",CONFIRM:"confirm",ALERT:"alert",SPINNER:"spinner",NONE:"none"}});e.SM.MessageBox=i;var n=e.Base.create("sm-messagebox",e.SM.Panel,[],{_inTimer:null,_outTimer:null,_hideTimer:null,initializer:function(){this.set("visible",!1),this.set("zIndex",1002),this.set("centered",!0),this.set("width",250),this.set("fillHeight",null)},renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("boundingBox"),i=this.get("contentBox"),a=t.createDocumentFragment(),o=s.create('<div class="sm-messagebox-icon"></div>'),m=s.create('<div class="sm-messagebox-msg"></div>'),d=this.get("message");e.addClass(this.getClassName(this.get("type"))+" sm-nui"),this.setStdModContent("body",'<div class="sm-panel-content-margin sm-messagebox-msg">'+d+"</div>"),a.appendChild(s.getDOMNode(o)),a.appendChild(s.getDOMNode(m)),i.append(a)},open:function(s,t){var i=this.get("boundingBox"),n={type:"confirm",width:250},a=0;t=e.merge(n,t),i.replaceClass(this.getClassName(this.get("type")),this.getClassName(t.type)),this.setAttrs(t),this.setStdModContent("body",'<div class="sm-panel-content-margin sm-messagebox-msg">'+s+"</div>"),this.get("animate")&&(i.addClass("sm-messagebox-in"),a=0),this._inTimer=e.later(a,this,this._in,!1)},close:function(){this._out()},_in:function(){var s=this.get("boundingBox");this.centered(),this.show(),this.get("animate")&&s.removeClass("sm-messagebox-in"),this.get("autoHide")&&(this._outTimer=e.later(this.get("autoHideDelay"),this,this._out,!1))},_out:function(){var s=this.get("boundingBox"),t=0;this.get("animate")&&(s.addClass("sm-messagebox-out"),t=300),this._hideTimer=e.later(t,this,this._hide,!1)},_hide:function(){var e=this.get("boundingBox");this.hide(),this.get("animate")&&e.removeClass("sm-messagebox-out")}},{CSS_PREFIX:"sm-messagebox sm-panel",ATTRS:{message:{value:""},type:{value:"info"},autoHide:{value:!0},autoHideDelay:{value:2e3},animate:{value:!0},messageNode:{value:null,getter:function(e){return e||(e=this.get("boundingBox").one(".sm-messagebox-msg")),e},readOnly:!0}},TYPES:{INFO:"info",ERROR:"error",CONFIRM:"confirm",ALERT:"alert",SPINNER:"spinner",NONE:"none"}}),a=null;e.SM.MessageBoxOverlay={show:function(s,t){t||(t={});var i={type:"confirm",width:250};t=e.merge(i,t),a||(a=new n).render("body"),a.open(s,t)},hide:function(){a&&a.close()}}}(),SM.currentModule=null}),"",{requires:["base","node","overlay","widget","sm-panel"]});
YUI.add("sm-modal-constants",(function(e){SM.currentModule="sm-modal-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SKINNED_MODAL_SELECTOR=exports.UNSKINNED_MODAL_SELECTOR=void 0;exports.UNSKINNED_MODAL_SELECTOR=".sm-overlay-container";exports.SKINNED_MODAL_SELECTOR=".sm-user-overlay-container"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-modal",(function(e){SM.currentModule="sm-modal";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unmount=exports.mount=exports.default=exports.MASK_TRANSPARENT_MEDIUM=exports.MASK_TRANSPARENT=exports.MASK_OPAQUE=exports.MASK_CLEAR=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),o=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireWildcard(t("react")),s=babelHelpers.interopRequireDefault(t("react-dom")),r=t("body-scroll-lock"),a=t("sm-dom-core"),n=babelHelpers.interopRequireDefault(t("sm-teleport")),d=t("sm-modal-constants");exports.MASK_CLEAR="clear";exports.MASK_OPAQUE="opaque";exports.MASK_TRANSPARENT="transparent";exports.MASK_TRANSPARENT_MEDIUM="transparent-medium";class c extends l.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"dialogRef",l.default.createRef()),babelHelpers.defineProperty(this,"maskRef",l.default.createRef()),babelHelpers.defineProperty(this,"_checkEscapeKeyDown",e=>{e.stopPropagation(),"Escape"!==e.key||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),this.props.onClose(e))}),babelHelpers.defineProperty(this,"_onMaskClick",e=>{e.target===this.maskRef.current&&this.props.onClose()})}componentDidMount(){let{initialFocus:e,preventTouch:t}=this.props;a.isBrowser&&(0,r.disableBodyScroll)(this.dialogRef.current,{allowTouchMove:e=>!1===t||"function"==typeof t&&t(e)}),this._focusedEl=a.doc.activeElement,e?e():this.dialogRef.current.focus()}componentWillUnmount(){let e=this._focusedEl;this.props.restoreFocus&&e&&e.focus&&e.focus(),a.isBrowser&&(0,r.enableBodyScroll)(this.dialogRef.current)}render(){let{centered:t,children:o,className:s,closeOnClickOutside:r,closeOnEscape:a,maskClassName:n,maskOpacity:d}=this.props,c=l.default.Children.only(o),u=["sm-modal-mask","sm-flex","sm-flex-justify-center",{"sm-flex-items-start":!t},{"sm-flex-items-center":t},{["".concat(n)]:n}],i=r?{cursor:"pointer"}:null;return l.default.createElement("div",{className:"sm-modal","data-centered":!!t||void 0,onKeyDown:a?this._checkEscapeKeyDown:void 0},l.default.createElement("div",{className:(0,e.default)(u),"data-opacity":d,onClick:r?this._onMaskClick:void 0,ref:this.maskRef,style:i},l.default.createElement("div",{className:(0,e.default)("sm-modal-content",s),ref:this.dialogRef,role:"dialog",tabIndex:"-1"},c)))}}babelHelpers.defineProperty(c,"propTypes",{applyUserSkin:o.default.bool,centered:o.default.bool,children:o.default.element.isRequired,closeOnClickOutside:o.default.bool,closeOnEscape:o.default.bool,initialFocus:o.default.func,maskClassName:o.default.string,maskOpacity:o.default.oneOf(["clear","opaque","transparent","transparent-medium"]),onClose:o.default.func,preventTouch:o.default.oneOfType([o.default.bool,o.default.func]),restoreFocus:o.default.bool}),babelHelpers.defineProperty(c,"defaultProps",{centered:!0,closeOnClickOutside:!1,closeOnEscape:!0,maskOpacity:"transparent",onClose:()=>{},preventTouch:!0,restoreFocus:!0}),babelHelpers.defineProperty(c,"displayName","Modal");var u=(0,n.default)(c,({applyUserSkin:e}={})=>a.doc.querySelector(e?d.SKINNED_MODAL_SELECTOR:d.UNSKINNED_MODAL_SELECTOR));exports.default=u;exports.mount=e=>{let t=a.doc.body.appendChild(a.doc.createElement("div")),{onClose:o}=e.props;return s.default.render(l.default.cloneElement(e,{onClose:(...e)=>{o&&o(...e),setTimeout(()=>{t.parentNode&&(s.default.unmountComponentAtNode(t),t.parentNode.removeChild(t))},0)}}),t)};exports.unmount=e=>{e.props.onClose()}}(),SM.currentModule=null}),"",{requires:["body-scroll-lock","classnames","prop-types","react","react-dom","sm-dom-core","sm-teleport","sm-modal-constants"]});
YUI.add("sm-model-history",(function(t){SM.currentModule="sm-model-history";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){t.Node;var i="host",e=t.Base.create("pluginModelHistory",t.Plugin.Base,[],{initializer:function(t){var e=this.get(i);this.afterHostMethod("setAttrs",this._updateHistory,this),this._eventHandles=[e.on("save",this._onHostUpdate,this)],this.rHistory||(this.rHistory=[],this.rHistory[0]=this.get(i).getAttrs())},_updateHistory:function(){this.get(i).isModified()&&(this.rHistory[this.rHistory.length]=this.get(i).getAttrs())},revert:function(t){this.rHistory&&(t||(t=this.get("StableRevision")),this.get(i).setAttrs(this.rHistory[t-1]),this.rHistory=this.rHistory.slice(0,t),this.setStableRevision())},isModifiedWithHistory:function(t){var e;for(e in t||(t=this.get("StableRevision")),this.get(i).changed)if(this.rHistory[t-1][e]!=this.get(i).get(e))return!0;return!1},getCurrentRevision:function(){return this.rHistory?this.rHistory.length:1},setStableRevision:function(t){t||(t=this.getCurrentRevision()),this.set("StableRevision",t)},_onHostUpdate:function(t){this.setStableRevision()},getStableAttr:function(t){return!!this.rHistory[this.get("StableRevision")-1][t]&&this.rHistory[this.get("StableRevision")-1][t]}},{NS:"modelhistory",ATTRS:{StableRevision:{value:1}}});t.namespace("SM.Plugin").ModelHistory=e}(),SM.currentModule=null}),"",{requires:["node","plugin"]});
YUI.add("sm-model-list-sync-api",(function(e){SM.currentModule="sm-model-list-sync-api";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";function t(e){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,t.prototype={_getAPIEndpoint:function(){return this.apiEndpoint||this.model&&this.model.NAME},_getData:function(e){var t;switch(e){case"create":case"update":case"read":case"delete":default:t={}}return t},_preFetchPage:function(t,s){var a=this._lastApiRequest;a&&t>0&&t<=this.get("TotalPages")?(a.data.PageNumber=t,a.data.PageSize=s,a.on={success:function(t){e.fire("modelListPrefetchComplete",{response:t.response})},failure:function(e){}},this._api.sendRequest(a)):e.fire("modelListPrefetchComplete",{response:null})},_loadPage:function(e,t,s,a,i){var n=this._lastApiRequest;n&&e>0&&e<=this.get("TotalPages")&&(n.data.PageNumber=e,n.data.PageSize=t,n.on={success:function(e){var t=this.parse(e.response.results),n={silent:!0};s?this.reset(t):(void 0!==i&&(n.index=i),this.fire("newPage",{models:this.add(t,n)})),a&&a(null,e.response)},failure:function(e){a&&a("err",e.response)},context:this},this._api.sendRequest(n))},loadNextPage:function(e){this._loadPage(this.get("PageNumber")+1,this.get("PageSize"),!1,e)},loadPreviousPage:function(e){this._loadPage(this.get("PageNumber")-1,this.get("PageSize"),!1,e,0)},loadPage:function(e,t){this._loadPage(e,this.get("PageSize"),!0,t)},changePageSize:function(e,t){this._loadPage(1,e,!0,t)}};const s=e.augment(e.SM.APISyncBase,t);e.namespace("SM").ModelListSyncAPI=s;var a=s;exports.default=a}(),SM.currentModule=null}),"",{requires:["sm-sync-api-base"]});
YUI.add("sm-model-sync-api",(function(e){SM.currentModule="sm-model-sync-api";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";function t(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,t.prototype={_getAPIEndpoint:function(){return this.apiEndpoint||this.name},_getData:function(t){var n=this.getAttrs([this.idAttribute]);switch(t){case"create":n=e.merge(n,this.toJSON());break;case"update":n=e.merge(n,this.changed)}return n},commit:function(t,n){return"function"==typeof t&&(n=t,t={}),this.get("destroyed")?this.destroy(e.merge(t,{delete:!0}),n):this.isModified()?this.save(t,n):n&&n(),this}};const n=e.augment(t,e.SM.APISyncBase);e.namespace("SM").ModelSyncAPI=n;var i=n;exports.default=i}(),SM.currentModule=null}),"",{requires:["base","model","sm-sync-api-base"]});
YUI.add("sm-model-userlist",(function(e){SM.currentModule="sm-model-userlist";var s,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;s=e.Base.create("sm-models-userlist",e.ModelList,[],{model:e.SM.Models.User},{ATTRS:{}}),e.namespace("SM.Models").UserList=module.exports=s,SM.currentModule=null}),"",{requires:["model-list","sm-user-model"]});
YUI.add("sm-models-albumlist",(function(e){SM.currentModule="sm-models-albumlist";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=babelHelpers.interopRequireDefault(l("sm-album-model")),t=babelHelpers.interopRequireDefault(l("sm-model-list-sync-api")),a=babelHelpers.interopRequireDefault(l("sm-models-imagelist"));const m=e.Base.create("sm-models-albumlist",e.ModelList,[t.default],{model:s.default,apiEndpoint:"albums",apiCategories:{featured:{method:"featured",expanded:{HighlightImages:a.default}},recent:{method:"recent",expanded:{HighlightImages:a.default}}}},{ATTRS:{}});e.namespace("SM.Models").AlbumList=m;var d=m;exports.default=d}(),SM.currentModule=null}),"",{requires:["base","model","sm-album-model","sm-models-imagelist","sm-model-list-sync-api","sm-models-imagelist"]});
YUI.add("sm-models-galleryimagelist",(function(e){SM.currentModule="sm-models-galleryimagelist";var exports={},s=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=babelHelpers.interopRequireDefault(s("sm-galleryimage-model")),l=babelHelpers.interopRequireDefault(s("sm-model-list-sync-api"));const i=e.Base.create("sm-models-galleryimagelist",e.ModelList,[l.default],{model:t.default,initializer:function(e){this.publish("getImages")},apiEndpoint:"gallery",resultLocator:"Images",apiCategories:{album:{method:"album",expanded:{Albums:"SM.Models.AlbumList",Users:"SM.Models.UserList",UserSettings:"SM.Models.UserSettingList"}},buyitems:{method:"buyitems"},date:{method:"date",expanded:{Albums:"SM.Models.AlbumList",Users:"SM.Models.UserList",UserSettings:"SM.Models.UserSettingList"}},keyword:{method:"keyword",expanded:{Albums:"SM.Models.AlbumList",Users:"SM.Models.UserList",UserSettings:"SM.Models.UserSettingList"}},popular:{method:"popular",expanded:{Albums:"SM.Models.AlbumList",Users:"SM.Models.UserList",UserSettings:"SM.Models.UserSettingList"}},timestampitems:{method:"timestampitems"}},preLoadSizeForContainerSize:function(e,s){this.each((function(t){t.preLoadForContainerSize(e,s)}))}},{ATTRS:{}});e.namespace("SM.Models").GalleryImageList=i;var r=i;exports.default=r}(),SM.currentModule=null}),"",{requires:["base","model","model-list","sm-model-list-sync-api","sm-galleryimage-model","sm-models-albumlist","sm-model-userlist","sm-user-model","sm-usersettinglist-model"]});
YUI.add("sm-models-imagelist",(function(e){SM.currentModule="sm-models-imagelist";var exports={},i=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=babelHelpers.interopRequireDefault(i("sm-image-model")),o=babelHelpers.interopRequireDefault(i("sm-model-list-sync-api"));const l=e.Base.create("sm-models-imagelist",e.ModelList,[o.default],{model:t.default,initializer:function(e){this.publish("getPopularPhotos")},apiEndpoint:"images",apiCategories:{popular:{method:"popular"},recent:{method:"recent"}},preLoadSizeForContainerSize:function(e,i){this.each((function(t){t.preLoadForContainerSize(e,i)}))}},{ATTRS:{}});e.namespace("SM.Models").ImageList=l;var a=l;exports.default=a}(),SM.currentModule=null}),"",{requires:["base","model-list","sm-model-list-sync-api","sm-image-model"]});
YUI.add("sm-models-usernode",(function(e){SM.currentModule="sm-models-usernode";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UserNode=exports.MAX_NODE_DEPTH=exports.PRIVACY_LEVELS=exports.HL_SETTINGS=exports.TYPES=void 0;var t=null;const a={ROOT:1,FOLDER:2,ALBUM:4,SYSTEM_FOLDER:16,PAGE:64,SYSTEM_ALBUM_VISIBLE:1024},l={IDC:0,GENERIC:1,USER_SET:2},s={INHERIT:0,PUBLIC:1,UNLISTED:2,PRIVATE:3},r=e.Base.create("sm-usernode-model",e.Model,[e.SM.ModelSyncAPI,e.ModelRelate],{idAttribute:"NodeID",apiEndpoint:"node",initializer:function(){this._privacySetting=null},validate:function(e,t){var l=[];if(this.get("Type")!=a.ROOT&&("Name"in e&&("string"==typeof e.Name&&0!==e.Name.length||l.push({Field:"Name",Message:"Please enter a Name"})),"UrlName"in e&&("string"==typeof e.UrlName&&0!==e.UrlName.length||l.push({Field:"UrlName",Message:"Please enter a URL"}))),l.length){var s=new Error;s.errors=l,t(s)}else t()},getPrivacySetting:function(t){if(this.isNew())t(null);else if(e.Lang.isNull(this._privacySetting)){(new e.SM.API).sendRequest({method:"rpc.node.getprivacysetting",data:{NodeID:this.get("NodeID")},callback:{success:function(e){e.response.results.PrivacySetting&&(this._privacySetting=e.response.results.PrivacySetting,t(this._privacySetting))},context:this},cfg:{method:"GET"}})}else t(this._privacySetting)},getTypeName:function(e){var t="Page";switch(this.get("Type")){case a.ROOT:t=e?"Homepages":"Homepage";break;case a.FOLDER:t=e?"Folders":"Folder";break;case a.ALBUM:case a.SYSTEM_ALBUM_VISIBLE:t=e?"Galleries":"Gallery";break;case a.PAGE:t=e?"Pages":"Page"}return t},getTypeIcon:function(){var e="Document";switch(this.get("Type")){case a.ROOT:e="Home";break;case a.FOLDER:e="Folder";break;case a.ALBUM:e="Gallery";break;case a.PAGE:e="Document"}return e},isAlbum:function(){return a.ALBUM==this.get("Type")},isFolder:function(){return a.FOLDER==this.get("Type")},isSystemFolder:function(){return a.SYSTEM_FOLDER==this.get("Type")},isRootFolder:function(){return a.ROOT==this.get("Type")}},{ATTRS:{NodeID:{value:null},Depth:{value:1},ParentID:{value:null},RemoteID:{value:null},RemoteKey:{value:null},Type:{value:a.FOLDER},Name:{value:"",setter:function(t){return e.Lang.trim(t)}},UrlName:{value:"",setter:function(t){return e.Lang.trim(t)}},UrlPath:{value:""},Url:{value:""},IDPath:{value:""},HLSetting:{value:l.IDC,validator:function(e){var t=!0;return(e=parseInt(e,10))!=l.IDC&&e!=l.GENERIC&&e!=l.USER_SET&&(t=!1),t}},HLImageID:{value:null},HLImageKey:{value:null},PasswordProtected:{value:!1},PrivacyLevel:{value:s.PUBLIC},NodePrivacyLevel:{value:s.PUBLIC},ParentPrivacyLevel:{value:s.PUBLIC},ViewPassword:{value:""},ViewPassHint:{value:""},DateAdded:{value:null},DateAddedDisplay:{value:""},DateModified:{value:null},DateModifiedDisplay:{value:""},IsOwner:{value:!1},Description:{value:""},Keywords:{value:""},SmugSearchable:{value:1},WorldSearchable:{value:1},ParentEffectiveSecurityType:{value:1},SecurityType:{value:1},EffectiveSecurityType:{value:1},GrantData:{valueFn:function(){return{Pending:[],Access:[]}}},ShowCoverImage:{value:!0}},RELATIONSHIPS:{Image:{type:"toOne",key:"HLImageID",relatedModel:e.SM.Models.Image,relatedKey:"ImageID"}},TYPES:a,HL_SETTINGS:l,PRIVACY_LEVELS:s,MAX_NODE_DEPTH:6,authenticate:function(a,l,s,r){(t=t||new e.SM.API).sendRequest({method:"rpc.node.auth",data:{NodeID:a,Password:l,Remember:s},freshRequest:!0,callback:{success:function(t){t.response.results.Node&&!e.Lang.isNull(t.response.results.Node.HasAccess)?r(t.response.results.Node.HasAccess):r(!1)},context:this},cfg:{method:"POST"}})}});exports.UserNode=r,exports.MAX_NODE_DEPTH=6,exports.PRIVACY_LEVELS=s,exports.HL_SETTINGS=l,exports.TYPES=a,e.namespace("SM.Models").UserNode=r;var n=r;exports.default=n}(),SM.currentModule=null}),"",{requires:["base","model","model-list","model-relate","sm-album-model","sm-api","sm-image-model","sm-model-list-sync-api","sm-model-sync-api"]});
YUI.add("sm-models-usernodelist",(function(e){SM.currentModule="sm-models-usernodelist";var exports={},d=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=babelHelpers.interopRequireDefault(d("sm-models-imagelist"));const s=e.Base.create("sm-models-usernodelist",e.ModelList,[e.SM.ModelListSyncAPI],{model:e.SM.Models.UserNode,comparator:null,apiEndpoint:"node",apiCategories:{forpagedesign:{method:"forpagedesign"},childfolders:{method:"childfolders",expanded:{HighlightImages:l.default}},childalbums:{method:"childalbums",expanded:{HighlightImages:l.default}},childnodes:{method:"childnodes",expanded:{HighlightImages:l.default}},recentalbumnodes:{method:"recentalbumnodes",expanded:{HighlightImages:l.default}}}},{});e.namespace("SM.Models").UserNodeList=s;var o=s;exports.default=o}(),SM.currentModule=null}),"",{requires:["base","model","model-list","model-relate","sm-album-model","sm-api","sm-image-model","sm-models-imagelist","sm-model-list-sync-api","sm-model-sync-api","sm-models-usernode"]});
YUI.add("sm-models-usernodepagedesign",(function(e){SM.currentModule="sm-models-usernodepagedesign";var d;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;d=e.Base.create("sm-models-usernodepagedesign",e.Model,[e.SM.ModelSyncAPI],{idAttribute:"NodeID",apiEndpoint:"nodepagedesign"},{ATTRS:{NodeID:{value:null},NickName:{value:""},PageDesignID:{value:0},PageDesignType:{value:0}},PAGE_DESIGN_TYPES:{DEFAULT:1,DESKTOP:1,MOBILE:2,SITE:3}}),e.namespace("SM.Models").UserNodePageDesign=d,SM.currentModule=null}),"",{requires:["base","model","sm-api","sm-model-sync-api"]});
YUI.add("sm-notifications-bootstrap",(function(o){SM.currentModule="sm-notifications-bootstrap";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";var o=SM.import("sm-notifications").NotificationsController,r=SM.import("sm-resource-core");SM.import("sm-page").on("page:init",(function(){new o(r.loadLocal("userProductNotifications")).render()}))}(),SM.currentModule=null}),"",{requires:["sm-notifications","sm-resource-core","sm-page"]});
YUI.add("sm-notifications",(function(e){SM.currentModule="sm-notifications";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomDomainAccountSettingsBanner=function(){return a.default.createElement("div",{className:"sm-nui sm-custom-domain-banner"},a.default.createElement("h2",{className:"sm-custom-domain-banner-title"},"Whoops! Something’s wrong with your Custom Domain"),a.default.createElement("p",{className:"sm-custom-domain-banner-message"},a.default.createElement(r.default,{href:"http://help.smugmug.com/customer/portal/articles/93340-setting-up-a-custom-hostname-domain"},"Check our help page")," for custom domain assistance."))},exports.NotificationsController=exports.NotificationAccessor=void 0;var e=t("lodash"),n=babelHelpers.interopRequireDefault(t("create-class")),i=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),o=babelHelpers.interopRequireDefault(t("react-dom")),s=t("react-transition-group"),r=babelHelpers.interopRequireDefault(t("sm-link")),l=babelHelpers.interopRequireDefault(t("sm-analytics")),c=babelHelpers.interopRequireDefault(t("sm-component-button")),u=babelHelpers.interopRequireDefault(t("sm-dom-core")),d=babelHelpers.interopRequireDefault(t("sm-component-icon")),p=babelHelpers.interopRequireDefault(t("sm-resource-notification")),m=t("sm-page-constants");const{main:f}=SM.env.host,E="https://".concat(f,"/app/source"),g="https://".concat(f,"/app/account#section=subscription");class _{constructor(e){this._validateUserProductNotification(e),this.userProductNotification=e}_validateUserProductNotification(e){if(!e)throw new Error("NotificationAccessor constructor requires userProductNotification param");if(!(e instanceof p.default))throw new Error("NotificationAccessor constructor requires userProductNotification param to be of type UserProductNotification");if(!e.hasExpansion("UserProductNotificationContextData"))throw new Error("NotificationAccessor constructor requires a UserProductNotification with UserProductNotificationContextData already expanded");if(!e.hasExpansion("ProductNotification"))throw new Error("NotificationAccessor constructor requires a UserProductNotification with ProductNotification already expanded")}_getProductNotification(){return this.productNotification||(this.productNotification=this.userProductNotification.getExpansion("ProductNotification")),this.productNotification}acknowledge(e){return this.userProductNotification.acknowledge(e)}getCategory(){return this._getProductNotification().get("Category")}getContextData(){return this.contextData||(this.contextData=this.userProductNotification.getExpansion("UserProductNotificationContextData").get("ContextData")),this.contextData||{}}getKey(){return this.userProductNotification.get("UserProductNotificationKey")}getMessage(){return this._getProductNotification().get("Message")}getName(){return this._getProductNotification().get("Name")}getTrackingName(){return O[this.getName()]||this.getName()}getPriority(){return this._getProductNotification().get("Priority")}getTitle(){return this._getProductNotification().get("Title")}getType(){return this._getProductNotification().get("Type")}isDismissible(){return this._getProductNotification().get("Dismissible")}}function N({notification:e,acknowledgeHandler:t}){return(0,a.useCallback)(()=>{t(e,!0)},[e,t])}function h(e){let{animate:t=!1,animationEffect:n="reveal",entries:i=[],className:o}=e,r=["sm-product-notifications-container"];o&&r.push(e.className);let l=i.length>0?i[0].reactElement:null,c=l?a.default.createElement("div",{className:r.join(" ")},l):a.default.createElement("div",{className:r.join(" ")});return t&&(c=a.default.createElement(s.TransitionGroup,null,a.default.createElement(s.CSSTransition,{appear:!0,classNames:n,timeout:500},c))),c}exports.NotificationAccessor=_,h.propTypes={entries:i.default.arrayOf(i.default.shape({reactElement:i.default.element.isRequired,notification:i.default.instanceOf(_).isRequired})),animate:i.default.bool,animationEffect:i.default.string,className:i.default.string};var A=exports.NotificationViewMixin={propTypes:{acknowledgeHandler:i.default.func.isRequired,logEvent:i.default.func.isRequired,notification:i.default.instanceOf(_).isRequired,trackerNiceName:i.default.string,owner:i.default.object.isRequired,viewer:i.default.object.isRequired},acknowledge:function(){return this.props.acknowledgeHandler(this.props.notification,!1)},dismiss:function(){return this.props.acknowledgeHandler(this.props.notification,!0)}};var C=exports.ExpiredCCViewMixin={propTypes:{assistantMessage:i.default.string,assistantTitle:i.default.string,dismissBtnLabel:i.default.string,ownerMessage:i.default.string,ownerTitle:i.default.string,updateBtnUrl:i.default.string,updateBtnLabel:i.default.string},getDefaultProps:function(){return{dismissBtnLabel:"I'll Do It Later",updateBtnUrl:"https://"+SM.env.host.ssl+"/settings/billing/subscription",updateBtnLabel:"Update Now"}},componentDidMount:function(){this._logView()},_dismissClickHandler:function(){return this.dismiss().then(this._logClose)},_forwardToSettings:function(){u.default.win.location.href=this.props.updateBtnUrl+"?NickName="+encodeURIComponent(this.props.owner.nickName)},_generateAnalyticsAttachedLink:function(e,t){return a.default.createElement("a",{href:t,onClick:this._linkClickHandler.bind(this,e,t)},e)},_linkClickHandler:function(e,t){this._logLink(e,t).then((function(){u.default.win.location.href=t}))},_renderMessage:function(){return this.props.viewer.isAssistant&&this.props.assistantMessage?this.props.assistantMessage:this.props.ownerMessage||this.props.notification.getMessage()},_renderTitle:function(){return this.props.viewer.isAssistant&&this.props.assistantTitle?this.props.assistantTitle:this.props.ownerTitle||this.props.notification.getTitle()},_updateClickHandler:function(e){(this.props.notification.isDismissible()?this.dismiss:this.acknowledge)().then(this._logUpdate.bind(this,e)).then(this._forwardToSettings)},_logClose:function(){return this.props.logEvent(this.props.notification,l.default.CATEGORY.ACCOUNT_EXPIRATION,"Close",{label:this.props.dismissBtnLabel})},_logLink:function(e,t){return this.props.logEvent(this.props.notification,l.default.CATEGORY.ACCOUNT_EXPIRATION,"Link Click",{label:e,property:t})},_logUpdate:function(e){return this.props.logEvent(this.props.notification,l.default.CATEGORY.ACCOUNT_EXPIRATION,"Update Payment Method",{label:e})},_logView:function(){return this.props.logEvent(this.props.notification,l.default.CATEGORY.ACCOUNT_EXPIRATION,"Expiration Notification",{label:this.props.notification.getTrackingName()},!0)}},T=exports.ExpiredCCBanner=(0,n.default)({mixins:[A,C],render:function(){return a.default.createElement("div",{className:"sm-nui sm-expired-cc-banner"},a.default.createElement("h2",{className:"sm-expired-cc-title"},this._renderTitle()),a.default.createElement("p",{className:"sm-expired-cc-message"},this._renderMessage()),this.props.notification.isDismissible()?a.default.createElement(c.default,{className:"sm-expired-cc-dismiss-button",size:"small",onClick:this._dismissClickHandler},this.props.dismissBtnLabel):null,this.props.viewer.isAssistant?null:a.default.createElement(c.default,{className:"sm-expired-cc-update-button",size:"small",onClick:this._updateClickHandler.bind(this,this.props.updateBtnLabel)},this.props.updateBtnLabel))}});function w(e){var t;let{notification:n}=e,i=N(e),o=new Date(1e3*(null===(t=n.getContextData())||void 0===t?void 0:t.TrialSuspendedEndAt));return a.default.createElement("div",{className:"sm-nui sm-notification-banner"},a.default.createElement("h2",{className:"sm-notification-banner-title sm-mb-2"},"Don't Forget Your RAW Files!"),a.default.createElement("p",{className:"sm-notification-banner-message"},"We’ll continue to preserve the RAW files you uploaded during your trial until ",o.toLocaleDateString(),". To continue securely storing and managing your RAW files, confirm your SmugMug Source subscription today!"),a.default.createElement(c.default,{size:"small",noChrome:!0,className:"sm-notification-banner-raw-suspended",onClick:i,"data-link-tracking-category":l.default.CATEGORY.RAW_NOTIFICATION,"data-link-tracking-action":l.default.ACTION.CANCELED,"data-link-tracking-label":"Trial Suspended Banner"},"Don't ask me again"),a.default.createElement(c.default,{size:"small",className:"sm-notification-banner-raw-suspended",href:E,"data-link-tracking-category":l.default.CATEGORY.RAW_NOTIFICATION,"data-link-tracking-action":l.default.ACTION.CLICKED,"data-link-tracking-label":"Trial Suspended Banner"},"Learn more"))}function R(e){let t=N(e);return a.default.createElement("div",{className:"sm-nui sm-notification-banner"},a.default.createElement("h2",{className:"sm-notification-banner-title sm-mb-2"},"We couldn't renew your SmugMug Source Subscription"),a.default.createElement("p",{className:"sm-notification-banner-message"},"We had to pause your ability to upload new RAW files, but don't worry, we're keeping your existing files safe for the time being."),a.default.createElement(c.default,{size:"small",noChrome:!0,className:"sm-notification-banner-raw-suspended",onClick:t,"data-link-tracking-category":l.default.CATEGORY.RAW_NOTIFICATION,"data-link-tracking-action":l.default.ACTION.CANCELED,"data-link-tracking-label":"Past Due Banner"},"Dismiss"),a.default.createElement(c.default,{size:"small",className:"sm-notification-banner-raw-suspended",href:g,"data-link-tracking-category":l.default.CATEGORY.RAW_NOTIFICATION,"data-link-tracking-action":l.default.ACTION.CLICKED,"data-link-tracking-label":"Past Due Banner"},"Update Billing Information"))}function S(){return a.default.createElement("div",{className:"sm-nui sm-notification-banner"},a.default.createElement("h2",{className:"sm-notification-banner-title sm-mb-2"},"Your Source subscription has been suspended"),a.default.createElement("p",{className:"sm-notification-banner-message"},"We have not been able to successfully charge your current payment method. We'll continue to store your RAW files for a short while longer, but we have suspended your ability to add or retrieve RAW files."),a.default.createElement(c.default,{size:"small",className:"sm-notification-banner-raw-suspended",href:g,"data-link-tracking-category":l.default.CATEGORY.RAW_NOTIFICATION,"data-link-tracking-action":l.default.ACTION.CLICKED,"data-link-tracking-label":"Suspended Banner"},"Update Billing Information"))}function I(){return a.default.createElement("div",{className:"sm-nui sm-notification-banner"},a.default.createElement("h2",{className:"sm-notification-banner-title sm-mb-2"},"We couldn't renew your SmugMug Source"),a.default.createElement("p",{className:"sm-notification-banner-message"},"Please update your billing information below."))}exports.BillingInfoBanner=(0,n.default)({mixins:[A,C],render:function(){return a.default.createElement("div",{className:"sm-nui sm-expired-cc-banner"},a.default.createElement("div",{className:"sm-expired-cc-message"},a.default.createElement("div",{style:{float:"left"}},a.default.createElement(d.default,{icon:"Warning"})),this._renderMessage()))}}),exports.ExpiredCCEvaluationPeriodBanner=(0,n.default)({render:function(){return a.default.createElement(T,babelHelpers.extends({},this.props,{ownerMessage:this._getOwnerMessage(),assistantMessage:this._getAssistantMessage()}))},_getAssistantMessage:function(){var e=this._getDaysUntilRenewalString();return"Once it’s updated, you can breathe easy for a few more years."+(e?" You’ve got "+e+" until renewal, but don’t worry, we won’t ever bill early.":"")},_getOwnerMessage:function(){var e=this._getDaysUntilRenewalString();return"Update in seconds and breathe easy for a few more years."+(e?" You’ve got "+e+" until renewal, but don’t worry, we won’t bill you early.":"")},_getDaysUntilRenewalString:function(){var e=this.props.notification.getContextData().DaysUntilRenewal;if(void 0===e)return"";switch(e){case 0:case 1:return"1 day";default:return e+" days"}}}),w.displayName="RawManagementSuspendedTrialNotification",R.displayName="RawManagementPastDueNotification",S.displayName="RawManagementSuspendedNotification",I.displayName="RawManagementPastDueOrSuspendedAccountSettings",exports.ExpiredCCAccountSettingsBanner=(0,n.default)({mixins:[A,C],getInitialState:function(){return{currentTab:null}},UNSAFE_componentWillMount:function(){this._updateCurrentTab(),u.default.win.addEventListener("hashchange",this._updateCurrentTab,!1)},componentWillUnmount:function(){u.default.win.removeEventListener("hashchange",this._updateCurrentTab,!1)},render:function(){var e=this._hasPaymentInfo(),t=e?"update your billing information":"setup a payment option",n=this._getNoPaymentInfoSentence({hasPaymentInfo:e}),i="subscription"===this.state.currentTab?t+" below":a.default.createElement("a",{onClick:this._updateClickHandler.bind(this,t)},t);return a.default.createElement("div",{className:"sm-nui sm-expired-cc-banner"},a.default.createElement("h2",{className:"sm-expired-cc-title"},this._getTitle({hasPaymentInfo:e})),this.props.viewer.isAssistant&&this.props.assistantMessage?a.default.createElement("p",{className:"sm-expired-cc-message"},this.props.assistantMessage):a.default.createElement("p",{className:"sm-expired-cc-message"},n,"It takes a few seconds to ",i,"."))},_extractTabNameFromHash:function(){var e,t=null;return u.default.win.location.hash&&"section"===(e=u.default.win.location.hash.substr(1).split("="))[0]&&(t=decodeURIComponent(e[1])),t},_extractTabNameFromCookie:function(){var e=null,t=/smcplasttab=(\w+)/g.exec(u.default.doc.cookie);return null!==t&&(e=t[1]),e},_updateCurrentTab:function(){var e=this._extractTabNameFromHash()||this._extractTabNameFromCookie();e&&this.setState({currentTab:e})},_hasPaymentInfo:function(){var e=this.props.notification.getContextData().HasPaymentInfo;return void 0!==e&&!!e},_getTitle:function({hasPaymentInfo:e}){return this.props.notification.getName()===D.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED?e?this._renderTitle():"Pssst! You do not have billing info on file.":this._renderTitle()},_getNoPaymentInfoSentence:function({hasPaymentInfo:e}){return this.props.notification.getName()===D.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED||e?"":"You do not have billing info on file. "}});var b=exports.ExpiredCCPage=(0,n.default)({mixins:[A,C],render:function(){var e=this._generateAnalyticsAttachedLink("Contact our Support Heroes",m.CONTACT_HELP_URL);return a.default.createElement("div",{className:"sm-expired-cc-page-content"},a.default.createElement("h1",{className:"sm-expired-cc-title sm-title-l"},this._renderTitle()),a.default.createElement("p",{className:"sm-expired-cc-message"},this._renderMessage()),a.default.createElement("div",{className:"sm-button-stacked-group"},this.props.viewer.isAssistant?null:a.default.createElement(c.default,{className:"sm-expired-cc-update-button",size:"large",skin:"accent",onClick:this._updateClickHandler.bind(this,this.props.updateBtnLabel)},this.props.updateBtnLabel),this.props.notification.isDismissible()?a.default.createElement(c.default,{className:"sm-expired-cc-dismiss-button",size:"large",onClick:this._pageDismissClickHandler},this.props.dismissBtnLabel):null),a.default.createElement("p",{className:"sm-expired-cc-page-fine-print"},"Question? Please give us the opportunity to help.",a.default.createElement("br",null),e,"."))},_forwardToOrigin:function(){var e=this.props.viewer.homepage;u.default.win.location.search.substr(1).split("&").some((function(t){var n=t.split("=");return"goTo"===n[0]&&(e=decodeURIComponent(n[1]),!0)})),u.default.win.location.href=e},_pageDismissClickHandler:function(){this._dismissClickHandler().then(this._forwardToOrigin)}});exports.ExpiredCCPastDuePage=(0,n.default)({render:function(){return a.default.createElement(b,babelHelpers.extends({},this.props,{ownerMessage:this._getOwnerMessage(),assistantMessage:this._getAssistantMessage()}))},_getAssistantMessage:function(){return"Don’t worry, we’ve kept your photos safe. Have the account owner update their billing information "+this._getDaysUntilSuspendString()+" to avoid any account hiccups."},_getOwnerMessage:function(){return"Don’t worry, we’ve kept your photos safe. Update your billing information "+this._getDaysUntilSuspendString()+" to avoid any account hiccups."},_getDaysUntilSuspendString:function(){var e=this.props.notification.getContextData().DaysUntilSuspend;if(void 0===e)return"";switch(e){case 0:case 1:return"today";default:return"in the next "+e+" days"}}}),exports.ServiceMigrationBanner=(0,n.default)({mixins:[A],render:function(){return a.default.createElement("div",{className:"sm-nui sm-migration-banner"},a.default.createElement("h2",{className:"sm-migration-title"},this._renderTitle()),a.default.createElement("p",{className:"sm-migration-message"},this._renderMessage()))},_renderMessage:function(){return this.props.notification.getContextData().InProgress?"We’ll be sure to email you with more details when everything is complete. For now, feel free to explore your account!":a.default.createElement("span",null,"Important note - We are currently experiencing a high volume of excited people attempting to transfer their photos! Never fear, our Heroes are flying as fast as possible to save the day. It may be a few hours, but your photos are safe and queued up. Refresh this page for your status at any time, and thank you for your patience!",a.default.createElement("br",null),a.default.createElement("br",null),"If you’re new to SmugMug, your account will automatically update to the appropriate plan as soon as your photo transfer starts. For more helpful information, please see our ",a.default.createElement("a",{href:"https://www.smugmug.com/phanfare"},"FAQ"),".")},_renderTitle:function(){return this.props.notification.getContextData().InProgress?"All systems go! Your photos are on their way.":"Your Phanfare photos will be on their way shortly."}});var M="ProductNotificationAccountSettingBanners",P="ProductNotificationBillingInfoBanners",v="ProductNotificationFullPageBody",y="ProductNotificationTopBanners",D={NAME_RENEWAL_ACTIVE_PERIOD_CC_EXPIRED:"RenewalActiveExpiredBillingInfo",NAME_RENEWAL_EVALUATION_PERIOD_CC_MISSING_EXPIRED:"RenewalEPMissingExpiredBillingInfo",NAME_RENEWAL_PAST_DUE_BILLING_ERROR:"RenewalPDBillingError",NAME_RENEWAL_PAST_DUE_BILLING_ERROR_GOTO:"RenewalPDBillingErrorGOTO",NAME_RENEWAL_SUSPENDED_PERIOD_BILLING_ERROR_GOTO:"RenewalSPBillingErrorGOTO",NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED:"RenewalAcctSettingsMissingExpiredBillingInfo",NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR:"RenewalAcctSettingsPDBillingError",NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR:"RenewalAcctSettingsSPBillingError",NAME_SERVICE_MIGRATION_STATUS:"ServiceMigrationStatus",NAME_CUSTOM_DOMAIN_ERROR:"CustomDomainError",NAME_RAW_MANAGEMENT_TRIAL_SUSPENDED:"RawManagementTrialSuspended",NAME_RAW_MANAGEMENT_PAST_DUE:"RawManagementPastDue",NAME_RAW_MANAGEMENT_SUSPENDED:"RawManagementSuspended",NAME_RAW_MANAGEMENT_ACCT_SETTINGS_PAST_DUE_OR_SUSPENDED:"RawManagementAcctSettingsPastDueOrSuspended"},O={};O[D.NAME_RENEWAL_ACTIVE_PERIOD_CC_EXPIRED]="Active Period Credit Card Expired",O[D.NAME_RENEWAL_EVALUATION_PERIOD_CC_MISSING_EXPIRED]="Evaluation Period Missing or Expired Billing Info",O[D.NAME_RENEWAL_PAST_DUE_BILLING_ERROR]="Past Due Billing Error",O[D.NAME_RENEWAL_PAST_DUE_BILLING_ERROR_GOTO]="Past Due Billing Error Page",O[D.NAME_RENEWAL_SUSPENDED_PERIOD_BILLING_ERROR_GOTO]="Renewal Suspended Billing Error Page",O[D.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED]="Evaluation Period Acct Settings Missing or Expired Billing Info",O[D.NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR]="Past Due Acct Settings Billing Error",O[D.NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR]="Renewal Suspended Acct Settings Billing Error",O[D.NAME_RAW_MANAGEMENT_TRIAL_SUSPENDED]="Don't Forget Your RAW Files!",O[D.NAME_RAW_MANAGEMENT_PAST_DUE]="We're unable to renew your SmugMug Source subscription",O[D.NAME_RAW_MANAGEMENT_SUSPENDED]="We're unable to renew your SmugMug Source subscription",O[D.NAME_RAW_MANAGEMENT_ACCT_SETTINGS_PAST_DUE_OR_SUSPENDED]="We couldn't renew your SmugMug Source";var k=[{name:M,selector:"#sm-control-panel-product-notification-banner",viewComponent:h,viewComponentProps:{animate:!0,animationEffect:"reveal"}},{name:P,selector:"#sm-billing-info-notification-banner",viewComponent:h},{name:v,selector:".sm-notification-page .sm-modal-content",viewComponent:h},{name:y,selector:".sm-notifications-container-top-banner",viewComponent:h,viewComponentProps:{animate:!0,animationEffect:"reveal"}}],L={},x=L[y]={};x[D.NAME_SERVICE_MIGRATION_STATUS]={viewComponent:exports.ServiceMigrationBanner},x[D.NAME_RENEWAL_ACTIVE_PERIOD_CC_EXPIRED]={viewComponent:exports.ExpiredCCBanner,viewComponentProps:{assistantMessage:"Help us give the account owner a heads up.",assistantTitle:"Oh No! This Credit Card’s Expired",updateBtnUrl:"https://"+SM.env.host.ssl+"/settings/billing/card"}},x[D.NAME_RENEWAL_EVALUATION_PERIOD_CC_MISSING_EXPIRED]={viewComponent:exports.ExpiredCCEvaluationPeriodBanner,viewComponentProps:{assistantTitle:"Pssst! The Billing Info Needs Fixing"}},x[D.NAME_RENEWAL_PAST_DUE_BILLING_ERROR]={viewComponent:exports.ExpiredCCBanner,viewComponentProps:{assistantMessage:"Please let the account owner know to update their info right away so we can keep your photos safe for years to come. ",assistantTitle:"Wait! We Couldn’t Renew This Account"}},x[D.NAME_RAW_MANAGEMENT_TRIAL_SUSPENDED]={viewComponent:w},x[D.NAME_RAW_MANAGEMENT_PAST_DUE]={viewComponent:R},x[D.NAME_RAW_MANAGEMENT_SUSPENDED]={viewComponent:S};var B=L[v]={};B[D.NAME_RENEWAL_PAST_DUE_BILLING_ERROR_GOTO]={viewComponent:exports.ExpiredCCPastDuePage,viewComponentProps:{assistantTitle:"We're Trying To Renew This Account",dismissBtnLabel:"Remind Me Later"}},B[D.NAME_RENEWAL_SUSPENDED_PERIOD_BILLING_ERROR_GOTO]={viewComponent:exports.ExpiredCCPage,viewComponentProps:{assistantMessage:"We’ve been trying to renew this account but keep getting billing errors. We had to make the site private, but don’t worry, we’re keeping your photos safe. Once the billing information is updated, everything will go back to normal."}};var U=L[M]={};U[D.NAME_RENEWAL_ACCT_SETTINGS_CC_MISSING_EXPIRED]={viewComponent:exports.ExpiredCCAccountSettingsBanner,viewComponentProps:{assistantMessage:"Help us give the account owner a heads up.",assistantTitle:"Pssst! The Billing Info Needs Fixing"}},U[D.NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR]={viewComponent:exports.ExpiredCCAccountSettingsBanner,viewComponentProps:{assistantMessage:"Please let the photographer know to update their info right away so we can keep your photos safe for years to come. ",assistantTitle:"Wait! We Couldn’t Renew This Account"}},U[D.NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR]={viewComponent:exports.ExpiredCCAccountSettingsBanner,viewComponentProps:{assistantMessage:"Please let the photographer know to update their info right away so we can keep your photos safe for years to come. ",assistantTitle:"Wait! We Couldn’t Renew This Account"}},U[D.NAME_CUSTOM_DOMAIN_ERROR]={viewComponent:exports.CustomDomainAccountSettingsBanner},U[D.NAME_RAW_MANAGEMENT_ACCT_SETTINGS_PAST_DUE_OR_SUSPENDED]={viewComponent:I};var W=L[P]={};W[D.NAME_RENEWAL_ACCT_SETTINGS_PAST_DUE_BILLING_ERROR]={viewComponent:exports.BillingInfoBanner,viewComponentProps:{ownerMessage:"Please update your credit card so we can renew your subscription. We'll charge your card once it's fixed."}},W[D.NAME_RENEWAL_ACCT_SETTINGS_SUSPENDED_BILLING_ERROR]={viewComponent:exports.BillingInfoBanner,viewComponentProps:{ownerMessage:"Please update your credit card so we can renew your subscription. We'll charge your card once it's fixed."}};exports.NotificationsController=class{constructor(e){this.initializeNotificationViewContainers(),this.initializeNotifications(e)}initializeNotificationViewContainers(){this.notificationViewContainers={},k.forEach((function(e){var t=u.default.querySelector(e.selector);t&&(this.notificationViewContainers[e.name]={config:e,domElement:t,entries:[],isMounted:!1})}),this)}initializeNotifications(t){Array.isArray(t)||(t=[t]),this.notifications=[],t.forEach((function(e){this.notifications.push(new _(e))}),this),this.notifications.forEach((function(t){var n,i;Object.keys(this.notificationViewContainers).forEach((function(o){i=this.notificationViewContainers[o],(n=this._getConfigForNotification(o,t))&&i.entries.push({reactElement:a.default.createElement(n.viewComponent,(0,e.assign)({acknowledgeHandler:this.handleAcknowledge.bind(this,i),key:t.getKey(),logEvent:this._logNotificationEvent.bind(this),notification:t,owner:SM.env.pageOwner,viewer:SM.env.loggedInUser},n.viewComponentProps)),notification:t})}),this)}),this)}render(){var e;for(e in this.notificationViewContainers)this._renderContainer(this.notificationViewContainers[e])}_renderContainer(t){t&&t.domElement&&(t.entries.length>0||t.isMounted)&&(o.default.render(a.default.createElement(t.config.viewComponent,(0,e.assign)({entries:t.entries},t.config.viewComponentProps)),t.domElement),t.isMounted=!0)}handleAcknowledge(e,t,n){return t.acknowledge(n).then(function(){n&&t.isDismissible()&&e&&(this._removeEntryFromContainer(e,t),this._renderContainer(e))}.bind(this),(function(e){throw e.error&&404===e.error.response.Code&&u.default.win.location.reload(),e}))}_logNotificationEvent(e,t,n,i,a){var o=this._createTrackerEvent(t,n,i||{});return o.systemAction=a||!1,o.addContext(l.default.CONTEXT.NOTIFICATION,{notification_name:e.getTrackingName(),is_dismissible:e.isDismissible()}),o.log()}_createTrackerEvent(e,t,n){return l.default.Tracker.createEvent(e,t,n||{})}_getConfigForNotification(e,t){var n=L[e];return n?n[t.getName()]:null}_removeEntryFromContainer(t,n){t&&(0,e.remove)(t.entries,(function(e){return e.notification===n}))}}}(),SM.currentModule=null}),"",{requires:["lodash","create-class","prop-types","react","react-dom","react-transition-group","sm-link","sm-analytics","sm-component-button","sm-dom-core","sm-component-icon","sm-resource-notification","sm-page-constants"]});
YUI.add("sm-os-based-share-icon",(function(e){SM.currentModule="sm-os-based-share-icon";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRelevantShareIconName=d,exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("react")),r=babelHelpers.interopRequireDefault(a("prop-types")),s=babelHelpers.interopRequireDefault(a("classnames")),t=babelHelpers.interopRequireDefault(a("sm-ua")),l=babelHelpers.interopRequireDefault(a("sm-icon"));const u=new t.default,n=u.isIOS,i=u.isMacOSX,o=u.isAndroid,c=u.isWindows;function d(){let e="Action";return n||i?e="ActionAlt":o?e="Share":c&&(e="ShareWindows"),e}function S(a){let{className:r,size:t}=a,u=(0,s.default)(r);return e.default.createElement(l.default,{className:u,name:d(),size:t})}S.SIZE_LARGE=l.default.SIZE_LARGE,S.SIZE_SMALL=l.default.SIZE_SMALL,S.displayName="OSBasedShareIcon",S.propTypes={className:r.default.string,size:r.default.oneOf([S.SIZE_LARGE,S.SIZE_SMALL])};var p=S;exports.default=p}(),SM.currentModule=null}),"",{requires:["classnames","react","prop-types","sm-icon","sm-ua"]});
YUI.add("sm-overlay",(function(e){SM.currentModule="sm-overlay";var l;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;l=e.Base.create("overlay",e.Panel,[],{DEF_PARENT_NODE:".sm-overlay-container",initializer:function(l){l||(l={}),l.close&&this.plug(e.SM.Plugin.OverlayClose,l),l.draggable&&this.plug(e.SM.Plugin.OverlayDrag,l),l.headerSeparator&&this.get("boundingBox").addClass(this.getClassName("header-separated")),(l.disableScrollbars||l.modal)&&(l.disableScrollbars,this.plug(e.SM.Plugin.OverlayScrollbars,l))},renderUI:function(){var l=this.get("title"),t=this.get("smbuttons"),a=null,r=null,s=0;if(l.length>0&&this.set("headerContent",'<h3 class="sm-heading">'+l+"</h3>"),t.length>0){for(a=document.createDocumentFragment(),s=0;s<t.length;s++)(r=t[s]).label&&r.value&&new e.SM.Button({label:r.label,value:r.value,skin:r.skin?r.skin:e.SM.Button.SKINS.LIGHT}).render(a);this.setStdModContent(e.WidgetStdMod.FOOTER,a,e.WidgetStdMod.AFTER)}else this.getStdModNode(e.WidgetStdMod.FOOTER)||this.setStdModContent(e.WidgetStdMod.FOOTER,"")}},{CSS_PREFIX:"sm-overlay",ATTRS:{title:{value:""},smbuttons:{value:[]},buttons:{value:{}},close:{value:!1},draggable:{value:!1},headerSeparator:{value:!1},disableScrollbars:{value:!1},constrain:{value:!0}}}),e.namespace("SM").Overlay=l,SM.currentModule=null}),"",{requires:["overlay","panel","sm-button","sm-overlayclose","sm-overlaydrag","sm-overlayscrollbars","sm-templates-button"]});
YUI.add("sm-overlayclose",(function(e){SM.currentModule="sm-overlayclose";var n,o;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;n=e.Node,o=e.Base.create("overlayclose",e.Plugin.Base,[],{initializer:function(e){this.afterHostEvent("render",this._render)},destructor:function(){var e=this.get("closeNode");e&&e.destroy()},_render:function(){var e=this.get("host").get("boundingBox"),n=this.get("closeNode");e.appendChild(n),this._bind()},_bind:function(){var e=this.get("closeNode");this.publish("close",{defaultFn:this._defCloseFn}),e.on("click",(function(e){e.halt(),this.fire("close")}),this)},_defCloseFn:function(e){this.get("host").hide()}},{NS:"close",ATTRS:{closeNode:{valueFn:function(){return n.create('<span class="sm-icon sm-icon-close" title="Close"></span>')}}}}),e.namespace("SM").OverlayClosePlugin=o,e.namespace("SM.Plugin").OverlayClose=o,e.namespace("SM.Plugin").EVENT_CLOSE="close",SM.currentModule=null}),"",{requires:["node","overlay","plugin"]});
YUI.add("sm-overlaydrag",(function(e){SM.currentModule="sm-overlaydrag";var d,n;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;d=e.Node,n=e.Base.create("overlaydrag",e.Plugin.Base,[],{_drag:null,initializer:function(e){this.afterHostEvent("render",this._render)},destructor:function(){this.get("host").get("boundingBox");var e=this.get("handleNode");e&&e.destroy(),this._drag&&this._drag.destroy()},_render:function(){var e=this.get("host").get("boundingBox"),d=this.get("handleNode");e.appendChild(d),this._bind()},_bind:function(){var d=this.get("host"),n=d.get("boundingBox"),t=this.get("handleNode"),r=d.getStdModNode(e.WidgetStdMod.HEADER)?d.getStdModNode(e.WidgetStdMod.HEADER).one("h1"):null,a=[t];null!==r&&a.push(r),e.each(a,(function(d){d instanceof e.Node&&d.addClass("yui3-dd-handle")})),this._drag=new e.DD.Drag({node:n,handles:a}),this._drag.addTarget(this)}},{NAME:"overlaydrag",NS:"drag",ATTRS:{handleNode:{valueFn:function(){return d.create('<span class="sm-icon sm-icon-dragwide" title="Drag"></span>')}}}}),e.namespace("SM").OverlayDragPlugin=n,e.namespace("SM.Plugin").OverlayDrag=n,SM.currentModule=null}),"",{requires:["dd-plugin","node","overlay","plugin"]});
YUI.add("sm-overlayscrollbars",(function(l){SM.currentModule="sm-overlayscrollbars";var r,s;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;r="overlayscrollbars",s=l.Base.create(r,l.Plugin.Base,[],{initializer:function(){this.beforeHostMethod("show",this._removeScrollbars),this.beforeHostMethod("hide",this._addScrollbars)},_removeScrollbars:function(){var r=this.get("host").get("disableScrollbars"),s=null;!0===r?s="sm-noscroll":"x"==r?s="sm-noscroll-x":"y"==r&&(s="sm-noscroll-y"),null!==s&&(l.one("body").addClass(s),this.set("scrollbarClass",s))},_addScrollbars:function(){var r=this.get("scrollbarClass");l.one("body").removeClass(r)}},{NS:"overlayscrollbars",ATTRS:{scrollbarClass:{value:null}}}),l.namespace("SM.Plugin").OverlayScrollbars=s,SM.currentModule=null}),"",{requires:["node","overlay","plugin"]});
YUI.add("sm-page-action-types",(function(E){SM.currentModule="sm-page-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAGE_SET_LOGGED_IN_USER_PERMISSIONS=exports.PAGE_SET_OWNER=exports.PAGE_SET_LOGGED_IN_USER=exports.PAGE_SET_IS_SMUGMUG_WEBVIEW=void 0;exports.PAGE_SET_IS_SMUGMUG_WEBVIEW="PAGE_SET_IS_SMUGMUG_WEBVIEW";exports.PAGE_SET_LOGGED_IN_USER="PAGE_SET_LOGGED_IN_USER";exports.PAGE_SET_OWNER="PAGE_SET_OWNER";exports.PAGE_SET_LOGGED_IN_USER_PERMISSIONS="PAGE_SET_LOGGED_IN_USER_PERMISSIONS"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-page-actions",(function(e){SM.currentModule="sm-page-actions";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setIsSmugMugWebview=function(t){return{type:e.PAGE_SET_IS_SMUGMUG_WEBVIEW,isSmugMugWebView:t}},exports.setLoggedInUser=function(t){return{type:e.PAGE_SET_LOGGED_IN_USER,uri:t}},exports.setOwner=function(t){return{type:e.PAGE_SET_OWNER,uri:t}},exports.setLoggedInUserPermissions=function(t){return{type:e.PAGE_SET_LOGGED_IN_USER_PERMISSIONS,uri:t}};const e=SM.import("sm-page-action-types")}(),SM.currentModule=null}),"",{requires:["sm-page-action-types"]});
YUI.add("sm-page-background",(function(e){SM.currentModule="sm-page-background";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var a=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(a("react")),t=babelHelpers.interopRequireDefault(a("react-dom")),o=babelHelpers.interopRequireDefault(a("sm-dom-core")),r=babelHelpers.interopRequireDefault(a("sm-page")),n=babelHelpers.interopRequireWildcard(a("sm-video-player")),s=babelHelpers.interopRequireDefault(a("sm-image-model")),d=babelHelpers.interopRequireDefault(a("sm-models-imagelist")),l=babelHelpers.interopRequireDefault(a("sm-models-galleryimagelist"));let u,m,c,g;e.namespace("SM.Page").background={render:function(e){if(this.config=e,r.default.background.destroy(),e)switch(e.BackgroundType){case"photo":this.renderImage(e);break;case"slideshow":this.renderSlideshow(e);break;case"video":this.renderVideo(e)}},destroy:function(){u&&(u.destroy(),u=null),m&&(m.destroy(),m=null),g&&(t.default.unmountComponentAtNode(g.getDOMNode()),g.remove(!0),g=null),c&&(c.remove(!0),c=null),e.one("body").removeClass("sm-page-hasbackground")},renderImage:function(a){a.ImageData&&(e.one("body").addClass("sm-page-hasbackground"),m=new s.default(a.ImageData),u=new e.SM.Views.Tile({clickable:!1,container:this._getContainer(),imageSize:"cover",resource:m,verticallyCenter:"center"===a.VerticalAlign}),u.render(),this._renderMask(a))},renderSlideshow:function(a){var i={autoStart:!!e.Lang.isUndefined(a.AutoStart)||a.AutoStart,clickable:!e.Lang.isUndefined(a.Clickable)&&a.Clickable,contentAwareHeight:!1,cover:!!e.Lang.isUndefined(a.Cover)||a.Cover,heightSource:"inline",randomize:!e.Lang.isUndefined(a.Randomize)&&a.Randomize,showCaptions:!e.Lang.isUndefined(a.ShowCaptions)&&a.ShowCaptions,showFullscreen:!1,showNavigation:!e.Lang.isUndefined(a.ShowNavigation)&&a.ShowNavigation,showPlayButton:!e.Lang.isUndefined(a.PlayButton)&&a.PlayButton,showSpeed:!1,showThumbnails:!1,speed:a.Speed,splashDelay:a.SplashDelay,splashImageID:a.SplashImageID,transition:a.Transition,transitionSpeed:a.TransitionSpeed};if(a.SplashImageData&&(i.splashImage=new s.default(a.SplashImageData)),"selectedImages"===a.SlideshowSource){if(!a.ImageListData)return;i.randomize=!!a.Randomize,m=new d.default,m.add(a.ImageListData),m.size()&&(i.modelList=m,this._showSlideshow(i,a))}else{let e;switch(a.SlideshowSource){case"album":if(!a.AlbumID||!a.AlbumKey)return;m=new l.default,e={albumId:a.AlbumID,albumKey:a.AlbumKey};break;case"keyword":if(!a.Keywords)return;m=new l.default,e={keywords:a.Keywords,nickName:r.default.owner.nickName};break;case"recent":i.randomize=!!a.Randomize,m=new d.default,e={NickName:r.default.owner.nickName,Limit:50};break;default:return}"album"!==a.SlideshowSource&&"keyword"!==a.SlideshowSource||(Object.assign(e,{returnModelList:!0,idCopy:!0,PageNumber:1,PageSize:10}),a.Randomize&&(e.randomize=Date.now())),m.load({apiCategory:a.SlideshowSource,data:e,prefetchNext:!0,prefetchPrev:!0},e=>{!e&&m.size()&&(i.modelList=m,this._showSlideshow(i,a))})}},_showSlideshow:function(a,i){var t=this._getContainer();u=new e.SM.Views.Slideshow(a),a.modelList instanceof l.default&&u.plug(e.SM.SlideshowGalleryPlugin),t.setHTML(u.get("container")),this._renderMask(i),e.one("body").addClass("sm-page-hasbackground"),u.render()},renderVideo:function(a){if(a.VideoData){let r,d,l,u,c,g=this._getContainer().getDOMNode(),p=!!a.Loop||void 0;e.one("body").addClass("sm-page-hasbackground sm-page-hasbackground-video"),m=new s.default(a.VideoData),r=m.getLargestVideoSizeForContainer(Math.min(Math.round(o.default.doc.body.clientWidth*o.default.win.devicePixelRatio),1280)),d=m.get("Sizes"),l=d[r],u=l.width/l.height,c=n.HLS_SUPPORTED&&d.QTStream&&d.QTStream.usable?{type:n.MIME_TYPES.HLS,url:d.QTStream.url}:{type:n.MIME_TYPES.MP4,url:l.url},t.default.render(i.default.createElement(n.default,{autoPlay:!0,className:this._getVideoAspectRatioClassName(u),loop:p,muted:!0,onHLSManifestParsed:this._capHLSLevels,playsInline:!0,preload:"auto",sources:c,stretching:n.STRETCHING_TYPES.FILL,onError:()=>{t.default.unmountComponentAtNode(g),this.renderImage(a)}}),g),this._renderMask(a)}},_capHLSLevels:function(e,a,i){e.some((e,t)=>{if(960===e.width)return a.autoLevelCapping=t,i.play(),!0})},_getVideoAspectRatioClassName:function(e){var a="sm-video-";return e<1?a+="portrait":1===e?a+="square":e<=1.333?a+="traditional":e<=1.778?a+="widescreen":e>=2.35&&(a+="cinematic"),a},_renderMask:function(a){if(a.Mask){var i=this._getContainer(),t="sm-page-background-mask",o=[t];a.MaskColor&&o.push(t+"-color-"+a.MaskColor),a.MaskOpacity&&o.push(t+"-opacity-"+a.MaskOpacity),c=e.Node.create('<div class="'+o.join(" ")+'"></div>'),i.append(c)}},_getContainer:function(){if(!g){var a=e.one("body");g=e.Node.create('<div class="sm-page-background"></div>'),g.generateID(),a.prepend(g)}return g}}}(),SM.currentModule=null}),"",{requires:["node","promise","sm-dom-core","sm-tile-view","sm-album-model","sm-image-model","sm-models-galleryimagelist","sm-models-imagelist","sm-slideshow-view","sm-slideshow-gallery-plugin"]});
YUI.add("sm-page-confirm",(function(e){SM.currentModule="sm-page-confirm";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e.namespace("SM.Page").confirm=e.SM.Panel.confirm,SM.currentModule=null}),"",{requires:["sm-page","sm-panel-confirm"]});
YUI.add("sm-page-constants",(function(E){SM.currentModule="sm-page-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RIGHT_CLICK_MESSAGE_DEFAULT=exports.USER_FEATURES=exports.USER_FEATURE_WATERMARK=exports.USER_FEATURE_VIDEO=exports.USER_FEATURE_UPLOAD=exports.USER_FEATURE_THEMES=exports.USER_FEATURE_SHARPENING=exports.USER_FEATURE_SALES=exports.USER_FEATURE_RCP=exports.USER_FEATURE_PRINTMARK=exports.USER_FEATURE_PACKAGING=exports.USER_FEATURE_MULTIPLE_PRICELISTS=exports.USER_FEATURE_GRANT_ACCESS=exports.USER_FEATURE_DIRECTORY=exports.USER_FEATURE_CUSTOMIZE=exports.USER_FEATURE_CSS=exports.USER_FEATURE_BASIC_CUSTOMIZE=exports.USER_FEATURE_BACKPRINTING=exports.USER_FEATURE_ALBUMS=exports.PERMISSIONS_API_URI=exports.FEATURE_FLAGS_API_URI=exports.CONTACT_HELP_URL=exports.ORIENTATION_PORTRAIT=exports.ORIENTATION_LANDSCAPE=exports.BREAKPOINT_EXTRA_LARGE_DEVICE=exports.BREAKPOINT_LARGE_DEVICE=exports.BREAKPOINT_MEDIUM_DEVICE=exports.BREAKPOINT_SMALL_DEVICE=exports.BREAKPOINT_EXTRA_SMALL_DEVICE=void 0;exports.BREAKPOINT_EXTRA_SMALL_DEVICE=320;exports.BREAKPOINT_SMALL_DEVICE=736;exports.BREAKPOINT_MEDIUM_DEVICE=960;exports.BREAKPOINT_LARGE_DEVICE=1024;exports.BREAKPOINT_EXTRA_LARGE_DEVICE=1200;exports.ORIENTATION_LANDSCAPE="landscape";exports.ORIENTATION_PORTRAIT="portrait";exports.CONTACT_HELP_URL="https://www.smugmug.com/help/contact";exports.FEATURE_FLAGS_API_URI="/api/v2/featureflags";exports.PERMISSIONS_API_URI="/api/v2/permissions";exports.USER_FEATURE_ALBUMS="Albums";exports.USER_FEATURE_BACKPRINTING="Backprinting";exports.USER_FEATURE_BASIC_CUSTOMIZE="BasicCustomization";exports.USER_FEATURE_CSS="CSS";exports.USER_FEATURE_CUSTOMIZE="SiteCustomization";exports.USER_FEATURE_DIRECTORY="Directory";exports.USER_FEATURE_GRANT_ACCESS="GrantAccess";exports.USER_FEATURE_MULTIPLE_PRICELISTS="MultiplePricelists";exports.USER_FEATURE_PACKAGING="CustomPackaging";exports.USER_FEATURE_PRINTMARK="Printmarks";exports.USER_FEATURE_RCP="RightClickProtection";exports.USER_FEATURE_SALES="Sales";exports.USER_FEATURE_SHARPENING="Sharpening";exports.USER_FEATURE_THEMES="Themes";exports.USER_FEATURE_UPLOAD="Upload";exports.USER_FEATURE_VIDEO="Video";exports.USER_FEATURE_WATERMARK="Watermarks";const E=new Set("Albums","Backprinting","BasicCustomization","CSS","SiteCustomization","Directory","GrantAccess","MultiplePricelists","CustomPackaging","Printmarks","RightClickProtection","Sales","Sharpening","Themes","Upload","Video","Watermarks");exports.USER_FEATURES=E;exports.RIGHT_CLICK_MESSAGE_DEFAULT="These photos are copyrighted by their respective owners. All rights reserved. Unauthorized use prohibited."}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-page-contact",(function(e){SM.currentModule="sm-page-contact";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var n=e.SM.Page,o=e.one(".sm-footer-navitem-contact");e.namespace("SM.Page").contact=module.exports={addContactOverlay:function(){if(!n.dialogs.contact)return new e.Promise((function(o){e.use("sm-procontact-overlay",(function(){n.dialogs.contact={dialogClass:e.SM.ProContactOverlay,config:{proNickname:n.owner.nickName,displayName:n.owner.profileName||n.owner.siteName||n.owner.nickName,visible:!1}},o()}))}))}},o&&!n.isOwnerLoggedIn()&&n.owner&&(o.one(">a").setAttribute("href","#"),o.on("click",(function(o){o.preventDefault(),e.when(e.SM.Page.contact.addContactOverlay()).then((function(){n.showDialog("contact")}))})))}(),SM.currentModule=null}),"",{requires:["promise","sm-page-nodepage"]});
YUI.add("sm-page-cookiemonster",(function(e){SM.currentModule="sm-page-cookiemonster";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";e.SM.Page.on("page:init",(function(o){if(!0===o.cookieMonster&&o.cookieMonsterHost){var r=SM.env.host,n="https://"+r.main;e.one("body").append('<iframe class="sm-cookiemonster" src="'+n+"/include/js/cookiemonster.mg?returnTo="+r.http+o.cookieMonsterHost+'" frameborder="0" height="0" width="0" scrolling="no"></iframe>')}}))}(),SM.currentModule=null}),"",{requires:["sm-page"]});
YUI.add("sm-page-feature-flag-constants",(function(e){SM.currentModule="sm-page-feature-flag-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EXPERIMENT_HIDE_CW_SUCCESS=exports.EXPERIMENT_MONTHLY_FIRST_PRICING=exports.SHOW_TEMPLATE_PREVIEW_BUTTON=exports.REMOVE_HEADER_LOGIN=exports.EXPERIMENT_MOBILE_ORGANIZE_PREVIEW=exports.EXPERIMENT_ADD_INFO_DESIGN=exports.ENABLE_PHOTO_STORIES=exports.ENABLE_CHAT_BUBBLE=exports.WHCC_CARD_EDITOR_INTEGRATION=exports.WEB_EXPERIMENT=exports.PAYPAL_CHECKOUT=exports.SENTRY_SAMPLE_RATE=exports.COVID_19_LAB_ADJUSTMENT_DAYS=void 0;exports.COVID_19_LAB_ADJUSTMENT_DAYS="web.covid-19-lab-adjustment-days";exports.SENTRY_SAMPLE_RATE="web.sentry-javascript-sample-rate";exports.PAYPAL_CHECKOUT="web.paypal-checkout";exports.WEB_EXPERIMENT="web.experiment";exports.WHCC_CARD_EDITOR_INTEGRATION="web.whcc-card-editor-integration";exports.ENABLE_CHAT_BUBBLE="web.enable-livechat-bubble";exports.ENABLE_PHOTO_STORIES="web.enable-photo-stories";exports.EXPERIMENT_ADD_INFO_DESIGN="web.experiment.content-wizard.add-info.design-adjustments";exports.EXPERIMENT_MOBILE_ORGANIZE_PREVIEW="web.experiment.mobile-web-organizer-info";exports.REMOVE_HEADER_LOGIN="web.remove-header-login";exports.SHOW_TEMPLATE_PREVIEW_BUTTON="web.experiment.show-template-preview-button";exports.EXPERIMENT_MONTHLY_FIRST_PRICING="web.experiment.monthly-first-pricing";exports.EXPERIMENT_HIDE_CW_SUCCESS="web.experiment.desktop-hide-success"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-page-feeds",(function(e){SM.currentModule="sm-page-feeds";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";var n=e.SM.Page,t=e.one(".sm-footer-navitem-feeds").appendChild(e.SM.Templates.button({icon:"RSS",svg:"RSS",noChrome:!0,size:"small"}));n.on("page:init",(function(n){var u=n.feedsConfig;t&&u&&u.length&&t.plug(e.SM.Plugin.Menu,{items:u})}))}(),SM.currentModule=null}),"",{requires:["sm-page","sm-templates-button"]});
YUI.add("sm-page-help-action-types",(function(T){SM.currentModule="sm-page-help-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SUPPORT_SET_DATA=exports.SUPPORT_INITIALIZE_CONTEXTUAL_HELP=exports.SUPPORT_BUTTON_CLICK=exports.SUPPORT_DISABLE_CONTEXTUAL_HELP=void 0;exports.SUPPORT_DISABLE_CONTEXTUAL_HELP="SUPPORT_DISABLE_CONTEXTUAL_HELP";exports.SUPPORT_BUTTON_CLICK="SUPPORT_BUTTON_CLICK";exports.SUPPORT_INITIALIZE_CONTEXTUAL_HELP="SUPPORT_INITIALIZE_CONTEXTUAL_HELP";exports.SUPPORT_SET_DATA="SUPPORT_SET_DATA"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-page-help-actions",(function(e){SM.currentModule="sm-page-help-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disableContextualHelp=function(){return{type:n.default.SUPPORT_DISABLE_CONTEXTUAL_HELP}},exports.helpClick=function(t=!1,{nodeId:u,nodeType:i}={}){return o=>{let r={type:n.default.SUPPORT_BUTTON_CLICK};t&&(r._internal={analytics:{action:e.default.ACTION.NAVIGATION_CLICK,category:e.default.CATEGORY.GLOBAL_NAV,label:"Support"}},u&&i&&(r._internal.analytics.contexts={[e.default.CONTEXT.NODE]:{node_id:u,node_type:l.NODE_TYPE_TRACKING_VALUES[i]}})),o(r),a.default.toggle()}},exports.initializeSupport=function(e={}){return t=>{t(u(e)),a.default.initialize({contextualHelpEnabled:e.contextual,liveChatEnabled:e.liveChat&&e.liveChat.load})}},exports.setSupportData=u;var e=babelHelpers.interopRequireDefault(t("sm-analytics")),a=babelHelpers.interopRequireDefault(t("sm-contextual-help")),l=t("sm-page-nodepage-constants"),n=babelHelpers.interopRequireDefault(t("sm-page-help-action-types"));function u(e={}){return{type:n.default.SUPPORT_SET_DATA,helpConfig:e}}}(),SM.currentModule=null}),"",{requires:["sm-analytics","sm-contextual-help","sm-page-help-action-types","sm-page-nodepage-constants"]});
YUI.add("sm-page-help-reducers",(function(e){SM.currentModule="sm-page-help-reducers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UI=function(e={},r){let{help:u={}}=e;return{...e,help:t(u,r)}};const e=SM.import("sm-page-help-action-types"),t=(t={},r)=>{let{liveChat:u={}}=t;switch(r.type){case e.SUPPORT_DISABLE_CONTEXTUAL_HELP:return{...t,help:{contextual:!1,liveChat:u}};case e.SUPPORT_SET_DATA:return{...t,...r.helpConfig};default:return t}}}(),SM.currentModule=null}),"",{requires:["sm-page-help-action-types"]});
YUI.add("sm-page-help-selectors",(function(e){SM.currentModule="sm-page-help-selectors";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHelpData=function(e={}){let{ui:{help:{contextual:l,liveChat:{closureReason:u,enabled:r}={},urlSupport:t=""}={}}={}}=e;return{contextualHelpEnabled:l,liveChatClosureReason:u,liveChatEnabled:r,urlSupport:t}}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-page-help",(function(e){SM.currentModule="sm-page-help";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";const e=SM.import("sm-page"),t=SM.import("sm-redux-store"),{disableContextualHelp:s,initializeSupport:p,setSupportData:r}=SM.import("sm-page-help-actions"),{viewportIsLessThanMedium:o}=SM.import("sm-page-selectors");e.on("page:init",e=>{e.help&&(o(t.getState())?t.dispatch(s()):t.dispatch(p(e.help)))})}(),SM.currentModule=null}),"",{requires:["sm-page","sm-page-help-actions","sm-page-selectors","sm-redux-store"]});
YUI.add("sm-page-layout",(function(e){SM.currentModule="sm-page-layout";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";var t=e.SM.Page;e.namespace("SM.Page").layout={pinnedRegionNode:null,initPinnedRegion:function(){t.layout.pinnedRegionNode&&t.layout.unpinRegion(t.layout.pinnedRegionNode),t.layout.pinnedRegionNode=null,t.layout.fillHeight=null;var i,o,n=e.one(".sm-page-layout[data-pinned-region]");n&&(i=n.getData("pinned-region").toLowerCase())&&(o="header"===i||"footer"===i?n.one("> .sm-page-layout-region-"+i):n.one("> .sm-page-layout-region > .sm-page-layout-region-"+i))&&(t.layout.pinnedRegionNode=o,t.layout.fillHeight=n.hasClass("sm-page-layout-fillheight"),t.layout.pinRegion(o))},pinRegion:function(e){e.addClass("sm-page-layout-region-pinned")},unpinRegion:function(e){e&&e.removeClass("sm-page-layout-region-pinned")},stopPinning:function(){t.layout.unpinRegion(t.layout.pinnedRegionNode),t.layout.pinnedRegionNode=null,t.layout.fillHeight=null},initFillHeight:function(){var t=this,i=e.all(".sm-page-layout.sm-page-layout-fillheight");i.size()&&(this._layoutNodes=i,this._layoutRegions={},i.each((function(e){t._setFillHeights(e)})),this._attachWindowResize())},_attachWindowResize:function(){this._detachWindowResize(),this._resizeHandler=e.after("windowresize",this._afterWindowResize,null,this)},_detachWindowResize:function(){this._resizeHandler&&this._resizeHandler.detach(),this._resizeHandler=null},_getLayoutRegions:function(e){var t,i;return i=e.generateID(),(t=this._layoutRegions[i])||(t=this._layoutRegions[i]={top:e.one("> .sm-page-layout-region > .sm-page-layout-region-top"),body:e.one("> .sm-page-layout-region-body"),left:e.one("> .sm-page-layout-region-body > .sm-page-layout-region-left"),center:e.one("> .sm-page-layout-region-body > .sm-page-layout-region-center"),right:e.one("> .sm-page-layout-region-body > .sm-page-layout-region-right"),bottom:e.one("> .sm-page-layout-region > .sm-page-layout-region-bottom")}),t},_getMinHeight:function(t,i){var o=e.DOM.winHeight(),n=t.getY(),a=i.top?i.top.get("offsetHeight"):0,s=i.left?i.left.get("offsetHeight"):0,l=i.center?i.center.get("offsetHeight"):0,g=i.right?i.right.get("offsetHeight"):0,r=i.bottom?i.bottom.get("offsetHeight"):0,h=Math.max(s,l,g),u=o-n-a-h-r;u-=parseInt(t.getStyle("marginTop"),10),u-=parseInt(t.getStyle("marginBottom"),10);var d=e.one("#sm-page-footer, .sm-page-powered-by");return d&&(u-=d.get("offsetHeight"),u-=parseInt(d.getStyle("marginTop"),10),u-=parseInt(d.getStyle("marginBottom"),10)),u>0?h+u:h},_resetFillHeights:function(e){var t=this._getLayoutRegions(e),i={minHeight:0};t.center&&t.center.setStyles(i),i.bottom="auto",t.left&&t.left.setStyles(i),t.right&&t.right.setStyles(i)},_setFillHeights:function(e){var t=this._getLayoutRegions(e),i={minHeight:this._getMinHeight(e,t)+"px",visibility:"visible"};t.center&&t.center.setStyles(i),i.bottom="0",t.left&&t.left.setStyles(i),t.right&&t.right.setStyles(i)},_afterWindowResize:function(){var t=this;e.DOM.winWidth()>e.SM.Page.responsiveDesign.mobileMaxWidth?this._layoutNodes&&(this._layoutNodes.each((function(e){t._resetFillHeights(e)})),this._layoutNodes.each((function(e){t._setFillHeights(e)}))):(this.stopFillHeight(),this.attachWindowResizeForReattach())},attachWindowResizeForReattach:function(){this._detachWindowResize(),this._resizeHandler=e.after("windowresize",this._afterWindowResizeForReattach,null,this)},_afterWindowResizeForReattach:function(){e.DOM.winWidth()>e.SM.Page.responsiveDesign.mobileMaxWidth&&(this._detachWindowResize(),this.initPinnedRegion(),this.initFillHeight(),this._afterWindowResize())},stopFillHeight:function(){var e=this;this._detachWindowResize(),this._layoutNodes&&this._layoutNodes.each((function(t){e._resetFillHeights(t)})),this._layoutNodes=null,this._layoutRegions=null}},e.once("page:ready",(function(){e.DOM.winWidth()>e.SM.Page.responsiveDesign.mobileMaxWidth?(t.layout.initPinnedRegion(),t.layout.initFillHeight()):t.layout.attachWindowResizeForReattach(),e.one("body").addClass("sm-page-initialized")}))}(),SM.currentModule=null}),"",{requires:["event-resize","node","sm-dom","sm-scrollinfo"]});
YUI.add("sm-page-live-chat",(function(e){SM.currentModule="sm-page-live-chat";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var e=babelHelpers.interopRequireDefault(t("lodash")),a=babelHelpers.interopRequireDefault(t("create-class")),l=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("sm-analytics")),s=babelHelpers.interopRequireDefault(t("sm-contextual-help")),u=babelHelpers.interopRequireDefault(t("sm-live-chat")),i=babelHelpers.interopRequireWildcard(t("sm-modal")),o=babelHelpers.interopRequireDefault(t("sm-page")),d=babelHelpers.interopRequireDefault(t("sm-component-panel")),c=babelHelpers.interopRequireDefault(t("sm-redux-store")),f=t("sm-page-constants"),p=t("sm-page-help-selectors"),m=t("sm-page-selectors"),h=t("sm-page-feature-flag-constants");const g=SM.env.featureFlags[h.ENABLE_CHAT_BUBBLE];var b=(0,a.default)({propTypes:{onClose:l.default.func,reason:l.default.string.isRequired},render:function(){let e=this.props.reason;return n.default.createElement(i.default,{closeOnEscape:!1},n.default.createElement(d.default,{width:515},n.default.createElement(d.default.Header,null,n.default.createElement(d.default.CloseButton,{onClick:this.props.onClose})),n.default.createElement(d.default.Body,null,n.default.createElement("div",{className:"sm-panel-content-margin"},n.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.charAt(e.length-1).match(/[.!?]/)?this.props.reason:this.props.reason+"."}}),n.default.createElement("a",{href:f.CONTACT_HELP_URL,target:"_blank"}," Contact us by email any time.")))))}});__lc.visitor={name:o.default.user.displayName,email:o.default.user.email},e.default.assign(u.default,{hasMenu:!0,isTrial:((0,m.getLoggedInUser)(c.default.getState())||{}).isTrial,nickName:o.default.user.nickName,sslHost:SM.env.host.ssl,userHomepage:o.default.user.homepage,disableMenuItem:function(){s.default.chatHide()},enableMenuItem:function(){s.default.chatShow()},heroesAvailable:function(){return LC_API.agents_are_available()},launchChat:function(){this.initialize().then((function(){u.default.heroesAvailable()?u.default.displayChat():u.default.showPanel()}),(function(){u.default.showPanel({error:!0})}))},showPanel:function(e){var t;if(e||(e={}),e.error)t="Error loading live chat";else{let{liveChatClosureReason:e}=(0,p.getHelpData)(c.default.getState());t=e}(0,i.mount)(n.default.createElement(b,{reason:t}))},userHasFeature:function(){return o.default.userHasFeature(o.default.FEATURES.SUPPORT_CHAT)},_onChatMinimized:function(){this._chatEnded||LC_API.visitor_engaged()||g?this._chatEnded=null:LC_API.hide_chat_window(),this.enableMenuItem()},_onChatStart:function(){LC_API.visitor_engaged()&&this.disableMenuItem()},_onWindowOpen:function(){r.default.Tracker.createEvent(r.default.CATEGORY.HELP_CHAT,r.default.ACTION.HELP_CHAT_WINDOW_OPENED).log()}},!0)}(),SM.currentModule=null}),"",{requires:["lodash","react","sm","sm-analytics","sm-component-panel","sm-modal","sm-live-chat","sm-page","create-class","sm-page-feature-flag-constants","sm-page-help-selectors","sm-page-selectors","sm-redux-store"]});
YUI.add("sm-page-nav-cart",(function(r){SM.currentModule="sm-page-nav-cart";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e,t=r.SM.Page;const a=SM.import("sm-redux-store"),{fetchCartItemCount:n}=SM.import("sm-header-actions");e={refresh:function(){a.dispatch(n())}},t.cart||(t.cart={}),t.cart.navigation=e,module.exports=e}(),SM.currentModule=null}),"",{requires:["sm","sm-redux-store","sm-header-actions"]});
YUI.add("sm-page-nav-customize",(function(e){SM.currentModule="sm-page-nav-customize";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("sm-page")),n=babelHelpers.interopRequireDefault(t("sm-models-usernode"));i.default.modes.editSkin={start:function(t){var a=e.SM.Page,d=a.pageDesignId,s=a.entireSiteDesignId,u=a.model.get("Type");return i.default._pageEditorPromise||(i.default._pageEditorPromise=new e.Promise((function(t){e.use("sm-customize-page-skin-editor",(function(){var a={nickName:i.default.owner.nickName,userNode:i.default.model};s&&u===n.default.TYPES.ROOT&&(a.siteSkinMode=!0),t(new e.SM.Customize.PageSkinEditor(a))}))}))),i.default._pageEditorPromise.then((function(e){return s&&u===n.default.TYPES.ROOT?e.start(s):d?e.start(d):e.startFromScratch(),t}))}},i.default.modes.editSiteSkin={start:function(t){var n=i.default.pageDesignId;return i.default._pageEditorPromise||(i.default._pageEditorPromise=new e.Promise((function(t){e.use("sm-customize-site-skin-editor",(function(){t(new e.SM.Customize.SiteSkinEditor({nickName:i.default.owner.nickName,userNode:i.default.model}))}))}))),i.default._pageEditorPromise.then((function(e){return e.start(n),t}))}},i.default.editSkin=function(){i.default.setMode("editSkin",{})},i.default.editSiteSkin=function(){i.default.setMode("editSiteSkin",{})},i.default.setAlbumStyle=function(t){var n=i.default.album;n.set("TemplateID",t),n.save({data:{AlbumKey:n.get("AlbumKey")}},e.bind((function(){var e,t,i=window.location.href;-1!==i.indexOf("/i-")?(e=i.lastIndexOf("/"),t=i.substring(0,e)):t=i,window.location.href=t}),this))},i.default.on("page:init",(function(e){i.default.pageDesignId=e.pageDesignId,i.default.pageDesignHasLayout=e.pageDesignHasLayout,i.default.sitePageDesignId=e.sitePageDesignId,i.default.entireSiteDesignId=e.entireSiteDesignId,i.default.defaultTemplateId=e.defaultTemplateId,i.default.pageDesignRevertType=e.pageDesignRevertType,i.default.sitewideSkinId=e.sitewideSkinId,i.default.templateSkinId=e.templateSkinId,i.default.siteDesignId=e.siteDesignId,i.default.sitePageDesignType=e.sitePageDesignType,i.default.galleryStyle=e.galleryStyle}))}(),SM.currentModule=null}),"",{requires:["sm-button","sm-page-nodepage","sm-models-usernode","sm-models-usernodepagedesign","sm-templates-button","sm-panel-confirm","promise","sm-page","sm-models-usernode"]});
YUI.add("sm-page-nav-login",(function(n){SM.currentModule="sm-page-nav-login";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";n.SM.Page.login=function(){n.SM.Page.loginPage()},n.SM.Page.loginPage=function(){window.location.href="https://"+SM.env.host.ssl+"/login?goTo="+encodeURIComponent(window.location.href)}}(),SM.currentModule=null}),"",{requires:["sm-login","sm-page","sm-panel"]});
YUI.add("sm-page-nav-upload",(function(e){SM.currentModule="sm-page-nav-upload";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=babelHelpers.interopRequireDefault(a("sm-page"));const l={uploadNodeId:0,handleExistingClick:function(a,l,n){var d=this;e.use(["sm-picker-plugin","sm-uploader-tracking"],(function(){var t=a&&a.originEvent.target||e.one(l),u=SM.import("sm-uploader-tracking");t.pickerplugin||t.plug(e.SM.Plugin.Picker,{pickerMode:e.SM.Picker.MODE_ALBUM,pickerConfig:{limit:1,useLoggedInUser:!0,message:null},triggerMode:!0});let r=()=>{t.pickerplugin.showPicker(),o.default.uxdisabled=!0,t.pickerplugin.after("hidingPicker",o.default.nav.upload._onPickerHide.bind(d,n)),u.trackScreenView("Choose A Gallery")};(null==n?void 0:n.startNodeId)?t.pickerplugin._getStartPath(n.startNodeId,r):r()}))},_onPickerHide:function({onComplete:a}={},l){if(o.default.uxdisabled=!1,l.selectedData[0]){var n=l.selectedData[0].hostData,d=l.selectedData[0].typeInfo;n.id&&(o.default.nav.upload.showUploadPanel(d.Name||"",{albumKey:n.key,nodeId:d.NodeID},(function(e){if(e){if(a)return void a(d.UrlPath);window.location.href="".concat(SM.env.pageOwner.homepage).concat(d.UrlPath)}})),e.use(["sm-resource-album","sm-uploader-tracking"],()=>{const e=SM.import("sm-resource-core"),a=SM.import("sm-uploader-tracking");e.Album.loadByKey(n.key,{expand:["Node"]}).then(e=>{a.trackEvent(a.ACTIONS.selectGallery,{contexts:{[a.CONTEXTS.NODE]:{node_id:e.getExpansion("Node").get("NodeID"),node_type:"Gallery"}},screenName:"Choose A Gallery"})})}))}},showUploadPanel:function(a,l,n){e.use("sm-uploader",(function(){const{unmount:e}=SM.import("sm-modal");var d=SM.import("sm-uploader"),t=o.default.nav.upload.modal;t&&e(t),t=d.showAsModal({albumKey:l.albumKey,nodeId:l.nodeId,allowFolders:l.allowFolders||!1,nodeName:a,onClose:function(e){"function"==typeof n&&n(e),o.default.nav.upload.modal=null}}),o.default.nav.upload.modal=t}))}};o.default.on("page:init",(function(a){e.SM.Page.nav.upload.uploadNodeId=a.uploadNodeId,e.SM.Page.nav.upload.uploadNodeDepth=a.uploadNodeDepth})),e.namespace("SM.Page.nav").upload=l;var n=l;exports.default=n}(),SM.currentModule=null}),"",{requires:["sm-page","sm-page-nodepage","sm-templates-button","sm-models-usernode"]});
YUI.add("sm-page-nodepage-action-types",(function(e){SM.currentModule="sm-page-nodepage-action-types";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NODEPAGE_SET_NODE=void 0;exports.NODEPAGE_SET_NODE="NODEPAGE_SET_NODE"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-page-nodepage-actions",(function(e){SM.currentModule="sm-page-nodepage-actions";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setNode=function(n){return{type:e.NODEPAGE_SET_NODE,uri:n}};const e=SM.import("sm-page-nodepage-action-types")}(),SM.currentModule=null}),"",{requires:["sm-page-nodepage-action-types"]});
YUI.add("sm-page-nodepage-constants",(function(E){SM.currentModule="sm-page-nodepage-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NON_UPLOADABLE_NODE_TYPES=exports.SYSTEM_GALLERY_TYPE_LOGO=exports.SYSTEM_GALLERY_TYPE_COVER=exports.SYSTEM_GALLERY_TYPE_PROFILE=exports.PLACEHOLDER_ICON_LOOKUP=exports.SETTINGS_ICON_LOOKUP=exports.SYSTEM_NODE_TYPES=exports.NODE_TYPE_TRACKING_VALUES=exports.NODE_TYPE_LABEL_MAP=exports.NODE_TYPE_ROOT_FOLDER=exports.NODE_TYPE_SYSTEM_PAGE=exports.NODE_TYPE_SYSTEM_ALBUM=exports.NODE_TYPE_PAGE=exports.NODE_TYPE_FOLDER=exports.NODE_TYPE_ALBUM=void 0;exports.NODE_TYPE_ALBUM="Album";exports.NODE_TYPE_FOLDER="Folder";exports.NODE_TYPE_PAGE="Page";exports.NODE_TYPE_SYSTEM_ALBUM="System Album";exports.NODE_TYPE_SYSTEM_PAGE="System Page";exports.NODE_TYPE_ROOT_FOLDER="Root Folder";const E={Album:"Gallery",Folder:"Folder",Page:"Page","Root Folder":"Photo Site Homepage","System Album":"Gallery","System Page":"Page"};exports.NODE_TYPE_LABEL_MAP=E;const e={Album:"Gallery",Folder:"Folder",Page:"Page","Root Folder":"Homepage","System Album":"Gallery","System Page":"Page"};exports.NODE_TYPE_TRACKING_VALUES=e;const _=new Set(["Root Folder","System Album","System Page"]);exports.SYSTEM_NODE_TYPES=_;const P={Album:"GallerySmart",Folder:"FolderSmart",Page:"PageSmart"};exports.SETTINGS_ICON_LOOKUP=P;const S={Album:"Gallery",Folder:"Folder2",Page:"Page2"};exports.PLACEHOLDER_ICON_LOOKUP=S;exports.SYSTEM_GALLERY_TYPE_PROFILE="Bio";exports.SYSTEM_GALLERY_TYPE_COVER="Cover";exports.SYSTEM_GALLERY_TYPE_LOGO="Logo";const O=new Set(["Page","System Page"]);exports.NON_UPLOADABLE_NODE_TYPES=O}(),SM.currentModule=null}),"",{});
YUI.add("sm-page-nodepage-reducers",(function(e){SM.currentModule="sm-page-nodepage-reducers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAGE=u,exports.combined=function(r={},n){return e({page:u})(r,n)};const{combineReducers:e}=SM.import("redux"),r=SM.import("sm-page-nodepage-action-types");function u(e={},u){let n=((e={},u)=>{switch(u.type){case r.NODEPAGE_SET_NODE:return{...e,nodeUri:u.uri};default:return e}})(e||{},u);return{...e,...n}}}(),SM.currentModule=null}),"",{requires:["redux","sm-page-nodepage-action-types"]});
YUI.add("sm-page-nodepage-selectors",(function(e){SM.currentModule="sm-page-nodepage-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNodeUri=i,exports.getNormalizedNode=o,exports.getNode=u,exports.getOwnersRootNode=l,exports.getUploadableNode=function(e){let t=u(e);if(!t)return l(e);if(n.NON_UPLOADABLE_NODE_TYPES.has(t.type)){let r=o(e,t.uris.parentNode);return r||l(e)}return t},exports.nodeIsOwnersRootNode=function(t={}){let n=u(t),i=(0,r.getOwner)(t);if(!n||!i)return!1;let o=(0,e.getExpansion)(t,i.uri,"Node");if(!o)return!1;return n.uri===o.Uri},exports.getRealNodeType=function(e={}){let t=u(e);if(!t)return null;return t.isRoot?n.NODE_TYPE_ROOT_FOLDER:t.type},exports.getNodeHighlightImageSizes=function(t={}){let r=u(t);if(!r||!r.uris.highlightImage)return null;let n=(0,e.getExpansion)(t,r.uris.highlightImage,"ImageSizes");if(!n)return null;return{largestImageUrl:n.LargestImageUrl,smallImageUrl:n.SmallImageUrl}},exports.getCustomizationParams=void 0;var e=t("sm-api-redux-selectors"),r=t("sm-page-selectors"),n=t("sm-page-nodepage-constants");function i(e={}){let{page:{nodeUri:t}={}}=e;return t}function o(t={},r){let n=(0,e.getEntity)(t,r);return n?{id:n.NodeID,isRoot:n.IsRoot,name:n.Name,type:n.Type,uri:n.Uri,uris:{highlightImage:n.Uris.HighlightImage,parentNode:n.Uris.ParentNode},urlPath:n.UrlPath,webUri:n.WebUri}:null}function u(e={}){return o(e,i(e))}function l(t={}){let n=(0,r.getOwner)(t);if(!n)return null;let i=(0,e.getExpansionUri)(t,n.uri,"Node");return i?o(t,i):null}exports.getCustomizationParams=t=>{let r=i(t);return(0,e.getExpansion)(t,r,"NodePageDesign.PublishedPageDesign")}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-page-nodepage-constants","sm-page-selectors"]});
YUI.add("sm-page-nodepage",(function(e){SM.currentModule="sm-page-nodepage";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var o=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-page")),r=babelHelpers.interopRequireDefault(t("sm-resource-core")),a=babelHelpers.interopRequireDefault(t("sm-smuglog")),d=t("sm-page-nodepage-actions"),s=babelHelpers.interopRequireDefault(t("sm-redux-store"));let l="normal",u=n.default.publish("page:modeChange");Object.assign(n.default,{type:"page",widgets:[],modes:{normal:{}},model:null,getMode:function(){return l},setMode:function(e,t){n.default.fire("page:modeChange",{prevMode:n.default.getMode(),newMode:e,config:t})}}),u._firing=Promise.resolve(),u.fire=function(e){this._firing=this._firing.then(()=>new Promise((t,o)=>{let r={preventDefault:function(){this.prevented=!0,o(this)},...e||{}};this._subscribers&&this._subscribers.forEach(({fn:e,context:t})=>{e.call(t||n.default,r)}),r.prevented||t(r)}).then(e=>{let t,o=n.default.modes[e.newMode],r=n.default.modes[e.prevMode];return r&&r.end&&(t=r.end(e)),o&&o.start&&(t=t?t.then(o.start):o.start(e)),t?t.then(e=>(l=e.newMode,e)):l=e.newMode,t||e}).then(e=>(event._afters&&event._afters.forEach(({fn:t,context:o})=>{t.call(o||n.default,e)}),e))).catch((function(e){return a.default.console("Error changing page mode: "+(e&&(e.message||e)),"error"),null}))},u._fire=function(e){return this.fire(e[0])},n.default.on("page:init",(function(t){if(n.default.nodeId=t.nodeId,n.default.notFound=t.notFound,n.default.model=new e.SM.Models.UserNode(t.userNode),o.default.isStandalone&&o.default.delegate(o.default.doc.body,"click",e=>{let t=e.currentTarget,n=o.default.doc.location.hostname;t.hostname===n&&(e.preventDefault(),o.default.doc.location=t.href)},".sm-page-widget a"),t.nodeId){let e=r.default.loadLocal("nodeResource");e&&s.default.dispatch((0,d.setNode)(e.getCanonicalUri())),r.default.loadLocal("nodeHighlightImageResource")}}))}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-mobile-app-instructions","sm-models-usernode","sm-node-settings-actions","sm-page","sm-page-nodepage-actions","sm-redux-store","sm-resource-core"]});
YUI.add("sm-page-reducers",(function(e){SM.currentModule="sm-page-reducers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAGE=void 0;const e=SM.import("sm-page-action-types"),{createResponsiveStateReducer:r}=SM.import("redux-responsive"),{BREAKPOINT_EXTRA_SMALL_DEVICE:E,BREAKPOINT_SMALL_DEVICE:t,BREAKPOINT_MEDIUM_DEVICE:s,BREAKPOINT_LARGE_DEVICE:u,BREAKPOINT_EXTRA_LARGE_DEVICE:_}=SM.import("sm-page-constants"),S=r({extraSmall:E,small:t,medium:s,large:u,extraLarge:_});exports.PAGE=(r={},E)=>{let{browser:t}=r;switch(E.type){case e.PAGE_SET_IS_SMUGMUG_WEBVIEW:return((r={},E)=>{switch(E.type){case e.PAGE_SET_IS_SMUGMUG_WEBVIEW:return{...r,isSmugMugWebView:E.isSmugMugWebView};default:return r}})(r,E);case e.PAGE_SET_LOGGED_IN_USER:case e.PAGE_SET_OWNER:return((r={},E)=>{switch(E.type){case e.PAGE_SET_LOGGED_IN_USER:return{...r,userUri:E.uri};case e.PAGE_SET_OWNER:return{...r,ownerUri:E.uri};case e.PAGE_SET_LOGGED_IN_USER_PERMISSIONS:return{...r,permissionsUri:E.uri};default:return r}})(r,E);default:return{...r,browser:S(t,E)||{}}}}}(),SM.currentModule=null}),"",{requires:["sm-page-action-types","sm-page-constants"]});
YUI.add("sm-page-scroll-to-top",(function(e){SM.currentModule="sm-page-scroll-to-top";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var e=babelHelpers.interopRequireDefault(t("lodash")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("react-dom")),r=t("react-transition-group"),o=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-dom")),u=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-page"));const i=n.default.doc,c=i.body,d=n.default.win;let p;function m(e){let t=d.pageYOffset;if(p||0===t)return;e.preventDefault();let a=0,l=()=>{a+=1/60;let e=a/1.5,r=0;var o;e<1?(p=d.requestAnimationFrame(l),r=t-t*(o=e,(o/=.5)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1))):p=null,d.scrollTo(0,r)};l()}s.default.on("page:init",()=>{let t,s=n.default.getViewportRect().height,f=()=>{let e=a.default.createElement(o.default,{className:"sm-page-scroll-to-top",key:"scrollToTop",skin:o.default.SKIN_PRIMARY,size:o.default.SIZE_SMALL,title:"Back to the top of this page"},a.default.createElement("span",{className:"sm-button-label"},"Back To Top"),a.default.createElement(u.default,{name:"AngleBracketUpSlim",size:u.default.SIZE_SMALL})),n=d.pageYOffset>=2*s;n&&!t&&(t=c.appendChild(i.createElement("div"))),t&&l.default.render(a.default.createElement(r.CSSTransition,{appear:!0,classNames:"fade",in:n,timeout:500,unmountOnExit:!0},e),t)};var b,g;d.addEventListener("resize",e.default.throttle(()=>{s=n.default.getViewportRect().height,f()}),100),n.default.delegate(c,"click",m,".sm-page-scroll-to-top"),d.addEventListener("scroll",e.default.debounce(f,250)),b=d,g=()=>{p&&(d.cancelAnimationFrame(p),p=null)},"wheel touchstart".split(" ").forEach(e=>{b.addEventListener(e,g)})})}(),SM.currentModule=null}),"",{requires:["lodash","react-dom","react-transition-group","sm-component-button","sm-dom","sm-icon","sm-page"]});
YUI.add("sm-page-selectors",(function(e){SM.currentModule="sm-page-selectors";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoggedInUserUri=a,exports.getLoggedInUser=s,exports.getLoggedInUserProfile=function(e={}){let t=a(e),n=(0,r.getExpansion)(e,t,"UserProfile");if(!n)return null;return{firstName:n.FirstName,displayName:n.DisplayName,uri:n.Uri}},exports.getRawManagementAddOnStatus=function(e){let t=(0,r.getExpansion)(e,a(e),"RawManagementAddOnStatus");if(!t)return null;return t.AddOnSubscriptionStatus},exports.getLoggedInUserTrialData=function(e={}){let t=a(e),n=(0,r.getExpansion)(e,t,"UserTrial");if(!n)return;return{autoStartSubscription:n.AutoStartSubscription,daysRemaining:n.DaysRemaining,intentToSell:n.IntentToSell}},exports.getLoggedInUserPermissionData=l,exports.isLoggedInUserAssistant=function(e={}){let{assistant:t}=l(e)||{};return Boolean(t)},exports.isLoggedInUserSuspended=function(e={}){let{accountStatus:t}=s(e)||{};return"Suspended"===t},exports.isLoggedInUserAdmin=o,exports.isLoggedInUserGuest=function(e={}){let t=a(e),{Plan:n}=(0,r.getEntity)(e,t)||{};return"Guest"===n},exports.getOwnerUri=g,exports.getOwner=d,exports.getOwnerSiteSettings=function(e={}){let t=g(e)||"",n=(0,r.getExpansion)(e,t,"SiteSettings");if(!n)return null;return{rightClickMessage:n.RightClickMessage}},exports.isLoggedInUserPageOwner=c,exports.getPageNode=function(e={}){let{page:{nodeUri:t}}=e;return(0,r.getEntity)(e,t)},exports.getBrowserData=m,exports.isSmugMugWebView=function(e={}){let{page:{isSmugMugWebView:t=!1}={}}=e;return t},exports.viewportIsLessThanMedium=function(e={}){let{lessThan:{medium:t=!1}={}}=m(e);return t},exports.viewportIsLessThanLarge=function(e={}){let{lessThan:{large:t=!1}={}}=m(e);return t},exports.viewportIsLessThanExtraLarge=function(e={}){let{lessThan:{extraLarge:t=!1}={}}=m(e);return t},exports.viewportIsGreaterThanSmall=function(e={}){let{greaterThan:{small:t=!1}={}}=m(e);return t},exports.viewportIsGreaterThanMedium=function(e={}){let{greaterThan:{medium:t=!1}={}}=m(e);return t},exports.viewportIsGreaterThanLarge=function(e={}){let{greaterThan:{large:t=!1}={}}=m(e);return t},exports.viewportIsGreaterThanExtraLarge=function(e={}){let{greaterThan:{extraLarge:t=!1}={}}=m(e);return t},exports.orientationIsPortrait=function(e={}){let{orientation:t}=m(e);return t===i.ORIENTATION_PORTRAIT},exports.orientationIsLandscape=function(e={}){let{orientation:t}=m(e);return t===i.ORIENTATION_LANDSCAPE},exports.userHasFeature=p,exports.ownerHasFeature=function(e,t){let n=d(e);return!!n&&p(e,n.uri,t)},exports.loggedInUserHasFeature=function(e,t){let n=a(e);return!!n&&p(e,n,t)},exports.getFeatureFlagValue=function(e,t){return(((0,r.getEntity)(e,i.FEATURE_FLAGS_API_URI)||{}).Flags||{})[t]},exports.getAllFeatureFlags=function(e){return((0,r.getEntity)(e,i.FEATURE_FLAGS_API_URI)||{}).Flags||{}},exports.isLoggedInUserPageOwnerOrAdmin=exports.getUploadLimits=void 0;var e=babelHelpers.interopRequireDefault(t("memoize-one")),n=babelHelpers.interopRequireDefault(t("sm-smuglog")),r=t("sm-api-redux-selectors"),i=t("sm-page-constants");function a(e={}){let{page:{userUri:t}={}}=e;return t}function s(e={}){let t=a(e),n=(0,r.getEntity)(e,t);return n?{accountStatus:n.AccountStatus,email:n.Email,homepageUrl:n.WebUri,isGettingStarted:n.IsGettingStarted,isTrial:n.IsTrial,name:n.Name,nickName:n.NickName,refTag:n.RefTag,uri:n.Uri}:null}const u=(0,e.default)((e,{includeRaw:t=!0,defaultImageTypesOnly:n=!1}={})=>{if(!e)return null;let r=new Set,i=new Set,a=new Map,s=new Map,u=new Set,l={};for(let d in e){var o,g;let c=e[d].Type;t&&!n&&"SmugVault"===c&&s.set("SmugVault",new Set);let m=e[d].MaxSize;a.set(c,m),l[c]={message:(null===(o=e[d])||void 0===o?void 0:o.AdditionalKnownFileMessage)||"",link:(null===(g=e[d])||void 0===g?void 0:g.AdditionalKnownFileLink)||""};let f=e[d].AcceptedFileTypes,p=new Set;for(let e in f)(t||"RAW"!==c&&"Sidecar"!==c)&&(n&&"Image"!==c||(p.add(f[e].Extension),p.add(f[e].Mime),s.set(c,p),r.add(f[e].Extension),i.add(f[e].Mime)));let S=e[d].AdditionalKnownFileTypes;for(let e in S){if(!t||n)break;u.add(S[e].Extension),u.add(S[e].Mime)}}return{additionalKnownExtensionsAndMimes:u,allowedExtensions:r,allowedMimeTypes:i,errorMessages:l,maxFileSizes:a,fileTypeMap:s}});function l(e={}){let t=(0,r.getEntity)(e,i.PERMISSIONS_API_URI);if(t)return{assistant:t.Assistant}}function o(e={}){let t=a(e),{IsAdmin:n=!1}=(0,r.getEntity)(e,t)||{};return n}exports.getUploadLimits=(e,{includeRaw:t=!0,defaultImageTypesOnly:n=!1}={})=>{let i=(0,r.getExpansion)(e,a(e),"UserUploadLimits");return u(i,{includeRaw:t,defaultImageTypesOnly:n})};function g(e={}){let{page:{ownerUri:t}={}}=e;return t}function d(e={}){let t=g(e)||"",n=(0,r.getEntity)(e,t);return n?{name:n.Name,nickName:n.NickName,uri:n.Uri,webUri:n.WebUri}:null}function c(e={}){let t=a(e),n=g(e);return!(!t||t!==n)}function m(e={}){let{page:{browser:t={}}={}}=e;return t}exports.isLoggedInUserPageOwnerOrAdmin=(e={})=>c(e)||o(e);let f=!1;function p(e={},t,a){let s=(0,r.getExpansion)(e,t,"Features");return i.USER_FEATURES.has(a)||f||(f=!0,n.default.console("sm-page-selectors","Invalid feature passed to userHasFeature, ".concat(a),n.default.LEVEL_WARNING)),!!s&&s[a]}}(),SM.currentModule=null}),"",{requires:["memoize-one","sm-api-redux-selectors","sm-page-constants"]});
YUI.add("sm-page-tooltip-base",(function(t){SM.currentModule="sm-page-tooltip-base";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=SM.import("sm-dom"),i=e.doc.body,{TOOLTIP_SHOW_DELAY:o,TOOLTIP_HIDE_DELAY:s}=SM.import("sm-page-tooltip-constants");var n={blue:!0,nui:!0},h={above:!0,below:!0,left:!0,right:!0,auto:!0};function a(e){this._preventHideOnClick=e.preventHideOnClick,this._attachTo=e.attachTo,this._alignment=h[e.alignment]?e.alignment:"below",this._slideIn=e.slideIn,this.node=t.Node.create('<div class="sm-tooltip sm-tooltip-floating sm-text-mini" data-testid="tooltipbase_tooltip_container"><span class="sm-tooltip-content"></span></div>');var i="default";e.skin?i=n[e.skin]?e.skin:"default":e.attachTo&&(i=a.getSkinForNode(e.attachTo)),this.node.addClass("sm-tooltip-"+i),"nui"!==i&&"blue"!==i||this.node.addClass("sm-nui"),e.showArrow&&(this._showArrow=!0,this.node.addClass("sm-tooltip-show-arrow")),e.className&&this.node.addClass(e.className),this.setContent(e.text),this.node.hide(),this._attachHoverEvents()}a.prototype={_attachHoverEvents:function(){this._detachHoverEvents(),this._attachTo&&(this._hoverEvents=[this._attachTo.on("hover",this._handleMouseEnter,this,this._attachTo),this._attachTo.on("mouseleave",this._handleMouseLeave,this,this._attachTo),this.node.on("hover",this._handleMouseEnter,this,this._attachTo),this.node.on("mouseleave",this._handleMouseLeave,this,this._attachTo)])},_detachHoverEvents:function(){new t.EventHandle(this._hoverEvents).detach(),this._hoverEvents=null},_attachHideEvents:function(){this._detachHideEvents(),this._preventHideOnClick||(this._hideEvents=[e.addEventListener(i,"keydown",this.hide,this),e.addEventListener(i,"mousedown",this._onBodyMouseDown,this)])},_detachHideEvents:function(){if(this._hideEvents){for(;this._hideEvents.length;)e.removeEventListener(this._hideEvents.shift());this._hideEvents=null}},destroy:function(){this.fire("destroy"),this._detachHoverEvents(),this._detachHideEvents(),this._windowResizeHandle&&this._windowResizeHandle.detach(),this.node&&(this.node.remove(!0),this.node=null)},hide:function(){this._cancelTooltipShow(),this._detachHideEvents(),this._windowResizeHandle&&this._windowResizeHandle.detach(),t.soon(function(){this.node.transition({duration:.25,easing:"ease-out",opacity:0},function(){this._onHideTransitionEnd()}.bind(this))}.bind(this))},_onHideTransitionEnd:function(){this._attachTo?(this.node.hide(),this.node.remove()):this.destroy()},_onBodyMouseDown:function(t){this.node.contains(t.target)||this.hide()},setContent:function(t){this.node.one(".sm-tooltip-content").setHTML(t)},setPosition:function(t,e){this.node.setStyles({left:t+"px",top:e+"px"})},show:function(){this.node.inDoc()||this.node.appendTo(i),this._attachHideEvents(),this.node.setStyle("opacity","0"),this.node.show(),this.node.transition({easing:"ease-out",duration:.25,opacity:1})},showAt:function(e,i,o){var s=!o&&this._slideIn;s?t.Lang.isObject(this._slideIn)?this.setPosition(this._slideIn.x,this._slideIn.y):this.node.hasClass("sm-tooltip-align-below")?this.setPosition(e,i+25):this.node.hasClass("sm-tooltip-align-right")?this.setPosition(e+25,i):this.node.hasClass("sm-tooltip-align-above")?this.setPosition(e,i-25):this.node.hasClass("sm-tooltip-align-left")&&this.setPosition(e-25,i):this.setPosition(e,i),this.show(),s&&t.soon(t.bind((function(){this.node.transition({easing:"cubic-bezier(0.645, 0.045, 0.355, 1)",duration:.5,top:i+"px",left:e+"px"})}),this))},_handleMouseEnter:function(e,i){this._cancelTooltipHide(),!this._tooltipShowDelay&&this.node._isHidden()&&(this._tooltipShowDelay=t.later(o,this,(function(){this._attachHideEvents(),this.showAtNode(i),this._tooltipShowDelay=null})))},_handleMouseLeave:function(){this._tooltipHideDelay||(this._tooltipHideDelay=t.later(s,this,(function(){this.hide(),this._tooltipHideDelay=null})))},_cancelTooltipShow:function(){this._tooltipShowDelay&&(this._tooltipShowDelay.cancel(),this._tooltipShowDelay=null)},_cancelTooltipHide:function(){this._tooltipHideDelay&&(this._tooltipHideDelay.cancel(),this._tooltipHideDelay=null)},showAtNode:function(o){var s=(o=t.one(o)).getXY(),n=!1;this.node.removeClass("sm-tooltip-align-left").removeClass("sm-tooltip-align-right").removeClass("sm-tooltip-align-above").removeClass("sm-tooltip-align-below"),this.node.inDoc()||(this.setPosition(-1e3,-1e3),this.node.appendTo(i),this.node.setStyle("opacity","0"),this.node.show(),n=!0),t.later(1,this,(function(){var i,h=!0,a=this._alignment,l=0;this.node.all(".sm-tooltip-arrow").remove();do{switch(i=t.clone(s),h=!0,this.node.removeClass("sm-tooltip-align-left").removeClass("sm-tooltip-align-right").removeClass("sm-tooltip-align-above").removeClass("sm-tooltip-align-below"),a){case"right":this.node.addClass("sm-tooltip-align-right"),i[0]+=o.get("offsetWidth")+(this._showArrow?10:0),i[1]+=o.get("offsetHeight")/2-this.node.get("offsetHeight")/2;break;case"below":this.node.addClass("sm-tooltip-align-below"),i[0]+=o.get("offsetWidth")/2-this.node.get("offsetWidth")/2,i[1]+=o.get("offsetHeight")+(this._showArrow?10:0);break;case"left":this.node.addClass("sm-tooltip-align-left"),i[0]-=this.node.get("offsetWidth")+(this._showArrow?10:0),i[1]+=o.get("offsetHeight")/2-this.node.get("offsetHeight")/2;break;case"above":this.node.addClass("sm-tooltip-align-above"),i[0]+=o.get("offsetWidth")/2-this.node.get("offsetWidth")/2,i[1]-=this.node.get("offsetHeight")+(this._showArrow?10:0)}"left"==a&&i[0]<0&&(h=!1,a="right"),i[0]<0?i[0]=0:i[0]+this.node.get("offsetWidth")>t.DOM.viewportRegion().right&&(i[0]=i[0]-(i[0]+this.node.get("offsetWidth")-t.DOM.viewportRegion().right)),i[1]+this.node.get("offsetHeight")>t.DOM.viewportRegion().bottom?(h=!1,a="above"):i[1]<t.DOM.viewportRegion().top&&(h=!1,a="below"),l++}while(!h&&l<=4);var d=o.getDOMNode().getClientRects()[0],r=this.node.getDOMNode().getClientRects()[0],c="";switch(a){case"right":case"left":d&&(c=' style="top: '+2*(0-(i[1]+r.height/2-(d.top+e.win.scrollY+d.height/2)))+'px;"'),this.node.append('<span class="sm-tooltip-arrow sm-fonticon sm-fonticon-ArrowTriangleLeft"'+c+"></span>");break;case"below":case"above":d&&(c=' style="left: '+2*(0-(i[0]+r.width/2-(d.left+e.win.scrollX+d.width/2)))+'px;"'),this.node.append('<span class="sm-tooltip-arrow sm-fonticon sm-fonticon-ArrowTriangleUp"'+c+"></span>")}this.showAt(i[0],i[1],!n)})),this._windowResizeHandle=t.one("window").once("resize",(function(){this.showAtNode(o)}),this)},getControlHandle:function(){var t=this;return{destroy:function(){t.node&&t.destroy()},hide:function(){t.node&&t.hide()},getCurrentPosition:function(){var e=t.node.get("region");return{x:e.left,y:e.top,height:e.height,width:e.width}}}}},t.augment(a,t.EventTarget),a.getSkinForNode=function(t){var e=t.ancestor((function(t){return t.hasClass("sm-nui")||t.hasClass("sm-user-ui")}));return e&&e.hasClass("sm-nui")?"nui":"default"};var l=a;exports.default=l}(),SM.currentModule=null}),"",{requires:["sm-page-tooltip-constants","node","transition"]});
YUI.add("sm-page-tooltip-constants",(function(e){SM.currentModule="sm-page-tooltip-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TOOLTIP_HIDE_DELAY=exports.TOOLTIP_SHOW_DELAY=void 0;exports.TOOLTIP_SHOW_DELAY=300;exports.TOOLTIP_HIDE_DELAY=100}(),SM.currentModule=null}),"",{});
YUI.add("sm-page-tooltip",(function(e){SM.currentModule="sm-page-tooltip";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=babelHelpers.interopRequireDefault(t("lodash")),l=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("sm-page-tooltip-base")),n=t("sm-page-tooltip-constants");const r=l.default.doc.body;let i,u;e.namespace("SM.Page").Tooltip={showAtXY:function(e,t,o,l={}){let n=new a.default(l);return n.setContent(e),n.showAt(t,o),l.destroyCallback&&n.on("destroy",l.destroyCallback),n.getControlHandle()},showAtNode:function(t,o,l={}){if(!(o=e.one(o))||!o.inDoc())return null;l.skin||(l.skin=a.default.getSkinForNode(o));let n=new a.default(l);return n.setContent(t),n.showAtNode(o),l.destroyCallback&&n.on("destroy",l.destroyCallback),n.getControlHandle()},attachToNode:function(e,t,o={}){o.attachTo=t;let l=new a.default(o);return l.setContent(e),o.destroyCallback&&l.on("destroy",o.destroyCallback),l.getControlHandle()}};let d,s=!1;l.default.delegate(r,"mouseover",t=>{let a=t.currentTarget;if(s)return void(u=a);if(i){if(u===a)return;i.hide(),i=null,u=null}let c,p,f=a.getAttribute("data-tooltip");if(!f)return;f=o.default.escape(f);let m=setTimeout(()=>{p=e.SM.Page.Tooltip.showAtNode(f,e.one(a),{alignment:a.getAttribute("data-tooltip-alignment"),preventHideOnClick:!a.getAttribute("data-tooltip-hide-on-click")}),i=p,u=a},n.TOOLTIP_SHOW_DELAY),b=()=>{clearTimeout(m),d=!1,p&&(p.hide(),c&&c.disconnect(),p===i&&(i=null,u=null))};if(d)return void b();let g=l.default.addEventListener(a,"mouseleave",()=>{l.default.removeEventListener(g),b()});c=new MutationObserver(e=>{e.forEach(e=>{Array.from(e.removedNodes).some(e=>e===a||e.contains(a))&&(s=!0,setTimeout(()=>{s=!1},100),b())})}),c.observe(r,{childList:!0,subtree:!0})},"[data-tooltip]"),l.default.delegate(r,"touchstart",()=>{d=!0,setTimeout(()=>{d=!1},1e3)},"[data-tooltip]");var c=e.SM.Page.Tooltip;exports.default=c}(),SM.currentModule=null}),"",{requires:["escape","sm-page-tooltip-base","sm-page-tooltip-constants"]});
YUI.add("sm-page-tracking",(function(e){SM.currentModule="sm-page-tracking";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var a=SM._requireShim;!function(){"use strict";var e=babelHelpers.interopRequireDefault(a("js-cookie")),t=babelHelpers.interopRequireDefault(a("react")),r=babelHelpers.interopRequireDefault(a("react-dom")),o=a("sm-dom-core"),n=a("sm-analytics-core"),s=babelHelpers.interopRequireWildcard(a("sm-cookie-consent")),l=babelHelpers.interopRequireDefault(a("sm-load-script")),i=babelHelpers.interopRequireDefault(a("sm-page")),c=babelHelpers.interopRequireDefault(a("sm-analytics-tracker")),u=a("sm-analytics-tracker-snowplow"),d=a("sm-analytics-snowplow-helpers");i.default.on("page:init",(a={})=>{let{dataLayer:i={},showCookieBanner:m,snowplowConfig:{collectorUrl:p,cookieDomain:f,scriptUrl:k}={},tracking:b}=a;function g(){b&&!e.default.get(s.COOKIE_OPT_OUT)&&(0,n.initGoogleTagManager)(i)}function w(){k&&((0,u.setupSnowplowGlobals)(),(0,u.configureTracker)(i.page_type,p,f),(0,u.setUserId)(i.visitor_user_reftag),(0,l.default)(k).then(()=>{(0,u.attachLinkClickEvents)(d.trackLinkClick),(0,d.trackPageView)()},()=>{}))}function y(){c.default.init(i)}m&&!(0,s.hasBannerBeenSeen)()?function(){let e=o.doc.createElement("div");o.doc.body.appendChild(e),r.default.render(t.default.createElement(s.HydrationContext.Provider,{value:!0},t.default.createElement(s.default,{className:"sm-nui sm-cookie-consent",domain:f,onDismiss:({accepted:a})=>{r.default.unmountComponentAtNode(e),e.remove(),o.doc.body.classList.remove("sm-page-has-cookie-banner"),a&&(y(),w(),g())}})),e)}():(y(),w(),g())})}(),SM.currentModule=null}),"",{requires:["js-cookie","react","react-dom","sm-dom-core","sm-analytics-core","sm-analytics-tracker","sm-cookie-consent","sm-load-script","sm-page","sm-analytics-tracker-snowplow","sm-analytics-snowplow-helpers"]});
YUI.add("sm-page",(function(e){SM.currentModule="sm-page";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const t=SM.import("sm-dom"),n=SM.import("sm-resource-core"),r=SM.import("sm-redux-store"),i=SM.import("sm-ua"),{setIsSmugMugWebview:o,setLoggedInUser:s,setLoggedInUserPermissions:a,setOwner:l}=SM.import("sm-page-actions"),{fetchFromAPI:c}=SM.import("sm-api-redux-actions"),{FEATURE_FLAGS_API_URI:u}=SM.import("sm-page-constants");SM.import("intersection-observer-polyfill")(t.win,t.doc);var d,g=SM.env;e.SM.Page=module.exports=d=e.mix(new e.EventTarget,{init:function(t){if(e.SM.CSRF&&t.csrfToken&&e.SM.CSRF.setToken(t.csrfToken),this.nextSandbox=t.nextSandbox,t.features&&(this.FEATURES=t.features),d.user){let e=n.loadLocal("loggedInUser"),t=n.loadLocal("loggedInUserPermissions");e&&r.dispatch(s(e.getCanonicalUri())),t&&r.dispatch(a(t.getCanonicalUri()))}if(d.owner){let e=n.loadLocal("pageOwner");e&&r.dispatch(l(e.getCanonicalUri()))}n.loadLocal("featureFlags")||r.dispatch(c({uri:u}));let g=(new i).isSmugMugWebView;r.dispatch(o(g)),d.defaultGalleryStyle=t.defaultGalleryStyle,d.publish("page:init",{fireOnce:!0}).fire(t)},api:new e.SM.API,user:g.loggedInUser,owner:g.pageOwner,readOnly:g.readOnly,isSmallScreen:function(){let{height:e,width:n}=t.getViewportRect(),{mobileMaxLandscapeHeight:r,mobileMaxWidth:i}=d.responsiveDesign;return e*n<r*i},isOwnerLoggedIn:function(e){e=e||(e={includeAssistants:!0});var t=d.owner,n=d.user,r=t&&n&&t.nickName===n.nickName;return e.includeAssistants?r:r&&!n.isAssistant},isOwnerOrAdmin:function(e){e=e||(e={includeAssistants:!0});var t=d.user;return d.isOwnerLoggedIn(e)||t&&t.isAdmin},canEdit:function(){return!d.readOnly&&d.isOwnerLoggedIn()},dialogs:{},getDialog:function(t,n){var r=d.dialogs[t];if(r.dialogClass)try{r=new r.dialogClass(r.config),n||(d.dialogs[t]=r),r.render()}catch(n){return e.error("Couldn't instantiate "+t+" dialog",n),null}return r},showDialog:function(e){var t=d.getDialog(e);return t&&t.show(),d},hideDialog:function(e){var t=d.getDialog(e);return t&&t.hide(),d},destroyDialog:function(e){var t=d.getDialog(e);return t&&(t.destroy(),t=null,delete d.dialogs[e]),d},disablePageScroll:function(e={preventTouch:!0,positionFixed:!1}){t.doc.documentElement.setAttribute("data-page-noscroll",!0),e.positionFixed&&t.doc.documentElement.setAttribute("data-page-noscroll-fixed",!0),this.pageScrollPosition=t.win.pageYOffset,!this.pageScrollListener&&e.preventTouch&&(this.pageScrollListener=t.addEventListener(t.doc.body,"touchmove",(function(e){e.preventDefault()})))},enablePageScroll:function(){t.doc.documentElement.removeAttribute("data-page-noscroll"),t.doc.documentElement.removeAttribute("data-page-noscroll-fixed"),this.pageScrollListener&&(t.removeEventListener(this.pageScrollListener),this.pageScrollListener=null),this.pageScrollPosition&&(t.win.scrollTo(0,this.pageScrollPosition),this.pageScrollPosition=null)},ownerHasFeature:function(e){var t=g.pageOwnerFeatures;return!(!t||!t[e])},userHasFeature:function(e){var t=g.loggedInUser;return!!(t&&t.features&&t.features[e])},renderWidgets:!0,FEATURES:{}},!0)}(),SM.currentModule=null}),"",{requires:["event-custom","intersection-observer-polyfill","sm-api","sm-cart","sm-dom","sm-page-actions","sm-page-selectors","sm-redux-store","sm-resource-core","sm-page-constants","sm-api-redux-actions"]});
YUI.add("sm-pagewidget-adsense-view",(function(e){SM.currentModule="sm-pagewidget-adsense-view";var t;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=function(e){t.superclass.constructor.call(this,e)},e.namespace("SM.PageWidget").AdSense=e.extend(t,e.SM.PageWidget.BaseView,{render:function(){if(this.editMode)return this.renderEmpty("Warning","AdSense is no longer supported. Please delete this block to remove it.")}}),SM.currentModule=null}),"",{requires:["get","promise","template-micro","sm-pagewidget-base-view","sm-page-nodepage"]});
YUI.add("sm-pagewidget-base-view",(function(e){SM.currentModule="sm-pagewidget-base-view";var t,i,n,s,o,r,a,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;t=SM.import("lodash"),i=SM.import("sm-dom"),n=SM.import("sm-image-preloader-deprecated"),s=SM.import("react-dom"),o=null,r=null,a=function(e){this.init(e)},t.assign(a.prototype,{emptyTemplate:e.Template.Micro.compile('<div class="sm-page-widget-empty"><span class="sm-muted sm-fonticon sm-fonticon-<%= data.icon %>"></span><div class="sm-muted sm-text-mini"><%= data.message %></div></div>'),init:function(t){this.moduleName="",this.config={},this.resize=!1,this.forceResize=!1,this.editMode=!1,this.container=null,this.widgetNode=null,this.columnNode=null,e.Object.each(t,(function(t,i){void 0!==this[i]&&(this[i]="container"===i||"columnNode"===i||"widgetNode"===i?e.Node.one(t):t)}),this),this._eventHandlers=[],this._views=[],this._bindEvents()},_bindEvents:function(){if(this.resize&&"function"==typeof this._checkResize){if(this.forceResize||e.UA.ios||e.UA.android||this._checkLayoutStretchy()){var n=i.getViewportRect();this._winWidth=n.width,this._winHeight=n.height,this._resizeHandler=i.addEventListener(i.win,"resize",t.debounce(this._onWindowResize.bind(this),150))}this._eventHandlers.push(e.after("layout:widthchange",this._checkResize,this))}},_precacheImages:function(t){var i=[],s=t.resources;s.page&&(s=s.resources),s.model&&(s=s.toArray()),s.forEach((function(n){if(!n.isSmugMugResource||-1!==n.endpointType.indexOf("Image")){var s=e.SM.Views.Tile.getImageSize(n,t.layoutOptions.imageSize,t.layoutOptions.containerWidth,{imageCrop:t.layoutOptions.imageCrop,maxWidth:t.layoutOptions.containerWidth});i.push(e.SM.Models.Image.getUrl(n,s))}})),n.prefetch(i)},render:function(){return this},destroy:function(){new e.EventHandle(this._eventHandlers).detach(),this._resizeHandler&&i.removeEventListener(this._resizeHandler),this._resizeTimer=null,this._resizeHandler=null,s.unmountComponentAtNode(this.container.getDOMNode()),e.Array.each(this._views,(function(e){e&&e.destroy()}))},_checkLayoutStretchy:function(){return o||(o=e.one(".sm-page-layout")),null===r&&(r=!o.hasClass("sm-page-layout-fixed")),r},_onWindowResize:function(){var e=i.getViewportRect(),t=e.width,n=e.height;t===this._winWidth&&n===this._winHeight||this._checkResize(),this._winWidth=t,this._winHeight=n},getContainerWidth:function(){var e=document.body.style,t=e.overflowY;e.overflowY="scroll";var i=this.container.get("offsetWidth");return e.overflowY=t,i},getParentNode:function(){var t=this.config;return!this.widgetNode&&t&&t.widget&&(this.widgetNode=e.one("#"+t.widget.parentId)),this.widgetNode},showParentNode:function(){this.getParentNode().removeClass("sm-page-widget-hidden")},hideColumnNode:function(){var e=this.getParentNode().ancestor(".sm-page-layout-column");e&&e.hide()},renderEmpty:function(e,t){this.container.setHTML(this.emptyTemplate({icon:e||"SlashEncircled",message:t||"Empty"}))}}),e.namespace("SM.PageWidget").BaseView=module.exports=a,SM.currentModule=null}),"",{requires:["base","event-resize","lodash","node","react-dom","sm","sm-dom","view","template-micro","sm-tile-view","sm-image-preloader-deprecated"]});
YUI.add("sm-pagewidget-breadcrumb-view",(function(e){SM.currentModule="sm-pagewidget-breadcrumb-view";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";{const r=SM.import("react"),t=SM.import("react-dom"),{Breadcrumbs:n,BreadcrumbItem:a,CollapsibleBreadcrumbs:s}=SM.import("sm-breadcrumbs");class i extends(SM.import("sm-pagewidget-base-view")){destroy(){super.destroy(),t.unmountComponentAtNode(this._containerDOMNode)}init(e){super.init(e),this._containerDOMNode=this.container.getDOMNode()}render(){let{showFullBreadcrumb:e}=this.config.widget.data,a=this._createBreadcrumbs();return new Promise(i=>{e?t.render(r.createElement(n,null,a),this._containerDOMNode,i):t.render(r.createElement(s,null,a),this._containerDOMNode,i)})}_createBreadcrumbs(){let e=this.config.widget.data,{breadcrumbs:t,showCurrentPage:n,emphasizeCurrentPage:s}=e;Object.is(n,null)&&(n=!0);let i=t.length-1;return t.map((e,t)=>{let{name:u,url:d}=e,m=n&&t===i,c=m&&s;return 0===t?r.createElement(a,{key:t,url:d,icon:"Home",isCurrentPage:m,emphasized:c}):r.createElement(a,{key:t,url:d,isCurrentPage:m,emphasized:c},u)})}}e.namespace("SM.PageWidget").Breadcrumb=module.exports=exports=i}}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-pagewidget-base-view","sm-component-pure-render","sm-breadcrumbs"]});
YUI.add("sm-pagewidget-comments-view",(function(e){SM.currentModule="sm-pagewidget-comments-view";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";{const t=SM.import("react"),r=SM.import("react-dom"),o=SM.import("sm-resource-core"),s=SM.import("sm-comments");class i extends(SM.import("sm-pagewidget-base-view")){init(e){super.init(e);let t=e.config.widget.data;this._nodePromise=o.loadUri("/api/v2/node/".concat(encodeURI(t.nodeId)))}render(){return this._nodePromise.then(e=>{r.render(t.createElement(s,{resource:e}),this.container.getDOMNode())})}}e.namespace("SM.PageWidget").Comments=module.exports=exports=i}}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-comments","sm-pagewidget-base-view","sm-resource"]});
YUI.add("sm-pagewidget-featuredevents-view",(function(e){SM.currentModule="sm-pagewidget-featuredevents-view";var i;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;i=e.SM.PageWidget,e.namespace("SM.PageWidget").FeaturedEvents=e.extend((function e(i){i.resize=!0,e.superclass.constructor.call(this,i)}),i.Nodes,{_getTilesConfig:function(i){var t=this.getContainerWidth(),s=e.SM.Views.Tiles.PAGINATION_TYPES,n=i.paginationType||s.INFINITE;return(!n||this.editMode&&n===s.INFINITE)&&(n=s.NONE),{dataMap:{Title:"Name"},layout:i.tileLayout,pagination:n,spacing:i.tileSpacing,parentNode:this.container,layoutOptions:{containerWidth:t,imageCrop:i.imageCrop,imageSize:i.imageSize,showInfo:i.tileInfo,infoHover:i.tileInfoHover,spacing:i.tileSpacing,varyHeight:i.varyHeight,showType:i.tileIcon},paginationOptions:e.merge({pageSize:this._getPageSize(i,t,i.imageSize)},this.paginationOptions)}},_renderTiles:function(i){i.resources.size&&i.resources.size()||i.resources.totalResources?(this._tiles=new e.SM.Views.Tiles(i),this._tiles.render(),this.showParentNode()):this.editMode?(this.renderEmpty(this._emptyIcon,this._emptyMessage),this.showParentNode()):this.hideColumnNode(),SM.env.loggedInUser&&SM.env.loggedInUser.isAdmin&&(e.publish("widget-loaded",{broadcast:2}),e.fire("widget-loaded",{name:"nodes"}))},render:function(){var i=this,t=i.config,s=t.widget.data,n=i._getTilesConfig(s),o=n.resources=new e.SM.Events.Models.EventList;return n.dataMap.Url="URL",new e.Promise((function(e){o.load({apiCategory:"featured",data:{NickName:t.user.nickName,SortBy:s.sortBy,SortDirection:s.sortDirection}},(function(t){t||(i._renderTiles(n),e())}))}))}}),SM.currentModule=null}),"",{requires:["promise","sm-events-models","sm-image-model","sm-pagewidget-base-view","sm-pagewidget-nodes-view","sm-tiles-view"]});
YUI.add("sm-pagewidget-feed-controller",(function(e){SM.currentModule="sm-pagewidget-feed-controller";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),s=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("sm-page")),l=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),i=babelHelpers.interopRequireDefault(t("sm-pagewidget-feed-item"));class d extends l.default{constructor(e){super(e),this.state={feedItems:[]}}componentDidMount(){this._loadFeed()}_loadFeed(){let{numberOfPosts:e,shortDate:t,url:s}=this.props.config.widget.data;r.default.api.sendRequest({method:"rpc.feedwidget.getfeed",data:{url:s,numberOfPosts:e,shortDate:t},callback:{success:this._handleSuccess,failure:this._handleFailure,context:this}})}_handleSuccess(e){let t=this.props,s=e.response.results.feeditems;s.length?this.setState({feedItems:s},t.viewResolve):this._handleFailure()}_handleFailure(){let e=this.props;e.onRenderEmpty("RSS","No Feed Items"),e.viewResolve()}render(){let t=this.props.config.widget.data,s=this.state.feedItems.map((s,r)=>e.default.createElement(i.default,{showDate:s.pubDate&&t.showDate,showTitle:s.title&&t.showTitle,showDescription:s.description&&t.showDescription,item:s,key:r}));return e.default.createElement("ul",{className:"sm-feed",style:"fixed"===t.widthType&&t.width?{width:t.width}:null},s)}}d.displayName="FeedController",d.propTypes={config:s.default.object.isRequired,onRenderEmpty:s.default.func.isRequired,viewResolve:s.default.func.isRequired};var a=d;exports.default=a}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-page","sm-component-pure-render","sm-pagewidget-feed-item"]});
YUI.add("sm-pagewidget-feed-item",(function(e){SM.currentModule="sm-pagewidget-feed-item";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types"));function a(t){let{item:l}=t;return e.default.createElement("li",{className:"sm-feed-item"},t.showDate&&e.default.createElement("p",{className:"sm-text-mini sm-muted sm-feed-item-date"},l.pubDate),t.showTitle&&e.default.createElement("a",{href:l.link,className:"sm-h1 sm-feed-item-title"},l.title),t.showDescription&&e.default.createElement("div",{className:"sm-feed-item-description",dangerouslySetInnerHTML:{__html:l.description}}))}a.displayName="FeedItem",a.propTypes={showDate:l.default.bool,showTitle:l.default.bool,showDescription:l.default.bool,item:l.default.object};var r=a;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","prop-types"]});
YUI.add("sm-pagewidget-feed-view",(function(e){SM.currentModule="sm-pagewidget-feed-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var r=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("react-dom")),i=babelHelpers.interopRequireDefault(t("sm-pagewidget-base-view")),d=babelHelpers.interopRequireDefault(t("sm-pagewidget-feed-controller"));class o extends i.default{destroy(){super.destroy(),this.unmount()}init(e){super.init(e),this._containerDOMNode=this.container.getDOMNode()}unmount(){n.default.unmountComponentAtNode(this._containerDOMNode)}renderEmpty(){this.unmount(),super.renderEmpty()}render(){return new Promise(e=>{n.default.render(r.default.createElement(d.default,{config:this.config,onRenderEmpty:this.renderEmpty.bind(this),viewResolve:e}),this._containerDOMNode)})}}e.namespace("SM.PageWidget").Feed=o}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-pagewidget-base-view","sm-pagewidget-feed-controller"]});
YUI.add("sm-pagewidget-folders-view",(function(e){SM.currentModule="sm-pagewidget-folders-view";var o;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;o=e.SM.PageWidget,e.namespace("SM.PageWidget").Folders=e.extend((function e(o){e.superclass.constructor.call(this,o)}),o.Nodes,{paginationOptions:e.merge(o.Nodes.prototype.paginationOptions,{label:"folder",labelPlural:"folders"}),_emptyIcon:"Folder",_emptyMessage:"No Folders Found",_emptySelected:"No Folders Selected",_nodeType:"Folder"}),SM.currentModule=null}),"",{requires:["sm-pagewidget-base-view","sm-album-model","sm-image-model","sm-models-usernode","sm-pagewidget-nodes-view","sm-tiles-view"]});
YUI.add("sm-pagewidget-galleries-view",(function(e){SM.currentModule="sm-pagewidget-galleries-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var i=SM.import("sm-resource-core"),t=e.SM.PageWidget;function a(){a.superclass.constructor.apply(this,arguments)}t.Galleries=e.extend(a,t.Nodes,{paginationOptions:e.merge(t.Nodes.prototype.paginationOptions,{label:"gallery",labelPlural:"galleries"}),_nodeType:"Album",_emptyIcon:"Gallery",_emptyMessage:"No Galleries Found",_emptySelected:"No Galleries Selected",render:function(){var i=this,t=this.config.widget.data,r=this._getTilesConfig(t),s=t.nodeSource;if("recent"===s)return new e.Promise((function(e){i._getRecentGalleries(r).then((function(t){r.resources=t,i._precacheImages(r),i._renderTiles(r),e()}))}));"allGalleries"===s?this._getAllGalleries(r).then((function(e){r.resources=e,i._precacheImages(r),i._renderTiles(r)})):a.superclass.render.call(this)},_getRecentGalleries:function(e){var t=encodeURIComponent(this.config.user.nickName);return i.loadUri("/api/v2/album!search",{paginate:!0,start:1,count:e.paginationOptions.pageSize,data:{Scope:"/api/v2/user/"+t,SortDirection:"Descending",SortMethod:"LastUpdated"},expand:{HighlightImage:!0,"HighlightImage.ImageSizeDetails":!0}})},_getAllGalleries:function(e){var t=this.config.widget.data,a="/api/v2/user/"+encodeURIComponent(this.config.user.nickName)+"!albums",r="DateModified"===t.sortMethod?"Last Updated":"Date Added",s=t.sortDirection;return i.loadUri(a,{paginate:!0,start:1,count:e.paginationOptions.pageSize,data:{Order:r+" ("+s+")"},expand:{HighlightImage:!0,"HighlightImage.ImageSizeDetails":!0,"HighlightImage.ImageAlbum":!0}})}})}(),SM.currentModule=null}),"",{requires:["promise","sm-pagewidget-base-view","sm-album-model","sm-image-model","sm-models-usernode","sm-pagewidget-nodes-view","sm-tiles-view","sm-resource-album"]});
YUI.add("sm-pagewidget-gplusbadge-view",(function(e){SM.currentModule="sm-pagewidget-gplusbadge-view";var t,i,n,s,r;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=SM.import("lodash"),i=SM.import("rsvp"),n=t.template('https://plus.google.com/<% if (type && type === "community") { %>communities/<% } %><%- id %>'),s="Google+ is being shut down and this content block is no longer supported.",r=function(e){e.forceResize=!0,e.resize=!0,r.superclass.constructor.call(this,e);var t=e.config.widget.data;this._href=n({id:t.id,type:t.type})},e.namespace("SM.PageWidget").GooglePlusBadge=e.extend(r,e.SM.PageWidget.BaseView,{render:function(){var n=this.container,r=this.config.widget.data,o=t.clone(r.badgeOptions),d=this;return n.setStyle("textAlign",r.alignment),this.editMode&&n.setStyle("minHeight","100px"),new i.Promise((function(t,i){o.width=d._getWidth(),r.id?(o.href=d._href,e.SM.GooglePlus.renderBadge(n.getDOMNode(),r.type,o).then((function(){if(d.editMode)var i=0,o=n.one(".g-"+r.type),a=e.later(250,d,(function(){var e=parseInt(o.getStyle("height"),10);(++i>4||e)&&(a.cancel(),i>4&&!e&&d.renderEmpty("User",s),t())}),null,!0);else t()}),(function(){d.editMode&&d.renderEmpty("User",s),t()}))):(d.editMode&&d.renderEmpty("User","Enter a valid Google+ URL."),t())}))},_checkResize:function(){if(!this._resizing){var e=this,t=this.getContainerWidth();t!==this._lastWidth&&(this._resizing=!0,t<this._lastWidth||this._isShrunk?this._reRender().then((function(){e._resizing=!1})):this._resizing=!1)}},_getWidth:function(){var t,i=this.config.widget.data.badgeOptions,n=i.width,s=this.getContainerWidth(),r=e.SM.GooglePlus.BADGE_SIZES[i.layout.toUpperCase()].MIN_WIDTH;return t=s<n?Math.max(r,s):n,this._isShrunk=t<n,this._lastWidth=t,t},_reRender:function(){var n=this.container,s=this.config.widget.data,r=t.clone(s.badgeOptions),o=n.one(".g-"+s.type);return r.width=this._getWidth(),r.href=this._href,o&&o.hide(),new i.Promise((function(t){e.SM.GooglePlus.renderBadge(n.getDOMNode(),s.type,r).then((function(){o&&o.remove(!0),t()}))}))}}),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm-google-plus","sm-pagewidget-base-view"]});
YUI.add("sm-pagewidget-html-view",(function(e){SM.currentModule="sm-pagewidget-html-view";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t extends(SM.import("sm-pagewidget-base-view")){render(){!this.config.widget.data.html&&this.editMode&&this.renderEmpty("HTML","No HTML present")}}e.namespace("SM.PageWidget").Html=t;var d=t;exports.default=d}(),SM.currentModule=null}),"",{requires:["sm","sm-pagewidget-base-view"]});
YUI.add("sm-pagewidget-image-view",(function(e){SM.currentModule="sm-pagewidget-image-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("react-dom")),o=babelHelpers.interopRequireDefault(t("sm-redux-store")),s=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-page")),l=babelHelpers.interopRequireDefault(t("sm-smuglog")),h=t("sm-analytics-constants"),r=t("sm-api-redux-actions"),g=babelHelpers.interopRequireDefault(t("sm-lightbox-modal")),d=babelHelpers.interopRequireDefault(t("sm-lightbox-layout-switch-container")),u=babelHelpers.interopRequireDefault(t("sm-lightbox-wrapper")),c=t("sm-lightbox-actions"),m=t("sm-lightbox-analytics"),b=t("sm-lightbox-selectors"),_=t("sm-lightbox-constants"),f=t("sm-page-constants"),p=t("sm-catalog-actions"),w=t("sm-com-lb-actions"),x=babelHelpers.interopRequireDefault(t("sm-load-external-svg"));const C=(0,b.getLightboxImageExpansionsMap)(SM.env.buyerCurrency),I=s.default.doc.querySelector(_.LIGHTBOX_CONTAINER_SELECTOR);let L;var D=function(e){e.resize=!0,"lightbox"===e.config.widget.data.ClickAction&&this._bindLightboxHandlers(),D.superclass.constructor.call(this,e)};e.namespace("SM.PageWidget").Image=e.extend(D,e.SM.PageWidget.BaseView,{render:function(){var t=this.config.widget.data,i=t.ImageData,a=t.ClickAction,o=t.OpenInNewTab;if(i)switch(i.Status){case"Delete":case"Deleted":n.default.isOwnerOrAdmin()&&this.renderEmpty("Image","Selected Photo Has Been Deleted");break;default:if("Hidden"===i.Status&&!e.SM.Page.isOwnerOrAdmin())return;this._image=new e.SM.Models.Image(t.ImageData);var s={autoResize:!1,center:t.CenterImage,clickable:"off"!==a,containerWidth:this.getContainerWidth(),maxHeight:t.CustomHeight,maxWidth:t.CustomWidth,dataMap:{Url:"GalleryUrl"},imageCrop:t.Crop,imageSize:t.Size,resource:this._image,showInfo:t.TileInfo,infoAlignment:t.InfoAlignment,showStatus:"Hidden"===i.Status,parentNode:this.container};"custom"===t.Size?s.imageSize="fit":(s.maxHeight=0,s.maxWidth=0),this._tileView=new e.SM.Views.Tile(s),this._tileView.render();var l=this._tileView.get("container");if("lightbox"===a){this._tileView.on("tileClick",this._onTileClick,this);var h=l.one(".sm-tile-title");h&&h.on("click",this._onTileClick,this)}else if("custom"===a){var r=t.CustomURL,g=l.one("a.sm-tile-content");g.set("href",r),o&&g.set("target","_blank");var d=l.one(".sm-tile-title > a");d&&(d.set("href",r),o&&d.set("target","_blank"))}this._views.push(this._tileView)}else this.renderEmpty("Image","No Photo Selected")},_onTileClick:function(e){e.preventDefault(),this._previousScrollTop=s.default.win.scrollY||(s.default.doc.documentElement||s.default.doc.body).scrollTop||0,this._openLightbox(this._image)},_checkResize:function(){this._tileView&&this._tileView.resize()},_openLightbox:function(e){let t=!(s.default.getViewportRect().width<=f.BREAKPOINT_MEDIUM_DEVICE)&&this.config.widget.data.CommerceLightbox;this._imageUri=e.getAlbumImageUri();let i=e.get("CanBuy");i&&t&&(this._loadCatalog(),o.default.dispatch((0,c.setLightboxMode)(_.LIGHTBOX_MODE_BUY,{setInitialMode:!0}))),this._fetchAPIv2DataForLightbox();let a=e.get("Keywords"),n=!!(e.get("CanEdit")||e.get("ShowEXIF")||e.get("CanMap")||e.get("Title")||e.get("Caption")||a&&a.length>0),l=e.get("CanShare")||e.get("IsOwner")&&!e.get("IsPrivate");this._lightboxProps={imageUri:this._imageUri,imageUris:[this._imageUri],allowImageInfo:n,allowToolsMenu:!1,onCloseRequest:this._onLightboxCloseRequest,onImageDataChange:this._onLightboxImageDataChange,onModeChangeRequest:this._onLightboxModeChangeRequest,onUnlockDownloads:this._onUnlockDownloads,allowBuyButton:i,hasDownloadPassword:e.get("HasDownloadPassword"),showCommentsButton:e.get("CanComment"),showDownloadButton:e.get("CanDownload"),showEXIF:e.get("ShowEXIF"),showFilename:e.get("ShowFileName"),showMap:e.get("CanMap"),showShareButton:l,showSlideshowButton:!1},this._renderLightbox(this._lightboxProps),(0,m.trackOpenLightbox)(h.LOCATION_SINGLE_PHOTO)},_renderLightbox:function(e){a.default.render(i.default.createElement(u.default,{store:o.default},i.default.createElement(g.default,null,i.default.createElement(d.default,e))),I)},_bindLightboxHandlers:function(){this._fetchAPIv2DataForLightbox=this._fetchAPIv2DataForLightbox.bind(this),this._openLightbox=this._openLightbox.bind(this),this._onLightboxCloseRequest=this._onLightboxCloseRequest.bind(this),this._onLightboxImageDataChange=this._onLightboxImageDataChange.bind(this),this._onLightboxModeChangeRequest=this._onLightboxModeChangeRequest.bind(this),this._onUnlockDownloads=this._onUnlockDownloads.bind(this)},_fetchAPIv2DataForLightbox:function(){let e=(0,b.getLightboxMode)(o.default.getState()),t=C[e];this._needsAPIv2Data(t)&&(this._requestedAPIv2Data={...this._requestedAPIv2Data,...t},o.default.dispatch((0,r.fetchFromAPI)({uri:this._imageUri,expand:t})).catch(()=>{this._requestedAPIv2Data=null,l.default.add("sm-pagewidget-image-view",{message:"Failed to fetch APIv2 data for single photo content block",uri:this._imageUri},l.default.LEVEL_ERROR)}))},_needsAPIv2Data:function(e){return this._requestedAPIv2Data,!this._requestedAPIv2Data||!Object.keys(e).every(e=>this._requestedAPIv2Data[e])},_onLightboxCloseRequest:function(e){o.default.dispatch((0,c.reset)()),(0,m.trackCloseLightbox)(e,1),a.default.unmountComponentAtNode(I),s.default.win.scrollTo(0,this._previousScrollTop)},_onLightboxModeChangeRequest:function(e,t){let i=(0,b.getLightboxMode)(o.default.getState());o.default.dispatch((0,c.setLightboxMode)(e)),e===_.LIGHTBOX_MODE_DEFAULT?t={previousMode:i,...t}:e===_.LIGHTBOX_MODE_BUY&&this._loadCatalog(),(0,m.trackChangeLightboxMode)(e,t),this._fetchAPIv2DataForLightbox()},_loadCatalog:function(){this._catalogRequested||(this._catalogRequested=!0,o.default.dispatch((0,p.requestCatalog)(L)),o.default.dispatch((0,p.requestLightboxCatalogImages)()).then(e=>{o.default.dispatch((0,p.setCatalogPreviewImagesLookupUri)(e))}),o.default.dispatch((0,w.loadCartItemContents)()),(0,x.default)(SM.env.svgUrls.cropMask))},_onLightboxImageDataChange:function({title:e,caption:t}){void 0===e&&void 0===t||this._image.load(e=>{e?l.default.add("sm-pagewidget-image-view",{message:"Failed to refresh RPC data for image in single photo content block",error:e},l.default.LEVEL_ERROR):this._tileView.render({clear:!0})})},_onUnlockDownloads:function(){this._lightboxProps.downloadsUnlocked=!0,this._renderLightbox(this._lightboxProps)}}),n.default.on("page:init",e=>{({catalogCacheHash:L}=e)})}(),SM.currentModule=null}),"",{requires:["sm","sm-image-model","sm-pagewidget-base-view","sm-tile-view","react","react-dom","sm-redux-store","sm-dom","sm-page","sm-page-constants","sm-smuglog","sm-analytics-constants","sm-api-redux-actions","sm-lightbox-modal","sm-lightbox-layout-switch-container","sm-lightbox-actions","sm-lightbox-analytics","sm-lightbox-selectors","sm-lightbox-constants","sm-lightbox-wrapper","sm-catalog-actions","sm-com-lb-actions","sm-load-external-svg"]});
YUI.add("sm-pagewidget-images-view",(function(e){SM.currentModule="sm-pagewidget-images-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("react-dom")),o=babelHelpers.interopRequireDefault(t("sm-redux-store")),s=babelHelpers.interopRequireDefault(t("sm-dom")),l=babelHelpers.interopRequireDefault(t("sm-page")),n=babelHelpers.interopRequireDefault(t("sm-smuglog")),g=babelHelpers.interopRequireDefault(t("sm-models-imagelist")),r=babelHelpers.interopRequireDefault(t("sm-models-galleryimagelist")),h=t("sm-smuglog-constants"),d=t("sm-analytics-constants"),u=t("sm-api-redux-actions"),c=t("sm-api-redux-paginator-actions"),m=t("sm-api-redux-paginator-utils"),b=t("sm-lightbox-constants"),x=t("sm-page-constants"),p=babelHelpers.interopRequireDefault(t("sm-lightbox-layout-switch-container")),_=babelHelpers.interopRequireDefault(t("sm-lightbox-modal")),f=babelHelpers.interopRequireDefault(t("sm-lightbox-wrapper")),I=t("sm-lightbox-actions"),L=t("sm-lightbox-analytics"),w=t("sm-lightbox-selectors"),C=t("sm-lightbox-pagination-helpers"),S=t("sm-catalog-actions"),v=t("sm-com-lb-actions"),M=babelHelpers.interopRequireDefault(t("sm-load-external-svg"));const P=(0,w.getLightboxImageExpansionsMap)(SM.env.buyerCurrency),E=s.default.doc.querySelector(b.LIGHTBOX_CONTAINER_SELECTOR);let R;l.default.on("page:init",e=>{({catalogCacheHash:R}=e)}),e.namespace("SM.PageWidget").Images=e.extend((function e(t){t.resize=!0,this._isLightboxEnabled="lightbox"===t.config.widget.data.clickAction,this._isLightboxEnabled&&(this._bindLightboxHandlers(),this._galleryDownloadsUnlocked=new Set,this._lightboxViewedImages=new Set),e.superclass.constructor.call(this,t)}),e.SM.PageWidget.BaseView,{render:function(){var e,t=this,i=t.config.widget.data,a=i.imageSource||"album",o=t._getTilesConfig(i);return new Promise(s=>{if("selectedImages"===a)o.resources=new g.default({items:i.selectedImages}),t._renderTiles(o),s();else{switch(e={PageSize:o.paginationOptions.pageSize,returnModelList:!0,VisitorView:i.visitorView},a){case"keyword":e.keywords=i.keywords||"",e.nickName=i.nickname||"",o.resources=new r.default;break;case"popular":case"recent":e.NickName=t.config.user.nickName||"",e.Scope=i.scope||"",e.Limit=o.paginationOptions.pageSize,o.resources=new g.default;break;default:e.albumId=i.albumId||0,e.albumKey=i.albumKey||"",e.nodeId=i.nodeId||"",o.resources=new r.default}o.resources.load({apiCategory:a,data:e},()=>{if(t._precacheImages(o),t._renderTiles(o),o.resources.on("newPage",()=>{this._currentLightboxIndex&&(this._refreshLightboxImageModelState(),this._renderLightbox(),this._fetchAPIv2DataForLightbox())}),"popular"===a||"recent"===a){let e=o.paginationOptions.pageSize,t=o.resources.size();t>100&&n.default.add("sm-pagewidget-images-view",{message:"Multi Photo Content Block Tile Count",requestedPageSize:e,tileCount:t,imageSource:a},n.default.LEVEL_WARNING)}s()})}})},_checkResize:function(){this._tiles&&this._tiles.resize()},_hasGalleryContext(){return"album"===this.config.widget.data.imageSource},_getLightboxProps(e=this._getCurrentLightboxImage()){let t=this._tiles.get("resources"),i=t.get("TotalItems"),a=!i||t.size()===i,o=this._lightboxImageModels.map(e=>e&&e.getAlbumImageUri()),s=this._hasGalleryContext(),l={allowLoopingNavigation:a,allowToolsMenu:!1,hasGalleryContext:s,imageUris:o,onCloseRequest:this._onLightboxCloseRequest,onImageDataChange:this._onLightboxImageDataChange,onModeChangeRequest:this._onLightboxModeChangeRequest,onNavRequest:this._onLightboxNavRequest,onUnlockDownloads:this._onUnlockDownloads};if(!e)return l;let n=e.getRelated("Album"),g=e.get("Keywords"),r=s?n.get("EXIF"):e.get("ShowEXIF"),h=s?n.get("Geography"):e.get("CanMap"),d=Boolean(r||h||e.get("CanEdit")||e.get("Title")||e.get("Caption")||g&&g.length>0);return{...l,allowBuyButton:s?n.get("IsSellable"):e.get("CanBuy"),allowImageInfo:d,allowToolsMenu:!1,downloadsUnlocked:this._galleryDownloadsUnlocked.has(e.get("AlbumKey")),hasGalleryContext:s,hasDownloadPassword:s?n.get("HasDownloadPassword"):e.get("HasDownloadPassword"),imageUri:e.getAlbumImageUri(),showCommentsButton:s?n.get("Comments"):e.get("CanComment"),showDownloadButton:s?n.get("AllowDownloads")||n.get("IsOwner"):e.get("CanDownload"),showEXIF:r,showFilename:s?n.get("Filenames"):e.get("ShowFileName"),showMap:h,showShareButton:s?n.get("CanShare"):e.get("CanShare")||e.get("IsOwner")&&!e.get("IsPrivate"),showSlideshowButton:!n||n.get("Slideshow")}},_getNextLightboxIndex(){let e=this._lightboxImageModels.length;return(this._currentLightboxIndex+1)%e},_getPreviousLightboxIndex(){let e=this._lightboxImageModels.length;return(this._currentLightboxIndex-1+e)%e},_getCurrentLightboxImage(){return this._lightboxImageModels[this._currentLightboxIndex]},_getNextLightboxImage(){return this._lightboxImageModels[this._getNextLightboxIndex()]},_getPreviousLightboxImage(){return this._lightboxImageModels[this._getPreviousLightboxIndex()]},_refreshLightboxImageModelState(e){let t=this._tiles.get("resources"),i=t.get("TotalItems")||t.size(),a=t.size();this._lightboxImageModels=t.toArray(),a<i&&(this._lightboxImageModels.length=i,this._lightboxImageModels.fill(null,a)),void 0!==e&&(this._currentLightboxIndex=e)},_getPageSize:function(t,i,a){var o=t.pageSizeType;return"all"===o?1e3:e.SM.Views.Tiles.getPageSize(i,t.tileLayout,{crop:t.imageCrop,imageSize:a,pageSize:"custom"===o?t.pageSize:null})},_getTilesConfig:function(t){var i=this.getContainerWidth(),a=e.SM.Views.Tiles.PAGINATION_TYPES,o=t.clickAction,s=t.paginationType||a.INFINITE;return(!s||this.editMode&&s===a.INFINITE)&&(s=a.NONE),{autoResize:!1,clickable:"off"!==o,dataMap:{Url:"GalleryUrl",Caption:"CaptionText"},layout:t.tileLayout,pagination:s,parentNode:this.container,layoutOptions:{containerWidth:i,imageCrop:t.imageCrop,imageSize:t.imageSize,showInfo:t.tileInfo,infoHover:t.tileInfoHover,showStatus:!0,spacing:t.tileSpacing,varyHeight:t.varyHeight,infoAlignment:t.infoAlignment},paginationOptions:{label:"image",labelPlural:"images",pageSize:this._getPageSize(t,i,t.imageSize)}}},_renderTiles:function(t){t.resources.size()>0?(this._tiles=new e.SM.Views.Tiles(t),this._tiles.render(),"lightbox"===this.config.widget.data.clickAction&&this._tiles.on("tileClick",this._onTileClick,this),this.showParentNode()):this.editMode?(this.renderEmpty("Image","No Photos Found"),this.showParentNode()):this.hideColumnNode()},_onTileClick:function(e){e.preventDefault(),this._previousScrollTop=window.scrollY||(s.default.doc.documentElement||s.default.doc.body).scrollTop||0,this._isLightboxEnabled&&this._openLightbox(e.tile)},_openLightbox:function(e){if(this._hasGalleryContext()){let t=s.default.getViewportRect().width<=x.BREAKPOINT_MEDIUM_DEVICE,i=e.getRelated("Album");i&&i.get("CommerceLightbox")&&i.get("Printable")&&i.get("IsSellable")&&!t&&(o.default.dispatch((0,I.setLightboxMode)(b.LIGHTBOX_MODE_BUY,{setInitialMode:!0})),this._loadCatalog())}let t=this._tiles.get("resources").indexOf(e);this._refreshLightboxImageModelState(t),this._fetchAPIv2DataForLightbox(),this._renderLightbox(),(0,L.trackOpenLightbox)(d.LOCATION_MULTI_PHOTO);let i=this._getCurrentLightboxImage();this._lightboxViewedImages.add(i.getAlbumImageUri())},_renderLightbox:function(e=this._getLightboxProps()){a.default.render(i.default.createElement(f.default,{store:o.default},i.default.createElement(_.default,null,i.default.createElement(p.default,e))),E)},_bindLightboxHandlers:function(){this._fetchAPIv2DataForLightbox=this._fetchAPIv2DataForLightbox.bind(this),this._onLightboxCloseRequest=this._onLightboxCloseRequest.bind(this),this._onLightboxImageDataChange=this._onLightboxImageDataChange.bind(this),this._onLightboxModeChangeRequest=this._onLightboxModeChangeRequest.bind(this),this._onLightboxNavRequest=this._onLightboxNavRequest.bind(this),this._onUnlockDownloads=this._onUnlockDownloads.bind(this)},async _fetchAPIv2DataForLightbox(){let e=(0,w.getLightboxMode)(o.default.getState()),t=P[e],i=this.config.widget.data.imageSource,a=[this._getCurrentLightboxImage()];return"selectedImages"===i&&(a=[...a,this._getNextLightboxImage(),this._getPreviousLightboxImage()]),Promise.all(a.map(async e=>{if(!e||e.hasRequestedExpansions(t))return;let i=e.getAlbumImageUri();e.addRequestedExpansions(t);try{await o.default.dispatch((0,u.fetchFromAPI)({uri:i,expand:t}))}catch(a){e.clearRequestedExpansions(t),n.default.add("sm-pagewidget-images-view",{[h.FIELD_MESSAGE]:"Failed to fetch APIv2 data for multi photo content block",method:"_fetchAPIv2DataForLightbox",uri:i},n.default.LEVEL_ERROR)}})).then(this._fetchAPIv2DataPageForLightbox())},async _fetchAPIv2DataPageForLightbox(){let e,t=(0,w.getLightboxMode)(o.default.getState()),i=P[t],a=this._tiles.get("resources").toArray(),s=this.config.widget.data,{albumKey:l,keywords:g,nickname:r,imageSource:d}=s;if("selectedImages"===d)return;let u=s.visitorView?"Public":"Full";switch(d){case"keyword":e=(0,m.buildPaginatorUri)("/api/v2/albumimage!search",{Keywords:g,Scope:"/api/v2/user/".concat(r),SortMethod:"DateUploaded"});break;case"popular":e=(0,m.buildPaginatorUri)("/api/v2/user/".concat(r,"!popularalbumimages"),{MediaType:"Images",_responseLevel:u});break;case"recent":e=(0,m.buildPaginatorUri)("/api/v2/user/".concat(r,"!recentalbumimages"),{MediaType:"Images",_responseLevel:u});break;default:e="/api/v2/album/".concat(l,"!images")}let b=this._currentLightboxIndex,{start:x,count:p}=(0,C.getPageRequestSettings)(a,b,e=>!e.hasRequestedExpansions(i));if(!p)return;let _=x-1,f=a.slice(_,_+p);f.forEach(e=>e.addRequestedExpansions(i));try{await o.default.dispatch((0,c.fetchPageFromAPI)({uri:e,expand:i,data:{start:x,count:p}}))}catch(t){f.forEach(e=>e.clearRequestedExpansions(i)),n.default.add("sm-pagewidget-images-view",{[h.FIELD_MESSAGE]:"Failed to fetch APIv2 data for multi photo content block",method:"_fetchAPIv2DataPageForLightbox",uri:e},n.default.LEVEL_ERROR)}},_onLightboxCloseRequest:function(e){a.default.unmountComponentAtNode(E),o.default.dispatch((0,I.reset)()),this._currentLightboxIndex=null,s.default.win.scrollTo(0,this._previousScrollTop),(0,L.trackCloseLightbox)(e,this._lightboxViewedImages.size),this._lightboxViewedImages.clear()},_onLightboxModeChangeRequest:function(e,t){let i=(0,w.getLightboxMode)(o.default.getState());o.default.dispatch((0,I.setLightboxMode)(e)),e===b.LIGHTBOX_MODE_DEFAULT?t={previousMode:i,...t}:e===b.LIGHTBOX_MODE_BUY&&this._loadCatalog(),(0,L.trackChangeLightboxMode)(e,t),this._fetchAPIv2DataForLightbox()},_loadCatalog:function(){this._catalogRequested||(this._catalogRequested=!0,o.default.dispatch((0,S.requestCatalog)(R)),o.default.dispatch((0,S.requestLightboxCatalogImages)()).then(e=>{o.default.dispatch((0,S.setCatalogPreviewImagesLookupUri)(e))}),o.default.dispatch((0,v.loadCartItemContents)()),(0,M.default)(SM.env.svgUrls.cropMask))},_onLightboxNavRequest(e){this._currentLightboxIndex=e===b.NAV_TYPE_NEXT?this._getNextLightboxIndex():this._getPreviousLightboxIndex();let t=this._getCurrentLightboxImage();this._lightboxViewedImages.add(t.getAlbumImageUri()),this._renderLightbox(),this._loadTilesOnLightboxNavRequest(e)},_loadTilesOnLightboxNavRequest(e){let{imageSource:t}=this.config.widget.data;if(e===b.NAV_TYPE_NEXT&&("album"===t||"keyword"===t)){let e=this._tiles.get("resources"),t=this._currentLightboxIndex;if(t>=e.size()-1)return void e.loadNextPage();let i=e.get("PageSize"),a=Math.min(b.EARLY_PAGE_REQUEST_THRESHOLD,i);if(t>=e.size()-a)return void e.loadNextPage()}this._fetchAPIv2DataForLightbox()},_onLightboxImageDataChange:function({title:e,caption:t}){if(void 0===e&&void 0===t)return;let i=this._getCurrentLightboxImage();i.load(e=>{e?n.default.add("sm-pagewidget-images-view",{message:"Failed to refresh RPC data for image in multi photo content block",error:e},n.default.LEVEL_ERROR):this._tiles.render({tiles:[i]})})},_onUnlockDownloads:function(){this._galleryDownloadsUnlocked.add(this._getCurrentLightboxImage().get("AlbumKey")),this._renderLightbox()}})}(),SM.currentModule=null}),"",{requires:["react-dom","react","sm-analytics-constants","sm-api-redux-actions","sm-api-redux-paginator-actions","sm-api-redux-paginator-utils","sm-catalog-actions","sm-com-lb-actions","sm-dom","sm-models-imagelist","sm-models-galleryimagelist","sm-lightbox-actions","sm-lightbox-analytics","sm-lightbox-constants","sm-lightbox-layout-switch-container","sm-lightbox-modal","sm-lightbox-selectors","sm-lightbox-wrapper","sm-lightbox-pagination-helpers","sm-load-external-svg","sm-page","sm-pagewidget-base-view","sm-page-constants","sm-redux-store","sm-slideshow-gallery-plugin","sm-slideshow-view","sm-smuglog","sm-smuglog-constants","sm-tiles-view","sm"]});
YUI.add("sm-pagewidget-keywords-view",(function(e){SM.currentModule="sm-pagewidget-keywords-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var SM=window.SM,t=e.Template.Micro,a=SM.env.host.http+SM.env.host.cdn+"/include/js/tagcanvas/{FileName}-20140219173927.js",s=t.compile('<% var weightClassBase = "sm-keyword-", className = "sm-keywords-" + data.displayStyle; %><div class="<%= className %>"><% if (data.displayStyle === "cloud") { %><% var listId = data.canvasId + "-list"; %><canvas id="<%= data.canvasId %>" width="<%== data.canvasWidth %>" height="400"><ul><% } %><% Y.Object.each(data.keywordsData.Keywords, function (count, kw) { %><% var intCount = parseInt(count, 10), weightClass; %><% if (intCount < parseInt(data.keywordsData.one, 10)) { %><% weightClass = weightClassBase + "one"; %><% } else if (intCount >= data.keywordsData.one && intCount < data.keywordsData.two) { %><% weightClass = weightClassBase + "two"; %><% } else if (intCount >= data.keywordsData.two && intCount < data.keywordsData.three) { %><% weightClass = weightClassBase + "three"; %><% } else if (intCount >= data.keywordsData.three && intCount < data.keywordsData.four) { %><% weightClass = weightClassBase + "four"; %><% } else if (intCount >= data.keywordsData.four && intCount < data.keywordsData.five) { %><% weightClass = weightClassBase + "five"; %><% } else if (intCount >= data.keywordsData.five && intCount < data.keywordsData.six) { %><% weightClass = weightClassBase + "six"; %><% } else if (intCount >= data.keywordsData.six && intCount < data.keywordsData.seven) { %><% weightClass = weightClassBase + "seven"; %><% } else if (intCount >= data.keywordsData.seven && intCount < data.keywordsData.eight) { %><% weightClass = weightClassBase + "eight"; %><% } else if (intCount >= data.keywordsData.eight && intCount < data.keywordsData.nine) { %><% weightClass = weightClassBase + "nine"; %><% } else { %><% weightClass = weightClassBase + "ten"; %><% } %><% var scope = data.nodeScope ? "n-" + data.nodeScope + "/" : ""; %><% if (data.displayStyle === "list") { %><a class="sm-muted <%= weightClass %>" href="/keyword/<%= scope %><%= encodeURIComponent(kw) %>"><%= kw %></a> <% } else { %><li><a class="<%= weightClass %>" href="/keyword/<%= scope %><%= encodeURIComponent(kw) %>"><%= kw %></a></li><% } %><% }); %><% if (data.displayStyle === "cloud") { %></ul></canvas><% } %></div>'),i={textColour:"",textFont:"",outlineMethod:"none",depth:.8,maxSpeed:.05,reverse:!0,weight:!0,weightMode:"size",wheelZoom:!1},n=function(t){n.superclass.constructor.call(this,t),this._tagCanvasUrl=e.Lang.sub(a,{FileName:"tagcanvas-min"})};e.namespace("SM.PageWidget").Keywords=e.extend(n,e.SM.PageWidget.BaseView,{render:function(){var t=this.config.widget.data,a=this;return new e.Promise((function(s){t.keywordsData?(a.showParentNode(),"list"!==t.displayStyle&&a._isCanvasSupported()?e.Get.js(a._tagCanvasUrl,{async:!0},(function(){this.editMode?e.onceAfter("widget:rendered",(function(){a._renderCloud(t)})):a._renderCloud(t),s()})):(s(),a._renderList(t),a._fireWidgetLoaded())):(a.editMode&&(a.renderEmpty("Tags","No keywords found"),a.showParentNode()),s())}))},_fireWidgetLoaded:function(){SM.env.loggedInUser&&SM.env.loggedInUser.isAdmin&&(e.publish("widget-loaded",{broadcast:2}),e.fire("widget-loaded",{name:"keywords"}))},_renderCloud:function(t){var a=this.container,n=e.guid(),d=e.merge(t,{canvasId:n,canvasWidth:this.getContainerWidth()});a.setHTML(s(d)),e.later(100,this,(function(){try{window.TagCanvas.Start(n,null,e.merge(i))}catch(e){this._renderList(t)}this._fireWidgetLoaded()}))},_renderList:function(e){this.container.setHTML(s(e))},_isCanvasSupported:function(){return!!document.createElement("canvas").getContext}})}(),SM.currentModule=null}),"",{requires:["get","promise","sm-pagewidget-base-view"]});
YUI.add("sm-pagewidget-logo-image",(function(e){SM.currentModule="sm-pagewidget-logo-image";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),a=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-dom"));const l=t=>{let{imageHeight:a,imageWidth:l,imageUrl:i,url:u,retinaUrl:o,handleOnContextMenu:d,maskShape:s}=t,m=n.default.win.devicePixelRatio>=2,g=[{"sm-page-widget-logo-img":""===o||!m},{"sm-page-widget-logo-img-retina":""!==o&&m}],c={background:"url(".concat(o&&m?o:i,") center center"),width:l,height:a,backgroundRepeat:"no-repeat"};return"none"!==s?(c.width=c.height=Math.min(l,a)+"px",c.backgroundSize="cover"):c.backgroundSize="contain",r.default.createElement("a",{href:u},r.default.createElement("img",{"data-image-mask-shape":s,className:(0,e.default)(g),style:c,onContextMenu:d,src:SM.env.host.spacerGif}))};l.MASK_SHAPE_NONE="none",l.MASK_SHAPE_CIRCLE="circle",l.MASK_SHAPE_SQUIRCLE="squircle",l.propTypes={imageHeight:a.default.number,imageWidth:a.default.number,imageUrl:a.default.string,url:a.default.string,retinaUrl:a.default.string,handleOnContextMenu:a.default.func,maskShape:a.default.oneOf([l.MASK_SHAPE_NONE,l.MASK_SHAPE_CIRCLE,l.MASK_SHAPE_SQUIRCLE])},l.defaultProps={handleOnContextMenu:()=>{},maskShape:l.MASK_SHAPE_NONE};var i=l;exports.default=i}(),SM.currentModule=null}),"",{requires:["classnames","react","react-dom","sm","sm-dom"]});
YUI.add("sm-pagewidget-logo-layout",(function(e){SM.currentModule="sm-pagewidget-logo-layout";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("sm-pagewidget-logo-image")),i=babelHelpers.interopRequireDefault(t("sm-pagewidget-logo-text"));const o=t=>{let{alignment:a,imagePosition:o,imageUrl:u,subText:n,text:s,retinaUrl:g}=t,d=["sm-page-widget-logo-container","sm-page-widget-logo-align-".concat(a),{"sm-page-widget-logo-retina":""!==g}],p=u&&("above"===o||"left"===o),m=u&&("below"===o||"right"===o),f=s||n;return l.default.createElement("div",{className:(0,e.default)(d),"data-text-img-position":o},p&&l.default.createElement(r.default,t),f&&l.default.createElement(i.default,t),m&&l.default.createElement(r.default,t))};o.ALIGNMENT_LEFT="left",o.ALIGNMENT_CENTER="center",o.ALIGNMENT_RIGHT="right",o.propTypes={alignment:a.default.oneOf([o.ALIGNMENT_LEFT,o.ALIGNMENT_CENTER,o.ALIGNMENT_RIGHT]),imagePosition:i.default.propTypes.imagePosition,imageUrl:r.default.propTypes.imageUrl,subText:a.default.string,text:a.default.string,retinaUrl:r.default.propTypes.retinaUrl},o.defaultProps={alignment:o.ALIGNMENT_LEFT,imagePosition:i.default.IMAGE_POSITION_LEFT};var u=o;exports.default=u}(),SM.currentModule=null}),"",{requires:["classnames","react","react-dom","sm","sm-dom","sm-pagewidget-logo-image","sm-pagewidget-logo-text"]});
YUI.add("sm-pagewidget-logo-tagline",(function(e){SM.currentModule="sm-pagewidget-logo-tagline";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react"));const l=t=>{let{subText:s,subTextCaps:l,subTextColor:u,subTextSize:r,text:o,textSize:n}=t,i=u?"sm-".concat(u):"",T="upper"===l||"lower"===l?"sm-page-widget-logo-".concat(l):"",E=["sm-page-widget-logo-subtext","".concat(i),"".concat(T)];return r?E.push("sm-page-widget-logo-text-".concat(r)):E.push("sm-page-widget-logo-".concat(n)),a.default.createElement("h2",{className:(0,e.default)(E)},s)};l.TEXT_SIZE_XSMALL="xs",l.TEXT_SIZE_SMALL="s",l.TEXT_SIZE_MEDIUM="m",l.TEXT_SIZE_LARGE="l",l.TEXT_SIZE_XLARGE="xl",l.propTypes={subText:s.default.string,subTextCaps:s.default.string,subTextColor:s.default.string,subTextSize:s.default.string,textSize:s.default.oneOf([l.TEXT_SIZE_XSMALL,l.TEXT_SIZE_SMALL,l.TEXT_SIZE_MEDIUM,l.TEXT_SIZE_LARGE,l.TEXT_SIZE_XLARGE])},l.defaultProps={textSize:l.TEXT_SIZE_LARGE};var u=l;exports.default=u}(),SM.currentModule=null}),"",{requires:["classnames","react","react-dom","sm","sm-dom"]});
YUI.add("sm-pagewidget-logo-text",(function(e){SM.currentModule="sm-pagewidget-logo-text";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("sm-pagewidget-logo-tagline"));const i={left:"paddingLeft",right:"paddingRight",above:"paddingTop",below:"paddingBottom"},n=t=>{let{imagePadding:l,imagePosition:n,imageUrl:r,letterSpacing:u,lineHeight:g,subText:d,text:s,textCaps:m,textColor:p,textCustomColor:c,textFont:f,textFontWeight:I,textSize:x,url:O}=t,S={},E=p&&"custom"!==p?"sm-".concat(p):"",_="upper"===m||"lower"===m?"sm-page-widget-logo-".concat(m):"";r&&n&&(S[i[n]]=l);let T=["sm-page-widget-logo-text","sm-page-widget-logo-".concat(x),"".concat(E),"".concat(_)],M={color:"custom"===p&&c?"#".concat(c):null,fontFamily:f||null,fontWeight:f&&I?I:null,lineHeight:g?"".concat(g,"px"):null,letterSpacing:u||null};return a.default.createElement("div",{className:"sm-page-widget-logo-text-container","data-text-img-position":n,style:S},s&&a.default.createElement("a",{href:O},a.default.createElement("h1",{className:(0,e.default)(T),style:M},s)),d&&a.default.createElement(o.default,t))};n.IMAGE_POSITION_ABOVE="above",n.IMAGE_POSITION_BELOW="below",n.IMAGE_POSITION_LEFT="left",n.IMAGE_POSITION_RIGHT="right",n.propTypes={imagePadding:l.default.number,imagePosition:l.default.oneOf([n.IMAGE_POSITION_ABOVE,n.IMAGE_POSITION_BELOW,n.IMAGE_POSITION_LEFT,n.IMAGE_POSITION_RIGHT]),imageUrl:l.default.string,letterSpacing:l.default.number,lineHeight:l.default.number,subText:l.default.string,text:l.default.string,textCaps:l.default.string,textColor:l.default.string,textCustomColor:l.default.string,textFont:l.default.string,textFontWeight:l.default.number,textSize:o.default.propTypes.textSize,url:l.default.string},n.defaultProps={imagePadding:10,imagePosition:n.IMAGE_POSITION_LEFT,textSize:o.default.TEXT_SIZE_LARGE};var r=n;exports.default=r}(),SM.currentModule=null}),"",{requires:["classnames","react","react-dom","sm","sm-dom","sm-pagewidget-logo-tagline"]});
YUI.add("sm-pagewidget-logo-view",(function(e){SM.currentModule="sm-pagewidget-logo-view";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";{const t=SM.import("react"),o=SM.import("react-dom"),i=(SM.import("sm-dom"),SM.import("sm-page"),SM.import("sm-pagewidget-logo-layout"));class s extends(SM.import("sm-pagewidget-base-view")){destroy(){super.destroy(),o.unmountComponentAtNode(this._containerDOMNode)}init(e){super.init(e),this._containerDOMNode=this.container.getDOMNode()}render(){return new Promise(e=>{o.render(t.createElement(i,babelHelpers.extends({},this.config.widget.data,{handleOnContextMenu:this._onContextMenu.bind(this)})),this._containerDOMNode,e)})}_onContextMenu(t){this.config.widget.data.isProtected&&(t.preventDefault(),e.SM.Page.Tooltip.showAtXY(SM.env.rightClickMessage,t.pageX,t.pageY,{className:"sm-right-click-message"}))}}e.namespace("SM.PageWidget").Logo=module.exports=exports=s}}(),SM.currentModule=null}),"",{requires:["classnames","react","react-dom","sm","sm-fonts","sm-pagewidget-base-view","sm-page-tooltip","sm-pagewidget-logo-layout"]});
YUI.add("sm-pagewidget-map-view",(function(e){SM.currentModule="sm-pagewidget-map-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("react")),s=babelHelpers.interopRequireDefault(t("react-dom")),a=babelHelpers.interopRequireDefault(t("sm-map"));function n(e){n.superclass.constructor.call(this,e||{})}e.namespace("SM.PageWidget").Map=e.extend(n,e.SM.PageWidget.BaseView,{init:function(e){e.resize=!0,n.superclass.init.call(this,e)},destroy:function(){s.default.unmountComponentAtNode(this.container.getDOMNode()),this.mapNode=null,n.superclass.destroy.call(this)},render:function(){this._setContainerHeight(),this.images=this._getImages(),this._renderMap(),this._attachEvents()},_attachEvents:function(){this.editMode&&this._eventHandlers.push(e.after("widget:rendered",this._checkResize,this,{type:"widget:rendered"}))},_renderMap:function(){this.smugmap=s.default.render(i.default.createElement(a.default,{images:this.images}),this.container.getDOMNode())},_setContainerHeight:function(){var e=this.getContainerWidth(),t=400<e?parseInt(e/2,10):e;this.container.setStyle("height",t+"px")},_getImages:function(){return this.config.widget.data.images.map(t=>({imageKey:t.ImageKey,latitude:t.Latitude,longitude:t.Longitude,thumbnailUrl:e.SM.Models.Image.getUrl(t,"Th"),thumbnailWidth:t.Sizes.Th.width,thumbnailHeight:t.Sizes.Th.height,webUri:t.GalleryUrl,isArchive:t.IsArchive,isProcessing:t.Status===e.SM.Models.Image.STATUSES.PROCESS}))},_checkResize:function(e){e&&"resize"===e.type||this._setContainerHeight(),this.smugmap&&this.smugmap.map&&this.smugmap.map._onResize()}})}(),SM.currentModule=null}),"",{requires:["base","node","sm-image-model","sm-image-template","sm-map","sm-pagewidget-base-view","template-micro","react","react-dom"]});
YUI.add("sm-pagewidget-nav-view",(function(e){SM.currentModule="sm-pagewidget-nav-view";var a,t,i;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;a=function(e){e.resize=!0,a.superclass.constructor.call(this,e)},e.namespace("SM.PageWidget").Nav=e.extend(a,e.SM.PageWidget.BaseView,{render:function(){return this._renderView(),this},_bindEvents:function(){if(a.superclass._bindEvents.call(this),this.config.widget.data.hasContactItem){var t=this;e.use("sm-page-contact",(function(){t._eventHandlers.push(t.container.delegate("click",(function(a){var i=t.config.widget.data.style;a.preventDefault(),"horizontal"!==i&&"vertical"!==i||t._navStyleView.hideAllMenus(),e.when(e.SM.Page.contact.addContactOverlay()).then((function(){e.SM.Page.showDialog("contact")}))}),".sm-page-widget-nav-contact",t))}))}e.SM.Page.user||this._eventHandlers.push(this.container.delegate("click",(function(a){var t=this.config.widget.data.style;a.preventDefault(),"horizontal"!==t&&"vertical"!==t||this._navStyleView.hideAllMenus(),e.SM.Page.login()}),".sm-page-widget-nav-login",this))},_checkResize:function(){this._resizing||(this._resizing=!0,this._navStyleView.render(),this._resizing=!1)},_renderView:function(){var a,t=this.config.widget.data,i=this.container;switch(t.style){case"horizontal":case"vertical":a="Standard";break;case"accordion":a="Accordion";break;case"footer":a="Footer"}if(t.items&&0!==t.items.length){var s=this._navStyleView=new e.SM.PageWidget.Nav.Styles[a](e.merge(t,{container:i}));s.render(),this._views.push(s)}else"editPage"===e.SM.Page.getMode()&&this.renderEmpty("Warning","No items in this navigation menu")}}),t=e.Template.Micro,i=e.SM.Page.owner.nickName,e.namespace("SM.PageWidget.Nav").Templates={accordionItem:'<% var itemData = data.data, itemLabel = data.label, Templates = Y.SM.PageWidget.Nav.Templates; %><li id="<%= data.id %>" class="<%= data.itemClassNames.join(" ") %> sm-nav-item-toplevel<% if (itemData.active) { %> sm-page-widget-nav-activepage<% } else if (itemData.hasActive) { %> sm-page-widget-nav-hasactivepage<% } %>"><% if (itemData.type === "searchinput") { %><%== Templates.searchItem %><% } else { %><% if (itemData.type === "login") { %><%== Templates.loginItem(Y.merge(data, {className:"sm-accordion-item-label"})) %><% } else { %><a href="<%= data.url %>" data-item-id="<%= data.id %>" data-children-id="<%= data._childrenId %>" class="sm-accordion-item-label<% if (itemData.type === "contact") { %> sm-page-widget-nav-contact<% } %><% if (itemData.openInNewTab) { %>" target="_blank<% } %>"><%= itemLabel %></a><% } %><% if (data._renderedItems) { %><a class="sm-accordion-item-action" href="#"><span class="sm-fonticon sm-fonticon-small"></span></a><ul id="<%= data._childrenId %>" class="sm-accordion-children"><%== data._renderedItems %></ul><% } %><% } %></li>',accordionSubItemContainer:'<% var itemData = data.item.data; %><li id="<%= data.id %>" class="sm-accordion-item sm-nav-item sm-nav-item-sublevel<% if (itemData.active) { %> sm-page-widget-nav-activepage<% } %>"><%== data._renderedItem %></li>',accordionSubItem:'<% if (data.url) { %><% if (data.data.type === "login") { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(Y.merge(data, {className:"sm-accordion-item-label"})) %><% } else { %><a href="<%= data.url %>" class="sm-accordion-item-label<% if (data.data.type === "contact") { %> sm-page-widget-nav-contact<% } %><% if (data.data.openInNewTab) { %>" target="_blank<% } %>" data-item-id="<%= data.id %>"><%= data.label %></a><% } %><% } else { %><span class="sm-accordion-item-label" data-item-id="<%= data.id %>"><%= data.label %></span><% } %>',footerItem:t.compile('<% var itemData = data.data; %><li class="sm-page-widget-nav-toplink<% if (data.numChildren > 0) { %> sm-page-widget-nav-has-subitems<% } %><% if (itemData.active) { %> sm-page-widget-nav-activepage<% } else if (itemData.hasActive) { %> sm-page-widget-nav-hasactivepage<% } %>"><% if (itemData.type === "searchinput") { %><%== Y.SM.PageWidget.Nav.Templates.searchItem %><% } else if (itemData.type === "login") { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(Y.merge(data, {className:"sm-page-widget-nav-topitem"})) %><% } else { %><a href="<%= data.url %>" class="sm-page-widget-nav-topitem<% if (itemData.type === "contact") { %> sm-page-widget-nav-contact<% } %>"<% if (itemData.openInNewTab) { %> target="_blank"<% } %>><span class="sm-page-widget-nav-label"><%= data.label %></span></a><% } %><% if (data.numChildren > 0) { %><ul class="sm-page-widget-nav-subitems"><% for (var i = 0; i < data.children.length; ++i) { %><% var childItem = data.children[i]; %><li<% if (childItem.data.active) { %> class="<%= data.classNames.activeNode %>"<% } %>><% if (childItem.data.type === "login") { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(Y.merge(childItem, {className:"sm-page-widget-nav-subitem"})) %><% } else { %><a href="<%= childItem.url %>" class="sm-page-widget-nav-subitem<% if (childItem.data.type === "contact") { %> sm-page-widget-nav-contact<% } %>"<% if (childItem.data.openInNewTab) { %> target="_blank"<% } %>><span class="sm-pagewidget-nav-label"><%= childItem.label %></span></a><% } %></li><% } %></ul><% } %></li>'),loginItem:t.compile('<a href="<% if (Y.SM.Page.user) { %><%= SM.env.logoutURL %><% } else { %>#<% } %>" class="<%= data.className %> sm-page-widget-nav-login"><%= data.label %></a>'),mobileMenu:t.compile('<% var headerClass = "", sectionClass = ""; if (data.hasSearchItem) { headerClass="yui3-g"; sectionClass = "yui3-u-1-2"; }%><% var searchButton = Y.SM.Templates.button({icon: "Search", noChrome: true, value: "expandsearch", size: "small"}); %><div class="sm-page-widget-nav-mobile-header <%= headerClass %>"><% switch (data.alignment) { %><% case "right": %><% if (data.hasSearchItem) { %><div class="yui3-u-1-2 sm-page-widget-nav-search-expand"><%== searchButton %></div><% } %><div class="sm-page-widget-nav-menu-expand <%= sectionClass %>"><%== Y.SM.Templates.button({label: "Menu", icon: "Menu", noChrome: true, value: "expanditems", iconAlign: data.alignment}) %></div><% break; %><% case "center": %><div class="sm-page-widget-nav-menu-expand <%= sectionClass %>"<% if (data.hasSearchItem) { %> style="text-align:right;"<% } %> data-value="expanditems"><a class="sm-h5" href="#">Menu</a></div><% if (data.hasSearchItem) { %><div class="yui3-u-1-2 sm-page-widget-nav-search-expand" data-value="expandsearch"><%== searchButton %></div><% } %><% break; %><% case "left": %><div class="sm-page-widget-nav-menu-expand <%= sectionClass %>"><%== Y.SM.Templates.button({label: "Menu", icon: "Menu", noChrome: true, value: "expanditems", iconAlign: data.alignment}) %></div><% if (data.hasSearchItem) { %><div class="yui3-u-1-2 sm-page-widget-nav-search-expand"><%== searchButton %></div><% } %><% break; %><% } %><% if (data.hasSearchItem) { %><%== Y.SM.PageWidget.Nav.Templates.mobileSearchItem %><% } %></div><div class="sm-page-widget-nav-items"></div>'),popoverItem:t.compile('<li class="sm-page-widget-nav-toplink<% if (data.itemClassName) { %> <%= data.itemClassName %><% } %>"><% if (data.type === "searchinput") { %><%== Y.SM.PageWidget.Nav.Templates.searchItem %><% } else if (data.type === "contact" && !(data.isTablet && data.hasChildren)) { %><a href="#" class="sm-page-widget-nav-contact"><%= data.label %></a><% } else { %><% if (data.type === "login" && !(data.isTablet && data.hasChildren)) { %><%== Y.SM.PageWidget.Nav.Templates.loginItem(data) %><% } else { %><a href="<%= data.url %>"<% if (data.target) { %> target="<%= data.target %>"<% } %>><%= data.label %></a><% } %><% if (data.hasChildren) { %><div /><% } %><% } %></li>'),popoverItemsContainer:t.compile('<ul class="<%= data.orientation %>"></ul>'),searchItem:'<form class="sm-page-widget-nav-search" action="/search/" method="get"><input type="hidden" name="c" value="photos"><input type="hidden" name="n" value="'+i+'"><input type="text" name="q" class="sm-form-field sm-form-field-text-input" placeholder="search for photos..." /></form>',mobileSearchItem:'<form class="sm-page-widget-nav-search" action="/search/" method="get"><input type="hidden" name="c" value="photos"><input type="hidden" name="n" value="'+i+'">'+e.SM.Templates.textboxLabel({name:"q",value:"",iconSuffix:"Search"})+"</form>"},function(){var a=SM.import("lodash"),t=SM.import("sm-dom"),i=e.Node,s=e.SM.Page,n=e.SM.PageWidget.Nav.Templates,l=e.config.win,r=e.Base.create("sm-navAccordionView",e.SM.Views.Accordion,[],{itemTemplate:n.accordionItem,subItemContainerTemplate:n.accordionSubItemContainer,subItemTemplate:n.accordionSubItem,_onItemClick:function(e){(e.target.hasClass("sm-fonticon")||"#"===e.currentTarget.getAttribute("href"))&&(e.preventDefault(),r.superclass._onItemClick.call(this,e))}},{ATTRS:{mutuallyExclusive:{value:!1}}}),d=e.Base.create("sm-navMenuPlugin",e.SM.Plugin.Menu,[],{initializer:function(){this._isTablet=this.get("tabletStyle")},_attachMenuPluginEvents:function(){d.superclass._attachMenuPluginEvents.call(this),this.get("showOnHover")&&t.addEventListener(t.win,"keydown",(function(e){9===(e.keyCode||e.which)&&t.doc.activeElement===this._host.getDOMNode()&&(this._tabbingBlur=!0)}),this)},renderNode:function(a,i){this._isTablet&&!a.isRoot()&&a.hasChildren()&&("login"===a.data.type||"contact"===a.data.type||a.url&&"#"!==a.url)&&(a.prepend({children:[],data:e.clone(a.data),label:a.label,url:a.url}),a.url="#",a.data.type="url",a.children[0].data.hasActive=!1),"login"===a.data.type&&s.user&&(a.url=SM.env.logoutURL),a.label=e.Escape.html(a.label);var n=a.data,l=d.superclass.renderNode.call(this,a,i),r=l.getDOMNode(),o=t.querySelector("."+this.classNames.label,r),c=e.SM.PageWidget.Nav.Styles.Base.prototype.classNames;switch(n.hasActive&&t.classList(r).add(c.hasActiveNode),n.type){case"contact":t.classList(o).add(c.contactItem);break;case"login":t.classList(o).add(c.loginItem);break;case"node":n.active&&t.classList(r).add(c.activeNode)}return n.openInNewTab&&(o.target="_blank"),l},_afterHostBlur:function(){this._tabbingBlur&&this.hide(),delete this._tabbingBlur},_afterHostClick:function(e){return this._isTablet&&e.preventDefault(),d.superclass._afterHostClick.call(this,e)}},{NS:"menu",ATTRS:{tabletStyle:{value:!1}}});e.namespace("SM.PageWidget.Nav.Styles").Base=e.Base.create("sm-navBase",e.View,[],{classNames:{accent:"sm-page-widget-nav-color-accent",accentHover:"sm-page-widget-nav-hover-color-accent",accordion:"sm-page-widget-nav-accordion",activeNode:"sm-page-widget-nav-activepage",capitalizeSubLinks:"sm-page-widget-nav-sublinks-capitalize",capitalizeTopLinks:"sm-page-widget-nav-toplinks-capitalize",center:"sm-page-widget-nav-center",contactItem:"sm-page-widget-nav-contact",default:"sm-page-widget-nav-color-default",defaultHover:"sm-page-widget-nav-hover-color-default",emphasized:"sm-page-widget-nav-color-emphasized",emphasizedHover:"sm-page-widget-nav-hover-color-emphasized",footer:"sm-page-widget-nav-footer",hasActiveNode:"sm-page-widget-nav-hasactivepage",hasSearchItem:"sm-page-widget-nav-has-search",horizontal:"sm-page-widget-nav-popover sm-page-widget-nav-horizontal",large:"sm-page-widget-nav-l",left:"sm-page-widget-nav-left",loginItem:"sm-page-widget-nav-login",lowercaseSubLinks:"sm-page-widget-nav-sublinks-lowercase",lowercaseTopLinks:"sm-page-widget-nav-toplinks-lowercase",medium:"sm-page-widget-nav-m",mobile:"sm-page-widget-nav-mobile",muted:"sm-page-widget-nav-color-muted",mutedHover:"sm-page-widget-nav-hover-color-muted",regularSubLinks:"sm-page-widget-nav-sublinks-regular",regularTopLinks:"sm-page-widget-nav-toplinks-regular",right:"sm-page-widget-nav-right",separatorSubLinks:"sm-page-widget-nav-sublinks-separator",separatorTopLinks:"sm-page-widget-nav-toplinks-separator",small:"sm-page-widget-nav-s",vertical:"sm-page-widget-nav-popover sm-page-widget-nav-vertical",xlarge:"sm-page-widget-nav-xl",xsmall:"sm-page-widget-nav-xs"},template:e.Template.Micro.compile('<div class="<%= data.classNames %><% if (data.collapsable) { %> sm-page-widget-nav-collapsible<% } %>"></div>'),initializer:function(){this._collapseMobile=this.get("collapseMobile"),this._hasSubitems=this.get("hasSubitems"),this._hasSearchInput=this.get("hasSearchItem"),this._nodeId=s.nodeId,this._mobileMaxWidth=s.responsiveDesign.mobileMaxWidth,this._isTouchDevice="ontouchstart"in e.config.doc.documentElement||!!window.navigator.msMaxTouchPoints,this._attachNavEvents()},destructor:function(){new e.EventHandle(this._eventHandles).detach(),this._accordionView&&this._accordionView.destroy(),this._accordionView=null},render:function(){var e,a=this.get("container"),t=this._getClassNames(),i=l.innerWidth<=this._mobileMaxWidth;return(!this.rendered||i&&!this._renderedPhone||!i&&this._renderedPhone)&&(this._accordionView&&this._accordionView.destroy(),this._accordionView=null,a.empty().setHTML(this.template({collapsable:this._collapseMobile,classNames:t.join(" ")})),this._menuContainer=e=a.one("div"),this._hasSearchInput&&e.addClass(this.classNames.hasSearchItem),i?(this._renderMobile(),this._renderedPhone=!0):(this._renderDesktop(),this._renderedPhone=!1)),this.rendered=!0,this},_attachNavEvents:function(){this._eventHandles=[this.get("container").delegate("click",this._handleMobileHeaderClick,".sm-page-widget-nav-menu-expand, .sm-page-widget-nav-search-expand",this)]},_getClassNames:function(){var e=[this.classNames[this.get("style")],this.classNames[this.get("textColor")],this.classNames[this.get("hoverColor")],this.classNames[this.get("textSize")],this.classNames[this.get("alignment")],this.classNames[this.get("topLinkStyle")+"TopLinks"],this.classNames[this.get("subLinkStyle")+"SubLinks"]];return this.get("topLinkSeparator")&&e.push(this.classNames.separatorTopLinks),this.get("subLinkSeparator")&&e.push(this.classNames.separatorSubLinks),e},_renderDesktop:function(){this._menuContainer.addClass(this.classNames[this.get("style")]).removeClass(this.classNames.mobile)},_renderMobile:function(){var e,t,s,l=this._menuContainer,d=this.get("items"),o=this._hasSearchInput,c=this._collapseMobile;if(l.addClass(this.classNames.mobile).removeClass(this.classNames[this.get("style")]),t=i.create(n.mobileMenu({hasSearchItem:o,alignment:"center"})),c&&o){e=[];for(var m=0,h=d.length;m<h;m++)"searchinput"!==d[m].data.type&&e.push(d[m])}if(this._hasSubitems)s=this._accordionView=new r({items:e||d}),c?(t.one(".sm-page-widget-nav-items").setHTML(s.render().get("container")),l.setHTML(t)):l.setHTML(s.render().get("container"));else{var g=this.get("textSize"),p=d,v=i.create(n.popoverItemsContainer({orientation:"vertical"}));c&&o&&(p=e),a.forEach(p,function(e){var a=i.create(n.popoverItem({type:e.data.type,label:e.label||"",url:e.url||"",target:e.data.openInNewTab?"_blank":"",itemClassName:"",size:g,hasChildren:!1}));"node"===e.data.type&&e.data.typeInfo.NodeID===this._nodeId&&a.addClass(this.classNames.activeNode),v.append(a)}.bind(this)),c?(t.one(".sm-page-widget-nav-items").setHTML(v),l.setHTML(t)):l.setHTML(v)}},_handleMobileHeaderClick:function(e){var a=e.currentTarget.getData("value"),t=this._menuContainer;e.preventDefault(),"expanditems"===a&&t.toggleClass("sm-page-widget-nav-mobile-items-visible"),"expandsearch"===a&&t.toggleClass("sm-page-widget-nav-mobile-search-visible")}},{ATTRS:{alignment:{value:"left"},collapseMobile:{value:!1},hasSearchItem:{value:!1},items:{value:null},style:{value:"horizontal"},subLinkSeparator:{value:!1},subLinkStyle:{value:"capitalize"},textColor:{value:"default"},hoverColor:{value:"default"},textSize:{value:"m"},topLinkSeparator:{value:!1},topLinkStyle:{value:"regular"}}});var o=e.Base.create("sm-navAccordion",e.SM.PageWidget.Nav.Styles.Base,[],{_renderDesktop:function(){o.superclass._renderDesktop.call(this);var e=this._menuContainer,a=this._accordionView=new r({items:this.get("items"),activeNode:this._nodeId});e.setHTML(a.render().get("container"))}});e.namespace("SM.PageWidget.Nav.Styles").Accordion=o;var c=e.Base.create("sm-navFooter",e.SM.PageWidget.Nav.Styles.Base,[],{_renderDesktop:function(){c.superclass._renderDesktop.call(this);var e=this._menuContainer,t=this.get("items"),l=i.create("<ul></ul>");a.forEach(t,function(e){var a=e.url||"",t=e.label||"";"login"===e.data.type&&s.user&&(a=SM.env.logoutURL),l.append(n.footerItem({classNames:this.classNames,data:e.data,label:t,url:a,numChildren:e.children.length,children:e.children}))}.bind(this)),e.setHTML(l)}});e.namespace("SM.PageWidget.Nav.Styles").Footer=c;var m=e.Base.create("sm-navStandard",e.SM.PageWidget.Nav.Styles.Base,[],{initializer:function(){this._menus=[]},hideAllMenus:function(){for(var e=0,a=this._menus.length;e<a;e++)this._menus[e].hide()},_attachNavEvents:function(){m.superclass._attachNavEvents.call(this),this._eventHandles.push(this.get("container").delegate("click",(function(e){var a=e.currentTarget;a&&"#"===a.getAttribute("href")&&e.preventDefault()}),"a",this))},_renderDesktop:function(){m.superclass._renderDesktop.call(this);var t=this._menuContainer,s=this.get("style"),l=this.get("items"),r=this.get("textSize"),o="horizontal"===s,c=this._isTouchDevice,h=o?["tl-bl","tr-br","bl-tl","br-tr"]:["tl-tr","tr-tl","bl-tr","br-tl"],g=i.create(n.popoverItemsContainer({orientation:s}));t.setHTML(g),a.forOwn(l,function(a){var t,s,l=a.children&&a.children.length>0,o=c&&l?e.clone(a):a;o.data.active?s=this.classNames.activeNode:o.data.hasActive&&(s=this.classNames.hasActiveNode);var m=i.create(n.popoverItem({hasChildren:l,isTablet:c,itemClassName:s,label:o.label||"",size:r,target:o.data.openInNewTab?"_blank":"",type:o.data.type,url:o.url||""}));l&&(t=m.one(">a"),c&&(t.setAttribute("href","#"),o.url&&"#"!==o.url&&(o.data.active=!1,o.data.hasActive=!1,o.children.unshift({children:[],data:o.data,label:o.label,url:o.url}))),t.plug(d,{alignments:h,container:m.one(">div"),hideOnMouseLeave:!0,items:o.children,showOnClick:c,showOnHover:!c,tabletStyle:c})),g.append(m),t&&(t.menu.render(),this._menus.push(t.menu))}.bind(this))}});e.namespace("SM.PageWidget.Nav.Styles").Standard=m}(),SM.currentModule=null}),"",{requires:["lodash","plugin","promise","template-micro","sm-dom","sm-page-nav-login","sm-menu","sm-pagewidget-base-view","sm-accordion-view"]});
YUI.add("sm-pagewidget-nodes-view",(function(e){SM.currentModule="sm-pagewidget-nodes-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var SM=window.SM,i=SM.import("sm-resource-core");e.namespace("SM.PageWidget").Nodes=e.extend((function e(i){i.resize=!0,e.superclass.constructor.call(this,i)}),e.SM.PageWidget.BaseView,{paginationOptions:{label:"node",labelPlural:"nodes"},_nodeType:"Folder Album Page",_emptyIcon:"Document",_emptyMessage:"No Items Found",_emptySelected:"No Items Selected",render:function(){var i=this,t=i.config.widget.data,n=t.selectedIds,o=i._getTilesConfig(t);return o.resources=new e.SM.Models.UserNodeList,o.autoResize=!1,new e.Promise((function(s){n&&"selectedNodes"===t.nodeSource?(o.pagination=e.SM.Views.Tiles.PAGINATION_TYPES.NONE,i._getSelectedResources(o,n).then((function(e){o.resources=e,i._precacheImages(o),i._renderTiles(o),s()}))):t.nodeId&&t.canHaveChildren?i._getChildResources(o).then((function(e){o.resources=e,i._renderTiles(o)})):i.editMode&&("selectedNodes"===t.nodeSource?i.renderEmpty(i._emptyIcon,i._emptySelected):i.renderEmpty(i._emptyIcon,i._emptyMessage),i.showParentNode(),s())}))},_checkResize:function(){this._tiles&&this._tiles.resize()},_getChildResources:function(e){var t=this.config.widget.data,n="/api/v2/node/"+t.nodeId+"!children";return i.loadUri(n,{data:{Type:this._nodeType,SortMethod:t.sortMethod,SortDirection:t.sortDirection},paginate:!0,start:1,count:e.paginationOptions.pageSize,expand:{HighlightImage:!0,"HighlightImage.ImageSizeDetails":!0,"HighlightImage.ImageAlbum":!0,"HighlightImage.PointOfInterestCrops":!0}})},_getSelectedResources:function(e,t){return i.loadUris(this._getSelectedResourceUris(t),{expand:{HighlightImage:!0,"HighlightImage.ImageSizeDetails":!0,"HighlightImage.ImageAlbum":!0,"HighlightImage.PointOfInterestCrops":!0}})},_getSelectedResourceUris:function(e){var i,t=e.length,n=[];for(i=0;i<t;i++)n.push("/api/v2/node/"+e[i]);return n},_getPageSize:function(i,t,n){var o=i.pageSizeType;return"all"===o?1e3:e.SM.Views.Tiles.getPageSize(t,i.tileLayout,{crop:i.imageCrop,imageSize:n,pageSize:"custom"===o?i.pageSize:null})},_getTilesConfig:function(i){var t=this.getContainerWidth(),n=e.SM.Views.Tiles.PAGINATION_TYPES,o=i.paginationType||n.INFINITE;return(!o||this.editMode&&o===n.INFINITE)&&(o=n.NONE),{dataMap:{Title:"Name",Url:"WebUri",Caption:function(){return""}},layout:i.tileLayout,pagination:o,spacing:i.tileSpacing,parentNode:this.container,layoutOptions:{containerWidth:t,imageCrop:i.imageCrop,imageSize:i.imageSize,showInfo:i.tileInfo,infoHover:i.tileInfoHover,spacing:i.tileSpacing,varyHeight:i.varyHeight,showType:i.tileIcon,infoAlignment:i.infoAlignment},paginationOptions:e.merge({pageSize:this._getPageSize(i,t,i.imageSize)},this.paginationOptions)}},_renderTiles:function(i){var t=i.resources;t.totalResources||t.length?(this._tiles=new e.SM.Views.Tiles(i),this._tiles.render(),this.showParentNode()):this.editMode?(this.renderEmpty(this._emptyIcon,this._emptyMessage),this.showParentNode()):this.hideColumnNode(),SM.env.loggedInUser&&SM.env.loggedInUser.isAdmin&&(e.publish("widget-loaded",{broadcast:2}),e.fire("widget-loaded",{name:"nodes"}))}})}(),SM.currentModule=null}),"",{requires:["promise","sm-pagewidget-base-view","sm-album-model","sm-image-model","sm-models-usernodelist","sm-tiles-view"]});
YUI.add("sm-pagewidget-pages-view",(function(e){SM.currentModule="sm-pagewidget-pages-view";var s;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;s=e.SM.PageWidget,e.namespace("SM.PageWidget").Pages=e.extend((function e(s){e.superclass.constructor.call(this,s)}),s.Nodes,{paginationOptions:e.merge(s.Nodes.prototype.paginationOptions,{label:"page",labelPlural:"pages"}),_nodeType:"Page",_emptyIcon:"Document",_emptyMessage:"No Pages Found",_emptySelected:"No Pages Selected"}),SM.currentModule=null}),"",{requires:["sm-album-model","sm-image-model","sm-models-usernode","sm-pagewidget-base-view","sm-pagewidget-nodes-view","sm-tiles-view"]});
YUI.add("sm-pagewidget-profile-layout",(function(e){SM.currentModule="sm-pagewidget-profile-layout";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("lodash")),i=babelHelpers.interopRequireDefault(t("sm-component-button")),a=babelHelpers.interopRequireDefault(t("sm-dom")),l=babelHelpers.interopRequireDefault(t("sm-component-icon")),o=babelHelpers.interopRequireWildcard(t("sm-component-image")),n=babelHelpers.interopRequireDefault(t("sm-image-sizes")),r=babelHelpers.interopRequireDefault(t("sm-page")),s=babelHelpers.interopRequireDefault(t("prop-types")),c=babelHelpers.interopRequireDefault(t("sm-component-pure-render")),d=babelHelpers.interopRequireDefault(t("react")),u=babelHelpers.interopRequireDefault(t("sm-smuglog")),m=babelHelpers.interopRequireDefault(t("sm-tappable"));const p=a.default.win;class f extends c.default{constructor(e){super(e),this.state={size:"normal",socialExpanded:!1},this._handleSocialExpandClick=this._handleSocialExpandClick.bind(this),this.socialContainerRef=d.default.createRef(),this.descriptionRef=d.default.createRef(),this.displayNameRef=d.default.createRef()}componentDidMount(){this._clickHandler=a.default.addEventListener(a.default.doc.body,"click",this._handleBodyClick,this),this._setMaxHeights()}componentDidUpdate(){this._setMaxHeights()}UNSAFE_componentWillMount(){this.setState({size:h(this.props.containerWidth)})}UNSAFE_componentWillReceiveProps(e){this.setState({size:h(e.containerWidth)})}componentWillUnmount(){a.default.removeEventListener(this._clickHandler)}render(){let e,t,{size:i,nameMaxHeight:a}=this.state,l=this.renderBioImage(),o=this.renderCoverImage(),n=this.renderSocialIcons();return o?(e="visible",this._emptyCover&&(e="empty")):e="none",l?(t="visible",this._emptyBioImage&&(t="empty")):t="none",d.default.createElement("div",{className:"sm-page-widget-profile-v2-container","data-layout-bioimage":t,"data-layout-coverimage":e,"data-layout-size":i,"data-layout-social":n?"":null},o,d.default.createElement("div",{className:"sm-page-widget-profile-v2-content"},l,d.default.createElement("div",{className:"sm-page-widget-profile-v2-text"},d.default.createElement("h1",{className:"sm-page-widget-profile-v2-name",ref:this.displayNameRef,style:{maxHeight:a}},this.props.displayName),this.renderDescription()),"mobile"!==i&&n),"mobile"===i&&n)}renderBioImage(){let e,{bioImage:t,hideBioImage:i,isOwner:a}=this.props;if(!(!t&&!a||a&&i)){if(t){let i=150,a=this.state.size;"compact"===a?i=100:"mobile"===a&&(i=72);let l=g(t,i,i);e=t.get("Protected")?d.default.createElement(o.BackgroundImage,{src:l,style:{backgroundPosition:"center",backgroundSize:"cover",height:i},processing:t.get("Processing")}):d.default.createElement(o.CroppedImage,{aspectRatio:"1x1",src:l,processing:t.get("Processing")})}else e=d.default.createElement(l.default,{icon:"User"}),this._emptyBioImage=!0;return d.default.createElement("div",{className:"sm-page-widget-profile-v2-biophoto","data-empty":t?null:""},e)}}renderCollapsedSocialIcons(e){return d.default.createElement("ul",{className:"sm-page-widget-profile-v2-social-dropdown","data-expanded":this.state.socialExpanded?"":null},e.map(e=>this.renderSingleSocialIcon(e)))}renderCoverImage(){let{containerWidth:e,coverImage:t,hideCoverImage:a,isOwner:n}=this.props;if(!t&&!n||n&&a)return;let r,s="mobile"===this.state.size,c=Math.ceil(e*(s?2/3:1/3));if(t){let i=g(t,e,c);r=t.get("Protected")?d.default.createElement(o.BackgroundImage,{src:i,style:{backgroundPosition:"center",backgroundSize:"cover",height:c},processing:t.get("Processing")}):d.default.createElement(o.CroppedImage,{aspectRatio:s?"3x2":"3x1",src:i,processing:t.get("Processing"),upscale:!0})}else{let e;e=s?d.default.createElement("div",null,"Your Cover Photo can be set in your Profile."):d.default.createElement("div",null,d.default.createElement("span",null,"Your Cover Photo can be set in"),d.default.createElement(i.default,{className:"sm-page-widget-profile-v2-set-coverphoto",noChrome:!0,onClick:this.props.onSelectCoverClick},"your Profile")),r=d.default.createElement("div",null,d.default.createElement("div",{className:"sm-page-widget-profile-v2-coverimage-placeholder"},d.default.createElement(l.default,{icon:"Image"}),e))}return this._emptyCover=!t,d.default.createElement("div",{className:"sm-page-widget-profile-v2-coverimage"},r)}renderDescription(){let e=this.props.descriptionText;return e?d.default.createElement("div",{className:"sm-page-widget-profile-v2-description",dangerouslySetInnerHTML:{__html:e},ref:this.descriptionRef,style:{maxHeight:this.state.descriptionMaxHeight}}):null}renderSingleSocialIcon(e,t=!1){let a,{icon:o,name:n,url:r}=e,{iconColor:s,openLinksInNewTab:c,onContactEmailClick:u}=this.props;if(r&&"http://"!==r)return n=n.toLowerCase(),a="Link"===o&&"official"===s?"submit":this._getButtonSkin(),d.default.createElement("li",{"data-service-name":n,key:"icon-".concat(n)},d.default.createElement("a",{href:r,target:c?"_blank":null,onClick:"mail"===n?u:()=>{}},d.default.createElement(i.default,{"data-primary":t?"":null,noChrome:this._socialButtonsNoChrome(),skin:a},d.default.createElement(l.default,{icon:o}))))}renderSocialIcons(){let e,t,{iconColor:a,iconType:o,socialIcons:n,showEmail:r,onContactEmailClick:s}=this.props,c=n&&n.length;if(n&&c)return"mobile"===this.state.size?(t=!0,e=n.slice(),n=[]):c>4&&(t=!0,e=n.slice(3),n=n.slice(0,3)),d.default.createElement("div",{className:"sm-page-widget-profile-v2-social-container","data-icon-color":a,"data-icon-type":o,ref:this.socialContainerRef},d.default.createElement("ul",{className:"sm-page-widget-profile-v2-social-list"},n.map(e=>this.renderSingleSocialIcon(e,!0)),t&&d.default.createElement("li",null,d.default.createElement(m.default,{onTap:this._handleSocialExpandClick},d.default.createElement(i.default,{"data-primary":"",noChrome:this._socialButtonsNoChrome(),onClick:this._handleSocialExpandClick,skin:"official"===a?"submit":this._getButtonSkin(),title:"See more social services",value:"profile-social-expand"},d.default.createElement(l.default,{icon:"Ellipsis"}))))),t&&this.renderCollapsedSocialIcons(e))}_getButtonSkin(){let e=this.props.iconColor;return"official"===e||"none"===e?e="default":"primary"===e&&(e="submit"),e}_handleBodyClick(e){let t=e.target;a.default.closest(t,'.sm-button[data-value="profile-social-expand"]')||this.setState({socialExpanded:!1})}_handleSocialExpandClick(){this.setState({socialExpanded:!this.state.socialExpanded})}_setMaxHeights(){let t=this.displayNameRef.current,i={},a=function(e){let t=p.getComputedStyle(e),i=t["line-height"];return-1===i.indexOf("px")?i*parseInt(t["font-size"],10):parseInt(i,10)};if(t){let e=2*a(t);e&&(i.nameMaxHeight=e)}let l=this.descriptionRef.current;if(l){let e=3*a(l);e&&(i.descriptionMaxHeight=e)}e.default.isEmpty(i)||this.setState(i)}_socialButtonsNoChrome(){return"icon"===this.props.iconType}}function g(e,t,i=n.default.MAX_SIZE){let a=new n.default(e.getExpansion("ImageSizeDetails")).cover(t,i);return{height:a.DisplayHeight,url:a.Url,width:a.DisplayWidth}}function h(e){let t=r.default.responsiveDesign.mobileMaxWidth,i="normal";return e>t&&e<=800?i="compact":e<=t&&(i="mobile"),i}function b(e,t){let i=e[t];if(i)return i.isSmugMugResource?void 0===i.getExpansion("ImageSizeDetails")?u.default.error("ProfileBlock",{message:"'".concat(t,"' must have ImageSizeDetails expanded."),image:i}):void 0:u.default.error("ProfileBlock",{message:"'".concat(t,"' must be a Resource instance representing an Image or AlbumImage."),image:i})}f.MAX_PRIMARY_ICONS=4,f.SIZE_COMPACT="compact",f.SIZE_MOBILE="mobile",f.SIZE_NORMAL="normal",f.propTypes={bioImage:b,containerWidth:s.default.number.isRequired,coverImage:b,descriptionText:s.default.string,displayName:s.default.string,hideBioImage:s.default.bool,hideCoverImage:s.default.bool,iconColor:s.default.oneOf(["accent","default","official","primary"]),iconType:s.default.oneOf(["button-circle","button-square","icon"]),isOwner:s.default.bool,onSelectCoverClick:s.default.func,openLinksInNewTab:s.default.bool,socialIcons:s.default.arrayOf(s.default.shape({icon:s.default.string.isRequired,name:s.default.string.isRequired,url:s.default.string.isRequired}))},f.defaultProps={hideBioImage:!1,hideCoverImage:!1,iconColor:"default",iconType:"button-square",isOwner:!1,onSelectCoverClick:()=>{},openLinksInNewTab:!1};var v=f;exports.default=v}(),SM.currentModule=null}),"",{requires:["lodash","react","sm","sm-component-button","sm-component-icon","sm-component-image","sm-component-pure-render","sm-dom","sm-image-sizes","sm-page","sm-smuglog","sm-tappable"]});
YUI.add("sm-pagewidget-profile-view",(function(e){SM.currentModule="sm-pagewidget-profile-view";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule},i=SM._requireShim;!function(){"use strict";babelHelpers.interopRequireDefault(i("sm-dom"));var t=babelHelpers.interopRequireDefault(i("sm-page")),r=babelHelpers.interopRequireDefault(i("react")),o=babelHelpers.interopRequireDefault(i("react-dom")),a=babelHelpers.interopRequireDefault(i("sm-resource-core")),s=babelHelpers.interopRequireDefault(i("sm-pagewidget-base-view")),l=babelHelpers.interopRequireDefault(i("sm-pagewidget-profile-layout")),n=babelHelpers.interopRequireDefault(i("sm-panel-profile-editor-launcher"));class c extends s.default{constructor(e){e.resize=!0,e.forceResize=!0,super(e)}destroy(){super.destroy(),o.default.unmountComponentAtNode(this._containerDOMNode)}init(e){super.init(e),this._createResources(),this._containerDOMNode=this.container.getDOMNode()}render(){let{hideBioImage:e,hideCoverImage:i,iconColor:a,iconType:s,openLinksInNewTab:n,showEmail:c,socialIcons:d}=this.config.widget.data;return new Promise(u=>{o.default.render(r.default.createElement(l.default,{bioImage:this._bioImageResource,containerWidth:this.getContainerWidth(),coverImage:this._coverImageResource,descriptionText:this._getDescriptionText(),displayName:this._getDisplayName(),hideBioImage:e,hideCoverImage:i,iconColor:a,iconType:s,isOwner:t.default.isOwnerOrAdmin(),onSelectCoverClick:this._onSelectCoverClick,onContactEmailClick:this._handleContactEmailClick.bind(this),openLinksInNewTab:n,showEmail:c,socialIcons:d}),this._containerDOMNode,u)})}_checkResize(){this._reRendering||(this._reRendering=!0,this.render().then(()=>{this._reRendering=!1}))}_handleContactEmailClick(i){i.preventDefault(),SM.load("sm-page-contact").then(i=>{e.when(i.addContactOverlay()).then(()=>{t.default.showDialog("contact")})})}_createResources(){let{hideBioImage:e,hideCoverImage:i,resourceData:t}=this.config.widget.data;if(t.userProfile){this._usingProfile=!0;let r=this._profileResource=a.default.loadLocal(t.userProfile);e||(this._bioImageResource=r.getExpansion("BioImage")),i||(this._coverImageResource=r.getExpansion("CoverImage"))}else t.coverImage&&(this._coverImageResource=a.default.loadLocal(t.coverImage)),t.bioImage&&(this._bioImageResource=a.default.loadLocal(t.bioImage))}_getDescriptionText(){return this._usingProfile?this._profileResource.get("BioText"):this.config.widget.data.displayText}_getDisplayName(){return this._usingProfile?this._profileResource.get("DisplayName"):this.config.widget.data.displayName}_onSelectCoverClick(){(0,n.default)(t.default.owner.nickName)}}e.namespace("SM.PageWidget").Profile=module.exports=exports=c}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-dom","sm-page","sm-pagewidget-base-view","sm-pagewidget-profile-layout","sm-panel-profile-editor-launcher","sm-resource-core"]});
YUI.add("sm-pagewidget-search-form",(function(e){SM.currentModule="sm-pagewidget-search-form";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),l=babelHelpers.interopRequireDefault(t("sm-component-textbox"));class u extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"formRef",e.default.createRef()),babelHelpers.defineProperty(this,"state",{error:null,query:""}),babelHelpers.defineProperty(this,"_onInputBlur",()=>{this.inputValidator()}),babelHelpers.defineProperty(this,"_onInputChange",e=>{this.setState({query:e.target.value})}),babelHelpers.defineProperty(this,"_onSubmit",e=>{if(!this.inputValidator({onSubmit:!0}))return void e.preventDefault();if(this._resubmitting)return;let t,r=this.props;if(r.requireNumeric&&r.queryLength&&(t=this.padQuery(t)),r.queryTemplate&&(t=this.modifyQuery(t)),r.onSubmit){e.preventDefault();let a=e.currentTarget.elements;r.onSubmit({c:a.c.value,n:a.n.value,scope:a.scope.value,scopeValue:a.scopeValue.value,q:t||this.state.query})}else t&&(e.preventDefault(),this.setState({query:t},()=>{this._resubmitting=!0,this.formRef.current.submit()}))})}render(){let{alignment:t,category:r,displaySearchButton:u,nickName:n,scopeType:s,scopeValue:i,searchButtonText:o}=this.props,c=""===this.state.query.trim();return e.default.createElement("div",{style:{textAlign:t}},e.default.createElement("form",{action:"/search/",className:"sm-search-form","data-scopetype":s,method:"get",onSubmit:this._onSubmit,ref:this.formRef},e.default.createElement(l.default,{name:"n",type:"hidden",value:n||""}),e.default.createElement(l.default,{name:"scope",type:"hidden",value:"node"}),e.default.createElement(l.default,{name:"scopeValue",type:"hidden",value:i||""}),e.default.createElement(l.default,{name:"c",type:"hidden",value:r}),"visitor"===s?this.renderPickerButton():null,this.renderSearchBox(),!!u&&e.default.createElement(a.default,{className:"sm-search-form-submit",disabled:c,size:"small",skin:c?"default":"accent",type:"submit",value:"search"},o)))}renderPickerButton(){let t=this.props,r=e.default.createElement(a.default,{className:"sm-search-form-picker-launch",onClick:t.onPickerButtonClick,size:"small",skin:"accent",value:"launchPicker"},t.pickerButtonText);return t.pickerLabel?e.default.createElement("label",null,t.pickerLabel,r):r}renderSearchBox(){let t=this.props,r=this.state.error,a=e.default.createElement("span",{className:"sm-search-form-input-container"},e.default.createElement(l.default,{className:"sm-search-form-input",error:!!r,name:"q",onBlur:this._onInputBlur,onChange:this._onInputChange,placeholder:t.placeholder||"search for ".concat(t.category,"..."),type:"text",value:this.state.query}),r?e.default.createElement("div",{className:"sm-form-field-error-msg"},r):null);return t.queryLabel?e.default.createElement("label",null,t.queryLabel,a):a}inputValidator(e={}){let t=!0,r=null,a=this.state.query;return e.onSubmit&&""===a.trim()?(r="Please enter a search term.",t=!1):this.props.requireNumeric&&isNaN(a)&&(r="Please enter a number.",t=!1),this.setState({error:r}),t}modifyQuery(e){return e||(e=this.state.query),this.props.queryTemplate.replace("{query}",e)}padQuery(e){e||(e=this.state.query);let t=this.props.queryLength;return!t||e.length>=t?e:new Array(t-e.length+1).join("0")+e}}exports.default=u,babelHelpers.defineProperty(u,"propTypes",{alignment:r.default.oneOf(["left","center","right"]),category:r.default.oneOf(["folders","galleries","pages","photos","videos"]),displaySearchButton:r.default.bool,nickName:r.default.string,onPickerButtonClick:r.default.func,onSubmit:r.default.func,pickerButtonText:r.default.string,pickerLabel:r.default.string,placeholder:r.default.string,queryLabel:r.default.string,queryLength:r.default.number,queryTemplate:r.default.string,requireNumeric:r.default.bool,scopeType:r.default.oneOf(["custom","default","entire","visitor"]),scopeValue:r.default.node,searchButtonText:r.default.string}),babelHelpers.defineProperty(u,"defaultProps",{alignment:"left",category:"photos",displaySearchButton:!0,pickerButtonText:"Browse",requireNumeric:!1,scopeType:"default",searchButtonText:"Search"}),babelHelpers.defineProperty(u,"displayName","Widget.SearchForm")}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-component-textbox"]});
YUI.add("sm-pagewidget-search-view",(function(e){SM.currentModule="sm-pagewidget-search-view";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=babelHelpers.interopRequireDefault(t("react")),i=babelHelpers.interopRequireDefault(t("react-dom")),a=babelHelpers.interopRequireDefault(t("sm-pagewidget-base-view")),o=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-pagewidget-search-form")),c=t("sm-uri-deprecated");class s extends a.default{init(...e){super.init(...e),this._loadAndShowPicker=this._loadAndShowPicker.bind(this)}destroy(){super.destroy(),i.default.unmountComponentAtNode(this.container.getDOMNode())}render(){this._renderComponent()}_getPickerConfig(){if(!this._pickerConfig){let e=this.config.widget.data;this._pickerConfig={closeOnPasswordCancel:!0,disableBreadCrumbs:!0,disableEmpty:1,disablePages:1,disableThumbOverflow:!0,limit:1,nickName:e.nickName,startPath:e.visitorStartPath,title:"Select a Folder or Gallery"}}return this._pickerConfig}_handlePickerClose(e){if("sm-picker:pickerCancel"===e.pickType||!e.selectedData.length)return;let t=e.selectedData[0].typeInfo,r=this._pickerConfig.preSelected=t.NodeID;this._renderComponent({pickerButtonText:"Selected: ".concat(t.Name),scopeValue:r})}_loadAndShowPicker(t){let r=e.one(t.currentTarget);var i=this._getPickerConfig();SM.load("sm-picker-plugin").then(()=>{r.pickerplugin||(r.plug(e.SM.Plugin.Picker,{pickerMode:e.SM.Picker.MODE_NODE,pickerConfig:i,skinned:!0,triggerMode:!0}),this._eventHandlers.push(r.pickerplugin.after("hidingPicker",this._handlePickerClose,this))),r.pickerplugin.showPicker(i)})}_onFormSubmit(e){let t,r=e.q,i=e.scopeValue,a=this.config.widget.data;"keyword"===a.resultsLocation?(t="/keyword/"+(i&&"0"!==i?"n-"+i+"/":"")+encodeURIComponent(r),a.redirectUrlBase&&(t=a.redirectUrlBase+t)):a.redirectUrlBase&&(t=a.redirectUrlBase+"/search/?"+(0,c.stringifyQuery)({c:e.c,n:e.n,scope:e.scope,scopeValue:i,q:r})),o.default.doc.location.href=t}_renderComponent(e){let t,a=Object.assign({},this.config.widget.data,e);("keyword"===a.resultsLocation||a.redirectUrlBase)&&(t=this._onFormSubmit.bind(this)),i.default.render(r.default.createElement(n.default,{alignment:a.alignment,category:a.category,displaySearchButton:a.displaySearchButton,nickName:a.nickName,onPickerButtonClick:this._loadAndShowPicker,onSubmit:t,pickerButtonText:a.pickerButtonText,pickerLabel:a.pickerLabel,placeholder:a.placeholder,queryLabel:a.queryLabel,queryLength:a.queryLength,queryTemplate:a.queryTemplate,requireNumeric:a.requireNumeric,scopeType:a.scopeType,scopeValue:a.scopeValue,searchButtonText:a.searchButtonText,visitorScoped:a.visitorScoped}),this.container.getDOMNode())}}exports.default=s,e.namespace("SM.PageWidget").Search=s}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-dom","sm-pagewidget-base-view","sm-uri-deprecated","sm-pagewidget-search-form"]});
YUI.add("sm-pagewidget-slideshow-view",(function(e){SM.currentModule="sm-pagewidget-slideshow-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var a=SM._requireShim;!function(){"use strict";var s=babelHelpers.interopRequireDefault(a("sm-models-galleryimagelist")),i=babelHelpers.interopRequireDefault(a("sm-image-model")),t=babelHelpers.interopRequireDefault(a("sm-models-imagelist"));e.namespace("SM.PageWidget").Slideshow=e.extend((function e(a){e.superclass.constructor.call(this,a)}),e.SM.PageWidget.BaseView,{render:function(){var a,l,d,r=this,o=this.config.widget.data,n=o.galleryData,m=n.galleryType,u={returnModelList:!0,idCopy:!0},g=s.default,w=!0;switch(this.editMode?(o.autoStart=!1,o.transition="none"):o.splashImageData&&(o.splashImage=new i.default(o.splashImageData)),m){case"popular":case"recent":g=t.default,w=!1,u.NickName=n.nickName,u.Limit=50;break;case"selectedImages":if(!o.selectedImages||!o.selectedImages.length){d=!0;break}g=t.default,w=!1;break;case"keyword":if(!n.keywords){d=!0;break}u.keywords=n.keywords||"",u.nickName=n.nickName||"",u.PageNumber=1,u.PageSize=40,o.randomize&&(u.randomize=+new Date),o.randomize=!1;break;default:if(!n.albumId&&!n.albumKey){d=!0;break}m="album",u.albumId=n.albumId||0,u.albumKey=n.albumKey||"",u.PageNumber=1,u.PageSize=40,o.randomize&&(u.randomize=+new Date),o.randomize=!1}if(d)this.editMode||e.SM.Page.isOwnerLoggedIn()?(this.renderEmpty("Gallery","No Photos Found"),this.showParentNode()):this.hideColumnNode();else{if(a=new g,"selectedImages"===m&&a.add(o.selectedImages),o.modelList=a,"selectedImages"!==m)return new e.Promise((function(s,i){a.load({apiCategory:n.galleryType,data:u,prefetchNext:!0,prefetchPrev:!0},(function(t){t||!a.size()?d=!0:(l=new e.SM.Views.Slideshow(o),w&&l.plug(e.SM.SlideshowGalleryPlugin),r.container.setHTML(l.get("container")),r._views.push(l),r._loaded=!0,r._slideshow=l),d?(r.editMode?(r.renderEmpty("Gallery","No Photos Found"),r.showParentNode()):r.hideColumnNode(),t&&i(t)):(r.showParentNode(),l&&l.render(),s(l))}))}));this.showParentNode(),l=new e.SM.Views.Slideshow(o),r.container.setHTML(l.get("container")),l.render(),r._views.push(l),r._loaded=!0,r._slideshow=l}}})}(),SM.currentModule=null}),"",{requires:["sm-album-model","sm-image-model","sm-models-galleryimagelist","sm-models-imagelist","sm-pagewidget-base-view","sm-slideshow-view","sm-slideshow-gallery-plugin"]});
YUI.add("sm-pagewidget-socialbuttons-view",(function(e){SM.currentModule="sm-pagewidget-socialbuttons-view";var t,o,n;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.SM.Facebook.LIKE_BUTTON_OPTIONS,o=e.Template.Micro,e.SM.GooglePlus,n=o.compile('<li class="<%== data.serviceName %><% if (data.buttonLayout === "horizontal") { %> yui3-u<% } %>"></li>'),e.namespace("SM.PageWidget").SocialButtons=e.extend((function e(t){e.superclass.constructor.call(this,t)}),e.SM.PageWidget.BaseView,{render:function(){var t=this;return new e.Promise((function(o){var n=t.container,i=t.config.widget.data,a=e.Node.create("<ul></ul>"),r=i.buttons.length,u=0,s=["align-"+i.alignment,i.buttonLayout,i.countPosition+"-count"];n.setHTML(a).addClass(s.join(" ")),e.Array.each(i.buttons,(function(e){t["_render"+e](a).then((function(){++u===r&&o()}))}))}))},_renderFacebook:function(o){var i,a=this.config.widget.data,r=new e.SM.Facebook;return i=o.appendChild(n({buttonLayout:a.buttonLayout,serviceName:"facebook"})),r.renderLikeButton(i,{action:t.ACTION.LIKE,colorScheme:t.COLOR_SCHEME.LIGHT,font:t.FONT.ARIAL,href:a.url,layout:"horizontal"===a.countPosition?t.LAYOUT.BUTTON_COUNT:t.LAYOUT.BOX_COUNT,send:!1,showFaces:!1})},_renderGooglePlus:function(e){return Promise.resolve()},_renderTwitter:function(t){var o,i=this.config.widget.data,a=new e.SM.Twitter;return o=t.appendChild(n({buttonLayout:i.buttonLayout,serviceName:"twitter"})),a.renderTweetButton(o,{TweetCountPosition:i.countPosition,TweetHashtag:i.tweetHashtag,TweetShowCount:!0,url:i.url})}}),SM.currentModule=null}),"",{requires:["sm-facebook","sm-twitter","sm-google-plus","sm-pagewidget-base-view"]});
YUI.add("sm-pagewidget-video-view",(function(e){SM.currentModule="sm-pagewidget-video-view";var i,t;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;i=SM.import("sm-page"),t=function(e){e.resize=!0,t.superclass.constructor.call(this,e)},e.namespace("SM.PageWidget").Video=e.extend(t,e.SM.PageWidget.BaseView,{render:function(){var t,d,s=this.config.widget.data,r=this.container,n=s.size,o=!this.editMode&&s.autoPlay;if(s.imageInfo)if(s.imageInfo.IsVideo){t=this.getContainerWidth(),this._cachedContainerWidth=t,d=new e.SM.Models.Image(s.imageInfo),"960"===n&&(n="1280"),n="auto"===n||n>t?d.getLargestVideoSizeForContainer(t):d.getLargestVideoSize(n);var a=d.get("Sizes")[n];this._videoView=new e.SM.Views.Video({model:d,size:n,autoPlay:o,center:s.centerVideo,canShare:s.showShare,width:Math.min(a.width,t),height:a.height}),r.setHTML(this._videoView.get("container")),this._videoView.render(),this._views.push(this._videoView)}else this.renderEmpty("VideoCamera","No Video Selected");else if(s.isDeleted)i.isOwnerOrAdmin()&&this.renderEmpty("VideoCamera","Selected Video Has Been Deleted");else{if(s.isPrivate)return;this.renderEmpty("VideoCamera","No Video Selected")}},_checkResize:function(i){if(!this._resizing&&window.innerHeight!=screen.height){var t=this.getContainerWidth();e.UA.chrome&&this._cachedContainerWidth<t||this._cachedContainerWidth!==t&&(this._resizing=!0,this._cachedContainerWidth=t,this._videoView&&this._videoView.destroy(),this.render(),this._resizing=!1)}}}),SM.currentModule=null}),"",{requires:["sm-album-model","sm-image-model","sm-page","sm-pagewidget-base-view","sm-video-view"]});
YUI.add("sm-pagewidget-vimeo-view",(function(e){SM.currentModule="sm-pagewidget-vimeo-view";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("react-dom")),d=babelHelpers.interopRequireDefault(t("sm-vimeo"));const a={small:{width:560,height:315},medium:{width:640,height:360},large:{width:853,height:480},xlarge:{width:1280,height:720}};class s extends(SM.import("sm-pagewidget-base-view")){constructor(e){super(Object.assign(e,{resize:!0}))}render(){let e=this.container.getDOMNode(),t=this.config.widget.data,a=this._getIframeSize(t.size);t.videoId?r.default.render(i.default.createElement(d.default,{center:t.centerVideo,id:t.videoId,width:a.width,height:a.height,autoplay:t.autoPlay&&!this.editMode}),e):this.renderEmpty("Vimeo","No Video Selected")}_getIframeSize(e){let t,i,r=this.container.getDOMNode().clientWidth;return"scaleToFit"===e?(t=r,i=.56*t):(t=a[e].width,i=a[e].height,t>r&&(t=r,i=.56*t)),this._width=t,{height:i,width:t}}_checkResize(){let e,t,i=this.config,r=this._width;this._resizing||(this._resizing=!0,e=this.container,t=this._getIframeSize(i.widget.data.size),e&&t.width!==r&&this.render(),this._resizing=!1)}}e.namespace("SM.PageWidget").Vimeo=s;var h=s;exports.default=h}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-pagewidget-base-view","sm-vimeo"]});
YUI.add("sm-pagewidget-wufoo-view",(function(e){SM.currentModule="sm-pagewidget-wufoo-view";var o,r;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;o=e.Template.Micro.compile('<div id="wufoo-<%= data.formHash %>">Fill out my <a href="<%= data.formLink %>">online form</a></div>'),r=function(e){r.superclass.constructor.call(this,e),this._wufooUrl=("https:"===document.location.protocol?"https://secure.":"http://www.")+"wufoo.com/scripts/embed/form.js"},e.namespace("SM.PageWidget").Wufoo=e.extend(r,e.SM.PageWidget.BaseView,{render:function(){var o=this.config.widget.data,r=this;if(o.formLink&&o.userName&&o.formHash)return new e.Promise((function(i,t){var n={async:!0,autoResize:!0,formHash:o.formHash,header:o.hideHeader?"hide":"show",resizeDone:function(){r._resolved||(i(),r._resolved=!0)},ssl:!0,userName:o.userName};window.WufooForm?r._renderForm(n):e.Get.js(r._wufooUrl,{onSuccess:function(){r._renderForm(n)},onFailure:function(){r._showError("Error loading Wufoo Javascript."),t()}})}));this._showError("Enter a valid Wufoo shortlink.")},_renderForm:function(e){var r,i=this.container,t=this.config.widget.data;i.setHTML(o({formHash:t.formHash,formLink:t.formLink,showLink:t.showLink}));try{(r=new window.WufooForm).initialize(e),r.display()}catch(e){}},_showError:function(o){"editPage"===e.SM.Page.getMode()&&this.renderEmpty("Warning",o)}}),SM.currentModule=null}),"",{requires:["get","promise","template-micro","sm-pagewidget-base-view"]});
YUI.add("sm-pagewidget-youtube-view",(function(e){SM.currentModule="sm-pagewidget-youtube-view";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";{SM.import("sm-dom");const t=SM.import("react"),i=SM.import("react-dom"),r=SM.import("sm-youtube"),s={small:{width:560,height:315},medium:{width:640,height:360},large:{width:853,height:480},xlarge:{width:1280,height:720}},d="scaleToFit",h=.56;class a extends(SM.import("sm-pagewidget-base-view")){constructor(e){e.resize=!0,super(e)}render(){let e=this.config,s=this.container.getDOMNode(),d=e.widget.data,h=this._getIframeSize(d.size);d.id||d.playlistId?i.render(t.createElement(r,{center:d.centerVideo,id:d.id,playlistId:d.playlistId,width:h.width,height:h.height,autoplay:d.autoPlay&&!this.editMode}),s):this.renderEmpty("YouTube","No Video Selected")}_getIframeSize(e){let t,i,r=this.container.getDOMNode().clientWidth;return e===d?(t=r,i=parseInt(t*h,10)):(t=s[e].width,i=s[e].height,t>r&&(t=r,i=parseInt(t*h,10))),this._width=t,{height:i,width:t}}_checkResize(){let e,t,i=this.config,r=this._width;this._resizing||(this._resizing=!0,e=this.container,t=this._getIframeSize(i.widget.data.size),e&&t.width!==r&&this.render(),this._resizing=!1)}}e.namespace("SM.PageWidget").YouTube=module.exports=exports=a}}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-pagewidget-base-view","sm-youtube"]});
YUI.add("sm-panel-alert-deprecated",(function(e){SM.currentModule="sm-panel-alert-deprecated";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var a=babelHelpers.interopRequireDefault(t("sm-component-button")),s=babelHelpers.interopRequireDefault(t("sm-icon"));e.namespace("SM.Panel").Alert=e.Base.create("panel-alert",e.SM.Panel,[],{messageTemplate:'<div class="sm-text-center"><%== Y.SM.Templates.svgIcon({ icon: data.icon, iconSize: data.iconSize }) %><div class="sm-panel-message sm-h3 sm-emphasized"><% if (data.rawMessage) { %><%== data.rawMessage %><% } else { %><%= data.message %><% } %></div></div>',initializer:function(e){this._eventHandles=[],e.width||this.set("width",336),this.after("render",this._onceRender,this)},destructor:function(){e.Array.each(this._eventHandles,(function(e){e.detach()}))},_onceRender:function(){var t,n,i=this.get("boundingBox"),l=this.get("type"),r=this.get("message"),o=e.Template.Micro.compile(this.messageTemplate);switch(l){case"error":n="Warning3Colored";break;case"info":n="InfoColored";break;default:n="WarningColored"}i.addClass(this.getClassName("alert")),i.addClass(this.getClassName("alert-"+l)),this.setStdModContent(e.WidgetStdMod.BODY,o({icon:n,iconSize:s.default.SIZE_LARGE,message:r,rawMessage:this.get("rawMessage")})),t=e.Node.create(e.SM.Templates.button({className:"sm-button-full-width",label:this.get("buttonLabel"),skin:a.default.SKIN_ACCENT})),this.setStdModContent(e.WidgetStdMod.FOOTER,t),this._eventHandles.push(t.on("click",this._onButtonClick,this)),t.focus(),this.centered()},_onButtonClick:function(e){e.preventDefault(),this.hide()}},{CSS_PREFIX:"sm-panel",ATTRS:{type:{value:"warning"},message:{},buttonLabel:{value:"OK"},modal:{value:!0,readOnly:!0},hideOn:{value:[],readOnly:!0},centered:{value:!0,readOnly:!0},rawMessage:{}}}),e.SM.Panel.alert=function(t,a){return a=e.merge(a,{message:t,render:!0}),new e.Promise((function(t){var s=new e.SM.Panel.Alert(a);s.on("visibleChange",(function(e){e.newVal||(s.destroy(),t())}))}))}}(),SM.currentModule=null}),"",{requires:["template-micro","sm-panel","sm-templates-button","sm-templates-icon","sm-icon","sm-component-button"]});
YUI.add("sm-panel-alert",(function(e){SM.currentModule="sm-panel-alert";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),l=babelHelpers.interopRequireDefault(t("sm-component-busy")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),r=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-modal")),u=babelHelpers.interopRequireDefault(t("sm-component-panel"));const o=e=>{let{applyUserSkin:t,cancelDataTestId:o,cancelLabel:d,children:c,className:i,confirmButtonProps:f,confirmDataTestId:m,confirmLabel:p,iconName:b,isBusy:E,isDestructive:D,message:y,onCancel:S,onConfirm:C,panelDataTestId:N,title:I,titleDataTestId:g}=e,R=(0,a.useRef)(null),T=(0,a.useRef)(null);if((0,a.useEffect)(()=>{T.current?T.current.focus():R.current&&R.current.focus()},[]),E)return a.default.createElement(s.default,{applyUserSkin:t,closeOnEscape:!1},a.default.createElement(l.default,null));let M=Boolean(S&&C),q=D?n.default.SKIN_DESTRUCTIVE:n.default.SKIN_ACCENT;return a.default.createElement(s.default,{applyUserSkin:t,closeOnEscape:M,onClose:M?S:null},a.default.createElement(u.default,{"data-testid":N},a.default.createElement(u.default.Body,{className:"sm-alert-body ".concat(i)},a.default.createElement("div",{className:"sm-alert-header sm-text-center"},b&&a.default.createElement(r.default,{name:b}),a.default.createElement("div",{className:"sm-h3 sm-emphasized","data-testid":g,role:"heading"},I)),y&&a.default.createElement("p",null,y),c),(C||S)&&a.default.createElement(u.default.Buttons,null,S&&a.default.createElement(n.default,{skin:C?n.default.SKIN_SECONDARY:q,onClick:S,"data-testid":o,ref:R},d),C&&a.default.createElement(n.default,babelHelpers.extends({},f,{skin:q,onClick:C,"data-testid":m,ref:T}),p))))};o.displayName="PanelAlert",o.propTypes={applyUserSkin:e.default.bool,cancelDataTestId:e.default.string,cancelLabel:e.default.string,confirmButtonProps:e.default.object,confirmDataTestId:e.default.string,confirmLabel:e.default.string,iconName:e.default.string,isBusy:e.default.bool,isDestructive:e.default.bool,message:e.default.string,onCancel:e.default.func,onConfirm:e.default.func,panelDataTestId:e.default.string,title:e.default.node.isRequired,titleDataTestId:e.default.string},o.defaultProps={cancelLabel:"Cancel",className:"",confirmLabel:"Confirm",iconName:"WarningColored",isBusy:!1};var d=o;exports.default=d}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-busy","sm-component-button","sm-icon","sm-modal","sm-component-panel"]});
YUI.add("sm-panel-confirm",(function(e){SM.currentModule="sm-panel-confirm";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var n=babelHelpers.interopRequireDefault(t("sm-dom-core")),i=babelHelpers.interopRequireDefault(t("sm-component-button")),s=babelHelpers.interopRequireDefault(t("sm-templates-icon")),o=babelHelpers.interopRequireDefault(t("sm-icon"));const a={warning:"WarningColored",error:"Warning3Colored",info:"InfoColored"};e.namespace("SM.Panel").Confirm=e.Base.create("panel-confirm",e.SM.Panel,[],{messageTemplate:'<p class="sm-panel-confirm-message"><%= data.message %></p>',initializer:function(e){this._eventHandles=[],e.width||this.set("width",336),this.set("modal",!0),this.set("centered",!0),this.after("render",this._onceRender,this),this.after("visibleChange",this._onVisibleChange,this)},destructor:function(){e.Array.each(this._eventHandles,(function(e){e.detach()}))},_onceRender:function(){var t=this.get("boundingBox"),n=this.get("message"),i=e.Template.Micro.compile(this.messageTemplate);t.addClass(this.getClassName("confirm")),t.addClass(this.getClassName(this.get("type"))),n&&this.setStdModContent(e.WidgetStdMod.BODY,i({message:n})),this._eventHandles.push(t.delegate("click",this._onButtonClick,".sm-button",this)),this.get("visible")&&this._focusConfirmButton()},_onVisibleChange:function(e){e.newVal?this._focusConfirmButton():cancelAnimationFrame(this._focusAnimationRequest)},_focusConfirmButton:function(){let e=this.get("boundingBox"),t=e&&e.one('[data-value="confirm"]');t&&(this._focusAnimationRequest=requestAnimationFrame(()=>{t.focus(),n.default.doc.activeElement!==t.getDOMNode()&&this._focusConfirmButton()}))},_onButtonClick:function(e){var t=e.currentTarget.getData("value");e.preventDefault(),this.fire("confirm",{confirmed:"confirm"===t}),this.hide()},_renderTitle:function(){var t=this.get("title"),n=a[this.get("type")],i="";n&&(i=(0,s.default)({icon:n,iconSize:o.default.SIZE_LARGE})),t.length?(this._titleNode||(this._titleNode=e.Node.create("<h2></h2>")),this._titleNode.setHTML(i+t),this.setStdModContent(e.WidgetStdMod.HEADER,this._titleNode,e.WidgetStdMod.BEFORE)):this._titleNode&&(this._titleNode.destroy(!0),this._titleNode=null)}},{CSS_PREFIX:"sm-panel",ATTRS:{message:{},cancelLabel:{value:"Cancel"},confirmLabel:{value:"Confirm"},smbuttons:{getter:function(){return[{value:"cancel",label:this.get("cancelLabel")},{value:"confirm",label:this.get("confirmLabel"),skin:i.default.SKIN_ACCENT}]}},type:{value:"warning"}}}),e.namespace("SM.Panel").confirm=function(t,n){var l;if(n||(n={}),n.type){let e=(0,s.default)({icon:a[n.type],iconSize:o.default.SIZE_LARGE});n.title=e+(n.title||"")}return l="string"==typeof t?"<p>"+e.Escape.html(t)+"</p>":t,n=e.merge({centered:!0,modal:!0,width:336},n,{bodyContent:l,render:!0,smbuttons:n&&n.confirmButtons||[{label:n.cancelLabel||"No",size:i.default.SIZE_SMALL,value:"no"},{label:n.confirmLabel||"Yes",skin:n.isDestructive?i.default.SKIN_DESTRUCTIVE:i.default.SKIN_ACCENT,size:i.default.SIZE_SMALL,value:"yes"}]}),new e.Promise((function(t,i){var s=new e.SM.Panel(n);let o=s.get("boundingBox");o.addClass("sm-panel-confirm").addClass("sm-panel-"+n.type);let a=o.one('[data-value="yes"]');null==a||a.focus(),s.get("contentBox").delegate("click",(function(e){var n=e.currentTarget.getData("value");1===e.button&&(s.destroy(),"yes"===n?t(n):i(n))}),".sm-button")}))}}(),SM.currentModule=null}),"",{requires:["promise","template-micro","sm-panel","sm-templates-icon","sm-icon","sm-component-button","sm-dom-core"]});
YUI.add("sm-panel-draggable",(function(e){SM.currentModule="sm-panel-draggable";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e.Base.create("sm-panel-draggable",e.Plugin.Base,[],{initializer:function(e){this.afterHostEvent("render",this._afterHostRender),this.afterHostMethod("_renderTitle",this._afterHostRenderTitle)},destructor:function(){this._drag&&this._drag.destroy()},_afterHostRender:function(e){this._bindDrag()},_afterHostRenderTitle:function(){var t=this.get("host"),d=t.get("contentBox"),a=t.getStdModNode(e.WidgetStdMod.HEADER),r=t.get("title");this._drag&&(r.length&&a?(d.removeClass("yui3-dd-handle"),a.addClass("yui3-dd-handle"),this._drag.set("handles",[a])):(d.addClass("yui3-dd-handle"),this._drag.set("handles",[d])))},_bindDrag:function(){var t=this.get("host"),d=t.get("boundingBox"),a=t.get("contentBox"),r=t.getStdModNode(e.WidgetStdMod.HEADER),n=[];r?n.push(r):n.push(a),e.Array.each(n,(function(e){e.addClass("yui3-dd-handle")})),this._drag=new e.DD.Drag({node:d,handles:n}),this._drag.addTarget(this)}},{NS:"draggable"});exports.default=t}(),SM.currentModule=null}),"",{requires:["plugin","dd-plugin"]});
YUI.add("sm-panel-profile-editor-launcher",(function(e){SM.currentModule="sm-panel-profile-editor-launcher";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(i){(t=i,SM.load("sm-panel-profileeditor").then(e=>(o.dialogs.profileOverlay={dialogClass:e,config:{nickName:t}},t))).then(e=>{e&&o.getDialog("profileOverlay").set("nickName",e),o.showDialog("profileOverlay")}).catch(o=>{r.add("sm-panel-profile-editor-launcher",{method:"addProfileOverlay",message:"Failed to add the edit profile dialogs",error:o,location:e.win.location.href},r.LEVEL_ERROR),a.dispatch(l("Edit Profile could not be loaded. Please refresh and tray again.",o))});var t};const e=SM.import("sm-dom"),o=SM.import("sm-page"),r=SM.import("sm-smuglog"),a=SM.import("sm-redux-store"),{addError:l}=SM.import("sm-dialogs-actions")}(),SM.currentModule=null}),"",{requires:["sm-dialogs-actions","sm-dom","sm-page","sm-redux-store","sm-smuglog"]});
YUI.add("sm-panel-progress-deprecated",(function(e){SM.currentModule="sm-panel-progress-deprecated";var t;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;(t=e.SM.Panel).Progress=e.Base.create("progressPanel",t,[],{initializer:function(t){t||(t={}),this.progressBar=t.progressBar||new e.SM.ProgressBar(t.progressBarConfig),this.get("cancelable")?this.set("smbuttons",[{label:"Cancel",size:"small",skin:"submit",value:"cancel"}]):this.set("hideOn",[])},destructor:function(){this._detachProgressEvents()},bindUI:function(){t.prototype.bindUI.apply(this,arguments),this._progressEvents=[this.get("contentBox").delegate("click",this._afterButtonClick,".sm-button",this)]},renderUI:function(){var s=this.get("boundingBox"),r=this.get("contentBox");t.prototype.renderUI.apply(this,arguments),s.addClass("sm-panel-progress"),this.get("noChrome")&&(s.removeClass("sm-panel"),r.removeClass("sm-panel-content")),this.progressBar.render(),this.setStdModContent(e.WidgetStdMod.BODY,this.progressBar.get("container"));var n=this.get("dataTestId");n&&s.setAttribute("data-testid",n)},syncUI:function(){t.prototype.syncUI.apply(this,arguments)},_detachProgressEvents:function(){this._progressEvents&&(new e.EventHandle(this._progressEvents).detach(),this._progressEvents=null)},_afterButtonClick:function(e){1===e.button&&"cancel"===e.currentTarget.getData("value")&&this.fire("cancel")}},{CSS_PREFIX:"sm-panel",ATTRS:{cancelable:{value:!1,writeOnce:"initOnly"},centered:{value:!0},modal:{value:!0},width:{value:400},noChrome:{},dataTestId:{value:null}}}),SM.currentModule=null}),"",{requires:["sm-panel","sm-progressbar-deprecated"]});
YUI.add("sm-panel-progress",(function(e){SM.currentModule="sm-panel-progress";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("classnames")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),s=babelHelpers.interopRequireDefault(t("sm-modal")),n=babelHelpers.interopRequireDefault(t("sm-component-panel")),u=babelHelpers.interopRequireDefault(t("sm-progressbar"));const o=e=>{let{children:t,className:o,dataTestId:d,onCancel:p,percentComplete:c,progressBarMessage:m,title:i}=e;return l.default.createElement(s.default,{closeOnEscape:!!p,onClose:p||void 0},l.default.createElement(n.default,{className:(0,a.default)("sm-panel-progress",o),headerPosition:n.default.HEADER_INSIDE,"data-testid":d},!!i&&l.default.createElement(n.default.Header,null,l.default.createElement("h2",null,i)),l.default.createElement(n.default.Body,null,l.default.createElement(u.default,{message:m,percentComplete:c}),t),!!p&&l.default.createElement(n.default.Buttons,null,l.default.createElement(r.default,{onClick:p||void 0,skin:"submit"},"Cancel"))))};o.displayName="PanelProgress",o.propTypes={dataTestId:e.default.string,title:e.default.string,onCancel:e.default.func,percentComplete:e.default.number,progressBarMessage:e.default.string},o.defaultProps={className:""};var d=o;exports.default=d}(),SM.currentModule=null}),"",{requires:["react","classnames","sm-component-panel","sm-modal","sm-progressbar"]});
YUI.add("sm-panel",(function(t){SM.currentModule="sm-panel";var exports={},e=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=babelHelpers.interopRequireDefault(e("sm-panel-draggable")),s=e("sm-modal-constants");const d=t.Base.create("panel",t.Panel,[],{initializer:function(t){this.get("draggable")&&this.plug(i.default),this.get("closable")&&this.after("render",this._renderCloseButton,this)},destructor:function(){t.Array.each(this._eventHandles,(function(t){t.detach()}))},DEF_PARENT_NODE:s.UNSKINNED_MODAL_SELECTOR,renderUI:function(){var e=this.get("scrollHeight"),i=this.get("boundingBox");this._eventHandles=[],this._renderTitle(),this._renderButtons(),this._eventHandles.push(this.after("titleChange",this._renderTitle,this),this.after("smbuttonsChange",this._renderButtons,this)),e&&(i.addClass(this.getClassName("scrollable")),this.get("bodyContent")&&this.getStdModNode(t.WidgetStdMod.BODY)||this.setStdModContent(t.WidgetStdMod.BODY,""),this.getStdModNode(t.WidgetStdMod.BODY,!0).setStyle("height",e)),this.get("fixed")&&i.addClass(this.getClassName("fixed"));let s=this.get("dataTestId");s&&i.setAttribute("data-testid",s)},_renderTitle:function(){var e=this.get("boundingBox"),i=this.get("title"),s=this.get("titleLocation"),d=this.get("titlePosition");e.addClass(this.getClassName("title-"+s)),i.length?(this._titleNode||("outside"===s?(this._titleNode=t.Node.create("<h1></h1>"),"center"===d&&e.addClass(this.getClassName("title-center"))):this._titleNode=t.Node.create("<h2></h2>")),this._titleNode.setHTML(i),this.setStdModContent(t.WidgetStdMod.HEADER,this._titleNode,t.WidgetStdMod.BEFORE)):this._titleNode&&(this._titleNode.destroy(!0),this._titleNode=null)},_renderButtons:function(){var e=this.get("smbuttons");e.length?this.setStdModContent(t.WidgetStdMod.FOOTER,t.SM.Templates.buttonGroup({buttons:e}),t.WidgetStdMod.AFTER):this.getStdModNode(t.WidgetStdMod.FOOTER)||this.setStdModContent(t.WidgetStdMod.FOOTER,"")},_renderCloseButton:function(){if(!this._closeNode){var e=t.Node.create(t.SM.Panel.CLOSE_NODE_TEMPLATE),i=t.Node.create(t.SM.Templates.button({icon:"XCrossSlim",skin:"submit",noChrome:!0}));e.append(i),i.on("click",this._onCloseClick,this),this._closeNode=e}this.get("boundingBox").addClass(this.getClassName("close-button")),this.getStdModNode(t.WidgetStdMod.HEADER).insert(this._closeNode,"after")},_onCloseClick:function(t){t.halt(),this.hide()},moveToFront:function(){var t=this.get("boundingBox");t.get("parentNode").append(t)},hide:function(e){return t.fire("panel:hide",{viaEsc:!!e&&("key"==e.type&&27==e.which)})&&(t.SM.Panel.superclass.hide.call(this),this.fire("hide")),this}},{CSS_PREFIX:"sm-panel",CLOSE_NODE_TEMPLATE:'<div class="sm-panel-close"></div>',ATTRS:{title:{value:""},titleLocation:{value:"inside",validator:function(e){return t.Array.indexOf(["inside","outside"],e)>-1}},titlePosition:{value:"",valueFn:function(){return this.get("width")<=340?"center":"left"}},smbuttons:{value:[]},buttons:{value:{}},draggable:{},closable:{},scrollHeight:{},fixed:{},dataTestId:{value:null}}});t.namespace("SM").Panel=d;var n=d;exports.default=n}(),SM.currentModule=null}),"",{requires:["panel","plugin","sm-templates-button","sm-panel-draggable","sm-modal-constants"]});
YUI.add("sm-picker-history",(function(t){SM.currentModule="sm-picker-history";var e,n;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e=t.Lang,n=t.Base.create("sm-picker-history",t.Widget,[],{_historyMenuInitialized:!1,initializer:function(){},renderUI:function(){},bindUI:function(){},syncUI:function(){},clear:function(){this.set("history",[])},push:function(t){var e=this.get("history"),n=null;e.length>=1&&(n=e[e.length-1],this._updateBackButton(n.label)),this._rebuildHistoryMenu(),e.push(t),this.set("history",e)},pop:function(){var t=this.get("history"),e=null;return t.length>0?(e=t.pop(),e=t.pop()):e={clear:!0},0===t.length?this._updateBackButton(!1):this._updateBackButton(e.label),this.set("history",t),e},_updateBackButton:function(t){var e=this.get("buttons").back;e.get("disabled")?e.set("disabled",!1):!1===t&&e.set("disabled",!0)},_rebuildHistoryMenu:function(){var n=this.get("history"),i=this.get("container"),s=null,o=[],u=0,r=null,a=null;if(i){for(u=n.length;0!==u;u--)a={name:(r=n[u-1]).label,type:t.SM.Menu.ITEM_TYPES.ITEM,action:r.type},o.push(a);s=new t.SM.Menu({menuConfig:{alignment:"horizontal",items:[{type:t.SM.Menu.ITEM_TYPES.ICON,iconClassNames:["sm-icon-down","sm-icon-down-button"],spanClassNames:["sm-button-content","sm-icon-down-button"],anchorClassNames:["sm-button"],items:o}]}}),e.isString(i)&&(i=t.one(i),this.set("container",i)),i.setContent(""),s.render(i)}}},{ATTRS:{history:{value:[]},container:{value:null},buttons:{value:null}}}),t.namespace("SM").PickerHistory=n,SM.currentModule=null}),"",{requires:["base","node","widget"]});
YUI.add("sm-picker-overlay",(function(e){SM.currentModule="sm-picker-overlay";var i,t,s,l,r,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;i=e.Lang,t=e.DOM,s={"item-0":"Select multiple items.","item-1":"Please select a single photo or gallery.","item-2":"Please select ({limit}) items.","image-0":"Select multiple photos from any of your galleries.","image-1":"Please select a single photo from one of your galleries.","image-2":"Please select ({limit}) photos from one of your galleries.","album-0":"Select multiple galleries.","album-1":"Please select a single gallery.","album-2":"Please select ({limit}) galleries.","folder-0":"Select multiple folders.","folder-1":"Please select a single folder.","folder-2":"Please select ({limit}) folders.","node-0":"Select multiple sources.","node-1":"Please select a single source.","node-2":"Please select ({limit}) sources.","page-0":"Select multiple pages.","page-1":"Please select a single page.","page-2":"Please select ({limit}) pages."},l={image:{singular:"photo",multiple:"photos"},album:{singular:"gallery",multiple:"galleries"},folder:{singular:"folder",multiple:"folders"},node:{singular:"page, folder or gallery",multiple:"pages, folders or galleries"},page:{singular:"page",multiple:"pages"}},r=e.Base.create("sm-picker-overlay",e.SM.Panel,[],{_resizeTimer:null,_handles:null,initializer:function(i){i=this._updateConfig(i),this.set("fillHeight",null),this.set("titleLocation","outside"),this.set("title","Picker"),this._config=i,this.set("picker",new e.SM.Picker(i))},renderUI:function(){r.superclass.renderUI.call(this);var i=e.Node.create("<div />"),t=this.get("picker");this._renderHeaderUI(),i.addClass("sm-picker-container"),i.append(e.Node.create('<div class="sm-picker-help"></div>')),t.render(i),t.addTarget(this),this.setStdModContent(e.WidgetStdMod.BODY,i),this.set("visible",!1),this.centered(),this.get("boundingBox").addClass("sm-picker-overlay")},show:function(i){var t=this.get("picker");this._attachUIListeners(),i=this._config=this._updateConfig(e.merge(this._config,i)),this.set("visible",!0),this._renderHeaderUI(),t.show(i),this._resizeUI()},hide:function(){this.get("picker").closeUiCleanup(),this._detachUIListeners(),this.set("visible",!1)},_attachUIListeners:function(){var i=this.get("picker");this._handles=[i.on(e.SM.Picker.EVENT_SELECT,this.hide,this),i.on(e.SM.Picker.EVENT_CANCEL,this.hide,this),i.on(e.SM.Picker.EVENT_USER_FAIL,this._destroy,this),e.on("windowresize",this._onWindowResize,null,this)]},_destroy:function(){this.hide(),this.destroy()},_detachUIListeners:function(){new e.EventHandle(this._handles).detach(),this._handles=null},_onWindowResize:function(){this._resizeTimer&&this._resizeTimer.cancel(),this._resizeTimer=e.later(150,this,this._resizeUI)},_resizeUI:function(){var e=t.winWidth(),i=t.winHeight(),s=this.get("boundingBox"),l=s.one(".yui3-widget-hd").get("offsetHeight"),r=Math.floor(.85*e),o=Math.floor(.85*i)-l;s.setStyles({width:r,height:o,left:Math.floor((e-r)/2),top:Math.floor((i-o)/2)+l}),this.get("picker").resizeUI(),this.centered()},_renderHeaderUI:function(){var e=this._config,i="Choose";e.hasOwnProperty("title")&&e.title?i=e.title:e.hasOwnProperty("mode")&&""!==e.mode&&(i+=(1===e.limit?" a ":" one or more ")+(1===e.limit?l[e.mode].singular:l[e.mode].multiple)),this.set("title",i),this.showHelpMessage(e.message)},showHelpMessage:function(t,l){l||(l="info");var r,o,a,n,h=this._config,d=this.get("boundingBox").one(".sm-picker-help"),c=t;d&&(this._fadeoutMessageTimer&&this._fadeoutMessageTimer.cancel(),t||(o=h.hasOwnProperty("mode")?h.mode:"Item",o+="-",o+=h.hasOwnProperty("limit")?h.limit:"0",s.hasOwnProperty(o)||(o="item-0"),c=s[o]),!0===this.get("visible")&&((r=new e.SM.MessageBox({message:i.sub(c,h),type:l})).render(d),n=r.get("boundingBox"),a="-"+parseInt(d.get("offsetWidth"),10)/2+"px",d.setStyle("marginLeft",a),n.removeClass("sm-messagebox-fadeout").show(),this._fadeoutMessageTimer=e.later(5e3,this,(function(){this._fadeoutMessageTimer=null,e.UA.ie>0?n.hide():n.addClass("sm-messagebox-fadeout")}),!1)))},_updateConfig:function(e){var s,l=null,r={disableScrollbars:!0,modal:!0,visible:!1,centered:!0,width:Math.floor(.85*t.winWidth())+"px",height:Math.floor(.85*t.winHeight())-52+"px",allowEmptySelections:!1};for(s in r)r.hasOwnProperty(s)&&(l=r[s],e.hasOwnProperty(s)&&i.isString(e[s])&&""!==e[s]&&(l=e[s]),this.set(s,l));return e}},{CSS_PREFIX:"sm-panel",ATTRS:{config:{value:null},picker:{value:null},zIndex:{value:1}}}),e.namespace("SM").PickerOverlay=module.exports=r,SM.currentModule=null}),"",{requires:["anim-base","base","event-resize","node","sm-messagebox","sm-panel","sm-picker"]});
YUI.add("sm-picker-plugin",(function(e){SM.currentModule="sm-picker-plugin";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){var i=e.Template.Micro,t=null,s=i.compile('<div class="sm-picker-plugin"><div><div class="sm-picker-plugin-thumb sm-picker-launch"></div><span class="sm-icon sm-picker-plugin-clear" title="Remove Image"></span><div class="sm-picker-launch"><%== Y.SM.Templates.button({label: data.label, skin: "submit", size: "small"}) %></div></div></div>'),a=null,r=null,n={};n[e.SM.Picker.MODE_IMAGE]={limit:1,disableEmpty:1,disableCollected:0,disableVideo:1,disableArchive:1,disablePages:1,disablePhoto:0,disableThumbOverflow:!1},n[e.SM.Picker.MODE_ALBUM]={limit:1,disableAlbum:0,disableEmpty:0,disablePages:1,disableThumbOverflow:!1},n[e.SM.Picker.MODE_FOLDER]={limit:1,disableAlbum:1,disableEmpty:0,disablePages:1,disableThumbOverflow:!1},n[e.SM.Picker.MODE_NODE]={limit:1,disableAlbum:0,disableEmpty:0,disablePages:0,disableThumbOverflow:!1},n[e.SM.Picker.MODE_PAGE]={limit:1,disableAlbum:0,disableEmpty:0,disablePages:0,disableThumbOverflow:!1};var l=SM.import("lodash");e.namespace("SM.Plugin").Picker=module.exports=e.Base.create("sm-picker-plugin",e.Plugin.Base,[],{initializer:function(){var e=this._host=this.get("host"),i=this._triggerMode=this.get("triggerMode"),t=this._useMiniView=this.get("useMiniView");this._pickerMode=this.get("pickerMode"),this._numItems=0,i||(e.addClass("sm-picker-pluggedin"),e.hide()),this._initializePicker(),this._attachEvents(),i||t||this._render()},destructor:function(){var i=this._getTileView();new e.EventHandle(this._eventHandles).detach(),t&&(t.destroy(),t=null),i&&i.destroy()},changePreselected:function(e,i){i||(i={});var t=this._host,s=this;t.set("value",e),e?this._setupThumbLoad(this._getPreSelected()).then((function(e){s._loadAndRenderThumb(e)})):this._clearSelection(i)},reset:function(){this._clearSelection()},showPicker:function(e){e&&(this._pickerConfig=l.assign(this._pickerConfig,e)),a=this._host.get("name"),this._triggerMode&&(r=this._host.getAttribute("id")),this._showPicker()},getPicker:function(){return t?t.get("picker"):null},_attachEvents:function(){var i=this._getContainer();this._eventHandles=[t.get("picker").after([e.SM.Picker.EVENT_SELECT,e.SM.Picker.EVENT_CANCEL],this._onPickerEvent,this,e.SM.Picker.EVENT_SELECT)],this._triggerMode||this._useMiniView||this._eventHandles.push(i.delegate("click",this._onPickerLaunchClick,".sm-picker-launch",this),e.delegate("click",(function(e){e.preventDefault(),this._clearSelection()}),i,".sm-picker-plugin-clear",this))},_clearSelection:function(e){e||(e={}),this._triggerMode||(this._host.set("value",""),this._numItems=0,this._renderEmptyThumb(),e.silent||this.fire("thumbCleared"))},_initializePicker:function(){var i,s=this._pickerMode,a=n[s],r=this.get("pickerStartNode"),SM=window.SM;i=e.merge(a,this.get("pickerConfig")),("video"===s||i.disablePhoto&&i.disableVideo)&&(i.disableVideo=0,i.disablePhoto=1,s="image"),i.mode=s,i.startPath||(r?this._getStartPath(r):i.startPath=null),null===t&&(t=SM.packages&&(window.SM.packages.galleryPicker||window.SM.packages.photoPicker)?window.SM.packages.galleryPicker||window.SM.packages.photoPicker:new e.SM.PickerOverlay(i)),this._pickerConfig=i},_getContainer:function(){var i;if(!this._useMiniView)return this._container||(i=e.Node.create(s({label:this.get("pickerLaunchBtnText")})),this._selectedTileContainer=i.one(".sm-picker-plugin-thumb"),this._container=i),this._container},_getFontIcon:function(){var i,t=this._pickerMode;if(!this._fontIcon){switch(t){case e.SM.Picker.MODE_IMAGE:i="Image";break;case e.SM.Picker.MODE_ALBUM:i="Gallery";break;case e.SM.Picker.MODE_FOLDER:i="Folder";break;case e.SM.Picker.MODE_NODE:i="Document";break;case e.SM.Picker.MODE_PAGE:i="Page2";break;case"video":i="VideoCamera"}this._fontIcon=i}return this._fontIcon},_getPreSelected:function(){var i,t=this._host.get("value");return t&&(i=[],e.Array.each(t.split(/,\s*/g),(function(e){i.push(e)})),this._numItems=i.length),i},_getStartPath:function(i,t){var s=this;(e.ModelStore.getList(e.SM.Models.UserNode).getById(i)||new e.SM.Models.UserNode).load({data:{NodeID:i}},(function(e,a){var r=null,n="",l="",o="";if(!e){a.Node.IDPath&&(r=a.Node.IDPath.split(",").join("-Folder,")+"-Folder");var c=a.Node.Type;switch(c){case 4:n="Album",l=a.Node.RemoteID,o=a.Node.RemoteKey;break;case 2:n="Folder",l=i;break;default:console.log("Unknown Node Type: ",a.Node.Type)}4!==c&&2!==c||(r+=","+l+"-"+n,r+=o?"-"+o:""),s._pickerConfig.startPath=r}t&&t(e)}))},_getTileView:function(){var i,t=this._useMiniView;return this._selectedTileView||(i={autoResize:!1,center:!1,clickable:!1,imageCrop:"1x1",resource:this._getTileModel()},t?i=e.merge(i,{containerWidth:32,imageSize:"fit",maxHeight:32,maxWidth:32}):i.imageSize="Th",this._selectedTileView=new e.SM.Views.Tile(i)),this._selectedTileView},_getTileModel:function(){var i,t;return this._selectedTileModel||(i=this.get("selectedImageModel"),t=new e.SM.Models.Image,i&&(this._modelPreloaded=!0,t.setAttrs(i.getAttrs())),this._selectedTileModel=t),this._selectedTileModel},_loadAndRenderThumb:function(e){var i=this,t=e.thumbData;this._triggerMode||(t&&(t.id||t.key)||this._renderSelectedThumb(!0),this._getTileModel().load({data:{ImageID:e.thumbData.id,ImageKey:e.thumbData.key}},(function(e){e||i._renderSelectedThumb()})))},_render:function(){var e=this,i=this._host,t=this._getPreSelected();t?this._modelPreloaded?this._renderSelectedThumb():this._setupThumbLoad(t).then((function(i){e._loadAndRenderThumb(i)})):this._renderEmptyThumb(),i.insert(this._getContainer(),"after")},_renderEmptyThumb:function(){var e=this._getContainer(),i=this._getTileView();this._useMiniView||(i.get("container").remove(),e.one(".sm-picker-plugin-clear").hide(),e.one(".sm-picker-launch .sm-button-label").set("text",this.get("pickerLaunchBtnText")),e.removeClass("sm-picker-plugin-has-selection").addClass("sm-picker-plugin-no-selection"))},_renderSelectedThumb:function(i){var t=this._getContainer(),s=this._getTileView(),a=this._useMiniView,r=this._selectedTileContainer;a||(i?r.setHTML(e.SM.Templates.button({icon:this._getFontIcon(),size:"small",title:"Make Selection"})):(s.set("parentNode",r),s.render({clear:!0})),t.removeClass("sm-picker-plugin-no-selection").addClass("sm-picker-plugin-has-selection"),t.one(".sm-picker-launch .sm-button-label").set("text",this.get("pickerChangeBtnText")),t.one(".sm-picker-plugin-clear").show())},_setupThumbLoad:function(i){var t=this;return new e.Promise((function(s){var a,r=t._pickerMode,n={};switch(r){case e.SM.Picker.MODE_IMAGE:case"video":a=i[0].split(/\-/),n.thumbData={id:a[0],key:a[1]},s(n);break;case e.SM.Picker.MODE_ALBUM:a=i[0].split(/\-/),(new e.SM.Models.Album).load({data:{AlbumID:a[0],AlbumKey:a[1]}},(function(e,i){e||(i.Image&&(n.thumbData={id:i.Image.ImageID,key:i.Image.ImageKey}),s(n))}));break;case e.SM.Picker.MODE_FOLDER:case e.SM.Picker.MODE_NODE:case e.SM.Picker.MODE_PAGE:(e.ModelStore.getList(e.SM.Models.UserNode).getById(i[0])||new e.SM.Models.UserNode).load({data:{NodeID:i[0],GetHLImageID:!0}},(function(e,i){e||(i.Node.HLImageID&&(n.thumbData={id:i.Node.HLImageID,key:i.Node.HLImageKey}),s(n))}))}}))},_showPicker:function(){var i,s,a,r=!!e.SM.Page.owner;t||(this._initializePicker(),this._attachEvents());var n=this.get("skinned");if(t.get("rendered")){var l=t.get("boundingBox"),o=l.get("parentNode");n&&!o.hasClass("sm-user-overlay-container")?e.one(".sm-user-overlay-container").append(l):n||o.hasClass("sm-overlay-container")||e.one(".sm-overlay-container").append(l)}else t.render(n?".sm-user-overlay-container":"");s=this._pickerConfig.nickName?this._pickerConfig.nickName:r&&e.SM.Page.user.isAdmin?e.SM.Page.owner.nickName:e.SM.Page.user.nickName,a=this._pickerConfig.preSelected?this._pickerConfig.preSelected:this.get("noPreselected")?[]:this._getPreSelected(),i=e.merge(this._pickerConfig,{nickName:s,preSelected:a});var c=this.getPicker();c.get("boundingBox").one(".sm-picker-breadcrumb").empty(),c.set("disableBreadCrumbs",!!i.disableBreadCrumbs),t.show(i)},_updateInputValue:function(i){var t,s=this._host,a=[];this._triggerMode||(e.Array.each(i,function(i){var t=i.hostData.id;void 0!==i.hostData.key&&(t+="-"+i.hostData.key),this._pickerMode===e.SM.Picker.MODE_NODE&&4===i.typeInfo.Type&&(t=i.typeInfo.NodeID),a.push(t)}.bind(this)),t=a.join(","),s.set("value",t),this.fire("valueChanged",{newVal:t,selectedData:i}))},_onPickerEvent:function(i){var s=this._host,n=i._type,l=this._pickerMode,o=[];if(!(this._triggerMode&&s.getAttribute("id")!==r||!this._triggerMode&&a!==s.get("name"))){if(n!==e.SM.Picker.EVENT_CANCEL){if(!i.selectedKeys||i.selectedKeys&&0===i.selectedKeys.length)return i.stopImmediatePropagation(),void t.showHelpMessage("","error");switch(n){case e.SM.Picker.EVENT_SELECT:this._numItems=i.selectedKeys.length,e.each(i.selectedData,(function(i){var t=i.typeInfo,s={},a={};switch(l){case e.SM.Picker.MODE_IMAGE:case"video":s.id=t.imageId||t.ImageID,s.key=t.imageKey||t.ImageKey,a.id=t.imageId||t.ImageID,a.key=t.imageKey||t.ImageKey;break;case e.SM.Picker.MODE_ALBUM:case e.SM.Picker.MODE_FOLDER:case e.SM.Picker.MODE_NODE:case e.SM.Picker.MODE_PAGE:t.HLImageID&&i.imageInfo&&(a.id=t.HLImageID,a.key=i.imageInfo.imageKey||i.imageInfo.ImageKey),l===e.SM.Picker.MODE_ALBUM||l===e.SM.Picker.MODE_NODE&&4===t.Type?(s.id=t.AlbumID||t.albumId,s.key=t.AlbumKey||t.albumKey):s.id=t.NodeID}o.push({hostData:s,typeInfo:t,thumbData:a})})),this._updateInputValue(o),this._selectedTileContainer&&this._loadAndRenderThumb(o[0]);break;case e.SM.Picker.EVENT_CANCEL:}}this.fire("hidingPicker",{pickType:i.type,selectedData:o,srcNode:s})}},_onPickerLaunchClick:function(e){e.preventDefault(),e.currentTarget.hasClass("sm-picker-plugin-clear")||(a=this._host.get("name"),this._showPicker())}},{NS:"pickerplugin",EVENT_PICKER_HIDDEN:"hidingPicker",EVENT_PICKER_THUMB_CLEARED:"thumbCleared",ATTRS:{noPreselected:{value:!1},pickerChangeBtnText:{value:"Browse"},pickerConfig:{value:null},pickerLaunchBtnText:{value:"Browse"},pickerMode:{value:e.SM.Picker.MODE_IMAGE},pickerStartNode:{value:null},selectedImageModel:{value:null,writeOnce:"initOnly"},skinned:{value:!1},triggerMode:{value:!1},useMiniView:{value:!0}}})}(),SM.currentModule=null}),"",{requires:["base","lodash","node","plugin","promise","sm","sm-button","sm-image-model","sm-tile-view","sm-models-usernode","sm-overlay","sm-picker-overlay"]});
YUI.add("sm-picker",(function(e){SM.currentModule="sm-picker";var t,s,i,a,n,l,r,o,h,d,u,c,m,g,p,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;t=SM.import("react"),s=SM.import("react-dom"),i=t.createFactory(SM.import("sm-progressbar")),a=e.Node,n=e.DOM,l=e.config.doc,r=e.Lang,o=e.UA,h="px",d=e.SM,u="sm-picker",SM.env.host?SM.env.host.spacerGif:SM.hostConfig.imgPrefix,c={image:"Photo",video:"Video",album:"Gallery",folder:"Folder",node:"Node",page:"Page"},m={image:"Image",album:"Album",node:"Node",folder:"Folder",page:"Page"},g={"view-album":"Album","view-folder":"Folder","view-category":"Category","view-node":"Node","view-page":"Page"},p=e.Base.create("sm-picker",e.Widget,[],{_handles:null,_pickerOpen:!1,_preview:null,_api:null,_buttons:null,_scrolling:!1,_scrollTimer:null,_resizing:!1,_resizeTimer:null,_requestInProgress:!1,_thumbManager:null,_history:null,_keyEvent:null,_selectedDrawerOpen:!1,_mainViewMode:null,_viewSelectedWidth:null,_prefetch:null,_rpcTotals:null,_defaultRoot:"00-RootFolder",_passwordPanelOpen:!1,initializer:function(t){this._handles=null,this._buttons={},this._rpcTotals={},this._disableFlags={},this._prefetch={preSelected:null,totalPages:null},this._api=new e.SM.API,this._thumbManager=new e.SM.ThumbnailManager({defaultContainer:"."+this.getClassName("view-main")+" ."+this.getClassName("list-content"),disableThumbOverflow:t.disableThumbOverflow,selectedContainer:"."+this.getClassName("view-selected")+" ."+this.getClassName("list-content"),selectedType:t.hasOwnProperty("mode")&&m.hasOwnProperty(t.mode)?m[t.mode]:"",limit:t.hasOwnProperty("limit")?t.limit:0,debug:!!t.hasOwnProperty("debug")&&t.debug}),this.set("config",t),this._history=new d.PickerHistory,this.publish("pickerItemSelected",{emitFacade:!0}),this.publish("pickerCancel",{emitFacade:!0}),this.publish("pickerUserFail",{emitFacade:!0}),void 0!==t.preSelected&&(r.isArray(t.preSelected)||(t.preSelected=t.preSelected.split(",")),t.preSelected.length>0&&(this._prefetch.preSelected=this._normalizePreSelected(t.preSelected,t.mode),this._prefetch.totalPages=Math.ceil(t.preSelected.length/50),this._prefetchSelection(0))),void 0!==t.startPath&&null!==t.startPath&&(r.isArray(t.startPath)||(t.startPath=t.startPath.split(",")),t.startPath.length>0&&(this._prefetchPath(t.startPath),"Album"===(s=t.startPath.slice(-1).toString()).split("-")[1].toString()?t.viewConfig={albumId:s.split("-")[0].toString(),albumKey:s.split("-")[2].toString(),type:"view-album"}:"Folder"===s.split("-")[1].toString()&&(t.viewConfig={folderId:s.split("-")[0].toString(),type:"view-folder"}))),void 0!==t.callback&&("function"==typeof t.callback.select&&this.on("pickerItemSelected",t.callback.select),"function"==typeof t.callback.cancel&&this.on("pickerCancel",t.callback.cancel));var s,i=this.get("nickName"),a=null;null===i&&(r.isObject(SM.env.loggedInUser)?i=r.isObject(SM.env.pageOwner)&&SM.env.loggedInUser.nickName!==SM.env.pageOwner.nickName?SM.env.pageOwner.nickName:SM.env.loggedInUser.nickName:r.isObject(SM.pageDetails)&&r.isObject(SM.pageDetails.BrowseUser)&&SM.pageDetails.BrowseUser.hasOwnProperty("NickName")&&(r.isObject(SM.pageDetails.BrowseUser)&&SM.pageDetails.BrowseUser.NickName&&SM.pageDetails.BrowseUser.NickName!==NickName?i=NickName:a=NickName,i=r.isString(a)&&SM.pageDetails.BrowseUser.NickName!==a?a:SM.pageDetails.BrowseUser.NickName),this.set("nickName",i))},destructor:function(){s.unmountComponentAtNode(this._loadingProgressDOMNode)},renderUI:function(){var e=l.createDocumentFragment(),t=this.get("contentBox");this.fire("pickerRender"),e.appendChild(a.getDOMNode(this._getHeaderNode())),e.appendChild(a.getDOMNode(this._getBodyNode())),e.appendChild(a.getDOMNode(this._getFooterNode())),t.append(e)},bindUI:function(){this.fire("pickerBind");var e=this.get("boundingBox"),t=e.one("."+this.getClassName("viewport")),s=e.one("."+this.getClassName("view-main")),i=e.one("."+this.getClassName("more")),a=e.one("."+this.getClassName("view-screen"));this.set("nodeViewport",t),this.set("nodeViewportList",s),this.set("nodeMore",i),this.set("nodeScreen",a),this._attachUIListeners()},_attachUIListeners:function(){var t=this.get("boundingBox"),s=t.one("."+this.getClassName("breadcrumb")),i=e.one("document");this._handles=[e.delegate("click",this._handleBreadcrumbItemClick,s,".sm-breadcrumb-item a",this),t.one("."+this.getClassName("view-selected-toggle")).on("click",this._uiToggleSelected,this),e.delegate("click",this._handleButtonClick,t,".sm-button",this),this._thumbManager.on("selectedCountChange",this._handleSelectCountChange,this),this._thumbManager.on("currentSelectedChange",this._handleCurrentSelectedChange,this),this._thumbManager.on("thumbnailSelect",this._handleThumbEvent,this),this._thumbManager.on("thumbnailNavigate",this._handleThumbEvent,this),this._thumbManager.on("thumbnailSelectAll",this._handleThumbnailSelectAll,this),this._thumbManager.on("thumbnailSelectNone",this._handleThumbnailSelectNone,this),this._thumbManager.on(d.ThumbnailManager.EVENT_LIMIT_REACHED,(function(t){var s=new d.MessageBox({message:r.sub("You have reached the limit of {limit}.",{limit:t.limit}),type:"alert"}),i=e.one("."+this.getClassName("help"));i.setContent(""),s.render(i),i.show()}),this),this._thumbManager.on(d.ThumbnailManager.EVENT_LIMIT_BELOW,(function(e){this._hideHelpMessage()}),this),i.on("keydown",this._handleKeyDownUp,this),i.on("keyup",this._handleKeyDownUp,this)],this._thumbManager._bindUI()},_detachUIListeners:function(){new e.EventHandle(this._handles).detach(),this._handles=null},syncUI:function(){},show:function(e){if(r.isNull(this.get("nickName")))this.fire("pickerUserFail");else{this._disableFlags={},this._uiUpdateFlags(!0),void 0!==e&&(this._disableFlags={},this._updateConfig(e));var t={type:"view-folder"},s=this.get("config");void 0!==s.viewConfig&&null!==s.viewConfig&&(t=s.viewConfig),r.isArray(this._handles)||this._attachUIListeners(),this._thumbManager.set("disableThumbOverflow",s.disableThumbOverflow),this.set("visible",!0),this._pickerOpen=!0,this._thumbManager.activateHotkeys(!1),this._thumbManager.activateSelect(!1),this._thumbManager.get("selectedCount")>0&&(t={type:"view-selected"}),this._uiRenderViewport(t),this._uiToggleSelected(!0);var i=this.get("boundingBox").ancestor("."+this.getClassName("overlay"));i&&i.addClass("sm-no-focus-visible"),this.resizeUI()}},closeUiCleanup:function(){this._uiToggleLoadingMask("hide"),this._detachUIListeners(),this._pickerOpen=!1,this._thumbManager.activateHotkeys(!1),this._thumbManager.activateSelect(!1),this._hideHelpMessage(),this._uiToggleSelected(!0),this._uiPreviewClose(),this._uiUpdateBreadcrumbs(null,{})},resizeUI:function(){var t,s,i,a,n,l,r=this.get("boundingBox"),o=r.one("."+this.getClassName("view-main")),d=r.one("."+this.getClassName("view-selected")),c=this.get("config"),m=0,g=null,p=e.StyleSheet("picker");(m=r.ancestor("."+this.getClassName("overlay"))?r.ancestor("."+this.getClassName("overlay")).get("offsetHeight")-96:r.ancestor("."+this.getClassName("container")).get("offsetHeight"))<385&&(m=385),this._uiSetViewHeight(m),1===c.limit?this._buttons.selectAll.hide():this._buttons.selectAll.show(),t=Math.floor(o.get("offsetWidth")/167),s=Math.floor(o.get("offsetWidth")/123),i=o.get("offsetWidth")-167*t-25,a=o.get("offsetWidth")-123*s-25,n=7+Math.floor(i/(t+1)),l=7+Math.floor(a/(s+1)),n>7&&(g="."+u+" ."+this.getClassName("viewport")+" ."+this.getClassName("view-large-thumbs")+" ."+this.getClassName("list-content"),p.set(g,{margin:"7px 0 0 "+n+h}),p.set(g+" .sm-thumbnail",{margin:"0 "+n+"px 7px 0"})),l>7&&(g="."+u+" ."+this.getClassName("viewport")+" ."+this.getClassName("view-small-thumbs")+" ."+this.getClassName("list-content"),p.set(g,{margin:"7px 0 0 "+l+h}),p.set(g+" .sm-thumbnail",{margin:"0 "+l+"px 7px 0"})),c.limit>=1?this._viewSelectedWidth=190:"image"===c.mode?this._viewSelectedWidth=123*(s-2)+20:this._viewSelectedWidth=167*(t-2)+20,d.setStyles({height:m+h,width:this._viewSelectedWidth+h}),d.one("."+this.getClassName("list")).setStyle("width",this._viewSelectedWidth-12+h),this._uiTogglePreviewButton(this._thumbManager.get("currentSelected"))},_getHeaderNode:function(){var t=a.create('<div class="sm-picker-header yui3-g"><div class="yui3-u-2-3"><div class="sm-picker-back"></div><div class="sm-picker-breadcrumb"></div></div><div class="yui3-u-1-3" style="text-align:right"><div class="sm-picker-selected"></div></div></div>'),s=t.one("."+this.getClassName("back")),i=t.one("."+this.getClassName("selected"));return s.append(e.SM.Templates.button({icon:"ArrowLeft",size:"small",skin:"submit",value:"pickerBack"})),this._buttons.back=s.one('.sm-button[data-value="pickerBack"]'),this._buttons.back.set("disabled",!0),i.append(e.SM.Templates.button({label:"Selected",size:"small",skin:"submit",value:"pickerSelected"})).append(e.SM.Templates.button({label:"0",size:"small",skin:"accent",value:"pickerCount",className:"sm-button-square"})).append(e.SM.Templates.button({icon:"Checkmark",svg:"Checkmark",label:"Select All",size:"small",value:"pickerSelectAll"})),this._buttons.selected=i.one('.sm-button[data-value="pickerSelected"]'),this._buttons.selected.set("disabled",!1),this._buttons.selected.hide(),this._buttons.selectAll=i.one('.sm-button[data-value="pickerSelectAll"]'),this._buttons.selectAll.set("disabled",!0),this._buttons.count=i.one('.sm-button[data-value="pickerCount"]'),this._buttons.count.hide(),this._history.set("buttons",this._buttons),t},_getBodyNode:function(){var e=a.create('<div class="sm-picker-body"></div>'),t=a.create('<div class="sm-picker-viewport yui3-u-1"><div class="sm-picker-loading-mask sm-hidden"><div class="sm-picker-loading-mask-box"><div class="sm-picker-loading-mask-content"><div class="sm-progress-spinner sm-progress-spinner-visible"></div></div></div></div><div class="sm-picker-preview-screen sm-hidden"></div><div class="sm-picker-view-screen sm-hidden"></div><div class="sm-picker-view-selected sm-hidden"><div class="sm-picker-list"><div class="sm-picker-list-content"></div></div><div class="sm-picker-view-selected-toggle"><div><span class="sm-fonticon-sml sm-fonticon-ArrowTriangleRight"></span></div></div></div><div class="sm-picker-view-empty sm-hidden">Empty</div><div class="sm-picker-view-main"><div class="sm-picker-list"><div class="sm-picker-list-content"></div></div></div><div class="sm-picker-more sm-hidden"></div></div>'),s=a.create('<div class="sm-picker-detail"><div class="sm-picker-detail-content"><div class="sm-picker-detail-total"></div></div></div>');return e.append(t),e.append(s),e},_getFooterNode:function(){var t=a.create('<div class="yui3-g sm-picker-footer"><div class="yui3-u-1-3 sm-picker-tools"></div><div class="yui3-u-1-3 sm-picker-footer-center"></div><div class="yui3-u-1-3 sm-picker-buttons"></div></div>'),n=t.one("."+this.getClassName("footer-center")),l=a.create('<div class="sm-picker-progress sm-hidden"></div>'),r=t.one("."+this.getClassName("buttons")),o=t.one("."+this.getClassName("tools")),h=this.get("config");return o.append(e.SM.Templates.button({icon:"View",label:"Preview",size:"small",value:"pickerPreview"})),this._buttons.preview=o.one('.sm-button[data-value="pickerPreview"]'),"image"!==h.mode&&this._buttons.preview.hide(),r.append(e.SM.Templates.button({label:"Cancel",size:"small",value:"pickerCancel"})).append(e.SM.Templates.button({label:"Done",size:"small",value:"pickerDone"})),this._buttons.done=r.one('.sm-button[data-value="pickerDone"]'),this._buttons.done.set("disabled",!0),this._buttons.cancel=r.one('.sm-button[data-value="pickerCancel"]'),n.append(l),n.append(a.create('<div class="'+u+'-flags">')),this._loadingProgressDOMNode=l.getDOMNode(),s.render(i({percentComplete:0}),this._loadingProgressDOMNode),t},_updateConfig:function(t){var s,i,a=this.get("config"),n=t.hasOwnProperty("mode")?t.mode:null,l=t.hasOwnProperty("limit")?t.limit:null;if(this._api=new e.SM.API,this._thumbManager.setRenderType("selected").clear(),this._thumbManager.setRenderType("default").clear(),this._handleSelectCountChange({newVal:null}),null!==l&&this._thumbManager.set("limit",l),n?(this._thumbManager.set("selectedType",m[n]),i=n):i=a.mode,(s=e.merge(a,t)).hasOwnProperty("userId")&&r.isNumber(s.userId)?s.userId=parseInt(s.userId,10):s.userId=null,void 0!==s.preSelected?(r.isArray(s.preSelected)||(s.preSelected=s.preSelected.split(",")),s.preSelected.length>0&&(s.preSelected=this._normalizePreSelected(s.preSelected,i),this._prefetch.preSelected=s.preSelected,this._prefetch.totalPages=Math.ceil(s.preSelected.length/50),this.set("config",s),this._prefetchSelection(0)),this._thumbManager.syncSelected(s.preSelected)):this._thumbManager.syncSelected([]),null===s.startPath)s.viewConfig=null;else if(void 0!==s.startPath&&""!==s.startPath&&(r.isArray(s.startPath)||(s.startPath=s.startPath.split(",")),s.startPath.length>0)){this._prefetchPath(s.startPath);var o=s.startPath.slice(-1).toString();"Album"===o.split("-")[1].toString()?s.viewConfig={albumId:o.split("-")[0].toString(),albumKey:o.split("-")[2].toString(),type:"view-album"}:"Folder"===o.split("-")[1].toString()&&(s.viewConfig={folderId:o.split("-")[0].toString(),type:"view-folder"})}this.set("config",s),this.set("viewConfig",{clear:!0}),t.nickName&&this.set("nickName",t.nickName),this._history.clear(),this._buttons.back.set("disabled",!0)},_normalizePreSelected:function(t,s){var i=[];return e.Array.each(t,(function(e){if(e.split("-")[1])i.push(e);else switch(s){case"folder":i.push(e+"-Folder");break;case"album":i.push(e+"-Album");break;case"image":i.push(e+"-Image");break;case"page":i.push(e+"-Page");break;case"node":i.push(e+"-Node")}}),this),i},_handleResize:function(){!1===this._resizing&&(o.ie>0&&o.ie<9||0===o.ie)&&(this._resizeTimer&&this._resizeTimer.cancel(),this._resizing=!1,this._resizeTimer=e.later(500,this,this.resizeUI,!1))},_handlePreviewTooSmall:function(){this._uiTogglePreviewButton(!1)},_handleSelectCountChange:function(e){this._buttons.count.setContent(e.newVal),e.newVal>0?(this._buttons.count.show(),this._buttons.done.set("disabled",!1),this._buttons.done.addClass("sm-button-skin-accent"),this._buttons.done.removeClass("sm-button-skin-default"),this._buttons.selected.show(),this._buttons.selected.addClass("sm-button-skin-default")):(currentConfig=this.get("config"),currentConfig.hasOwnProperty("allowEmptySelections")&&currentConfig.allowEmptySelections||(this._buttons.done.set("disabled",!0),this._buttons.done.removeClass("sm-button-skin-accent"),this._buttons.done.addClass("sm-button-skin-default"),this._buttons.count.hide(),!1===this._selectedDrawerOpen&&(this._buttons.done.set("disabled",!0),this._buttons.selected.hide()))),!0===this._selectedDrawerOpen&&this._uiTogglePreviewButton(e.newVal)},_handleCurrentSelectedChange:function(e){this._uiTogglePreviewButton(e.newVal)},_handleButtonClick:function(e){var t,s=e.currentTarget.getData("value"),i=this.get("config");if(!this._passwordPanelOpen)switch(s){case"pickerBack":if(this._buttons.back.get("disabled"))return;t=this._history.pop(),e.halt(!0),t.clear=!0,this._uiPreviewClose(),this._uiToggleSelected(!0),t.hasOwnProperty("page")&&delete t.page,this._uiRenderViewport(t);break;case"pickerSelected":case"pickerCount":this._uiToggleSelected(e);break;case"pickerPreview":if(this._buttons.preview.get("disabled"))return;e.halt(!0),this._uiPreviewOpen();break;case"pickerSelectAll":if(this._buttons.selectAll.get("disabled"))return;this._buttons.selectAll.hasClass("sm-button-skin-submit")?(this._thumbManager.handleSelectAction("none"),this._buttons.selectAll.replaceClass("sm-button-skin-submit","sm-button-skin-default")):(this._thumbManager.handleSelectAction("all"),this._buttons.selectAll.replaceClass("sm-button-skin-default","sm-button-skin-submit"));break;case"pickerDone":if(this._buttons.done.get("disabled"))return;this.fire("pickerItemSelected",{mode:i.mode,type:i.mode,deselectedKeys:this._thumbManager.get("deselectedKeys"),selectedKeys:this._thumbManager.get("selectedKeys"),selectedData:this._thumbManager.get("selectedData"),selectedByType:this._thumbManager.get("selectedByType"),context:i.context||""});break;case"pickerCancel":this.fire("pickerCancel",{})}},_handleKeyDownUp:function(t){if(!1!==this._pickerOpen)if("keydown"===t.type)this._keyEvent=t;else if("keyup"===t.type){this._keyEvent=null;var s=null,i=0;27===t.keyCode?null!==this._preview&&!0===this._preview.get("visible")&&this._preview.hide():83===t.keyCode?(t.halt(!0),this._uiToggleSelected(t)):75===t.keyCode||38===t.keyCode?(t.halt(!0),(s=e.one("."+this.getClassName("view-main")+" ."+this.getClassName("list"))).get("scrollHeight")>0&&s.get("scrollTop")>0&&(i=s.get("scrollTop")<100?0:s.get("scrollTop")-100,s.set("scrollTop",i))):74!==t.keyCode&&40!==t.keyCode||(t.halt(!0),(s=e.one("."+this.getClassName("view-main")+" ."+this.getClassName("list"))).get("scrollHeight")>0&&(i=(i=s.get("scrollTop")+100)>s.get("scrollHeight")?s.get("scrollHeight"):i,s.set("scrollTop",i)))}},_handleBreadcrumbMenuItemClick:function(e){var t=e.item.data.key.split("-"),s=t[0].toString().replace("#",""),i=t[1].toString(),a=e.item.label,n=void 0!==t[2]?t[2].toString():"";this._navigateToNewItem(a,s,i,n)},_handleBreadcrumbItemClick:function(e){var t=e.currentTarget.getData("key");if(e.preventDefault(),t&&t.match("-")&&!this._passwordPanelOpen){var s=t.split("-"),i=s[0].toString().replace("#",""),a=s[1].toString(),n=e.target.getContent(),l=s[2]||"";this._navigateToNewItem(n,i,a,l)}},_navigateToNewItem:function(e,t,s,i,a){var n={clear:!0};switch(s){case"RootFolder":n.type="view-folder",n.label=e;break;case"Folder":n.type="view-folder","00"!==t&&(n.folderId=t),n.label=e;break;case"Album":n.type="view-album","00"!==t&&(n.albumId=t,n.albumKey=i),n.label=e}a&&(n.authInfo=a,this._startPathNode&&(this._startPathPassword=!0)),this._uiPreviewClose(),this._uiToggleSelected(!0),this._uiRenderViewport(n)},_handleThumbEvent:function(t){var s,i,a,n,l=this.get("config"),r=l.mode,o=t.origTarget,h=t.type,d=o.ancestor(".sm-thumbnail"),u=this.get("viewConfig"),c={};if(d)if(s=d.getAttribute("data-type"),i=d.getAttribute("data-id"),n=(a=d.one(".sm-thumbnail-title h4"))?a.getContent():"",h===e.SM.ThumbnailManager.EVENT_SELECT)l.limit>0&&("image"===r&&"Image"===s||"album"===r&&"Album"===s||"folder"===r&&("Album"===s||"Folder"===s))&&this._thumbManager.get("selectedCount")>=l.limit&&t.halt(!0),"album"===r&&"Album"!==s&&t.halt(!0);else if(h==e.SM.ThumbnailManager.EVENT_NAVIGATE)switch(r){case"image":if("Album"===s){if(this._requestInProgress&&u.albumId==i)return;this._requestInProgress=!0,c.albumId=i,c.albumKey=d.getAttribute("data-key"),c.label=n,c.type="view-album",c.clear=!0,t.halt(!0),this._uiRenderViewport(c)}else if("Folder"==s){if(this._requestInProgress&&u.folderId==i)return;this._requestInProgress=!0,c.folderId=i,c.label=n,c.type="view-folder",c.clear=!0,t.halt(!0),this._uiRenderViewport(c),this._thumbManager.remove(d)}break;case"album":case"folder":case"node":case"page":if("Folder"===s){if(this._requestInProgress&&u.folderId==i)return;this._requestInProgress=!0,c.folderId=i,c.label=n,c.type="view-folder",c.clear=!0,t.halt(!0),this._uiRenderViewport(c),this._thumbManager.remove(d)}}},_uiUpdateFlags:function(e){var t=this.get("boundingBox").one("."+this.getClassName("flags")),s="";e||(this._disableFlags.hasOwnProperty("aspect")&&(s+="<p>"+this._disableFlags.aspect+" item"+(this._disableFlags.aspect>1?"s have":" has")+" been disabled for not meeting aspect requirements.</p>"),this._disableFlags.hasOwnProperty("printSize")&&(s+="<p>"+this._disableFlags.printSize+" item"+(this._disableFlags.printSize>1?"s have":" has")+" been disabled for not meeting print size requirements.</p>")),t.setContent(s)},_uiPreviewOpen:function(){0!==this._thumbManager.get("selectedCount")&&(this._preview||(this._preview=new d.ThumbnailPreview({constrainTo:"."+this.getClassName("view-main"),thumbManager:this._thumbManager}),this._preview.render(this.get("boundingBox").ancestor("div")),this._preview.on(d.ThumbnailPreview.EVENT_PREVIEW_TOO_SMALL,this._handlePreviewTooSmall,this),this._preview.on(d.ThumbnailPreview.EVENT_PREVIEW_CLOSE,this._uiPreviewClose,this),this._preview.after("visibleChange",(function(e){!1===e.newVal&&this._uiPreviewClose()}),this)),!1===this._preview.get("visible")?this._preview.show(!0===this._selectedDrawerOpen?"selected":"thumbnail")&&(this.get("boundingBox").one("."+this.getClassName("preview-screen")).removeClass("sm-hidden"),this._buttons.preview.replaceClass("sm-button-skin-default","sm-button-skin-submit"),this._thumbManager.activateHotkeys(!1),this._thumbManager.activateSelect(!1),this._buttons.selectAll.hide()):this._uiPreviewClose())},_uiPreviewClose:function(){this._preview&&!0===this._preview.get("visible")&&this._preview.hide(),this.get("boundingBox").one("."+this.getClassName("preview-screen")).addClass("sm-hidden"),this._buttons.preview.replaceClass("sm-button-skin-submit","sm-button-skin-default");var e=!0===this._selectedDrawerOpen?"view-selected":this._mainViewMode;this._uiActivateThumbManager(e),this._buttons.selectAll.show(),this._uiHandleSelectAllButton(e)},_hideHelpMessage:function(){e.one("."+this.getClassName("help")).setContent("")},_uiRenderViewport:function(t){if(void 0===t||!1!==t){var s=this.get("viewConfig"),i=null,a=null;if(r.isObject(s)&&r.isObject(t)&&s.type==t.type&&(!t.hasOwnProperty("page")||0===t.page)&&t.hasOwnProperty("authInfo")&&!t.authInfo.authFlow)switch(s.type){case"view-album":if(s.albumId==t.albumId)return;break;case"view-folder":case"view-category":if(s.folderId==t.folderId)return}switch(r.isObject(t)||(t={}),t.hasOwnProperty("type")||(t.type="view-folder",t.clear=!0),"view-folder"===t.type?(t.hasOwnProperty("label")&&""!==t.label||(t.label="My SmugMug"),t.hasOwnProperty("folderId")&&!t.hasOwnProperty("folderType")&&(i=this._thumbManager.makeUniqueKey(t.folderId,"Folder"),a=this._thumbManager.getTreeData(i),t.folderType=a&&a.typeInfo.hasOwnProperty("subCategoryId")?"SubCategory":"Category")):"view-selected"===t.type&&(t.label="Selected"),"view-selected"===t.type||t.hasOwnProperty("page")||(this._uiToggleLoadingMask("show"),this._history.push(e.clone(t)),this._uiToggleSelected(!0)),t.hasOwnProperty("authInfo")&&(t.authFlow=t.authInfo.authFlow,t.authPass=t.authInfo.pass,t.authSavePass=t.authInfo.savePass,delete t.authInfo),this.set("viewConfig",t),this._uiHideEmptyView(),t.page&&0!==t.page||this._uiUpdatePaginationProgress(!1),t.type){case"view-album":this._getImages();break;case"view-selected":this._uiRenderSelected();break;case"view-folder":case"view-category":this._getFolders()}}},_uiRenderSelected:function(){this._thumbManager.renderSelectedThumbs()},_uiToggleSelected:function(e){if(!1!==this._selectedDrawerOpen||!0!==e){r.isObject(e)&&e.halt(!0);var t=this.get("boundingBox").one("."+this.getClassName("view-selected")),s=this.get("nodeScreen"),i=this.getClassName("view-selected-open"),a=this._thumbManager.get("selectedCount"),n={easing:"ease-in",duration:.5,opacity:1,on:{start:function(){s.removeClass("sm-hidden")}}},l={easing:"ease-out",duration:.5,opacity:0,on:{end:function(){s.addClass("sm-hidden")}}};if(!1===this._selectedDrawerOpen&&r.isObject(e)){if(0===a)return;this._uiPreviewClose(),t.removeClass("sm-hidden"),this._uiRenderViewport({type:"view-selected"}),t.transition({duration:.5,delay:0,easing:"ease-out",width:{value:this._viewSelectedWidth+h},on:{start:function(){o.ie>0?(s.removeClass("sm-hidden"),s.setStyle("opacity",1)):s.transition(n)},end:function(){t.addClass(i)}}}),this._selectedDrawerOpen=!0,this._buttons.selected.replaceClass("sm-button-skin-default","sm-button-skin-submit"),this._thumbManager.setRenderType("selected"),this._uiHandleSelectAllButton("view-selected"),this._uiActivateThumbManager("view-selected"),this._uiTogglePreviewButton(this._thumbManager.get("selectedCount"))}else!0===this._selectedDrawerOpen?(t.transition({duration:.5,delay:0,easing:"ease-in",width:{value:0},on:{start:function(){t.removeClass(i),o.ie>0?(s.addClass("sm-hidden"),s.setStyle("opacity",0)):s.transition(l)},end:function(){t.addClass("sm-hidden")}}}),this._selectedDrawerOpen=!1,this._buttons.selected.replaceClass("sm-button-skin-submit","sm-button-skin-default"),this._thumbManager.setRenderType("default"),this._uiHandleSelectAllButton(this._mainViewMode),this._uiActivateThumbManager(this._mainViewMode),this._thumbManager.get("selectedCount")<1&&this._buttons.selected.hide(),this._handleSelectCountChange({newVal:this._thumbManager.get("selectedCount")}),this._uiTogglePreviewButton(this._thumbManager.get("currentSelected"))):(s.hasClass("sm-hidden")||(s.addClass("sm-hidden"),this._selectedDrawerOpen=!1),this._buttons.selected.hasClass("sm-button-skin-submit")&&this._buttons.selected.replaceClass("sm-button-skin-submit","sm-button-skin-default"))}},_uiToggleLoadingMask:function(e){var t=this.get("boundingBox").one("."+this.getClassName("loading-mask"));"show"==e?t.removeClass("sm-hidden"):t.addClass("sm-hidden")},_uiSetViewHeight:function(e){var t=this.get("boundingBox"),s=t.one("."+this.getClassName("viewport")),i=t.one("."+this.getClassName("view-main")),a=t.one("."+this.getClassName("view-selected"));s.setStyle("height",e+h),i.setStyle("height",e+h),i.one("."+this.getClassName("list")).setStyle("height",e+h),a.setStyle("height",e+h),a.one("."+this.getClassName("list")).setStyle("height",e+h)},_uiUpdatePaginationProgress:function(e){var t,a=this.get("boundingBox").one("."+this.getClassName("footer-center")).one("."+this.getClassName("progress")),n={easing:"ease-in",duration:.5,opacity:1,on:{start:function(){a.removeClass("sm-hidden")}}},l={easing:"ease-out",duration:.5,opacity:0,on:{end:function(){a.addClass("sm-hidden")}}};!1!==e?(t=Math.floor((e.page+1)/e.totalPages*100),r.isNumber(t)&&(s.render(i({percentComplete:t}),this._loadingProgressDOMNode),0===e.page&&e.totalPages>1&&a.hasClass("sm-hidden")?a.transition(n):e.page===e.totalPages-1&&a.transition(l))):a.transition(l)},_uiShowEmptyView:function(t){var s=new e.SM.MessageBox({message:t,type:"alert"}),i=this.get("boundingBox").one("."+this.getClassName("view-empty"));i.setContent(""),s.render(i),i.removeClass("sm-hidden")},_uiHideEmptyView:function(){this.get("boundingBox").one("."+this.getClassName("view-empty")).addClass("sm-hidden")},_uiHandleSelectAllButton:function(e){var t=this.get("config"),s=t.mode,i=0,a=this.get("viewTotals"),n=0;t.limit>0?this._buttons.selectAll.hide():(a.hasOwnProperty(s)&&(n=a[s]),t.limit<1&&"view-selected"===e?(this._buttons.selectAll.addClass("sm-button-skin-submit"),this._buttons.selectAll.removeClass("sm-button-skin-default"),this._buttons.selectAll.set("disabled",!1),this._buttons.selectAll.show()):n>0?(i=this._thumbManager.getNumberOfSelectedThumbs(),this._buttons.selectAll.set("disabled",!1),this._buttons.selectAll.show(),i===n?(this._buttons.selectAll.addClass("sm-button-skin-submit"),this._buttons.selectAll.removeClass("sm-button-skin-default")):(this._buttons.selectAll.addClass("sm-button-skin-default"),this._buttons.selectAll.removeClass("sm-button-skin-submit"))):(this._buttons.selectAll.hide(),this._buttons.selectAll.set("disabled",!0),this._buttons.selectAll.addClass("sm-button-skin-default"),this._buttons.selectAll.removeClass("sm-button-skin-submit")))},_handleThumbnailSelectAll:function(e){this._buttons.selectAll.addClass("sm-button-skin-submit"),this._buttons.selectAll.removeClass("sm-button-skin-default"),this._buttons.selectAll.set("disabled",!1)},_handleThumbnailSelectNone:function(e){this._buttons.selectAll.addClass("sm-button-skin-default"),this._buttons.selectAll.set("disabled",!1),this._buttons.selectAll.removeClass("sm-button-skin-submit")},_uiActivateThumbManager:function(e){var t=this.get("config").mode,s=this.get("viewTotals");"view-selected"===e||e===t||("folder"===t||"node"===t)&&"image"!==e?(this._thumbManager.activateHotkeys(!0),this._thumbManager.activateSelect(!0)):"folder"===e&&r.isObject(s)&&s.hasOwnProperty(t)&&s[t]>0?(this._thumbManager.activateSelect(!0),this._thumbManager.activateHotkeys(!0)):(this._thumbManager.activateHotkeys(!1),this._thumbManager.activateSelect(!1))},_uiTogglePreviewButton:function(e){var t=this.get("config"),s=!1;(!1===e||n.winHeight()<610)&&(s=!0),!1===s&&"image"===t.mode&&e>0?(this._buttons.preview.set("disabled",!1),this._buttons.preview.show()):(this._buttons.preview.hide(),this._buttons.preview.set("disabled",!0),this._uiPreviewClose())},_uiUpdateBreadcrumbs:function(t,s){var i,a,n=this.get("boundingBox"),l=this.get("viewConfig"),r=n.one("."+this.getClassName("breadcrumb")),o=[];if("view-selected"!==l.type&&null!==t&&!0!==this._selectedDrawerOpen&&!this.get("disableBreadCrumbs")){(i=this._thumbManager.getTreeBranches(t)).length>0&&e.Array.each(i,(function(e,t){var s;s="#"+(s=e.key?this._thumbManager.makeUniqueKey(e.id,e.type,e.key):this._thumbManager.makeUniqueKey(e.id,e.type)),o.push({name:"RootFolder"===e.type?"Home":e.name,data:{key:t!==i.length-1?s:""}})}),this),(a=new e.SM.Views.Breadcrumb({items:o})).itemTemplate='<li class="sm-breadcrumb-item"><a class="sm-button sm-button-nochrome sm-button-skin-default" href="#" <% if (data.data && data.data.key) { %>data-key="<%= data.data.key %>"<% } %>><% if (data.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= data.icon %>"></span><% } %><%== data.name %></a></li>',a.render();var h=a.getMenu();h&&h.on("itemClick",this._handleBreadcrumbMenuItemClick,this),r.setContent(a.get("container"))}},_prefetchPath:function(t){var s=this.get("config"),i={type:"view-idlookup",mode:s.mode,nickname:this.get("nickName")};r.isNumber(s.userId)&&(i.userId=s.userId),e.Array.each(["disableEmpty","disablePassworded","disablePrivate","disableUnlisted","disableNonSellable","limitAlbums"],(function(e){s.hasOwnProperty(e)&&(i[e]=s[e])})),this._startPathNode=!0,this.set("requestSent",!0),this._api.sendRequest({method:"rpc.thumbnail.pathlookup",freshRequest:!0,data:e.merge(i,{keyList:t.join(",")}),callback:{context:this,success:this._handlePickerResponse,failure:this._handlePickerResponseFailure},cfg:{method:"GET"}})},_prefetchSelection:function(t){var s,i,a,n=this.get("config"),l={type:"view-idlookup",mode:n.mode,nickname:this.get("nickName"),page:t,size:this._prefetch.totalPages};r.isNumber(n.userId)&&(l.userId=n.userId),e.Array.each(["disableEmpty","disablePassworded","disablePrivate","disableUnlisted","disableNonSellable","limitAlbums"],(function(e){n.hasOwnProperty(e)&&(l[e]=n[e])})),i=50+(s=50*t),a={keyList:this._prefetch.preSelected.slice(s,i).join(",")},this.set("requestSent",!0),this._api.sendRequest({method:"rpc.thumbnail.idlookup",freshRequest:!0,data:e.merge(l,a),callback:{context:this,success:this._handlePickerResponse,failure:this._handlePickerResponseFailure},cfg:{method:"GET"}})},_getFolders:function(){var t=this.get("viewConfig"),s=this.get("config"),i={nickname:this.get("nickName"),page:this.get("page"),size:this.get("pagesize")};r.isNumber(s.userId)&&(i.userId=s.userId),e.Array.each(["disableAlbum","disableEmpty","disableHideOwner","disablePassworded","disablePrivate","disableUnlisted","disableNonSellable","limitAlbums","disablePages","disableSystemAlbums"],(function(e){s.hasOwnProperty(e)&&(i[e]=s[e])})),t.hasOwnProperty("folderId")&&null===t.folderId&&delete t.folderId,this.set("requestSent",!0),this._api.sendRequest({method:"rpc.thumbnail.folders",freshRequest:!0,data:e.merge(i,t),callback:{context:this,success:this._handlePickerResponse,failure:this._handlePickerResponseFailure},cfg:{method:"GET"}})},_getImages:function(){var t=this.get("viewConfig"),s=this.get("config"),i={nickname:this.get("nickName"),page:this.get("page"),size:this.get("pagesize")};r.isNumber(s.userId)&&(i.userId=s.userId),e.Array.each(["disableCollected","disableHidden","disablePhoto","disableVideo","disableArchive","disableNonPriceable","disablePassworded","disablePrivate","disableUnlisted","disableNonPrintable","disableNonSellable"],(function(e){s.hasOwnProperty(e)&&(i[e]=s[e])})),this.set("requestSent",!0),this._api.sendRequest({method:"rpc.thumbnail.images",freshRequest:!0,data:e.merge(i,t),callback:{context:this,success:this._handlePickerResponse,failure:this._handlePickerResponseFailure},cfg:{method:"GET"}})},_handlePickerResponse:function(t){var s=this.get("boundingBox").one("."+this.getClassName("view-main")),i=this.get("viewConfig"),a=this.get("config"),n=null,l=t.response,o=l.meta,h=o.method,d=l.results,u=d.hasOwnProperty("nDeep")?"true"==d.nDeep:null,m=d.Pagination,g=d.viewConfig,p=m&&m.page&&m.size?m.page*m.size:null,b=null,_=null,v=null;if(!0===u&&(this._thumbManager.set("nDeep",!0),this._defaultRoot=d.nDeepRootID+"-RootFolder"),"ok"===o.stat){if(this.set("requestSent",!1),r.isObject(i)&&i.clear&&(""!==this._thumbManager.get("selectedState")&&this._thumbManager.set("selectedState",""),this._thumbManager.setRenderType("default").clear(),delete i.clear,this.set("viewConfig",i)),r.isObject(i)&&r.isObject(g)&&"view-selected"!=i.type){if(i.type!=g.type)return;switch(i.type){case"view-category":case"view-folder":if(i.folderId!=g.folderId)return;break;case"view-album":if(i.albumId!=g.albumId)return}}if(d.hasOwnProperty("AuthGallery"))this._handlePasswordProtectedAlbumOrNode(d);else{switch(this._startPathPassword&&(this._startPathNode=!1),h){case"rpc.thumbnail.idlookup":return this._thumbManager.setRenderType("selected"),d.hasOwnProperty("Folders")&&e.Array.each(d.Folders,(function(e){this._thumbManager.add(e)}),this),d.hasOwnProperty("Albums")&&e.Array.each(d.Albums,(function(e){this._thumbManager.add(e)}),this),d.hasOwnProperty("Images")&&e.Array.each(d.Images,(function(e){this._thumbManager.add(e)}),this),d.hasOwnProperty("Pages")&&e.Array.each(d.Pages,(function(e){this._thumbManager.add(e)}),this),d.hasOwnProperty("Nodes")&&e.Array.each(d.Nodes,(function(e){this._thumbManager.add(e)}),this),m.page<this._prefetch.totalPages-1&&this._prefetchSelection(m.page+1),void this._thumbManager.setRenderType("default");case"rpc.thumbnail.pathlookup":return this._thumbManager.addToTree({typeId:!0===u?d.nDeepRootID:"00",type:"RootFolder",typeInfo:{name:"My SmugMug",parentId:null}},this._defaultRoot),d.hasOwnProperty("Folders")&&e.Array.each(d.Folders,(function(e){this._thumbManager.addToTree(e,this._thumbManager.makeUniqueKey(e.typeId,e.type))}),this),d.hasOwnProperty("Albums")&&e.Array.each(d.Albums,(function(e){this._thumbManager.addToTree(e,this._thumbManager.makeUniqueKey(e.typeId,e.type))}),this),void(d.hasOwnProperty("LastItem")&&this._uiUpdateBreadcrumbs(d.LastItem));case"rpc.thumbnail.folders":this._thumbManager.setRenderType("default"),n="folder",_=c["Folder".toLowerCase()],b=g.hasOwnProperty("folderId")&&!r.isNull(g.folderId)?g.folderId+"-Folder":this._defaultRoot,this._rpcTotals.hasOwnProperty(b)||(this._rpcTotals[b]=!0===u?{folder:0,album:0,image:0,video:0,page:0}:{category:0,subcategory:0,album:0,image:0,video:0}),d.hasOwnProperty("Folders")?v=d.Folders:d.hasOwnProperty("Categories")?v=d.Categories:d.hasOwnProperty("SubCategories")&&(v=d.SubCategories),null!==v&&e.Array.each(v,(function(e){!1===u&&(e.typeInfo.parentId=b),this._thumbManager.add(e),!0===u?this._rpcTotals[b].folder++:b==this._defaultRoot?this._rpcTotals[b].category++:this._rpcTotals[b].subcategory++}),this),"page"!==a.mode&&d.hasOwnProperty("Albums")&&(null===v&&(n="album"),e.Array.each(d.Albums,(function(e){!1===u&&(e.typeInfo.parentId=b),this._thumbManager.add(e),this._rpcTotals[b].album++}),this)),d.hasOwnProperty("Pages")&&e.Array.each(d.Pages,(function(e){this._thumbManager.add(e),this._rpcTotals[b].page++}),this),s.hasClass(this.getClassName("view-small-thumbs"))&&s.removeClass(this.getClassName("view-small-thumbs")),s.addClass(this.getClassName("view-large-thumbs")),b==this._defaultRoot&&this._thumbManager.addToTree({typeId:!0===u?d.nDeepRootID:"00",type:"RootFolder",typeInfo:{name:"My SmugMug",parentId:null}},this._defaultRoot),m&&m.page===m.totalPages-1?(this.set("viewTotals",this._rpcTotals[b]),this._uiUpdateBreadcrumbs(b,this._rpcTotals[b]),delete this._rpcTotals[b]):this._uiUpdateBreadcrumbs(b),this._uiUpdateFlags(!0);break;case"rpc.thumbnail.images":this._thumbManager.setRenderType("default"),n="image",b=g.albumId+"-Album",_=c["Album".toLowerCase()],this._rpcTotals.hasOwnProperty(b)||(this._rpcTotals[b]={image:0,video:0}),d.hasOwnProperty("Images")&&(e.Array.each(d.Images,(function(e){var t=null,s=null,i=!1;a.hasOwnProperty("requireAspect")?(t=this._thumbManager.getLargestSize(e.typeInfo.Sizes,!1),s=this._thumbManager.getAspect(t.width,t.height),e.typeInfo.isDisabled=s!==a.requireAspect,!0===e.typeInfo.isDisabled&&(this._disableFlags.hasOwnProperty("aspect")||(this._disableFlags.aspect=0),this._disableFlags.aspect++)):a.hasOwnProperty("requireSize")&&(t=this._thumbManager.getLargestSize(e.typeInfo.Sizes,!0),i=!!a.hasOwnProperty("requireSizeStrict")&&a.requireSizeStrict,e.typeInfo.isDisabled=!this._thumbManager.checkSize(t.width,t.height,a.requireSize.width,a.requireSize.height,i),!0===e.typeInfo.isDisabled&&(this._disableFlags.hasOwnProperty("printSize")||(this._disableFlags.printSize=0),this._disableFlags.printSize++)),this._thumbManager.add(e),"mp4"==e.typeInfo.format?this._rpcTotals[b].video++:this._rpcTotals[b].image++}),this),s.hasClass(this.getClassName("view-large-thumbs"))&&s.removeClass(this.getClassName("view-large-thumbs")),s.addClass(this.getClassName("view-small-thumbs"))),m&&m.page==m.totalPages-1?(this.set("viewTotals",this._rpcTotals[b]),this._uiUpdateBreadcrumbs(b,this._rpcTotals[b]),delete this._rpcTotals[b]):this._uiUpdateBreadcrumbs(b),e.Object.size(this._disableFlags)>0&&this._uiUpdateFlags()}0===this._thumbManager.get("thumbKeys").length?this._uiShowEmptyView(r.sub("There are no items available to pick in this {parentType}.",{parentType:_})):this._thumbManager.renderDefaultThumbs(p),this._uiToggleLoadingMask("hide"),this._requestInProgress=!1,m&&m.page<m.totalPages-1&&(g.page=m.page+1,this._uiRenderViewport(g)),m&&m.total>0&&this._uiUpdatePaginationProgress(m),this._uiActivateThumbManager(n),this._uiHandleSelectAllButton(n),this._mainViewMode=n}}},_handlePickerResponseFailure:function(e){console.error("response failure",e)},_handlePasswordProtectedAlbumOrNode:function(t){var s=new e.SM.Panel.Confirm({centered:!0,width:"500px",modal:!0,disableScrollbars:!0,title:"This Folder Requires a Password",confirmLabel:"Let Me In",cancelLabel:"Cancel",zIndex:1});if(s._onButtonClick=function(t){"confirm"!==t.currentTarget.getData("value")||n.get("value")?e.SM.Panel.Confirm.prototype._onButtonClick.call(this,t):this._hasEmptyError||(a.setStyles({marginBottom:"20px",position:"relative"}),n.addClass("sm-form-field-error").setStyle("bottom","0"),a.append('<div class="sm-form-field-error-msg">Please enter a value.</div>'),this._hasEmptyError=!0)},s.render(),this._passwordPanelOpen=!0,t.AuthGallery.hasOwnProperty("hasHint")&&t.AuthGallery.hasHint){var i=e.Node.create(e.Lang.sub('<div><span class="sm-label-overhead">Hint:</span><h4>"{hint}"</h4></div>',{hint:t.AuthGallery.hint}));s.getStdModNode(e.WidgetStdMod.BODY,!0).append(i)}var a=e.Node.create('<div class="sm-search-form-input-container" />'),n=e.Node.create(e.SM.Templates.textbox({name:"Password",placeholder:"Enter password here...",type:"password"}));t.AuthGallery.hasOwnProperty("password")&&n.set("value",t.AuthGallery.password),s.getStdModNode(e.WidgetStdMod.BODY,!0).append(a.append(n));var l=e.Node.create('<div class="sm-node-password-remember"></div>'),r=new e.SM.Fields.Checkbox({label:"Remember Password",value:"1",unselectedValue:"0"}).render(l);s.getStdModNode(e.WidgetStdMod.BODY,!0).append(l),s.getStdModNode(e.WidgetStdMod.BODY).setStyles({marginLeft:"18px",marginRight:"18px"}),s.getStdModNode(e.WidgetStdMod.HEADER).setStyle("textAlign","center"),s.on("confirm",(function(e){var i={},a="",l="",o="",h={authFlow:!1,pass:"",savePass:"0"};e.confirmed?(h={authFlow:!0,pass:n.get("value"),savePass:r.getValue()},t.viewConfig.hasOwnProperty("albumId")?(a=t.viewConfig.albumId,o=t.viewConfig.albumKey):t.viewConfig.hasOwnProperty("folderId")?a=t.viewConfig.folderId:t.viewConfig.hasOwnProperty("typeId")&&(a=t.viewConfig.typeId),l=g.hasOwnProperty(t.viewConfig.type)?g[t.viewConfig.type]:t.viewConfig.type,s.destroy(!0),this._passwordPanelOpen=!1,this._navigateToNewItem(t.viewConfig.label,a,l,o,h)):(i=t.AuthGallery.hasOwnProperty("viewConfig")?t.AuthGallery.viewConfig:{niceName:"",typeId:"00",type:"RootFolder",typeDataKey:""},s.destroy(!0),this._passwordPanelOpen=!1,this._startPathNode&&this.get("config").closeOnPasswordCancel?(this._startPathPassword=null,this.fire("pickerCancel",{})):this._navigateToNewItem(i.niceName,i.typeId,i.type,i.typeDataKey,h))}),this)}},{CSS_PREFIX:u,ATTRS:{nickName:{value:null},page:{value:0},tree:{value:{}},pagesize:{value:50},viewConfig:{value:null},overlay:{value:null},config:{value:{}},thumbData:{value:[]},viewTotals:{value:{}},disableBreadCrumbs:{value:!1},visible:{value:!1},requestSent:{value:!1},nodeMore:{value:null},nodeViewport:{value:null},nodeViewMain:{value:null},nodeScreen:{value:null}},EVENT_SELECT:u+":pickerItemSelected",EVENT_CANCEL:u+":pickerCancel",EVENT_USER_FAIL:u+":pickerUserFail",TAB_CATEGORIES:1,TAB_GALLERIES:0,TAB_SELECTED:2,MODE_IMAGE:"image",MODE_ALBUM:"album",MODE_NODE:"node",MODE_FOLDER:"folder",MODE_PAGE:"page",REAL_TITLES:c}),e.namespace("SM").Picker=module.exports=p,SM.currentModule=null}),"",{requires:["anim","base","event-custom","event-custom-complex","node","react","react-dom","sm-api","sm-breadcrumb-view","sm-button","sm-overlay","sm-picker-history","sm-progressbar","sm-thumbnail","sm-thumbnail-manager","sm-thumbnail-preview","stylesheet","substitute","transition","widget","sm-panel-confirm","model","sm-templates-form","sm-fields"]});
YUI.add("sm-plan-model",(function(e){SM.currentModule="sm-plan-model";var n;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;n=e.Base.create("sm-plan",e.Model,[e.SM.ModelSyncAPI,e.ModelRelate],{apiEndpoint:"plan",idAttribute:"NickName",validate:function(e){},_sanitizeInt:function(e){return parseInt(e,10)},_sanitizeEmpty:function(n){return e.Lang.trim(n)}},{ATTRS:{NickName:{value:null},PlanID:{value:0,setter:"_sanitizeInt"},TermPrice:{value:0},Description:{value:""},Term:{value:0,setter:"_sanitizeInt"}}}),e.namespace("SM.Models").Plan=n,SM.currentModule=null}),"",{requires:["base","model","model-relate","sm-api","sm-model-history","sm-model-sync-api"]});
YUI.add("sm-pretty-date",(function(e){SM.currentModule="sm-pretty-date";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;module.exports=
/*!
 * JavaScript Pretty Date
 * Copyright (c) 2011 John Resig (ejohn.org)
 * Licensed under the MIT and GPL licenses.
 */
function(e){var r=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),t=((new Date).getTime()-r.getTime())/1e3,a=Math.floor(t/86400);if(!(isNaN(a)||a<0))return 0==a&&((t<60?"just now":t<120&&"1 minute ago")||t<3600&&Math.floor(t/60)+" minutes ago"||t<7200&&"1 hour ago"||t<86400&&Math.floor(t/3600)+" hours ago")||1==a&&"Yesterday"||a<7&&a+" days ago"||a<31&&Math.ceil(a/7)+" weeks ago"||"on "+["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()]+" "+r.getDate()+", "+r.getFullYear()},SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-pretty-pluralize",(function(e){SM.currentModule="sm-pretty-pluralize";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=(e,r)=>{let u="".concat(r,"s");return 1===e?r:u}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-pretty-size",(function(e){SM.currentModule="sm-pretty-size";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=SM.import("sm-smuglog"),r=["B","KB","MB","GB","TB"];exports.default=t=>{let s=parseFloat(t);if(Number.isNaN(s))throw e.error("sm-pretty-size",{message:"Invalid size given",size:t});let u=-1;for(;++u<4&&Math.abs(s)>=1024;)s/=1024;return"".concat(s.toFixed(2)," ").concat(r[u])}}(),SM.currentModule=null}),"",{requires:["sm-smuglog"]});
YUI.add("sm-pricelist-selectors",(function(e){SM.currentModule="sm-pricelist-selectors";var exports={},i=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilteredSkuTypesForProductOrSubcategory=function(i,r,s){let o=c(i,r)||[],l=n(i,o)||[],u=(0,t.getCatalogProductsForSubcategory)(i,l,s),g=u.length?u:[s],a=new Set,P=new Set;return g.flatMap(e=>{P.add(e.Uri)}),l.filter(t=>P.has((0,e.getExpansionUri)(i,t.Uri,"CatalogProduct"))).forEach(({Uri:t})=>{a.add((0,e.getExpansionUri)(i,t,"CatalogSkuType"))}),[...a.values()].map(t=>(0,e.getEntity)(i,t))},exports.getLowestPriceForProduct=exports.getPricelistSkusForAlbumUri=exports.getPricelistSkusForImageUri=exports.getPricelistPricesForAlbumUri=exports.getPricelistPricesForImageUri=exports.getPricelistSkuPriceForSku=exports.getFilteredPricelistSkuPricesForProduct=exports.getFilteredPricelistSkus=exports.getCombinedFilteredPricelistPrices=exports.getFilteredPricelistPrices=exports.getPricelistPricesUri=exports.getPricelistUri=exports.isPricelistColorCorrected=exports.isCatalogDiscounted=exports.getDiscountLevel=exports.getPrintVendorUriFromExclusions=exports.getPricelistUriFromExclusions=exports.isPricelistLoaded=exports.getPricelistExclusionsUriByAlbumUri=exports.getPricelistExclusionsUriByImageUri=void 0;var e=i("sm-api-redux-selectors"),t=i("sm-catalog-selectors");const r=(i,t)=>(0,e.getExpansionUri)(i,t,"AlbumImagePricelistExclusions")||(0,e.getExpansionUri)(i,t,"ImagePricelistExclusions");exports.getPricelistExclusionsUriByImageUri=r;const s=(i,t)=>(0,e.getExpansionUri)(i,t,"AlbumPricelistExclusions");exports.getPricelistExclusionsUriByAlbumUri=s;exports.isPricelistLoaded=(i,t)=>{if(!(0,e.getEntity)(i,t))return!1;let r=(0,e.getExpansionUri)(i,t,"CatalogPrintVendorSkuPrices")||(0,e.getExpansionUri)(i,t,"PricelistSkuPrices");return void 0!==(0,e.getEntity)(i,r)};exports.getPricelistUriFromExclusions=(i,t)=>(0,e.getExpansionUri)(i,t,"PricelistKey");exports.getPrintVendorUriFromExclusions=(i,t)=>(0,e.getExpansionUri)(i,t,"CatalogPrintVendor");const o=(i,t)=>{let r=(0,e.getEntity)(i,t);return null==r?void 0:r.DiscountLevel};exports.getDiscountLevel=o;exports.isCatalogDiscounted=(e,i)=>{switch(o(e,i)){case"Wholesale":case"Pro":return!0;default:return!1}};exports.isPricelistColorCorrected=(i,t)=>{let r=(0,e.getEntity)(i,t);return r&&r.ColorCorrected};exports.getPricelistUri=(i,t)=>(0,e.getExpansionUri)(i,t,"CatalogPrintVendor")||(0,e.getExpansionUri)(i,t,"PricelistKey");const l=(i,t)=>(0,e.getExpansionUri)(i,t,"CatalogPrintVendor.CatalogPrintVendorSkuPrices")||(0,e.getExpansionUri)(i,t,"PricelistKey.PricelistSkuPrices");exports.getPricelistPricesUri=l;const c=(i,t)=>{let{ExcludeList:r}=(0,e.getEntity)(i,t)||{},s=new Set(r),o=l(i,t),c=(0,e.getEntity)(i,o);return c&&c.filter(t=>!s.has((0,e.getExpansionUri)(i,t.Uri,"CatalogSku")))};exports.getFilteredPricelistPrices=c;exports.getCombinedFilteredPricelistPrices=(e,i)=>i.flatMap(i=>c(e,i)||[]);const n=(i,t)=>(0,e.getRelatedEntities)(i,t,"CatalogSku");exports.getFilteredPricelistSkus=n;const u=(i,t,r)=>t.filter((0,e.byRelatedEntity)(i,r,"CatalogSku.CatalogProduct"));exports.getFilteredPricelistSkuPricesForProduct=u;exports.getPricelistSkuPriceForSku=(i,t,r)=>t.find((0,e.byRelatedEntity)(i,r,"CatalogSku"));const g=(e,i)=>c(e,r(e,i));exports.getPricelistPricesForImageUri=g;const a=(e,i)=>c(e,s(e,i));exports.getPricelistPricesForAlbumUri=a;exports.getPricelistSkusForImageUri=(e,i)=>n(e,g(e,i)||[]);exports.getPricelistSkusForAlbumUri=(e,i)=>n(e,a(e,i)||[]);exports.getLowestPriceForProduct=(i,t,r)=>{let s=(0,e.getEntity)(i,r);return(u(i,t,s)||[]).reduce((e,i)=>!e||e.Price>i.Price?i:e,void 0)}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors","sm-catalog-selectors"]});
YUI.add("sm-printmark-view-container",(function(e){SM.currentModule="sm-printmark-view-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("react-redux"),t=r("sm-api-redux-selectors"),i=babelHelpers.interopRequireDefault(r("sm-printmark-view"));var n=(0,e.connect)((function(e,r){let{printmarkUri:i}=r,n=(0,t.getEntity)(e,i);return n?{imageUrl:n.PreviewOverlayURL,position:n.Location,transparency:n.Dissolve}:r}))(i.default);exports.default=n}(),SM.currentModule=null}),"",{requires:["react-redux","sm-api-redux-selectors","sm-printmark-view"]});
YUI.add("sm-printmark-view",(function(e){SM.currentModule="sm-printmark-view";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("classnames"));const i=["TopLeft","TopRight","Top","BottomLeft","BottomRight","Bottom"];function n(t){let{imageUrl:r,position:i,rotation:n=90,transparency:o=100,perimeterWidth:l=0,perimeterHeight:u=0}=t;if(!r)return null;n%=360;let m={opacity:1-o/100,margin:"".concat(u,"% ").concat(l,"%")},s="sm-printmark-view-position-".concat(i),p="sm-printmark-view-rotation-".concat(n),c=(0,a.default)({"sm-printmark-view":!0,[p]:!0,[s]:!0});return e.default.createElement("div",{className:"sm-printmark-view-container"},e.default.createElement("img",{className:c,style:m,src:r}))}n.propTypes={imageUrl:r.default.string,position:r.default.oneOf(i),perimeterWidth:r.default.number,perimeterHeight:r.default.number,rotation:r.default.number,transparency:r.default.number},n.displayName="Printmark.View"}(),SM.currentModule=null}),"",{requires:["classnames","sm","react"]});
YUI.add("sm-product-image-gallery-container",(function(e){SM.currentModule="sm-product-image-gallery-container";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("prop-types")),t=r("react-redux"),o=babelHelpers.interopRequireDefault(r("sm-product-image-gallery")),a=r("sm-com-lb-selectors"),l=r("sm-page-selectors");const u=(0,t.connect)((function(){let e=(0,a.makeMemoizedGetMoreInfoImages)();return function(r,{uri:t}){let o=(0,l.viewportIsGreaterThanMedium)(r),{moreInfoImages:a,preloadImageUrls:u}=e(r,t,o);return{largeProductImageMode:o,moreInfoImages:a,preloadImageUrls:u}}}))(o.default);u.propTypes={uri:e.default.string.isRequired};var s=u;exports.default=s}(),SM.currentModule=null}),"",{requires:["prop-types","react-redux","sm-product-image-gallery","sm-com-lb-selectors","sm-page-selectors"]});
YUI.add("sm-product-image-gallery",(function(e){SM.currentModule="sm-product-image-gallery";var exports={},l=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(l("react")),a=babelHelpers.interopRequireDefault(l("prop-types")),t=babelHelpers.interopRequireDefault(l("classnames")),r=babelHelpers.interopRequireDefault(l("sm-tiles-v2-tile")),m=babelHelpers.interopRequireDefault(l("sm-image-preloader")),s=l("sm-com-lb-constants");const i=l=>{var a;const[i,o]=(0,e.useState)(0);let{preloadImageUrls:n,moreInfoImages:u,largeProductImageMode:d}=l;if((0,e.useEffect)(()=>o(0),[u]),!(null==u?void 0:u.length))return null;let c=d?s.MORE_INFO_MAIN_PANE_THUMBNAIL_MAX_HEIGHT:s.MORE_INFO_THUMBNAIL_MAX_HEIGHT,f=d?s.MORE_INFO_MAIN_PANE_THUMBNAIL_MAX_WIDTH:s.MORE_INFO_THUMBNAIL_MAX_WIDTH,p=null===(a=u[i])||void 0===a?void 0:a.mainImage,b=u.length>1,_=(0,t.default)("sm-com-lb-more-info-gallery",{"sm-mt-4":!d,"sm-mb-2":b}),g=(0,t.default)("sm-com-lb-more-info-gallery-hero-container","sm-flex",{"sm-flex-items-center":d,"sm-flex-justify-center":d,"sm-com-lb-more-info-gallery-has-thumbnails":b}),I=e.default.createElement("div",{className:g},p&&e.default.createElement("img",{"data-testid":"com_lb_sidebar_moreinfodisplay_image",src:p}));return e.default.createElement("div",{className:_},!!(null==n?void 0:n.length)&&e.default.createElement(m.default,{preloadUrls:n}),d?I:e.default.createElement("div",{className:"sm-com-lb-more-info-gallery-aspect-ratio-lock sm-position-relative"},I),b&&e.default.createElement("div",{className:"sm-com-lb-more-info-gallery-thumbnails sm-flex sm-flex-wrap sm-pt-2"},u.map((l,a)=>e.default.createElement(r.default,{className:"sm-com-lb-more-info-gallery-thumbnail-item","data-testid":"com_lb_sidebar_moreinfo_thumbnail",height:c,imageUrl:l.thumbnail,key:"moreinfo_thumbnail_".concat(l.thumbnail),onClick:()=>{o(a)},selected:i===a,uniqueId:"moreinfo_thumbnail_".concat(l.thumbnail),width:f}))))};i.displayName="ProductImageGallery",i.propTypes={largeProductImageMode:a.default.bool,moreInfoImages:a.default.arrayOf(a.default.shape({mainImage:a.default.string.isRequired,thumbnail:a.default.string.isRequired})).isRequired,preloadImageUrls:a.default.arrayOf(a.default.string)};var o=i;exports.default=o}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-tiles-v2-tile","sm-image-preloader","sm-com-lb-constants"]});
YUI.add("sm-progressbar-deprecated",(function(e){SM.currentModule="sm-progressbar-deprecated";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=e.Base.create("progressBar",e.View,[],{template:'<div class="sm-progress-message"></div><div class="sm-progress-bar"><div class="sm-progress-complete"></div></div>',initializer:function(e){e||(e={}),e.template&&(this.template=e.template),this._attachEvents()},destructor:function(){this._detachEvents()},isIndeterminate:function(){return-1===this.get("maxValue")},percentComplete:function(){var e=this.get("maxValue"),s=this.get("minValue"),t=this.get("value");return t<=s?0:e<1||e<=s||t>=e?100:100/e*t},render:function(){var e=this.get("container");return e.addClass("sm-progress").setHTML(this.template),this._progressBar=e.one(".sm-progress-bar"),this._progressComplete=e.one(".sm-progress-complete"),this._progressContainer=e,this._progressMessage=e.one(".sm-progress-message"),this.rendered=!0,this._syncMessage(),this._syncValue(),this},_attachEvents:function(){this._events=[this.after(["maxValueChange","minValueChange","valueChange"],this._syncValue),this.after("messageChange",this._syncMessage)]},_detachEvents:function(){this._events&&(new e.EventHandle(this._events).detach(),this._events=null)},_syncMessage:function(){if(this.rendered){var e=this.get("message"),s=this._progressMessage;"string"==typeof e?s.set("text",e):e?s.setHTML(e):s.empty()}},_syncValue:function(){if(this.rendered){var e=this._progressComplete,s=this._progressContainer,t=this.isIndeterminate();s.toggleClass("sm-progress-indeterminate",t),t?e.setStyle("width",""):e.setStyle("width",this.percentComplete()+"%")}}},{ATTRS:{maxValue:{value:-1},message:{value:null},minValue:{value:0},value:{value:0}}});e.namespace("SM").ProgressBar=s;var t=s;exports.default=t}(),SM.currentModule=null}),"",{requires:["view"]});
YUI.add("sm-progressbar",(function(e){SM.currentModule="sm-progressbar";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("classnames")),a=babelHelpers.interopRequireDefault(r("prop-types")),s=babelHelpers.interopRequireDefault(r("react"));const t=({className:r,message:a,percentComplete:t})=>{let l,u="number"!=typeof t;return u||(l={width:"".concat(t,"%")}),s.default.createElement("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":u?void 0:t,className:(0,e.default)("sm-progress",r),"data-indeterminate":u||void 0,role:"progressbar"},!!a&&s.default.createElement("div",{className:"sm-progress-message"},a),s.default.createElement("div",{className:"sm-progress-bar"},s.default.createElement("div",{className:"sm-progress-complete",style:l})))};t.displayName="ProgressBar",t.propTypes={message:a.default.string,percentComplete:a.default.number};var l=t;exports.default=l}(),SM.currentModule=null}),"",{requires:["classnames","prop-types","react"]});
YUI.add("sm-promise-queue",(function(i){SM.currentModule="sm-promise-queue";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){function t(e,n){if(!(this instanceof t))return new t(e,n);this.limit=n||1,this._functions=e.concat(),this._pending=new i.Map({autoStamp:!0}),this._running=!0,this._size=e.length;var s=this;this._promise=new i.Promise((function(i,t){s._fulfill=i,s._reject=t})),this._next()}i.mix(t.prototype,{abort:function(i){if(this._running){var t=new Error(i||"Queue was aborted.");return t.aborted=!0,t.processed=this._size-this._functions.length,this._fail(t),this}},then:function(){return this._promise.then.apply(this._promise,arguments)},_fail:function(){this._running=!1,this._pending.clear(),this._reject.apply(null,arguments)},_next:function(t){if(this._running){var e=this._functions,n=this._pending;if(t&&n.remove(t),e.length)for(var s,r;n.size<this.limit&&(s=e.shift());)(r=s())&&(r.then(i.bind(this._next,this,r),i.bind(this._fail,this)),n.set(r,!0));else n.size||(this._running=!1,this._fulfill())}}}),i.SM.PromiseQueue=t}(),SM.currentModule=null}),"",{requires:["gallery-sm-map","promise"]});
YUI.add("sm-pushlist-view",(function(e){SM.currentModule="sm-pushlist-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;e.namespace("SM.Views").PushList=e.Base.create("sm-pushlist-view",e.View,[],{containerTemplate:'<ul class="sm-pushlist"></ul>',itemTemplate:'<li id="<%= data.id %>" class="sm-pushlist-item"><a href="#" data-item-id="<%= data.id %>" data-child-id="<%= data.childId %>" class="sm-h5 sm-pushlist-item-label"><% if (data.icon) { %><span class="sm-fonticon sm-fonticon-sml sm-fonticon-<%= data.icon %>"></span><% } %><%= data.label %></a><div id="<%= data.childId %>" class="sm-pushlist-child"></div></li>',childHeaderTemplate:'<div class="sm-pushlist-header">'+e.SM.Templates.button({icon:"AngleBracketLeftSlim",value:"back",size:"large",skin:"submit"})+'<h5 class="sm-pushlist-heading"><%= data.label %></h5></div>',events:{"> .sm-pushlist-item:not(.sm-pushlist-item-disabled) > a":{click:"_onItemClick"}},destructor:function(){this._childHeader&&this._childHeader.remove(!0)},disableAllListItems:function(){var t=this.get("items"),i=this;return e.Array.each(t,(function(e){i.disableListItem(e.id)})),this},disableListItem:function(t){e.one("#"+t).addClass("sm-pushlist-item-disabled")},enableAllListItems:function(){var t=this.get("items"),i=this;return e.Array.each(t,(function(e){i.enableListItem(e.id)})),this},enableListItem:function(t){e.one("#"+t).removeClass("sm-pushlist-item-disabled")},render:function(){var t,i,s,a=this.get("container"),l=this._compileTemplates(),d=this.get("items"),n=d.length;for(s=0;s<n;s++)(t=d[s]).childId=e.guid(),(i=e.Node.create(l.item(e.merge({id:e.guid(),childId:t.childId},t)))).setData("item",t),t.disabled&&i.addClass("sm-pushlist-item-disabled"),t.childContainer&&i.one("#"+t.childId).setHTML(e.one(t.childContainer)),a.append(i);return this},_pushItemView:function(t){var i,s=e.one("#"+t),a=s.getData("item"),l=this.get("pushContainer"),d=this.get("hidePoppedItems");if(this._childHeader&&(this._childHeader.remove(!0),this._childHeader=null),clearTimeout(this._popTimer),a.childContainer){var n=this._compileTemplates();i=e.one("#"+a.childId),this._childHeader=e.Node.create(n.childHeader({label:a.label})),this._childHeader.delegate("click",this._onBackClick,".sm-button:not([disabled])",this),i.prepend(this._childHeader),l&&e.one(l).addClass("sm-pushlist-child-container").set("scrollTop",0).append(i),d&&i.show(),setTimeout((function(){i.addClass("sm-pushlist-child-open")}),10),this.fire("itemPush",{itemNode:s,item:a})}return this.get("container").all(".sm-pushlist-item-label").setAttribute("tabindex","-1"),this._openItemId=t,this},_popItemView:function(t){var i=e.one("#"+t),s=this.get("pushContainer"),a=i.getData("item"),l=e.one("#"+a.childId),d=this.get("hidePoppedItems");return l.removeClass("sm-pushlist-child-open"),(s||d)&&(clearTimeout(this._popTimer),this._popTimer=setTimeout((function(){s&&(e.one(s).removeClass("sm-pushlist-child-container"),i.append(l)),d&&l.hide()}),550)),this.fire("itemPop",{itemNode:i,item:i.getData("item")}),this.get("container").all(".sm-pushlist-item-label").removeAttribute("tabindex"),this._openItemId=null,this},_compileTemplates:function(){return this._templates||(this._templates={item:e.Template.Micro.compile(this.itemTemplate),childHeader:e.Template.Micro.compile(this.childHeaderTemplate)}),this._templates},_onItemClick:function(e){var t=e.currentTarget.getData("item-id");e.preventDefault(),this._pushItemView(t)},_onBackClick:function(){var e=this._openItemId;e&&this._popItemView(e)}},{ATTRS:{hidePoppedItems:{},items:{},pushContainer:{}}}),SM.currentModule=null}),"",{requires:["template-micro","node","view","sm-templates-button"]});
YUI.add("sm-react-router-redux-history",(function(e){SM.currentModule="sm-react-router-redux-history";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=SM.import("sm-dom"),{createBrowserHistory:r,createMemoryHistory:t}=SM.import("history-ext");let o;o=e.isBrowser?r():t();var u=o;exports.default=u}(),SM.currentModule=null}),"",{requires:["sm-dom","history-ext"]});
YUI.add("sm-redux-event-bridge",(function(e){SM.currentModule="sm-redux-event-bridge";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.middleware=exports.onReduxAction=exports.detachFromReduxAction=void 0;const e=Object.create(null),t=(t,r)=>{let u=e[t];u&&(e[t]=u.filter(e=>e!==r),e[t].length||delete e[t])};exports.detachFromReduxAction=t;exports.onReduxAction=(r,u)=>{e[r]||(e[r]=[]);let d=e[r];return d.includes(u)||d.push(u),()=>t(r,u)};exports.middleware=t=>r=>u=>{let d=r(u);var n;return n=u.type,e[n]&&((t,r,u)=>{let d=e[t];d&&d.forEach(e=>e(r,u))})(u.type,u,t.getState()),d}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-redux-store",(function(e){SM.currentModule="sm-redux-store";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r("redux"),s=babelHelpers.interopRequireDefault(r("sm-dom")),u=babelHelpers.interopRequireDefault(r("sm-io-core")),d=babelHelpers.interopRequireDefault(r("redux-thunk")),t=babelHelpers.interopRequireDefault(r("sm-analytics-redux")),m=babelHelpers.interopRequireDefault(r("sm-react-router-redux-history")),a=r("sm-redux-event-bridge"),c=babelHelpers.interopRequireDefault(r("sm-fullscreen-middleware")),i=babelHelpers.interopRequireDefault(r("sm-api-redux-middleware")),o=babelHelpers.interopRequireDefault(r("sm-api-redux-cache-middleware")),l=r("redux-responsive"),n=r("connected-react-router");function p(e,r,s){let u=e;for(let e of s)u=e(u,r);return u}const M=(e={},r)=>p(e,r,[SM.import("sm-add-ons-reducers").UI,SM.import("sm-checkout-reducers").UI,SM.import("sm-component-menu-reducers").UI,SM.import("sm-comments-reducers").UI,SM.import("sm-dialogs-reducers").UI,SM.import("sm-lightbox-reducers").UI,SM.import("sm-node-settings-reducers").UI,SM.import("sm-w9-reducers").UI,SM.import("sm-page-help-reducers").UI,SM.import("sm-subscribe-choose-a-plan-v2-reducers").UI,SM.import("sm-content-wizard-reducers").UI,SM.import("sm-image-metadata-reducers").UI]),S=(e={},r)=>p(e,r,[SM.import("sm-api-redux-reducers").DATA,SM.import("sm-w9-reducers").DATA]),f=(e={},r)=>p(e,r,[SM.import("sm-api-redux-reducers").INTERNAL,SM.import("sm-api-redux-paginator-reducers").INTERNAL]),b=(e={},r)=>p(e,r,[SM.import("sm-page-reducers").PAGE,SM.import("sm-page-nodepage-reducers").PAGE,SM.import("sm-fullscreen-reducers")]);var x=(0,e.createStore)((r={},s)=>p(r,s,[(0,e.combineReducers)({ui:M,data:S,page:b,_internal:f,router:(0,n.connectRouter)(m.default)}),SM.import("sm-catalog-reducers"),SM.import("sm-com-lb-reducers"),SM.import("sm-batch-add-reducers"),SM.import("sm-api-redux-cache-reducers"),SM.import("sm-quickstart-guide-reducers"),SM.import("sm-favorite-reducers")]),(0,e.compose)(l.responsiveStoreEnhancer,(0,e.applyMiddleware)((0,n.routerMiddleware)(m.default),i.default,o.default,d.default.withExtraArgument({io:u.default}),t.default,a.middleware,c.default),"-min"!==SM.env.jsLevel&&s.default.win.__REDUX_DEVTOOLS_EXTENSION__?s.default.win.__REDUX_DEVTOOLS_EXTENSION__():e=>e));exports.default=x}(),SM.currentModule=null}),"",{requires:["redux","sm-dom","sm-io-core","sm-api2-transaction","redux-thunk","sm-analytics-redux","sm-react-router-redux-history","sm-redux-event-bridge","sm-fullscreen-middleware","sm-api-redux-middleware","sm-api-redux-cache-middleware","redux-responsive","connected-react-router","sm-add-ons-reducers","sm-checkout-reducers","sm-component-menu-reducers","sm-comments-reducers","sm-dialogs-reducers","sm-lightbox-reducers","sm-node-settings-reducers","sm-w9-reducers","sm-page-help-reducers","sm-subscribe-choose-a-plan-v2-reducers","sm-content-wizard-reducers","sm-image-metadata-reducers","sm-api-redux-reducers","sm-api-redux-paginator-reducers","sm-page-reducers","sm-page-nodepage-reducers","sm-fullscreen-reducers","sm-catalog-reducers","sm-com-lb-reducers","sm-batch-add-reducers","sm-api-redux-cache-reducers","sm-quickstart-guide-reducers","sm-favorite-reducers"]});
YUI.add("sm-request-queue",(function(t){SM.currentModule="sm-request-queue";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){function e(){this._groups={}}t.mix(e.prototype,{abort:function(t){var e=this._groups[t];if(e){for(delete this._groups[t];e.length;)e.shift().abort();return this}},add:function(u,n,r){var s,i=this._groups[u],o=this;return i||((i=this._groups[u]=[]).options=r||{}),s=new t.Promise((function(r,s){var a=this;function d(){o.remove(u,a.id),!i.options.abortOnFailure||"aborted"!==a.status&&"failure"!==a.status?o._next(u):o.abort(u)}a.groupName=u,a.id=t.guid("request-queue"),a.status="pending",a.abort=function(){a.status="aborted",a._trx&&a._trx.abort(),d()},a.send=function(){if("pending"!==a.status)return"running"!==a.status&&o._next(u),a;var i=o._mockIO||e._mockIO||t.SM.io;return a.status="running",a._trx=i(n),a._trx.then((function(t){a.status="success",d(),r(t)}),(function(t){a.status="failure",d(),s(t)})),a}})),i.push(s),this._next(u),s},isBusy:function(){return t.Object.some(this._groups,(function(t){return t&&t.length}))},remove:function(e,u){var n,r=this._groups[e];if(r)return t.Array.some(r,(function(t,e){if(t.id===u)return n=t,r.splice(e,1),!0})),r.length||delete this._groups[e],n},_next:function(t){var e=this._groups[t],u=e&&e[0],n=this;u&&"pending"===u.status&&(e.delayTimeout||(e.options.delay?(e.delayTimeout=setTimeout((function(){e.delayTimeout=null,n._next(t)}),e.options.delay),e.options.delay=null):u.send()))}}),t.SM.RequestQueue=e}(),SM.currentModule=null}),"",{requires:["promise","sm-api2"]});
YUI.add("sm-resize-observer-hoc",(function(e){SM.currentModule="sm-resize-observer-hoc";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("prop-types")),s=babelHelpers.interopRequireDefault(r("lodash")),i=babelHelpers.interopRequireDefault(r("sm-dom"));exports.default=r=>{class n extends e.PureComponent{constructor(...r){super(...r),babelHelpers.defineProperty(this,"_resizeRef",e.default.createRef()),babelHelpers.defineProperty(this,"_resize",()=>{let e=this._resizeRef.current,{width:r,height:t}=e?e.getBoundingClientRect():i.default.getViewportRect();this.props.onResize(r,t)})}componentDidMount(){this._resizeListener=i.default.addEventListener(i.default.win,"resize",s.default.debounce(this._resize,50)),this._resize()}componentWillUnmount(){i.default.removeEventListener(this._resizeListener)}render(){return e.default.createElement(r,babelHelpers.extends({},this.props,{resizeRef:this._resizeRef,onResize:this._resize}))}}return babelHelpers.defineProperty(n,"displayName","ResizeObserver"),babelHelpers.defineProperty(n,"propTypes",{onResize:t.default.func.isRequired}),n}}(),SM.currentModule=null}),"",{requires:["react","prop-types","lodash","sm-dom"]});
YUI.add("sm-resource-album-image",(function(e){SM.currentModule="sm-resource-album-image";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),r=SM.import("sm-resource-core"),t=SM.import("sm-resource-image"),o=SM.import("rsvp"),u=SM.import("sm-smuglog");function s(e,o){if(t.call(this,o),e)if("string"==typeof e){if(!r.isAPIUri(e))throw u.error({message:"Invalid parent album URI.",uri:e});this._albumUri=e}else{if("Album"!==e.resourceType)throw u.error("Parent album must be a URI or an Album resource.");this._album=e}}s.prototype=e.create(t.prototype,{constructor:s});var i=s.prototype;i.resourceType="AlbumImage",i.getAlbum=function(){if(!this.isNew()||this.hasExpansion("Album"))return this.expand("Album");if(this._album)return o.resolve(this._album);var e=this._albumUri;if(!this._albumUri)throw u.error("sm-resource-album-image",{message:"No album to expand! You probably didn't pass one to the constructor.",method:"getAlbum"});var t=this;return r.loadUri(e).then((function(e){return"Album"!==e.resourceType&&u.log("sm-resource-album-image",'Expected resourceType "Album" but got "'+e.resourceType+'"',u.LEVEL_WARNING),t._album=e,e}))},i.sync=function(e){if(e||(e={}),!this.hasChanges()&&!e.force)return this.refresh(e);var r=this;return this.expand("Image").then((function(t){return t.update(r.changes()),t.sync(e).then((function(){return r.refresh(e)}))}))},s.getUriForKey=function(e,r){return"/api/v2/album/"+encodeURIComponent(e)+"/image/"+encodeURIComponent(r)},s.loadByKey=function(e,t,o){return r.loadUri(s.getUriForKey(e,t),o)},r.registerResourceClass("AlbumImage",s),module.exports=r.AlbumImage=s}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-resource-core","sm-resource-image","sm-smuglog"]});
YUI.add("sm-resource-album",(function(e){SM.currentModule="sm-resource-album";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),r=SM.import("sm-resource-core"),o=SM.import("sm-resource-node"),t=SM.import("rsvp"),s=SM.import("sm-smuglog");function i(){o.apply(this,arguments)}i.prototype=e.create(o.prototype,{constructor:i});var n=i.prototype;n.fieldConfig={Date:{getter:r.parseDate,setter:r.stringifyDate},LastUpdated:{getter:r.parseDate,setter:r.stringifyDate}},n.resourceType="Album",n.collectImages=function(o,t){var s=this._getResourceUris(o,"AlbumImage"),i=this.getExpansionUri("CollectImages");return r.postUri(i,e.assign({},t,{data:{CollectUris:s.join(",")}}))},n.deleteImages=function(o,t){var s=this._getResourceUris(o,"AlbumImage"),i=this.getExpansionUri("DeleteAlbumImages");return r.postUri(i,e.assign({},t,{data:{Async:!0,DeleteUris:s.join(",")}}))},n.getParentFolder=function(){if(!this.isNew()||this.hasExpansion("Folder"))return this.expand("Folder");var e=this;return this._getParentFolder().then((function(r){return r&&(e._meta.expansions.Folder=r),r}))},n.moveImages=function(o,t){var s=this._getResourceUris(o,"AlbumImage"),i=this.getExpansionUri("MoveAlbumImages");return r.postUri(i,e.assign({},t,{data:{Async:!0,MoveUris:s.join(",")}}))},n.positionImages=function(o,i,n){n||(n={});var a=this;return new t.Promise((function(t,u){var m=a._getResourceUris(o,"AlbumImage"),l=a.getExpansionUri("SortAlbumImages");if(!l)throw s.error("sm-resource-album",{message:'Must set SortMethod to "Position" before images can be positioned.',method:"positionImages"});r.requestQueue.add(a.getCanonicalUri()+"-sort",e.assign({},n.io,{method:"POST",type:"v2",uri:l,data:e.assign({},n.io&&n.io.data,{MoveUris:m.join(","),MoveLocation:n.after?"After":"Before",Uri:a._getResourceUri(i,"AlbumImage")})}),{abortOnFailure:!0}).then(t,(function(e){s.console("sm-resource-album",{method:"positionImages",uri:l,error:e&&e.error||e},s.LEVEL_ERROR),u(e)}))}))},n._getCreateUri=function(){return this.getParentFolder().then((function(e){return e.getExpansionUri("FolderAlbums")}))},i.getUriForKey=function(e){return"/api/v2/album/"+encodeURIComponent(e)},i.loadByKey=function(e,o){return r.loadUri(i.getUriForKey(e),o)},i.unlockdownloadByKey=function(e,o){return r.postUri(i.getUriForKey(e)+"!unlockdownload",o)},i.downloadByKey=function(e,o){return void 0!==o?r.postUri(i.getUriForKey(e)+"!download",o):r.loadUri(i.getUriForKey(e)+"!download")},r.registerResourceClass("Album",i),module.exports=r.Album=i}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-resource-core","sm-resource-album-image","sm-resource-folder","sm-resource-image","sm-resource-node","sm-smuglog"]});
YUI.add("sm-resource-core",(function(e){SM.currentModule="sm-resource-core";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var t,r,s,n;(r=(t=function(e,t,r){var s=t&&t.Pages;e||(e=[]),r||(r={}),Array.isArray(e)||(e=[e]),s&&(this.nextPageUri=s.NextPage),this.options=r,this.resources=e}).prototype).getNextPage=function(e){return n.loadUri(this.nextPageUri,Object.assign({},e,{paginate:!0}))},r.isLastPage=function(){return!this.nextPageUri},function(){var t=SM.import("sm-smuglog"),r=(s=function(e,t,r){var s=t&&t.Pages,n=t&&t.Uri;if(e||(e=[]),r||(r={}),Array.isArray(e)||(e=[e]),!s){var a=e.length;s={Count:a,FirstPage:n,LastPage:n,RequestedCount:r.count||a||100,Start:1,Total:a}}this.page=Math.ceil(s.Start/s.RequestedCount),this.options=r,this.requestedCount=s.RequestedCount,this.resources=e,this.start=s.Start,this.totalPages=Math.max(1,Math.ceil(s.Total/s.RequestedCount)),this.totalResources=s.Total,this.uri=n}).prototype;r.getNextPage=function(e){return this.getPage(this.page+1,e)},r.getPage=function(e,r){if(e<1)return Promise.reject(t.error("sm-resource-paginator",{message:"Page number is out of bounds: "+e,method:"getPage"}));var s=(r=Object.assign({},this.options,{start:null},r)).count||this.requestedCount;return n.loadUri(this.uri,Object.assign({},r,{count:s,paginate:!0,start:r.start||(e-1)*this.requestedCount+1}))},r.getPrevPage=function(e){return this.getPage(this.page-1,e)},r.isFirstPage=function(){return 1===this.page},r.isLastPage=function(){return this.page===this.totalPages},r.toString=function(){for(var e=[],t=0,r=this.resources.length;t<r;++t)e.push(this.resources[t].toString());return"ResourcePaginator: ["+e.join(", ")+"]"},e.namespace("SM").ResourcePaginator=s}(),function(){var r=SM.import("lodash"),a=SM.import("sm-event-emitter"),i=SM.import("rsvp"),o=SM.import("sm-smuglog"),u=SM.import("sm-uri-deprecated");const c=SM.import("sm-redux-store"),{request:h,response:f}=SM.import("sm-api-redux-middleware-actions"),{paginationRequest:p}=SM.import("sm-api-redux-paginator-actions"),{buildPaginatorUri:l}=SM.import("sm-api-redux-paginator-utils");(n=function(){this._fields={},this._meta={expansions:{},paginatedExpansions:{},uris:{}}}).prototype=r.create(a.prototype,{constructor:n});var g=n.prototype;g.endpointType="Unknown",g.isSmugMugResource=!0,g.paginationClass=s,g.resourceType="Resource",g.changes=function(){return this.isNew()?this.get():r.assign({},this._changes)},g.destroy=function(){o.add("sm-resource-core","#destroy() is deprecated. Please don't use it.",o.LEVEL_DEPRECATED)},g.expand=function(e,t){if(t||(t={}),!t.io&&!t.refresh){if("object"==typeof e)return this._expandMultiple(e,t);var s=this.getExpansion(e);if(void 0!==s)return i.resolve(s)}return n.loadUri(this.getCanonicalUri(),{expand:"object"==typeof e?e:[e],io:r.assign({},t.io,{fields:["Uri","ResponseLevel"]})}).then((function(t){if("object"==typeof e){var s={};return r.isArray(e)?r.forEach(e,(function(e){s[e]=t.getExpansion(e)})):r.forOwn(e,(function(e,r){s[r]=t.getExpansion(r,e)})),s}return t.getExpansion(e)}))},g.get=function(e){var t=this._fields;if(e){var s=this.fieldConfig&&this.fieldConfig[e],n=s&&s.getter;if(n&&t.hasOwnProperty(e))return"string"==typeof n&&(n=this[n]),n.call(this,t[e]);var a=t[e];return a&&"object"==typeof a&&(a=r.isArray(a)?a.concat():r.assign({},a)),a}var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=this.get(o));return i},g.getCanonicalUri=function(){return n.buildCanonicalUri(this.get("Uri"))},g.getExpansion=function(e,t){var s,a=this._meta;if(!e||"*"===e)return s={},r.forOwn(a.expansions,(function(e,t){s[t]=e.resources})),s;var i=e.split(".");if(1===i.length){if(e=i[0],t&&(t.count||t.start)){var o=a.paginatedExpansions[e];o&&(s=o[(t.start||1)+":"+(t.count||"")])}else s=a.expansions[e];if(!s)return;return t&&t.paginate?new this.paginationClass(s.resources,s.response):r.isArray(s.resources)?s.resources.concat():s.resources}return n._getNestedExpansions(this,i,t)},g.getExpansionUri=function(e){var t=this._meta.uris[e];return t&&"object"==typeof t?t.Uri:t},g.has=function(e){return this._fields.hasOwnProperty(e)},g.hasChanges=function(e){var t=this._changes;if(e)return!!t&&t.hasOwnProperty(e);if(this.isNew())return!0;if(!t)return!1;for(var r in t)if(t.hasOwnProperty(r))return!0;return!1},g.hasExpansion=function(e){return this._meta.expansions.hasOwnProperty(e)},g.isNew=function(){return!this._meta.version},g.push=function(e){var t=this.get(e);if(void 0===t)t=[];else if(!t.push)throw new Error("Field is not an array: "+e);var r=Array.prototype.push.apply(t,Array.prototype.slice.call(arguments,1)),s={};return s[e]=t,this.update(s,{src:"push"}),r},g.refresh=function(e){var t=n.buildCanonicalUri(this.get("Uri"));return t?n.loadUri(t,e):i.reject(o.error("sm-resource-core",{message:"Can't refresh because this resource has no associated URI.",method:"refresh"}))},g.revert=function(){return this._lastSync&&this.hasChanges()&&(this._meta.version=this._lastSync.version,this.update(this._lastSync.fields,{force:!0,src:"sync"})),this},g.sync=function(e){if(e||(e={}),!this.hasChanges()&&!e.force)return this.refresh(e);var t=this.isNew()?"POST":"PATCH",s=this;return this._getSyncUri().then((function(a){return n._request(a,t,r.assign({},e,{data:s._getRawChanges(e),returnRawResponse:!0})).then((function(e){return s.isNew()?e.response&&s._updateFromSync(e.response,{raw:e.raw}):n._makeResources(e),s}))}))},g.toJSON=function(){return this.get()},g.toString=function(){var e=this.get("Uri");return e?this.resourceType+": "+e:this.resourceType},g.unshift=function(e){var t=this.get(e);if(void 0===t)t=[];else if(!t.unshift)throw new Error("Field is not an array: "+e);var r=Array.prototype.unshift.apply(t,Array.prototype.slice.call(arguments,1)),s={};return s[e]=t,this.update(s,{src:"unshift"}),r},g.update=function(e,t){t||(t={});var s="sync"===t.src;this._lastSync||s||this.isNew()||(this._lastSync={version:this._meta.version,fields:r.assign({},this._fields)}),this._changes||(this._changes={});var a,i={},o={};return r.forOwn(e,function(e,t){var r=this.fieldConfig&&this.fieldConfig[t],u=e,c=this.get(t),h=this._fields[t];if(!s&&null!==e&&r&&r.setter){var f=r.setter;"string"==typeof f&&(f=this[f]),u=f.call(this,e)}if(u!==h&&!this._equivalent(u,h)){if("Uri"!==t&&"ResponseLevel"!==t||n._removeCachedResource(this),null===u&&void 0===h)return;this._fields[t]=u,i[t]=this._changes[t]=this.get(t),o[t]=c,a=!0}}.bind(this)),t.force&&r.forOwn(this._fields,function(t,r){e.hasOwnProperty(r)||(a=!0,i[r]=null,o[r]=this.get(r),delete this._fields[r],s?delete this._changes[r]:this._changes[r]=null)}.bind(this)),s&&((i.Uri||i.ResponseLevel)&&n._setCachedResource(this),r.forOwn(e,function(e,t){delete this._changes[t]}.bind(this)),this._meta.version||(this._meta.version=r.now()),this._lastSync={version:this._meta.version,fields:this._lastSync?r.assign({},this._lastSync.fields,i):r.assign({},this._fields)}),a&&this.emit("change",{changes:i,previous:o,src:t.src||"update"}),this},g.validate=function(){return this.hasChanges()?this._getValidationParams().then(r.bind(this._validate,this)):i.resolve()},g._equivalent=function(e,t,s){if(e===t)return!0;var n=typeof e;if(n!==typeof t||"object"!==n)return!1;if(s||(s=0),s>=16)return o.console("sm-resource-core","Aborting equivalence check due to recursion.",o.LEVEL_WARNING),!1;if(r.isArray(e)){if(!r.isArray(t)||e.length!==t.length)return!1;for(var a=0,i=e.length;a<i;++a)if(!this._equivalent(e[a],t[a],s+1))return!1;return!0}if(r.isArray(t))return!1;if(e.isSmugMugResource||t.isSmugMugResource)return!(!e.resourceType||e.resourceType!==t.resourceType||e._meta.version!==t._meta.version)&&(e.get("Uri")===t.get("Uri")&&this._equivalent(e.get(),t.get(),s+1));if(r.isPlainObject(e)&&r.isPlainObject(t)){var u=0;return!r.some(e,function(e,r){return u+=1,!this._equivalent(e,t[r],s+1)}.bind(this))&&u===r.size(t)}return!1},g._expandMultiple=function(e,t){t||(t={});var s=!r.isArray(e),n=s?r.keys(e):e,a={};if(!n.length)return i.resolve(a);var o=!0,u={};return r.forEach(n,function(t){var r=s?e[t]:null,n=this.getExpansion(t,r);void 0!==n?a[t]=n:(u[t]=r||!0,o=!1)}.bind(this)),o?i.resolve(a):this.expand(u,r.assign({},t,{refresh:!0})).then((function(e){return r.assign(a,e)}))},g._extractMetadataFromFields=function(e,t){var s=this._meta;"object"==typeof e.Uris&&(r.assign(s.uris,e.Uris),delete e.Uris);var a=t&&t.raw;if(!a||!a.Expansions)return this;var i=t&&t.alreadyExtracted||{};if(e.Uri){if(i[e.Uri])return this;i[e.Uri]=!0}var o=r.now();return r.forOwn(s.uris,function(e,t){e=e&&"object"==typeof e?e.Uri:e;var c=a.Expansions[e];if(c){var h,f,p,l,g=c.Locator,d=n.CLASSES[g]||n;if(c[g]&&(h=c[g]),h){if(r.isArray(h)){p=[];for(var m=0,v=h.length;m<v;++m)p.push(n._makeResource(d,h[m],{alreadyExtracted:i,endpointType:c.Locator,meta:{version:o},raw:a}))}else p=n._makeResource(d,h,{alreadyExtracted:i,endpointType:c.Locator,meta:{version:o},raw:a});var _=c.Pages;_&&_.Start&&_.RequestedCount&&(f=s.paginatedExpansions[t]||(s.paginatedExpansions[t]={}),l=new u(c.Uri),f[_.Start+":"+(l.queryParams.count||"")]={resources:p,response:c},1!==_.Start||l.queryParams.count)||(s.expansions[t]={resources:p,response:c})}else{if(f=s.paginatedExpansions[t]||(s.paginatedExpansions[t]={}),p="Objects"===c.LocatorType?[]:null,((l=new u(c.Uri)).queryParams.count||l.queryParams.start)&&(f[(l.queryParams.start||"1")+":"+(l.queryParams.count||"")]={resources:p,response:c},l.queryParams.count||l.queryParams.start&&"1"!==l.queryParams.start))return;s.expansions[t]={resources:p,response:c}}}}.bind(this)),this},g._getCreateUri=function(){return i.reject(new Error("This resource does not have a create URI. It may be read-only."))},g._getRawChanges=function(e){if(e&&e.force||this.isNew())return r.assign({},this._fields);var t={};for(var s in this._changes)this._changes.hasOwnProperty(s)&&(t[s]=this._fields[s]);return t},g._getResourceUri=function(e,t){if(n.isAPIUri(e))return e;if(!e)throw new Error("Expected a Resource instance or URI but got a falsy value.");if(t&&e.resourceType!==t)throw new Error('Expected a Resource of type "'+t+'", but got one of type "'+e.resourceType+'".');return e.getCanonicalUri()},g._getResourceUris=function(e,t){var s=[];if(r.isArray(e))for(var n=0,a=e.length;n<a;++n)s.push(this._getResourceUri(e[n],t));else s.push(this._getResourceUri(e,t));return s},g._getSyncUri=function(){if(this.isNew())return this._getCreateUri();var e=n.buildCanonicalUri(this.get("Uri"));return e?i.resolve(e):i.reject(new Error("This resource does not have a sync URI. It may be read-only."))},g._getValidationParams=function(){var e=this._meta.params||{},t=this.isNew()?"POST":"PATCH";if(e[t])return i.resolve(this._parseValidationParams(e[t]));var r=this;return this._getSyncUri().then((function(e){return n._request(e,"OPTIONS",{io:{cache:!0,verbose:!0},returnRawResponse:!0}).then((function(e){var s=e.raw.Options,n=s&&s.Parameters;return n&&n[t]?(r._meta.params||(r._meta.params={}),r._meta.params[t]=n[t],r._parseValidationParams(n[t])):{}}))}))},g._parseValidationParams=function(e){var t,r={};if(!e)return r;for(var s=0,n=e.length;s<n;++s)r[(t=e[s]).Name]=t;return r},g._updateFromSync=function(e,t){return t||(t={}),t.meta||(t.meta={}),t.meta.version||(t.meta.version=r.now()),r.assign(this._meta,t.meta),this._extractMetadataFromFields(e,t),this.update(e,{src:"sync"})},g._validate=function(e){var t,s=this._getRawChanges();function a(e,r){t||(t={}),t[e]||(t[e]=[]),t[e].push(r)}if(r.forOwn(e,(function(e,t){!e.Required||s.hasOwnProperty(t)&&null!==s[t]||a(t,"Missing required field.")})),r.forOwn(s,(function(t,s){var i=e[s];if(i&&!i.ReadOnly){if(null!==t){var o=i.MAX_CHARS||i.MAX_LENGTH||i.MAX_VALUE||1/0,u=i.MIN_CHARS||i.MIN_LENGTH||i.MIN_VALUE||0;switch("INFINITY"!==o&&"POSITIVE_INFINITY"!==o||(o=1/0),"NEGATIVE_INFINITY"===u&&(u=-1/0),i.Type){case"Boolean":case"Checkbox":"boolean"!=typeof t&&0!==t&&1!==t&&a(s,"Must be a boolean value (true, false, 0, or 1).");break;case"DateTime":r.isDate(t)||r.isDate(n.parseDate(t))||a(s,"Must be a date.");break;case"FloatingPoint":case"Integer":if(!r.isNumber(t)||isNaN(t)){a(s,"Must be a number. Cannot contain letters or commas.");break}"Integer"===i.Type&&t%1!=0&&a(s,"Must be an integer."),t<u&&a(s,"Must be greater than or equal to "+u+"."),t>o&&a(s,"Must be less than or equal to "+o+".");break;case"Select":-1===r.indexOf(i.OPTIONS,t)&&a(s,"Must be one of the following values: "+i.OPTIONS.join(", ")+".");break;case"Uri":if(!n.isAPIUri(t)){a(s,"Must be an API URI.");break}t.length<u&&a(s,"Too short; must be at least "+u+" characters long."),t.length>o&&a(s,"Too long; must be "+o+" characters or fewer.");break;case"Text":case"Varchar":if("string"!=typeof t){a(s,"Must be a string.");break}t.length<u&&a(s,"Too short; must be at least "+u+" characters long."),t.length>o&&a(s,"Too long; must be "+o+" characters or fewer.")}}}else a(s,"This field is read-only and cannot be changed.")})),t){var i=new Error("Validation failed.");throw i.fields=t,i}},n._cache={},n.CLASSES={},n.requestQueue=new e.SM.RequestQueue,n.deleteUri=function(e,t){return n._request(e,"DELETE",t)},n.getProblems=function(e){var t={};if(e&&e.error&&e.error.response&&(e=e.error.response),!e||!e.Options||!e.Options.Parameters)return t;var s=e.Options.Parameters;return r.forOwn(s,(function(e){r.forEach(e,(function(e){e.Problems&&r.isArray(e.Problems)&&(t[e.Name]=e.Problems.concat())}))})),t},n.isAPIUri=function(e){return"string"==typeof e&&0===e.indexOf("/api/v2/")},n.buildCanonicalUri=function(e){return e?e.replace(/\?.*$/,""):void 0},n.loadLocal=function(e,t){var r,s,a;if("string"==typeof e?(s=e,r=n._localData&&n._localData[s],a=n._localDataCache&&n._localDataCache[s]):r=e,!a){if(!r||!r.Request)return;if(r.Response&&r.Response.Pages){let e=r.Response.Pages,t=e.Start,s=e.RequestedCount,n=l(r.Request.Uri);c.dispatch(p(n,t,s));let a=l(n,{start:t,count:s});c.dispatch(f({...r,Response:{...r.Response,Uri:a}},a,"Resource"))}c.dispatch(h({uri:r.Request.Uri,expand:r.RequestedExpansions},"Resource")),c.dispatch(f(r,void 0,"Resource")),a=n._makeResources(r),s&&(n._localDataCache||(n._localDataCache={}),n._localDataCache[s]=a)}return t&&t.paginate?(r.RequestedExpansions&&(t.expand=r.RequestedExpansions),new(n._getPaginationClass(a))(a,r.Response,t)):a},n.loadPath=function(e,t,s){var n;if(s||(s={}),"string"==typeof t)n=t;else{if(!t||"User"!==t.resourceType)throw o.error("sm-resource-core",{message:"`owner` must be a nickname string or SM.Resource.User instance.",method:"loadPath",path:e});n=t.get("NickName")}var a="/api/v2/user/"+encodeURIComponent(n)+"!urlpathlookup";return this._request(a,r.assign({},s,{data:r.assign({},s.data,{urlpath:e})}))},n.loadUri=function(e,t){return n._request(e,t)},n.loadUris=function(e,t){var s={};r.forEach(e,(function(e){var t=e.split("/"),r=t.pop(),n=t.join("/");s[n]||(s[n]=[]),s[n].push(r)}));var a=[];r.forOwn(s,(function(e,t){for(var r,s=t+"/"+e.shift();r=e.shift();)s.length+r.length+1<=800?s+=","+r:(a.push(s),s=t+"/"+r);a.push(s)}));var o=[];return r.forEach(a,(function(e){o.push(n.loadUri(e,t))})),i.all(o).then((function(e){for(var t,s=[],n=0,a=e.length;n<a;++n)t=e[n],r.isArray(t)?Array.prototype.push.apply(s,t):s.push(t);return s}))},n.parseDate=function(e){if(Date.parse(e))return new Date(e);
/*!
     * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>
     * (c) 2011 Colin Snover <http://zetafleet.com>
     * Released under MIT license.
     */var t,r=0,s=[1,4,5,6,7,10,11];if(t=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)){for(var n,a=0;n=s[a];++a)t[n]=+t[n]||0;return t[2]=(+t[2]||1)-1,t[3]=+t[3]||1,"Z"!==t[8]&&void 0!==t[9]&&(r=60*t[10]+t[11],"+"===t[9]&&(r=0-r)),new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5]+r,t[6],t[7]))}return NaN},n.patchUri=function(e,t){return n._request(e,"PATCH",t)},n.postUri=function(e,t){return n._request(e,"POST",t)},n.putUri=function(e,t){return n._request(e,"PUT",t)},n.registerResourceClass=function(e,t){n.CLASSES[e]=t},n.stringifyDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"+00:00"},n._getCachedResource=function(e){var t=e.Uri&&n.buildCanonicalUri(e.Uri),r=t&&n._cache[t];if(r)return r[e.ResponseLevel||"None"]},n._getNestedExpansions=function(e,t,s,a){if(!e||!t.length)return e;if(a||(a=0),a>=16)throw new Error("Too much recursion!");var i;if(t=t.concat(),r.isArray(e))i=[],r.forEach(e,(function(e){var r=n._getNestedExpansions(e,t,s,a+1);r&&i.push(r)}));else{var o=1===t.length;i=n._getNestedExpansions(e.getExpansion(t.shift(),o?s:null),t,s,a+1)}return r.isArray(i)&&((i=r.flattenDeep(i)).length||(i=void 0)),i},n._getPaginationClass=function(e){return Array.isArray(e)?e.length?e[0].paginationClass:n.Paginator:e.paginationClass},n._makeResource=function(e,t,s){var a=n._getCachedResource(t);return s||(s={}),s.meta||(s.meta={version:r.now()}),a&&a.isSmugMugResource?a._updateFromSync(t,s):(a=new e,r.assign(a._fields,t),r.assign(a._meta,s.meta),t.Uri&&n._setCachedResource(a),a._extractMetadataFromFields(a._fields,s)),s.endpointType?a.endpointType=s.endpointType:s.raw&&s.raw.Response&&s.raw.Response.Locator&&(a.endpointType=s.raw.Response.Locator),a},n._makeResources=function(e){if(e){var t=e.raw||e,s=t.Response,a=s&&s.Locator,i=s&&s.LocatorType,o=a&&s[a];if(!o)return"Objects"===i?[]:void 0;var u=n.CLASSES[a]||n,c=r.now();if(r.isArray(o)){for(var h=[],f=0,p=o.length;f<p;++f)h[f]=n._makeResource(u,o[f],{meta:{params:t.Options&&t.Options.Parameters,version:c},raw:t});return h}return n._makeResource(u,o,{meta:{params:t.Options&&t.Options.Parameters,version:c},raw:t})}},n._removeCachedResource=function(e){var t=e.getCanonicalUri(),r=t&&n._cache[t];if(r){var s=e.get("ResponseLevel")||"None";r[s]&&(r[s]=void 0)}},n._request=function(t,s,a){return s&&"object"==typeof s&&(a=s,s=void 0),a||(a={}),(a=r.merge({io:{data:r.assign({},a.data),expand:a.expand,method:s||"GET",type:"v2",uri:t,verbose:!0,nestExpansions:!1}},a)).count&&(a.io.data.count=a.count),a.start&&(a.io.data.start=a.start),r.isObject(a.io.expand)&&!r.isArray(a.io.expand)&&r.forOwn(a.io.expand,(function(e){if(r.isObject(e)){var t=e.data||(e.data={});e.count&&(t.count=e.count),e.start&&(t.start=e.start),r.forOwn(t,(function(e,r){e&&"object"==typeof e&&(t[r]=JSON.stringify(e))}))}})),a.io&&a.io.data&&r.forOwn(a.io.data,(function(e,t,r){e&&"object"==typeof e&&(r[t]=JSON.stringify(e))})),(n._mockIO||e.SM.io)(a.io).then((function(e){if(a.returnRawResponse)return e;var t=n._makeResources(e);if(a.paginate||a.fetchAllPages){var r=n._getPaginationClass(t);if(a.fetchAllPages){delete(a=Object.assign({},a)).fetchAllPages;var s=new r(t,e.raw.Response,a),i=[],o=function(e){return e.isLastPage()?i.concat(e.resources):(i.push.apply(i,e.resources),e.getNextPage().then(o))};return o(s)}return new r(t,e.raw.Response,a)}return t})).catch((function(e){throw o.console("sm-resource-core",{method:"_request",uri:t,error:e&&e.error||e},o.LEVEL_ERROR),e}))},n._setCachedResource=function(e){var t=e.getCanonicalUri();t&&((n._cache[t]||(n._cache[t]={}))[e.get("ResponseLevel")||"None"]=e)},n.Paginator=s,n.ExternalPaginator=t,module.exports=n,e.namespace("SM").Resource=r.defaults(n,e.SM.Resource)}()}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-api2","sm-api-redux-middleware-actions","sm-api-redux-paginator-actions","sm-event-emitter","sm-redux-store","sm-request-queue","sm-smuglog","sm-uri-deprecated"]});
YUI.add("sm-resource-coupon",(function(e){SM.currentModule="sm-resource-coupon";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const e=SM.import("sm-resource-core");function o(o,r){e.call(this),o&&Object.assign(this._fields,o),r&&(this._nickName=r)}o.prototype=Object.create(e.prototype,{constructor:o});let r=o.prototype;r.resourceType="Coupon",r._getCreateUri=function(){return Promise.resolve("/api/v2/user/".concat(encodeURIComponent(this._nickName),"!coupons"))},e.registerResourceClass("Coupon",o),module.exports=e.Coupon=o}(),SM.currentModule=null}),"",{requires:["sm","sm-resource-core"]});
YUI.add("sm-resource-external",(function(e){SM.currentModule="sm-resource-external";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const e=SM.import("sm-resource-core");class r extends e{constructor(e={}){super(),Object.assign(this._fields,e)}}let s=r.prototype;s.paginationClass=e.ExternalPaginator,s.resourceType="ExternalResource",e.registerResourceClass("ExternalResource",r),module.exports=e.ExternalResource=r}(),SM.currentModule=null}),"",{requires:["sm","sm-resource-core"]});
YUI.add("sm-resource-folder",(function(e){SM.currentModule="sm-resource-folder";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),r=SM.import("sm-resource-core"),o=SM.import("sm-resource-node"),t=SM.import("rsvp"),s=SM.import("sm-smuglog");function i(){o.apply(this,arguments)}i.prototype=e.create(o.prototype,{constructor:i});var n=i.prototype;n.fieldConfig={DateAdded:{getter:r.parseDate,setter:r.stringifyDate},DateModified:{getter:r.parseDate,setter:r.stringifyDate}},n.resourceType="Folder",n.getParentFolder=function(){if(this.isRootFolder())return t.resolve();if(!this.isNew()||this.hasExpansion("ParentFolder"))return this.expand("ParentFolder");var e=this;return this._getParentFolder().then((function(r){return r&&(e._meta.expansions.ParentFolder=r),r}))},n.isRootFolder=function(){return!this.isNew()&&!this.getExpansionUri("ParentFolder")},n.moveAlbums=function(o,t){t||(t={});var s=this._getResourceUris(o,"Album"),i=this.getExpansionUri("MoveFolderAlbums");return r.postUri(i,e.assign({},t,{data:{AutoRename:!!t.autoRename,MoveUris:s.join(",")}}))},n.moveFolders=function(o,t){t||(t={});var s=this._getResourceUris(o,"Folder"),i=this.getExpansionUri("MoveFolders");return r.postUri(i,e.assign({},t,{data:{AutoRename:!!t.autoRename,MoveUris:s.join(",")}}))},n.movePages=function(o,t){t||(t={});var s=this._getResourceUris(o,"Page"),i=this.getExpansionUri("MoveFolderPages");return r.postUri(i,e.assign({},t,{data:{AutoRename:!!t.autoRename,MoveUris:s.join(",")}}))},n.positionAlbums=function(o,i,n){n||(n={});var a=this;return new t.Promise((function(t,u){var d=a._getResourceUris(o,"Album"),l=a.getExpansionUri("SortFolderAlbums");if(!l)throw s.error("sm-resource-folder",{message:'Must set SortMethod to "SortIndex" before albums can be positioned.',method:"positionAlbums"});r.requestQueue.add(a.getCanonicalUri()+"-sortAlbums",e.assign({},n.io,{method:"POST",type:"v2",uri:l,data:e.assign({},n.io&&n.io.data,{MoveLocation:n.after?"After":"Before",MoveUris:d.join(","),Uri:a._getResourceUri(i,"Album")})}),{abortOnFailure:!0}).then(t,(function(e){s.console("sm-resource-folder",{method:"positionAlbums",uri:l,error:e&&e.error||e},s.LEVEL_ERROR),u(e)}))}))},n._getCreateUri=function(){return this.getParentFolder().then((function(e){return e.getExpansionUri("Folders")}))},r.registerResourceClass("Folder",i),module.exports=r.Folder=i}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-resource-core","sm-resource-node","sm-smuglog"]});
YUI.add("sm-resource-image",(function(e){SM.currentModule="sm-resource-image";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),r=SM.import("sm-resource-core"),t=SM.import("rsvp");function o(t){r.call(this),t&&e.assign(this._fields,t)}o.prototype=e.create(r.prototype,{constructor:o});var a=o.prototype;a.fieldConfig={Date:{getter:r.parseDate,setter:r.stringifyDate},LastUpdated:{getter:r.parseDate,setter:r.stringifyDate}},a.resourceType="Image",a.color=function(e,r){return o.colorImages([this],e,r)},a.crop=function(e,r,t,a,i){return o.cropImages([this],Math.round(e),Math.round(r),Math.round(t),Math.round(a),i)},a.isCollected=function(){var e=this._meta.uris;return e.Album!==e.ImageAlbum},a.rotate=function(e){return o.rotateImages([this],e)},a.watermark=function(e,r){return o.watermarkImages([this],e,r)},o.colorImages=function(r,t,a){return o._mutate("/api/v2/image!color",e.assign({},a,{ColorUris:o._getImageUris(r),Color:t}))},o.cropImages=function(r,t,a,i,s,n){return delete(n=e.assign({},n,{CropUris:o._getImageUris(r),Height:i,ThumbOnly:!(!n||!n.thumbOnly),TopLeftX:t,TopLeftY:a,Width:s})).thumbOnly,o._mutate("/api/v2/image!crop",n)},o.getUriForKey=function(e){return"/api/v2/image/"+encodeURIComponent(e)},o.loadByKey=function(e,t){return r.loadUri(o.getUriForKey(e),t)},o.rotateImages=function(r,a){a||(a={});var i=o._betterModulo(a.degrees||0,360),s=a.flip||"None";return i||"None"!==s?(delete(a=e.assign({},a,{Degrees:i,Flip:s,RotateUris:o._getImageUris(r)})).degrees,delete a.flip,o._mutate("/api/v2/image!rotate",a)):t.resolve()},o.watermarkImages=function(t,a,i){if((i=e.assign({},i,{WatermarkUris:o._getImageUris(t)})).remove)i.io=e.assign({},i.io,{method:"DELETE"}),delete i.remove;else if(a)if(r.isAPIUri(a))i.WatermarkUri=a;else{if(!a.isSmugMugResource)throw new Error("Unknown watermark type.");i.WatermarkUri=a.getCanonicalUri()}return o._mutate("/api/v2/image!watermark",i)},o._betterModulo=function(e,r){return(e%r+r)%r},o._getImageUris=function(e){for(var t,o=[],a=0,i=e.length;a<i;++a)if(t=e[a],r.isAPIUri(t))o.push(t);else if(!t.get("IsVideo"))switch(t.resourceType){case"AlbumImage":o.push(t.getExpansionUri("Image"));break;case"Image":o.push(t.getCanonicalUri());break;default:throw new Error('Expected a Resource of type "Image" or "AlbumImage" but got one of type "'+t.resourceType+'".')}return o.join(",")},o._mutate=function(t,o){var a=e.assign({},o),i=a.io,s=i&&i.method||"POST";return delete a.io,r._request(t,s,{io:e.assign({},i,{data:a}),returnRawResponse:!0})},r.registerResourceClass("Image",o),module.exports=r.Image=o}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-resource-core"]});
YUI.add("sm-resource-node",(function(e){SM.currentModule="sm-resource-node";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),r=SM.import("sm-resource-core"),o=SM.import("rsvp"),t=SM.import("sm-smuglog");function s(o,s,n){if(r.call(this),o)if("string"==typeof o){if(this._parentFolderIdentifier=o,!r.isAPIUri(o))if("string"==typeof s)this._parentFolderOwner=s;else{if(!s||"User"!==s.resourceType)throw t.error("sm-resource-node",{message:"`owner` must be a nickname string or SM.Resource.User instance.",method:"constructor"});this._parentFolderOwner=s.get("NickName")}}else"Folder"===o.resourceType&&(this._parentFolderIdentifier=o);n||"object"!=typeof s||s.isSmugMugResource||(n=s,s=null),n&&e.assign(this._fields,n)}s.prototype=e.create(r.prototype,{constructor:s});var n=s.prototype;n.resourceType="Node",n._getParentFolder=function(){var e=this._parentFolderIdentifier;return e?(e.isSmugMugResource&&"Folder"===e.resourceType?o.resolve(e):r.isAPIUri(e)?r.loadUri(e):r.loadPath(e,this._parentFolderOwner)).then((function(r){if("Folder"!==r.resourceType)throw t.error("sm-resource-node",{identifier:e,message:'Expected resourceType "Folder" but got "'+r.resourceType+'"',method:"_getParentFolder",resource:r});return r})):o.reject(t.error("sm-resource-node",{message:"No parent folder to expand! You probably didn't pass one to the constructor.",method:"_getParentFolder"}))},module.exports=r.Node=s}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-resource-core","sm-smuglog"]});
YUI.add("sm-resource-notification",(function(e){SM.currentModule="sm-resource-notification";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},r=SM._requireShim;!function(){"use strict";var e=r("lodash"),t=babelHelpers.interopRequireDefault(r("sm-resource-core"));function o(r){t.default.call(this),r&&(0,e.assign)(this._fields,r)}o.prototype=(0,e.create)(t.default.prototype,{constructor:o});var i=o.prototype;i.resourceType="UserProductNotification",i.acknowledge=function(e){var r=this.getExpansionUri("AcknowledgeUserProductNotification");return t.default.postUri(r,{data:{Dismiss:e}})},t.default.registerResourceClass("UserProductNotification",o),module.exports=t.default.UserProductNotification=o}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-resource-core"]});
YUI.add("sm-resource-page",(function(e){SM.currentModule="sm-resource-page";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),r=SM.import("sm-resource-core"),t=SM.import("sm-resource-node");function o(){t.apply(this,arguments)}o.prototype=e.create(t.prototype,{constructor:o});var n=o.prototype;n.fieldConfig={DateAdded:{getter:r.parseDate,setter:r.stringifyDate},DateModified:{getter:r.parseDate,setter:r.stringifyDate}},n.resourceType="Page",n.getParentFolder=function(){if(!this.isNew()||this.hasExpansion("Folder"))return this.expand("Folder");var e=this;return this._getParentFolder().then((function(r){return r&&(e._meta.expansions.Folder=r),r}))},n._getCreateUri=function(){return this.getParentFolder().then((function(e){return e.getExpansionUri("FolderPages")}))},o.loadById=function(e,t){return r.loadUri("/api/v2/page/"+encodeURIComponent(e),t)},r.registerResourceClass("Page",o),module.exports=r.Page=o}(),SM.currentModule=null}),"",{requires:["lodash","sm","sm-resource-core","sm-resource-folder","sm-resource-node"]});
YUI.add("sm-resource-task",(function(e){SM.currentModule="sm-resource-task";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";var e=SM.import("lodash"),t=SM.import("sm-resource-core"),r=SM.import("rsvp");function s(){t.apply(this,arguments)}s.prototype=e.create(t.prototype,{constructor:s});var i=s.prototype;i.fieldConfig={TimeAdded:{getter:t.parseDate,setter:t.stringifyDate},TimeUpdated:{getter:t.parseDate,setter:t.stringifyDate}},i.resourceType="Task",i.isDone=function(){return this.get("Status")===s.STATUS_DONE},i.isError=function(){return this.get("Status")===s.STATUS_ERROR},i.isPending=function(){return this.get("Status")===s.STATUS_PENDING},i.poll=function(t){if(!this.isPending())return r.resolve(this);if(this._pollPromise)return this._pollPromise;t=e.assign({},{maxInterval:15e3,maxRetries:5,minInterval:1e3},t);var s=this;return this._pollPromise=new r.Promise((function(e,r){var i=t.minInterval;setTimeout((function o(){var n=s.get("PercentComplete");s.refresh().then((function(){if(s.isPending())return s.get("PercentComplete")<=n&&(i=Math.min(t.maxInterval,1.5*i)),void setTimeout(o,i);s._pollPromise=null,e(s)}),(function(e){if(t.maxRetries)return t.maxRetries-=1,i=Math.min(t.maxInterval,1.5*i),void setTimeout(o,i);s._pollPromise=null,r(e)}))}),i)})),this._pollPromise},s.STATUS_DONE="Done",s.STATUS_ERROR="Error",s.STATUS_PENDING="Pending",s.loadById=function(e,r){return t.loadUri("/api/v2/task/"+encodeURIComponent(e),r)},s.loadByNickName=function(r,s){var i="/api/v2/user/"+encodeURIComponent(r)+"!tasks";return s&&s.status&&((s=e.assign({},s)).io=e.assign({},s.io),s.io.data=e.assign({},s.io.data,{status:s.status}),delete s.status),t.loadUri(i,s)},t.registerResourceClass("Task",s),module.exports=t.Task=s}(),SM.currentModule=null}),"",{requires:["lodash","rsvp","sm","sm-resource-core"]});
YUI.add("sm-resource-user",(function(e){SM.currentModule="sm-resource-user";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const e=SM.import("sm-resource-core");function r(r){e.call(this),r&&Object.assign(this._fields,r)}r.prototype=Object.create(e.prototype,{constructor:r}),r.prototype.resourceType="User",r.loadByNickName=function(r,o){return e.loadUri("".concat("/api/v2/user","/").concat(encodeURIComponent(r)),o)},e.registerResourceClass("User",r),module.exports=e.User=r}(),SM.currentModule=null}),"",{requires:["sm","sm-resource-core"]});
YUI.add("sm-resource-w9",(function(e){SM.currentModule="sm-resource-w9";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){"use strict";const e=SM.import("sm-resource-core");function r(r,t){e.call(this),r&&Object.assign(this._fields,r),t&&(this._nickName=t)}r.prototype=Object.create(e.prototype,{constructor:r});let t=r.prototype;t.resourceType="W9",t._getCreateUri=function(){return Promise.resolve("/api/v2/user/".concat(encodeURIComponent(this._nickName),"!w9"))},e.registerResourceClass("W9",r),module.exports=e.W9=r}(),SM.currentModule=null}),"",{requires:["sm","sm-resource-core"]});
YUI.add("sm-scrollinfo",(function(t){SM.currentModule="sm-scrollinfo";var i,e;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;i=t.config.doc,e=t.config.win,t.Plugin.ScrollInfo=t.Base.create("scrollInfoPlugin",t.Plugin.Base,[],{initializer:function(t){this._host=t.host,this._hostIsBody="body"===this._host.get("nodeName").toLowerCase(),this._scrollDelay=this.get("scrollDelay"),this._scrollMargin=this.get("scrollMargin"),this._scrollNode=this._getScrollNode(),this.refreshDimensions(),this._lastScroll=this.getScrollInfo(),this._bind()},destructor:function(){new t.EventHandle(this._events).detach(),this._events=null},getOffscreenNodes:function(i,e){void 0===e&&(e=this._scrollMargin);var o=t.Selector.query(i||"*",this._host._node);return new t.NodeList(t.Array.filter(o,(function(t){return!this._isElementOnscreen(t,e)}),this))},getOnscreenNodes:function(i,e){void 0===e&&(e=this._scrollMargin);var o=t.Selector.query(i||"*",this._host._node);return new t.NodeList(t.Array.filter(o,(function(t){return this._isElementOnscreen(t,e)}),this))},getScrollInfo:function(){var t,e,o,s,l,r,n=i.body,h=i.documentElement,c=this._scrollNode,a=this._lastScroll,f=this._scrollMargin,d=void 0!==window.pageXOffset,g=void 0!==window.pageYOffset,_="CSS1Compat"===(i.compatMode||"");return this._hostIsBody?(t=Math.max(n.scrollWidth,n.clientWidth,h.scrollWidth,h.clientWidth),e=Math.max(n.scrollHeight,n.clientHeight,h.scrollHeight,h.clientHeight),o=d?window.pageXOffset:_?i.documentElement.scrollLeft:i.body.scrollLeft,s=g?window.pageYOffset:_?i.documentElement.scrollTop:i.body.scrollTop):(t=c.scrollWidth,e=c.scrollHeight,o=c.scrollLeft,s=c.scrollTop),{atBottom:(l=s+this._height)>e-f,atLeft:o<f,atRight:(r=o+this._width)>t-f,atTop:s<f,isScrollDown:a&&s>a.scrollTop,isScrollLeft:a&&o<a.scrollLeft,isScrollRight:a&&o>a.scrollLeft,isScrollUp:a&&s<a.scrollTop,scrollBottom:l,scrollHeight:e,scrollLeft:o,scrollRight:r,scrollTop:s,scrollWidth:t}},isNodeOnscreen:function(i,e){return!(!(i=t.one(i))||!this._isElementOnscreen(i._node,e))},refreshDimensions:function(){var o=i.documentElement;t.UA.ios||t.UA.android&&t.UA.chrome?(this._winHeight=e.innerHeight,this._winWidth=e.innerWidth):(this._winHeight=o.clientHeight,this._winWidth=o.clientWidth),this._hostIsBody?(this._height=this._winHeight,this._width=this._winWidth):(this._height=this._scrollNode.clientHeight,this._width=this._scrollNode.clientWidth),this._refreshHostBoundingRect()},_bind:function(){var i=t.one("win");this._events=[this.after({scrollDelayChange:this._afterScrollDelayChange,scrollMarginChange:this._afterScrollMarginChange}),i.on("windowresize",this._afterResize,this)],this._hostIsBody?this._events.push(i.after("scroll",this._afterHostScroll,this)):this._events.push(i.after("scroll",this._afterWindowScroll,this),this._host.after("scroll",this._afterHostScroll,this))},_getScrollNode:function(){return t.Node.getDOMNode(this._host)},_isElementOnscreen:function(t,i){var e=this._hostRect,o=t.getBoundingClientRect();return void 0===i&&(i=this._scrollMargin),!(o.top>e.bottom+i||o.bottom<e.top-i||o.right<e.left-i||o.left>e.right+i)},_refreshHostBoundingRect:function(){var t,i=this._winHeight,e=this._winWidth;this._hostIsBody?(t={bottom:i,height:i,left:0,right:e,top:0,width:e},this._isHostOnscreen=!0):t=this._scrollNode.getBoundingClientRect(),this._hostRect=t},_triggerScroll:function(i){var e=this.getScrollInfo(),o=t.merge(i,e),s=this._lastScroll;this._lastScroll=e,this.fire("scroll",o),e.isScrollLeft?this.fire("scrollLeft",o):e.isScrollRight&&this.fire("scrollRight",o),e.isScrollUp?this.fire("scrollUp",o):e.isScrollDown&&this.fire("scrollDown",o),e.atBottom&&(!s.atBottom||e.scrollHeight>s.scrollHeight)&&this.fire("scrollToBottom",o),e.atLeft&&!s.atLeft&&this.fire("scrollToLeft",o),e.atRight&&(!s.atRight||e.scrollWidth>s.scrollWidth)&&this.fire("scrollToRight",o),e.atTop&&!s.atTop&&this.fire("scrollToTop",o)},_afterHostScroll:function(t){var i=this;clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((function(){i._triggerScroll(t)}),this._scrollDelay)},_afterResize:function(){this.refreshDimensions()},_afterScrollDelayChange:function(t){this._scrollDelay=t.newVal},_afterScrollMarginChange:function(t){this._scrollMargin=t.newVal},_afterWindowScroll:function(){this._refreshHostBoundingRect()}},{NS:"scrollInfo",ATTRS:{scrollDelay:{value:50},scrollMargin:{value:50}}}),SM.currentModule=null}),"",{requires:["array-extras","base-build","event-resize","node-pluginhost","plugin","selector"]});
YUI.add("sm-sentry-init",(function(e){SM.currentModule="sm-sentry-init";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,n,a=t("lodash"),o=babelHelpers.interopRequireWildcard(t("sentry")),s=babelHelpers.interopRequireDefault(t("sm-dom-core")),i=t("sm-page-feature-flag-constants");const{featureFlags:l={},sentry:c={},type:u}=SM.env;let d;try{d=parseFloat(l[i.SENTRY_SAMPLE_RATE])||.01}catch(e){d=.01}let p={dsn:c.dsn||"https://bogus@127.0.0.1/123456",environment:u,autoSessionTracking:!1,ignoreErrors:["ResizeObserver loop limit exceeded"],integrations:[new o.Integrations.BrowserTracing({beforeNavigate:e=>c.transactionName?{...e,name:c.transactionName}:e,startTransactionOnLocationChange:!1})],maxBreadcrumbs:50,sampleRate:d,tracesSampleRate:c.tracesSampleRate||0,allowUrls:[new RegExp("^".concat((0,a.escapeRegExp)(s.default.win.location.origin))),new RegExp("^https://".concat((0,a.escapeRegExp)(SM.env.host.cdn))),"<anonymous>","[native code]"],beforeSend:(e,t)=>{let r=t.originalException||t.syntheticException;if("dev"===u){try{console.error(r,{...r})}catch(e){}return null}return e}};(null===(e=s.default.win)||void 0===e||null===(r=e.Sentry)||void 0===r||null===(n=r.Integrations)||void 0===n?void 0:n.ExtraErrorData)&&p.integrations.push(new s.default.win.Sentry.Integrations.ExtraErrorData),"dev"===u&&(p.defaultIntegrations=!1),o.init(p);var g=o;exports.default=g}(),SM.currentModule=null}),"",{requires:["lodash","sentry","sentry-integration-extraerrordata","sm-dom-core","sm-page-feature-flag-constants"]});
YUI.add("sm-settings-constants",(function(e){SM.currentModule="sm-settings-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAGE_TEMPLATE_DROPDOWN_PRICING=exports.PAGE_TEMPLATE_DROPDOWN_PORTFOLIO=exports.PAGE_TEMPLATE_DROPDOWN_CUSTOM=exports.PAGE_TEMPLATE_DROPDOWN_ABOUT=exports.CHECKBOX_ITEM_CLASS=exports.ALBUM_NODE_ATTRIBUTES=exports.NODE_FIELD_COVER_IMAGE_KEY=exports.NODE_FIELD_COVER_IMAGE_ID=exports.BULK_SETTING_DISABLED_CLASS=exports.CHECKBOX_SELECTED_CLASS=exports.BUTTON_ITEM_CLASS=exports.ACCESS_MESSAGE=exports.PARENT_ACCESS_MESSAGE=exports.ACCESSIBILITY_TYPE_NAMES=exports.ACCESSIBILITY_TYPES=exports.ERROR_MESSAGES=exports.BULK_SETTINGS_LABEL=exports.TITLE_EDIT_LABELS=exports.TITLE_CREATE_LABELS=exports.USER_NODE_ATTRIBUTES=exports.SEARCHABLE_OPTIONS=exports.SECURITY_TYPE_OPTIONS_LABELS=exports.PRIVACY_OPTION_TOOLTIPS=exports.PRIVACY_OPTION_LABELS_SUFFIX=exports.PRIVACY_OPTION_LABELS=exports.TEMPLATE=void 0;exports.TEMPLATE='<div id="settings-panel"></div>';exports.PRIVACY_OPTION_LABELS={1:"Public",2:"Unlisted",3:"Private"};exports.PRIVACY_OPTION_LABELS_SUFFIX={1:"(Anyone)",2:"(Anyone with the Link)",3:"(Only Me)"};exports.PRIVACY_OPTION_TOOLTIPS={1:"Public - visible and accessible to anyone browsing your site.",2:"Unlisted - not visible on your site unless visited with a direct link.",3:"Private - hidden from everyone but you."};exports.SECURITY_TYPE_OPTIONS_LABELS={1:"Anyone",2:"People with Password",4:"People I Choose"};exports.SEARCHABLE_OPTIONS=[[0,"No"],[1,"Site-Setting"]];exports.USER_NODE_ATTRIBUTES=["Name","UrlName","Description","Keywords","PrivacyLevel","ViewPassword","ViewPassHint","WorldSearchable","SmugSearchable","SecurityType","ShowCoverImage"];exports.TITLE_CREATE_LABELS={2:"Create Folder",4:"Create Gallery",64:"Edit Page Settings"};exports.TITLE_EDIT_LABELS={1:"Homepage Settings",2:"Folder Settings",4:"Gallery Settings",64:"Page Settings"};exports.BULK_SETTINGS_LABEL="Bulk ";exports.ERROR_MESSAGES={1:"You must be logged-in to view this content",34:"There was an error saving this content. Try again.",503:"There's been an error, but I know our sorcerers are working hard to resolve the issue. Please refresh the page and try again."};exports.ACCESSIBILITY_TYPES={NONE:1,PASSWORD:2,GRANT_ACCESS:4};exports.ACCESSIBILITY_TYPE_NAMES={1:"None",2:"Password",4:"Grant Access"};exports.PARENT_ACCESS_MESSAGE="This %type% is located in a folder set to Private so it is also Private. If you want to change this, you must first set the folder this %type% is located in to Public or Unlisted, from its Visibility menu.";exports.ACCESS_MESSAGE="Only you can see and access this %type%. In order to enable specific Access settings, first choose Public or Unlisted from the Visibility menu.";exports.BUTTON_ITEM_CLASS="sm-button";exports.CHECKBOX_SELECTED_CLASS="yui3-button-selected";exports.BULK_SETTING_DISABLED_CLASS="bulk-setting-disabled";exports.NODE_FIELD_COVER_IMAGE_ID="CoverImageID";exports.NODE_FIELD_COVER_IMAGE_KEY="CoverImageKey";exports.ALBUM_NODE_ATTRIBUTES=["Protected","LargestSize","WatermarkID","Watermark","UploadKey","HideOwner","Geography","Share","Comments","Printable","DefaultColor","ProofDays","BoutiquePackaging","PackagingBranding","Backprinting","TemplateID","SquareThumbs","SortDirection","SortMethod","EXIF","Filenames","InterceptShipping","PrintmarkID","AlbumTemplateID","AlbumTemplateName","AlbumTemplateSetDefault","Slideshow","AllowDownloads","HasDownloadPassword","DownloadPassword","CommerceLightbox","ProofDigital"];exports.CHECKBOX_ITEM_CLASS="sm-form-field-checkbox-item";exports.PAGE_TEMPLATE_DROPDOWN_ABOUT="about";exports.PAGE_TEMPLATE_DROPDOWN_CUSTOM="custom";exports.PAGE_TEMPLATE_DROPDOWN_PORTFOLIO="portfolio";exports.PAGE_TEMPLATE_DROPDOWN_PRICING="pricing"}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-share-app-tab",(function(e){SM.currentModule="sm-share-app-tab";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(a("react")),t=babelHelpers.interopRequireDefault(a("prop-types")),r=babelHelpers.interopRequireDefault(a("sm-copy-link")),i=babelHelpers.interopRequireDefault(a("sm-icon")),o=a("sm-analytics-constants");function l(a){let{albumWebUri:t,initNativeShareApi:o,isOwnerOrAdmin:l,isVideo:n,onCopyLink:s,panelLocation:p}=a,u=(0,e.useMemo)(()=>{let e=new URL(t);return e.searchParams.set("mobile","true"),e.href},[t]);return e.default.createElement("div",{className:"sm-share-content"},e.default.createElement("div",{className:"sm-share-from-app sm-flex sm-flex-items-center"},e.default.createElement("div",{className:"sm-share-from-app-animation-container"},e.default.createElement(i.default,{className:"sm-share-from-app-animation-outline",name:"PhoneOutline",size:i.default.SIZE_LARGE}),e.default.createElement("video",{className:"sm-share-from-app-animation",autoPlay:!0,loop:!0,muted:!0,playsInline:!0},e.default.createElement("source",{src:"/img/share/share-from-app.webm",type:"video/webm"}),e.default.createElement("source",{src:"/img/share/share-from-app.mp4",type:"video/mp4"}))),e.default.createElement("p",{className:"sm-share-from-app-text"},l?"Impress clients with their own photo app":"Have your own photo app on your phone")),e.default.createElement(r.default,{analyticLinkTypeProperty:"Mobile App Link",analyticScreenProperty:"Gallery",buttonText:"".concat(o?"Share":"Copy"," Install Link"),onCopyLink:s,copyWebUri:u,showTooltip:!0,toolTipText:"Paste link into mobile browser to install.",showShareIcon:!0,initNativeShareApi:o,isVideo:n,textareaEventLabel:"Gallery Mobile App Link",textareaEventProperty:p}))}l.displayName="ShareTabs.AppTab",l.propTypes={albumWebUri:t.default.string.isRequired,initNativeShareApi:t.default.bool.isRequired,isOwnerOrAdmin:t.default.bool,isVideo:t.default.bool.isRequired,onCopyLink:t.default.func.isRequired,panelLocation:t.default.oneOf([o.LOCATION_GALLERY,o.LOCATION_LIGHTBOX,o.LOCATION_GALLERY_HEADER])};var n=l;exports.default=n}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-analytics-constants","sm-icon","sm-copy-link"]});
YUI.add("sm-share-constants",(function(e){SM.currentModule="sm-share-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMAGE_TO_VIDEO_SIZE_MAP=exports.FRIENDLY_SIZE_NAMES=exports.VIDEO_PREVIEW_IMAGE_MAP=exports.VIDEO_EMBED_MAP=exports.SHARE_EXPANSIONS=void 0;exports.SHARE_EXPANSIONS={Album:!0,"Album.User":!0,"Album.AlbumShareUris":!0,AlbumImageShareUris:!0,EmbedVideo:!0,ImageSizeDetails:!0};exports.VIDEO_EMBED_MAP={VideoSize320:"EmbedSize320",VideoSize640:"EmbedSize640",VideoSize1280:"EmbedSize1280",VideoSize1920:"EmbedSize1920"};exports.VIDEO_PREVIEW_IMAGE_MAP={VideoSize320:"ImageSizeSmall",VideoSize640:"ImageSizeMedium",VideoSize1280:"ImageSizeX2Large",VideoSize1920:"ImageSizeX3Large"};exports.FRIENDLY_SIZE_NAMES={ImageSizeTiny:"Tiny",ImageSizeThumb:"Thumb",ImageSizeSmall:"Small",ImageSizeMedium:"Medium",ImageSizeLarge:"Large",ImageSizeXLarge:"XLarge",ImageSizeX2Large:"X2Large",ImageSizeX3Large:"X3Large",ImageSizeX4Large:"X4Large",ImageSizeX5Large:"X5Large",ImageSize4K:"4K",ImageSize5K:"5K",ImageSizeOriginal:"Original",VideoSize320:"Low Def",VideoSize640:"Standard Def",VideoSize1280:"High Def",VideoSize1920:"Full High Def"};exports.IMAGE_TO_VIDEO_SIZE_MAP={ImageSizeTiny:"VideoSize320",ImageSizeThumb:"VideoSize320",ImageSizeSmall:"VideoSize320",ImageSizeMedium:"VideoSize640",ImageSizeLarge:"VideoSize640",ImageSizeXLarge:"VideoSize1280",ImageSizeX2Large:"VideoSize1280",ImageSizeX3Large:"VideoSize1920",ImageSizeOriginal:"VideoSize1920"}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-share-embed-tab",(function(e){SM.currentModule="sm-share-embed-tab";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),i=babelHelpers.interopRequireDefault(t("sm-image-sizes")),l=t("sm-share-constants"),o=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-component-buttongroup")),r=babelHelpers.interopRequireDefault(t("sm-copy-link")),s=babelHelpers.interopRequireDefault(t("sm-embed-size-dropdown")),u=t("sm-analytics-constants");const d={imageOnly:{Photo:"Photo Only",Video:"Video Only"},html:"HTML",bbcode:"BBCode"};function c(e){let{embedVideo:t,initNativeShareApi:u,imageSizeDetails:c,imageSizes:m,imageTitle:b,isVideo:p,lightboxUri:f,onCopyLink:E,panelLocation:y}=e,[h,g]=(0,a.useState)(""),[O,S]=(0,a.useState)("imageOnly"),_=p?"Video":"Photo";(0,a.useEffect)(()=>{let e=h;if(!c[h]&&""!==e){e=m.getLargestSize().Name,g(e)}if(p&&-1===e.startsWith(i.default.TYPE_VIDEO)){e=l.IMAGE_TO_VIDEO_SIZE_MAP[e]||"",g(e)}else if(!p&&-1===e.startsWith(i.default.TYPE_PHOTO)){e=l.VIDEO_PREVIEW_IMAGE_MAP[e]||"",g(e)}},[c,p,m,h]);let L=(0,a.useMemo)(()=>{let e,a=c[h];if(!h||!a)return"";switch(O){case"imageOnly":return a.Url;case"html":if(p){let e=l.VIDEO_EMBED_MAP[h];return e?t[e]:""}return'<a href="'.concat(f,'">')+'<img src="'.concat(a.Url,'" alt="').concat(b,'">')+"</a>";case"bbcode":return e=p?c[h].Url:a.Url,"[url=".concat(f,"][img]").concat(e,"[/img][/url]")}},[O,h,c,t,b,p,f]),M="Embed ".concat(_," - ");M+="imageOnly"===O?d[O][_]:d[O];let P=u?"Share ":"Copy ";return P+="imageOnly"===O?"".concat(p?"VIDEO":"JPEG"," URL"):O,a.default.createElement("div",{className:"sm-share-content"},a.default.createElement(s.default,{imageSizes:m,isVideo:p,selectedSize:h,setSelectedSize:g,panelLocation:y}),a.default.createElement(n.default,{size:"small"},a.default.createElement(o.default,{onClick:()=>S("imageOnly"),skin:"imageOnly"===O?"submit":"default","data-testid":"embedtab_mediaonlytab_button"},p?"VIDEO":"JPEG"),a.default.createElement(o.default,{onClick:()=>S("html"),skin:"html"===O?"submit":"default","data-testid":"embedtab_htmltab_button"},"HTML"),a.default.createElement(o.default,{onClick:()=>S("bbcode"),skin:"bbcode"===O?"submit":"default","data-testid":"embedtab_bbcodetab_button"},"BBCode")),a.default.createElement(r.default,{analyticLinkTypeProperty:M,analyticScreenProperty:_,buttonText:P,onCopyLink:E,copyWebUri:L,placeholder:"Please choose a size.",initNativeShareApi:u,isVideo:p,showShareIcon:!0,textareaEventLabel:M,textareaEventProperty:y}))}c.displayName="ShareTabs.EmbedTab",c.propTypes={embedVideo:e.default.object,initNativeShareApi:e.default.bool.isRequired,imageSizeDetails:e.default.object.isRequired,imageSizes:e.default.object.isRequired,imageTitle:e.default.string,isVideo:e.default.bool,lightboxUri:e.default.string.isRequired,onCopyLink:e.default.func,panelLocation:e.default.oneOf([u.LOCATION_GALLERY,u.LOCATION_LIGHTBOX,u.LOCATION_GALLERY_HEADER])};var m=c;exports.default=m}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-analytics-constants","sm-image-sizes","sm-component-button","sm-component-buttongroup","sm-copy-link","sm-embed-size-dropdown","sm-share-constants"]});
YUI.add("sm-share-link-tab",(function(e){SM.currentModule="sm-share-link-tab";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireWildcard(t("react")),i=babelHelpers.interopRequireDefault(t("sm-analytics")),l=babelHelpers.interopRequireDefault(t("sm-page")),n=babelHelpers.interopRequireDefault(t("sm-copy-link")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon")),s=t("sm-analytics-constants");function d(e){let t,{albumKey:d,analyticLinkTypeProperty:u,analyticScreenProperty:c,fileType:m,copyWebUri:p,initNativeShareApi:f,imageKey:b,isVideo:y,isOwnerOrAdmin:E,onCopyLink:h,panelLocation:k,quickShare:S,sharerWebUri:L,showEmailButton:R}=e,_="".concat(f?"Share":"Copy"," ").concat(m," Link"),g=(0,a.useCallback)(e=>{let t,a,n=l.default.model;return window.location.pathname.startsWith("/app/organize/")?t="Organizer":(t="function"==typeof n.getTypeName?n.getTypeName():"Gallery",a=n.get("NodeID")),i.default.Tracker.createEvent(i.default.CATEGORY.SHARE_PANEL,"Social Share",{label:e,property:k}).addContext(i.default.CONTEXT.IMAGE,{image_key:b}).addContext(i.default.CONTEXT.SCREEN,{screen_name:"Social"}).addContext(i.default.CONTEXT.NODE,{node_type:t,node_id:a}).log()},[k,b]),C=(0,a.useCallback)(e=>async()=>{let t;switch(e){case"Facebook":t="https://www.facebook.com/sharer/sharer.php?u=".concat(L);break;case"Twitter":t="https://twitter.com/intent/tweet?url=".concat(L);break;case"Email":t="/gallery/share.mg?AlbumKey=".concat(d,"&ImageKey=").concat(b);try{await g("Email")}catch(e){console.error(e)}finally{document.location.href=t}return}window.open(t,"sharer","".concat("menubar=no,toolbar=no,resizable=yes,scrollbars=yes",",width=626,height=436")),g(e)},[d,b,g,L]),T=S||E,v=void 0===R&&SM.env.loggedInUser&&!SM.env.loggedInUser.isParticipant;return t=k===s.LOCATION_GALLERY_HEADER?"Gallery Link":"".concat(y?"Video":"Photo"," Link"),a.default.createElement("div",{className:"sm-share-content"},a.default.createElement(n.default,{analyticLinkTypeProperty:u,analyticScreenProperty:c,buttonText:_,onCopyLink:h,copyWebUri:p,showShareIcon:!0,initNativeShareApi:f,isVideo:y,textareaEventLabel:t,textareaEventProperty:k}),T&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"sm-link-tab-content-divider sm-hide-medium-and-down"},a.default.createElement("div",{className:"sm-link-tab-content-divider-line"}),a.default.createElement("div",{className:"sm-link-tab-content-divider-line-cover"}),a.default.createElement("p",{className:"sm-text-mini"},"or")),a.default.createElement("div",{className:"sm-share-social-buttons sm-hide-medium-and-down","data-button-count":v?3:2},a.default.createElement(r.default,{"data-service":"facebook",size:r.default.SIZE_MEDIUM,onClick:C("Facebook"),shape:r.default.SHAPE_CIRCLE,"data-testid":"linktab_facebook_button"},a.default.createElement(o.default,{name:"Facebook",size:o.default.SIZE_LARGE})),a.default.createElement(r.default,{"data-service":"twitter",size:r.default.SIZE_MEDIUM,onClick:C("Twitter"),shape:r.default.SHAPE_CIRCLE,"data-testid":"linktab_twitter_button"},a.default.createElement(o.default,{name:"Twitter",size:o.default.SIZE_LARGE})),v&&a.default.createElement(r.default,{size:r.default.SIZE_MEDIUM,onClick:C("Email"),shape:r.default.SHAPE_CIRCLE,"data-testid":"linktab_email_button"},a.default.createElement(o.default,{name:"Mail",size:o.default.SIZE_LARGE})))))}d.displayName="ShareTabs.LinkTab",d.propTypes={albumKey:e.default.string.isRequired,isOwnerOrAdmin:e.default.bool,analyticLinkTypeProperty:e.default.string.isRequired,analyticScreenProperty:e.default.string.isRequired,fileType:e.default.string.isRequired,copyWebUri:e.default.string.isRequired,initNativeShareApi:e.default.bool.isRequired,imageKey:e.default.string.isRequired,isVideo:e.default.bool.isRequired,onCopyLink:e.default.func,panelLocation:e.default.oneOf([s.LOCATION_GALLERY,s.LOCATION_LIGHTBOX,s.LOCATION_GALLERY_HEADER]),quickShare:e.default.bool,sharerWebUri:e.default.string.isRequired};var u=d;exports.default=u}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-analytics","sm-analytics-constants","sm-component-button","sm-copy-link","sm-icon","sm-page"]});
YUI.add("sm-share-selectors",(function(e){SM.currentModule="sm-share-selectors";var exports={},i=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShareData=void 0;var e=i("sm-api-redux-selectors");exports.getShareData=(i,r)=>{let{WebUri:a,ImageKey:s,IsVideo:t,Title:u}=(0,e.getEntity)(i,r),{AlbumKey:l,WebUri:o}=(0,e.getExpansion)(i,r,"Album"),{BuyUri:m,LightboxUri:n}=(0,e.getExpansion)(i,r,"AlbumImageShareUris"),{SlideshowUri:d}=(0,e.getExpansion)(i,r,"Album.AlbumShareUris"),{QuickShare:b}=(0,e.getExpansion)(i,r,"Album.User")||{};return{albumImageWebUri:a,albumKey:l,albumWebUri:o,buyUri:m,embedVideo:(0,e.getExpansion)(i,r,"EmbedVideo")||{},imageKey:s,imageSizeDetails:(0,e.getExpansion)(i,r,"ImageSizeDetails"),imageTitle:u,isVideo:t,lightboxUri:n,quickShare:b,slideshowUri:d}}}(),SM.currentModule=null}),"",{requires:["sm-api-redux-selectors"]});
YUI.add("sm-share-slideshow-tab",(function(e){SM.currentModule="sm-share-slideshow-tab";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("sm-component-button")),s=babelHelpers.interopRequireDefault(t("sm-component-buttongroup")),i=babelHelpers.interopRequireDefault(t("sm-copy-link")),o=babelHelpers.interopRequireDefault(t("sm-icon")),l=babelHelpers.interopRequireDefault(t("sm-slideshow-options")),r=t("sm-analytics-constants");function u(t){let{analyticScreenProperty:a,initNativeShareApi:r,isVideo:u,slideshowUri:c,onCopyLink:d,panelLocation:p}=t,[m,S]=(0,e.useState)("fullscreen"),[f,b]=(0,e.useState)(!0),[h,y]=(0,e.useState)(!1),[E,R]=(0,e.useState)(!1),[L,A]=(0,e.useState)(!1),[N,M]=(0,e.useState)(!1),[w,g]=(0,e.useState)(3),[v,C]=(0,e.useState)("fade"),[T,I]=(0,e.useState)(2),[_,k]=(0,e.useState)(!1),[P,q]=(0,e.useState)(!0),O=(0,e.useMemo)(()=>{let e={speed:w,transition:v,autoStart:f?1:0,captions:h?1:0,navigation:E?1:0,playButton:L?1:0,randomize:N?1:0};"none"!==e.transition&&(e.transitionSpeed=T);let t=new URLSearchParams;for(let[a,n]of Object.entries(e))t.set(a,n);return t.toString()},[w,v,f,h,E,L,N,T]),H=(0,e.useMemo)(()=>"".concat(c,"&").concat(O),[c,O]),D=(0,e.useMemo)(()=>'<iframe src="'.concat(H,'" width="800" height="600" frameborder="no" scrolling="no"></iframe>'),[H]),x=(0,e.useMemo)(()=>["Speed: ".concat(w,"s").concat(P?",":""),f?" Auto Start,":"",h?" Captions,":"",E?" Navigation,":"",L?" Play Button,":"",N?" Randomize,":"",P?" Transition: ".concat(v,","):"",P?" Transition Speed: ".concat(T,"s"):""].join(""),[w,f,h,E,L,N,P,v,T]),z="fullscreen"===m,Y=z?"".concat(H,"&clickable=1"):D,U="Slideshow - ".concat(z?"Fullscreen":"Embed");return e.default.createElement("div",{className:"sm-share-content"},e.default.createElement("p",{className:"sm-share-slideshow-label sm-label sm-label-large"},"Settings"),_?e.default.createElement(l.default,{setAutoStart:b,setRandomize:M,setCaptions:y,setNavigation:R,setPlayButton:A,setSpeed:g,setShowTransitionSpeed:q,setTransition:C,setTransitionSpeed:I,enableAutoStart:f,enableRandomize:N,enableCaptions:h,enableNavigation:E,enablePlayButton:L,transition:v,showTransitionSpeed:P,transitionSpeed:T,speed:w}):e.default.createElement("div",{className:"sm-share-settings-container sm-flex sm-flex-justify-between sm-flex-items-center"},e.default.createElement("p",null,x),e.default.createElement(n.default,{className:"sm-share-setting-button",size:n.default.SIZE_SMALL,onClick:()=>k(!0),shape:n.default.SHAPE_SQUARE},e.default.createElement(o.default,{name:"Edit",size:o.default.SIZE_SMALL}))),e.default.createElement(s.default,{size:"small"},e.default.createElement(n.default,{onClick:()=>S("fullscreen"),skin:z?n.default.SKIN_PRIMARY:n.default.SKIN_SECONDARY},"Fullscreen"),e.default.createElement(n.default,{onClick:()=>S("embed"),skin:z?n.default.SKIN_SECONDARY:n.default.SKIN_PRIMARY},"Embed")),e.default.createElement(i.default,{analyticLinkTypeProperty:U,analyticScreenProperty:a,buttonText:"".concat(r&&z?"Share":"Copy"," ").concat(z?"Slideshow Link":"Embed Code"),onCopyLink:d,copyWebUri:Y,"data-settings-enabled":_,initNativeShareApi:r&&z,isSlideshow:!0,isVideo:u,showShareIcon:r&&z,textareaEventLabel:U,textareaEventProperty:p}))}u.displayName="ShareTabs.SlideshowTab",u.propTypes={analyticScreenProperty:a.default.string,initNativeShareApi:a.default.bool.isRequired,isVideo:a.default.bool.isRequired,slideshowUri:a.default.string.isRequired,onCopyLink:a.default.func,panelLocation:a.default.oneOf([r.LOCATION_GALLERY,r.LOCATION_LIGHTBOX,r.LOCATION_GALLERY_HEADER])};var c=u;exports.default=c}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-analytics-constants","sm-component-button","sm-component-buttongroup","sm-copy-link","sm-icon","sm-slideshow-options"]});
YUI.add("sm-share-tabs",(function(e){SM.currentModule="sm-share-tabs";var exports={},a=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(a("prop-types")),i=babelHelpers.interopRequireDefault(a("react")),t=babelHelpers.interopRequireDefault(a("sm-analytics")),l=babelHelpers.interopRequireDefault(a("sm-image-sizes")),r=babelHelpers.interopRequireDefault(a("sm-component-tabview")),n=babelHelpers.interopRequireDefault(a("sm-share-link-tab")),s=babelHelpers.interopRequireDefault(a("sm-share-slideshow-tab")),o=babelHelpers.interopRequireDefault(a("sm-share-embed-tab")),d=babelHelpers.interopRequireDefault(a("sm-share-app-tab")),p=a("sm-analytics-constants");const u=new(babelHelpers.interopRequireDefault(a("sm-ua")).default),b=u.isIOS||u.isAndroid||u.isWindowsPhone,c=r.default.Tab,y={"link-tab":"Link","app-tab":"App","slideshow-tab":"Slideshow","embed-tab":"Embed"};class m extends i.default.Component{constructor(e){super(e),babelHelpers.defineProperty(this,"_onTabSelect",e=>{if(this.state.selectedTabKey===e)return;let a={selectedTabKey:e};this.setState(a,()=>{this._logScreenViewAnalytics(e)})}),babelHelpers.defineProperty(this,"_logCopyLinkAnalytics",e=>t.default.Tracker.createEvent(t.default.CATEGORY.SHARE_PANEL,"Copy Link",{label:e.linkType,property:this.props.panelLocation}).addContext(t.default.CONTEXT.IMAGE,{image_key:this.props.imageKey}).addContext(t.default.CONTEXT.SCREEN,{screen_name:e.screen}).log()),babelHelpers.defineProperty(this,"componentWillUpdate",e=>{this.props.panelLocation!==e.panelLocation&&this.setState({selectedTabKey:"link-tab"})}),this.state={selectedTabKey:"link-tab"},this._logScreenViewAnalytics("link-tab")}_logScreenViewAnalytics(e){let a=y[e];return t.default.Tracker.createEvent(t.default.CATEGORY.SHARE_PANEL,"Screen View",{label:a,property:this.props.panelLocation}).addContext(t.default.CONTEXT.SCREEN,{screen_name:a}).log()}render(){var e;let{selectedTabKey:a}=this.state,{albumImageWebUri:t,albumKey:u,albumWebUri:y,allowDownload:f,embedVideo:h,imageKey:E,imageSizeDetails:L,imageTitle:g,isMobile:A,isVideo:k,isOwnerOrAdmin:S,lightboxUri:R,panelLocation:T,panelToRender:N,quickShare:O,slideshowUri:_}=this.props,C=new l.default(L,{pixelRatio:1}),D=k?"Video":"Photo",w=T===p.LOCATION_GALLERY_HEADER,q=Boolean(L&&N===m.RENDERED_PANEL.EMBED),K=T===p.LOCATION_LIGHTBOX||T===p.LOCATION_GALLERY,U=Boolean(N===m.RENDERED_PANEL.LINK||K&&!f&&!S),P=Boolean((null===(e=navigator)||void 0===e?void 0:e.share)&&b);if(q)return i.default.createElement(o.default,{embedVideo:h,imageSizeDetails:L,isVideo:k,imageSizes:C,imageTitle:g,lightboxUri:R,onCopyLink:this._logCopyLinkAnalytics,initNativeShareApi:!1,panelLocation:T});if(U)return i.default.createElement(n.default,{albumKey:u,analyticLinkTypeProperty:"".concat(D," Link"),analyticScreenProperty:D,fileType:D,copyWebUri:R,imageKey:E,onCopyLink:this._logCopyLinkAnalytics,isOwnerOrAdmin:S,panelLocation:T,quickShare:O,sharerWebUri:t,showEmailButton:!1,initNativeShareApi:P,isVideo:k});let v=[];return w?(v.push(i.default.createElement(c,{label:"Link",tabKey:"link-tab",key:"link-tab"},i.default.createElement(n.default,{albumKey:u,analyticLinkTypeProperty:"Gallery Link",analyticScreenProperty:"Gallery",fileType:"Gallery",copyWebUri:y,imageKey:E,onCopyLink:this._logCopyLinkAnalytics,isOwnerOrAdmin:S,panelLocation:T,quickShare:O,sharerWebUri:y,initNativeShareApi:P,isVideo:k}))),v.push(i.default.createElement(c,{label:"App",tabKey:"app-tab",key:"app-tab"},i.default.createElement(d.default,{albumWebUri:y,onCopyLink:this._logCopyLinkAnalytics,initNativeShareApi:P,isVideo:k,isOwnerOrAdmin:S,panelLocation:T}))),A||v.push(i.default.createElement(c,{label:"Slideshow",tabKey:"slideshow-tab",key:"slideshow-tab"},i.default.createElement(s.default,{analyticScreenProperty:"Gallery",onCopyLink:this._logCopyLinkAnalytics,slideshowUri:_,initNativeShareApi:P,isVideo:k,panelLocation:T})))):w||(v.push(i.default.createElement(c,{label:"Link",tabKey:"link-tab",key:"link-tab"},i.default.createElement(n.default,{albumKey:u,analyticLinkTypeProperty:"".concat(D," Link"),analyticScreenProperty:D,fileType:D,copyWebUri:R,imageKey:E,onCopyLink:this._logCopyLinkAnalytics,isOwnerOrAdmin:S,panelLocation:T,quickShare:O,sharerWebUri:t,initNativeShareApi:P,isVideo:k}))),L&&(f||S)&&v.push(i.default.createElement(c,{label:"Embed",tabKey:"embed-tab",key:"embed-tab"},i.default.createElement(o.default,{embedVideo:h,imageSizeDetails:L,isVideo:k,imageSizes:C,imageTitle:g,lightboxUri:R,onCopyLink:this._logCopyLinkAnalytics,initNativeShareApi:!1,imageTitle:g,panelLocation:T})))),i.default.createElement(r.default,{selectedTabKey:a,onTabSelect:this._onTabSelect,className:"sm-share-tabs"},v)}}babelHelpers.defineProperty(m,"RENDERED_PANEL",{LINK:"link",EMBED:"embed"}),m.displayName="ShareTabs",m.propTypes={allowDownload:e.default.bool,albumImageWebUri:e.default.string.isRequired,albumKey:e.default.string.isRequired,albumWebUri:e.default.string.isRequired,buyUri:e.default.string,embedVideo:e.default.object,galleryName:e.default.string,galleryTitle:e.default.string,galleryDescription:e.default.string,imageKey:e.default.string.isRequired,imageSizeDetails:e.default.shape({UsableSizes:e.default.array.isRequired}).isRequired,imageTitle:e.default.string.isRequired,isOwnerOrAdmin:e.default.bool.isRequired,isVideo:e.default.bool.isRequired,lightboxUri:e.default.string.isRequired,panelToRender:e.default.oneOf([m.RENDERED_PANEL.LINK,m.RENDERED_PANEL.EMBED]),panelLocation:e.default.oneOf([p.LOCATION_GALLERY,p.LOCATION_LIGHTBOX,p.LOCATION_GALLERY_HEADER]),quickShare:e.default.bool,slideshowUri:e.default.string.isRequired};var f=m;exports.default=f}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-analytics","sm-analytics-constants","sm-image-sizes","sm-component-tabview","sm-share-app-tab","sm-share-embed-tab","sm-share-link-tab","sm-share-slideshow-tab","sm-ua"]});
YUI.add("sm-signpost-entry",(function(e){SM.currentModule="sm-signpost-entry";var exports={},s=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(s("react")),t=babelHelpers.interopRequireDefault(s("prop-types")),r=babelHelpers.interopRequireDefault(s("classnames"));class l extends e.default.PureComponent{constructor(e){super(e),this._onKeyPress=this._onKeyPress.bind(this),this._onClick=this._onClick.bind(this)}_onKeyPress(e){let{key:s}=e;" "!==s&&"Enter"!==s||(e.preventDefault(),this.props.onClick(e))}_onClick(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)}_isSelected(){let{selectedValue:e,name:s}=this.props;return s===e}_isPreviousStep(){let{selectedValue:e,name:s,values:t}=this.props;return t.indexOf(e)>t.indexOf(s)}render(){let{name:s,onClick:t,children:l,className:i,selectedValue:n,values:a,...u}=this.props,o=(0,r.default)(["sm-signpost-entry","sm-flex","sm-flex-justify-center","sm-flex-items-start","sm-flex-wrap",i]);return e.default.createElement("li",babelHelpers.extends({className:o,key:s,onClick:this._onClick,"data-active":this._isSelected(),"data-value":s,"data-visited":this._isPreviousStep(),role:"link",onKeyPress:this._onKeyPress},u),l)}}exports.default=l,l.propTypes={name:t.default.string.isRequired,onClick:t.default.func,selectedValue:t.default.string,values:t.default.array},l.displayName="Signpost.Entry"}(),SM.currentModule=null}),"",{requires:["react","prop-types"]});
YUI.add("sm-signpost",(function(e){SM.currentModule="sm-signpost";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),s=babelHelpers.interopRequireDefault(t("react-dom")),i=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("classnames"));class r extends e.default.PureComponent{constructor(e){super(e),this._clearIndicator=this._clearIndicator.bind(this),this._isPrevStep=this._isPrevStep.bind(this),this._onClick=this._onClick.bind(this),this._storeIndicatorRef=this._storeIndicatorRef.bind(this),this._storeParentRef=this._storeParentRef.bind(this),this._updateIndicatorPosition=this._updateIndicatorPosition.bind(this),this.state={values:this._getStepValues(e)}}UNSAFE_componentWillReceiveProps(e){this._transitionActive||this._updateIndicatorPosition(!0),this.setState({values:this._getStepValues(e)})}componentDidMount(){this._updateIndicatorPosition(!0)}componentDidUpdate(e){if(this.props.value!==e.value&&this._updateIndicatorPosition(),this.props.autoCenterSignpost&&e.value!==this.props.value&&this._parent){let e=s.default.findDOMNode(this._parent),t=e.querySelector('[data-active="true"]');if(t){let{width:s}=e.getBoundingClientRect(),{width:i}=t.getBoundingClientRect(),{offsetLeft:a}=t,r=a-(s/2-i/2);e.scrollTo({left:r,behavior:"smooth"})}}}render(){let{autoCenterSignpost:t,className:s,childrenClassName:i,render:r,allowForwardProgress:o,value:n,...l}=this.props,{values:d}=this.state,u=(0,a.default)(["sm-signposts",s]),c=(0,a.default)(["sm-flex","sm-flex-row",i]);return e.default.createElement("nav",babelHelpers.extends({className:u,"data-unlocked":o},l,{ref:this._storeParentRef}),e.default.createElement("ol",{className:c},r({onClick:this._onClick,values:d,selectedValue:n})),e.default.createElement("em",{className:"sm-signpost-indicator",ref:this._storeIndicatorRef,onTransitionEnd:this._clearIndicator}))}_clearIndicator(){let e=this._indicator;e&&(e.style.opacity=0),this._transitionActive=!1}_storeIndicatorRef(e){this._indicator=e}_storeParentRef(e){this._parent=e}_updateIndicatorPosition(e=!1){let t=this._indicator,s=this._parent.querySelector('[data-active="true"]');if(s){let i=s.clientWidth,a=s.offsetLeft,r=s.clientHeight-s.offsetTop;e?(t.style.transition="none",t.style.display="none"):(t.style.transition="",t.style.opacity="1",t.style.display="",this._transitionActive=!0),t.offsetHeight,t.style.width="".concat(i,"px"),t.style.transform="translate(".concat(a,"px, ").concat(r,"px)")}else t.style.opacity=0}_getStepValues({render:e}){return e({}).map(e=>e.props.name)}_isPrevStep(e){let{value:t}=this.props;return this.state.values.indexOf(t)>this.state.values.indexOf(e)}_onClick(e){let{target:t}=e,{onChange:s,allowForwardProgress:i}=this.props;if(t&&t.dataset.value){let e=t.dataset.value;(i||this._isPrevStep(e))&&s(e)}}}exports.default=r,r.propTypes={allowForwardProgress:i.default.bool,onChange:i.default.func,render:i.default.func.isRequired,value:i.default.string,childrenClassName:i.default.string,autoCenterSignpost:i.default.bool},r.defaultProps={autoCenterSignpost:!0,allowForwardProgress:!1,onChange:()=>{},value:""},r.displayName="Signpost"}(),SM.currentModule=null}),"",{requires:["react","prop-types"]});
YUI.add("sm-site-status-indicator",(function(e){SM.currentModule="sm-site-status-indicator";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("statuspage")),r=babelHelpers.interopRequireDefault(t("sm-component-pure-render"));class u extends r.default{constructor(e){super(e),this.state={status:"",description:""},this._fetchSiteStatus()}render(){return null!==this.state.status?s.default.createElement("div",{className:"sm-site-status","data-status":this.state.status,onClick:this.props.onClick},s.default.createElement("span",{className:"sm-site-status-dot"}),s.default.createElement("span",{className:"sm-site-status-description"},this.state.description)):s.default.createElement("div",null)}_fetchSiteStatus(){new a.default.page({page:"724cl4r0f6zw"}).status({success:e=>{this.setState({status:e.status.indicator,description:e.status.description,url:e.page.url})}})}}exports.default=u;u.displayName="SiteStatus.Indicator",u.propTypes={onClick:e.default.func},u.defaultProps={onClick:()=>{}}}(),SM.currentModule=null}),"",{requires:["react","sm-component-pure-render","statuspage"]});
YUI.add("sm-slider",(function(e){SM.currentModule="sm-slider";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e.namespace("SM").Slider=e.Base.create("sm-slider",e.Slider,[],{initializer:function(){this._isHorizontal=null,this.set("thumbUrl","/img/spacer.gif"),this.after("thumbMove",this._afterThumbMove,this),this._showValuePanel=this.get("showValuePanel")},destructor:function(){this._valuePanel&&this._valuePanel.destroy()},_afterThumbMove:function(e){if(this._thumbNode||(this._thumbNode=this.get("boundingBox").one("."+this.getClassName("thumb"))),null===this._isHorizontal&&(this._isHorizontal="x"===this.get("axis")),!this._railSize){var t=this.get("boundingBox").one("."+this.getClassName("rail"));this._railSize=this._isHorizontal?t.get("offsetWidth"):t.get("offsetHeight")}if(!this._capNode){var i=this.getClassName(this._isHorizontal?"rail-cap-left":"rail-cap-bottom");this._capNode=this.get("boundingBox").one("."+i)}this._isHorizontal?this._capNode.setStyle("width",e.offset+"px"):this._capNode.setStyle("height",this._railSize-e.offset+"px"),this._syncValuePanel()},_getValuePanel:function(){return this._valuePanel||(this._valuePanel=new e.SM.Panel({visible:!1,render:!0,zIndex:1}),this._valuePanel.get("contentBox").removeClass("sm-panel-content").addClass("sm-tooltip")),this._valuePanel},_syncValuePanel:function(){if(this._showValuePanel){var t=this._getValuePanel(),i=this.get("valuePanelFormatter");return t.get("contentBox").setHTML(i(this.get("value"))),this._isHorizontal?t.align(this._thumbNode,[e.WidgetPositionAlign.BC,e.WidgetPositionAlign.TC]):t.align(this._thumbNode,[e.WidgetPositionAlign.RC,e.WidgetPositionAlign.LC]),this._panelTimer&&this._panelTimer.cancel(),t.show(),this._panelTimer=e.later(500,this,(function(){this._getValuePanel().destroy(),this._valuePanel=null}),!1),t}}},{CSS_PREFIX:"yui3-slider",ATTRS:{showValuePanel:{value:!0},valuePanelFormatter:{validator:e.Lang.isFunction,value:function(e){return e}}}});exports.default=t}(),SM.currentModule=null}),"",{requires:["slider","sm-panel"]});
YUI.add("sm-slideshow-gallery-plugin",(function(e){SM.currentModule="sm-slideshow-gallery-plugin";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var t=SM.import("sm-image-preloader-deprecated");function s(t){e.Plugin.Base.call(this,t)}s.NAME="slideshowGalleryPlugin",s.NS="gallery",e.namespace("SM").SlideshowGalleryPlugin=e.extend(s,e.Plugin.Base,{initializer:function(e){var t,s;this._host=e.host,this._modelList=this._host.get("modelList"),this._eventHandles=[],this._loadingPage={},this._prefetched={},this.beforeHostMethod("play",this._play),this.beforeHostMethod("render",this._render),this.beforeHostMethod("_setIndex",this._setIndex),this.beforeHostMethod("_afterIndexChange",this._afterIndexChange),this.beforeHostMethod("_setArrowStates",this._setArrowStates),this.beforeHostMethod("_cacheImages",this._cacheImages),this.afterHostMethod("_resize",this._afterResize),t=this._modelList.get("PageNumber"),s=this._host.get("index"),t>1&&(s+=(t-1)*this._modelList.get("PageSize"),this._host.set("index",s))},_afterResize:function(){var e=this._modelList.get("PageNumber"),s=this._getPrefetchSizeUrls(this._modelList);s!==this._prefetchSizes&&(this._prefetched={},t.prefetch(s),this._prefetchSizes=s,this._prefetch(e),this._prefetch(e+1),this._prefetch(e-1))},_getPrefetchSizeUrls:function(t){var s=[],i=this._host.get("width"),a=this._host.get("height");return t.some((function(t){var r=e.SM.Views.Tile.getImageSize(t,"fit",i,{maxHeight:a,maxWidth:i});s.push(e.SM.Models.Image.getUrl(t,r))})),s},_prefetch:function(s){var i,a,r=this._modelList,n=r.get("TotalPages");s>=1&&s<=n&&!this._prefetched[s]&&(a=(i=e.merge(r._lastApiRequest)).data=e.merge(i.data),delete i.on,delete a.returnModelList,a.imageSizes&&delete a.imageSizes,a.PageNumber=s,r._api.sendRequest(i).then(function(){var e=this._getPrefetchSizeUrls(r);t.prefetch(e)}.bind(this)),this._prefetched[s]=!0)},_play:function(){var t=this._host,s=this._modelList.get("TotalItems");return t.get("index")+1===s&&t.set("index",0,{src:"play"}),s&&(t._playButton&&t._playButton.replaceClass("sm-fonticon-PlayerPlay","sm-fonticon-PlayerPause"),t._cacheSize=e.SM.Views.Slideshow.SMALL_CACHE,t._playing=!0,t._timeStarted=+new Date,t._scheduleNext()),new e.Do.Prevent},pause:function(){this._host.pause()},_render:function(){var t=this._host,s=this._modelList,i=t.getAttrs(),a=s.get("PageNumber"),r=!s.get("TotalItems"),n=i.splashImage?+i.splashDelay:i.speed;if(!r)return i.index-=(a-1)*s.get("PageSize"),t.rendered||(i.container.setHTML(e.Template.Micro.render(t.template,i)),i.showPlayButton&&(t._playButton=i.container.one(".sm-slideshow-play .sm-fonticon-PlayerPlay"),i.autoStart&&t._playButton.replaceClass("sm-fonticon-PlayerPlay","sm-fonticon-PlayerPause"))),t._resize(),i.currentImage||(i.currentImage=s.item(i.index),t.set("currentImage",i.currentImage)),i.transition&&i.container.addClass("sm-slideshow-transition-"+i.transition),i.splashImage&&(t._showingSplash=!0,i.currentImage=i.splashImage,i.container.addClass("sm-slideshow-splash")),i.currentImage&&(t._bindUI(),t._showImage(i.currentImage).then((function(){t._timeStarted=+new Date,t._timeRemaining=1e3*n,t._bindNav(),i.autoStart&&!1!==t._playing?(t.play(),t._hideControls(e.SM.Views.Slideshow.CONTROLS_INITIAL_DELAY)):t._showingSplash&&t._scheduleNext()}))),t.rendered=!0,new e.Do.Prevent},_setIndex:function(t){var s=this._host,i=this._modelList.get("TotalItems");return(t<0||t>=i)&&(s.get("loop")?t=i&&(i+t%i)%i:(s.fire("invalidIndex",{prevVal:s.get("index"),newVal:t}),t=e.Attribute.INVALID_VALUE)),new e.Do.Halt(null,t)},_afterIndexChange:function(t){var s,i=this._modelList,a=i.get("PageNumber"),r=i.get("TotalItems"),n=i.get("PageSize"),o=Math.floor(t.newVal/n)+1||1,h=this._host;return"currentImage"!==t.src&&(r&&(t.newVal!==r-1||h.get("loop"))||h.pause(),r&&a!==o?this._loadingPage[o]||(this._loadingPage[o]=!0,this._modelList.loadPage(o,e.bind(this._pageLoaded,this))):(s=t.newVal-(a-1)*n,h.set("currentImage",i.item(s),{src:"index"}))),new e.Do.Prevent},_setArrowStates:function(){var t=this._host,s=t.get("container"),i=t.get("loop"),a=t.get("index"),r=this._modelList.get("TotalItems"),n=!r||!i&&0===a,o=!r||!i&&a===r-1,h=s.one(".sm-slideshow-nav-left"),l=s.one(".sm-slideshow-nav-right");return h&&(h.toggleClass("sm-slideshow-nav-disabled",n),l.toggleClass("sm-slideshow-nav-disabled",o)),new e.Do.Prevent},_cacheImages:function(t){var s,i,a,r=this._host,n=this._modelList,o=r.get("height"),h=r.get("width"),l=e.SM.Views.Tile;for(t-=(n.get("PageNumber")-1)*n.get("PageSize"),i=Math.max(0,t-r._cacheSize[0]),a=Math.min(n.size(),t+r._cacheSize[1]);i<a;++i)(s=n.item(i))&&l.cacheImage(s,"fit",h,{maxHeight:o,maxWidth:h});return new e.Do.Prevent},_pageLoaded:function(){var e,t,s=this._host,i=s.get("index"),a=this._modelList.get("PageSize"),r=Math.floor(i/a)+1,n=this._modelList.get("PageNumber");this._loadingPage[n]=!1,this._prefetch(n+1),this._prefetch(n-1),n===r&&(t=i-(n-1)*a,(e=this._modelList.item(t))!==s.get("currentImage")&&s.set("currentImage",e,{src:"index"}),this._cacheImages(i))}})}(),SM.currentModule=null}),"",{requires:["plugin","sm-image-preloader-deprecated"]});
YUI.add("sm-slideshow-options-helpers",(function(e){SM.currentModule="sm-slideshow-options-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.speedInputConverter=void 0;exports.speedInputConverter=e=>{let r=+e;return(!Number.isInteger(r)||r<0)&&(r=0),r}}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-slideshow-options",(function(e){SM.currentModule="sm-slideshow-options";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("sm-component-underlineformfield")),l=babelHelpers.interopRequireDefault(t("sm-component-checkbox")),o=babelHelpers.interopRequireWildcard(t("sm-component-select")),u=babelHelpers.interopRequireDefault(t("sm-component-inlinetextbox")),s=t("sm-slideshow-options-helpers");function d(t){let{setAutoStart:a,setRandomize:d,setCaptions:r,setNavigation:i,setPlayButton:f,setShowTransitionSpeed:c,setSpeed:p,setTransition:m,setTransitionSpeed:b,enableAutoStart:h,enableRandomize:S,enableCaptions:v,enableNavigation:E,enablePlayButton:g,transition:C,showTransitionSpeed:y,speed:T,transitionSpeed:w}=t;return e.default.createElement("div",{className:"sm-share-slideshow-options-container"},e.default.createElement("div",{className:"sm-share-slideshow-options"},e.default.createElement(n.default,{label:"Auto Start"},e.default.createElement(l.default,{checked:h,onChange:e=>a(e)})),e.default.createElement(n.default,{label:"Randomize Photos"},e.default.createElement(l.default,{checked:S,onChange:e=>d(e)})),e.default.createElement(n.default,{label:"Captions"},e.default.createElement(l.default,{checked:v,onChange:e=>r(e)})),e.default.createElement(n.default,{label:"Navigation"},e.default.createElement(l.default,{checked:E,onChange:e=>i(e)})),e.default.createElement(n.default,{label:"Play Button"},e.default.createElement(l.default,{checked:g,onChange:e=>f(e)})),e.default.createElement(n.default,{label:"Speed (seconds)"},e.default.createElement(u.default,{type:"number",noChrome:!0,onChange:e=>p((0,s.speedInputConverter)(e.target.value)),value:T})),e.default.createElement(n.default,{label:"Transition"},e.default.createElement(o.Select,{value:C,noChrome:!0,onChange:e=>{m(e.target.value),c("none"!==e.target.value)}},e.default.createElement(o.SelectOption,{value:"none"},"None"),e.default.createElement(o.SelectOption,{value:"fade"},"Fade"))),y&&e.default.createElement(n.default,{label:"Transition Speed (seconds)"},e.default.createElement(u.default,{value:w,type:"number",noChrome:!0,onChange:e=>b((0,s.speedInputConverter)(e.target.value))}))))}d.displayName="ShareTabs.SlideshowOptions",d.propTypes={setAutoStart:a.default.func,setRandomize:a.default.func,setCaptions:a.default.func,setNavigation:a.default.func,setPlayButton:a.default.func,setShowTransitionSpeed:a.default.func,setSpeed:a.default.func,setTransition:a.default.func,setTransitionSpeed:a.default.func,enableAutoStart:a.default.bool,enableRandomize:a.default.bool,enableCaptions:a.default.bool,enableNavigation:a.default.bool,enablePlayButton:a.default.bool,transition:a.default.string,showTransitionSpeed:a.default.bool,speed:a.default.number,transitionSpeed:a.default.number}}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-underlineformfield","sm-component-checkbox","sm-component-select","sm-component-inlinetextbox","sm-slideshow-options-helpers"]});
YUI.add("sm-slideshow-view",(function(e){SM.currentModule="sm-slideshow-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){"use strict";var t,i,n=e.Template.Micro,s=e.SM.Views.Tile.cacheImage,o=new Error("no image"),a=new e.Promise((function(e,t){t(o)})),r=[1,3],l=[5,10],h=SM.import("sm-smuglog");!function(e){var i,n={requestFullscreen:{active:"isFullscreen",change:"fullscreenchange",request:"requestFullscreen",error:"fullscreenerror",cancel:"exitFullscreen",enabled:"fullscreenEnabled",fullScreenElement:"fullscreenElement"},mozRequestFullScreen:{active:"mozFullScreen",change:"mozfullscreenchange",request:"mozRequestFullScreen",error:"mozfullscreenerror",cancel:"mozCancelFullScreen",enabled:"mozFullScreenEnabled",fullScreenElement:"mozFullScreenElement"},webkitRequestFullScreen:{active:"webkitIsFullScreen",change:"webkitfullscreenchange",request:"webkitRequestFullScreen",error:"webkitfullscreenerror",cancel:"webkitCancelFullScreen",enabled:"webkitFullscreenEnabled",fullScreenElement:"webkitCurrentFullScreenElement"}};for(i in n)if(n.hasOwnProperty(i)&&e[i]){t=n[i];break}}(document.createElement("div")),t&&(e.Node.DOM_EVENTS[t.change]=!0,e.Node.DOM_EVENTS[t.error]=!0),i=e.Base.create("sm-slideshow-view",e.View,[],{_cacheSize:null,_controlsHidden:!0,_eventHandles:null,_playing:null,_timer:null,_timeRemaining:0,_timeStarted:0,_transition:null,containerTemplate:'<div class="sm-slideshow"></div>',events:{".sm-slideshow-nav":{click:"_onNavClick"},".sm-slideshow-fullscreen-button":{click:"_onFullScreenButtonClick"},".sm-slideshow-play-pause":{click:"_onPlayPause"}},template:'<div class="sm-slideshow-tile"><div class="sm-slideshow-image"></div><% if (data.showNavigation) { %><div class="sm-slideshow-nav sm-slideshow-nav-left">'+e.SM.Templates.button({icon:"AngleBracketLeftSlim",size:"large",noChrome:!0})+'</div><div class="sm-slideshow-nav sm-slideshow-nav-right">'+e.SM.Templates.button({icon:"AngleBracketRightSlim",size:"large",noChrome:!0})+'</div><% } %><% if (data.showPlayButton) { %><div class="sm-slideshow-play-pause">'+e.SM.Templates.button({className:"sm-slideshow-play",icon:"PlayerPlay",size:"large",noChrome:!0})+'</div><% } %><% if (data.showFullscreen) { %><div class="sm-slideshow-fullscreen-button">'+e.SM.Templates.button({icon:"FullScreenSlim",size:"large",noChrome:!0})+"</div><% } %></div>",next:function(){this.set("index",this.get("index")+1)},pause:function(){this._playButton&&this._playButton.replaceClass("sm-fonticon-PlayerPause","sm-fonticon-PlayerPlay"),clearTimeout(this._timer),this._playing=!1,this._timeRemaining-=+new Date-this._timeStarted},play:function(){var e=this.get("modelList").size();this.get("index")+1===e&&this.set("index",0,{src:"play"}),this._cacheSize=r,e&&(this._playButton&&this._playButton.replaceClass("sm-fonticon-PlayerPlay","sm-fonticon-PlayerPause"),this._playing=!0,this._timeStarted=+new Date,this._scheduleNext())},previous:function(){this.set("index",this.get("index")-1)},render:function(){var e=this,t=this.getAttrs(),s=!t.modelList.size(),o=t.splashImage?+t.splashDelay:t.speed;s||(this.rendered||(t.container.setHTML(n.render(this.template,t)),t.showPlayButton&&(this._playButton=t.container.one(".sm-slideshow-play .sm-fonticon-PlayerPlay"),!s&&t.autoStart&&this._playButton.replaceClass("sm-fonticon-PlayerPlay","sm-fonticon-PlayerPause"))),this._resize(),t.transition&&t.container.addClass("sm-slideshow-transition-"+t.transition),t.randomize&&this.shuffleImages(),t.currentImage?this.set("index",t.modelList.indexOf(t.currentImage)):(t.currentImage=t.modelList.item(t.index),this.set("currentImage",t.currentImage)),t.splashImage&&(this._showingSplash=!0,t.currentImage=t.splashImage,t.container.addClass("sm-slideshow-splash")),t.currentImage&&(this._bindUI(),this._showImage(t.currentImage,!0).then((function(n){n||(e._timeRemaining=1e3*o,e._timeStarted=+new Date),e._bindNav(),t.autoStart&&!1!==e._playing?(e.play(),e._hideControls(i.CONTROLS_INITIAL_DELAY)):(e._showingSplash||n)&&e._scheduleNext()}))),this.rendered=!0)},shuffleImages:function(){for(var e,t,i=this.get("modelList"),n=i.toArray(),s=n.length,o=s-1;s>0;)e=Math.min(o,Math.floor(Math.random()*s--)),t=n[s],n[s]=n[e],n[e]=t;i.reset(n)},toggleFullscreen:function(e){var i=this.get("container");void 0===e&&(e=!document[t.active]),t&&(e?i.getDOMNode()[t.request]():(document[t.cancel](),this.fire("exitFullScreen")))},_afterCurrentImageChange:function(e){this._showImage(e.newVal)},_afterIndexChange:function(e){var t=this.get("modelList"),i=t.size(),n=this.get("loop");"currentImage"!==e.src&&(i&&(e.newVal!==i-1||n)||this.pause(),i&&(0===e.newVal&&this.get("randomize")&&this.shuffleImages(),this.set("currentImage",t.item(e.newVal),{src:"index"})))},_bindNav:function(){this._eventHandles.push(this.after("currentImageChange",this._afterCurrentImageChange));var t=this.get("container");t?this._eventHandles.push(t.on("mousemove",this._onMouseMove,this),t.on("mouseout",this._onMouseOut,this)):h.add("slideshow","Container not set in _bindNav",h.LEVEL_ERROR),this.get("keyboardControls")&&this._eventHandles.push(e.one("doc").on("keydown",this._onKeyDown,this))},_bindUI:function(){this._eventHandles.push(e.on("layout:widthchange",this._resize,this),e.on("windowresize",this._resize,null,this),this.after("indexChange",this._updateImageCache)),t&&this._eventHandles.push(e.on(t.change,this._onFullScreenChange,null,this))},_cacheImages:function(e){for(var t,i=this.get("modelList"),n=this.get("width"),o=this.get("height"),a=Math.max(0,e-this._cacheSize[0]),r=Math.min(i.size(),e+this._cacheSize[1]);a<r;++a)if(t=i.item(a)){var l=this.get("cover")?"cover":"fit";s(t,l,n,{containerHeight:o,maxHeight:o,maxWidth:n})}},_createImageView:function(t){var i={autoResize:!1,center:!0,clickable:this.get("clickable"),imageCrop:"none",resource:t,showInfo:this.get("showCaptions")&&"over",dataMap:{Url:"LightboxUrl"}};return this.get("cover")?(i.imageSize="cover",t.get("OriginalHeight")>t.get("OriginalWidth")&&(i.verticallyCenter=!1)):(i.maxHeight=this.get("height"),i.maxWidth=this.get("width"),i.imageSize="fit"),new e.SM.Views.Tile(i)},destructor:function(){new e.EventHandle(this._eventHandles).detach(),this.get("container").setHTML("").setStyle("height",""),this._imageView&&(this._imageView.destroy(),this._views&&e.each(this._views,(function(e){e.destroy()}))),clearTimeout(this._timer),clearTimeout(this._controlTimer)},initializer:function(){this._cacheSize=r,this._transition=this.get("transition"),"function"!=typeof this._transition&&(this._transition=i.Transitions[this._transition]||i.Transitions.none),this._eventHandles=[this.after("indexChange",e.bind("_afterIndexChange",this))],this.get("randomize")&&this.shuffleImages()},_getFullScreen:function(){return t&&document[t.active]},_getHeight:function(e){var t=this._container;if(t&&"fixed"===this.get("heightSource")){var n=t.get("offsetWidth"),s=i.HEIGHT_RATIOS[this.get("heightRatio")]||1.33,o=Math.round(n*s);return o>e?e:o}return this._height},_hideControls:function(e){var t=this;e||(t._hoveringControls=!1),t._controlTimer&&(clearTimeout(t._controlTimer),t._controlTimer=null),e?t._controlTimer=setTimeout((function(){t._hoveringControls||(t._container.addClass("sm-slideshow-hide-controls"),t._controlsHidden=!0)}),e):(t._container.addClass("sm-slideshow-hide-controls"),t._controlsHidden=!0)},_onFullScreenChange:function(){this._resize(),document[t.active]||this.fire("exitFullScreen")},_onFullScreenButtonClick:function(){this.toggleFullscreen()},_onKeyDown:function(e){var t=37===e.keyCode?"previous":39===e.keyCode?"next":null;t&&(e.preventDefault(),this._cacheSize=l,this._showingSplash||(this.get("showPlayButton")&&this.pause(),this[t]()))},_onMouseOut:function(e){e.target._node.className.indexOf("sm-button")>-1&&(this._hoveringControls=!1)},_onMouseMove:function(e){this._showControls(i.CONTROLS_DELAY),e.target._node.className.indexOf("sm-button")>-1&&(this._hoveringControls=!0)},_onNavClick:function(e){var t=e.currentTarget;e.preventDefault(),this._cacheSize=l,this._showingSplash||t.hasClass("sm-slideshow-nav-disabled")||(this.get("showPlayButton")&&this.pause(),t.hasClass("sm-slideshow-nav-left")?this.previous():this.next())},_onPlayPause:function(e){e.preventDefault(),this._playButton.hasClass("sm-fonticon-PlayerPause")?this.pause():this.play()},_resize:function(){var t,n,s,o=this._container,a=0,r=0,l=this.get("heightSource");this.get("fullScreen")?(a=screen.width,r=screen.height):(o&&(o.setStyle("width",""),a=o.get("offsetWidth")),"fixed"===l?r=this.get("height"):"inline"===l?r=o.get("offsetHeight"):(t=i.HEIGHT_RATIOS[this.get("heightRatio")]||1.33,n=e.DOM.winHeight()-12,r=Math.round(a*t),o&&this.get("contentAwareHeight")&&(s=o.getY())<n&&(s/n<.5||n-s>250)&&(n-=s),r>n&&(r=n))),this._set("width",a),this._height=r,o&&"inline"!==l&&o.setStyles({width:a+"px",height:r+"px"}),this._imageView&&(this._imageView.resize(a,r),this._views&&e.each(this._views,(function(e){e.resize(a,r)}))),this._cacheImages(this.get("index"))},_scheduleNext:function(){var e,t,i=this,n=+new Date;this._timer&&clearTimeout(this._timer),this._timeRemaining-=n-this._timeStarted,this._timeStarted=n,e=Math.max(0,this._timeRemaining),t=this._showingSplash?function(){i._showingSplash=!1,i._container.removeClass("sm-slideshow-splash"),i._showImage(i.get("currentImage"))}:function(){i.next()},this._timer=setTimeout(t,e)},_setArrowStates:function(){var e=this.get("container"),t=this.get("loop"),i=this.get("index"),n=this.get("modelList").size(),s=!n||!t&&0===i,o=!n||!t&&i===n-1,a=e.one(".sm-slideshow-nav-left"),r=e.one(".sm-slideshow-nav-right");a&&(a.toggleClass("sm-slideshow-nav-disabled",s),r.toggleClass("sm-slideshow-nav-disabled",o))},_setIndex:function(t){var i=this.get("modelList").size();if(t<0||t>=i){if(!this.get("loop"))return this.fire("invalidIndex",{prevVal:this.get("index"),newVal:t}),e.Attribute.INVALID_VALUE;t=i&&(i+t%i)%i}return t},_showControls:function(e){this._controlsHidden&&(this._container.removeClass("sm-slideshow-hide-controls"),this._controlsHidden=!1),this._controlTimer&&(clearTimeout(this._controlTimer),this._controlTimer=null),e&&this._hideControls(e)},_showImage:function(t,i){var n=this,o=n.get("width");if(n._setArrowStates(),!t)return a;var r=n.get("height"),l=n.get("cover")?"cover":"fit";return s(t,l,o,{containerHeight:r,maxWidth:o,maxHeight:r}).then((function(){var i=n.get("currentImage");if(n._showingSplash||i===t)return e.when(n._transition.call(n,t))})).then((function(){n.get("currentImage")===t&&(n._timeStarted=+new Date,n._timeRemaining=1e3*n.get("speed"),n._playing&&n._scheduleNext())}),(function(){return n._timeRemaining=0,i||n.get("currentImage")!==t||n._scheduleNext(),!0}))},_updateImageCache:function(e){this._cacheImages(e.newVal)},_keyframeTransition:function(t){var i,n,s,o=this._imageView,a=o&&o.get("resource"),r=this.get("container").one(".sm-slideshow-image"),l=this.get("transitionSpeed"),h=e.stamp(t.image),u=this._views||(this._views={});if((t=e.merge({fade:!0},t)).image!==a)return(i=u[h])?((n=i.get("container")).removeClass("sm-slideshow-image-transitioning"),delete u[h]):(i=this._createImageView(t.image),n=i.get("container"),t.fade&&n.setStyle("opacity",0),r.insertBefore(n,r.get("firstChild")),i.render(),u[h]=i),s=new e.Promise((function(e){t.fade&&n.transition({opacity:1,duration:l*(1-n.getComputedStyle("opacity"))}),o&&t.animationIn&&n.setStyles({"-webkit-animation":t.animationIn+" "+l+"s",animation:t.animationIn+" "+l+"s"}),window.setTimeout((function(){e()}),1e3*l)})),o&&(n=o.get("container"),h=e.stamp(a),u[h]=o,n.addClass("sm-slideshow-image-transitioning"),t.fade&&n.transition({opacity:0,duration:l*n.getComputedStyle("opacity")}),t.animationOut&&n.setStyles({"-webkit-animation":t.animationOut+" "+l+"s",animation:t.animationOut+" "+l+"s"}),window.setTimeout((function(){n.remove(!0),delete u[h],o.destroy()}),1e3*l)),this._imageView=i,s}},{BIG_CACHE:l,SMALL_CACHE:r,ATTRS:{modelList:{value:null},index:{value:0,setter:"_setIndex"},cover:{value:!1},currentImage:{value:null},fullScreen:{getter:"_getFullScreen",readOnly:!0},heightSource:{value:"auto",validator:function(e){return"auto"===e||"fixed"===e||"inline"===e}},heightRatio:{value:"4x3",validator:function(e){return e in i.HEIGHT_RATIOS}},height:{value:800,getter:"_getHeight"},contentAwareHeight:{value:!0},width:{readOnly:!0},showCaptions:{value:!1},autoStart:{value:!0},speed:{value:5},transitionSpeed:{value:5},splashDelay:{value:5},splashImage:{value:null},showNavigation:{value:!0},showFullscreen:{value:!!t,setter:function(e){return t&&e}},showPlayButton:{value:!0},loop:{value:!0},keyboardControls:{value:!1},transition:{value:"fade"},randomize:{},clickable:{value:!1}},SPEEDS:{slow:15e3,medium:1e4,fast:5e3},TRANSITION_SPEEDS:{slow:5,medium:2,fast:1},HEIGHT_RATIOS:{"1x1":1,"4x3":.75,"3x4":1.33,"3x2":2/3,"2x3":1.5,"3x1":1/3,"1x3":3},CONTROLS_DELAY:1500,CONTROLS_INITIAL_DELAY:3e3,Transitions:{none:function(e){this._imageView&&this._imageView.remove(!0);var t=this._imageView=this._createImageView(e);this.get("container").one(".sm-slideshow-image").prepend(t.get("container")),t.render()},fade:function(t){var i,n,s,o=this._imageView,a=o&&o.get("resource"),r=this.get("container").one(".sm-slideshow-image"),l=this.get("transitionSpeed"),h=e.stamp(t),u=this._views||(this._views={});if(t!==a){if((i=u[h])?((n=i.get("container")).removeClass("sm-slideshow-image-transitioning"),delete u[h]):(i=this._createImageView(t),(n=i.get("container")).setStyle("opacity",0),r.insertBefore(n,r.get("firstChild")),i.render(),u[h]=i),s=new e.Promise((function(e){window.setTimeout((function(){var t=l*(1-n.getComputedStyle("opacity"));n.transition({opacity:1,duration:t||1},(function(){e()}))}),0)})),o){var m=o.get("container");h=e.stamp(a),u[h]=o,m.addClass("sm-slideshow-image-transitioning"),window.setTimeout((function(){var e=l*m.getComputedStyle("opacity");m.transition({opacity:0,duration:e||1},(function(){m.remove(!0),delete u[h],o.destroy()}))}),0)}return this._imageView=i,s}},zoomin:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-zoomin-out"})},zoomout:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomout-in",animationOut:"slideshow-zoomout-out"})},zoominout:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomout-in",animationOut:"slideshow-zoomin-out"})},zoomoutin:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-zoomout-out"})},slidezoom:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-down-out"})},slidedown:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-down-in",animationOut:"slideshow-down-out"})},slideup:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-up-in",animationOut:"slideshow-up-out"})},slideupdown:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-up-in",animationOut:"slideshow-down-out"})},slideleft:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-left-in",animationOut:"slideshow-left-out"})},slideright:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-right-in",animationOut:"slideshow-right-out"})},slideleftright:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-right-in",animationOut:"slideshow-left-out"})},flipdown:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-flipdown-out"})},flipup:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-flipup-out"})},flipleft:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-flipleft-out"})},flipright:function(e){this._keyframeTransition({image:e,animationIn:"slideshow-zoomin-in",animationOut:"slideshow-flipright-out"})}}}),e.namespace("SM.Views").Slideshow=i}(),SM.currentModule=null}),"",{requires:["anim","base","event-gestures","event-resize","sm-image-model","sm-video-view","sm-tile-view","sm-templates-button","sm-smuglog","transition","view","promise"]});
YUI.add("sm-smuglog-constants",(function(E){SM.currentModule="sm-smuglog-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FIELD_STATUS_CODE=exports.FIELD_NICKNAME=exports.FIELD_MESSAGE=exports.FIELD_ERROR=exports.FIELD_EMAIL=exports.LEVEL_ERROR=exports.LEVEL_WARNING=exports.LEVEL_NOTICE=exports.LEVEL_INFO=exports.LEVEL_DEPRECATED=exports.LEVEL_STRICT=exports.LEVEL_UNKNOWN=exports.API_RPC_METHOD=exports.API_URL=void 0;exports.API_URL="/services/api/json/1.4.0/";exports.API_RPC_METHOD="rpc.smuglog.add";exports.LEVEL_UNKNOWN="unknown";exports.LEVEL_STRICT="strict";exports.LEVEL_DEPRECATED="deprecated";exports.LEVEL_INFO="info";exports.LEVEL_NOTICE="notice";exports.LEVEL_WARNING="warning";exports.LEVEL_ERROR="error";exports.FIELD_EMAIL="email";exports.FIELD_ERROR="error";exports.FIELD_MESSAGE="message";exports.FIELD_NICKNAME="nickName";exports.FIELD_STATUS_CODE="httpStatusCode"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-smuglog",(function(e){SM.currentModule="sm-smuglog";var exports={},E=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=E("sm-smuglog-constants");let n,o,r="undefined"!=typeof window&&window||"undefined"!=typeof global&&global||{},{FormData:s,navigator:L}=r;n=L&&L.sendBeacon?L.sendBeacon.bind(L):(e,E)=>{try{let n=new XMLHttpRequest;return n.open("POST",e,!1),E instanceof s||n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(E),!0}catch(e){return!1}},o=s?e=>Object.entries(e).reduce((e,[E,n])=>(e.append(E,n),e),new s):JSON.stringify;const t=(e,E)=>E&&E instanceof Error?{name:E.name,message:E.message,number:E.number&&65535&E.number,line:"line"in E?E.line:E.lineNumber,column:"column"in E?E.column:E.columnNumber,sourceUrl:E.sourceUrl||E.fileName}:E,l={LEVEL_UNKNOWN:e.LEVEL_UNKNOWN,LEVEL_STRICT:e.LEVEL_STRICT,LEVEL_DEPRECATED:e.LEVEL_DEPRECATED,LEVEL_INFO:e.LEVEL_INFO,LEVEL_NOTICE:e.LEVEL_NOTICE,LEVEL_WARNING:e.LEVEL_WARNING,LEVEL_ERROR:e.LEVEL_ERROR,FIELD_EMAIL:e.FIELD_EMAIL,FIELD_ERROR:e.FIELD_ERROR,FIELD_MESSAGE:e.FIELD_MESSAGE,FIELD_NICKNAME:e.FIELD_NICKNAME,FIELD_STATUS_CODE:e.FIELD_STATUS_CODE,add:(E,s,L,a)=>{if(r.SMUGLOG_SILENT)return Promise.resolve(!0);L||(L=e.LEVEL_INFO),a||(a={}),a.silent||l.console(E,s,L);let u="object"==typeof s?1:0;return u&&(s=JSON.stringify(s,t)),Promise.resolve(n(e.API_URL,o({method:e.API_RPC_METHOD,category:E,json:u,level:L,message:s})))},console:(E,n,o)=>{let s=r.console;if(s&&!r.SMUGLOG_SILENT)switch(E||(E="smuglog"),E="["+E+"]",o){case e.LEVEL_ERROR:case e.LEVEL_STRICT:s.error?s.error(E,n):s.log&&s.log(E,n);break;case e.LEVEL_DEPRECATED:case e.LEVEL_NOTICE:case e.LEVEL_WARNING:s.warn?s.warn(E,n):s.log&&s.log(E,n);break;case e.LEVEL_INFO:s.info?s.info(E,n):s.log&&s.log(E,n);break;default:s.log&&s.log(E,n)}},error:(E,n,o)=>{"object"==typeof n&&(o=n,n=null),n||(n=o&&o.message||"Mystery error!");let r=new Error(n);return r.category=E,o&&(Object.assign(r,o),n={message:n,...o}),l.console(E,n,e.LEVEL_ERROR),r}};var a=l;exports.default=a}(),SM.currentModule=null}),"",{requires:["sm-smuglog-constants"]});
YUI.add("sm-stepper",(function(e){SM.currentModule="sm-stepper";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireWildcard(t("react")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),a=babelHelpers.interopRequireDefault(t("sm-icon"));class n extends l.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"inputField",l.default.createRef()),babelHelpers.defineProperty(this,"_onChange",e=>{let t=+e.target.value;t===this._constrainValue(t)?this._changeValue(t):e.preventDefault()}),babelHelpers.defineProperty(this,"_onDecrementClick",()=>{this._changeValue(this._constrainValue(this.props.value-1))}),babelHelpers.defineProperty(this,"_onIncrementClick",()=>{this._changeValue(this._constrainValue(+this.props.value+1))})}render(){let{className:e="",disabled:t,max:n,min:s,value:i}=this.props;return l.default.createElement("div",{className:"sm-form-field-stepper ".concat(e)},l.default.createElement(r.default,{size:"small",onClick:this._onDecrementClick,disabled:t||i===s},l.default.createElement(a.default,{name:"Minus",size:"small"})),l.default.createElement("input",babelHelpers.extends({ref:this.inputField},this.props,{type:"number",inputMode:"numeric",onChange:this._onChange,disabled:t})),l.default.createElement(r.default,{size:"small",onClick:this._onIncrementClick,disabled:t||i===n},l.default.createElement(a.default,{name:"Plus",size:"small"})))}_changeValue(e){let t=this.inputField.current;e!==this.props.value&&isFinite(e)&&t&&(t.value=e,this.props.onChange({target:t}))}_constrainValue(e){return Math.min(this.props.max,Math.max(e,this.props.min))}}exports.default=n,babelHelpers.defineProperty(n,"defaultProps",{min:0,max:100}),babelHelpers.defineProperty(n,"propTypes",{value:e.default.number.isRequired,min:e.default.number,max:e.default.number,onChange:e.default.func,disabled:e.default.bool}),babelHelpers.defineProperty(n,"displayName","Stepper")}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm","sm-component-button","sm-icon"]});
YUI.add("sm-swipeable-constants",(function(e){SM.currentModule="sm-swipeable-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SLIDE_NEXT=exports.SLIDE_CURRENT=exports.SLIDE_PREV=void 0;exports.SLIDE_PREV="previous";exports.SLIDE_CURRENT="current";exports.SLIDE_NEXT="next"}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-swipeable",(function(e){SM.currentModule="sm-swipeable";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireWildcard(t("react")),n=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("classnames")),i=babelHelpers.interopRequireDefault(t("hammerjs"));class r extends e.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_isPinching",!1),babelHelpers.defineProperty(this,"_isZoomed",!1),babelHelpers.defineProperty(this,"_swipeContainer",e.default.createRef()),babelHelpers.defineProperty(this,"state",{contentTranslateX:0,transitionDirection:null}),babelHelpers.defineProperty(this,"_handlePanMove",e=>{if(!this._shouldHandlePan(e))return;let{deltaX:t}=e,{canNavBackward:n,canNavForward:a}=this.props;n||(t=Math.min(t,0)),a||(t=Math.max(t,0)),this.setState({contentTranslateX:"".concat(t,"px")})}),babelHelpers.defineProperty(this,"_handlePanEnd",e=>{if(!this._shouldHandlePan(e))return;let{direction:t}=e,{canNavBackward:n,canNavForward:a}=this.props,r=!n&&t===i.default.DIRECTION_RIGHT,s=!a&&t===i.default.DIRECTION_LEFT;r||s||(this._swipeContainer.current&&this._swipeContainer.current.addEventListener("transitionend",this._onSwipeTransitionEnd),this.setState({contentTranslateX:0,transitionDirection:t}))}),babelHelpers.defineProperty(this,"_handlePinchEnd",()=>{this._isPinching=!1,this._setUnzoomedAfterDelay()}),babelHelpers.defineProperty(this,"_handlePinchStart",()=>{clearTimeout(this._unzoomTimeout),this._isPinching=!0,this._isZoomed=!0}),babelHelpers.defineProperty(this,"_onSwipeTransitionEnd",()=>{this._swipeContainer.current&&this._swipeContainer.current.removeEventListener("transitionend",this._onSwipeTransitionEnd);let{transitionDirection:e}=this.state;e===i.default.DIRECTION_RIGHT?this.props.onNavBackward():e===i.default.DIRECTION_LEFT&&this.props.onNavForward(),this.setState({transitionDirection:null})}),babelHelpers.defineProperty(this,"_handleTap",e=>{let{pointerType:t}=e;"mouse"!==t&&this.props.onTap(e)}),babelHelpers.defineProperty(this,"_handleZoomableChange",e=>{1!==e.detail.zoomScale||e.detail.isPinching?(clearTimeout(this._unzoomTimeout),this._isZoomed=!0):this._isZoomed&&this._setUnzoomedAfterDelay()})}componentDidMount(){let e=this._swipeContainer.current;e.addEventListener("zoomableChange",this._handleZoomableChange);let t=new i.default.Manager(e,{touchAction:"none",recognizers:[[i.default.Pinch],[i.default.Pan]]});t.on("panend",this._handlePanEnd).on("panmove",this._handlePanMove).on("pinchend",this._handlePinchEnd).on("pinchstart",this._handlePinchStart).on("tap",this._handleTap),this._hammer=t}componentWillUnmount(){this._swipeContainer.current.removeEventListener("zoomableChange",this._handleZoomableChange),this._hammer&&(this._hammer.stop(),this._hammer.destroy(),this._hammer=null)}render(){let{children:t,className:n}=this.props,{contentTranslateX:r,transitionDirection:s}=this.state,o={};if(r){let e="translate3d(".concat(r,", 0, 0)");o.msTransform=e,o.WebkitTransform=e,o.transform=e}let l=null;if(s)switch(s){case i.default.DIRECTION_RIGHT:l="right";break;case i.default.DIRECTION_LEFT:l="left";break;case i.default.DIRECTION_NONE:default:l="none"}let d=(0,a.default)(["sm-swipeable",n]);return e.default.createElement("div",{className:d,style:o,"data-transform":!!r||null,"data-transition":l,ref:this._swipeContainer},t)}_setUnzoomedAfterDelay(){clearTimeout(this._unzoomTimeout),this._unzoomTimeout=setTimeout(()=>{this._isPinching||(this._isZoomed=!1)},200)}_shouldHandlePan(e){return"mouse"!==e.pointerType&&"VIDEO"!==e.target.nodeName&&!this._isZoomed&&!this._isPinching&&!this.state.transitionDirection}}babelHelpers.defineProperty(r,"displayName","Swipeable"),babelHelpers.defineProperty(r,"propTypes",{canNavBackward:n.default.bool,canNavForward:n.default.bool,onNavBackward:n.default.func,onNavForward:n.default.func,onTap:n.default.func}),babelHelpers.defineProperty(r,"defaultProps",{canNavBackward:!0,canNavForward:!0,onNavBackward:()=>{},onNavForward:()=>{},onTap:()=>{}});var s=r;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","hammerjs"]});
YUI.add("sm-sync-api-base",(function(e){SM.currentModule="sm-sync-api-base";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){var t=function(e){return e=(e=(e=(e=(e=e.replace(/[cC]hild$/,"$&ren")).replace(/ey$/,"$&s")).replace(/y$/,"ies")).replace(/h$/,"$&es")).replace(/[^s]$/,"$&s")},s=function(e){return e=(e=(e=(e=(e=e.replace(/([cC]hild)ren$/,"$1")).replace(/eys$/,"ey")).replace(/ies$/,"y")).replace(/hes$/,"h")).replace(/s$/,"")};function a(t){this._api=this._api||new e.SM.API,this._apiCategoryCfg=null}var r=SM.import("sm-smuglog");a.ATTRS={PageNumber:{value:0,readOnly:!0},PageSize:{value:0,readOnly:!0},TotalPages:{value:0,readOnly:!0},TotalItems:{value:0,readOnly:!0}},a.prototype={apiEndpoint:null,apiCategories:null,resultLocator:null,_getAPIEndpoint:function(){return this.apiEndpoint},_setAPICategoryCfg:function(e){var t=this.apiCategories;return this._apiCategoryCfg=null,t&&(e.apiCategory&&t[e.apiCategory]?this._apiCategoryCfg=t[e.apiCategory]:t.default&&(this._apiCategoryCfg=t.default,this._apiCategoryCfg.method=null)),this._apiCategoryCfg},_setLastApiRequest:function(e){return this._lastApiRequest={method:e.method,data:e.data,cfg:e.cfg},void 0!==e.freshRequest&&(this._lastApiRequest.freshRequest=e.freshRequest),void 0!==e.cacheResponse&&(this._lastApiRequest.cacheResponse=e.cacheResponse),this._lastApiRequest},_buildAPIMethod:function(e,t){var s="rpc."+this._getAPIEndpoint().toLowerCase();switch(e){case"create":s+=".create";break;case"update":s+=".save";break;case"read":s+=".get";break;case"delete":s+=".delete";break;default:s+="."+e}return t&&(s+=t),s},_buildHTTPMethod:function(e){var t="GET";switch(e){case"create":case"update":case"delete":t="POST"}return t},_getData:function(e){return{}},sync:function(t,s,a){var i,n,o,c,u,l={},h=null;s=s||{},(u=this._setAPICategoryCfg(s))&&u.method&&(h=u.method),i=s.method||this._buildAPIMethod(t,h),n=e.merge(this._getData(t),s.data||{}),o=e.merge({method:this._buildHTTPMethod(t)},s.cfg||{}),this.resultLocator=s.resultLocator||this.resultLocator,e.Lang.isFunction(a)&&(l={success:function(e){a(null,e.response.results)},failure:function(e){e.response||r.add("sm-sync-api-base",{cfg:o,method:i,originalResponse:e.responseText||""},r.LEVEL_ERROR),a(e.error,e.response&&e.response.results)},context:this}),c={method:i,data:n,on:l,cfg:o},void 0!==s.freshRequest&&(c.freshRequest=s.freshRequest),void 0!==s.cacheResponse&&(c.cacheResponse=s.cacheResponse),this._setLastApiRequest(c),this._prefetchNext=!!s.prefetchNext,this._prefetchPrev=!!s.prefetchPrev,this._api.sendRequest(c)},parse:function(a){var r,i,n,o,c,u,l=this.constructor;return(r=this.resultLocator||this._getAPIEndpoint())&&(i=s(r).toLowerCase(),n=t(r).toLowerCase(),e.some(a,(function(t,s){if(!e.Lang.isObject(t,!0))return!1;var a=s.toLowerCase();return a===n||a===i?(o=t,!0):void 0}))),this._apiCategoryCfg&&this._apiCategoryCfg.expanded&&e.each(this._apiCategoryCfg.expanded,(function(t,s){var r=a[s];if(r&&(e.Lang.isString(t)&&(t=e.namespace(t)),t=t instanceof e.Model?t.constructor:t.superclass&&t.superclass.constructor instanceof e.Model.constructor?t:null))if(e.Lang.isArray(r))(new t).add(r);else if(e.Lang.isObject(r))new t(r)})),l.RELATIONSHIPS&&!e.Object.isEmpty(l.RELATIONSHIPS)&&e.Object.each(l.RELATIONSHIPS,(function(e,t){var s=a[t];s&&e.relatedModel&&"string"!=typeof e.relatedModel&&new e.relatedModel(s)})),a.Pagination&&(c=a.Pagination.PageNumber||0,u=a.Pagination.PageSize||0,this._set("PageNumber",c),this._set("PageSize",u),this._set("TotalPages",a.Pagination.TotalPages||0),this._set("TotalItems",a.Pagination.TotalItems||0),c&&u&&this._preFetchPage&&(this._prefetchNext&&e.later(1e3,this,this._preFetchPage,[c+1,u],!1),this._prefetchPrev&&e.later(1e3,this,this._preFetchPage,[c-1,u],!1))),o||a}},e.namespace("SM").APISyncBase=a}(),SM.currentModule=null}),"",{requires:["sm-api","sm-apierror-model","sm-smuglog"]});
YUI.add("sm-tappable",(function(e){SM.currentModule="sm-tappable";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireDefault(t("react"));class l extends o.default.PureComponent{constructor(e){super(e),this._touchState={},this._handleClick=this._handleClick.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this)}render(){let{children:e,onTap:t}=this.props;if(!t)return e;let l=o.default.Children.only(e),h=l.props,n={WebkitTapHighlightColor:this.props.tapHighlightColor};return o.default.cloneElement(l,{style:Object.assign(n,h.style),onClick:h.onClick?this._handleClick:h.onClick,onTouchEnd:t?this._handleTouchEnd:h.onTouchEnd,onTouchMove:t?this._handleTouchMove:h.onTouchMove,onTouchStart:t?this._handleTouchStart:h.onTouchStart})}_handleClick(...e){let t=this._touchState;t.touched||t.moved||o.default.Children.only(this.props.children).props.onClick(...e)}_handleTouchEnd(...e){let t=o.default.Children.only(this.props.children).props,l=this._touchState;t.onTouchEnd&&t.onTouchEnd(...e),l.moved||(e[0].persist(),l.touched=!0,l.timeout=setTimeout(()=>{l.touched=!1},500),e[0].allowClick=()=>{l.touched=!1},this.props.onTap(...e))}_handleTouchMove(...e){let t=o.default.Children.only(this.props.children).props,l=this._touchState;t.onTouchMove&&t.onTouchMove(...e);let h=e[0].touches[0];(Math.abs(l.clientX-h.clientX)>=20||Math.abs(l.clientY-h.clientY)>=20)&&(l.moved=!0)}_handleTouchStart(...e){let t=o.default.Children.only(this.props.children).props,l=this._touchState;clearTimeout(l.timeout);let h=e[0].touches[0];l.clientX=h.clientX,l.clientY=h.clientY,l.moved=!1,l.touched=!1,t.onTouchStart&&t.onTouchStart(...e)}}exports.default=l,l.displayName="Tappable",l.propTypes={children:e.default.element.isRequired,onTap:e.default.func,tapHighlightColor:e.default.string},l.defaultProps={tapHighlightColor:"rgba(0, 0, 0, 0)"}}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm","sm-component-pure-render"]});
YUI.add("sm-teleport",(function(e){SM.currentModule="sm-teleport";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,o){class a extends e.PureComponent{constructor(...e){super(...e),this.container=o?o(...e):n.doc.body.appendChild(n.doc.createElement("div"))}componentWillUnmount(){o||this.container.parentNode.removeChild(this.container)}render(){let{forwardedRef:n,...o}=this.props;return t.default.createPortal(e.default.createElement(r,babelHelpers.extends({},o,{ref:n})),this.container)}}return babelHelpers.defineProperty(a,"displayName","Teleported(".concat(function(e){return e.displayName||e.name||"Component"}(r),")")),babelHelpers.defineProperty(a,"WrappedComponent",r),e.default.forwardRef((r,t)=>e.default.createElement(a,babelHelpers.extends({},r,{forwardedRef:t})))};var e=babelHelpers.interopRequireWildcard(r("react")),t=babelHelpers.interopRequireDefault(r("react-dom")),n=r("sm-dom-core")}(),SM.currentModule=null}),"",{requires:["react","react-dom","sm-dom"]});
YUI.add("sm-templates-button",(function(a){SM.currentModule="sm-templates-button";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.overlayButton=exports.createMenuButton=exports.buttonGroup=exports.button=void 0;var e=babelHelpers.interopRequireDefault(t("sm-icon")),i=a.Template.Micro,n=function(t,e){return-1!==a.Array.indexOf(e,t)?t:e[0]},d='<span class="sm-fonticon sm-button-fonticon <% if (data.iconSize) { %>sm-fonticon-<%= data.iconSize %><% } %> sm-fonticon-<%= data.icon %>"></span>',l="<%== Y.SM.Templates.svgIcon({ icon: data.icon, iconSize: data.iconSize }) %>",s=i.compile('<div class="sm-button-group sm-button-group-size-<%=data.size%> yui3-g <%=data.className%>"><% Y.Array.each(data.buttons, function(btn) { %><%== Y.SM.Templates.button(Y.merge(btn, {size: data.size, groupSize: data.groupSize})) %><% }); %></div>'),o=i.compile('<<%= data.tag %> type="button" class="<%= data.cssClass %><% if (data.badgeNumber) { %> sm-position-relative<% } %>"<% if (data.value != null) { %> data-value="<%= data.value %>"<% } %><% if (data.href) { %> href="<%= data.href %>"<% } %><% if (data.title) { %> title="<%= data.title %>"<% } %><% if (data.ariaLabel) { %> aria-label="<%= data.ariaLabel %>"<% } %><% if (data.target) { %> target="<%= data.target %>"<% } %><% if (data.tooltip) { %> data-tooltip="<%= data.tooltip %>" data-tooltip-hide-on-click="true"<% } %><% if (data.dataLinkTrackingCategory) { %> data-link-tracking-category="<%= data.dataLinkTrackingCategory %>"<% } %><% if (data.dataLinkTrackingAction) { %> data-link-tracking-action="<%= data.dataLinkTrackingAction %>"<% } %><% if (data.dataLinkTrackingLabel) { %> data-link-tracking-label="<%= data.dataLinkTrackingLabel %>"<% } %><% if (data.dataLinkTrackingProperty) { %> data-link-tracking-property="<%= data.dataLinkTrackingProperty %>"<% } %><% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>"<% } %><% if (data.dataElemAttr) { %> data-elem-attr="<%= data.dataElemAttr %>"<% } %><% if (data.disabled) { %> disabled<% } %>><% if (data.icon && data.iconAlign === "left") { %><% if (data.svg) { %>'+l+"<% } else { %>"+d+'<% } %><% } %><% if (data.label) { %><span class="sm-button-label"><%== data.label %></span><% } %><% if (data.icon && data.iconAlign === "right") { %><% if (data.svg) { %>'+l+"<% } else { %>"+d+'<% } %><% } %><% if (data.badgeNumber) { %><span class="sm-badge sm-badge-skin-<%= data.badgeSkin %>"><%= data.badgeNumber %></span><% } %></<%= data.tag %>>'),r=i.compile('<div class="sm-flex sm-flex-align-start"><% if (data.icon) { %>'+l+'<% } %><div><% if (data.label) { %><div class="sm-organizer-create-menu-label"><%= data.label %></div><% } %><% if (data.detail) { %><div class="sm-organizer-create-menu-detail sm-text-mini"><%= data.detail %></div><% } %></div></div>'),u=i.compile('<button class="sm-button sm-button-skin-overlay sm-button-size-overlay sm-button-overlay"<% if (data.title) { %> title="<%= data.title %>"<% } %><% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>"<% } %><% if (data.dataElemAttr) { %> data-elem-attr="<%= data.dataElemAttr %>"<% } %><% if (data.value != null) { %> data-value="<%= data.value %>"<% } %>><span class="sm-button-overlay-outline"><% if (data.icon) { %><% if (data.svg) { %>'+l+"<% } else { %>"+d+'<% } %><% } %></span><% if (data.label) { %><div class="sm-button-label"><%== data.label %></div><% } %></button>');const c=function(t){var i=n(t.iconAlign,["left","right"]),d=t.iconSize?n(t.iconSize,[e.default.SIZE_LARGE,e.default.SIZE_SMALL]):"",l=n(t.size,["large","small"]),s=n(t.skin,["default","submit","accent","none","destructive"]);t.groupSize&&(t.className||(t.className=""),1==+t.groupSize?t.className+=" yui3-u-1":t.className+=" yui3-u-1-"+t.groupSize);var r=!(t.label||!t.icon);return o(a.merge(t,{cssClass:["sm-button","sm-button-size-"+l,"none"===s?"":"sm-button-skin-"+s,t.noChrome?"sm-button-nochrome":"",t.selected?"sm-button-selected":"",t.className||"",r?"sm-button-square":""].join(" "),iconAlign:i,iconSize:d||l,tag:t.href?"a":"button",target:t.href&&t.target?t.target:"",disabled:t.disabled,badgeSkin:t.badgeSkin||"alert",dataTestId:t.dataTestId,dataElemAttr:t.dataElemAttr}))};exports.button=c;const m=function(a){return a.size=n(a.size,["large","small"]),a.groupSize=a.buttons.length,s(a)};exports.buttonGroup=m;const b=function(a){return r(a)};exports.createMenuButton=b;const g=function(a){return u(a)};exports.overlayButton=g;const f=a.namespace("SM.Templates");f.button=c,f.buttonGroup=m,f.createMenuButton=b,f.overlayButton=g}(),SM.currentModule=null}),"",{requires:["array-extras","sm-icon","template","sm-templates-icon"]});
YUI.add("sm-templates-form",(function(a){SM.currentModule="sm-templates-form";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.label=exports.action=exports.toggle=exports.tabs=exports.checkbox=exports.checkboxes=exports.select=exports.optgroup=exports.option=exports.textarea=exports.textboxLabel=exports.textbox=exports.fieldDescription=void 0;var e=babelHelpers.interopRequireDefault(t("sm-templates-icon")),l=a.Template.Micro,i=function(t,e){return-1!==a.Array.indexOf(e,t)?t:e[0]},o=function(t){return a.Lang.isArray(t)?a.Array.map(t,(function(t){return a.Lang.isArray(t)?{value:t[0],label:t.length>1?t[1]:"",title:t[2]||null}:t})):t},s=l.compile('<div class="sm-form-field-description"><% if (data.description) { %><%= data.description %><% } %></div>'),d=l.compile('<input type="<%= data.type ? data.type : "text" %>" name="<%= data.name %>" value="<%= data.value %>" <% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %>class="sm-form-field sm-form-field-text-input<% if (data.size === "large") { %> sm-form-field-text-input-size-large<% } %><% if (data.noChrome) { %> sm-nochrome<% } %>"<% if (data.placeholder != null) { %> placeholder="<%= data.placeholder %>"<% } %><% if (data.maxlength != null) { %> maxlength="<%= data.maxlength %>"<% } %><% if (data.disabled) { %> disabled<% } %><% if (data.readonly) { %> readonly<% } %>/>'),n=l.compile('<label class="sm-form-field sm-form-field-text-label sm-flex sm-flex-items-center sm-form-field-text-label-<%= data.position %> <% if (data.noChrome) { %> sm-nochrome <% } %><% if (data.size === "large") { %> sm-form-field-text-label-size-large <% } %><%= data.className %>"><% if (data.iconPrefix) { %><svg class="sm-icon sm-icon-<%= data.iconPrefix %> sm-icon-small sm-icon-prefix" height="18px" role="presentation" title="<%= data.iconPrefix %>" width="18px"><use href="#sm-icon-def-small-<%= data.iconPrefix %>" xlink:href="#sm-icon-def-small-<%= data.iconPrefix %>"></use></svg ><% } %><% if (data.prefix) { %><span class="sm-form-field-label"><%= data.prefix %></span><% } %><span class="sm-form-field-text-input-wrapper"><input type="<%= data.type %>" name="<%= data.name %>" value="<%= data.value %>" <% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %>class="sm-form-field-text-input"<% if (data.disabled) { %> disabled<% } %><% if (data.placeholder != null) { %> placeholder="<%= data.placeholder %>"<% } %>/></span><% if (data.suffix) { %><span class="sm-form-field-label"><%= data.suffix %></span><% } %><% if (data.iconSuffix) { %><svg class="sm-icon sm-icon-<%= data.iconSuffix %> sm-icon-small sm-icon-suffix" height="18px" role="presentation" title="<%= data.iconSuffix %>" width="18px"><use href="#sm-icon-def-small-<%= data.iconSuffix %>" xlink:href="#sm-icon-def-small-<%= data.iconSuffix %>"></use></svg ><% } %></label>'),c=l.compile('<textarea class="sm-form-field sm-form-field-textarea <%= data.className %>" name="<%= data.name %>"<% if (data.disabled) { %> disabled<% } %><% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %><% if (data.placeholder != null) { %> placeholder="<%= data.placeholder %>"<% } %>><% if (data.value) { %><%= data.value %><% } %></textarea>'),r=l.compile('<div class="sm-form-field sm-form-field-select-wrapper <% if (data.noChrome) { %> sm-nochrome <% } %><%= data.className %>"><select class="sm-form-field-select" name="<%= data.name %>"<% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %><% if (data.disabled) { %> disabled<% } %>><% Y.Array.each(data.options, function(option) { %><% if (option.type && option.type === "optgroup") { %><%== data.optgroupTmpl(Y.merge(option, {value: data.value, noChrome: data.noChrome})) %><% } else { %><%== data.optionTmpl(Y.merge(option, {selected: data.value === option.value, noChrome: data.noChrome})) %><% } %><% }); %></select><svg class="sm-form-field-select-arrow sm-icon sm-icon-small sm-icon-AngleBracketDown" role="presentation" title="AngleBracketDown"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sm-icon-def-small-AngleBracketDown"></use></svg></div>'),f=l.compile('<option class="sm-form-field-select-option" value="<%= data.value %>" data-value="<%= data.value %>" <% if (data.disabled) { %> disabled<% } %><% if (data.title) { %> title="<%= data.title %>"<% } %><% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %><% if (data.selected) { %> selected<% } %>><% if (data.noChrome) { %>&#x202A;&#x200A;<% } %><%= data.label %></option>'),m=l.compile('<optgroup class="sm-form-field-select-optgroup" label="<%== data.label %>"<% if (data.disabled) { %> disabled<% } %>><% Y.Array.each(data.options, function(option) { %><%== data.optionTmpl(Y.merge(option, {selected: data.value === option.value, noChrome: data.noChrome})) %><% }); %></optgroup>'),p=l.compile('<div class="sm-form-field-checkbox sm-form-field-checkbox-orientation-<%= data.orientation %> <%= data.className %>"><% Y.Array.each(data.options, function(option) { %><% option.disabled = data.disabled || option.disabled; %><%== data.checkboxTmpl(Y.merge(option, {selected: data.isSelected(option.value)})) %><% }); %></div>'),u=l.compile('<button name="<%= data.name %>" value="<%= data.value %>" class="sm-form-field-checkbox-item yui3-button <% if (data.selected) { %> yui3-button-selected <% } %><%= data.className %>"<% if (data.disabled) { %> disabled<% } %>><span class="sm-form-field-checkbox-icon-container"><span class="sm-form-field-checkbox-icon sm-fonticon sm-fonticon-sml sm-fonticon-CheckMark"></span></span><% if (data.label) { %><span class="yui3-button-label"><%= data.label %></span><% } %></button>'),b=l.compile('<ul class="sm-tabs yui3-g"><% Y.Array.each(data.tabs, function(tab) { %><li data-value="<%= tab.value %>" class="sm-tab yui3-u-1-<%= data.tabs.length %><% if (tab.value === data.value) { %> yui3-tab-selected<% } %>"<% if (tab.title) { %> title="<%= tab.title %>"<% } %><% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %>><a class="sm-tab-label" href="#<%= tab.anchor %>"><% if (tab.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= tab.icon %>"></span><% } %><%= tab.label %></a></li><% }); %></ul>'),x=l.compile('<ul class="sm-tabs sm-tabs-vertical"><% Y.Array.each(data.tabs, function(tab) { %><li data-value="<%= tab.value %>" class="sm-tab<% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %><% if (tab.value === data.value) { %> yui3-tab-selected<% } %>"><a class="sm-tab-label" href="#<%= tab.anchor %>"><%= tab.label %><% if (tab.icon) { %><span class="sm-fonticon sm-fonticon-small sm-fonticon-<%= tab.icon %>"></span><% } %></a></li><% }); %></ul>'),v=l.compile('<div class="sm-form-field-toggle"<% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %>><button value="off" class="sm-form-field-toggle-item sm-form-field-toggle-item-off<% if (!data.value) { %> yui3-button-selected<% } %>"><%=data.labelOff%></button><button value="on" class="sm-form-field-toggle-item sm-form-field-toggle-item-on<% if (data.value) { %> yui3-button-selected<% } %>"><%=data.labelOn%></button></div>'),h=l.compile('<div class="sm-form-field-action"><% if (data.link) { %><a href="<%= data.link %>" target="<% if (data.targetBlank) { %>_blank<% } %>"<% if (data.dataTestId) { %> data-testid="<%= data.dataTestId %>" <% } %>><%= data.text %><span class="sm-fonticon sm-fonticon-small sm-fonticon-AngleBracketRight"></span></a><% } else { %><%= data.text %><% } %></div>'),g=l.compile('<label class="sm-label"><%= data.label %><% if (data.tooltip) { %><div data-tooltip="<%= data.tooltip %>" class="sm-tooltip-indicator">'+(0,e.default)({icon:"HelpEncircled",iconSize:"small"})+"</div><% } %></label>");const y=s;exports.fieldDescription=y;const T=function(a){return a.type=i(a.type,["text","password","email","hidden"]),a.size=i(a.size,["small","large"]),d(a)};exports.textbox=T;const k=function(t){return t.type=i(t.type,["text","password","email"]),t.size=i(t.size,["small","large"]),n(a.merge(t,{position:t.suffix||t.iconSuffix?"right":"left"}))};exports.textboxLabel=k;const I=c;exports.textarea=I;const A=f;exports.option=A;const S=function(t){var e=o(t.options);return m(a.merge(t,{options:e,optionTmpl:f}))};exports.optgroup=S;const w=function(t){var e=o(t.options);return r(a.merge(t,{options:e,optionTmpl:f,optgroupTmpl:S}))};exports.select=w;const M=function(t){var e=a.Array.flatten([t.value]),l=o(t.options);return p(a.merge(t,{isSelected:function(t){return-1!==a.Array.indexOf(e,t)},options:l,type:"checkbox",orientation:i(t.orientation,["horizontal","vertical"]),checkboxTmpl:u}))};exports.checkboxes=M;const O=u;exports.checkbox=O;const z=function(t){var e=i(t.orientation,["horizontal","vertical"]),l=a.Array.map(t.tabs,(function(t){return a.Lang.isArray(t)?{label:t[0],anchor:t.length>1?t[1]:"",value:t[0]}:(null==t.label&&(t.label=""),t.value=t.label.length?t.label:t.icon,t)}));return void 0===t.value&&(t.value=l[0].value),"vertical"===e?x({value:t.value,tabs:l,dataTestId:t.dataTestId}):b({value:t.value,tabs:l,dataTestId:t.dataTestId})};exports.tabs=z;const C=function(a){var t=a&&(!0===a.value||"on"===a.value);return v({value:t,labelOn:a.labelOn||"On",labelOff:a.labelOff||"Off",dataTestId:a.dataTestId})};exports.toggle=C;const Y=h;exports.action=Y;const D=function(a){return g({label:a.label,tooltip:a.tooltip?a.tooltip:""})};exports.label=D,Object.assign(a.namespace("SM.Templates"),{action:Y,checkbox:O,checkboxes:M,fieldDescription:y,label:D,optgroup:S,option:A,select:w,tabs:z,textarea:I,textbox:T,textboxLabel:k,toggle:C})}(),SM.currentModule=null}),"",{requires:["template","sm-templates-icon"]});
YUI.add("sm-templates-icon",(function(e){SM.currentModule="sm-templates-icon";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const n=e.Template.Micro.compile('<svg class="sm-icon sm-icon-<%= data.iconSize %> sm-icon-<%= data.icon %>" role="presentation"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sm-icon-def-<%= data.iconSize %>-<%= data.icon %>"></use></svg>');e.namespace("SM.Templates").svgIcon=n;var o=n;exports.default=o}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-terms-of-use",(function(e){SM.currentModule="sm-terms-of-use";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-link"));const c="".concat(SM.env.host.http).concat(SM.env.host.main),s=e=>{let t,s,l,{action:u,product:n,...i}=e;switch(n){case"flickr":case"flickrprints":s="".concat("https://www.flickr.com","/help/terms"),l="".concat("https://www.flickr.com","/help/privacy"),t="Flickr";break;default:s="".concat(c,"/about/terms"),l="".concat(c,"/about/privacy"),t="SmugMug"}return r.default.createElement("p",i,"By ",e.action,", you agree to ",t,"'s ",r.default.createElement(a.default,{className:"sm-accent",href:s,target:"_blank","data-testid":"signup_terms_link"},"Terms of Use")," and ",r.default.createElement(a.default,{className:"sm-accent",href:l,target:"_blank","data-testid":"signup_privacy_link"},"Privacy Policy."))};s.displayName="Terms Of Use",s.propTypes={action:e.default.string.isRequired,product:e.default.oneOf(["smugmug","flickr","flickrprints"])},s.defaultProps={product:"smugmug"};var l=s;exports.default=l}(),SM.currentModule=null}),"",{requires:["react","sm-link"]});
YUI.add("sm-test-helpers",(function(e){SM.currentModule="sm-test-helpers";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toTestId=void 0;exports.toTestId=e=>e.toLowerCase().replace(/[\s-]+/g,"_").replace(/['"”.]/g,"")}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-thumbnail-manager",(function(e){SM.currentModule="sm-thumbnail-manager";var t,i,a,s,l,n;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.DOM,i=e.Node,a=e.Lang,s="sm-thumbnail-manager",l={NodeFolder:["NodeID","ParentID","Type","Name","UrlName","UrlPath","IDPath","RemoteID","DateAdded","DateModified","Status","SortMethod","SortDirection","SortIndex","HLSetting","HLImageID","DateAddedDisplay","DateModifiedDisplay","PasswordProtected","PrivacyLevel","HasChildren","Depth","SecurityType","EffectiveSecurityType"],NodeAlbum:["NodeID","ParentID","Type","Name","UrlName","UrlPath","IDPath","RemoteID","DateAdded","DateModified","Status","SortMethod","SortDirection","SortIndex","HLSetting","HLImageID","AlbumID","AlbumKey","DynamicImageCount","Protected","Printable","PasswordProtected","DateAddedDisplay","DateModifiedDisplay","PrivacyLevel","HasImages","SecurityType","EffectiveSecurityType"],NodePage:["NodeID","ParentID","Type","Name","UrlName","UrlPath","IDPath","RemoteID","DateAdded","DateModified","Status","SortMethod","SortDirection","SortIndex","HLSetting","HLImageID","DateAddedDisplay","DateModifiedDisplay","PasswordProtected","PrivacyLevel","SecurityType","EffectiveSecurityType"],Folder:["children","dateUpdated","name","nodeId","parentId","type","subCategoryId","categoryId","categoryType"],Album:["children","albumId","albumKey","categoryId","parentId","dateUpdated","folderId","imageCount","thumbImageId","title","titleSafe"],Image:["BaseUrl","FileName","Format","ImageID","ImageKey","AlbumID","AlbumKey","IsProtected","NewKey","SEOFilename","Serial","Sizes","Status","isDisabled","PrivacyLevel","OriginalWidth","OriginalHeight","External","AlbumPassword","IsVideo","IsArchive"]},n=e.Base.create("sm-thumbnail-manager",e.Base,[],{_hotKeysActive:!1,_selectActive:!1,_keyEvent:null,_debugOverlay:null,_bindSelectedContainer:!1,_lastTarget:null,initializer:function(){this.publish("thumbnailSelectAll",{emitFacade:!0}),this.publish("thumbnailSelectNone",{emitFacade:!0}),this.publish("thumbnailSelect",{emitFacade:!0}),this.publish("thumbnailNavigate",{emitFacade:!0}),this.publish("thumbnailSelectLimitReached",{emitFacade:!0}),this.publish("thumbnailSelectLimitBelow",{emitFacade:!0})},_bindUI:function(){if(!this._eventHandles){var t=e.one("document");this._eventHandles=[e.delegate("dblclick",this._handleThumbClick,this.get("defaultContainer"),".sm-thumbnail a",this),e.delegate("click",this._handleThumbClick,this.get("defaultContainer"),".sm-thumbnail a",this),t.on("keydown",this._handleKeyDownUp,this),t.on("keyup",this._handleKeyDownUp,this),this.on("selectedKeysChange",this._displaySelected,this),this.on("deselectedKeysChange",this._displaySelected,this)]}},syncSelected:function(t){var i=[];a.isArray(t)?(e.Array.each(t,(function(e){var t=e.split("-");i.push(t[0]+"-"+t[1])})),this.set("initialKeys",i)):this.get("selectedKeys")&&(i=e.clone(this.get("selectedKeys")),this.set("initialKeys",i)),this.set("deselectedKeys",[])},add:function(e){var t=this.get("renderType");"default"==t?this._addDefault(e):"selected"==t&&this._addSelected(e)},addToTree:function(e,t){var i=this.get("treeData"),a=this.get("treeKeys");a.push(t),i[t]=e,this.set("treeKeys",a),this.set("treeData",i)},remove:function(e){a.isObject(e)&&(this._addRemoveSelectedData(e,"remove"),this.handleSelectedChange())},removeLimit:function(t){if(t&&!(t<1)){var i=this.get("defaultContainer"),a=this.get("selectedKeys"),s=this.get("selectedData"),l=this.get("selectedByType"),n=this.get("thumbDomIds"),d=a.length,r=d-t,h=null,u=0,c=0,o=null,m=null;if(r>0&&d>0){for(c=0;c<r;c++)(o=a.shift())&&(h=o.split("-"),(u=e.Array.indexOf(l[h[1]],h[0]))>=0&&l[h[1]].splice(u,1),s[o]&&delete s[o],(m=i.one("#"+n[o]))&&m.removeClass("sm-thumbnail-selected"));this.handleSelectedChange()}}},getData:function(t){var i=this.get("thumbData"),a=this.get("thumbKeys");return e.Array.indexOf(a,t)>=0?i[t]:null},getSelectedData:function(t){var i=this.get("selectedData"),a=this.get("selectedKeys");return e.Array.indexOf(a,t)>=0?i[t]:null},getTreeData:function(t){var i,a=this.get("treeData"),s=this.get("treeKeys"),l=["RootFolder","NodeFolder","NodeAlbum"],n=null;return"number"==typeof t||"string"==typeof t&&t.indexOf("-")<0?(e.Array.some(l,(function(i){var l=this.makeUniqueKey(t,i);e.Array.indexOf(s,l)>=0&&(n=a[l])}),this),n):e.Array.indexOf(s,t)>=0?a[t]:"string"==typeof t&&(i=t.substring(0,t.lastIndexOf("-")),e.Array.indexOf(s,i)>=0)?a[i]:null},getTreeBranches:function(e){var t=this.getTreeData(e);return null===t?[]:!0===this.get("nDeep")?this._getNDeepBranches(t):this._getCategoryBranches(t)},getCurrentSelected:function(){var t=this.get("thumbKeys"),i=this.get("selectedKeys"),a=[];return e.Array.each(t,(function(t){e.Array.indexOf(i,t)>=0&&a.push(t)})),a},getLastClickKey:function(){if(!this._lastTarget)return null;var e=this._lastTarget.ancestor(".sm-thumbnail").get("id");return this._getKeyFromDomId(e)},makeUniqueKey:function(e,t,i){var a=t.replace("Node","");return i?e+"-"+a+"-"+i:e+"-"+a},clear:function(){var e=this.get("renderType");this._updateContainers(),"default"==e?this._clearDefault():"selected"==e&&this._clearSelected()},renderThumbs:function(e){var t=this.get("renderType");this._updateContainers(),"default"==t?this._renderDefault(e):"selected"==t&&(this._bindSelectedClick(),this._renderSelected())},renderDefaultThumbs:function(e){this._updateContainers(),this._renderDefault(e)},renderSelectedThumbs:function(){this._updateContainers(),this._bindSelectedClick(),this._renderSelected()},activateHotkeys:function(e){this._hotKeysActive=e},activateSelect:function(e){this._selectActive=e},setRenderType:function(e){return this.set("renderType",e),this},getNumberOfSelectedThumbs:function(){var e=this.get("renderType"),t=null;return"default"==e?t=this.get("defaultContainer"):"selected"==e&&(t=this.get("selectedContainer")),t.all(".sm-thumbnail-selected").size()},handleSelectAction:function(e){var t=this.get("renderType"),i=null,a=this.get("selectedState"),s="sm-thumbnail-"+this.get("selectedType").toLowerCase(),l=null,n=null;switch("default"==t?i=this.get("defaultContainer"):"selected"==t&&(i=this.get("selectedContainer")),e){case"none":this.fire("thumbnailSelectNone"),(l=i.all(".sm-thumbnail-selected")).removeClass("sm-thumbnail-selected"),l.each((function(e){this._addRemoveSelectedData(e,"remove")}),this);break;case"all":this.fire("thumbnailSelectAll"),(l=i.all(".sm-thumbnail."+s)).addClass("sm-thumbnail-selected"),l.each((function(e){this._addRemoveSelectedData(e,"add")}),this),(l=i.all(".sm-thumbnail."+s+".sm-thumbnail-noclick")).removeClass("sm-thumbnail-selected"),l.each((function(e){this._addRemoveSelectedData(e,"remove")}),this);break;case"toggle":this.fire("thumbnailSelectAll"),l=i.all(".sm-thumbnail-selected"),n=i.all(".sm-thumbnail."+s),"all"==a?(n.addClass("sm-thumbnail-selected"),n.each((function(e){this._addRemoveSelectedData(e,"add")}),this)):(l.removeClass("sm-thumbnail-selected"),l.each((function(e){this._addRemoveSelectedData(e,"remove")}),this));break;case"inverse":this.fire("thumbnailSelectInverse"),(l=i.all(".sm-thumbnail."+s)).each((function(e){e.hasClass("sm-thumbnail-selected")?(e.removeClass("sm-thumbnail-selected"),this._addRemoveSelectedData(e,"remove")):(e.addClass("sm-thumbnail-selected"),this._addRemoveSelectedData(e,"add"))}),this)}this._lastTarget=null,this.set("selectedState",e),this.handleSelectedChange()},handleSelectedChange:function(){var e=this.get("selectedKeys"),t=this.get("currentSelected"),i=this.getCurrentSelected().length;this.set("selectedCount",e.length),this._displaySelected(),t!==i&&this.set("currentSelected",i)},_getNDeepBranches:function(t){var i=[],a=[];return t.typeInfo.hasOwnProperty("IDPath")&&(i=t.typeInfo.IDPath.split(",")),i.push(t.typeId),e.Array.each(i,(function(e){var t=this.getTreeData(e),i={id:null,type:null,name:null};if(t){switch(i.id=t.typeId,t.type){case"RootFolder":i.type="RootFolder",i.name=t.typeInfo.name;break;case"NodeFolder":i.type="Folder",i.name=t.typeInfo.Name;break;case"NodeAlbum":i.type="Album",i.name=t.typeInfo.Name,i.key=t.typeInfo.AlbumKey;break;case"Folder":i.type="Folder",i.name=t.typeInfo.name;break;case"Album":i.type="Album",i.name=t.typeInfo.title,i.key=t.typeInfo.albumKey;break;case"Image":i.type="Image",i.name=t.typeInfo.fileName}a.push(i)}}),this),a},_getCategoryBranches:function(e){var t,i=this.get("treeData"),a=null,s=null,l=!1,n=0,d=[];for(t=e.typeId+"-"+e.type;!1===l;){if(i.hasOwnProperty(t)?s=i[t]:i.hasOwnProperty(t+"-Album")?s=i[t+"-Album"]:i.hasOwnProperty(t+"-Folder")?s=i[t+"-Folder"]:console.log("could not find parentId: ",t),!s)return d;switch((a={id:null,type:null,name:null}).id=s.typeId,s.type){case"RootFolder":case"Folder":a.type="Folder",a.name=s.typeInfo.name;break;case"Album":a.type="Album",a.name=s.typeInfo.title,a.key=s.typeInfo.albumKey;break;case"Image":a.type="Image",a.name=s.typeInfo.fileName}d.push(a),null!==s.typeInfo.parentId?t=s.typeInfo.parentId:l=!0,s=null,++n>8&&(l=!0)}return d.reverse()},getAspect:function(e,t){var i=[parseInt(e,10),parseInt(t,10)];return Math.floor(Math.max(i[0],i[1])/Math.min(i[0],i[1])*100)/100},getLargestSize:function(t,i){var a=["O","X3","X2","XL","L","M","S"],s=!1;return i||(a=a.slice(1),console.log("not including the orig",a)),e.Array.each(a,(function(e){!1===s&&t.hasOwnProperty(e)&&(s=t[e])})),s},checkSize:function(e,t,i,a,s){return s?e==i&&t==a||e==a&&t==i:e>=i&&t>=a||e>=a&&t>=i},_updateContainers:function(){var t=this.get("defaultContainer"),i=this.get("selectedContainer");a.isString(t)&&this.set("defaultContainer",e.one(t)),a.isString(i)&&this.set("selectedContainer",e.one(i))},_addDefault:function(e){var t=this.get("thumbData"),i=this.get("thumbKeys"),a=this._getUniqueKey(e);e.rendered=!1,e=this._minimizeData(e),i.push(a),t[a]=e,"Image"!==e.type&&this.addToTree(e,a),this.set("thumbData",t),this.set("thumbKeys",i)},_addSelected:function(e){var t=this.get("selectedKeys"),i=this.get("selectedData"),a=this.get("selectedByType"),s=this._getUniqueKey(e);e.rendered=!1,e=this._minimizeData(e),t.push(s),i[s]=e,"NodeAlbum"==e.type?a[e.type.replace("Node","")].push(e.typeInfo.RemoteID):a[e.type.replace("Node","")].push(e.typeId),this.set("selectedKeys",t),this.set("selectedData",i),this.set("selectedByType",a),this.handleSelectedChange()},_clearDefault:function(){var e=this.get("defaultContainer");a.isObject(e)&&e.setContent(""),this.set("thumbKeys",[]),this.set("thumbData",{}),this.set("thumbDomIds",{})},_clearSelected:function(){this.set("selectedKeys",[]),this.set("selectedState","none"),this.set("selectedData",{}),this.set("selectedCount",0),this.set("selectedByType",{Image:[],Album:[],Folder:[],Page:[]}),this.set("deselectedKeys",[])},_bindSelectedClick:function(){!0!==this._bindSelectedContainer&&(e.delegate("click",this._handleThumbClick,this.get("selectedContainer"),".sm-thumbnail a",this),this._bindSelectedContainer=!0)},_renderDefault:function(t){var i=this.get("thumbData"),a=this.get("defaultContainer"),s=this.get("thumbSize"),l=this.get("selectedData"),n=this.get("thumbDomIds"),d=null,r=null,h=null!==t?t:0,u=parseInt(this.get("currentSelected"),10),c=0===h?0:u,o=this.get("disableThumbOverflow");a.hasClass("yui3-g")||a.addClass("yui3-g"),0===h&&(this._lastTarget=null),e.Object.each(i,(function(t,h){!1===t.rendered&&(d=e.merge(t,{size:s},{disableThumbOverflow:o}),l[h]&&(d.selected=!0,c++),(r=new e.SM.Thumbnail(d)).render(a),i[h].rendered=!0,n[h]=r.get("id"))})),c!==u&&this.set("currentSelected",c)},_renderSelected:function(){var t=this.get("selectedContainer"),i=this.get("thumbSize"),a=this.get("selectedData"),s=null,l=[],n=null;t&&(this.set("renderData",e.clone(a)),t.setContent(""),e.Object.each(a,(function(a){if("NodeAlbum"===a.type){var d,r=this.get("treeData");e.Object.each(r,(function(e){(a.typeInfo.AlbumID&&e.typeId===a.typeId||e.typeInfo.NodeID===a.typeId)&&(d=e)})),a=d||a}s=e.merge(a,{size:i,selected:!0}),new e.SM.Thumbnail(s).render(t),n=null,"Album"==s.type||"NodeAlbum"===s.type?n=s.typeInfo.albumKey||s.typeInfo.AlbumKey:"Image"==s.type&&(n=s.typeInfo.imageKey),l.push(this.makeUniqueKey(s.typeId,s.type,n))}),this))},_minimizeData:function(e){var t=e.typeInfo,i=e.hasOwnProperty("imageInfo")?e.imageInfo:null,a=null,s=null;switch(e.type){case"NodeFolder":case"Folder":case"NodePage":a=this._trimFields(t,e.type),null!==i&&!(s=this._trimFields(i,"Image")).Sizes.Fo&&s.Sizes.Ti&&(s.Sizes.Fo={ext:s.Sizes.Ti.ext,width:Math.floor(.75*s.Sizes.Ti.width),height:Math.floor(.75*s.Sizes.Ti.height),usable:s.Sizes.Ti.usable}),"Folder"===e.type?a.nodeId:a.NodeID;break;case"NodeAlbum":case"Album":a=this._trimFields(t,e.type),null!==i&&(s=this._trimFields(i,"Image"));break;case"Image":(a=s=this._trimFields(t,"Image")).Caption=t.Caption,a.Keywords=t.Keywords}return{rendered:!1,type:e.type,typeId:e.typeId,typeInfo:a,imageInfo:s}},_trimFields:function(e,t){var i={},s=l[t],n=null,d=0;if(a.isArray(s))for(d=0;d<s.length;d++)n=s[d],e.hasOwnProperty(n)&&(i[n]=e[n]);return i},_getUniqueKey:function(e){var t=e.typeId,i=e.type;return"NodeAlbum"==e.type&&(t=e.typeInfo.RemoteID),this.makeUniqueKey(t,i)},_getThumb:function(e,t){var i=e+"-"+t,a=this.get("renderType"),s=this.get("renderData"),l=this.get("thumbData");return"default"==a?l[i]:"selected"==a&&s[i]},_getKeyFromDomId:function(e){var t,i=this.get("thumbDomIds");for(t in i)if(i[t]==e)return t;return!1},_handleKeyDownUp:function(e){if("keydown"===e.type&&!1!==e.shiftKey)this._keyEvent=e;else if("keyup"===e.type){if(this._keyEvent=null,!1===this._hotKeysActive)return;68===e.keyCode&&(e.preventDefault(),this.handleSelectAction("none")),0!==this.get("limit")&&"selected"!=this.get("renderType")||(73===e.keyCode?(e.preventDefault(),this.handleSelectAction("inverse")):65===e.keyCode&&(e.preventDefault(),this.handleSelectAction("all")))}},_handleThumbClick:function(t){var i=t.target,a=this.get("limit"),s=i.ancestor(".sm-thumbnail"),l=this.get("selectedType"),n=s.getAttribute("data-type"),d=n===l,r=s.hasClass("sm-thumbnail-active"),h=this.get("renderType");if(l.toLowerCase()==e.SM.Picker.MODE_NODE&&(d=!0),("dblclick"===t.type||r&&("Folder"===n||"Album"==n))&&("Album"!==n||!d)&&"selected"!=h)return t.halt(!0),void this.fire("thumbnailNavigate",{origTarget:i});"click"===t.type&&!0===this._selectActive&&!0===d?(this._removeAllActiveFlags(),this._keyEvent&&this._keyEvent.shiftKey&&1!==a&&null!==this._lastTarget?this._selectThumbRange(i):this._selectSingleThumb(i),this._lastTarget=i,t.halt(!0),this.fire("thumbnailSelect",{origTarget:i})):"click"!==t.type||r||!1!==this._selectActive&&(!0!==this._selectActive||!1!==d)||(this._removeAllActiveFlags(),s.addClass("sm-thumbnail-active"))},_removeAllActiveFlags:function(){this.get("defaultContainer").all(".sm-thumbnail-active").removeClass("sm-thumbnail-active")},_selectSingleThumb:function(t){var i,a=t.ancestor(".sm-thumbnail"),s=this.get("selectedType"),l=a.getAttribute("data-type")===s,n=this.get("selectedCount"),d=this.get("limit"),r=this.getEvent("thumbnailSelectLimitReached"),h=a.getData("type"),u=a.getData("id");if("Image"!=h||"selected"===this.get("renderType")||!(i=this.getData(u+"-"+h)).hasOwnProperty("imageInfo")||!i.imageInfo.isDisabled){if(s.toLowerCase()==e.SM.Picker.MODE_NODE&&(l=!0),a.hasClass("sm-thumbnail-selected")||!0!==l)a.removeClass("sm-thumbnail-selected"),a.addClass("sm-thumbnail-active"),this._addRemoveSelectedData(a,"remove"),d>1&&!0===r.fired&&n-1<=d&&this.fire("thumbnailSelectLimitBelow",{limit:d});else{if(d>1){if(n>=d)return;n+1==d&&this.fire("thumbnailSelectLimitReached",{limit:d})}else 1==d&&this._selectNone();a.addClass("sm-thumbnail-selected"),a.addClass("sm-thumbnail-active"),this._addRemoveSelectedData(a,"add")}this.handleSelectedChange()}},_selectThumbRange:function(e){var t,i,a,s,l,n=this._getCurrentNodeList(),d=e.ancestor(".sm-thumbnail"),r=d.get("id"),h=this.get("limit"),u=h-this.get("selectedCount"),c=this.getEvent("thumbnailSelectLimitReached"),o=null,m=!1,y=!1,g=0,b={},f=[],p=0;h>1&&this.get("selectedCount")>=h?this.fire("thumbnailSelectLimitReached",{limit:h}):null!==this._lastTarget&&(o=this._lastTarget.ancestor(".sm-thumbnail"),(a=o.get("id"))!==r&&(n.each((function(e){var t=e.get("id");if(t!==r&&t!==a||f.push(t),2==f.length)return!0;t===r?b.target=g:t===a&&(b.last=g),g++}),this),t=f[0],i=f[1],s=d.hasClass("sm-thumbnail-selected"),l=o.hasClass("sm-thumbnail-selected"),y=!s&&!l||s&&l||b.target<b.last?!s:!!l,n.each((function(e){var a=e.get("id"),s=e.hasClass("sm-thumbnail-selected"),l=e.getAttribute("data-type")==this.get("selectedType"),n=!e.hasClass("sm-thumbnail-noclick");if(a===t&&(m=!0),!0===m){if(!0===y&&!1===n);else if(!0===y&&!1===s&&!0===l){if(p++,e.addClass("sm-thumbnail-selected"),this._addRemoveSelectedData(e,"add"),h>1&&p>=u)return this.fire("thumbnailSelectLimitReached",{limit:h}),m=!1,!0}else!1===y&&!0===s&&(e.removeClass("sm-thumbnail-selected"),this._addRemoveSelectedData(e,"remove"),h>1&&!0===c.fired&&this.get("selectedCount")<=h&&this.fire("thumbnailSelectLimitBelow",{limit:h}));if(a==i)return m=!1,!0}}),this),this.handleSelectedChange()))},_selectNone:function(){var e=this.get("defaultContainer").all(".sm-thumbnail-selected"),t=this.get("selectedKeys");e.removeClass("sm-thumbnail-selected"),this.set("deselectedKeys",t),this.set("selectedKeys",[]),this.set("selectedState","none"),this.set("selectedData",{}),this.set("selectedCount",0),this.set("selectedByType",{Image:[],Album:[],Folder:[],Page:[]})},_getCurrentNodeList:function(){var e=this.get("renderType");return"default"===e?this.get("defaultContainer").all(".sm-thumbnail"):"selected"===e?this.get("selectedContainer").all(".sm-thumbnail"):i.nodeList()},_addRemoveSelectedData:function(t,i){var a=this.get("defaultContainer"),s=t.getAttribute("data-id"),l=t.getAttribute("data-type"),n=this._getThumb(s,l),d=this.get("thumbDomIds"),r=this.get("initialKeys"),h=this.get("deselectedKeys"),u=this.get("selectedKeys"),c=this.get("selectedData"),o=this.get("selectedByType"),m=s+"-"+l,y=null,g=null;if("Album"===l&&"Node"===this.get("selectedType")){var b=this.get("renderData");e.Array.each(e.Object.keys(b),(function(e){b[e].typeInfo.NodeID===s&&(m=e)}))}"add"===i?((y=e.Array.indexOf(u,m))<0&&(u.push(m),o[l].push(s),c[m]=n,(g=a.one("#"+d[m]))&&!g.hasClass("sm-thumbnail-selected")&&g.addClass("sm-thumbnail-selected")),(y=e.Array.indexOf(h,m))>=0&&h.splice(y,1)):"remove"===i&&((y=e.Array.indexOf(u,m))>=0&&u.splice(y,1),(y=e.Array.indexOf(o[l],s))>=0&&o[l].splice(y,1),c[m]&&delete c[m],(g=a.one("#"+d[m]))&&g.removeClass("sm-thumbnail-selected"),(y=e.Array.indexOf(r,m))>=0&&h.push(m)),this.set("selectedKeys",u),this.set("selectedData",c),this.set("selectedByType",o)},_displaySelected:function(){if(!1!==this.get("debug")){null===this._debugOverlay&&(this._debugOverlay=new e.SM.Overlay({title:"ThumbManager Debug",bodyContent:"debug",className:"managerDebug",visible:!1,zIndex:1010,centered:!1,width:300,height:170,x:Math.floor(t.winWidth()/2)-150,y:t.winHeight()-200,draggable:!0,close:!0}),this._debugOverlay.get("boundingBox").addClass(s+"-debug"),this._debugOverlay.render("."+s),this._debugOverlay.show());var i=this.get("initialKeys"),a=this.get("selectedKeys"),l=this.get("deselectedKeys"),n="";this._debugOverlay&&(n='<div class="yui3-u-1-3"><h2>selected</h2><ul>',e.Array.each(a,(function(e){n+="<li>"+e+"</li>"})),n+="</ul></div>",n+='<div class="yui3-u-1-3"><h2>de-selected</h2><ul>',e.Array.each(l,(function(e){n+="<li>"+e+"</li>"})),n+="</ul></div>",n+='<div class="yui3-u-1-3"><h2>initial</h2><ul>',e.Array.each(i,(function(e){n+="<li>"+e+"</li>"})),n+="</ul></div>",this._debugOverlay.set("bodyContent",n))}}},{CSS_PREFIX:s,ATTRS:{nDeep:{value:!1},debug:{value:!1},defaultContainer:{value:null},disableThumbOverflow:{value:!1},selectedContainer:{value:null},selectedType:{value:""},limit:{value:0,setter:function(e){return parseInt(e,10)}},thumbKeys:{value:[]},thumbData:{value:{}},thumbDomIds:{value:{}},thumbSize:{value:"Ti"},treeKeys:{value:[]},treeData:{value:{}},renderType:{value:"default"},renderData:{value:{}},selectedKeys:{value:[]},selectedData:{value:{}},selectedState:{value:"none"},selectedCount:{value:0},currentSelected:{value:0},selectedByType:{value:{Image:[],Album:[],Folder:[]}},deselectedKeys:{value:[]},initialKeys:{value:[]}},EVENT_SELECT:s+":thumbnailSelect",EVENT_NAVIGATE:s+":thumbnailNavigate",EVENT_LIMIT_REACHED:s+":thumbnailSelectLimitReached",EVENT_LIMIT_BELOW:s+":thumbnailSelectLimitBelow"}),e.namespace("SM").ThumbnailManager=n,SM.currentModule=null}),"",{requires:["base","dom","event","node","overlay","sm-overlay","sm-thumbnail"]});
YUI.add("sm-thumbnail-preview",(function(e){SM.currentModule="sm-thumbnail-preview";var t,i,n,s,a,h,l,o;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Node,i=e.Lang,n=e.SM,a=(s="sm-thumbnail-preview")+"-body",h=s+"-prevnext",l=s+"-caption",o=e.Base.create("sm-thumbnail-preview",e.Overlay,[],{_previewOpen:null,_handles:null,_hovering:!1,_hoverTimer:null,BOUNDING_TEMPLATE:"<div></div>",initializer:function(e){this._handles=null,e.hasOwnProperty("constrainTo")&&this.set("constrain",e.constrainTo),this.set("visible",!1),this.set("zIndex",1011),this.set("fillHeight",null),this.publish("thumbnailPreviewClose",{emitFacade:!0}),this.publish("thumbnailPreviewTooSmall",{emitFacade:!0})},renderUI:function(){var i=t.create('<div class="sm-thumbnail-preview-filename"><div class="sm-thumbnail-preview-filename-content"></div></div><div class="yui3-g"><div class="yui3-u-1-2 sm-thumbnail-preview-prevnext"></div><div class="yui3-u-1-2 sm-thumbnail-preview-close"></div></div>'),n=i.one("."+h),a=i.one(".sm-thumbnail-preview-close"),l=this.get("boundingBox");n.append(e.SM.Templates.button({icon:"ArrowLeft",size:"small",value:"previewPrev"})).append(e.SM.Templates.button({icon:"ArrowRight",size:"small",value:"previewNext"})),a.append(e.SM.Templates.button({icon:"XCrossEncircled",size:"small",value:"previewClose"})),this.set("headerContent",i),this.set("bodyContent",t.create('<div class="sm-thumbnail-preview-body"><div class="sm-thumbnail-preview-image"></div><div class="sm-thumbnail-preview-caption"><div class="sm-thumbnail-preview-caption-content"></div></div>')),l.all("."+h+" .sm-button").hide(),l.setStyles({left:90,top:110}),this.get("boundingBox").addClass(s)},bindUI:function(){this._attachUIListeners()},_attachUIListeners:function(){var t=this.get("boundingBox"),i=t.one("."+a),n=e.one("document");this._handles=[e.delegate("click",this._handleButtonClick,t,".sm-button",this),n.on("keydown",this._handleKeyDownUp,this),n.on("keyup",this._handleKeyDownUp,this),i.on("mouseover",this._handlePreviewHover,this),i.on("mouseout",(function(){this._hoverTimer&&this._hoverTimer.cancel(),this._hoverCaption(!1)}),this)]},_detachUIListeners:function(){e.each(this._handles,(function(e){e.detach()})),this._handles=null},show:function(e){var t=this.get("thumbManager"),n="thumbnail"==e?t.getCurrentSelected():t.get("selectedKeys"),s=t.getLastClickKey(),a=this.get("boundingBox").all("."+h+" .sm-button");return i.isArray(this._handles)||this._attachUIListeners(),this.set("currentThumbs",n),this.set("lastClick",s),n.length>0&&(this._updatePreviewImage(n[0])?(1==n.length?a.hide():a.show(),this._previewOpen=!0,this.set("visible",!0),!0):(this.fire("thumbnailPreviewTooSmall"),this.hide(),!1))},hide:function(){this._previewOpen=!1,this.set("visible",!1),this.fire("thumbnailPreviewClose")},_handlePreviewHover:function(t){!1===this._hovering&&(this._hoverTimer&&this._hoverTimer.cancel(),this._hovering=!0,this._hoverTimer=e.later(500,this,this._hoverCaption,"mouseover"==t.type))},_hoverCaption:function(e){var t=this.get("boundingBox").one("."+l),i=this.get("captionHeight"),n=this.get("boundingBox").one(".sm-thumbnail"),s=n.getAttribute("data-id")+"-"+n.getAttribute("data-type"),a=this.get("thumbManager").getSelectedData(s);if(this._hoverTimer=null,this._hovering=!1,""===a.imageInfo.FileName)return t.setStyle("height",0),void t.addClass("sm-hidden");!0===e?(null===i&&(t.hasClass("sm-hidden")&&t.removeClass("sm-hidden"),t.setStyle("height","auto"),i=t.get("offsetHeight"),t.setStyle("height",0),t.addClass("sm-hidden"),this.set("captionHeight",i)),t.transition({duration:.3,delay:0,easing:"ease-in",height:{value:i+"px"},on:{start:function(){t.removeClass("sm-hidden")},end:function(){}}})):t.transition({duration:.3,delay:0,easing:"ease-out",height:{value:0},on:{start:function(){},end:function(){t.addClass("sm-hidden")}}})},_handleButtonClick:function(e){switch(e.currentTarget.getData("value")){case"previewPrev":this._handlePrevNext(e,"prev");break;case"previewNext":this._handlePrevNext(e,"next");break;case"previewClose":this.hide()}},_handlePrevNext:function(t,n){var s,a=t.currentTarget.getAttribute("data-value"),h=this.get("currentThumbs"),l=this.get("boundingBox").one(".sm-thumbnail"),o=l.getAttribute("data-id")+"-"+l.getAttribute("data-type"),r=null,u=null;u=i.isString(n)?n:a,s=e.Array.indexOf(h,o),"prev"==u?((r=s-1)<0&&(r=h.length-1),this._updatePreviewImage(h[r])):"next"==u&&((r=s+1)>=h.length&&(r=0),this._updatePreviewImage(h[r]))},_handleKeyDownUp:function(e){!1!==this._previewOpen&&"keyup"==e.type&&(27===e.keyCode?(e.halt(!0),this.hide()):39===e.keyCode?(e.halt(!0),this._handlePrevNext(e,"next")):37===e.keyCode&&(e.halt(!0),this._handlePrevNext(e,"prev")))},_updatePreviewImage:function(t){var i,s,h,o=this.get("thumbManager").getSelectedData(t),r=o.imageInfo.Sizes,u=this.get("boundingBox"),d=u.one(".sm-thumbnail-preview-image"),m=u.one("."+a),v=u.one("."+l),c=u.one(".sm-thumbnail-preview-caption-content"),g=this.get("constrain"),p=g.get("offsetWidth"),b=g.get("offsetHeight"),w=!1,_="L";return d.setContent(""),e.Array.each(["L","M","S"],(function(e){!1===w&&r.hasOwnProperty(e)&&r[e].width+14<=p&&r[e].height+42<=b&&(_=e,w=!0)})),!1!==w&&(o.fileHover=!1,o.size=_,new n.Thumbnail(o).render(d),u.setStyles({left:90,top:110}),i=r[_].width,s=r[_].height,this.set("width",i+14),this.set("height",s+42),m.ancestor(".yui3-widget-bd").setStyles({width:i+2,height:s+2}),d.one(".sm-thumbnail-thumb").setStyles({width:i,height:s}),d.one(".sm-thumbnail-thumb-image").setStyles({paddingTop:0,paddingLeft:0}),h="",""!==o.imageInfo.FileName&&(h+='<div class="sm-thumbnail-preview-caption-photo-data"><b>Filename:</b> ',h+=o.imageInfo.FileName+"."+o.imageInfo.Format+"</div>"),v.setStyle("height",0),v.addClass("sm-hidden"),""!==h&&(c.setContent(h),this.set("captionHeight",null)),!0)}},{ATTRS:{thumbManager:{value:null},currentThumbs:{value:[]},captionHeight:{value:null},lastClick:{value:null}},CSS_PREFIX:s}),e.namespace("SM").ThumbnailPreview=o,e.namespace("SM").ThumbnailPreview.EVENT_PREVIEW_CLOSE=s+":thumbnailPreviewClose",e.namespace("SM").ThumbnailPreview.EVENT_PREVIEW_TOO_SMALL=s+":thumbnailPreviewTooSmall",SM.currentModule=null}),"",{requires:["base","node","sm-button","sm-thumbnail","sm-tooltip-old","transition","widget"]});
YUI.add("sm-thumbnail",(function(e){SM.currentModule="sm-thumbnail";var t,s,i,a,l,n,d,o,r,h,m,g,u,c,p,b,y,S;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=SM.import("lodash").template('<a class="sm-thumbnail-content" title="<%- title %>"></a>'),s=e.Node,i=e.Lang,a=SM,l="px",n="{base}{albumId}_{albumKey}/{imageId}_{imageKey}#{imageId}_{imageKey}-A-LB",d={OPEN:"Open",PROCESS:"Preprocess",HIDDEN:"Hidden"},o={LARGE:{name:"L",width:800,height:600,ext:"jpg"},MEDIUM:{name:"M",width:600,height:450,ext:"jpg"},SMALL:{name:"S",width:400,height:300,ext:"jpg"},THUMB:{name:"Th",width:150,height:150,ext:"jpg"},TINY:{name:"Ti",width:100,height:100,ext:"jpg"},FOLDER:{name:"Fo",width:75,height:75,ext:"jpg"}},r={L:"LARGE",M:"MEDIUM",S:"SMALL",Th:"THUMB",Ti:"TINY",Fo:"FOLDER"},m='<div class="'+(h="sm-thumbnail")+'-thumb-image"><img src="'+(a.env.host?a.env.host.spacerGif:a.hostConfig.imgPrefix+"spacer.gif")+'" class="sm-image-img" /></div>',g='<div class="sm-thumbnail-new-badge"></div>',u='<span class="sm-fonticon sm-fonticon-{securityType} {thumbType}"></span>',c='<span class="sm-thumbnail-new-badge-text {thumbType} {privacy} {isProtected} {isEmpty} {isProcessing} {isDisabled}">{badgeText}</span>',p='<div class="'+h+'-title"><h4>{name}</h4><p class="sm-thumbnail-date-modified">{content}</p></div>',b='<div class="'+h+'-title"><h4>{title}</h4><p class="sm-thumbnail-date-modified">{content}</p></div>',y={Folder:'<div class="'+h+'-thumb"><span class="sm-fonticon {folderClass}"></span></div>',NodeFolder:'<div class="'+h+'-thumb"><span class="sm-fonticon {folderClass}"></span></div>',Album:'<div class="'+h+'-thumb"><div class="'+h+'-thumb-ghost1"></div><div class="'+h+'-thumb-ghost2"></div></div>',NodeAlbum:'<div class="'+h+'-thumb"><div class="'+h+'-thumb-ghost1"></div><div class="'+h+'-thumb-ghost2"></div></div>',Image:'<div class="'+h+'-thumb"></div>',NodePage:'<div class="'+h+'-thumb"><span class="sm-fonticon {pageClass}"></span></div>'},S=e.Base.create("sm-thumbnail",e.Widget,[],{_hovering:!1,_hoverTimer:null,CONTENT_TEMPLATE:null,initializer:function(){this._publishEvents()},destructor:function(){},renderUI:function(){this._renderImage()},bindUI:function(){var e=this.get("boundingBox");"Image"==this.get("type")&&!0===this.get("fileHover")&&(e.on("mouseover",this._handleThumbHover,this),e.on("mouseout",(function(){this._hoverTimer&&this._hoverTimer.cancel(),this._hoverFilename(!1)}),this))},syncUI:function(){this._setBoundingBoxSize()},getUniqueKey:function(){var e=null,t=this.get("typeInfo"),s=this.get("type");switch(s){case"Folder":e=t.nodeId;break;case"Album":e=t.albumId;break;case"Image":e=t.imageId}return e+"-"+s},_renderImage:function(){var a,n=this.get("boundingBox"),h=this.get("typeInfo"),S=this.get("imageInfo"),v=this.get("size"),f=S&&S.Sizes&&S.Sizes[v]?S.Sizes[v]:o[r[v]],I=this.get("type"),N="Folder"==I||"NodeFolder"==I||"NodePage"==I?"Fo":v,T=h.hasOwnProperty("EffectiveSecurityType")&&1!=h.EffectiveSecurityType,w=h.hasOwnProperty("PrivacyLevel")&&2==h.PrivacyLevel,P=h.hasOwnProperty("PrivacyLevel")&&3==h.PrivacyLevel,C=1024==h.Type,D=!0,z=null,E=null,M=null,F=null,A=0,L=null,_=(e.config.doc.createDocumentFragment(),null);if(D="NodeFolder"==I?h.hasOwnProperty("HasChildren")?!h.HasChildren:null===S:"NodeAlbum"==I&&h.hasOwnProperty("HasImages")?!h.HasImages:null===S,S&&S.Sizes&&S.Sizes.hasOwnProperty(N)?f=S.Sizes[N]:r.hasOwnProperty(N)?f=o[r[N]]:v==parseInt(v,10)?(v=parseInt(v,10),(f=S.Sizes.S).custom=!0,f.width>=f.height?(f.aspect=f.width/f.height,f.width=v,f.height=Math.round(v/f.aspect)):(f.aspect=f.height/f.width,f.width=Math.round(v/f.aspect),f.height=v),N=f.width+"x"+f.height,S.Sizes[N]=f,this.set("size",N),this.set("imageInfo",S)):2==v.split("x").length&&(N=v,v=v.split("x"),(f=S.Sizes.S).custom=!0,f.width=parseInt(v[0],10),f.height=parseInt(v[1],10),S.Sizes[N]=f,this.set("imageInfo",S)),a={"badges-classname":this.get("showBadges")?this.getClassName("badges"):this.getClassName("badges-hidden"),"play-classname":this.getClassName("play"),"link-classname":this.getClassName("link"),"name-classname":this.getClassName("display-name"),"image-width":f.width,"image-height":f.height,folderClass:D?"sm-fonticon-Folder2":"sm-fonticon-Folder",pageClass:"sm-fonticon-Document"},"Album"==I&&h.AlbumID&&(a.AlbumID=h.AlbumID),z=s.create(i.sub(y[I],e.merge(S,a))),null!==S&&S.Status===d.PROCESS)(E=s.create(i.sub(m,null))).one("img").setStyles({width:f.width+l,height:f.height+l}),n.addClass(this.getClassName("status-process")),z.append(E);else if(null!==S&&S.Sizes&&S.Sizes[N]){var x=o.SMALL.name;N!==o.THUMB.name&&N!==o.TINY.name&&(x=N),E=s.create(i.sub(m,S)),"Folder"==I||"NodeFolder"==I||"NodePage"==I?E.one("img").setStyles({background:"url("+this.getUrlForSize(x,S)+") center center / cover no-repeat",width:o.FOLDER.width+l,height:o.FOLDER.height+l}):E.one("img").setStyles({background:"url("+this.getUrlForSize(x,S)+") center center / cover no-repeat",width:f.width+l,height:f.height+l}),z.append(E)}else null!==S&&S.Sizes&&!S.Sizes[N]?("Folder"!=I&&"NodeFolder"!=I&&"NodePage"!=I||(f.width=80,f.height=65),(E=s.create(i.sub(m,null))).one("img").setStyles({width:f.width+l,height:f.height+l}),E.one("img").addClass(this.getClassName("status-missing")),z.append(E)):null!==S&&!T||"Album"!==I&&"NodeAlbum"!==I||((E=s.create(i.sub(m,null))).one("img").setStyles({width:f.width+l,height:f.height+l}),D&&E.one("img").addClass("emptyalbum_ti"),z.append(E));switch("Folder"!=I&&"NodeFolder"!=I&&"NodePage"!=I||(N=v),I){case"Folder":F="",h.hasOwnProperty("children")&&null!==h.children&&e.Array.each([{key:"categories",single:"category",multiple:"categories"},{key:"subcategories",single:"subcategory",multiple:"subcategories"},{key:"folders",single:"folder",multiple:"folders"},{key:"albums",single:"gallery",multiple:"galleries"}],(function(e){_=e.key,A>=2||h.children.hasOwnProperty(_)&&i.isNumber(h.children[_])&&(F.length>0&&(F+=", "),F+=h.children[_],F+=1==h.children[_]?" "+e.single:" "+e.multiple,A++)})),""===F&&(F="Empty"),M=s.create(i.sub(p,{name:h.name,content:F}));break;case"NodeFolder":case"NodePage":F="",h.hasOwnProperty("DateModifiedDisplay")&&null!==h.DateModifiedDisplay?F="Modified: "+h.DateModifiedDisplay:h.hasOwnProperty("DateModified")&&null!==h.DateModified&&(F="Modified: "+h.DateModified.split(" ").slice(0,1)),""===F&&(F="Empty"),M=s.create(i.sub(p,{name:h.Name,content:F})),(T||w||P)&&(L=s.create(g),T&&L.append(s.create(i.sub(u,{thumbType:"NodeFolder"===I?"Folder":"Page",securityType:2==h.EffectiveSecurityType?"FolderLock":"FolderUser"}))),w&&L.append(s.create(i.sub(c,{thumbType:"NodeFolder"===I?"Folder":"Page",privacy:"Unlisted",badgeText:"UNLISTED",isProtected:T?"isProtected":"",isEmpty:D?"Empty":"",isDisabled:"",isProcessing:""}))),P&&L.append(s.create(i.sub(c,{thumbType:"NodeFolder"===I?"Folder":"Page",privacy:"Private",badgeText:"PRIVATE",isProtected:T?"isProtected":"",isEmpty:D?"Empty":"",isDisabled:"",isProcessing:""}))));break;case"Album":M=s.create(i.sub(b,{title:h.title,titleSafe:h.titleSafe,content:"Updated: "+h.dateUpdated}));break;case"NodeAlbum":F="",h.hasOwnProperty("DateModifiedDisplay")&&null!==h.DateModifiedDisplay?F="Updated: "+h.DateModifiedDisplay:h.hasOwnProperty("DateModified")&&null!==h.DateModified&&(F="Updated: "+h.DateModified.split(" ").slice(0,1)),""===F&&(F=h.DynamicImageCount+" Photos"),M=s.create(i.sub(b,{title:h.Name,titleSafe:h.UrlName,content:F})),C?(L=s.create(g)).append(s.create(i.sub(u,{thumbType:"Gallery",securityType:"Gallery2Lock"}))):T||w||P?(L=s.create(g),T&&L.append(s.create(i.sub(u,{thumbType:"Gallery",securityType:2==h.EffectiveSecurityType?"GalleryLock":"GalleryUser"}))),w&&L.append(s.create(i.sub(c,{thumbType:"Gallery",privacy:"Unlisted",badgeText:"UNLISTED",isProtected:T?"isProtected":"",isEmpty:D?"Empty":"",isDisabled:"",isProcessing:""}))),P&&L.append(s.create(i.sub(c,{thumbType:"Gallery",privacy:"Private",badgeText:"PRIVATE",isProtected:T?"isProtected":"",isEmpty:D?"Empty":"",isDisabled:"",isProcessing:""})))):D&&(L=s.create(g)).append('<span class="sm-fonticon sm-fonticon-Gallery2"></span>');break;case"Image":var U,O;!0===this.get("fileHover")&&(M=s.create(i.sub('<div class="sm-thumbnail-filename"><span class="sm-thumbnail-filename-content">{filename}</span></div>',{filename:S.FileName+"."+S.Format}))).addClass("sm-hidden"),S.IsVideo&&(U="VideoCamera"),!0===S.IsArchive&&(U="Vault"),!0===S.isDisabled&&(O=!0,this.set("clickable",!1)),S.Status===d.PROCESS&&(U="ImageProcessing2"),S.Status===d.HIDDEN&&(U="Hide"),(U||O)&&(L=s.create(g),U&&L.append(s.create(i.sub('<span class="sm-fonticon sm-fonticon-{icon}"></span>',{icon:U}))),O?L.append(i.sub(c,{badgeText:"Image too small for selected product",isDisabled:"isDisabled",isEmpty:D?"Empty":"",isProcessing:"",isProtected:"",thumbType:"Image",privacy:""})):S.Status===d.PROCESS&&L.append(i.sub(c,{badgeText:"PROCESSING",isDisabled:"",isEmpty:D?"Empty":"",isProcessing:"isProcessing",isProtected:"",privacy:"",thumbType:"Image"})))}f.hasOwnProperty("custom")&&!0===f.custom&&z.setStyles({width:f.width,height:f.height});var B=n.appendChild(t({title:h.Name}));B.append(z),B.append(M),null!==L&&B.append(L),"Album"!==I&&"NodeAlbum"!==I||this._centerImage(N),this._setBoundingBoxClasses("",N)},_setBoundingBoxSize:function(){var e=this.get("boundingBox"),t=this.get("imageInfo"),s=this.get("size"),a=t&&t.Sizes&&t.Sizes[s]?t.Sizes[s]:o[r[s]],n=null,d=null;s!==o.TINY.name&&s!==o.THUMB.name&&(n=a.width,d=a.height,a.hasOwnProperty("custom")&&!0===a.custom&&(n+=16,d+=16)),i.isNull(n)||i.isNull(n)||e.setStyles({width:n+l,height:d+l})},_setBoundingBoxClasses:function(e,t){var s=this.get("imageInfo"),a=this.get("type"),l=a.replace("Node",""),n=this.get("selected"),o=this.get("typeInfo"),r=this.get("boundingBox"),h=i.isString(e)?e.toLowerCase():e,m=i.isString(t)?t.toLowerCase():t;n?r.addClass(this.getClassName("selected")):r.removeClass(this.getClassName("selected")),s&&s.Status===d.HIDDEN?r.addClass(this.getClassName("status-hidden")):r.removeClass(this.getClassName("status-hidden")),e.length>0?r.replaceClass(this.getClassName("size-"+h),this.getClassName("size-"+m)):r.addClass(this.getClassName("size-"+t.toLowerCase())),!1===this.get("clickable")&&r.addClass(this.getClassName("noclick")),r.addClass("yui3-u"),r.addClass(this.getClassName(l.toLowerCase())),r.setAttribute("data-id",this.get("typeId")),r.setAttribute("data-type",l),"Album"==a?r.setAttribute("data-key",o.albumKey):"NodeAlbum"==a&&(r.setAttribute("data-key",o.AlbumKey),r.setAttribute("data-nodeId",o.NodeID)),r.toggleClass("sm-thumbnail-name-overflow",this.get("disableThumbOverflow"))},_publishEvents:function(){this.publish("preFetch")},_centerImage:function(e){e=e||"Ti";var t,s,i=this.get("imageInfo"),a=this.get("type"),n=i&&i.Sizes&&i.Sizes[e]?i.Sizes[e]:o[r[e]],d=this.get("boundingBox"),h=d.one("."+this.getClassName("thumb-image")),m=o[r[e]].width,g=o[r[e]].height,u=0,c=0;s=Math.floor(g-n.height)/2,t=Math.floor(m-n.width)/2,"Album"==a||"NodeAlbum"==a?(u=n.height+10,c=n.width+10,h.setStyles({marginTop:s+l,height:u+l}),d.one("."+this.getClassName("thumb-ghost")+"1").setStyles({marginTop:s-8+l,height:u+l}),d.one("."+this.getClassName("thumb-ghost")+"2").setStyles({marginTop:s-4+l,height:u+l}),h.setStyles({marginLeft:t+l,width:c+l}),d.one("."+this.getClassName("thumb-ghost")+"1").setStyles({marginLeft:t+8+l,width:c+l}),d.one("."+this.getClassName("thumb-ghost")+"2").setStyles({marginLeft:t+4+l,width:c+l})):(s>0&&h.setStyle("paddingTop",s+l),t>0&&h.setStyle("paddingLeft",t+l),h.setStyle("height",n.height+l),h.setStyle("width",n.width+l))},_handleThumbHover:function(t){!1===this._hovering&&(this._hoverTimer&&this._hoverTimer.cancel(),this._hovering=!0,this._hoverTimer=e.later(500,this,this._hoverFilename,!0))},_hoverFilename:function(e){var t=this.get("boundingBox").one("."+this.getClassName("filename")),s=this.get("imageInfo");this._hovering=!1,this._hoverTimer=null,!0===e&&""!==s.FileName?t.removeClass("sm-hidden"):t.addClass("sm-hidden")},getUrlForSize:function(t,s){var a=i.isObject(s)?s:this.get("imageInfo");return e.SM.Thumbnail.getUrlForSize(a,t)},getGalleryUrl:function(e){var t,s=i.isObject(e)?e:this.get("imageInfo"),a=null;for(t in s.Sizes)s.Sizes.hasOwnProperty(t)&&(a=t);return s.NewKey?i.sub("{base}{albumId}_{albumKey}/{imageId}_{imageKey}#{imageId}_{imageKey}-A-LB",{base:s.BaseUrl,imageId:s.ImageID,imageKey:s.ImageKey,albumId:s.AlbumID,albumKey:s.AlbumKey,size:a}):i.sub(n,{base:s.BaseUrl,imageId:s.ImageID,imageKey:s.ImageKey,albumId:s.AlbumID,albumKey:s.AlbumKey,size:a})}},{CSS_PREFIX:h,ATTRS:{disableThumbOverflow:{value:!1},type:{value:null},typeId:{value:0},typeInfo:{value:null},imageInfo:{value:null},clickable:{value:!0},selected:{value:!1},size:{value:o.SMALL.name},fileHover:{value:!0},baseUrl:{value:""},showBadges:{value:!0}},FORMATS:{JPEG:"jpeg",JPG:"jpg",GIF:"gif",PNG:"png",ARC:"arc",MP4:"mp4"},STATUSES:d,SIZES:o,SIZE_SHORT_LONG_NAMES:r,getUrlForSize:function(e,t){if(!e.Sizes)return console.log("bad info",e),!1;if(!e.Sizes[t])return console.log("bad size info: "+t,e),!1;e.Sizes[t];var s=e.Serial,a=e.SEOFilename,l="Fo"==t?o.SMALL.name:t,n=e.Sizes[t].ext;return e.NewKey?e.UrlSignature?i.sub("{base}i-{imageKey}/{serial}/{signature}/{size}/{name}-{size}.{ext}",{base:e.BaseUrl,imageId:e.ImageID,imageKey:e.ImageKey,name:a,serial:s,signature:e.UrlSignature,size:l,ext:n}):i.sub("{base}i-{imageKey}/{serial}/{size}/{name}-{size}.{ext}",{base:e.BaseUrl,imageId:e.ImageID,imageKey:e.ImageKey,name:a,serial:s,size:l,ext:n}):i.sub("{base}{name}/{imageId}_{imageKey}-{size}{serial}.{ext}",{base:e.BaseUrl,imageId:e.ImageID,imageKey:e.ImageKey,name:a,serial:s>0?"-"+s:"",size:l,ext:n})}}),e.namespace("SM").Thumbnail=S,SM.currentModule=null}),"",{requires:["datatype-date","dom","event","lodash","node","widget"]});
YUI.add("sm-tile-base-view",(function(e){SM.currentModule="sm-tile-base-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("sm-ua")),s=babelHelpers.interopRequireDefault(t("sm-smuglog")),n=/^[0-9]+x[0-9]+$/,l={S:276,M:384,L:576,XL:768,X2:960},r=new Error("image load failed"),o=/#size#/g,d=new e.Promise((function(e){e()})),c=["5K","4K","X5","X4","X3","X2","XL","L","M","S","Th","Ti"],g=["O"].concat(c),h=function(e,t){return t.area-e.area},u={},m=(new a.default).isSmugBot,f={},p=e.Base.create("sm-views-tile-base",e.View,[],{defaultDataMap:{Caption:"Caption",CaptionFallback:"",IsVideo:"IsVideo",Title:"Title",Url:"Url"},rendered:!1,initializer:function(){this._publishedEvents={},this._selectedTiles={}},destructor:function(){delete this._publishedEvents,delete this._selectedTiles},getSelectedTiles:function(){return e.Object.values(this._selectedTiles)},isTileSelected:function(e){return!!this._selectedTiles[x.uid(e)]},selectTile:function(e,t){return this.get("selectable")&&!this.isTileSelected(e)&&this._fireEvent("tileSelect",{defaultFn:this._defTileSelectFn},{tile:e,src:t&&t.src}),this},toggleTileSelection:function(e,t){return this.isTileSelected(e)?this.unselectTile(e,t):this.selectTile(e,t)},unselectTile:function(e,t){return this.get("selectable")&&this.isTileSelected(e)&&this._fireEvent("tileUnselect",{defaultFn:this._defTileUnselectFn},{tile:e,src:t&&t.src}),this},_calculateContainerWidth:function(){return i.default.getElementScrollingWidth(this.get("container").getDOMNode())},_fireEvent:function(e,t,i){this._publishedEvents[e]||(this._publishedEvents[e]=this.publish(e,t)),this.fire(e,i)},_fireTileClick:function(e){this._fireEvent("tileClick",{defaultFn:this._defTileClickFn,preventedFn:this._preventedTileClickFn},e)},_setDataMap:function(t){return e.merge(this.defaultDataMap,t)},_defTileClickFn:function(e){this.get("selectable")&&1===e.originEvent.button&&(e.originEvent.preventDefault(),this.toggleTileSelection(e.tile))},_defTileSelectFn:function(t){var i=this._selectedTiles;"multi"!==this.get("selectable")&&e.Object.each(i,(function(e){this.unselectTile(e)}),this),i[x.uid(t.tile)]=t.tile,this.layout?this.layout._selectTileNode(t.tile):this._selectTileNode(t.tile)},_defTileUnselectFn:function(e){delete this._selectedTiles[x.uid(e.tile)],"clear"!==e.src&&(this.layout?this.layout._unselectTileNode(e.tile):this._unselectTileNode(e.tile))},_preventedTileClickFn:function(e){e.originEvent.preventDefault()}},{ATTRS:{autoResize:{value:!0,writeOnce:"initOnly"},clickable:{value:!0,writeOnce:"initOnly"},dataMap:{setter:"_setDataMap",valueFn:function(){return this.defaultDataMap}},scrollContainer:{setter:e.one,valueFn:function(){return e.one("body")},writeOnce:"initOnly"},selectable:{value:!1,writeOnce:"initOnly"}},isCustomSize:function(e){return n.test(e)},PREFETCH_SIZES:{Ti:"Ti",Th:"Th",S:"S,M",M:"M,L",L:"L,XL",XL:"XL,X2",X2:"X2,X3",X3:"X2,X3",O:"O"},PREFETCH_SIZES_LONG:{Ti:"Tiny",Th:"Thumb",S:"Small,Medium",M:"Medium,Large",L:"Large,XLarge",XL:"XLarge,X2Large",X2:"X2Large,X3Large",X3:"X2Large,X3Large",O:"Original"},IMAGE_SIZES:{X3:{width:1600,height:1200},X2:{width:1280,height:960},XL:{width:1024,height:768},L:{width:800,height:600},M:{width:600,height:450},S:{width:400,height:300},Th:{width:150,height:150},Ti:{width:100,height:100}},WIDTHS:{none:l,"1x1":{Ti:96,Th:144,S:240,M:336,L:504,XL:660,X2:828},"4x3":l,"3x4":{S:207,M:288,L:432,XL:576,X2:720},"3x2":{S:300,M:408,L:612,XL:816,X2:1020},"2x3":{S:200,M:272,L:408,XL:544,X2:680},"3x1":{S:420,M:576,L:864,XL:1152,X2:1440},"1x3":{S:140,M:192,L:288,XL:384,X2:480}},_cacheUrl:function(t,i,a){var s=f[t];return s||(m?{cached:!0,loaded:d,size:a,url:t}:((s=f[t]={url:t,size:a,cached:!1}).loaded=new e.Promise((function(e,a){var n=s.img=new Image;n.onload=function(){var t=u[i]||(u[i]=[]);s.cached=!0,s.width=n.naturalWidth,s.height=n.naturalHeight,s.area=s.width*s.height,t.push(s),t.sort(h),e()},n.onerror=function(){delete f[t],a(r)},n.src=t})),s))},_getLargestCached:function(e){var t=u[e];return t&&t[0]||null},_getImageUrl:function(e,t){var i,a=x.imageSizes(e);e.isSmugMugResource?i=p.isCustomSize(t)?a.template.replace(o,t):(a[t]||a.O).url:i=e.getUrlForSize(t);return i||(s.default.error("tile-base","Image size '"+t+"' is missing. Aborting render of image '"+x.uid(e)+"'."),i="/image/spacer.gif"),i},_getLargestImageSize:function(t,i){var a;i||(i=c[0]);var n=e.Array.indexOf(g,i);-1===n&&(n=1);for(var l,r=n;l=g[r];r++)if(t[l]){a=l;break}return a||(s.default.error("tile-base","No usable sizes of '"+i+"' and smaller. Aborting render of image with available sizes '"+e.Object.keys(t).join(", ")+"'."),!1)},_getLargestImageSizeForContainer:function(e,t,i,a){var n=window.devicePixelRatio;n>1&&(i*=n,a&&(a*=n));var l,r,o,d=c.length;if(a)if("fit"===t){for(;l=c[--d];)if((o=e[l])&&(o.width>=i||o.height>=a)){r=l;break}}else if("fill"===t){for(;l=c[--d];)if((o=e[l])&&o.width>=i&&o.height>=a){r=l;break}}else s.default.add("tile-base","Unknown sizeType '"+t+"' instead of 'fit' or 'fill'");else for(;l=c[--d];)if((o=e[l])&&o.width>=i){r=l;break}return r||p._getLargestImageSize(e)}});e.namespace("SM.Views").TileBase=p;var v=SM.import("lodash"),S=e.SM.Models.Image,T={clientId:"Uri",IsOwner:function(e){return"Full"===e.get("ResponseLevel")}},I=function(e){var t=e.get("EffectivePrivacy")||e.get("Privacy");return L[t]},_=function(e){var t=e.get("EffectiveSecurityType")||e.get("SecurityType");return N[t]},y=function(e){return function(t){return!t.getExpansionUri("Unlock"+e)&&!t.getExpansionUri("UnlockNode")&&"Full"!==t.get("ResponseLevel")}},w=function(e){return function(t){return!!(t.get("Password")||t.getExpansionUri("Unlock"+e)||t.getExpansionUri("UnlockNode")||"Password"===t.get("EffectiveSecurityType"))}},C=v.assign({},T,{AlbumPassword:function(e){var t=e.getExpansion("ImageAlbum")||e.getExpansion("Album");return!(!t.get("Password")&&!t.getExpansionUri("UnlockAlbum"))},PrivacyLevel:function(e){var t=e.getExpansion("ImageAlbum")||e.getExpansion("Album");return L[t.get("Privacy")]}}),b=v.assign({},T,{IsPasswordUnlocked:y("Folder"),PasswordProtected:w("Folder"),PrivacyLevel:I,EffectiveSecurityType:_}),E=v.assign({},T,{IsPasswordUnlocked:y("Album"),PasswordProtected:w("Album"),PrivacyLevel:I,EffectiveSecurityType:_}),P={Album:E,AlbumImage:C,Image:C,Folder:b,Root:b,Page:v.assign({},T,{IsPasswordUnlocked:y("Page"),PasswordProtected:w("Page"),PrivacyLevel:I,EffectiveSecurityType:_}),Resource:T,"System Album":E},M={1:"root",2:"folder",4:"album",16:"systempage",64:"page"},L={Public:1,Unlisted:2,Private:3},N={None:1,Password:2,GrantAccess:4},z={Ti:{height:100,width:100},Th:{height:150,width:150},S:{height:300,width:300},M:{height:450,width:450},L:{height:600,width:600},XL:{height:768,width:768},X2:{height:960,width:960},X3:{height:1200,width:1200}},O={O:"ImageSizeOriginal",X3:"ImageSizeX3Large",X2:"ImageSizeX2Large",XL:"ImageSizeXLarge",L:"ImageSizeLarge",M:"ImageSizeMedium",S:"ImageSizeSmall",Th:"ImageSizeThumb",Ti:"ImageSizeTiny"},x={imageSizes:function(e){return e.isTileConfig?e.imageSizes:e.isSmugMugResource?x.resourceImageSizes(e):x.modelImageSizes(e)},mapAttrs:function(t,i){var a=t.isSmugMugResource?t.get():t.getAttrs();return e.Object.each(i,(function(e,i){a.hasOwnProperty(i)&&(a["_"+i]=a[i]),e&&(a[i]="function"==typeof e?e(t):a[e])})),!a.Caption&&a.CaptionFallback&&a.ShowFileName&&(a.Caption=a.CaptionFallback),a},model:function(t,i){var a,s={obj:t,uid:t.get("clientId")},n=s.mappedAttrs=x.mapAttrs(t,i);if(t instanceof S)a=t,s.altText=n.Title||n.Caption||n.FileName,s.showSecurity=!1,s.type=n.IsVideo?"video":"photo",t.get("IsOwner")&&(s.showSecurity=Boolean(t.get("Status")!==S.STATUSES.HIDDEN||3===t.get("PrivacyLevel")||t.get("AlbumPassword")));else{a=t.getRelated&&t.getRelated("Image");var l=M[t.get("Type")];"folder"===l?(s.isEmpty=!t.get("HasChildren"),s.type=l):("album"===l||t instanceof e.SM.Models.Album)&&(s.isEmpty=!t.get("HasImages"),s.type="album"),s.altText=n.Title,s.showSecurity=!0,s.type=l}return a&&(s.archived=a.get("IsArchive"),s.classNames=["sm-image"],s.favorited=a.get("IsFavorite"),s.hasImage=!s.archived,s.hidden=a.get("Status")===S.STATUSES.HIDDEN,s.image=a,s.imageSizes=x.modelImageSizes(a),s.originalHeight=a.get("OriginalHeight"),s.originalWidth=a.get("OriginalWidth"),s.protected=a.get("IsProtected")),s},modelImageSizes:function(t){if(t.get("Status")===S.STATUSES.PROCESS)return z;var i={};return e.Object.each(t.get("Sizes"),(function(e,t){e.usable&&(i[t]=e)})),i},resource:function(t,i){var a,s,n,l={obj:t,uid:t.get("Uri")},r=t.endpointType;n="Node"===r||"ChildNodes"===r?t.get("IsRoot")?"Root":t.get("Type"):"Folder"===t.resourceType&&t.isRootFolder()?"Root":t.resourceType;var o=l.mappedAttrs=x.mapAttrs(t,v.assign({},P[n],i));if(o.Caption=e.Escape.html(o.Caption),"Image"===n||"AlbumImage"===n?(s=t,l.altText=o.Title||o.Caption||o.FileName,l.type=t.getExpansionUri("LargestVideo")?"video":"photo"):(t.hasExpansion("HighlightImage")?s=t.getExpansion("HighlightImage"):t.hasExpansion(n+"HighlightImage")&&(s=t.getExpansion(n+"HighlightImage")),"Album"===n?(a=t,l.isEmpty=!t.get("ImageCount")):"Folder"===n&&(l.isEmpty=t.get("IsEmpty")),l.altText=o.Title,l.showSecurity=!0,"System Album"===n&&(n="systemalbumvisible"),l.type=n.toLowerCase()),s&&(a||(a="AlbumImage"===s.resourceType?s.getExpansion("Album"):s.getExpansion("ImageAlbum")),l.archived=!1,l.favorited=!1,l.classNames=["sm-image"],l.hasImage=!l.archived,l.hidden=s.get("Hidden"),l.image=s,l.imageSizes=x.resourceImageSizes(s),l.originalHeight=s.get("OriginalHeight"),l.originalWidth=s.get("OriginalWidth"),l.protected=s.get("Protected"),t===s)){var d=a&&("Private"===a.get("EffectivePrivacy")||"Private"===a.get("Privacy")||a.get("Password")||"Password"===a.get("EffectiveSecurityType")||"Password"===a.get("SecurityType"));l.showSecurity=!l.hidden||d}return l},resourceImageSizes:function(e){if(e.get("Processing"))return z;for(var t,i,a=e.getExpansion("ImageSizeDetails").get(),s={template:a.ImageSizeTemplate},n=0;i=g[n];n++)(t=a[O[i]])&&(s[i]={height:t.Height,width:t.Width,url:t.Url});return s},tileOffsets:function(e){if(e.isSmugMugResource&&!e.get("Processing")){let t=e.getExpansion("PointOfInterestCrops");if(t&&t.length>0){let e={};return t.forEach(t=>{e[t.get("Type")]={x:t.get("X"),y:t.get("Y")}}),e}}return e._isYUIModel&&S.STATUSES.PROCESS!==e.get("Status")?e.get("tileOffsets"):null},uid:function(e){return e.isSmugMugResource?e.get("Uri"):e.get("clientId")}};e.namespace("SM.Views.TileBase").Normalize=x;var X='<% if (data.renderedInfo) { %><div class="<%= data.classNames.tileInfo %>"><%== data.renderedInfo %></div><% } %>',A='<span class="sm-fonticon<% if (data.smallIcons) { %>-sml<% } %> sm-tile-type-icon sm-tile-info-icon"></span>',U='<% if (data.showSecurity) { %><% var badgeIcon; %><% if (data.type === "photo") { %><% if (data.tile.AlbumPassword) { %><% badgeIcon = "Lock"; %><% } else if (data.tile.EffectiveSecurityType === data.GRANT_ACCESS) { %><% badgeIcon = "User"; %><% } %><% } %><% var badgeClass; %><% var privacyLevel; %><% var isPrivate = (data.tile.PrivacyLevel === data.PRIVATE); %><% if (data.tile.IsOwner && (data.tile.PrivacyLevel === data.UNLISTED || isPrivate)) { %><% privacyLevel = isPrivate ? "private" : "unlisted" %><% badgeClass = "sm-badge-text sm-badge-text-" + privacyLevel; %><% } else if (badgeIcon) { %><% badgeClass = "sm-icon-only"; %><% } %><% if (badgeClass) { %><span class="<%= badgeClass %>"><%= privacyLevel || "" %><% if (badgeIcon) { %><span class="sm-fonticon-sml sm-fonticon-<%= badgeIcon %>"></span><% } %></span><% } %><% } %>';function k(){this._currentCropClassNames={},e.Do.before(this._addCropAndImageSizeClasses,this,"_renderNew"),e.Do.after(this._doAfterImageSizeChange,this,"_afterImageSizeChange"),e.Do.before(this._doBeforeRenderImage,this,"_renderImage")}e.namespace("SM.Views.TileBase").Templates={info:"<%  if (data.showType) { %>"+A+'<% } %><div class="sm-tile-info-text" data-alignment="<%= data.infoAlignment %>"><% if (data.tile.Title && data.tile.Title.trim()) { %><p title="<%= data.tile.Title %>" class="<%= data.classNames.title %>" itemprop="name"><% if (data.showInfo === "after" && data.clickable && data.tile.Url) { %><a href="<%= data.tile.Url %>"><%= data.tile.Title %></a><% } else { %> <%= data.tile.Title %><% } %> </p><% } %><% if (data.showInfo === "cover") { %>'+U+'<% } else if (data.tile.Caption && data.tile.Caption.trim()) { %><p itemprop="description" class="sm-tile-caption"><%== data.tile.Caption %></p><% } %></div>',tile:'<<%== data.singleTile ? "div" : "li" %><% if (data.id) { %> id="<%= data.id %>"<% } %> <% if (data.width) { %>style="width:<%= data.width %>" <% } %>class="<%= data.classNames.tileWrapper %><% if (data.type) { %> sm-tile-<%= data.type %><% } %> <%= data.containerClasses %><% if (data.showSecurity) { %><% if (data.tile.PasswordProtected && !data.tile.IsPasswordUnlocked) { %><%= " sm-tile-locked" %><% } else if (data.tile.EffectiveSecurityType === data.GRANT_ACCESS) { %><%= " sm-tile-grant" %><% } %><% } %>"itemscope itemtype="http://schema.org/<%== (data.tile.IsVideo) ? "VideoObject" : "ImageObject" %>"><div class="<%= data.classNames.tile %>" data-clientId="<%= data.tile.clientId %>"><<% if (data.clickable) { %>a itemprop="url" href="<%= data.tile.Url || "#" %>"<% } else { %>div<% } %> <% if (data.height) { %>style="height:<%= data.height %>" <% } %>class="<%= data.classNames.tileContent %><% if (!data.renderedImage) { %> sm-tile-content-empty<% } %>" data-clientId="<%= data.tile.clientId %>"><% if (data.renderedImage) { %><%== data.renderedImage %><% } else if (data.type) { %><span class="sm-fonticon sm-tile-type-icon sm-tile-placeholder-icon"></span><% } %><% if (data.showInfo === "cover" || (data.showInfo === "over" && (data.forceShowOverInfo || data.tile.Title || data.tile.Caption))) { %>'+X+"<% } else { %><% if (!data.singleTile && (data.tile.IsVideo || (data.showType && data.showSecurity && !data.showInfo && (data.tile.PasswordProtected && !data.tile.IsPasswordUnlocked)))) { %>"+A+'<% } %><% } %><% if (data.showInfo !== "cover") { %>'+U+'<% } %><% if (data.showStatus) { %><div class="sm-fonticon-sml <%= data.classNames.status %>"><span></span></div><% } %><% if (data.singleTile && data.tile.IsVideo) { %>'+e.SM.Templates.overlayButton({icon:"PlayerPlay"})+'<% } %></<%== data.clickable ? "a" : "div" %>><% if (data.showInfo === "after") { %>'+X+'<% } %></div></<%== data.singleTile ? "div" : "li" %>>'},k.ATTRS={imageCrop:{value:"1x1",validator:"_isImageCropValid",writeOnce:"initOnly"}},k.getDimensions=function(e,t,i){var a={};e?e>(i?i/t:1/0)?(a.height=i,a.width=i/e):(a.height=t*e,a.width=t):(a.height=i,a.width=t);return a},k.getFillClass=function(e,t,i){return"Ti"===e||"Th"===e?"sm-tile-limit-both":i?"sm-tile-limit-"+(i>t.originalHeight/t.originalWidth?"height":"width"):""},k.HEIGHT_PERCENT={"1x1":1,"4x3":.75,"3x4":1.33,"3x2":.66,"2x3":1.5,"3x1":.33,"1x3":3},k.prototype={_cropBaseClassName:"sm-tiles-",_addCropAndImageSizeClasses:function(e){this._addCropClass(e),this._addImageSizeClass(e)},_addCropClass:function(e){var t=this.get("imageSize"),i=this.get("imageCrop");"Ti"===t||"Th"===t?i="1x1":"none"===i&&(i="uncropped");var a="cover"===t?"":this._cropBaseClassName+i;e.replaceClass(this._currentCropClassNames.crop,a),this._currentCropClassNames.crop=a},_addImageSizeClass:function(e){var t=this._cropBaseClassName+this.get("imageSize");e.replaceClass(this._currentCropClassNames.imageSize,t),this._currentCropClassNames.imageSize=t},_doBeforeRenderImage:function(e){var t=this._renderConfig[e],i=this.get("imageSize");if(!t||!t.hasImage)return"";this._cropFillClass=k.getFillClass(i,t,k.HEIGHT_PERCENT[this.get("imageCrop")]),this._cropFillClass&&t.classNames.push(this._cropFillClass),("Ti"!==i||"Th"!==i)&&t.originalHeight>t.originalWidth&&t.classNames.push(this.classNames.portrait)},_doAfterImageSizeChange:function(){this._addImageSizeClass(this.get("container"))},_isImageCropValid:function(e){return"none"===e||!!k.HEIGHT_PERCENT[e]}},e.namespace("SM.Views.TileBase").Crop=k;function F(){this._isTile&&(this._host=this),this._renderConfig={},e.Do.before(this._addShowInfoClass,this,"_renderNew"),e.Do.after(this._attachSharedEvents,this,"_attachEvents"),e.Do.after(this._detachSharedEvents,this,"_detachEvents")}F.ATTRS={containerWidth:{writeOnce:"initOnly"},infoTemplate:{value:e.SM.Views.TileBase.Templates.info,setter:"_setCustomMicroTemplate",writeOnce:"initOnly"},showInfo:{setter:"_setShowInfo",value:!1,writeOnce:"initOnly"},showType:{value:!0,writeOnce:"initOnly"},showStatus:{value:!1,writeOnce:"initOnly"},infoAlignment:{value:"left",writeOnce:"initOnly"}},F.prototype={sharedClassNames:{archive:"sm-tile-archive",centerImage:"sm-tiles-center-image",favorite:"sm-tile-favorite",hidden:"sm-tile-hidden",infoTypeBase:"sm-tiles-info-",portrait:"sm-tile-portrait",selected:"sm-tile-selected",status:"sm-tile-status",tile:"sm-tile",tileInfo:"sm-tile-info",tileContent:"sm-tile-content",tileWrapper:"sm-tile-wrapper",title:"sm-tile-title",videoType:"sm-tile-video",infoHover:"sm-tile-infohover-"},_supportsTransform:function(){var e=document.createElement("div"),t=["ms","Webkit","Moz","O"],i=void 0!==e.style.transform;if(!i)for(var a,s=0;a=t[s];s++)if(void 0!==e.style[a+"Transform"]){i=!0;break}return e=null,i}(),_addShowInfoClass:function(e){var t=this.get("showInfo");t&&e.addClass(this.sharedClassNames.infoTypeBase+t)},_attachSharedEvents:function(){this._sharedEvents&&this._detachSharedEvents(),this._sharedEvents=[],this._host.get("clickable")&&this._sharedEvents.push(this._host.get("container").delegate("click",this._onTileClick,"."+this.classNames.tileContent,this)),this._sharedEvents.push(this._host.get("container").delegate("contextmenu",this._onContextMenu,"."+this.classNames.tileContent,this))},_detachSharedEvents:function(){this._sharedEvents&&(new e.EventHandle(this._sharedEvents).detach(),this._sharedEvents=null)},_renderImage:function(t,i){let a=this._renderConfig[t];if(!a||!a.hasImage)return"";a.size||(a.size=this._getImageSizeToRender(t));let s,n=a.altText||"Untitled ".concat(a.type),l=x.tileOffsets(a.image),r=l&&l[i];r&&"Ti"!==a.size&&"Th"!==a.size&&(s="left: ".concat(r.x,"%; top: ").concat(r.y,"%"));let o=e.SM.Templates.image({alt:n,classNames:a.classNames,dataAttrs:{clientId:t},id:a.id,url:p._getImageUrl(a.image,a.size),style:s});return a.protected&&(o+='<img src="/img/spacer.gif" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"/>'),o},_getTileNode:function(t){return e.one("#"+this._renderConfig[x.uid(t)].tileId+" ."+this.classNames.tile)},_selectTileNode:function(e){var t=this._getTileNode(e);t&&t.addClass(this.classNames.selected)},_setCustomMicroTemplate:function(t){return e.Template.Micro.compile(t)},_setShowInfo:function(e){return"never"!==e&&e},_setupRenderConfig:function(t){var i;"UserGrants"!==t.endpointType&&"Grant"!==t.endpointType||(i=t,t=t.getExpansion("Folder")||t.getExpansion("Album")||t.getExpansion("Page"));var a=(t.isSmugMugResource?x.resource:x.model)(t,this._host.get("dataMap")),s=this._renderConfig[a.uid],n=[];a.grant=i,a.isTileConfig=!0,a.tileId=s?s.tileId:e.guid("sm-tile-"),a.hasImage&&(a.id=s&&s.id?s.id:e.guid("sm-tile-image-")),a.isEmpty&&("album"===a.type?n.push("sm-tile-album-empty"):"folder"===a.type&&n.push("sm-tile-folder-empty")),this.get("showStatus")&&(a.archived&&(n.push(this.classNames.archive),a.showStatus=!0),a.favorited&&(n.push(this.classNames.favorite),a.showStatus=!0),a.hidden&&(n.push(this.classNames.hidden),a.showStatus=!0)),n.length&&(a.tileClassNames=n.join(" ")),this._renderConfig[a.uid]=a},_unselectTileNode:function(e){var t=this._getTileNode(e);t&&t.removeClass(this.classNames.selected)},_onContextMenu:function(t){var i=this._renderConfig[t.currentTarget.getData("clientId")];i&&i.hasImage&&i.protected&&(t.preventDefault(),e.SM.Page.Tooltip.showAtXY(SM.env.rightClickMessage,t.pageX,t.pageY,{className:"sm-right-click-message"}))},_onTileClick:function(e){var t=e.currentTarget.getData("clientId"),i=this._renderConfig[t];this._host._fireTileClick({tile:i.obj,grant:i.grant,originEvent:e})}},e.namespace("SM.Views.TileBase").Shared=F}(),SM.currentModule=null}),"",{requires:["escape","base-build","sm-templates-button","template-micro","view","sm-dom","sm-smuglog","sm-page-tooltip","sm-album-model","sm-ua","lodash"]});
YUI.add("sm-tile-view",(function(e){SM.currentModule="sm-tile-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var i=SM._requireShim;!function(){"use strict";var t,s=babelHelpers.interopRequireDefault(i("sm-smuglog")),n=e.SM.Views.TileBase,a=n.Crop,r=n.Normalize,h=n.Shared,g=function(e,i,t){var s=i||e,n=t;return e<i&&(s=e,n=e/(i/t)),{width:s,height:n}},l=function(e){return e||(e=0),parseInt(e,10)},o={Ti:!0,Th:!0,S:!0,M:!0,L:!0,XL:!0,X2:!0},d=window.devicePixelRatio||1,m=n.IMAGE_SIZES.X3.height,c=n.IMAGE_SIZES.X3.width,u=e.Base.create("sm-views-tile",e.SM.Views.TileBase,[h,a],{classNames:e.merge(h.prototype.sharedClassNames,{container:"sm-tile-single",centerTile:"sm-tile-center"}),_centerImage:h.prototype._supportsTransform,_containerHeight:0,_isTile:!0,initializer:function(i){i||(i={});var t=i.resource;t&&(t.isSmugMugResource||t instanceof e.SM.Models.Image)||s.default.error("tile","The `resource` option must be an Image Resource or Model."),"cover"===i.imageSize?this._set("center",!1):"O"===i.imageSize&&this._set("imageCrop","none"),this._compiledTileTemplate=e.Template.Micro.compile(e.SM.Views.TileBase.Templates.tile),this._compiledInfoTemplate=this.get("infoTemplate")},destructor:function(){this._detachEvents(),this._renderConfig=null,this._tileRenderConfig=null},render:function(e){var i=this.get("container"),t=this.get("parentNode");if(t&&i.get("parentNode")!==t&&t.appendChild(i),!this.rendered){i.addClass(this.classNames.container),this._centerImage&&this.get("verticallyCenter")&&i.addClass(this.classNames.centerImage),this.get("center")&&i.addClass(this.classNames.centerTile);var s=this._calculateContainerDimensions();s.width&&this._set("containerWidth",s.width),this._containerHeight=s.height;var n=this.get("imageSize");o[n]&&u.WIDTHS[this.get("imageCrop")][n]>this.get("containerWidth")&&(this._originalNamedSize=n,this._set("imageSize","fit")),this._attachEvents()}var a=this.rendered;if(e&&e.clear){this._renderConfig={},this._tileRenderConfig=null;var r=i.one("."+this.classNames.tileWrapper);r&&r.remove(!0),a=!1}return a?this._renderExisting(i,e):this._renderNew(i,e),this},resize:function(e,i){var t=!1;"number"==typeof e&&(this._set("maxWidth",e),t=!0),"number"==typeof i&&(this._set("maxHeight",i),t=!0);var s=this._calculateContainerDimensions();if(t||this.get("containerWidth")!==s.width||"cover"===this.get("imageSize")&&this._containerHeight!==s.height){s.width&&this._set("containerWidth",s.width),this._containerHeight=s.height;var n=this.get("imageCrop"),a=this.get("imageSize");this._originalNamedSize&&u.WIDTHS[n][this._originalNamedSize]<s.width?(this._set("imageSize",this._originalNamedSize),this._originalNamedSize=null):o[a]&&u.WIDTHS[n][a]>s.width&&(this._originalNamedSize=a,this._set("imageSize","fit")),this._renderExisting(this.get("container"))}},_afterImageSizeChange:function(e){e.newVal!==e.prevVal&&this._renderExisting(this.get("container"))},_attachEvents:function(){this._events&&this._detachEvents(),this._events=[],this._events.push(this.after("imageSizeChange",this._afterImageSizeChange,this)),this.get("autoResize")&&this._events.push(e.on("windowresize",this._onWindowResize,null,this))},_calculateContainerDimensions:function(){var e,i=this.get("container");this._inlineWidth&&(e=i.one("."+this.classNames.tileWrapper)).hide();var t={height:i.get("offsetHeight"),width:n.prototype._calculateContainerWidth.call(this)};return e&&e.show(),t},_detachEvents:function(){this._events&&(new e.EventHandle(this._events).detach(),this._events=null)},_getImageSizeToRender:function(e){return u.getImageSize(this._tileRenderConfig,this.get("imageSize"),this.get("containerWidth"),{containerHeight:this._containerHeight,maxWidth:this.get("maxWidth"),maxHeight:this.get("maxHeight"),imageCrop:this.get("imageCrop")})},_onWindowResize:function(){this.resize()},_renderNew:function(e){var i=this.get("resource");"UserGrants"!==i.endpointType&&"Grant"!==i.endpointType||(i=i.getExpansion("Folder")||i.getExpansion("Album")||i.getExpansion("Page"));var t="",s=this.get("showInfo"),a=r.uid(i);this._setupRenderConfig(i),this._tileRenderConfig=this._renderConfig[a];var h,g=this._tileRenderConfig.mappedAttrs;s&&(t=this._compiledInfoTemplate({classNames:this.classNames,clickable:this.get("clickable"),showInfo:s,showType:!1,tile:g,infoAlignment:this.get("infoAlignment")}));var l=this._tileRenderConfig,o=l.hasImage&&this._getImageSizeToRender(a);o?(n.isCustomSize(o)&&(o=this._cacheCustomImageSize(o)),l.size=o,h=this._renderImage(a,this.get("imageCrop"))):h="";var d=this._compiledTileTemplate({classNames:this.classNames,clickable:this.get("clickable"),containerClasses:this._tileRenderConfig.tileClassNames,renderedImage:h,renderedInfo:t,showInfo:s,showStatus:this._tileRenderConfig.showStatus,singleTile:!0,tile:g,type:this._tileRenderConfig.type,GRANT_ACCESS:4,PRIVATE:3,UNLISTED:2});e.append(d),this._applyAfterRenderStyles(),this.rendered=!0},_cacheCustomImageSize:function(e){var i=this._tileRenderConfig,t=u._largerCachedCustomSize(i.uid,e);return t?t.size:(n._cacheUrl(n._getImageUrl(i.image,e),i.uid,e),e)},_renderExisting:function(e){var i=this._tileRenderConfig,t=document.getElementById(i.id);if(t){var s=this._getImageSizeToRender(i.uid);n.isCustomSize(s)&&(s=this._cacheCustomImageSize(s)),s!==i.size&&(t.src=n._getImageUrl(i.image,s),i.size=s),this._applyAfterRenderStyles()}else this.render({clear:!0})},_applyAfterRenderStyles:function(){var i,t=this.get("containerWidth"),s=this.get("container"),r=this.get("containerWidth"),h=this.get("imageSize"),l=this.get("maxHeight"),o=this._tileRenderConfig,d=s.one("."+this.classNames.tileWrapper);if("fit"===h||"fill"===h&&l){var m,c,u=this.get("maxWidth");if(l){var _=g(t,u,l);t=_.width,m=_.height}else u&&t>u&&(t=u);c=o.hasImage?o.size&&!n.isCustomSize(o.size)?o.imageSizes[o.size]:{width:o.originalWidth,height:o.originalHeight}:{width:t,height:.4*t};var S=a.getDimensions(a.HEIGHT_PERCENT[this.get("imageCrop")]||c.height/c.width,t<c.width?t:c.width,m&&m<c.height?m:c.height);(r>S.width||m)&&(i=S.width),m&&this.get("center")?(d.setStyles({display:"inline-block",marginTop:Math.floor((m-S.height)/2)+"px",verticalAlign:"top"}),s.setStyle("minHeight",Math.round(m)+"px")):(d.setStyles({display:"",marginTop:"",verticalAlign:""}),s.setStyle("minHeight",""))}else if("cover"===h){var f=a.getFillClass(h,o,this._containerHeight/r);if(f!==this._cropFillClass){var p=e.one("#"+o.id);p&&(p.replaceClass(this._cropFillClass,f),this._cropFillClass=f)}}(this._inlineWidth||i)&&(this._inlineWidth=i?Math.round(i)+"px":"",d.setStyle("width",this._inlineWidth))}},{ATTRS:{center:{value:!0,writeOnce:"initOnly"},maxHeight:{setter:l,writeOnce:"initOnly"},maxWidth:{setter:l,writeOnce:"initOnly"},imageSize:{value:"S"},resource:{writeOnce:"initOnly"},verticallyCenter:{value:!0,writeOnce:"initOnly"}},WIDTHS:n.WIDTHS,cacheImage:function(e,i,t,s){var a,h=u.getImageSize(e,i,t,s),g=r.uid(e);return n.isCustomSize(h)&&(a=u._largerCachedCustomSize(g,h)),a||(a=n._cacheUrl(n._getImageUrl(e,h),g,h)),a.loaded},_largerCachedCustomSize:function(e,i){var t=n._getLargestCached(e);if(t&&n.isCustomSize(t.size)){var s=i.split("x"),r=a.getDimensions(t.height/t.width,parseInt(s[0],10),parseInt(s[1],10));if(Math.floor(r.width)<=t.width&&Math.floor(r.height)<=t.height)return t}return!1},estimatePrefetchSizes:function(i,s,a){if(i||(i="S"),!t){let i=Object.keys(n.PREFETCH_SIZES).filter(e=>n.IMAGE_SIZES[e]).reduce((e,i)=>{let t=n.IMAGE_SIZES[i].height;return e[i]={height:t,width:t,ext:"jpg",usable:!0},e},{O:{ext:"jpg",height:c,width:c,usable:!0}});t=new e.SM.Models.Image({Sizes:i,OriginalWidth:c,OriginalHeight:c})}var r=u.getImageSize(t,i,s,a);return n.isCustomSize(r)?r+",X3":n.PREFETCH_SIZES[r]},getImageSize:function(e,i,t,s){if(s||(s={}),!e||!i||!t)return!1;t=l(t),s.maxWidth=l(s.maxWidth),s.maxHeight=l(s.maxHeight);var h,_=r.imageSizes(e);if("cover"===i)return n._getLargestImageSizeForContainer(_,"fill",t,s.containerHeight);if("O"===i)return i;var S,f=s.imageCrop||"none",p=_[n._getLargestImageSize(_,"O")];if(p&&(S=p.height/p.width),o[i]&&(s.maxWidth=0,s.maxHeight=0,u.WIDTHS[f][i]>t&&(i="fit")),"fit"===i||"fill"===i)if(s.maxHeight){var C=g(t,s.maxWidth,s.maxHeight);if(h=C.height,t=C.width,"none"===f&&_.O){var v=t*d,w=h*d,z=a.getDimensions(S,v,w);if(p.height<z.height&&p.width<z.width)return"O";if(z.width>c||z.height>m)return Math.round(v)+"x"+Math.round(w)}}else t=s.maxWidth&&s.maxWidth<t?s.maxWidth:t;else{if(!o[i])return"S";t=u.WIDTHS[f][i],"none"===f&&(h=u.WIDTHS["1x1"][i])}var I=a.getDimensions(a.HEIGHT_PERCENT[f]||S,t,h);return n._getLargestImageSizeForContainer(_,"fill",I.width,I.height)}});e.namespace("SM.Views").Tile=u}(),SM.currentModule=null}),"",{requires:["sm-image-model","sm-image-template","sm-tile-base-view","template-micro","view"]});
YUI.add("sm-tiles-v2-data-factory",(function(e){SM.currentModule="sm-tiles-v2-data-factory";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("lodash")),a=babelHelpers.interopRequireDefault(t("sm-image-sizes")),r=babelHelpers.interopRequireDefault(t("sm-image-sizes-external")),o=babelHelpers.interopRequireDefault(t("sm-resource-core")),i=babelHelpers.interopRequireDefault(t("sm-smuglog")),l=babelHelpers.interopRequireDefault(t("sm-redux-store")),n=babelHelpers.interopRequireDefault(t("sm-tiles-v2-tile")),c=t("sm-api-redux-selectors");const s="sm-tiles-v2-data-factory",d={Album:{Passworded:"GalleryLock",Public:"Gallery",Shared:"GalleryUser"},Folder:{Passworded:"FolderLock",Public:"Folder",Shared:"FolderUser"},Page:{Passworded:"PageLock",Public:"Document",Shared:"PageUser"}},u={File:{Video:{contentIcon:"Play",metaIcon:"VideoCamera"}},Folder:{contentIcon:"Folder",metaIcon:"Folder"}};let g=new WeakMap;const m={REQUIRED_EXPANSIONS:{HighlightImage:!0,"HighlightImage.ImageSizeDetails":!0,ImageSizeDetails:!0},getResourceFromTileData:e=>g.get(e),getTileDataFromResources:e=>m._expandResources(e).then(()=>e.map(m._resourceToTileData)),getTileDataFromObjects(e){try{return e.map(m._responseToTileData)}catch(e){return i.default.add("sm-tiles-v2-data-factory",{message:"Error extracting Tile Data from Redux store",exception:e},i.default.LEVEL_ERROR),[]}},_clearTileDataToResourceMap(){g=new WeakMap},_expandResources(e){let t=[];return e.forEach(e=>{switch(e.endpointType){case"AlbumImage":case"ImageSearchResult":case"Image":if(e.hasExpansion("ImageSizeDetails"))return;break;case"Album":case"Folder":case"Node":case"Page":if(e.hasExpansion("HighlightImage"))return;break;case"ExternalResource":return;default:return Promise.reject(i.default.error(s,"Unsupported resource type: ".concat(e.endpointType)))}t.push(e.getCanonicalUri())}),t.length?(i.default.add(s,"Sorcerer, you have chosen to expand API data for ".concat(t.length," tile(s) on demand. This page will now load very slowly, and it's all your fault."),i.default.LEVEL_WARNING),o.default.loadUris(t,{expand:m.REQUIRED_EXPANSIONS})):Promise.resolve(e)},_getNodeIcon(t){let a=t.get("EffectiveSecurityType"),r="Node"===t.endpointType?t.get("Type"):t.endpointType,o="Public",i=t.get("SecurityType");return"Password"===a||"Password"===i?o="Passworded":"GrantAccess"!==a&&"GrantAccess"!==i||(o="Shared"),e.default.get(d,"".concat(r,".").concat(o),null)},_getVideoDuration(e){let t=e.getLargestSize({type:a.default.TYPE_VIDEO});if(!t)return null;let r=Math.floor(t.Duration/3600),o=Math.floor(t.Duration%3600/60),i=Math.floor(t.Duration%60);return o<10&&(o="0"+o),i<10&&(i="0"+i),r?"".concat(r,":").concat(o,":").concat(i):"".concat(o,":").concat(i)},_externalResourceToTileData(t){let a=t.get("ResourceDetails"),o=a&&a.PreviewUrl&&new r.default(a),i=t.get("FileType")||"",l=n.default.TYPE_EXTERNAL_FOLDER,c=t.get("Type");"Photo"===i?l=n.default.TYPE_EXTERNAL_PHOTO:"Video"===i&&(l=n.default.TYPE_EXTERNAL_VIDEO);let s=i?".".concat(i):"";return{contentIcon:e.default.get(u,"".concat(c).concat(s,".contentIcon")),contentIconSize:e.default.get(u,"".concat(c).concat(s,".contentIconSize")),metaIcon:e.default.get(u,"".concat(c).concat(s,".metaIcon")),imageSizes:o,title:t.get("Name"),type:l,uniqueId:t.get("Uri").replace("/api/v2/","")}},_imageResourceToTileData(e){let t,r,o,i=e.getExpansion("ImageSizeDetails"),l=i&&new a.default(i),c=n.default.TYPE_PHOTO;return e.get("IsVideo")?(t="PlayEncircled",o=m._getVideoDuration(l),c=n.default.TYPE_VIDEO):e.get("IsArchive")&&(t="Vault",c=n.default.TYPE_ARCHIVE),e.get("Processing")&&(t="ImageProcessing2",r="Processing..."),{canBuy:e.get("CanBuy"),canDownload:!!e.get("ArchivedUri"),caption:e.get("FormattedValues").Caption.text,contentIcon:t,contentIconLabel:r,hidden:e.get("Hidden"),imageSizes:l,isCollected:e.isCollected(),linkUrl:e.get("WebUri"),metaIcon:c===n.default.TYPE_VIDEO?"VideoCamera":null,metaIconLabel:o,protected:e.get("Protected"),title:e.get("Title"),type:c,uniqueId:e.get("ImageKey")}},_nodeResourceToTileData(e){let t,r=e.getExpansion("HighlightImage"),o=m._getNodeIcon(e),i=e.get("EffectivePrivacy")||e.get("Privacy");return"Unlisted"===i?t="Unlisted":"Private"===i&&(t="Private"),e.get("HideOwner")&&(t="".concat(t?t+" + ":"","Hide Owner")),{caption:e.get("FormattedValues").Description.text,contentIcon:o,imageSizes:r&&new a.default(r.getExpansion("ImageSizeDetails")),linkUrl:e.get("WebUri"),metaIcon:o,metaIconLabel:t,protected:r&&r.get("Protected"),title:e.get("Name"),type:n.default.TYPE_NODE,uniqueId:e.get("Uri").replace("/api/v2/","")}},_resourceToTileData(e){let t;switch(e.endpointType){case"AlbumImage":case"Image":t=m._imageResourceToTileData(e);break;case"Node":case"Album":case"Folder":case"Page":t=m._nodeResourceToTileData(e);break;case"ExternalResource":t=m._externalResourceToTileData(e);break;default:throw i.default.error(s,"Unsupported resource type: ".concat(e.endpointType))}return g.set(t,e),t},_imageObjectToTileData(e){let t,r,o,s=(0,c.getExpansion)(l.default.getState(),e.Uri,"ImageSizeDetails"),d=s&&new a.default(s),u=n.default.TYPE_PHOTO;return s||i.default.add("sm-tiles-v2-data-factory",{message:"ImageSizeDetails expansion is not available, MUST be in the store before calling TileDataFactory.",object:e,uri:e.Uri},i.default.WARNING),e.IsVideo?(t="PlayEncircled",o=m._getVideoDuration(d),u=n.default.TYPE_VIDEO):e.IsArchive&&(t="Vault",u=n.default.TYPE_ARCHIVE),e.Processing&&(t="ImageProcessing2",r="Processing..."),{canBuy:e.CanBuy,canDownload:!!e.ArchivedUri,caption:e.FormattedValues.Caption.text,contentIcon:t,contentIconLabel:r,filename:e.FileName,hidden:e.Hidden,imageSizes:d,isCollected:"Collected"===e.Origin||"Smart"===e.Origin,linkUrl:e.WebUri,metaIcon:u===n.default.TYPE_VIDEO?"VideoCamera":null,metaIconLabel:o,protected:e.Protected,title:e.Title,type:u,uniqueId:e.ImageKey}},_getNodeObjectIcon(e){let t,a=e.EffectiveSecurityType,r="Public",o=e.SecurityType;if(t=void 0!==e.AlbumKey?"Album":void 0!==e.isEmpty?"Folder":void 0!==e.Uris.PageGrants?"Page":e.Type,"Password"===a||"Password"===o?r="Passworded":"GrantAccess"!==a&&"GrantAccess"!==o||(r="Shared"),d[t])return d[t][r];throw i.default.error(s,"Invalid NodeType provided ".concat(t,"."))},_nodeObjectToTileData(e){let t,r=(0,c.getExpansion)(l.default.getState(),e.Uri,"HighlightImage"),o=m._getNodeObjectIcon(e),s=e.EffectivePrivacy||e.Privacy;return r||i.default.add("sm-tiles-v2-data-factory",{message:"ImageSizeDetails expansion is not available, it MUST be in the store before calling TileDataFactory.",object:e,uri:e.Uri},i.default.WARNING),"Unlisted"!==s&&"Private"!==s||(t=s),e.HideOwner&&(t="".concat(t?t+" + ":"","Hide Owner")),{caption:e.FormattedValues.Description.text,contentIcon:o,imageSizes:r&&new a.default((0,c.getExpansion)(l.default.getState(),r.Uri,"ImageSizeDetails")),linkUrl:e.WebUri,metaIcon:o,metaIconLabel:t,protected:r&&r.Protected,title:e.Name,type:n.default.TYPE_NODE,uniqueId:e.NodeID}},_responseToTileData(e){let t=!1;return(0,c.getExpansion)(l.default.getState(),e.Uri,"HighlightImage")||(t=!0),t?m._imageObjectToTileData(e):m._nodeObjectToTileData(e)}};var p=m;exports.default=p}(),SM.currentModule=null}),"",{requires:["lodash","sm-icon","sm-image-sizes","sm-image-sizes-external","sm-resource","sm-smuglog","sm-tiles-v2-tile","sm-redux-store"]});
YUI.add("sm-tiles-v2-grid-virtualized",(function(e){SM.currentModule="sm-tiles-v2-grid-virtualized";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),i=babelHelpers.interopRequireDefault(t("classnames")),r=t("react-virtualized"),s=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("sm-smuglog")),d=babelHelpers.interopRequireDefault(t("sm-tiles-v2-grid")),u=babelHelpers.interopRequireDefault(t("sm-tiles-v2-tile")),n=babelHelpers.interopRequireWildcard(t("sm-tiles-v2-layout"));class o extends d.default{constructor(e){super(e),this.renderGrid=this.renderGrid.bind(this),this.renderTile=this.renderTile.bind(this)}render(){return e.default.createElement(r.AutoSizer,this.props,this.renderGrid)}renderGrid({height:t,width:l}){let{className:a,items:d,spacing:u,tileHeight:o,gridFill:h,tileWidth:g,...m}=this.props;if(0===l)return;let p=g+u,c=o+u,f=Math.floor(l/p);if(h){let e=0;t<Math.ceil(d.length/f)*c&&(e=s.default.getScrollbarWidth()),f=Math.ceil((l-e)/p);let i=(l-e-(f-1)*u)/f;p=i,c=o/(g/i)}return f>d.length&&(f=d.length),this._columnCount=f,this._tileProps=n.extractTileProps(m),e.default.createElement(r.Grid,babelHelpers.extends({cellRenderer:this.renderTile,className:(0,i.default)("sm-tiles-v2-grid",a),columnCount:f,columnWidth:p,height:t,rowCount:Math.ceil(d.length/f),rowHeight:c,width:l},m))}renderTile({columnIndex:t,isScrolling:l,rowIndex:i,style:r}){let s,{gridFill:n,hideImageWhileScrolling:o,imageScaling:h,items:g,selectedIds:m,spacing:p,tileHeight:c,tileScaling:f,tileWidth:b}=this.props,v=i*this._columnCount+t,S=g[v];if(!S)return;r={...r,marginBottom:p,marginLeft:p};let I,_,M,R=this.state.imageSizes[S.uniqueId],y=u.default.OVERFLOW_CONTAIN;return R&&(s=R.DisplayHeight,_=R.DisplayWidth,h===d.default.IMAGE_SCALING_COVER&&(y=u.default.OVERFLOW_CROP),d.default.TILE_SCALING_AUTO===f&&n&&a.default.console("sm-tiles-v2-grid-virtualized",'tileScaling="Grid.TILE_SCALING_AUTO" and gridFill=true are incompatible, tileScaling will be ignored',a.default.LEVEL_WARNING),d.default.TILE_SCALING_AUTO===f&&(c=s,b=_),n&&(c=r.height-p,b=r.width-p),I=R.style),l&&o||(M=S.imageUrl||R&&R.Url),e.default.createElement(u.default,babelHelpers.extends({},this._tileProps,S,{height:c,imageHeight:s,imageStyle:I,imageUrl:M,imageWidth:_,index:v,key:S.uniqueId,overflow:y,selected:m.has(S.uniqueId),style:r,width:b}))}}exports.default=o,o.displayName="VirtualizedGrid",o.propTypes={...d.default.propTypes,hideImageWhileScrolling:l.default.bool,overscanRowCount:l.default.number,gridFill:l.default.bool},o.defaultProps={...d.default.defaultProps,overscanRowCount:5,gridFill:!1}}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","react-virtualized","sm-dom","sm-smuglog","sm-tiles-v2-grid","sm-tiles-v2-tile","sm-tiles-v2-layout"]});
YUI.add("sm-tiles-v2-grid",(function(e){SM.currentModule="sm-tiles-v2-grid";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-image-preloader-deprecated")),i=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("sm-smuglog")),s=babelHelpers.interopRequireDefault(t("sm-tiles-v2-tile")),a=babelHelpers.interopRequireWildcard(t("sm-tiles-v2-layout")),n=babelHelpers.interopRequireDefault(t("sm-component-pure-render"));class o extends n.default{constructor(e){super(e),this.state={imageSizes:Object.create(null)}}componentDidUpdate(){let e=this.props;e.imageScaling===o.IMAGE_SCALING_COVER&&e.tileScaling===o.TILE_SCALING_AUTO&&r.default.console("sm-tiles-v2-grid","Grid layout is using imageScaling='cover' with tileScaling='auto', which probably won't look great. This isn't recommended.",r.default.LEVEL_WARNING)}UNSAFE_componentWillMount(){this.setState({imageSizes:this._getImageSizes()})}UNSAFE_componentWillReceiveProps(e){this.setState({imageSizes:this._getImageSizes(e)})}render(){let e=["sm-tiles-v2-grid","sm-flex","sm-flex-items-center","sm-flex-wrap"].concat(this.props.className);return l.default.createElement("div",{className:e.join(" ").trim(),style:this.props.style},this._renderTiles())}_renderTiles(){let e=this.props,t=this.state,i=[];if(!e.tileHeight||!e.tileWidth)return i;let r={marginBottom:e.spacing,marginLeft:e.spacing},n=a.extractTileProps(e);return e.items.forEach((a,u)=>{let d,p,m,c=t.imageSizes[a.uniqueId],g=s.default.OVERFLOW_CONTAIN,S=e.tileHeight,h=e.tileWidth;c&&(d=c.DisplayHeight,m=c.DisplayWidth,e.imageScaling===o.IMAGE_SCALING_COVER&&(g=s.default.OVERFLOW_CROP),e.tileScaling===o.TILE_SCALING_AUTO&&(S=d,h=m),p=c.style),i.push(l.default.createElement(s.default,babelHelpers.extends({},n,a,{height:S,imageHeight:d,imageStyle:p,imageUrl:a.imageUrl||c&&c.Url,imageWidth:m,index:u,key:a.uniqueId,overflow:g,selected:e.selectedIds.has(a.uniqueId),style:r,width:h})))}),i}_getImageSizes(t=this.props){let i=[],l={allowCustomSize:!1},r=Object.create(null),s=t.imageScaling===o.IMAGE_SCALING_COVER?"cover":"containWithin";return t.items.forEach(e=>{if(e.imageSizes){let a=e.imageSizes[s](t.tileWidth,t.tileHeight,l);r[e.uniqueId]=a,i.push(a.Url)}}),t.prefetch&&i.length>20&&e.default.prefetch(i),r}}exports.default=o,o.IMAGE_SCALING_CONTAIN="contain",o.IMAGE_SCALING_COVER="cover",o.TILE_SCALING_AUTO="auto",o.TILE_SCALING_NONE="none",o.propTypes={...a.propTypes,hoverEffect:s.default.propTypes.hoverEffect,imageScaling:i.default.oneOf([o.IMAGE_SCALING_CONTAIN,o.IMAGE_SCALING_COVER]),tileHeight:i.default.number,tileScaling:i.default.oneOf([o.TILE_SCALING_AUTO,o.TILE_SCALING_NONE]),tileWidth:i.default.number},o.defaultProps={...a.defaultProps,imageScaling:o.IMAGE_SCALING_COVER,tileHeight:300,tileScaling:o.TILE_SCALING_NONE,tileWidth:300}}(),SM.currentModule=null}),"",{requires:["sm-image-preloader-deprecated","prop-types","react","sm-smuglog","sm-tiles-v2-tile","sm-tiles-v2-layout","sm-component-pure-render"]});
YUI.add("sm-tiles-v2-layout",(function(e){SM.currentModule="sm-tiles-v2-layout";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractTileProps=function(e){const t=["className"];return Object.keys(o.default.propTypes).reduce((l,u)=>o.default.itemPropTypes[u]||t.indexOf(u)>=0?l:{...l,[u]:e[u]},{})},exports.defaultProps=exports.propTypes=void 0;var e=babelHelpers.interopRequireDefault(t("immutable")),l=babelHelpers.interopRequireDefault(t("prop-types")),o=babelHelpers.interopRequireDefault(t("sm-tiles-v2-tile"));const u={className:l.default.oneOfType([l.default.arrayOf(l.default.string),l.default.string]),hoverEffect:o.default.propTypes.hoverEffect,infoAlignment:l.default.oneOf([o.default.INFO_ALIGNMENT_LEFT,o.default.INFO_ALIGNMENT_CENTER,o.default.INFO_ALIGNMENT_RIGHT]),infoStyle:l.default.oneOf([o.default.INFO_STYLE_OFF,o.default.INFO_STYLE_UNDER,o.default.INFO_STYLE_BOTTOM_BAR]),items:l.default.arrayOf(l.default.shape(o.default.itemPropTypes)),prefetch:l.default.bool,selectedIds:l.default.instanceOf(e.default.Set),showBuyButton:l.default.bool,showCaption:l.default.bool,showCollectedIcon:l.default.bool,showDownloadButton:l.default.bool,showFavoriteButton:l.default.bool,showMetaIcon:l.default.bool,showTitle:l.default.bool,onBuyClick:l.default.func,onClick:l.default.oneOfType([l.default.func,l.default.oneOf([!1])]),onDoubleClick:l.default.func,onDownloadClick:l.default.func,onFavoriteClick:l.default.func,onTap:l.default.func,spacing:l.default.number,style:l.default.object};exports.propTypes=u;const a={className:[],hoverEffect:o.default.defaultProps.hoverEffect,infoAlignment:o.default.INFO_ALIGNMENT_LEFT,infoStyle:o.default.INFO_STYLE_BOTTOM_BAR,items:[],prefetch:!0,selectedIds:e.default.Set(),showBuyButton:!0,showCollectedIcon:!0,showDownloadButton:!0,showTitle:!0,showMetaIcon:!0,spacing:1,style:{},onBuyClick:()=>{},onClick:()=>{},onDoubleClick:()=>{},onDownloadClick:()=>{},onFavoriteClick:()=>{},onTap:()=>{}};exports.defaultProps=a}(),SM.currentModule=null}),"",{requires:["sm","react","sm-tiles-v2-tile","immutable"]});
YUI.add("sm-tiles-v2-selection-manager",(function(e){SM.currentModule="sm-tiles-v2-selection-manager";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("immutable")),l=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("react")),i=babelHelpers.interopRequireDefault(t("sm-smuglog")),d=babelHelpers.interopRequireDefault(t("sm-tiles-v2-tile"));class a extends(SM.import("sm-component-pure-render")){constructor(t){super(t);let l=t.initiallySelectedIds;t.selectionMode===a.MODE_SINGLE&&l.length>1&&(l=[l[0]]),this._idToTileDataMap=new Map,this.state={selectedIds:e.default.Set(l)}}componentDidMount(){this._updateIdToTileDataMap()}componentDidUpdate(t,l){let s=this.props;s.onSelectionChange&&!e.default.is(l.selectedIds,this.state.selectedIds)&&s.onSelectionChange({selectedIds:this.selectedIds}),this.props.children!==t.children&&this._updateIdToTileDataMap()}UNSAFE_componentWillReceiveProps(t){t.selectionMode===a.MODE_SINGLE&&this.state.selectedIds.size>1&&this.setState({selectedIds:e.default.Set.of(this.selectedIds.first())})}UNSAFE_componentWillUpdate(){this._orderedSelectedIds=null}componentWillUnmount(){this._idToTileDataMap.clear()}render(){let e=s.default.Children.only(this.props.children);return s.default.cloneElement(e,{className:"sm-tiles-v2-selectable",selectedIds:this.state.selectedIds,onClick:(...t)=>{this._handleClick(...t),e.props.onClick&&e.props.onClick(...t)},onTap:(...t)=>{this._handleTap(...t),e.props.onTap&&e.props.onTap(...t)}})}get selectedCount(){return this.state.selectedIds.size}get selectedIds(){if(this._orderedSelectedIds)return this._orderedSelectedIds;let t=s.default.Children.only(this.props.children),l=[],i=this.state.selectedIds;return t.props.items.forEach(e=>{i.has(e.uniqueId)&&l.push(e.uniqueId)}),this._orderedSelectedIds=e.default.OrderedSet(l),this._orderedSelectedIds}isSelected(e){return this.state.selectedIds.has(e)}select(t,l={}){Array.isArray(t)||(t=[t]);let{selectionTypes:s}=this.props;s!==a.TYPE_ALL&&(t=t.filter(e=>{let t=this._idToTileDataMap.get(e);return t&&-1!==s.indexOf(t.type)})),this.setState((s,d)=>{let r;if(d.selectionMode===a.MODE_MULTIPLE)r=l.unselectOthers?e.default.Set(t):s.selectedIds.concat(t);else{if(t.length>1)throw i.default.error("sm-tiles-v2-selection-manager","Cannot select multiple items when selectionMode is `MODE_SINGLE`.");r=e.default.Set(t)}return{selectedIds:r}})}selectAll(){let e=s.default.Children.only(this.props.children);this.select(e.props.items.map(e=>e.uniqueId))}toggle(e){this.state.selectedIds.has(e)?this.unselect(e):this.select(e)}unselect(e){Array.isArray(e)||(e=[e]),this.setState(t=>({selectedIds:t.selectedIds.subtract(e)}))}unselectAll(){this.setState({selectedIds:e.default.Set()})}_getIdRange(e,t){let l=s.default.Children.only(this.props.children).props.items.map(e=>e.uniqueId),i={};l.forEach((e,t)=>{i[e]=t});let d=i[t]||0,a=i[e]||0;return l.slice(Math.min(a,d),Math.max(a,d)+1)}_updateIdToTileDataMap(){let e=s.default.Children.only(this.props.children);this._idToTileDataMap.clear(),e.props.items.forEach(e=>{this._idToTileDataMap.set(e.uniqueId,e)})}_handleClick(e,t){if(e.button>0)return;e.preventDefault();let{additiveSelection:l,selectionMode:s}=this.props;s===a.MODE_MULTIPLE?e.ctrlKey||e.metaKey?this.toggle(t):e.shiftKey?this.select(this._getIdRange(this.selectedIds.first(),t),{unselectOthers:!0}):l?this.toggle(t):this.select(t,{unselectOthers:!0}):this.select(t)}_handleTap(e,t){e.preventDefault(),this.toggle(t)}}a.MODE_MULTIPLE="multiple",a.MODE_SINGLE="single",a.TYPE_ALL="all",a.propTypes={additiveSelection:l.default.bool,children:l.default.element.isRequired,initiallySelectedIds:l.default.arrayOf(l.default.string),selectionMode:l.default.oneOf([a.MODE_MULTIPLE,a.MODE_SINGLE]),selectionTypes:l.default.oneOfType([l.default.oneOf([a.TYPE_ALL]),l.default.arrayOf(l.default.oneOf([d.default.TYPE_ARCHIVE,d.default.TYPE_NODE,d.default.TYPE_PHOTO,d.default.TYPE_VIDEO,d.default.TYPE_EXTERNAL_FOLDER,d.default.TYPE_EXTERNAL_PHOTO,d.default.TYPE_EXTERNAL_VIDEO]))]),onSelectionChange:l.default.func},a.defaultProps={additiveSelection:!0,initiallySelectedIds:[],selectionMode:a.MODE_MULTIPLE,selectionTypes:a.TYPE_ALL};var r=a;exports.default=r}(),SM.currentModule=null}),"",{requires:["immutable","react","sm-component-pure-render","sm-smuglog","sm-tiles-v2-tile"]});
YUI.add("sm-tiles-v2-tile-image",(function(e){SM.currentModule="sm-tiles-v2-tile-image";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react"));function l(e){let t=Object.assign({},e.style);return e.protected&&(t.backgroundImage="url(".concat(e.url,")")),e.height&&(t.height=e.height),e.width&&(t.width=e.width),r.default.createElement("img",{className:"sm-tiles-v2-image",alt:e.alt,"data-protected":e.protected||null,src:e.protected?"/img/spacer.gif":e.url,style:t})}l.displayName="Tile.Image",l.propTypes={alt:e.default.string,height:e.default.number,protected:e.default.bool,url:e.default.string.isRequired,width:e.default.number},l.defaultProps={alt:""}}(),SM.currentModule=null}),"",{requires:["prop-types","react"]});
YUI.add("sm-tiles-v2-tile",(function(e){SM.currentModule="sm-tiles-v2-tile";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-dom")),i=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-image-sizes")),o=babelHelpers.interopRequireDefault(t("sm-image-sizes-external")),d=babelHelpers.interopRequireDefault(t("sm-tappable")),r=babelHelpers.interopRequireDefault(t("sm-tiles-v2-tile-image"));class u extends(SM.import("sm-component-pure-render")){constructor(e){super(e),this._handleContextMenu=this._handleContextMenu.bind(this),this._handleClick=this._handleClick.bind(this),this._handleDoubleClick=this._handleDoubleClick.bind(this),this._handleTap=this._handleTap.bind(this),this._onBuyClick=this._handleButtonClick.bind(this,"onBuyClick"),this._onDownloadClick=this._handleButtonClick.bind(this,"onDownloadClick"),this._onExpandClick=this._handleButtonClick.bind(this,"onExpandClick"),this._onFavoriteClick=this._handleButtonClick.bind(this,"onFavoriteClick")}render(){let e=this.props,{linkUrl:t,width:a,height:n,infoStyle:i,hoverEffect:s,"data-testid":o}=e,r=["sm-tiles-v2-tile"].concat(e.className),c=t?"a":"div",f={height:n,width:a},m=Object.assign({},e.style,f);i===u.INFO_STYLE_OFF?r=[...r,"sm-tiles-v2-info-never"]:i===u.INFO_STYLE_UNDER&&(r=[...r,"sm-tiles-v2-info-under"],delete m.height,m={...m,minHeight:n,alignSelf:"flex-start"},s=u.HOVER_EFFECT_NONE);let E=l.default.createElement(c,{className:r.join(" "),"data-can-favorite":e.canFavorite||null,"data-disabled":e.disabled||null,"data-testid":o,"data-hidden":e.hidden||null,"data-hover-effect":s||null,"data-index":"number"==typeof e.index?e.index:null,"data-is-collected":e.isCollected||null,"data-is-favorite":e.isFavorite||null,"data-overflow":e.overflow,"data-selected":e.selected||null,"data-type":e.type,"data-id":e.uniqueId,href:e.linkUrl||null,style:m,title:e.title||null,onContextMenu:this._handleContextMenu,onClick:this._handleClick,onDoubleClick:this._handleDoubleClick},this._renderContent(),this._renderMeta());return e.onTap?l.default.createElement(d.default,{onTap:this._handleTap},E):E}_renderContent(){let e,t=this.props,a={};return t.imageUrl?e=l.default.createElement(r.default,{alt:t.title||"",height:t.imageHeight,protected:t.protected,style:t.imageStyle,url:t.imageUrl,width:t.imageWidth}):t.contentIcon&&(e=l.default.createElement("div",null,l.default.createElement(i.default,{className:"sm-tiles-v2-content-icon",name:t.contentIcon,size:t.contentIconSize||i.default.SIZE_LARGE}),t.contentIconLabel&&l.default.createElement("p",{className:"sm-tiles-v2-content-icon-label"},t.contentIconLabel))),t.infoStyle===u.INFO_STYLE_UNDER&&(a={width:t.width,height:t.height}),l.default.createElement("div",{style:a,className:"sm-tiles-v2-content sm-flex sm-flex-items-center sm-flex-justify-center"},e)}_renderMeta(){let e=this._renderMetaBottom(),t=this._renderMetaOver(),a=this._renderMetaTop();if(a||e||t)return l.default.createElement("div",{className:"sm-tiles-v2-meta"},l.default.createElement("div",{className:"sm-tiles-v2-meta-under"},a,e),t)}_renderMetaBottom(){let e=this.props,t=e.showCaption&&e.caption,a=e.showTitle&&e.title;if(t||a)return l.default.createElement("div",{className:"sm-tiles-v2-meta-bottom sm-flex","data-alignment":e.infoAlignment},a&&l.default.createElement("div",{className:"sm-tiles-v2-meta-title"},e.title),t&&l.default.createElement("div",{className:"sm-tiles-v2-meta-caption"},e.caption))}_renderMetaHidden(){if(this.props.hidden)return l.default.createElement("div",{className:"sm-tiles-v2-meta-hidden sm-flex sm-flex-justify-center sm-flex-items-center"},l.default.createElement(i.default,{name:"Hide",size:i.default.SIZE_SMALL}))}_renderMetaOver(){let e=this._renderMetaSelected(),t=this._renderMetaHidden();if(t||e)return l.default.createElement("div",{className:"sm-tiles-v2-meta-over"},t,e)}_renderMetaSelected(){if(this.props.selected)return l.default.createElement("div",{className:"sm-tiles-v2-meta-selected sm-flex sm-flex-justify-center sm-flex-items-center"},l.default.createElement(i.default,{name:"Checkmark",size:i.default.SIZE_SMALL}))}_renderMetaTop(){let e=this.props;if(e.disabled)return;let t=e.showBuyButton&&e.canBuy,n=e.showCollectedIcon&&e.isCollected,s=e.showDownloadButton&&e.canDownload,o=e.showExpandButton,r=e.showFavoriteButton&&e.canFavorite,c=e.showMetaIcon&&e.metaIcon;if(!(c||t||s||o||r||n))return;let f={};e.infoStyle===u.INFO_STYLE_UNDER&&(f={marginTop:-1*e.height});let m=n||c;return l.default.createElement("div",{className:"sm-tiles-v2-meta-top sm-flex sm-flex-justify-between sm-flex-items-center",style:f},m&&l.default.createElement("div",{className:"sm-tiles-v2-meta-top-left sm-flex sm-flex-items-center"},n&&l.default.createElement(i.default,{className:"sm-tiles-v2-meta-collected-icon",name:"ActionRedo",size:i.default.SIZE_SMALL}),c&&l.default.createElement(i.default,{className:"sm-tiles-v2-meta-icon",name:e.metaIcon,size:i.default.SIZE_SMALL}),e.metaIconLabel&&l.default.createElement("div",{className:"sm-tiles-v2-meta-icon-label"},e.metaIconLabel)),l.default.createElement("div",{className:"sm-tiles-v2-meta-top-right"},o&&l.default.createElement(d.default,{onTap:this._onExpandClick},l.default.createElement(a.default,{className:"sm-tiles-v2-button",noChrome:!0,size:"small",value:"expand",onClick:this._onExpandClick,title:"Expand Image"},l.default.createElement(i.default,{name:"FullScreen",size:i.default.SIZE_SMALL}))),s&&l.default.createElement(d.default,{onTap:this._onDownloadClick},l.default.createElement(a.default,{className:"sm-tiles-v2-button",noChrome:!0,size:"small",value:"download",onClick:this._onDownloadClick,title:"Download original"},l.default.createElement(i.default,{className:"sm-tiles-v2-download-icon",name:"Download",size:i.default.SIZE_SMALL}))),t&&l.default.createElement(a.default,{className:"sm-tiles-v2-button",noChrome:!0,size:"small",value:"buy",onClick:this._onBuyClick,title:"Buy"},l.default.createElement(i.default,{className:"sm-tiles-v2-buy-icon",name:"Cart",size:i.default.SIZE_SMALL})),r&&l.default.createElement(a.default,{className:"sm-tiles-v2-button",noChrome:!0,size:"small",value:"favorite",onClick:this._onFavoriteClick},l.default.createElement(i.default,{className:"sm-tiles-v2-favorite-icon",name:e.isFavorite?"Star":"Star2"}))))}_handleButtonClick(e,t){t.button>0||(t.preventDefault(),t.stopPropagation(),this.props[e]&&this.props[e](t,this.props.uniqueId))}_handleClick(e){this.props.disabled?e.preventDefault():this.props.onClick&&(e.preventDefault(),this.props.onClick(e,this.props.uniqueId))}_handleDoubleClick(e){e.preventDefault(),this.props.disabled||this.props.onDoubleClick&&this.props.onDoubleClick(e,this.props.uniqueId)}_handleContextMenu(e){this.props.protected&&(e.preventDefault(),SM.import("sm-page-tooltip").showAtXY(SM.env.rightClickMessage,e.pageX,e.pageY,{className:"sm-right-click-message"}))}_handleTap(e){this.props.disabled?e.preventDefault():n.default.closest(e.target,".sm-tiles-v2-button")?e.allowClick():this.props.onTap(e,this.props.uniqueId)}}exports.default=u,u.HOVER_EFFECT_NONE="none",u.HOVER_EFFECT_HIDE="hide",u.HOVER_EFFECT_SHOW="show",u.INFO_STYLE_OFF="never",u.INFO_STYLE_UNDER="after",u.INFO_STYLE_BOTTOM_BAR="over",u.OVERFLOW_CONTAIN="contain",u.OVERFLOW_CROP="crop",u.INFO_ALIGNMENT_LEFT="left",u.INFO_ALIGNMENT_CENTER="center",u.INFO_ALIGNMENT_RIGHT="right",u.TYPE_ARCHIVE="archive",u.TYPE_NODE="node",u.TYPE_PHOTO="photo",u.TYPE_VIDEO="video",u.TYPE_EXTERNAL_FOLDER="externalFolder",u.TYPE_EXTERNAL_PHOTO="externalPhoto",u.TYPE_EXTERNAL_VIDEO="externalVideo",u.itemPropTypes={caption:e.default.string,canBuy:e.default.bool,canDownload:e.default.bool,canFavorite:e.default.bool,contentIcon:e.default.string,contentIconSize:e.default.oneOf([i.default.SIZE_LARGE,i.default.SIZE_SMALL]),contentIconLabel:e.default.string,hidden:e.default.bool,imageSizes:e.default.oneOfType([e.default.instanceOf(s.default),e.default.instanceOf(o.default)]),isCollected:e.default.bool,isFavorite:e.default.bool,linkUrl:e.default.string,metaIcon:e.default.string,metaIconLabel:e.default.string,protected:e.default.bool,title:e.default.string,type:e.default.oneOf([u.TYPE_ARCHIVE,u.TYPE_NODE,u.TYPE_PHOTO,u.TYPE_VIDEO,u.TYPE_EXTERNAL_FOLDER,u.TYPE_EXTERNAL_PHOTO,u.TYPE_EXTERNAL_VIDEO]),uniqueId:e.default.string.isRequired,"data-testid":e.default.string},u.propTypes=Object.assign({className:e.default.oneOfType([e.default.arrayOf(e.default.string),e.default.string]),disabled:e.default.bool,height:e.default.number,hoverEffect:e.default.oneOf([u.HOVER_EFFECT_NONE,u.HOVER_EFFECT_HIDE,u.HOVER_EFFECT_SHOW]),imageHeight:e.default.number,imageStyle:e.default.object,imageUrl:e.default.string,imageWidth:e.default.number,index:e.default.number,infoAlignment:e.default.oneOf([u.INFO_ALIGNMENT_LEFT,u.INFO_ALIGNMENT_CENTER,u.INFO_ALIGNMENT_RIGHT]),infoStyle:e.default.oneOf([u.INFO_STYLE_OFF,u.INFO_STYLE_UNDER,u.INFO_STYLE_BOTTOM_BAR]),overflow:e.default.oneOf([u.OVERFLOW_CONTAIN,u.OVERFLOW_CROP]),selected:e.default.bool,showBuyButton:e.default.bool,showCaption:e.default.bool,showCollectedIcon:e.default.bool,showDownloadButton:e.default.bool,showExpandButton:e.default.bool,showFavoriteButton:e.default.bool,showMetaIcon:e.default.bool,showTitle:e.default.bool,style:e.default.object,width:e.default.number,onBuyClick:e.default.func,onClick:e.default.oneOfType([e.default.func,e.default.oneOf([!1])]),onDownloadClick:e.default.func,onExpandClick:e.default.func,onDoubleClick:e.default.func,onFavoriteClick:e.default.func,onTap:e.default.func},u.itemPropTypes),u.itemDefaultProps={type:u.TYPE_PHOTO},u.defaultProps=Object.assign({className:[],disabled:!1,height:240,hoverEffect:u.HOVER_EFFECT_HIDE,infoAlignment:u.INFO_ALIGNMENT_LEFT,infoStyle:u.INFO_STYLE_BOTTOM_BAR,overflow:u.OVERFLOW_CONTAIN,style:{},width:240},u.itemDefaultProps)}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-component-button","sm-dom","sm-component-icon","sm-icon","sm-image-sizes","sm-image-sizes-external","sm-tappable","sm-tiles-v2-tile-image"]});
YUI.add("sm-tiles-view",(function(e){SM.currentModule="sm-tiles-view";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("sm-smuglog")),s=(l=e.SM.Views.TileBase).Normalize;function n(e){this.modelList=e,this._events=[e.after("newPage",this._afterModelListNewPage,this)]}function a(e){this._paginator=e}!function(){var t,n=e.Base.create("sm-views-tiles",e.SM.Views.TileBase,[],{layoutPlugins:{grid:"Grid",vertical:"Vertical",columnOrganic:"ColumnOrganic",rowOrganic:"RowOrganic"},paginationPlugins:{1:null,3:"Append",4:"Infinite"},initializer:function(e){e||(e={}),e.resources,this._plugLayout(this.get("layout"),e.layoutOptions),this._plugPagination(this.get("pagination"),e.paginationOptions)},render:function(t){var i=this.get("container");this.rendered&&t&&t.clear&&(e.Object.each(this._selectedTiles,(function(e){this.unselectTile(e,{src:"clear"})}),this),this.fire("clear",e.merge(t,{container:i})),i.empty());var s=this.get("parentNode");s&&i.get("parentNode")!==s&&s.appendChild(i);var n=t&&t.tiles||this.get("resources");return n instanceof e.ModelList?n=n.toArray():n.resources&&(n=n.resources),this.fire("render",e.merge(t,{container:i,rendered:this.rendered,tiles:n})),this.rendered||(i.addClass("sm-tiles"),this.rendered=!0),this},resize:function(){this.fire("resize")},_plugLayout:function(e,t){this.plug(e,t),this.rendered&&this.render({clear:!0})},_plugPagination:function(t,s){if(t){var n=this.get("resources");n instanceof e.ModelList||n.resources?this.plug(t,s):i.default.add("tiles","The `resources` attribute is not a ModelList or Y.SM.ResourcePaginator when trying to paginate Resources. Falling back to no pagination.")}this.rendered&&this.render({clear:!0})},_setLayout:function(t){return"string"==typeof t?e.SM.Views.Tiles.Layout[this.layoutPlugins[t]]:t},_setPagination:function(t){return"string"==typeof t||"number"==typeof t?"1"===(t=""+t)?null:e.SM.Views.Tiles.Pagination[this.paginationPlugins[t]]:t}},{ATTRS:{layout:{setter:"_setLayout",valueFn:function(){return e.SM.Views.Tiles.Layout.Grid}},pagination:{setter:"_setPagination",valueFn:function(){return e.SM.Views.Tiles.Pagination.Append}},resources:{writeOnce:!0}},LAYOUTS:{COLUMN_ORGANIC:"columnOrganic",GRID:"grid",ROW_ORGANIC:"rowOrganic",VERTICAL:"vertical"},PAGINATION_TYPES:{NONE:1,APPEND:3,INFINITE:4},WIDTHS:e.SM.Views.TileBase.WIDTHS,cacheImage:function(e,t,i,a,o){var r=n.getImageSize(e,t,i,a,o);return l._cacheUrl(l._getImageUrl(e,r),s.uid(e),r).loaded},estimatePrefetchSizes:function(i,s,a,o,r){if(i||(i="grid"),s||(s=960),!t){let i=Object.keys(l.PREFETCH_SIZES).filter(e=>l.IMAGE_SIZES[e]).reduce((e,t)=>(e[t]={...l.IMAGE_SIZES[t],ext:"jpg",usable:!0},e),{});t=new e.SM.Models.Image({Sizes:i})}var h=n.getImageSize(t,i,s,a,o);return r&&r.longSizeNames?e.SM.Views.TileBase.PREFETCH_SIZES_LONG[h]:e.SM.Views.TileBase.PREFETCH_SIZES[h]},getImageSize:function(e,t,i,s,a){var o=n.prototype.layoutPlugins[t];return!!(e&&o&&i)&&(s||(s="S"),a||(a="1x1"),n.Layout[o].getImageSize(e,i,s,a))},getPageSize:function(e,t,i){i||(i={});var s=n.prototype.layoutPlugins[t];return s?n.Layout[s].getPageSize(e,i):48}});e.namespace("SM.Views").Tiles=n}(),e.mix(n.prototype,{_afterModelListNewPage:function(t){var i=e.Array.filter(t.models,(function(e){return!!e}));this.fire("nextPage",{tiles:i})},destroy:function(){new e.EventHandle(this._events).detach(),this._events=null,this.modelList=null},nextPage:function(){this.modelList.loadNextPage((function(e){}))},isLastPage:function(){var e=this.modelList;return e.get("PageNumber")>=e.get("TotalPages")}}),e.augment(n,e.EventTarget),e.mix(a.prototype,{destroy:function(){this._paginator=null},nextPage:function(){var e=this._paginator.getNextPage(),t=this;e.then((function(e){t._paginator=e,t.fire("nextPage",{tiles:e.resources})}))},isLastPage:function(){return this._paginator.isLastPage()}}),e.augment(a,e.EventTarget),e.namespace("SM.Views.Tiles.Templates").Base=e.merge(e.SM.Views.TileBase.Templates,{list:'<ul class="<%= data.classNames.list %>"><%== data.renderedTiles %></ul>',paginationTotal:'<div class="<%= data.classNames.total %>"><%= data.totalItems %> <%= data.label %></div>'}),function(){var t="ontouchstart"in e.config.doc.documentElement,i={Ti:"Th",Th:"Th",S:"M",M:"L",L:"XL",XL:"XL",X2:"X3",X3:"X3",O:"O"},s=e.SM.Views.TileBase,n=s.Normalize,a=s.Shared,o=e.Base.create("sm-tiles-layout-base",e.Plugin.Base,[a],{classNames:e.merge(a.prototype.sharedClassNames,{container:"sm-tiles-base",list:"sm-tiles-list",spacingBase:"sm-tiles-spacing-",infoHover:"sm-tiles-infohover-"}),templates:e.SM.Views.Tiles.Templates.Base,_centerImages:a.prototype._supportsTransform,_renderEmptyAfterInfo:!1,initializer:function(t){var i;this._compiledTemplates={},this._host=t.host,this.get("overlayHtml")?i=this.get("overlayHtml"):this.get("showHover")&&(i="<div>"),i&&(this._overlay=e.Node.create(i),this._overlay.addClass("sm-tile-overlay"),this._boundShowOverlay=e.bind(this._showOverlay,this)),this._attachEvents()},destructor:function(){this._detachEvents(),this._renderConfig=null,this._boundShowOverlay=null,this._overlay&&(this._overlay.remove(!0),this._overlay=null)},_addSpacingClass:function(e){var t=this.get("spacing");t&&e.addClass(this.classNames.spacingBase+t)},_addInfoHoverClass:function(e){var t=this.get("showInfo"),i=this.get("infoHover");i&&"never"!==t&&"after"!==t&&e.addClass(this.classNames.infoHover+i)},_attachEvents:function(){this._events&&this._detachEvents(),this._events=[];var i=this._host.get("container"),s=this.get("showHover")&&!t,n=this.get("overlayHtml")&&(!t||this.get("showOverlayForTouch"));(s||n)&&(this._events.push(i.delegate("hover",this._onTileContentEnter,this._onTileContentLeave,"."+this.classNames.tileContent,this)),this.get("overlayClickFilter")&&this._events.push(i.delegate("click",this._onTileOverlayClick,this.get("overlayClickFilter"),this)),this.onHostEvent("clear",this._onHostClear)),this._host.get("autoResize")&&this._events.push(e.on("windowresize",this._onResize,null,this)),this.onHostEvent("render",this._onHostRender),this.onHostEvent("resize",this._onResize)},_detachEvents:function(){this._events&&(new e.EventHandle(this._events).detach(),this._events=null)},_getCompiledTemplate:function(t){var i=this._compiledTemplates;return i[t]||(i[t]=e.Template.Micro.compile(this.templates[t])),i[t]},_getImageSizeToRender:function(e){return o.getImageSize(this._renderConfig[e],this.get("imageSize"))},_render:function(t,i){i||(i={});var s=e.merge(i,{container:null});if(i.rendered||(t.addClass(this.classNames.container),this._addSpacingClass(t),this._addInfoHoverClass(t),this._centerImages&&t.addClass(this.classNames.centerImage)),!i.rendered||i.clear){var n=this._host._calculateContainerWidth();n&&this._set("containerWidth",n),this._renderConfig={},this._renderNew(t,s)}else this._renderExisting(t,s)},_renderExisting:function(e,t){var i,s=t.tiles;if(s&&(i=e.one("."+this.classNames.list))){t.container=i;for(var n,a=0;n=s[a];a++)this._setupRenderConfig(n),this._renderTile(n,t)}},_renderNew:function(e,t){var i=this.classNames,s=t.tiles,n=[];if(s)for(var a,o=0;a=s[o];o++)this._setupRenderConfig(a),n.push(this._renderTile(a,t));e.append(this._getCompiledTemplate("list")({classNames:i,renderedTiles:n.join("")}))},_renderImageContent:function(e){return e.hasImage?this._renderImage(e.uid):""},_renderTile:function(t,i){"UserGrants"!==t.endpointType&&"Grant"!==t.endpointType||(t=t.getExpansion("Folder")||t.getExpansion("Album")||t.getExpansion("Page")),i||(i={});var s,a=i.container,o=this._renderConfig[n.uid(t)],r="",l=this.get("showInfo"),h=this.get("showType"),g=o.mappedAttrs,c=this.get("forceShowOverInfo"),u=this._host.get("clickable");if(l){"after"===l&&this._renderEmptyAfterInfo&&(g.Title||(g.Title=" ",u=!1),g.Caption||(g.Caption=" "));var d=!0;h?"photo"===o.type?d=!1:"video"===o.type&&("over"===l?d=c||g.Title||g.Caption:"after"===l&&(d=!1)):d=!1,r=this.get("infoTemplate")({classNames:this.classNames,clickable:u,image:t,showInfo:l,showSecurity:o.showSecurity,showType:d,tile:g,infoAlignment:this.get("infoAlignment")})}if(s=this._getCompiledTemplate("tile")({classNames:this.classNames,clickable:this._host.get("clickable"),containerClasses:o.tileClassNames,forceShowOverInfo:c,id:o.tileId,height:o.height,renderedImage:this._renderImageContent(o),renderedInfo:r,showInfo:l,showSecurity:o.showSecurity,showStatus:o.showStatus,showType:h,singleTile:!1,smallIcons:"Ti"===this.get("imageSize"),tile:g,type:o.type,width:o.width,GRANT_ACCESS:4,PRIVATE:3,UNLISTED:2}),a){var _=e.Node.create(s),m=a.one("#"+o.tileId);return m?(m.replace(_),m.destroy(!0)):a.append(_),_}return s},_resize:function(){},_showOverlay:function(){this._overlay.setStyle("opacity",1)},_onHostClear:function(){this._overlay&&this._overlay.remove()},_onHostRender:function(e){this._render(e.container,e)},_onTileOverlayClick:function(e){e.preventDefault(),this._host.fire("tileOverlayClick",{tile:this._hoveredTile,filterTarget:e.currentTarget})},_onResize:function(){var e=this._host._calculateContainerWidth();e!==this.get("containerWidth")&&(this._set("containerWidth",e),this._resize())},_onTileContentEnter:function(e){var t=e.currentTarget,i=t.getData("clientId"),s=(this._renderConfig[i],t.one(".sm-image")),n={height:"",width:"",opacity:0};if(s){var a=s.get("offsetHeight"),o=s.get("offsetWidth"),r=t.get("offsetHeight"),l=t.get("offsetWidth");a<r&&(n.height=a+"px"),o<l&&(n.width=o+"px")}this._overlay.setStyles(n),t.contains(this._overlay)||t.appendChild(this._overlay),this._hoveredTile=this._renderConfig[i].obj,this._host.fire("tileOverlayShow",{overlay:this._overlay,tile:this._hoveredTile}),window.setTimeout(this._boundShowOverlay,1)},_onTileContentLeave:function(){this._hoveredTile=null,this._overlay.setStyle("opacity",0)}},{NS:"layout",ATTRS:{forceShowOverInfo:{value:!1,writeOnce:"initOnly"},imageSize:{writeOnce:"initOnly"},overlayClickFilter:{writeOnce:"initOnly"},overlayHtml:{writeOnce:"initOnly"},showOverlayForTouch:{writeOnce:"initOnly",value:!0},showHover:{value:!1,writeOnce:"initOnly"},spacing:{setter:function(e){var t=parseInt(e,10);return 6===t?4:t},value:0,writeOnce:"initOnly"},infoHover:{writeOnce:"initOnly"}},MIN_AUTO_PAGE_SIZE:48,getImageSize:function(e,t){return window.devicePixelRatio&&window.devicePixelRatio>1&&(t=i[t]),s._getLargestImageSize(n.imageSizes(e),t)}});e.namespace("SM.Views.Tiles.Layout").Base=o}();var o=e.SM.Views.Tiles,r=e.Base.create("sm-tiles-layout-column-base",o.Layout.Base,[],{classNames:e.merge(o.Layout.Base.prototype.classNames,{columnBase:"sm-tiles-col-",container:"sm-tiles-column-base"}),_maxColumns:10,initializer:function(){this._columnClassNames={}},_addColumnClass:function(e){var t=this._calculateColumns();if(t<=this._maxColumns){var i=this.classNames.columnBase+t,s=e.generateID();e.replaceClass(this._columnClassNames[s],i),this._columnClassNames[s]=i}},_calculateColumns:function(){return r.calculateColumns(this.get("containerWidth"),this.get("imageSize"),this.get("imageCrop"))},_render:function(e,t){o.Layout.Base.prototype._render.apply(this,arguments),this._addColumnClass(e)},_resize:function(){this._addColumnClass(this._host.get("container"))}},{NS:"layout",calculateColumns:function(t,i,s){var n=e.SM.Views.Tiles.WIDTHS,a=t/("Ti"===i||"Th"===i?n["1x1"][i]:(n[s]||n.none)[i]);return a>this._maxColumns?Math.floor(a):Math.ceil(a)}});e.namespace("SM.Views.Tiles.Layout").ColumnBase=r,function(){var t=e.SM.Views.TileBase,i=t.Crop,s=t.Normalize,n=e.SM.Views.Tiles,a=e.Base.create("sm-tiles-layout-grid",n.Layout.ColumnBase,[i],{_renderEmptyAfterInfo:!0,classNames:e.merge(n.Layout.ColumnBase.prototype.classNames,{container:"sm-tiles-grid"}),_getImageSizeToRender:function(e){return a.getImageSize(this._renderConfig[e],this.get("containerWidth"),this.get("imageSize"),this.get("imageCrop"),this.get("spacing"))},_renderImageContent:function(e){return e.hasImage?this._renderImage(e.uid,this.get("imageCrop")):""}},{NS:"layout",contentDimensions:{},getImageSize:function(e,o,r,l,h){if(h=h||0,"Ti"===r||"Th"===r)return n.Layout.Base.getImageSize(e,r);var g=a.contentDimensions,c=r+l+o+h;if(!g[c]){var u=n.Layout.ColumnBase.calculateColumns(o,r,l),d=(o-h*(u-1))/u;g[c]=i.getDimensions(i.HEIGHT_PERCENT[l],d)}return t._getLargestImageSizeForContainer(s.imageSizes(e),"fill",g[c].width,g[c].height)},getPageSize:function(t,s){var a;a=!i.HEIGHT_PERCENT[s.crop]||"Ti"===s.imageSize&&"Th"===s.imageSize?"1x1":s.crop;var o=e.SM.Views.Tiles.WIDTHS[a][s.imageSize],r=Math.ceil(t/o);return r*(s&&parseInt(s.pageSize,10)>0?s.pageSize:Math.ceil(n.Layout.Base.MIN_AUTO_PAGE_SIZE/r))}});e.namespace("SM.Views.Tiles.Layout").Grid=a}(),function(){var t=e.SM.Views.TileBase,i=t.Normalize,s=e.SM.Views.Tiles,n=e.Base.create("sm-tiles-layout-column-organic",s.Layout.ColumnBase,[],{classNames:e.merge(s.Layout.ColumnBase.prototype.classNames,{container:"sm-tiles-column-organic",list:"sm-tiles-list sm-tiles-column"}),_centerImages:!1,_columnOffset:0,_getImageSizeToRender:function(e){return n.getImageSize(this._renderConfig[e],this.get("containerWidth"),this.get("imageSize"),this.get("spacing"))},_renderExisting:function(e,t){var s,n,a,o,r,l=this._calculateColumns(),h=t.tiles;if(h&&h.length&&(s=e.all(".sm-tiles-column"))){var g=this._renderConfig[i.uid(h[0])];if(g&&null!==document.getElementById(g.tileId))for(t.container=e,a=0;r=h[a];a++)this._setupRenderConfig(r),this._renderTile(r,t);else{for(o=0;o<l;o++)for(n=s.item(o),t.container=n,a=(l-this._columnOffset+o)%l;r=h[a];a+=l)this._setupRenderConfig(r),this._renderTile(r,t);this._columnOffset=(this._columnOffset+h.length)%l}}},_renderNew:function(e,t){var i,s=this._calculateColumns(),n="sm-tiles-"+this.get("imageSize"),a=t.tiles;if(this._columnCount=s,a){this._columnOffset=a.length%s;for(var o=0;o<s;o++){i=[];for(var r,l=o;r=a[l];l+=s)this._setupRenderConfig(r),i.push(this._renderTile(r,t));e.appendChild(this._getCompiledTemplate("list")({classNames:this.classNames,renderedTiles:i.join("")})).addClass(n)}}},_resize:function(){this._calculateColumns()!==this._columnCount&&this._host.render({clear:!0})}},{NS:"layout",getImageSize:function(e,n,a,o){o=o||0;var r=s.Layout.ColumnBase.calculateColumns(n,a),l=(n-o*(r-1))/r;return t._getLargestImageSizeForContainer(i.imageSizes(e),"fill",l)},getPageSize:function(e,t){if(t&&parseInt(t.pageSize,10)>0)return t.pageSize;var i=s.WIDTHS.none[t.imageSize],n=Math.ceil(e/i);return Math.ceil(s.Layout.Base.MIN_AUTO_PAGE_SIZE/n)*n}});e.namespace("SM.Views.Tiles.Layout").ColumnOrganic=n}();s=(l=e.SM.Views.TileBase).Normalize;var l,h,g,c,u,d={Ti:!0,Th:!0},_=e.SM.Views.Tiles.WIDTHS["1x1"],m=e.Base.create("sm-tiles-layout-row-organic",o.Layout.Base,[],{classNames:e.merge(o.Layout.Base.prototype.classNames,{container:"sm-tiles-row-organic"}),_centerImages:!1,_variancePercent:.5,_varianceWeight:.5,initializer:function(e){this._defaultRowHeight=_[e.imageSize]||_.S,this._rowHeightVariance=this.get("varyHeight")?Math.round(this._defaultRowHeight*this._variancePercent):0;var t=Math.round(this._rowHeightVariance*this._varianceWeight);this._maxRowHeight=this._defaultRowHeight+t,this._minRowHeight=this._defaultRowHeight-this._rowHeightVariance+t},_calculateRowHeight:function(){return this.get("varyHeight")?this._defaultRowHeight+this._rowHeightVariance*(this._varianceWeight-Math.random()):this._defaultRowHeight},_renderExisting:function(t,i){var n;i||(i={});var a=!1,o=i.tiles;if(o&&o.length&&(a=(n=this._renderConfig[s.uid(o[0])])&&null!==document.getElementById(n.tileId)),a){for(var r,l,h=0;r=o[h];h++)if(l=s.uid(r),n=this._renderConfig[l]){var g=t.one("#"+n.tileId);g&&(this._setupRenderConfig(r),e.mix(this._renderConfig[l],n,!0,["height","heightPercent","resource","size","width"]),g.replace(this._renderTile(r)),g.destroy(!0))}}else{var c=t.one(".sm-tiles-pg");c&&t.removeChild(c),this._renderNew(t,i),c&&t.append(c)}},_renderNew:function(e,t){var i=t.tiles,n=this.get("containerWidth"),a="sm-tiles-"+this.get("imageSize"),o=this._maxRowHeight,r=this.get("spacing"),h=!this._host.pagination||this._host.pagination.isLastPage();if(this._savedConfigs){for(var g,c=[],u=0;g=this._savedConfigs[u];u++)c.push(g.resource);i=c.concat(i),this._savedConfigs=null}for(var _,m=this._calculateRowHeight(),f=0,p=[],v=i.length-1,S=0;_=i[S];S++){this._setupRenderConfig(_);var w=this._renderConfig[s.uid(_)];if(w.resource=_,p.push(w),w.hasImage){var y=w.originalWidth,T=w.originalHeight;T&&y?(T<m&&(m=o=T),w.heightPercent=y/T):(w.heightPercent=1.33,w.hasImage=!1)}else w.heightPercent=1;f+=w.heightPercent;var C=n-(p.length-1)*r,I=Math.round(C/f);if(h&&S===v&&(m=I<=o?o:1/0),I<=m){var z;I>o?(z=!1,I=o<this._maxRowHeight?o:this._maxRowHeight):z=!0;for(var N=0,P=0;w=p[N];N++)P+=w.width=Math.round(w.heightPercent*I);z&&(I+=this._distributeDifference(C,P,p));for(var E="",M=0;w=p[M];M++){if(w.hasImage){var H=l._getLargestImageSizeForContainer(w.imageSizes,"fill",w.width,I);d[H]&&!d[l._getLargestImageSize(w.imageSizes,"O")]?w.size="S":w.size=H}w.height=I+"px",w.width+="px",E+=this._renderTile(w.resource)}e.appendChild(this._getCompiledTemplate("list")({classNames:this.classNames,renderedTiles:E})).addClass(a),p=[],f=0,m=this._calculateRowHeight(),o=this._maxRowHeight}else S===v&&(this._savedConfigs=p)}},_distributeDifference:function(e,t,i){for(var s=e-t,n=i.length,a=s>0?1:-1,o=n/s>0?a:0,r=0;s;)i[r].width+=a,s-=a,n===++r&&(r=0);return o},_resize:function(){this._savedConfigs=null,this._host.render({clear:!0})}},{NS:"layout",ATTRS:{varyHeight:{value:!0,writeOnce:"initOnly"}},getImageSize:function(t,i,n){d[n]&&(n="S");var a=e.SM.Views.Tiles.WIDTHS["4x3"],o=a[n]||a.S,r=_[n]||_.S;return l._getLargestImageSizeForContainer(s.imageSizes(t),"fill",o,r)},getPageSize:function(e,t){return t&&parseInt(t.pageSize,10)>0?t.pageSize:o.Layout.Base.MIN_AUTO_PAGE_SIZE}});e.namespace("SM.Views.Tiles.Layout").RowOrganic=m,function(){var t=e.SM.Views.TileBase,i=t.Crop,s=t.Normalize,n=e.SM.Views.Tiles,a=n.Layout.Base,o=e.one("body"),r=function(e){var t=e?96:48;return Math.max(o.get("winHeight")-t,256)},l={fill:!0,fit:!0},h={},g=e.Base.create("sm-tiles-layout-vertical",a,[i],{classNames:e.merge(a.prototype.classNames,{container:"sm-tiles-vertical"}),_checkFillSize:function(){var t,i=this.get("imageSize");!this._sizeBeforeFill&&l[i]||(e.SM.Views.Tiles.WIDTHS[this.get("imageCrop")][this._sizeBeforeFill||i]>this.get("containerWidth")?this._sizeBeforeFill||(t="fill",this._sizeBeforeFill=i):this._sizeBeforeFill&&(t=this._sizeBeforeFill,this._sizeBeforeFill=null),t&&(this._set("imageSize",t),this._addImageSizeClass(this._host.get("container"))));return t||i},_getImageSizeToRender:function(e){var t=this.get("containerWidth"),i=this.get("imageSize");return g.getImageSize(this._renderConfig[e],t,i,this.get("imageCrop"),this._maxFitHeight)},_render:function(e,t){this._checkFillSize();var i=this.get("imageSize");t.rendered||"fit"!==i||(this._maxFitHeight=r("after"===this.get("showInfo"))),a.prototype._render.apply(this,arguments)},_resize:function(){var e=this.get("imageSize"),i=this._checkFillSize();if(l[e]||l[i]){var s=this;this._host.get("container").all(".sm-image").each((function(){var i=this.getData("clientId"),n=s._renderConfig[i];if(n){var a=s._getImageSizeToRender(i);if(n.size!==a&&(this.setAttribute("src",t._getImageUrl(n.image,a)),n.size=a),"fit"===e){var o=s._calculateWidthForFit(n.imageSizes,n.size);if(n.width!==o){var r=document.getElementById(n.tileId);r&&(r.style.width=n.width=o)}}}}))}else a.prototype._resize.call(this)},_calculateWidthForFit:function(e,t){var s=this.get("containerWidth"),n=e[t],a=i.HEIGHT_PERCENT[this.get("imageCrop")]||n.height/n.width,o=n.width>s?s:n.width,r=n.height>this._maxFitHeight?this._maxFitHeight:n.height;return i.getDimensions(a,o,r).width/s*100+"%"},_setupRenderConfig:function(e){t.Shared.prototype._setupRenderConfig.call(this,e);var i=this._renderConfig[s.uid(e)];"fit"===this.get("imageSize")&&(i.hasImage?(i.size=this._getImageSizeToRender(i.uid),i.width=this._calculateWidthForFit(i.imageSizes,i.size)):i.width="60%")},_onResize:function(){if("fit"!==this.get("imageSize"))a.prototype._onResize.apply(this,arguments);else{var e=this._host._calculateContainerWidth(),t=r("after"===this.get("showInfo"));e!==this.get("containerWidth")&&this._set("containerWidth",e),t!==this._maxFitHeight&&(this._maxFitHeight=t),this._resize()}}},{NS:"layout",getImageSize:function(e,a,o,g,c){if(!l[o]){var u=n.WIDTHS[g][o];u<a&&(a=u)}"fit"===o?c||(c=r(!1)):c=null;var d=g+a+(c||"");return h[d]||(h[d]=i.getDimensions(i.HEIGHT_PERCENT[g],a,c)),t._getLargestImageSizeForContainer(s.imageSizes(e),"none"===g?"fit":"fill",h[d].width,h[d].height)},getPageSize:function(e,t){return t&&parseInt(t.pageSize,10)>0?t.pageSize:n.Layout.Base.MIN_AUTO_PAGE_SIZE}});e.namespace("SM.Views.Tiles.Layout").Vertical=g}(),h=e.Base.create("sm-tiles-pagination-base",e.Plugin.Base,[],{classNames:{loading:"sm-tiles-loading",spinner:"sm-progress-spinner",spinnerVisible:"sm-progress-spinner-visible"},initializer:function(t){this._compiledTemplates={},this._host=t.host,this._pagesInProgress=0,this._boundBeforeGetNextPage=e.bind(this._beforeGetNextPage,this);var i=this._host.get("resources");i instanceof e.ModelList?this._paginator=new n(i):this._paginator=new a(i),this._attachEvents()},destructor:function(){this._paginator&&this._paginator.destroy(),this._detachEvents()},isLastPage:function(){return this._paginator.isLastPage()},_attachEvents:function(){this._events&&this._detachEvents(),this._events=[e.Do.before(this._boundBeforeGetNextPage,this._paginator,"nextPage"),this._paginator.on("nextPage",this._onNextPage,this)]},_detachEvents:function(){this._events&&(new e.EventHandle(this._events).detach(),this._events=null)},_hideLoading:function(){var e=this._host.get("container").one("."+this.classNames.spinner);e&&e.removeClass(this.classNames.spinnerVisible)},_showLoading:function(){var t=this._host.get("container"),i=t.one("."+this.classNames.spinner);i||(i=e.Node.create("<div/>")).addClass(this.classNames.spinner),t.appendChild(i),i.addClass(this.classNames.spinnerVisible)},_beforeGetNextPage:function(){this._paginator.isLastPage()||(this._showLoading(),this._pagesInProgress++)},_onNextPage:function(e){this._host.render({tiles:e.tiles}),this._pagesInProgress&&(this._pagesInProgress--,0===this._pagesInProgress&&this._hideLoading())}},{NS:"pagination"}),e.namespace("SM.Views.Tiles.Pagination").Base=h,g=e.SM.Views.Tiles.Pagination.Base,c='<div class="sm-tiles-pg">'+e.SM.Templates.button({label:"Load More",size:"small",skin:"submit",className:"sm-tiles-pg-button"})+"</div>",u=e.Base.create("sm-tiles-pagination-append",g,[],{classNames:e.merge(g.prototype.classNames,{button:"sm-tiles-pg-button",pagination:"sm-tiles-pg"}),_attachEvents:function(){g.prototype._attachEvents.apply(this,arguments),this._events.push(this._host.get("container").delegate("click",this._onShowMoreClick,"."+this.classNames.button,this)),this.onHostEvent("render",this._onHostRender)},_renderPaginationBar:function(e,t){t||(t={});var i=e.one("."+this.classNames.pagination);this._paginator.isLastPage()?i&&i.remove(!0):i?i.replace(c):e.append(c)},_showLoading:function(){var e=this._host.get("container"),t=e&&e.one("."+this.classNames.pagination+" .sm-button");t&&t.set("disabled",!0),g.prototype._showLoading.call(this)},_hideLoading:function(){var e=this._host.get("container"),t=e&&e.one("."+this.classNames.pagination+" .sm-button");t&&t.set("disabled",!1),g.prototype._hideLoading.call(this)},_onHostRender:function(e){this._renderPaginationBar(e.container,e)},_onShowMoreClick:function(){this._paginator.nextPage()}},{NS:"pagination"}),e.namespace("SM.Views.Tiles.Pagination").Append=u,function(){var t=e.SM.Views.Tiles.Pagination.Base,i=SM.import("lodash"),s=SM.import("sm-dom"),n=e.Base.create("sm-tiles-pagination-infinite",t,[],{initializer:function(){this._boundOnOrientationChange=i.bind(this._onOrientationChange,this),this._boundRecalcRegion=i.bind(this._recalcRegion,this),this._attachInfiniteEvents()},destructor:function(){this._detachScrollEvents(),this._boundRecalcRegion=null,this._hostRegion=null,this._destroyed=!0},_attachInfiniteEvents:function(){this._scrollInfo=this._host.get("scrollContainer").plug(e.Plugin.ScrollInfo,{scrollDelay:50}).scrollInfo,this._scrollEvents=[this._host.after("render",this._afterHostRender,this),this._scrollInfo.on("scroll",this._onScroll,this)],s.win.addEventListener("orientationchange",this._boundOnOrientationChange)},_detachScrollEvents:function(){this._scrollEvents&&(new e.EventHandle(this._scrollEvents).detach(),this._scrollEvents=null),this._scrollInfo&&(this._host.get("scrollContainer").unplug(this._scrollInfo),this._scrollInfo=null),s.win.removeEventListener("orientationchange",this._boundOnOrientationChange)},_recalcRegion:function(){if(!this._destroyed)if(this.get("autoDetach")&&this._paginator.isLastPage())this._detachScrollEvents();else{var t=this._hostRegion=this._host.get("container").get("region"),i=this._scrollInfo.getScrollInfo(),s=this._scrollPadding=Math.max(Math.floor(.5*e.one("body").get("winHeight")),640);i.scrollBottom+s>=t.bottom&&this._paginator.nextPage()}},_afterHostRender:function(){e.soon(this._boundRecalcRegion)},_onScroll:function(e){e.isScrollDown&&e.scrollBottom+this._scrollPadding>=this._hostRegion.bottom&&this._paginator.nextPage()},_onOrientationChange:function(){s.win.setTimeout(this._boundRecalcRegion,200)}},{NS:"pagination",ATTRS:{autoDetach:{value:!0}}});e.namespace("SM.Views.Tiles.Pagination").Infinite=n}()}(),SM.currentModule=null}),"",{requires:["base-build","event-hover","event-resize","lodash","sm","sm-dom","sm-image-model","sm-image-template","sm-scrollinfo","sm-smuglog","sm-templates-button","sm-tile-base-view","template-micro","view"]});
YUI.add("sm-toast",(function(e){SM.currentModule="sm-toast";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;!function(){e.mix(e.Node.DOM_EVENTS,{transitionend:1,webkitTransitionEnd:1});var t=e.Base.create("toast",e.View,[],{template:'<div class="sm-toast" role="status" aria-live="polite"></div>',messageTemplate:"<h4></h4>",destructor:function(){this.hide(),this._toastNode=null},hide:function(){if(!this.get("visible"))return this;clearTimeout(this._timeout),this._set("visible",!1);var e=this._toastNode;return this._events.push(e.once(["transitionend","webkitTransitionEnd"],this._hide,this)),e.removeClass("sm-toast-visible"),this},render:function(){var t=this.get("container"),i=this.get("visible"),n=this._toastNode||t.one(".sm-toast");return n||((n=e.Node.create(this.template)).toggleClass("sm-hidden",!i),t.append(n)),i&&n.setHTML(e.Node.create(this.messageTemplate).setHTML(this.get("message"))),this._toastNode=n,this.rendered=!0,this},show:function(){return this.get("visible")||t._queue(this),this},_centerNode:function(t){var i=t.get("offsetWidth"),n=e.DOM.winWidth();t.setStyle("left",100/n*(n/2-i/2)+"%")},_hide:function(){this._toastNode.addClass("sm-hidden"),new e.EventHandle(this._events).detach(),this.fire("hide")},_show:function(){this.rendered||this.render();var t=this._toastNode;this._set("visible",!0),this._events=[t.once("click",this._onClick,this)],t.removeClass("sm-hidden").setHTML(e.Node.create(this.messageTemplate).setHTML(this.get("message"))),this._centerNode(t),setTimeout((function(){t.addClass("sm-toast-visible")}),1);var i=this.get("duration");if(i){var n=this;this._timeout=setTimeout((function(){n.hide()}),i)}this.fire("show")},_defClickFn:function(e){1===e.originEvent.button&&this.hide()},_onClick:function(e){this._clickEvent||(this._clickEvent=this.publish("click",{defaultFn:this._defClickFn,preventedFn:this._preventedClickFn})),this.fire("click",{originEvent:e})},_preventedClickFn:function(e){e.originEvent.preventDefault()}},{ATTRS:{container:{valueFn:function(){return e.one(".sm-overlay-container")}},duration:{value:4e3},message:{value:""},visible:{readOnly:!0,value:!1}},_queued:[],_running:null,clearQueue:function(){t._running&&(t._queued=[],t._running.hide())},display:function(i,n){"object"==typeof i&&(i=(n=i).message);var s=new t(e.merge(n,{message:i}));return s.after("hide",(function(){s.destroy()})),s.show(),s},_next:function(){if(!t._running){var e=t._queued.shift();e&&(t._running=e,e.once("hide",(function(){t._running=null,t._next()})),e._show())}},_queue:function(e){t._queued.push(e),t._next()}});e.namespace("SM").Toast=module.exports=t}(),SM.currentModule=null}),"",{requires:["base","dom-screen","node-style","view"]});
YUI.add("sm-tooltip-constants",(function(T){SM.currentModule="sm-tooltip-constants";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TOOLTIP_DEFAULT_VERTICAL_SPACE_THRESHOLD=exports.TOOLTIP_OFFSET=exports.TOOLTIP_ALIGNMENTS=exports.TOOLTIP_ALIGN_LEFT=exports.TOOLTIP_ALIGN_BOTTOM=exports.TOOLTIP_ALIGN_RIGHT=exports.TOOLTIP_ALIGN_TOP=exports.TOOLTIP_TRANSITION_TIME=exports.TOOLTIP_HIDE_DELAY=exports.TOOLTIP_SHOW_DELAY=exports.TOOLTIP_DEFAULT_MAX_WIDTH=void 0;exports.TOOLTIP_DEFAULT_MAX_WIDTH=200;exports.TOOLTIP_SHOW_DELAY=300;exports.TOOLTIP_HIDE_DELAY=100;exports.TOOLTIP_TRANSITION_TIME=250;exports.TOOLTIP_ALIGN_TOP="top";exports.TOOLTIP_ALIGN_RIGHT="right";exports.TOOLTIP_ALIGN_BOTTOM="bottom";exports.TOOLTIP_ALIGN_LEFT="left";const T=["top","right","bottom","left"];exports.TOOLTIP_ALIGNMENTS=T;exports.TOOLTIP_OFFSET=14;exports.TOOLTIP_DEFAULT_VERTICAL_SPACE_THRESHOLD=100}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("sm-tooltip-helpers",(function(T){SM.currentModule="sm-tooltip-helpers";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTooltipAnchorPoint=exports.getTooltipBestAlignment=void 0;var T=t("sm-tooltip-constants");exports.getTooltipBestAlignment=(t,e,O,o={})=>{let{maxWidth:_=T.TOOLTIP_DEFAULT_MAX_WIDTH,verticalSpaceThreshold:r=T.TOOLTIP_DEFAULT_VERTICAL_SPACE_THRESHOLD}=o,{top:i,right:L,bottom:I,left:n}=e,{windowWidth:l,windowHeight:s}=O,P={[T.TOOLTIP_ALIGN_TOP]:i>r+T.TOOLTIP_OFFSET,[T.TOOLTIP_ALIGN_BOTTOM]:I+r+T.TOOLTIP_OFFSET<s,[T.TOOLTIP_ALIGN_RIGHT]:L+_+T.TOOLTIP_OFFSET<l,[T.TOOLTIP_ALIGN_LEFT]:n-_-T.TOOLTIP_OFFSET>0};return P[t]?t:Object.keys(P).find(T=>!!P[T])||t};exports.getTooltipAnchorPoint=(t,e)=>{let O,o,{offsetWidth:_,offsetHeight:r,top:i,right:L,bottom:I,left:n}=e;switch(t){case T.TOOLTIP_ALIGN_BOTTOM:O=n+_/2,o=I+T.TOOLTIP_OFFSET;break;case T.TOOLTIP_ALIGN_TOP:O=n+_/2,o=i-T.TOOLTIP_OFFSET;break;case T.TOOLTIP_ALIGN_RIGHT:O=L+T.TOOLTIP_OFFSET,o=i+r/2;break;case T.TOOLTIP_ALIGN_LEFT:O=n-T.TOOLTIP_OFFSET,o=i+r/2}return{x:O,y:o}}}(),SM.currentModule=null}),"",{requires:["sm-tooltip-constants"]});
YUI.add("sm-tooltip-hoc",(function(e){SM.currentModule="sm-tooltip-hoc";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){class l extends e.Component{constructor(...e){super(...e),babelHelpers.defineProperty(this,"_id",(0,i.uniqueId)("sm-tooltip-")),babelHelpers.defineProperty(this,"_isTouch",!1),babelHelpers.defineProperty(this,"state",{alignment:null,showTooltip:!1,xPosition:null,yPosition:null}),babelHelpers.defineProperty(this,"_touchStart",(...e)=>{this.props.onTouchStart&&this.props.onTouchStart(...e),this.props.touchEnabled||(this._isTouch=!0)}),babelHelpers.defineProperty(this,"_touchEnd",(...e)=>{this.props.onTouchEnd&&this.props.onTouchEnd(...e),this.props.touchEnabled||(this._touchEndTimer=setTimeout(()=>{this._isTouch=!1},16))}),babelHelpers.defineProperty(this,"_onMouseEnter",(e,...t)=>{if(this.props.onMouseEnter&&this.props.onMouseEnter(e,...t),this._isTouch)return;let o=e.target;this._timer=setTimeout(()=>{this._showTooltip(o)},p.TOOLTIP_SHOW_DELAY)}),babelHelpers.defineProperty(this,"_onMouseLeave",(...e)=>{this.props.onMouseLeave&&this.props.onMouseLeave(...e),this._clearTimers(),this._timer=setTimeout(()=>{this._hideTooltip()},p.TOOLTIP_HIDE_DELAY)}),babelHelpers.defineProperty(this,"_onFocus",(e,...t)=>{this.props.onFocus&&this.props.onFocus(e,...t),this._isTouch||this._showTooltip(e.target)}),babelHelpers.defineProperty(this,"_onBlur",(...e)=>{this.props.onBlur&&this.props.onBlur(...e),this._hideTooltip()}),babelHelpers.defineProperty(this,"_showTooltip",e=>{let{xPosition:t,yPosition:o,alignment:i}=this._getPosition(e);this.setState({alignment:i,renderTooltip:!0,showTooltip:!0,xPosition:t,yPosition:o})}),babelHelpers.defineProperty(this,"_hideTooltip",()=>{this.setState({showTooltip:!1})}),babelHelpers.defineProperty(this,"_onTooltipExited",()=>{this.setState({renderTooltip:!1})}),babelHelpers.defineProperty(this,"_getPosition",e=>{let{tooltipMaxWidth:t,tooltipAlignment:o,tooltipVerticalSpaceThreshold:i}=this.props,{offsetWidth:l,offsetHeight:r}=e,{top:n,right:p,bottom:h,left:u}=e.getBoundingClientRect(),{innerHeight:d,innerWidth:T,scrollY:c,scrollX:_}=s.default.win,m=(0,a.getTooltipBestAlignment)(o,{top:n,right:p,bottom:h,left:u},{windowWidth:T,windowHeight:d},{maxWidth:t,verticalSpaceThreshold:i}),{x:b,y:f}=(0,a.getTooltipAnchorPoint)(m,{offsetWidth:l,offsetHeight:r,top:n,right:p,bottom:h,left:u});return{alignment:m,xPosition:Math.round(b+_),yPosition:Math.round(f+c)}}),babelHelpers.defineProperty(this,"_clearTimers",()=>{this._timer&&clearTimeout(this._timer),this._touchEndTimer&&clearTimeout(this._touchEndTimer)})}componentWillUnmount(){this._clearTimers()}render(){let{tooltipAriaLabel:o,tooltipLabel:i,tooltipMaxWidth:s,tooltipAlignment:l,tooltipVerticalSpaceThreshold:r,touchEnabled:n,...p}=this.props,{alignment:a,renderTooltip:h,showTooltip:d,xPosition:T,yPosition:c}=this.state;return p.disabled&&(h=!1),e.default.createElement(e.default.Fragment,null,e.default.createElement(t,babelHelpers.extends({},p,{"aria-describedby":o&&!i&&this._id||null,"aria-labelledby":i&&this._id||null,onBlur:this._onBlur,onFocus:this._onFocus,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onTouchStart:this._touchStart,onTouchEnd:this._touchEnd})),h&&e.default.createElement(u,{alignment:a,ariaLabel:i&&o||null,id:this._id,maxWidth:s,onExited:this._onTooltipExited,show:d,xPosition:T,yPosition:c},i||o))}}return babelHelpers.defineProperty(l,"displayName","WithTooltip(".concat((0,r.getDisplayName)(t),")")),babelHelpers.defineProperty(l,"propTypes",{tooltipLabel:o.default.oneOfType([o.default.string,o.default.element]),tooltipAriaLabel:o.default.oneOfType([o.default.string,o.default.element]),tooltipAlignment:o.default.oneOf(p.TOOLTIP_ALIGNMENTS),tooltipMaxWidth:o.default.number,tooltipVerticalSpaceThreshold:o.default.number,touchEnabled:o.default.bool}),babelHelpers.defineProperty(l,"defaultProps",{tooltipAlignment:p.TOOLTIP_ALIGN_RIGHT,tooltipMaxWidth:p.TOOLTIP_DEFAULT_MAX_WIDTH,tooltipVerticalSpaceThreshold:p.TOOLTIP_DEFAULT_VERTICAL_SPACE_THRESHOLD,touchEnabled:!1}),l.TOOLTIP_ALIGN_BOTTOM=p.TOOLTIP_ALIGN_BOTTOM,l.TOOLTIP_ALIGN_LEFT=p.TOOLTIP_ALIGN_LEFT,l.TOOLTIP_ALIGN_RIGHT=p.TOOLTIP_ALIGN_RIGHT,l.TOOLTIP_ALIGN_TOP=p.TOOLTIP_ALIGN_TOP,l};var e=babelHelpers.interopRequireWildcard(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),i=t("lodash"),s=babelHelpers.interopRequireDefault(t("sm-dom-core")),l=babelHelpers.interopRequireDefault(t("sm-teleport")),r=t("sm-hoc-get-display-name"),n=t("sm-modal-constants"),p=t("sm-tooltip-constants"),a=t("sm-tooltip-helpers"),h=babelHelpers.interopRequireDefault(t("sm-tooltip-transition"));const u=(0,l.default)(h.default,()=>s.default.doc.querySelector(n.SKINNED_MODAL_SELECTOR))}(),SM.currentModule=null}),"",{requires:["react","prop-types","lodash","sm-dom-core","sm-teleport","sm-hoc-get-display-name","sm-modal-constants","sm-tooltip-constants","sm-tooltip-helpers","sm-tooltip-transition"]});
YUI.add("sm-tooltip-old",(function(e){SM.currentModule="sm-tooltip-old";var t,i,r;SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;t=e.Lang,i=e.Node,r=e.Base.create("tooltip-old",e.Widget,[e.WidgetPosition,e.WidgetStack],{initializer:function(e){this._triggerClassName=this.getClassName("trigger"),this._currTrigger={node:null,title:null,mouseX:r.OFFSCREEN_X,mouseY:r.OFFSCREEN_Y},this._eventHandles={delegate:null,trigger:{mouseMove:null,mouseOut:null}},this._timers={show:null,hide:null},this.publish("triggerEnter",{defaultFn:this._defTriggerEnterFn,preventable:!0}),this.publish("triggerLeave",{preventable:!1})},destructor:function(){this._clearCurrentTrigger(),this._clearTimers(),this._clearHandles()},bindUI:function(){this.after("delegateChange",this._afterSetDelegate),this.after("triggerNodesChange",this._afterSetNodes),this._bindDelegate()},syncUI:function(){this._uiSetNodes(this.get("triggerNodes"))},setTriggerContent:function(e){var r=this.get("contentBox");if(r.set("innerHTML",""),e)if(e instanceof i)for(var s=0,n=e.size();s<n;++s)r.appendChild(e.item(s));else t.isString(e)&&r.set("innerHTML",e)},_afterSetNodes:function(e){this._uiSetNodes(e.newVal)},_afterSetDelegate:function(e){this._bindDelegate(e.newVal)},_uiSetNodes:function(e){this._triggerNodes&&this._triggerNodes.removeClass(this._triggerClassName),e&&(this._triggerNodes=e,this._triggerNodes.addClass(this._triggerClassName))},_bindDelegate:function(){var t=this._eventHandles;t.delegate&&(t.delegate.detach(),t.delegate=null),t.delegate=e.delegate("mouseenter",e.bind(this._onNodeMouseEnter,this),this.get("delegate"),"."+this._triggerClassName)},_onNodeMouseEnter:function(e){var t=e.currentTarget;!t||this._currTrigger.node&&t.compareTo(this._currTrigger.node)||this._enterTrigger(t,e.pageX,e.pageY)},_onNodeMouseLeave:function(e){this._leaveTrigger(e.currentTarget)},_onNodeMouseMove:function(e){this._overTrigger(e.pageX,e.pageY)},_enterTrigger:function(e,t,i){this._setCurrentTrigger(e,t,i),this.fire("triggerEnter",{node:e,pageX:t,pageY:i})},_defTriggerEnterFn:function(t){var i=t.node;if(!this.get("disabled")){this._clearTimers();var r=this.get("visible")?0:this.get("showDelay");this._timers.show=e.later(r,this,this._showTooltip,[i])}},_leaveTrigger:function(t){this.fire("triggerLeave"),this._clearCurrentTrigger(),this._clearTimers(),this._timers.hide=e.later(this.get("hideDelay"),this,this._hideTooltip)},_overTrigger:function(e,t){this._currTrigger.mouseX=e,this._currTrigger.mouseY=t},_showTooltip:function(t){var i=this._currTrigger.mouseX,s=this._currTrigger.mouseY,n=this.get("autoHideDelay");this.move(i+r.OFFSET_X,s+r.OFFSET_Y),this.show(),this._clearTimers(),n&&(this._timers.hide=e.later(n,this,this._hideTooltip))},_hideTooltip:function(){this._clearTimers(),this.hide()},_setTriggerContent:function(e){var r=this.get("content");r&&!(r instanceof i||t.isString(r))&&(r=r[e.get("id")]||e.getAttribute("title")),this.setTriggerContent(r)},_setCurrentTrigger:function(t,i,r){var s=this._currTrigger,n=this._eventHandles.trigger;this._setTriggerContent(t),n.mouseMove=e.on("mousemove",e.bind(this._onNodeMouseMove,this),t),n.mouseOut=e.on("mouseleave",e.bind(this._onNodeMouseLeave,this),t);var o=t.getAttribute("title");t.setAttribute("title",""),s.mouseX=i,s.mouseY=r,s.node=t,s.title=o},_clearCurrentTrigger:function(){var e=this._currTrigger,t=this._eventHandles.trigger;if(e.node){var i=e.node,r=e.title||"";e.node=null,e.title="",t.mouseMove.detach(),t.mouseOut.detach(),t.mouseMove=null,t.mouseOut=null,i.setAttribute("title",r)}},_clearTimers:function(){var e=this._timers;e.hide&&(e.hide.cancel(),e.hide=null),e.show&&(e.show.cancel(),e.show=null)},_clearHandles:function(){var e=this._eventHandles;e.delegate&&this._eventHandles.delegate.detach(),e.trigger.mouseOut&&e.trigger.mouseOut.detach(),e.trigger.mouseMove&&e.trigger.mouseMove.detach()}},{CSS_PREFIX:"sm-tooltip-old",OFFSET_X:15,OFFSET_Y:15,OFFSCREEN_X:-1e4,OFFSCREEN_Y:-1e4,ATTRS:{content:{value:null},triggerNodes:{value:null,setter:function(e){return e&&t.isString(e)&&(e=i.all(e)),e}},delegate:{value:null,setter:function(t){return e.one(t)||e.one("document")}},showDelay:{value:250},hideDelay:{value:10},autoHideDelay:{value:2e3},visible:{value:!1},xy:{value:[-1e4,-1e4]}}}),e.namespace("SM").TooltipOld=r,SM.currentModule=null}),"",{requires:["event-mouseenter","widget","widget-position","widget-stack"]});
YUI.add("sm-tooltip-transition",(function(e){SM.currentModule="sm-tooltip-transition";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),i=t("react-transition-group"),r=babelHelpers.interopRequireDefault(t("sm-tooltip")),n=t("sm-tooltip-constants");const a=t=>{let{children:o,maxWidth:a,onExited:s,show:l,xPosition:u,yPosition:d,...p}=t,m={transitionDuration:"".concat(n.TOOLTIP_TRANSITION_TIME,"ms"),left:u,top:d,maxWidth:a};return e.default.createElement(i.CSSTransition,{classNames:"sm-tooltip-transition",in:l,appear:!0,timeout:n.TOOLTIP_TRANSITION_TIME,unmountOnExit:!0,onExited:s},e.default.createElement(r.default,babelHelpers.extends({style:m},p),o))};a.displayName="Tooltip.Transition",a.propTypes={show:o.default.bool,xPosition:o.default.number.isRequired,yPosition:o.default.number.isRequired,onExited:o.default.func.isRequired,maxWidth:o.default.number},a.defaultProps={show:!0,maxWidth:n.TOOLTIP_DEFAULT_MAX_WIDTH};var s=a;exports.default=s}(),SM.currentModule=null}),"",{requires:["react","prop-types","react-transition-group","sm-tooltip","sm-tooltip-constants"]});
YUI.add("sm-tooltip",(function(e){SM.currentModule="sm-tooltip";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("classnames")),r=t("sm-tooltip-constants");const s=t=>{let{alignment:l,ariaLabel:s,children:i,className:n,id:o,style:u,...d}=t;return u.maxWidth||(u.maxWidth=r.TOOLTIP_DEFAULT_MAX_WIDTH),e.default.createElement(e.default.Fragment,null,e.default.createElement("div",babelHelpers.extends({className:(0,a.default)(["sm-tooltip-v2",n]),"data-align":l||null,style:u,id:!s&&o||null,role:s?null:"tooltip"},d),i),!!s&&e.default.createElement("div",{id:o,role:"tooltip",className:"sm-tooltip-visually-hidden"},s))};s.displayName="Tooltip",s.propTypes={alignment:l.default.oneOf(r.TOOLTIP_ALIGNMENTS),ariaLabel:l.default.string,children:l.default.node.isRequired,className:l.default.string,id:l.default.string,style:l.default.object},s.defaultProps={style:{}};var i=s;exports.default=i}(),SM.currentModule=null}),"",{requires:["react","prop-types","classnames","sm-tooltip-constants"]});
YUI.add("sm-transitions-slide",(function(e){SM.currentModule="sm-transitions-slide";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("classnames")),r=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),s=t("react-transition-group");const n=t=>{let{className:r="",direction:n,innerProps:i={},pageKey:l,...u}=t;const o={className:"sm-slide-outer-wrapper ".concat(r)};let{className:d,...c}=i;return a.default.createElement("div",babelHelpers.extends({},u,o),a.default.createElement(s.TransitionGroup,{className:"sm-slide-transition-group","data-direction":n},a.default.createElement(s.CSSTransition,{classNames:"sm-slide",key:l,timeout:300,unmountOnExit:!0},a.default.createElement("div",babelHelpers.extends({className:(0,e.default)("sm-slide-inner-wrapper",d)},c),t.children))))};n.propTypes={direction:r.default.oneOf(["left","right","up","down"]),pageKey:r.default.string.isRequired},n.displayName="SlideTransition";var i=n;exports.default=i}(),SM.currentModule=null}),"",{requires:["classnames","react","react-transition-group","sm"]});
YUI.add("sm-twitter",(function(t){SM.currentModule="sm-twitter";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},SM._requireShim;!function(){SM.import("sm-smuglog");var e=t.Template.Micro.compile('<a href="https://twitter.com/share" class="twitter-share-button"<% if (data.url) { %> data-url="<%= data.url %>"<% } %><% if (data.TweetCustomText) { %> data-via="<%= data.TweetCustomText %>"<% } %><% if (data.TweetVia) { %> data-via="<%= data.TweetVia %>"<% } %><% if (data.TweetRecommend) { %> data-related="<%= data.TweetRecommend %>"<% } %><% if (data.TweetHashtag) { %> data-hashtags="<%= data.TweetHashtag %>"<% } %><% if (!data.TweetShowCount) { %>  data-count="none"<% } else { %><% if (data.TweetCountPosition && data.TweetCountPosition === "vertical") { %> data-count="vertical"<% } %><% } %>>Tweet</a>');t.namespace("SM").Twitter=t.Base.create("sm-twitter",t.Base,[],{renderTweetButton:function(t,a){return this._loadSDK().then((function(n){return t.append(e(a)),n.widgets.load(t.getDOMNode()),t})).catch((function(){return t}))},_loadSDK:function(){return new t.Promise((function(e,a){window.twttr?e(window.twttr):t.Get.js("//platform.twitter.com/widgets.js",{onSuccess:function(){window.twttr.ready((function(){e(window.twttr)}))},onFailure:function(){a("Failed to load twitter SDK")},attributes:{id:"twitter-wjs"}})}))}})}(),SM.currentModule=null}),"",{requires:["base","node","sm-smuglog"]});
YUI.add("sm-ua",(function(e){SM.currentModule="sm-ua";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e=/[^ \w]+/g;class n{constructor(e=n.getUserAgent()){this._cache={},this.ua=e}get engine(){let e=this._cache;if(e.engine)return e.engine;let n=this.name,i=this._tokens||this._getTokens();switch(n){case"Android":return e.engine="WebKit";case"Chrome":return i.crios?e.engine="WebKit":this._getMajorVersion()>=28?e.engine="Blink":e.engine="WebKit";case"Firefox":return e.engine="Gecko";case"IE":if(i.trident||i.msie)return e.engine="Trident";if(i.edge)return e.engine="Spartan";break;case"Opera":return i.opr?e.engine="Blink":e.engine="Presto";case"Safari":return e.engine="WebKit";case"SmugBot":return i.headlesschrome?e.engine="Blink":e.engine="WebKit";case"SmugMug":if(i.webview){if(this.isIOS)return e.engine="WebKit";if(this.isAndroid)return e.engine="Blink"}}return e.engine="Unknown"}get isAndroidBrowser(){return"Android"===this.name}get isChrome(){return"Chrome"===this.name}get isFirefox(){return"Firefox"===this.name}get isIE(){return"IE"===this.name}get isOpera(){return"Opera"===this.name}get isSafari(){return"Safari"===this.name}get isSmugBot(){return"SmugBot"===this.name}get name(){let e=this._cache;if(e.name)return e.name;let n=this._tokens||this._getTokens();return n.smugbot?e.name="SmugBot":n.smugmug?e.name="SmugMug":n.opera||n.presto?e.name="Opera":n.chrome||n.headlesschrome?n.edge&&n.windows?e.name="IE":n.opr?e.name="Opera":e.name="Chrome":(n.msie||n.trident)&&n.windows?e.name="IE":n.firefox?e.name="Firefox":n.safari?n.android?e.name="Android":n.crios?e.name="Chrome":e.name="Safari":"Unknown"}get os(){let e=this._cache;if(e.os)return e.os;let n=this._tokens||this._getTokens();if(n.smugbot)return e.os="Linux";if(n.smugmug){if(n.ios)return e.os="iOS";if(n.android)return e.os="Android"}if(n.windows)return n.phone||n.iemobile||n.wpdesktop?e.os="Windows Phone":e.os="Windows";if(n.mac&&n.os&&n.x){if(n.macintosh)return e.os="Mac OS X";if(n.mobile)return e.os="iOS"}return n.android?e.os="Android":n.linux?e.os="Linux":"Unknown"}get isAndroid(){return"Android"===this.os}get isIOS(){return"iOS"===this.os}get isLinux(){return"Linux"===this.os}get isMacOSX(){return"Mac OS X"===this.os}get isSmugMugWebView(){return!!(this._tokens||this._getTokens()).webview&&("SmugMug"===this.name&&(this.isIOS||this.isAndroid))}get isWindows(){return"Windows"===this.os}get isWindowsPhone(){return"Windows Phone"===this.os}_getMajorVersion(){let e,n=this.ua,i=0;return"Chrome"===this.name&&(e=n.match(/(?:Chrome|CriOS)\/(\d+)/)),e&&e[1]&&(i=parseInt(e[1],10)),isNaN(i)?0:i}_getTokens(){if(this._tokens)return this._tokens;let n=Object.create(null);return this.ua.trim().replace(e," ").split(/ +/).forEach((function(e){n[e.toLowerCase()]=!0})),this._tokens=n,n}static getUserAgent(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:""}}exports.default=n}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-unhandled-rejection-logging",(function(e){SM.currentModule="sm-unhandled-rejection-logging";SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};var r=SM._requireShim;!function(){"use strict";var t=babelHelpers.interopRequireDefault(r("rsvp")),o=babelHelpers.interopRequireDefault(r("sm-sentry-init"));e.Promise.isPromise=function(e){return e&&"function"==typeof e.then};const n=e.Promise.Resolver.prototype.reject;function s(e,r){let t=e,n={};if(!(e instanceof Error)&&"RSVP"===r&&(null==e?void 0:e.target)){var s,i;let r=e.target;n.nodeProps={className:r.className,"data-testclass":null===(s=r.dataset)||void 0===s?void 0:s.testclass,"data-testid":null===(i=r.dataset)||void 0===i?void 0:i.testid,id:r.id,src:"SCRIPT"===r.tagName?r.src:null,tagName:r.tagName},t=new Error('Non-Error exception triggered. See "nodeProps" context for more information.')}o.default.captureException(t,{contexts:n,tags:{promiseType:r}})}e.Promise.Resolver.prototype.reject=function(e){let r=!!this._errbacks.length;n.call(this,e),!r&&(e instanceof ReferenceError||e instanceof SyntaxError||e instanceof TypeError)&&s(e,"YUI")},t.default.on("error",e=>{s(e,"RSVP")})}(),SM.currentModule=null}),"",{requires:["promise","sm","sm-sentry-init","rsvp"]});
YUI.add("sm-upload-options",(function(e){SM.currentModule="sm-upload-options";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-component-panel")),n=babelHelpers.interopRequireDefault(t("sm-icon"));const u=({cancelHref:t,cancelText:l,currentNodeName:u,isParentRootNode:r,onCancel:s,onUploadBulkFoldersClick:d,onUploadToExistingGalleryClick:i,onUploadToNewGalleryClick:c})=>{let p;return u&&(p=[u],r||p.unshift("..."),p.unshift("Home")),e.default.createElement("div",{className:"sm-upload-options sm-text-center"},e.default.createElement(o.default,null,e.default.createElement(o.default.Body,null,e.default.createElement("div",{className:"sm-h3 sm-emphasized",role:"heading"},"Upload Photos"),p&&e.default.createElement("div",{className:"sm-upload-options-breadcrumbs sm-text-ellipsis"},e.default.createElement("span",{className:"sm-upload-options-breadcrumb-label"},"Upload to:"),p.map((t,l)=>{let a=l===p.length-1;return e.default.createElement("span",{key:l},t,!a&&e.default.createElement(n.default,{name:"AngleBracketRight",size:n.default.SIZE_SMALL}))})),e.default.createElement("div",{className:"sm-upload-options-buttons sm-button-stacked-group sm-flex sm-flex-column sm-flex-items-center"},e.default.createElement(a.default,{onClick:c,"data-testid":"uploadoptions_newgallery_button"},"Into New Gallery"),e.default.createElement(a.default,{onClick:i,"data-testid":"uploadoptions_existinggallery_button"},"Into Existing Gallery"),d&&e.default.createElement(a.default,{onClick:d,"data-testid":"uploadoptions_folders_button"},"Upload Folders")))),e.default.createElement(a.default,{noChrome:!0,skin:a.default.SKIN_PRIMARY,onClick:s||null,href:t,"data-testid":"uploadoptions_cancel_button"},e.default.createElement("span",{className:"sm-label-large"},l)))};u.displayName="UploadOptions",u.propTypes={cancelHref:l.default.string,cancelText:l.default.string,currentNodeName:l.default.string,isParentRootNode:l.default.bool,onCancel:l.default.func,onUploadBulkFoldersClick:l.default.func,onUploadToExistingGalleryClick:l.default.func.isRequired,onUploadToNewGalleryClick:l.default.func.isRequired},u.defaultProps={cancelText:"Cancel"};var r=u;exports.default=r}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-component-panel","sm-icon"]});
YUI.add("sm-upload-utils",(function(e){SM.currentModule="sm-upload-utils";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageDimensions=async function(r){let t=new e.default.win.Image;t.src=r;try{return await t.decode(),{imageUrl:r,width:t.width,height:t.height}}catch(e){return}};var e=babelHelpers.interopRequireDefault(r("sm-dom-core"))}(),SM.currentModule=null}),"",{requires:["sm-dom-core"]});
YUI.add("sm-uri-deprecated",(function(e){SM.currentModule="sm-uri-deprecated";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";
/*!
Based on parseUri 1.2.2
(c) Steven Levithan <stevenlevithan.com>
MIT License
http://blog.stevenlevithan.com/archives/parseuri
*/function e(t,r){if(!(this instanceof e))return new e(t,r);if("string"!=typeof t)throw new TypeError("input must be a string");let n=e.KEYS,o=n.length,u=(r&&r.loose?e.REGEX_LOOSE:e.REGEX_STRICT).exec(t);for(;o--;)this[n[o]]=u[o]||null;this.hash&&(this.hash=decodeURIComponent(this.hash)),this.queryParams=e.parseQuery(this.query)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,e.prototype.toJSON=function(){let t,r={};for(let n=0,o=e.KEYS.length;n<o;++n)t=e.KEYS[n],r[t]=this[t];return r.queryParams=this.queryParams,r},e.prototype.toString=function(){return this.source},e.KEYS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],e.REGEX_LOOSE=/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/,e.REGEX_QUERY=/(?:^|&)([^&=]*)=?([^&]*)/g,e.REGEX_STRICT=/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,e.decodeComponent=function(e){try{return decodeURIComponent(e).replace(/\+/g," ")}catch(t){try{return e=e.replace(/%(?=[0-9a-fA-F]?[^0-9a-fA-F])/g,"%25"),decodeURIComponent(e).replace(/\+/g," ")}catch(e){return""}}},e.parseQuery=function(t){let r={};return t&&"string"==typeof t?(t.replace(e.REGEX_QUERY,(function(t,n,o){n&&(r[e.decodeComponent(n)]=""===o||e.decodeComponent(o))})),r):r},e.stringifyQuery=function(e){return Object.keys(e).map((function(t){let r=e[t];return null!=r&&(r=""+r),encodeURIComponent(t)+(r?"="+encodeURIComponent(r):"")})).join("&")};var t=e;exports.default=t}(),SM.currentModule=null}),"",{requires:["sm"]});
YUI.add("sm-user-model",(function(e){SM.currentModule="sm-user-model";var a,module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule};SM._requireShim;a=e.Base.create("sm-user",e.Model,[e.SM.ModelSyncAPI,e.ModelRelate],{apiEndpoint:"user",idAttribute:"NickName",apiCategories:{closeaccount:{method:"closeaccount"},downgradeaccount:{method:"downgradeaccount"},default:{expanded:{Plan:e.SM.Models.Plan}}},validate:function(e,a){var t,i,s=[],l=["FirstName","LastName","NickName","CardNum","Street1","City"];for(i=0;i<l.length;i++)if(""===e[l[i]]&&void 0!==this.changed[l[i]]){switch(l[i]){case"FirstName":t="First name";break;case"LastName":t="Last name";break;case"NickName":t="Nickname";break;case"CardNum":t="Credit card number",l[i]="CardNumLastFive";break;case"Street1":t="Street address 1";break;case"City":t="City"}s.push({Field:l[i],Message:t+" is required."})}if(s.length){var r=new Error;r.errors=s,a(r)}else a()},_sanitizeInt:function(e){return parseInt(e,10)},_sanitizeFloat:function(e){return parseFloat(e)},_sanitizeEmpty:function(a){return e.Lang.trim(a)}},{ATTRS:{NickName:{value:null},Email:{value:"",setter:"_sanitizeEmpty"},FirstName:{value:"",setter:"_sanitizeEmpty"},LastName:{value:"",setter:"_sanitizeEmpty"},NameDisplay:{value:0,setter:"_sanitizeInt"},ThisIsMeID:{value:0,setter:"_sanitizeInt"},ThisIsMeKey:{value:""},BioPic:{value:""},Bio:{value:"",setter:"_sanitizeEmpty"},StatsEmail:{value:0,setter:"_sanitizeInt"},WarnEmail:{value:0,setter:"_sanitizeInt"},UploadEmail:{value:0,setter:"_sanitizeInt"},NewsEmail:{value:0,setter:"_sanitizeInt"},CommentEmail:{value:0,setter:"_sanitizeInt"},SortBy:{value:""},ViewBy:{value:""},Month:{value:0},MonthBytes:{value:0},OriginalSizes:{value:0},ImageCount:{value:0},TotalSizes:{value:0},BWDateSent:{value:""},BWPercentSent:{value:0},AutoBWBuy:{value:0},Created:{value:""},StartDate:{value:""},FreeCreated:{value:""},RenewalDate:{value:""},RenewalMailSent:{value:""},RenewalStatus:{value:""},LastVisit:{value:""},LastIP:{value:""},Status:{value:""},InitialType:{value:""},ContactSupport:{value:0,setter:"_sanitizeInt"},Street1:{value:"",setter:"_sanitizeEmpty"},Street2:{value:"",setter:"_sanitizeEmpty"},City:{value:"",setter:"_sanitizeEmpty"},State:{value:"",setter:"_sanitizeEmpty"},Zip:{value:"",setter:"_sanitizeEmpty"},Country:{value:"",setter:"_sanitizeEmpty"},CountryAbbr:{value:"",setter:"_sanitizeEmpty"},PhoneNum:{value:""},CardExpMonth:{value:""},CardExpYear:{value:""},Domain:{value:""},DomainOnly:{value:""},CustomDomain:{value:"",setter:"_sanitizeEmpty"},GuestPass:{value:""},ViewPassword:{value:""},ViewPassHint:{value:""},FriendsView:{value:0,setter:"_sanitizeInt"},FamilyView:{value:0,setter:"_sanitizeInt"},PartnerID:{value:0},SearchUpdate:{value:0},W9:{value:""},TrialDays:{value:0},RootNodeID:{value:0},PlanID:{value:0,setter:"_sanitizeInt"},RenewalPlanID:{value:0},CardNumLastFiveRev:{value:""},HasValidCreditCard:{value:""},IsFreeTrialAccount:{value:""},EnableProfile:{value:0,setter:"_sanitizeInt"}},RELATIONSHIPS:{Plan:{type:"toOne",key:"PlanID",relatedModel:e.SM.Models.Plan,relatedKey:"PlanID"},UserSetting:{type:"toOne",key:"NickName",relatedModel:e.SM.Models.UserSetting,relatedKey:"NickName"}}}),e.namespace("SM.Models").User=module.exports=a,SM.currentModule=null}),"",{requires:["base","model","model-relate","sm-api","sm-apierror-model","sm-model-history","sm-model-sync-api","sm-plan-model","sm-usersetting-model"]});
YUI.add("sm-user-nav-container",(function(e){SM.currentModule="sm-user-nav-container";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n("react-redux"),s=babelHelpers.interopRequireDefault(n("sm-user-nav")),i=n("sm-page-selectors"),o=n("sm-page-nodepage-selectors"),t=n("sm-header-selectors"),r=n("sm-component-menu-selectors"),a=n("sm-component-menu-actions"),u=n("sm-header-actions"),d=n("sm-admin-menu-helpers"),m=n("sm-user-nav-helpers"),l=n("sm-header-constants");const c=(0,d.checkIfAssetsAreMinified)(),S=(0,d.checkIfHideNotificationsIsOn)(),g=(0,d.checkIfTimeStuffImagesIsOn)(),M=(0,d.checkIfTimeStuffIsOn)();var f=(0,e.connect)(e=>{let n,s,a,u,m,f,I,N,_,h=(0,i.getLoggedInUser)(e),A=(0,o.getNode)(e),p=(0,i.viewportIsLessThanMedium)(e);if(A&&(s=A.id,a=(0,o.getRealNodeType)(e),n=(0,t.getCanEditNodeSettings)(e)),h&&(u=h.nickName,m=(0,i.isLoggedInUserAdmin)(e),h.isTrial)){let{daysRemaining:n,autoStartSubscription:s}=(0,i.getLoggedInUserTrialData)(e);f=n,I=p&&!s&&f>=0}return m&&(N=(0,t.getAdminSubmenuData)(e),_={notificationsHidden:S,assetsAreMinified:c,disableEditOwnerProfile:!N.ownerNickName,timeStuffImagesIsOn:g,timeStuffIsOn:M,onJSCSSMinClick:d.onJSCSSMinClick,onJSCSSRawClick:d.onJSCSSRawClick,onToggleNotificationsClick:d.onToggleNotificationsClick}),{showEditProfile:!(0,i.isLoggedInUserSuspended)(e),userMenuIsOpen:(0,r.isVisible)(e,l.MENU_ID_USER_NAV_DROP_DOWN),viewportIsLessThanMedium:p,nodeId:s,nodeType:a,showNodeSettings:n,showSubscribeCTA:I,trialDaysRemaining:f,userIsAdmin:m,urlBioPhoto:(0,t.getLoggedInProfileImageUrl)(e),...N,..._,...(0,t.getUserMenuUrls)(e),_userNickName:u}},e=>({onUserMenuClick:()=>{e((0,u.toggleUserMenu)())},onNodeSettingsClick:()=>{e((0,u.editNodeSettings)())},onAdminMenuMouseEnter:()=>{e((0,a.show)(l.MENU_ID_ADMIN_NAV))},onAdminMenuMouseLeave:()=>{e((0,a.hide)(l.MENU_ID_ADMIN_NAV))},onAdminMenuJSCSSMouseEnter:()=>{e((0,a.show)(l.MENU_ID_ADMIN_NAV_JS_CSS))},onAdminMenuJSCSSMouseLeave:()=>{e((0,a.hide)(l.MENU_ID_ADMIN_NAV_JS_CSS))},onAdminMenuTimeMouseEnter:()=>{e((0,a.show)(l.MENU_ID_ADMIN_NAV_TIME_STUFF))},onAdminMenuTimeMouseLeave:()=>{e((0,a.hide)(l.MENU_ID_ADMIN_NAV_TIME_STUFF))}}),(e,n,s)=>{let i,{_userNickName:o}=e;o&&(i=()=>{(0,m.showEditProfilePanel)(o,e.isMobileViewport)});let t={};return e.userIsAdmin&&(t={onAdminEditOwnerProfile:()=>{(0,d.showAdminEditProfilePanel)(e.ownerNickName)},onToggleTimeStuffClick:()=>{(0,d.onToggleTimeStuffClick)(o)},onToggleTimeStuffImagesClick:()=>{(0,d.onToggleTimeStuffImagesClick)(o)}}),{...s,...e,...n,...t,onEditProfile:i}})(s.default);exports.default=f}(),SM.currentModule=null}),"",{requires:["react-redux","sm-user-nav","sm-page-selectors","sm-page-nodepage-selectors","sm-header-selectors","sm-component-menu-selectors","sm-component-menu-actions","sm-header-actions","sm-admin-menu-helpers","sm-user-nav-helpers","sm-header-constants"]});
YUI.add("sm-user-nav-helpers",(function(e){SM.currentModule="sm-user-nav-helpers";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showEditProfilePanel=function(r,s){if((0,l.trackMenuItemEvent)({label:"Edit My Profile",property:n.TRACKING_PROPERTY_USER_MENU}),s)return void(e.default.win.location="/settings/edit-profile");(0,t.default)(r)};var e=babelHelpers.interopRequireDefault(r("sm-dom")),t=babelHelpers.interopRequireDefault(r("sm-panel-profile-editor-launcher")),l=r("sm-header-tracking-helpers"),n=r("sm-header-constants")}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-panel-profile-editor-launcher","sm-header-tracking-helpers","sm-header-constants"]});
YUI.add("sm-user-nav-node-settings-container",(function(e){SM.currentModule="sm-user-nav-node-settings-container";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{connect:e}=SM.import("react-redux"),t=SM.import("sm-user-nav-node-settings"),{getNode:r,getNodeHighlightImageSizes:n}=SM.import("sm-page-nodepage-selectors");var s=e(e=>{let t,s=r(e),o=n(e);return o&&(t=o.smallImageUrl||o.largestImageUrl),{highlightImageUrl:t,name:s.name,nodeType:s.type}})(t);exports.default=s}(),SM.currentModule=null}),"",{requires:["react-redux","sm-user-nav-node-settings","sm-page-nodepage-selectors"]});
YUI.add("sm-user-nav-node-settings",(function(e){SM.currentModule="sm-user-nav-node-settings";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("sm-icon")),n=t("sm-page-nodepage-constants");const s=e=>{let t,{highlightImageUrl:s,name:r,nodeType:u}=e;return s&&(t={backgroundImage:"url('".concat(s,"')")}),a.default.createElement("div",null,a.default.createElement("div",{className:"sm-user-nav-node-title"},r),a.default.createElement("div",{className:"sm-flex"},a.default.createElement("div",{className:"sm-user-nav-node-thumb sm-flex sm-flex-items-center sm-flex-justify-center",style:t},!s&&a.default.createElement(l.default,{name:n.PLACEHOLDER_ICON_LOOKUP[u],size:l.default.SIZE_SMALL})),a.default.createElement("div",{className:"sm-user-nav-node-settings-label sm-flex sm-flex-self-center"},a.default.createElement(l.default,{name:n.SETTINGS_ICON_LOOKUP[u],size:l.default.SIZE_SMALL}),a.default.createElement("div",null,"".concat(n.NODE_TYPE_LABEL_MAP[u]," Settings")))))};s.displayName="Header.UserNav.NodeSettings",s.propTypes={name:e.default.string.isRequired,nodeType:e.default.oneOf([n.NODE_TYPE_ALBUM,n.NODE_TYPE_FOLDER,n.NODE_TYPE_PAGE]).isRequired,nodeHighlightImageUrl:e.default.string};var r=s;exports.default=r}(),SM.currentModule=null}),"",{requires:["prop-types","react","sm-icon","sm-page-nodepage-constants"]});
YUI.add("sm-user-nav",(function(e){SM.currentModule="sm-user-nav";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("js-cookie")),a=babelHelpers.interopRequireDefault(t("sm-dom")),l=babelHelpers.interopRequireDefault(t("prop-types")),n=babelHelpers.interopRequireDefault(t("react")),u=babelHelpers.interopRequireDefault(t("sm-analytics")),r=babelHelpers.interopRequireDefault(t("sm-badge")),s=babelHelpers.interopRequireDefault(t("sm-icon")),d=babelHelpers.interopRequireDefault(t("sm-component-menu")),i=babelHelpers.interopRequireDefault(t("sm-component-menu-heading")),o=babelHelpers.interopRequireDefault(t("sm-component-menu-item")),c=babelHelpers.interopRequireDefault(t("sm-component-menu-label")),m=t("sm-component-menu-constants"),f=babelHelpers.interopRequireDefault(t("sm-header-subscribe-button")),E=babelHelpers.interopRequireDefault(t("sm-user-nav-node-settings-container")),p=t("sm-header-tracking-helpers"),g=t("sm-header-constants");const h={USER_NAV:{storageKey:"dismissedGettingStartedBadge",cookieKey:g.COOKIE_DISMISSED_USER_MENU_BADGE,stateKey:"showUserNavBadge"},DASHBOARD:{storageKey:"dismissedDashboardBadge",cookieKey:g.COOKIE_DISMISSED_DASHBOARD_BADGE,stateKey:"showDashboardBadge"}};class M extends n.default.PureComponent{constructor(e){super(e),this.anchorRef=n.default.createRef(),this.state={[h.USER_NAV.stateKey]:this._canShowBadge(h.USER_NAV),[h.DASHBOARD.stateKey]:this._canShowBadge(h.DASHBOARD)}}render(){let e,t,a,{nodeId:l,nodeType:s,onEditProfile:i,onNavItemClick:M,onNodeSettingsClick:S,onUserMenuClick:_,searchScope:v,searchScopeValue:A,showEditProfile:I,showNodeSettings:C,showSubscribeCTA:T,trialDaysRemaining:k,urlAppsPage:b,urlBioPhoto:N,urlGettingStartedOverview:y,urlGiftOfSM:L,urlLogout:R,urlPerksPage:D,urlSearchPage:H,urlSettings:P,urlSharedWithMe:U,userIsAdmin:O,userMenuIsOpen:z,viewportIsLessThanMedium:B}=this.props;B&&(e=["tr-br"]);let w=this.state[h.USER_NAV.stateKey],K=this.state[h.DASHBOARD.stateKey];w&&(t=n.default.createElement(r.default,{skin:r.default.SKINS.INFO,"data-testid":"header_usermenu_badge"},"NEW")),K&&(a=n.default.createElement(r.default,{skin:r.default.SKINS.INFO,"data-testid":"usermenu_quickstart_badge"},"NEW"));let G={"data-testid":"usermenu_quickstart_link",...(0,p.getUserMenuLinkTrackingAttrs)({label:"Getting Started",nodeId:l,nodeType:s})},V=!!O&&!B,Y=!!B&&C,x=B&&!!H,q=H;return A&&v&&(q+="?scope=".concat(v,"&scopeValue=").concat(A)),n.default.createElement("div",{className:"sm-position-relative"},n.default.createElement("button",{"aria-label":"User menu",className:"sm-user-nav-button","data-has-bio-image":Boolean(N)||null,"data-testid":"header_usernav_button",onClick:()=>{this._dismissBadge(h.USER_NAV),_()},ref:this.anchorRef},n.default.createElement("div",{className:"sm-page-header-button-circle sm-user-nav-button-avatar-wrapper","data-expanded":z||null},N?n.default.createElement("img",{src:N,className:""}):n.default.createElement("svg",{viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M16 14a4 4 0 014 4v2a1 1 0 11-2 0v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2a1 1 0 11-2 0v-2a4 4 0 014-4h8zM12 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z",fill:"currentColor"})),!!t&&t)),n.default.createElement(d.default,{menuId:g.MENU_ID_USER_NAV_DROP_DOWN,className:"sm-user-nav sm-vh",alignments:e,anchor:this.anchorRef.current},V&&this._renderAdminMenu(),V&&n.default.createElement("li",{className:"sm-component-menu-separator",role:"separator"}),T&&n.default.createElement(o.default,{className:"sm-user-nav-subscribe sm-flex-wrap sm-flex-justify-center"},n.default.createElement(c.default,{className:"sm-text-large"},1===k?"1 Day":"".concat(k," Days")," Left In Your Trial"),n.default.createElement(f.default,{trialDaysRemaining:k,trackingContext:u.default.SCREEN_CONTEXTS.SECTION_USER_MENU})),T&&n.default.createElement("li",{className:"sm-component-menu-separator",role:"separator"}),Y&&n.default.createElement(o.default,{className:"sm-user-nav-node",onClick:S},n.default.createElement(E.default,null)),Y&&n.default.createElement("li",{className:"sm-component-menu-separator",role:"separator"}),!!y&&n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:y,dataAttrs:G,onClick:e=>{this._dismissBadge(h.DASHBOARD),M(e)}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M9 20.5V19c-.6 0-1-.4-1-1 0-1.4-.4-2.2-1.8-3.9l-.3-.4C4.5 11.9 4 10.8 4 9c0-4.4 3.6-8 8-8s8 3.6 8 8c0 1.8-.5 2.9-1.9 4.7l-.7.9C16.3 16 16 16.8 16 18c0 .6-.4 1-1 1v3c0 .5-.4.9-.9 1H10c-.5 0-.9-.4-1-.9v-1.6zm4-1.5h-2v2h2v-2zM12 3C8.7 3 6 5.7 6 9c0 1.2.4 2 1.5 3.5l.5.6c1.1 1.4 1.7 2.4 1.9 3.6v.2H14c.2-1.3.8-2.4 1.9-3.9l.5-.6C17.6 11 18 10.2 18 9c0-3.3-2.7-6-6-6z",fill:"currentColor"})),n.default.createElement(c.default,null,"Quickstart Guide"),!!a&&a),x&&n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:q,onClick:M,dataAttrs:{"data-testid":"usermenu_search_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"Search My Photos",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M11.5 5a6.5 6.5 0 015.25 10.334l2.957 2.959a1 1 0 01-1.414 1.414l-2.96-2.957A6.5 6.5 0 1111.5 5zm0 2a4.5 4.5 0 100 9 4.5 4.5 0 000-9z",fill:"currentColor"})),n.default.createElement(c.default,null,"Search My Photos")),!!I&&n.default.createElement(o.default,{dataAttrs:{"data-testid":"usermenu_editprofile_menuitem"},onClick:i},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M11.165 4.647a1.024 1.024 0 010 2.047H7.07c-.566 0-1.024.458-1.024 1.023v9.212c0 .566.458 1.024 1.024 1.024h9.212c.565 0 1.023-.458 1.023-1.024v-4.094a1.024 1.024 0 012.047 0v4.094A3.07 3.07 0 0116.283 20H7.07A3.07 3.07 0 014 16.93V7.716a3.07 3.07 0 013.07-3.07h4.095zM21.1 2.899c1.199 1.2 1.199 3.32 0 4.519l-7.165 7.164c-.151.151-.345.251-.556.286l-3.809.636a1.024 1.024 0 01-1.172-1.21l.739-3.706c.04-.198.137-.38.28-.524L16.582 2.9c1.2-1.199 3.32-1.199 4.519 0zM18.03 4.347l-6.946 6.945-.388 1.949 2.024-.338 6.933-6.933c.4-.4.4-1.223 0-1.623-.4-.4-1.223-.4-1.623 0z",fill:"currentColor"})),n.default.createElement(c.default,null,"Edit My Profile")),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:P,onClick:M,dataAttrs:{"data-testid":"usermenu_accountsettings_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"Account Settings",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 11.901c0-1.681 1.3-2.967 3-2.967s3 1.286 3 2.967-1.3 2.967-3 2.967c-1.6 0-3-1.286-3-2.967zm1.5 0c0 .791.7 1.484 1.5 1.484s1.5-.693 1.5-1.484-.7-1.483-1.5-1.483-1.5.692-1.5 1.483z",fill:"currentColor"}),n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7 14.077c-.3 0-.4.099-.5.297 0 .197 0 .395.2.79.5.396.7.99.7 1.583 0 .594-.2 1.187-.6 1.583-.9.89-2.3.89-3.2 0-.2-.1-.4-.198-.6-.1-.2 0-.3.199-.3.396v.1C14.4 20.01 13.3 21 12.1 21c-1.3 0-2.3-1.088-2.3-2.275 0-.296-.1-.395-.3-.494-.3-.1-.5 0-.6.099-.9.89-2.3.89-3.2 0-.9-.89-.9-2.275 0-3.165.1-.198.2-.396.1-.594 0-.197-.2-.296-.4-.296h-.1C4 14.275 3 13.187 3 12c0-1.286 1-2.275 2.3-2.275.2 0 .4-.099.5-.296.1-.297 0-.495-.1-.594-.5-.395-.7-.989-.7-1.582 0-.594.2-1.187.6-1.583.9-.89 2.3-.89 3.2 0 .2.198.4.198.6.1h.1c.1-.1.2-.199.2-.396v-.1C9.7 3.99 10.8 3 12 3c1.2 0 2.3.989 2.3 2.077 0 .297.1.396.3.494.2.1.4 0 .5-.098.4-.495 1-.693 1.6-.693.6 0 1.2.297 1.6.693.9.89.9 2.274 0 3.164-.1.198-.2.396-.1.594v.099c.1.099.2.197.4.197h.1c1.3 0 2.3 1.088 2.3 2.275 0 1.286-1.1 2.275-2.3 2.275zm-1.4 1.978c-.7-.692-.8-1.484-.5-2.275.4-.692 1.1-1.187 1.7-1.187.5 0 .8-.296.8-.692a.68.68 0 00-.7-.692h-.1c-.8 0-1.5-.495-1.8-1.187-.1-.099-.1-.099-.1-.198-.2-.791 0-1.582.5-2.077.4-.296.4-.791.1-1.088a.768.768 0 00-.5-.197c-.2 0-.4.098-.5.197-.7.693-1.6.792-2.3.495-.7-.297-1.2-.99-1.2-1.78 0-.495-.3-.792-.7-.792-.4 0-.7.297-.7.693v.099c0 .79-.5 1.483-1.2 1.78-.1.099-.1.099-.2.099-.8.198-1.6 0-2.1-.495-.2-.198-.4-.296-.6-.296-.06.03-.12.05-.176.07-.134.046-.254.087-.324.226-.1.1-.2.297-.2.495s.1.395.2.296c.7.693.8 1.484.5 2.275-.3.791-1 1.286-1.8 1.286-.5 0-.8.297-.8.692 0 .396.3.693.7.693h.2c.8 0 1.5.494 1.8 1.186.3.693.2 1.583-.4 2.176-.2.198-.3.396-.3.594 0 .197.1.395.2.494.2.297.7.297 1 0 .5-.396 1-.593 1.5-.593.237 0 .412.062.623.136l.177.061c.8.297 1.3.99 1.3 1.78 0 .495.3.792.7.792.4 0 .7-.297.7-.692v-.1c0-.79.5-1.483 1.2-1.78.7-.296 1.6-.197 2.2.396.4.396.8.396 1.1.099.1-.099.2-.297.2-.495 0-.197-.1-.395-.2-.494z",fill:"currentColor"})),n.default.createElement(c.default,null,"Account Settings")),n.default.createElement("li",{className:"sm-component-menu-separator",role:"separator"}),!!U&&n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:U,onClick:M,dataAttrs:{"data-testid":"usermenu_sharedwithme_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"Shared With Me",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M6.5 5H20c.6 0 1 .4 1 1v9.5c0 .3-.2.5-.5.5s-.5-.2-.5-.5v-9c0-.3-.2-.5-.5-.5h-13c-.3 0-.5-.2-.5-.5s.2-.5.5-.5z",fill:"currentColor"}),n.default.createElement("path",{d:"M18 7H4.5c-.3 0-.5.2-.5.5s.2.5.5.5h13c.3 0 .5.2.5.5v9c0 .3.2.5.5.5s.5-.2.5-.5V8c0-.6-.4-1-1-1z",fill:"currentColor"}),n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9H4c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h12c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-1 8H5v-6h10v6z",fill:"currentColor"})),n.default.createElement(c.default,null,"Shared With Me")),!!B&&n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:g.HELP_PAGE_URL,onClick:M,dataAttrs:{"data-testid":"usermenu_support_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"Support",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 10a1 1 0 110 2 1 1 0 010-2zm1.914-6.62c1.318 1.317 1.222 2.914-.18 4.413l-.154.16-.925.803a1 1 0 01-1.4-1.422l.089-.088.873-.755c.766-.767.803-1.176.283-1.697-.521-.521-.93-.484-1.697.283a1 1 0 01-1.415-1.415c1.497-1.496 3.161-1.647 4.526-.282z",fill:"currentColor"})),n.default.createElement(c.default,null,"Support")),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:D,onClick:M,dataAttrs:{"data-testid":"usermenu_smugmugperks_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"SmugMug Perks",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M12 2a7 7 0 013.971 12.765l.019.094 1 7a1 1 0 01-1.437 1.035L12 21.118l-3.553 1.776A1 1 0 017.01 21.86l1-7c.005-.033.01-.064.018-.095A7 7 0 0112 2zm2.088 13.683c-.66.206-1.36.317-2.088.317-.727 0-1.428-.11-2.088-.317l-.652 4.569 2.293-1.146a1 1 0 01.894 0l2.293 1.146-.652-4.569zM12 4a5 5 0 100 10 5 5 0 000-10z",fill:"currentColor"})),n.default.createElement(c.default,null,"SmugMug Perks")),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:b,onClick:M,dataAttrs:{"data-testid":"usermenu_smugmugapps_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"SmugMug Apps",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M16 2a3 3 0 013 3v14a3 3 0 01-3 3H8a3 3 0 01-3-3V5a3 3 0 012.824-2.995L8 2h8zm0 2H8a1 1 0 00-1 1v14a1 1 0 001 1h8a1 1 0 001-1V5a1 1 0 00-1-1zm-4 13a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor"})),n.default.createElement(c.default,null,"SmugMug Apps")),!!L&&n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:L,onClick:M,dataAttrs:{"data-testid":"usermenu_giftofsmugmug_menuitem","data-link-tracking-category":u.default.CATEGORY.GIFT_OF_SMUGMUG,"data-link-tracking-action":u.default.ACTION.GIFT_OF_SMUGMUG_START,"data-link-tracking-label":"Gift SmugMug","data-link-tracking-property":"Header"}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M19 6.347c0 .225-.032.44-.093.641H20a1 1 0 011 1v4.004a1 1 0 01-1 1.001V20A1 1 0 0119 21H5a1 1 0 01-1-1v-7.007a1 1 0 01-1-1V7.988a1 1 0 011-1.001h1.093A2.205 2.205 0 015 6.348c0-2.768 3.068-4.523 5.634-2.416a6.44 6.44 0 011.367 1.56 6.395 6.395 0 011.365-1.56C15.932 1.824 19 3.579 19 6.347zm-8 6.646H6v6.005h5v-6.005zm7 0h-5v6.005h5v-6.005zM11 8.99H5v2.002h6V8.989zm8 0h-6v2.002h6V8.99zM7 6.348c0 .066.06.164.255.287.35.22.937.36 1.745.354h1.552l-.14-.257a4.523 4.523 0 00-1.046-1.252C8.18 4.506 7 5.18 7 6.347zm7.634-.868a4.636 4.636 0 00-1.186 1.509h1.559c.8.005 1.389-.133 1.738-.354.195-.123.255-.22.255-.287 0-1.166-1.181-1.841-2.366-.868z",fill:"currentColor"})),n.default.createElement(c.default,null,"Gift SmugMug")),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:R,onClick:M,dataAttrs:{"data-testid":"usermenu_logout_menuitem",...(0,p.getUserMenuLinkTrackingAttrs)({label:"Log Out",nodeId:l,nodeType:s})}},n.default.createElement("svg",{className:"sm-user-nav-icon",viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M10 20a1 1 0 01-.883.993L9 21H6a3 3 0 01-2.995-2.824L3 18V6a3 3 0 012.824-2.995L6 3h3a1 1 0 01.117 1.993L9 5H6a1 1 0 00-.993.883L5 6v12a1 1 0 00.883.993L6 19h3a1 1 0 011 1zm10.998-7.952v.011a.994.994 0 01-.006.064l-.005.029a.986.986 0 01-.28.555l.061-.067a.968.968 0 01-.047.054l-.014.013-4 4a1 1 0 01-1.414-1.414L17.585 13H8.998a1 1 0 01-.117-1.993L8.998 11h8.586L15.29 8.707a1 1 0 011.32-1.497l.094.083 3.987 3.985.015.015c.045.045.085.093.12.144l.025.04a.991.991 0 01.06.112l.009.02a.813.813 0 01.062.203l.002.018a.935.935 0 01.014.218z",fill:"currentColor"})),n.default.createElement(c.default,null,"Log Out"))))}_canShowBadge({cookieKey:t,storageKey:l}){let{trialDaysRemaining:n}=this.props,u=a.default.win.location.pathname===g.URL_PATH_GETTING_STARTED_OVERVIEW,r=e.default.get(t);return r||"true"!==localStorage.getItem(l)||(r=!0,this._setDismissedBadge(t)),!(u||!n||r)}_dismissBadge({stateKey:e,cookieKey:t}){this.state[e]&&(this._setDismissedBadge(t),this.setState({[e]:!1}))}_setDismissedBadge(t){e.default.set(t,"1",{domain:SM.env.host.session,path:"/",expires:365,secure:!0,sameSite:"Lax"})}_renderAdminMenu(){let{assetsAreMinified:e,disableEditOwnerProfile:t,notificationsHidden:a,onAdminEditOwnerProfile:l,onAdminMenuJSCSSMouseEnter:u,onAdminMenuJSCSSMouseLeave:r,onAdminMenuMouseEnter:f,onAdminMenuMouseLeave:E,onAdminMenuTimeMouseEnter:p,onAdminMenuTimeMouseLeave:h,onJSCSSMinClick:M,onJSCSSRawClick:S,onNavItemClick:_,onToggleNotificationsClick:v,onToggleTimeStuffClick:A,onToggleTimeStuffImagesClick:I,timeStuffImagesIsOn:C,timeStuffIsOn:T,urlAdminAlbumInfo:k,urlAdminHome:b,urlAdminUserHome:N,urlAdminUserInfo:y,urlAdminUserSettings:L}=this.props;return n.default.createElement(o.default,{onMouseEnter:f,onMouseLeave:E},n.default.createElement(s.default,{name:"Lock",size:s.default.SIZE_SMALL}),n.default.createElement(c.default,null,"Admin"),n.default.createElement(d.default,{alignments:m.SUBMENU_ALIGNMENTS,menuId:g.MENU_ID_ADMIN_NAV},n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:b,onClick:_},"Admin Home"),n.default.createElement(i.default,null,"User Tools"),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:N,onClick:_,disabled:!N},"User Homepage"),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:y,onClick:_,disabled:!y},"User Info"),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:L,onClick:_,disabled:!L},"User Account Settings"),n.default.createElement(o.default,{disabled:t,onClick:l},"User Edit Profile"),n.default.createElement(o.default,{type:m.ITEM_TYPE_LINK,href:k,onClick:_,disabled:!k},"Album Info"),n.default.createElement(i.default,null,"Admin Tools"),n.default.createElement(o.default,{onMouseEnter:u,onMouseLeave:r},n.default.createElement(c.default,null,"JS/CSS Levels"),n.default.createElement(d.default,{menuId:g.MENU_ID_ADMIN_NAV_JS_CSS},n.default.createElement(o.default,{type:m.ITEM_TYPE_RADIO,radiogroup:"jsCssLevelsRadioGroup",onClick:M,initiallyChecked:e},"Min"),n.default.createElement(o.default,{type:m.ITEM_TYPE_RADIO,radiogroup:"jsCssLevelsRadioGroup",onClick:S,initiallyChecked:!e},"Raw"))),n.default.createElement(o.default,{onMouseEnter:p,onMouseLeave:h},n.default.createElement(c.default,null,"Time Stuff"),n.default.createElement(d.default,{menuId:g.MENU_ID_ADMIN_NAV_TIME_STUFF},n.default.createElement(o.default,{type:m.ITEM_TYPE_CHECKBOX,onClick:A,initiallyChecked:T},"Time Stuff"),n.default.createElement(o.default,{type:m.ITEM_TYPE_CHECKBOX,onClick:I,initiallyChecked:C},"Images"))),n.default.createElement(o.default,{type:m.ITEM_TYPE_CHECKBOX,onClick:v,initiallyChecked:a},"Hide Notifications")))}}exports.default=M,M.displayName="Header.UserNav",M.propTypes={searchScope:l.default.string,searchScopeValue:l.default.string,onEditProfile:l.default.func,onNodeSettingsClick:l.default.func,onNavItemClick:l.default.func,onUserMenuClick:l.default.func,showEditProfile:l.default.bool,showNodeSettings:l.default.bool,showSubscribeCTA:l.default.bool,trialDaysRemaining:l.default.number,urlAppsPage:l.default.string,urlBioPhoto:l.default.string,urlGettingStartedOverview:l.default.string,urlLogout:l.default.string,urlPerksPage:l.default.string,urlSearchPage:l.default.string,urlSettings:l.default.string,urlSharedWithMe:l.default.string,urlGiftOfSM:l.default.string,userIsAdmin:l.default.bool,userMenuIsOpen:l.default.bool,viewportIsLessThanMedium:l.default.bool.isRequired,nodeId:l.default.string,nodeType:l.default.string,assetsAreMinified:l.default.bool,disableEditOwnerProfile:l.default.bool,onAdminEditOwnerProfile:l.default.func,notificationsHidden:l.default.bool,onAdminMenuJSCSSMouseEnter:l.default.func,onAdminMenuJSCSSMouseLeave:l.default.func,onAdminMenuMouseEnter:l.default.func,onAdminMenuMouseLeave:l.default.func,onAdminMenuTimeMouseEnter:l.default.func,onAdminMenuTimeMouseLeave:l.default.func,onJSCSSMinClick:l.default.func,onJSCSSRawClick:l.default.func,onToggleNotificationsClick:l.default.func,onToggleTimeStuffClick:l.default.func,onToggleTimeStuffImagesClick:l.default.func,timeStuffImagesIsOn:l.default.bool,timeStuffIsOn:l.default.bool,urlAdminAlbumInfo:l.default.string,urlAdminHome:l.default.string,urlAdminUserHome:l.default.string,urlAdminUserInfo:l.default.string,urlAdminUserSettings:l.default.string},M.defaultProps={showEditProfile:!0,onNavItemClick:()=>{}}}(),SM.currentModule=null}),"",{requires:["js-cookie","sm-dom","prop-types","react","sm-analytics","sm-badge","sm-icon","sm-component-menu","sm-component-menu-heading","sm-component-menu-item","sm-component-menu-label","sm-component-menu-constants","sm-header-subscribe-button","sm-user-nav-node-settings-container","sm-header-tracking-helpers","sm-header-constants"]});
YUI.add("sm-usersetting-model",(function(e){SM.currentModule="sm-usersetting-model";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const t=e.Base.create("sm-usersetting",e.Model,[e.SM.ModelSyncAPI,e.ModelRelate],{apiEndpoint:"usersetting",idAttribute:"NickName",_sanitizeInt:function(e){return parseInt(e,10)},_sanitizeEmpty:function(t){return null===t?"":e.Lang.trim(t)}},{ATTRS:{NickName:{value:null},News:{value:0},ProSales:{value:0},Referrals:{value:0},Bio:{value:null},Keywords:{value:0},Dates:{value:0},Galleries:{value:0},FriendsAndFamily:{value:0},Featured:{value:0},Communities:{value:0},CommentApproval:{value:0},NumKeywords:{value:0},DateBy:{value:""},First:{value:""},Second:{value:""},Third:{value:""},PhotoRank:{value:0},NumPhotoRank:{value:0},SmugMaps:{value:0},BioPosition:{value:0},SmugMapsPosition:{value:0},FriendsAndFamilyPosition:{value:0},CommunitiesPosition:{value:0},PhotoRankPosition:{value:0},FeaturedPosition:{value:0},DatesPosition:{value:0},KeywordsPosition:{value:0},GalleriesPosition:{value:0},Backprinting:{value:""},ContactEmail:{value:""},WorldSearchable:{value:0},SmugSearchable:{value:0},PrintVendor:{value:""},ColorCorrection:{value:0},SEO:{value:""},RecentPhotosBox:{value:0},RecentPhotosBoxPosition:{value:0},SlideshowBox:{value:0},SlideshowBoxPosition:{value:0},NumRecentPhotos:{value:0},PhotoVideoBox:{value:0},PhotoVideoBoxPosition:{value:0},SlideshowBoxSettings:{value:""},StudioName:{value:""},PhotoVideoBoxSettings:{value:""},MobileSite:{value:0},Feeds:{value:0},ValidEmail:{value:0,setter:"_sanitizeInt"},Collectable:{value:0},MetaDescription:{value:"",setter:"_sanitizeEmpty"},FilenameKeywording:{value:0},CollectionAlbumID:{value:0},MetaKeywords:{value:"",setter:"_sanitizeEmpty"},QuickShare:{value:0},AutoPublish:{value:0},FacebookFollow:{value:"",setter:"_sanitizeEmpty"},FacebookPixelID:{value:"",setter:"_sanitizeEmpty"},TwitterFollow:{value:"",setter:"_sanitizeEmpty"},BlogFollow:{value:"",setter:"_sanitizeEmpty"},BeSocialGeo:{value:0},BeSocialKeywords:{value:0},BeSocialShorten:{value:0},BeSocialLayout:{value:0},BeSocialLinkStyle:{value:0},BeSocialSize:{value:0},BoutiquePackagingStartCost:{value:""},BoutiquePackaging:{value:0,setter:"_sanitizeInt"},InterceptAddress:{value:0},InterceptShipping:{value:0,setter:"_sanitizeInt"},BitlyAPIKey:{value:null,setter:"_sanitizeEmpty"},BitlyAPILogin:{value:null,setter:"_sanitizeEmpty"},EventsBox:{value:0},EventsBoxPosition:{value:0},GoogleAnalytics:{value:"",setter:"_sanitizeEmpty"},WebmasterToolsVerification:{value:"",setter:"_sanitizeEmpty"},StrippedWebmasterToolsVerification:{value:"",setter:"_sanitizeEmpty"},PinterestVerification:{value:"",setter:"_sanitizeEmpty"},StrippedPinterestVerification:{value:"",setter:"_sanitizeEmpty"},StatCounterProjectID:{value:"",setter:"_sanitizeEmpty"},StatCounterSecurityID:{value:"",setter:"_sanitizeEmpty"},PricelistMigration:{value:0},VRNCountry:{value:"",setter:"_sanitizeEmpty"},VRN:{value:"",setter:"_sanitizeEmpty"},MetaTitle:{value:"",setter:"_sanitizeEmpty"},LightboxStyle:{value:""},RCPText:{value:""}}});e.namespace("SM.Models").UserSetting=t;var a=t;exports.default=a}(),SM.currentModule=null}),"",{requires:["base","model","model-relate","sm-api","sm-apierror-model","sm-model-history","sm-model-sync-api"]});
YUI.add("sm-usersettinglist-model",(function(e){SM.currentModule="sm-usersettinglist-model";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=e.Base.create("sm-models-usersettinglist",e.ModelList,[],{model:e.SM.Models.UserSetting},{ATTRS:{}});e.namespace("SM.Models").UserSettingList=s;var t=s;exports.default=t}(),SM.currentModule=null}),"",{requires:["base","model-list","sm-usersetting-model"]});
YUI.add("sm-video-player",(function(e){SM.currentModule="sm-video-player";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.HLS_SUPPORTED=exports.STRETCHING_TYPES=exports.MIME_TYPES=void 0;var e,l=babelHelpers.interopRequireDefault(t("classnames")),r=babelHelpers.interopRequireDefault(t("prop-types")),s=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("sm-dom")),n=babelHelpers.interopRequireDefault(t("sm-smuglog")),o=babelHelpers.interopRequireDefault(t("hls.js"));const u={HLS:"application/x-mpegURL",MP4:"video/mp4"};exports.MIME_TYPES=u;const i={AUTO:"auto",FILL:"fill",NONE:"none",RESPONSIVE:"responsive"};exports.STRETCHING_TYPES=i;const d=Boolean(null===(e=o.default.isSupported)||void 0===e?void 0:e.call(o.default));exports.HLS_SUPPORTED=d;class p extends s.default.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"meVideoElementContainerRef",s.default.createRef()),babelHelpers.defineProperty(this,"onFullscreenChange",()=>{let e=this.meVideoElementContainerRef.current;e&&!a.default.doc.webkitFullscreenElement&&(e.style.display="none",setTimeout(()=>{e.style.display=""},0))}),babelHelpers.defineProperty(this,"onMediaSuccess",(e,t,l)=>{a.default.win.Hls&&e.hlsPlayer&&e.hlsPlayer.on(a.default.win.Hls.Events.MANIFEST_PARSED,(t,r)=>{this.props.onHLSManifestParsed(r.levels,e.hlsPlayer,l)}),e.addEventListener("pause",this.onPause),e.addEventListener("play",this.onPlay)}),babelHelpers.defineProperty(this,"onMediaError",(...e)=>{this.props.onError(...e)}),babelHelpers.defineProperty(this,"onPause",(...e)=>{this.props.onPause(...e)}),babelHelpers.defineProperty(this,"onPlay",(...e)=>{this.props.onPlay(...e)})}render(){let{enableKeyboard:e,onHLSManifestParsed:t,onError:r,onSuccess:a,sources:n,stretching:o,...u}=this.props;Array.isArray(n)||(n=[n]),n=n.map(({type:e,url:t})=>s.default.createElement("source",{key:t,src:t,type:e||null}));let d=o===i.RESPONSIVE,p=["sm-video-player",{"sm-flex":d,"sm-flex-items-center":d}];return s.default.createElement("div",{className:(0,l.default)(p),"data-controls-hidden":!u.controls||null,"data-stretching":o,ref:this.meVideoElementContainerRef},s.default.createElement("video",babelHelpers.extends({},u,{preload:"none"}),n))}componentDidMount(){a.default.win.Hls||(a.default.win.Hls=o.default);let e=this.meVideoElementContainerRef.current.firstChild;this.props.muted&&e.setAttribute("muted",!0);let t=!a.default.doc.body.classList.contains("sm-page-hasbackground-video");this._mePlayer=new a.default.win.MediaElementPlayer(e,{enableKeyboard:this.props.enableKeyboard,error:this.onMediaError,features:["airplay"],hls:{debug:!!SM.__hlsDebug,startLevel:-1,xhrSetup:e=>{e.withCredentials=!0}},pauseOtherPlayers:t,stretching:this.props.stretching,success:this.onMediaSuccess,useDefaultControls:!0}),a.default.doc.addEventListener("webkitfullscreenchange",this.onFullscreenChange)}componentWillUnmount(){let e=this._mePlayer;try{e&&(e.paused||e.pause(),e.remove())}catch(e){n.default.add("sm-video-player",{[n.default.FIELD_ERROR]:e.toString(),[n.default.FIELD_MESSAGE]:"Error cleaning up",url:a.default.doc.URL},n.default.LEVEL_WARNING)}this._mePlayer=null}}exports.default=p,p.displayName="VideoPlayer";const f=r.default.shape({type:r.default.oneOf(Object.values(u)),url:r.default.string.isRequired});p.propTypes={controls:r.default.bool,enableKeyboard:r.default.bool,loop:r.default.bool,muted:r.default.bool,poster:r.default.string,sources:r.default.oneOfType([f,r.default.arrayOf(f)]).isRequired,stretching:r.default.oneOf(Object.values(i)),onError:r.default.func,onPause:r.default.func,onPlay:r.default.func,onHLSManifestParsed:r.default.func},p.defaultProps={enableKeyboard:!0,stretching:i.AUTO,onError:()=>{},onHLSManifestParsed:()=>{},onPause:()=>{},onPlay:()=>{}}}(),SM.currentModule=null}),"",{requires:["classnames","hls.js","react","react-dom","mediaelement","mediaelement-plugin-airplay","sm-dom","sm-smuglog"]});
YUI.add("sm-video-view",(function(e){SM.currentModule="sm-video-view";var module=SM.modules[SM.currentModule]={exports:{},name:SM.currentModule},t=SM._requireShim;!function(){"use strict";var i=babelHelpers.interopRequireDefault(t("react")),r=babelHelpers.interopRequireDefault(t("react-dom")),s=babelHelpers.interopRequireWildcard(t("sm-video-player"));const a=e.Base.create("sm-video-view",e.View,[e.EventTarget],{containerTemplate:'<div class="sm-video"></div>',initializer:function(){var t=this.get("model");this._eventHandlers=[],this._playerId=e.guid(),t&&(this._eventHandlers.push(t.after("change",this._afterModelChange,this)),this._eventHandlers.push(t.after("destroy",this.destroy,this))),this._height=this.get("height"),this._width=this.get("width")},destructor:function(){new e.EventHandle(this._eventHandlers).detach();let t=this.get("container");r.default.unmountComponentAtNode(t.getDOMNode()),t.remove(!0)},render:function(){if(this.get("center")&&this.get("container").addClass("sm-flex sm-flex-items-center sm-flex-justify-center"),this._renderHTML5(),this.get("verticalCenter")){var e,t=this.get("container");e=(t.get("parentNode").get("offsetHeight")-t.get("offsetHeight"))/2,t.setStyle("paddingTop",e+"px")}return this},resize:function(e){return this.set("size",e),this.render(),this},_afterModelChange:function(e){e.changed&&e.changed.exif||this.render()},_getVideoAttributes:function(){var e=this.get("model"),t=e.getLargestVideoSizeForContainer(this.get("size")),i=e.get("Sizes"),r=i[t],a=this._width?this._width:r.width,n=this._height?this._height:r.height,h=r.url,o=e.getLargestImageSizeForContainer(this.get("size")),d=e.getUrlForSize(o);return s.HLS_SUPPORTED&&i.QTStream&&i.QTStream.usable&&(h=i.QTStream.url),{id:this._playerId,src:h,width:a,height:n,style:"",poster:d||"",autoplay:this.get("autoPlay")?"autoplay":"",controlsList:e.get("CanDownload")?"":'controlsList="nodownload"'}},_renderHTML5:function(){var e=this.get("container"),t=this.get("model"),a=t.getLargestVideoSizeForContainer(this.get("size")),n=t.get("Sizes"),h=n[a],o=this._width?this._width:h.width,d=this._height?this._height:h.height,l=this._getVideoAttributes();let u;u=s.HLS_SUPPORTED&&n.QTStream&&l.src===n.QTStream.url?s.MIME_TYPES.HLS:s.MIME_TYPES.MP4;let g={};if(this.get("responsive")){g.stretching=s.STRETCHING_TYPES.RESPONSIVE,o="100%",d="100%",g.style={maxWidth:"100%",maxHeight:"100%"};let i=n[t.getLargestVideoSize()];e.setStyle("maxWidth","".concat(i.width,"px")),e.setStyle("maxHeight","".concat(i.height,"px"))}g.width=o,g.height=d,r.default.render(i.default.createElement(s.default,babelHelpers.extends({autoPlay:!!l.autoplay||void 0,controls:!0,enableKeyboard:this.get("enableKeyboard"),id:l.id,poster:l.poster,sources:{type:u,url:l.src}},g)),e.getDOMNode())}},{ATTRS:{center:{value:!0},size:{value:null},width:{value:0},height:{value:0},autoPlay:{value:!1},canShare:{value:!0},showAlbumLink:{value:!0},verticalCenter:{value:!1}}});e.namespace("SM.Views").Video=module.exports=a}(),SM.currentModule=null}),"",{requires:["base","react","react-dom","sm-video-player","view"]});
YUI.add("sm-vimeo",(function(e){SM.currentModule="sm-vimeo";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),r=babelHelpers.interopRequireDefault(t("react"));const l=({center:e,id:t,width:l,height:a,autoplay:u}={})=>{let o=u?1:0,i="https://player.vimeo.com/video/".concat(t,"?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=").concat(o);return r.default.createElement("iframe",{className:e?"sm-vimeo-center":"",src:i,width:l,height:a,frameBorder:"0",webkitAllowFullScreen:!0,allowFullScreen:!0})};l.propTypes={center:e.default.bool,id:e.default.number.isRequired,width:e.default.number,height:e.default.number,autoplay:e.default.bool},l.defaultProps={width:"",height:"",autoplay:!1};var a=l;exports.default=a}(),SM.currentModule=null}),"",{requires:["sm","react","classnames"]});
YUI.add("sm-webview",(function(e){SM.currentModule="sm-webview";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendWebviewMessage=function(r){let i=e.default.win;if(!i)return;try{var s,u,n;if(void 0!==i.webkit)null===(s=i.webkit.messageHandlers)||void 0===s||null===(u=s.iosApp)||void 0===u||u.postMessage(r);else null===(n=i.androidApp)||void 0===n||n.postMessage(JSON.stringify(r))}catch(e){t.default.withScope(i=>{i.setExtra("message",r),t.default.captureException(e)})}};var e=babelHelpers.interopRequireDefault(r("sm-dom-core")),t=babelHelpers.interopRequireDefault(r("sm-sentry-init"))}(),SM.currentModule=null}),"",{requires:["sm-dom-core","sm-sentry-init"]});
YUI.add("sm-youtube",(function(e){SM.currentModule="sm-youtube";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("react"));babelHelpers.interopRequireDefault(t("classnames"));const a=({center:e,id:t,playlistId:a,width:r,height:u,autoplay:o}={})=>{let s="https://www.youtube.com/embed",i=o?1:0;return a?(t&&(s+="/".concat(t)),s+="?listType=playlist&list=".concat(a,"&")):s+="/".concat(t,"?"),s+="rel=0&wmode=opaque&autoplay=".concat(i),l.default.createElement("iframe",{className:e?"sm-youtube-center":"",width:r,height:u,src:s,frameBorder:"0",allowFullScreen:!0})};a.propTypes={center:e.default.bool,id:e.default.string,playlistId:e.default.string,width:e.default.number,height:e.default.number,autoplay:e.default.bool},a.defaultProps={id:"",playlistId:"",width:"",height:"",autoplay:!1};var r=a;exports.default=r}(),SM.currentModule=null}),"",{requires:["sm","react","classnames"]});
YUI.add("sm-zoomable",(function(e){SM.currentModule="sm-zoomable";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("hammerjs")),o=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("react")),n=babelHelpers.interopRequireDefault(t("sm-dom-core"));const i=Object.freeze({isPanning:!1,isPinching:!1,zoomScale:1,zoomTranslate:[0,0]});class r extends a.default.Component{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",i),babelHelpers.defineProperty(this,"_contentRef",a.default.createRef()),babelHelpers.defineProperty(this,"_onDragStart",e=>{this.state.zoomScale>1&&e.preventDefault()}),babelHelpers.defineProperty(this,"_onPanEnd",e=>{1!==this.state.zoomScale&&(e.preventDefault(),this._panState=null,this.setState({isPanning:!1}))}),babelHelpers.defineProperty(this,"_onPanMove",e=>{let{state:t}=this;if(1===t.zoomScale)return;e.preventDefault();let{initialZoomTranslate:o}=this._panState;this.setState({zoomTranslate:this._normalizeZoomTranslate([o[0]+e.deltaX,o[1]+e.deltaY])})}),babelHelpers.defineProperty(this,"_onPanStart",e=>{let{state:t}=this;1!==t.zoomScale&&(e.preventDefault(),this._panState={initialZoomTranslate:t.zoomTranslate},this.setState({isPanning:!0}))}),babelHelpers.defineProperty(this,"_onPinchEnd",e=>{if("mouse"===e.pointerType)return;e.preventDefault();let{props:t,state:o}=this;o.zoomScale<1.5?this._zoom(1):o.zoomScale>t.maxZoomScale&&this._zoom(t.maxZoomScale),this.setState({isPinching:!1}),this._pinchState=null}),babelHelpers.defineProperty(this,"_onPinchMove",e=>{"mouse"!==e.pointerType&&(e.preventDefault(),this._zoom(this._pinchState.initialZoomScale*e.scale))}),babelHelpers.defineProperty(this,"_onPinchStart",e=>{"mouse"!==e.pointerType&&(e.preventDefault(),this._pinchState={initialZoomScale:this.state.zoomScale},this.setState({isPinching:!0}))}),babelHelpers.defineProperty(this,"_onTap",e=>{let{props:t,state:o}=this;if("mouse"!==e.pointerType){if(1===o.zoomScale)return;e.preventDefault(),e.srcEvent.stopPropagation()}this._zoomAndFocus({focalPoint:[e.center.x,e.center.y],zoomScale:o.zoomScale>1?1:t.maxZoomScale})}),babelHelpers.defineProperty(this,"_onTouchMove",e=>{e.preventDefault()})}componentDidMount(){this._contentRef.current.addEventListener("touchmove",this._onTouchMove,{passive:!1}),this.props.maxZoomScale>1&&this._attachHammer()}componentDidUpdate(e,t){let{props:o,state:a}=this;a.zoomScale===t.zoomScale&&a.isPanning===t.isPanning&&a.isPinching===t.isPinching&&a.zoomTranslate===t.zoomTranslate||this._dispatchZoomChange(),o.maxZoomScale!==e.maxZoomScale&&(o.maxZoomScale>1?this._attachHammer():this._detachHammer())}componentWillUnmount(){this._contentRef.current.removeEventListener("touchmove",this._onTouchMove,{passive:!1}),this._detachHammer(),this._dispatchZoomChange(i)}render(){let{props:e,state:t}=this,o=e.maxZoomScale>1,n=null;if(o)if(n={touchAction:"none"},t.isPanning||t.isPinching||(n.transition="transform 100ms"),1===t.zoomScale)n.cursor="zoom-in";else{t.zoomScale>1&&(n.cursor=t.isPanning?"grabbing":"grab");let[e,o]=t.zoomTranslate;n.transform="translate(".concat(e,"px, ").concat(o,"px) scale(").concat(t.zoomScale,")")}return a.default.createElement("div",{onDragStart:o?this._onDragStart:null,ref:this._contentRef,style:n},e.children)}_attachHammer(){if(this._hammer)return;let t=new e.default.Manager(this._contentRef.current,{recognizers:[[e.default.Pan,{direction:e.default.DIRECTION_ALL,threshold:0}],[e.default.Pinch],[e.default.Tap]]});t.on("panend",this._onPanEnd).on("panmove",this._onPanMove).on("panstart",this._onPanStart).on("pinchcancel pinchend",this._onPinchEnd).on("pinchmove",this._onPinchMove).on("pinchstart",this._onPinchStart).on("tap",this._onTap),this._hammer=t}_detachHammer(){this._hammer&&(this._hammer.stop(),this._hammer.destroy(),this._hammer=null)}_dispatchZoomChange(e={}){let{props:t,state:o}=this;e={isPanning:o.isPanning,isPinching:o.isPinching,zoomScale:o.zoomScale,zoomTranslate:o.zoomTranslate,...e},t.onZoomChange&&t.onZoomChange(e);let a=new n.default.win.CustomEvent("zoomableChange",{bubbles:!0,detail:e});this._contentRef.current.dispatchEvent(a)}_normalizeZoomScale(e){return Number(Math.max(.6,e).toPrecision(5))}_normalizeZoomTranslate(e,t=this.state.zoomScale){let[o,a]=e,n=this._contentRef.current,i=n.offsetWidth/2*t,r=n.offsetHeight/2*t;return[Number(Math.min(i,Math.max(-i,o)).toPrecision(5)),Number(Math.min(r,Math.max(-r,a)).toPrecision(5))]}_zoom(e){this.setState({zoomScale:this._normalizeZoomScale(e),zoomTranslate:[0,0]})}_zoomAndFocus(e){let{focalPoint:t,zoomScale:o}=e,a=this._normalizeZoomScale(o);a<=1?this.setState({zoomScale:a,zoomTranslate:[0,0]}):this.setState(e=>{let o,[n,i]=e.zoomTranslate,[r,s]=t,l=this._contentRef.current.getBoundingClientRect(),m=e.zoomScale,h=l.width/m/2+(l.left-n),c=l.height/m/2+(l.top-i),p=a-m;return o=0===p?this._normalizeZoomTranslate([h-r,c-s],a):this._normalizeZoomTranslate([n+(h-r)*p,i+(c-s)*p],a),{zoomScale:a,zoomTranslate:o}})}}exports.default=r,babelHelpers.defineProperty(r,"defaultProps",{maxZoomScale:1}),babelHelpers.defineProperty(r,"displayName","Zoomable"),babelHelpers.defineProperty(r,"propTypes",{children:o.default.node,maxZoomScale:o.default.number,onZoomChange:o.default.func})}(),SM.currentModule=null}),"",{requires:["hammerjs","prop-types","react","sm-dom-core"]});
YUI.add("sm",(function(e){SM.currentModule="sm";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule};!function(){"use strict";var r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,SM._requireShim=function(e){if("jsdom"===e||"fs"===e)return require(e);var r=SM.modules[e];if(!r)throw new Error((SM.currentModule||"Non-module code")+" is trying to import "+e+", but "+e+" has not been loaded.");return r.exports};const t=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o=new Map;SM.import=function(e){if(o.has(e))return o.get(e);let r=SM._requireShim(e);return r&&r.__esModule&&(t(r,"default")?(Object.isExtensible(r.default)&&Object.entries(r).forEach(([e,o])=>{t(r.default,e)||(r.default[e]=o)}),r=r.default):Object.isExtensible(r)&&(r.default=r)),o.set(e,r),r},SM.load=function(){r||(r=SM.import("rsvp"));var t={},o=Array.prototype.slice.call(arguments),u=[];return o.forEach((function(e){SM.modules[e]?t[e]=SM.import(e):u.push(e)})),(u.length?new r.Promise((function(r){e.use(u,(function(){u.forEach((function(e){t[e]=SM.import(e)})),r(t)}))})):r.resolve(t)).then((function(e){return 1===o.length?e[o[0]]:e}))};var u=SM;exports.default=u}(),SM.currentModule=null}),"",{requires:["rsvp"]});
YUI.add("smoothscroll-polyfill",(function(o){SM.currentModule="smoothscroll-polyfill";var exports={},module=SM.modules[SM.currentModule]={exports,name:SM.currentModule};SM._requireShim;!function(){"use strict";function o(){var o=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===o.__forceSmoothScrollPolyfill__){var l,e=o.HTMLElement||o.Element,r=468,i={scroll:o.scroll||o.scrollTo,scrollBy:o.scrollBy,elementScroll:e.prototype.scroll||n,scrollIntoView:e.prototype.scrollIntoView},s=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now,c=(l=o.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(l)?1:0);o.scroll=o.scrollTo=function(){void 0!==arguments[0]&&(!0!==f(arguments[0])?h.call(o,t.body,void 0!==arguments[0].left?~~arguments[0].left:o.scrollX||o.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:o.scrollY||o.pageYOffset):i.scroll.call(o,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:o.scrollX||o.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:o.scrollY||o.pageYOffset))},o.scrollBy=function(){void 0!==arguments[0]&&(f(arguments[0])?i.scrollBy.call(o,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(o,t.body,~~arguments[0].left+(o.scrollX||o.pageXOffset),~~arguments[0].top+(o.scrollY||o.pageYOffset)))},e.prototype.scroll=e.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==f(arguments[0])){var o=arguments[0].left,t=arguments[0].top;h.call(this,this,void 0===o?this.scrollLeft:~~o,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},e.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==f(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},e.prototype.scrollIntoView=function(){if(!0!==f(arguments[0])){var l=function(o){for(;o!==t.body&&!1===(e=a(l=o,"Y")&&p(l,"Y"),r=a(l,"X")&&p(l,"X"),e||r);)o=o.parentNode||o.host;var l,e,r;return o}(this),e=l.getBoundingClientRect(),r=this.getBoundingClientRect();l!==t.body?(h.call(this,l,l.scrollLeft+r.left-e.left,l.scrollTop+r.top-e.top),"fixed"!==o.getComputedStyle(l).position&&o.scrollBy({left:e.left,top:e.top,behavior:"smooth"})):o.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function n(o,t){this.scrollLeft=o,this.scrollTop=t}function f(o){if(null===o||"object"!=typeof o||void 0===o.behavior||"auto"===o.behavior||"instant"===o.behavior)return!0;if("object"==typeof o&&"smooth"===o.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+o.behavior+" is not a valid value for enumeration ScrollBehavior.")}function a(o,t){return"Y"===t?o.clientHeight+c<o.scrollHeight:"X"===t?o.clientWidth+c<o.scrollWidth:void 0}function p(t,l){var e=o.getComputedStyle(t,null)["overflow"+l];return"auto"===e||"scroll"===e}function d(t){var l,e,i,c,n=(s()-t.startTime)/r;c=n=n>1?1:n,l=.5*(1-Math.cos(Math.PI*c)),e=t.startX+(t.x-t.startX)*l,i=t.startY+(t.y-t.startY)*l,t.method.call(t.scrollable,e,i),e===t.x&&i===t.y||o.requestAnimationFrame(d.bind(o,t))}function h(l,e,r){var c,f,a,p,h=s();l===t.body?(c=o,f=o.scrollX||o.pageXOffset,a=o.scrollY||o.pageYOffset,p=i.scroll):(c=l,f=l.scrollLeft,a=l.scrollTop,p=n),d({scrollable:c,method:p,startTime:h,startX:f,startY:a,x:e,y:r})}}"object"==typeof exports&&void 0!==module?module.exports={polyfill:o}:o()}(),SM.currentModule=null}),"",{requires:[],node_modules:!0,preMinified:!0});
YUI.add("statuspage",(function(e){SM.currentModule="statuspage";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={page:function(e){if(!(e=e||{}).page)throw new Error("A pageId is required to initialize.");this.apiKey=e.apiKey||null,this.error=e.error||this.error,this.format=e.format||"json",this.pageId=e.page,this.version=e.version||"v2",this.secure=!("secure"in e)||e.secure,this.protocol=this.secure?"https":"http",this.host=e.host||"statuspage.io",this.host_with_port_and_protocol=e.test?"":this.protocol+"://"+this.pageId+"."+this.host}};e.page.prototype.serialize=function(e,t){var r=[],s={sms:"email_sms",webhook:"endpoint"};for(var o in e)if("to_sentence"!==o){var i=o;o=o in s?s[o]:o;var n=t?t+"["+o+"]":o,a=e[i];r.push("object"==typeof a?this.serialize(a,n):encodeURIComponent(n)+"="+encodeURIComponent(a))}return r.join("&")},e.page.prototype.createStatusPageCORSRequest=function(e,t){var r=new XMLHttpRequest;return"withCredentials"in r?r.open(e,t,!0):"undefined"!=typeof XDomainRequest?(r=new XDomainRequest).open(e,t):r=null,r},e.page.prototype.executeRequestAndCallbackWithResponse=function(e){if(!e.path)throw new Error("A path is required to make a request");var t=e.path,r=e.method||"GET",s=e.success||null,o=e.error||this.error,i=this.host_with_port_and_protocol+"/api/"+this.version+"/"+t+"."+this.format,n=this.createStatusPageCORSRequest(r,i);if(n)if(this.apiKey&&(console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"),console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"),console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"),n.setRequestHeader("Authorization","OAuth "+this.apiKey)),n.onload=function(){var e=JSON.parse(n.responseText);s&&s(e)},n.error=o,"POST"===r||"DELETE"===r){var a=e.data||{};n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(this.serialize(a))}else n.send()},e.page.prototype.get=function(e,t){if(t=t||{},!e)throw new Error("Path is required.");if(!t.success)throw new Error("Success Callback is required.");var r=t.success||{},s=t.error||{};this.executeRequestAndCallbackWithResponse({path:e,success:r,error:s,method:"GET"})},e.page.prototype.post=function(e,t){if(t=t||{},!e)throw new Error("Path is required.");var r={};if("subscribers"===e){if(!t.subscriber)throw new Error("Subscriber is required to post.");r.subscriber=t.subscriber}else{if(!t.data)throw new Error("Data is required to post.");r=t.data}var s=t.success||{},o=t.error||{};this.executeRequestAndCallbackWithResponse({data:r,path:e,success:s,error:o,method:"POST"})},e.page.prototype.delete=function(e,t){if(t=t||{},!e)throw new Error("Path is required.");if(!t.subscriber)throw new Error("Data is required to delete.");var r={};"subscribers"===e?r.subscriber=t.subscriber:r=t.data;var s=t.success||{},o=t.error||{};this.executeRequestAndCallbackWithResponse({data:r,path:e,success:s,error:o,method:"DELETE"})},e.page.prototype.error=function(){console.log("There was an error with your request")},e.page.prototype.summary=function(e){this.get("summary",e)},e.page.prototype.status=function(e){this.get("status",e)},e.page.prototype.components=function(e){this.get("components",e)},e.page.prototype.incidents=function(e){switch(e.filter){case"unresolved":this.get("incidents/unresolved",e);break;case"resolved":this.get("incidents/resolved",e);break;default:this.get("incidents",e)}},e.page.prototype.scheduled_maintenances=function(e){switch(e.filter){case"active":this.get("scheduled-maintenances/active",e);break;case"upcoming":this.get("scheduled-maintenances/upcoming",e);break;default:this.get("scheduled-maintenances",e)}},e.page.prototype.subscribe=function(e){if(!e||!e.subscriber)throw new Error("A subscriber object is required.");this.post("subscribers",e)},e.page.prototype.unsubscribe=function(e){if(!e||!e.subscriber)throw new Error("A subscriber object is required.");if(!e.subscriber.id)throw new Error("You must supply a subscriber.id in order to cancel a subscription.");this.delete("subscribers",e)};var t=e;exports.default=t}(),SM.currentModule=null}),"",{requires:[]});
YUI.add("anim-base",function(e,t){var n="running",r="startTime",i="elapsedTime",s="start",o="tween",u="end",a="node",f="paused",l="reverse",c="iterationCount",h=Number,p={},d;e.Anim=function(){e.Anim.superclass.constructor.apply(this,arguments),e.Anim._instances[e.stamp(this)]=this},e.Anim.NAME="anim",e.Anim._instances={},e.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,e.Anim.DEFAULT_UNIT="px",e.Anim.DEFAULT_EASING=function(e,t,n,r){return n*e/r+t},e.Anim._intervalTime=20,e.Anim.behaviors={left:{get:function(e,t){return e._getOffset(t)}}},e.Anim.behaviors.top=e.Anim.behaviors.left,e.Anim.DEFAULT_SETTER=function(t,n,r,i,s,o,u,a){var f=t._node,l=f._node,c=u(s,h(r),h(i)-h(r),o);l?"style"in l&&(n in l.style||n in e.DOM.CUSTOM_STYLES)?(a=a||"",f.setStyle(n,c+a)):"attributes"in l&&n in l.attributes?f.setAttribute(n,c):n in l&&(l[n]=c):f.set?f.set(n,c):n in f&&(f[n]=c)},e.Anim.DEFAULT_GETTER=function(t,n){var r=t._node,i=r._node,s="";return i?"style"in i&&(n in i.style||n in e.DOM.CUSTOM_STYLES)?s=r.getComputedStyle(n):"attributes"in i&&n in i.attributes?s=r.getAttribute(n):n in i&&(s=i[n]):r.get?s=r.get(n):n in r&&(s=r[n]),s},e.Anim.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:e.Anim.DEFAULT_EASING,setter:function(t){if(typeof t=="string"&&e.Easing)return e.Easing[t]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!p[e.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},e.Anim.run=function(){var t=e.Anim._instances,n;for(n in t)t[n].run&&t[n].run()},e.Anim.pause=function(){for(var t in p)p[t].pause&&p[t].pause();e.Anim._stopTimer()},e.Anim.stop=function(){for(var t in p)p[t].stop&&p[t].stop();e.Anim._stopTimer()},e.Anim._startTimer=function(){d||(d=setInterval(e.Anim._runFrame,e.Anim._intervalTime))},e.Anim._stopTimer=function(){clearInterval(d),d=0},e.Anim._runFrame=function(){var t=!0,n;for(n in p)p[n]._runFrame&&(t=!1,p[n]._runFrame());t&&e.Anim._stopTimer()},e.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var v={run:function(){return this.get(f)?this._resume():this.get(n)||this._start(),this},pause:function(){return this.get(n)&&this._pause(),this},stop:function(e){return(this.get(n)||this.get(f))&&this._end(e),this},_added:!1,_start:function(){this._set(r,new Date-this.get(i)),this._actualFrames=0,this.get(f)||this._initAnimAttr(),p[e.stamp(this)]=this,e.Anim._startTimer(),this.fire(s)},_pause:function(){this._set(r,null),this._set(f,!0),delete p[e.stamp(this)],this.fire("pause")},_resume:function(){this._set(f,!1),p[e.stamp(this)]=this,this._set(r,new Date-this.get(i)),e.Anim._startTimer(),this.fire("resume")},_end:function(t){var n=this.get("duration")*1e3;t&&this._runAttrs(n,n,this.get(l)),this._set(r,null),this._set(i,0),this._set(f,!1),delete p[e.stamp(this)],this.fire(u,{elapsed:this.get(i)})},_runFrame:function(){var e=this._runtimeAttr.duration,t=new Date-this.get(r),n=this.get(l),s=t>=e;this._runAttrs(t,e,n),this._actualFrames+=1,this._set(i,t),this.fire(o),s&&this._lastFrame()},_runAttrs:function(t,n,r){var i=this._runtimeAttr,s=e.Anim.behaviors,o=i.easing,u=n,a=!1,f,l,c;t>=n&&(a=!0),r&&(t=n-t,u=0);for(c in i)i[c].to&&(f=i[c],l=c in s&&"set"in s[c]?s[c].set:e.Anim.DEFAULT_SETTER,a?l(this,c,f.from,f.to,u,n,o,f.unit):l(this,c,f.from,f.to,t,n,o,f.unit))},_lastFrame:function(){var e=this.get("iterations"),t=this.get(c);t+=1,e==="infinite"||t<e?(this.get("direction")==="alternate"&&this.set(l,!this.get(l)),this.fire("iteration")):(t=0,this._end()),this._set(r,new Date),this._set(c,t)},_initAnimAttr:function(){var t=this.get("from")||{},n=this.get("to")||{},r={duration:this.get("duration")*1e3,easing:this.get("easing")},i=e.Anim.behaviors,s=this.get(a),o,u,f;e.each(n,function(n,a){typeof n=="function"&&(n=n.call(this,s)),u=t[a],u===undefined?u=a in i&&"get"in i[a]?i[a].get(this,a):e.Anim.DEFAULT_GETTER(this,a):typeof u=="function"&&(u=u.call(this,s));var l=e.Anim.RE_UNITS.exec(u),c=e.Anim.RE_UNITS.exec(n);u=l?l[1]:u,f=c?c[1]:n,o=c?c[2]:l?l[2]:"",!o&&e.Anim.RE_DEFAULT_UNIT.test(a)&&(o=e.Anim.DEFAULT_UNIT);if(!u||!f){e.error('invalid "from" or "to" for "'+a+'"',"Anim");return}r[a]={from:e.Lang.isObject(u)?e.clone(u):u,to:f,unit:o}},this),this._runtimeAttr=r},_getOffset:function(e){var t=this._node,n=t.getComputedStyle(e),r=e==="left"?"getX":"getY",i=e==="left"?"setX":"setY",s;return n==="auto"&&(s=t.getStyle("position"),s==="absolute"||s==="fixed"?(n=t[r](),t[i](n)):n=0),n},destructor:function(){delete e.Anim._instances[e.stamp(this)]}};e.extend(e.Anim,e.Base,v)},"@VERSION@",{requires:["base-base","node-style"]});
YUI.add("anim-color",function(e,t){var n=Number;e.Anim.getUpdatedColorValue=function(t,r,i,s,o){return t=e.Color.re_RGB.exec(e.Color.toRGB(t)),r=e.Color.re_RGB.exec(e.Color.toRGB(r)),(!t||t.length<3||!r||r.length<3)&&e.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(o(i,n(t[1]),n(r[1])-n(t[1]),s)),Math.floor(o(i,n(t[2]),n(r[2])-n(t[2]),s)),Math.floor(o(i,n(t[3]),n(r[3])-n(t[3]),s))].join(", ")+")"},e.Anim.behaviors.color={set:function(t,n,r,i,s,o,u){t._node.setStyle(n,e.Anim.getUpdatedColorValue(r,i,s,o,u))},get:function(e,t){var n=e._node.getComputedStyle(t);return n=n==="transparent"?"rgb(255, 255, 255)":n,n}},e.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(t){e.Anim.behaviors[t]=e.Anim.behaviors.color})},"@VERSION@",{requires:["anim-base"]});
YUI.add("anim-curve",function(e,t){e.Anim.behaviors.curve={set:function(t,n,r,i,s,o,u){r=r.slice.call(r),i=i.slice.call(i);var a=u(s,0,100,o)/100;i.unshift(r),t._node.setXY(e.Anim.getBezier(i,a))},get:function(e){return e._node.getXY()}},e.Anim.getBezier=function(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}},"@VERSION@",{requires:["anim-xy"]});
YUI.add("anim-easing",function(e,t){var n={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},elasticOut:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},elasticBoth:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r/2)===2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},backIn:function(e,t,n,r,i){return i===undefined&&(i=1.70158),e===r&&(e-=.001),n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(t,n,r,i){return r-e.Easing.bounceOut(i-t,0,r,i)+n},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(t,n,r,i){return t<i/2?e.Easing.bounceIn(t*2,0,r,i)*.5+n:e.Easing.bounceOut(t*2-i,0,r,i)*.5+r*.5+n}};e.Easing=n},"@VERSION@",{requires:["anim-base"]});
YUI.add("anim-node-plugin",function(e,t){var n=function(t){t=t?e.merge(t):{},t.node=t.host,n.superclass.constructor.apply(this,arguments)};n.NAME="nodefx",n.NS="fx",e.extend(n,e.Anim),e.namespace("Plugin"),e.Plugin.NodeFX=n},"@VERSION@",{requires:["node-pluginhost","anim-base"]});
YUI.add("anim-scroll",function(e,t){var n=Number;e.Anim.behaviors.scroll={set:function(e,t,r,i,s,o,u){var a=e._node,f=[u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)];f[0]&&a.set("scrollLeft",f[0]),f[1]&&a.set("scrollTop",f[1])},get:function(e){var t=e._node;return[t.get("scrollLeft"),t.get("scrollTop")]}}},"@VERSION@",{requires:["anim-base"]});
YUI.add("anim-xy",function(e,t){var n=Number;e.Anim.behaviors.xy={set:function(e,t,r,i,s,o,u){e._node.setXY([u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)])},get:function(e){return e._node.getXY()}}},"@VERSION@",{requires:["anim-base","node-screen"]});
YUI.add("array-extras",function(e,t){var n=e.Array,r=e.Lang,i=Array.prototype;n.lastIndexOf=r._isNative(i.lastIndexOf)?function(e,t,n){return n||n===0?e.lastIndexOf(t,n):e.lastIndexOf(t)}:function(e,t,n){var r=e.length,i=r-1;if(n||n===0)i=Math.min(n<0?r+n:n,r);if(i>-1&&r>0)for(;i>-1;--i)if(i in e&&e[i]===t)return i;return-1},n.unique=function(e,t){var n=0,r=e.length,i=[],s,o,u,a;e:for(;n<r;n++){a=e[n];for(s=0,u=i.length;s<u;s++){o=i[s];if(t){if(t.call(e,a,o,n,e))continue e}else if(a===o)continue e}i.push(a)}return i},n.filter=r._isNative(i.filter)?function(e,t,n){return i.filter.call(e,t,n)}:function(e,t,n){var r=0,i=e.length,s=[],o;for(;r<i;++r)r in e&&(o=e[r],t.call(n,o,r,e)&&s.push(o));return s},n.reject=function(e,t,r){return n.filter(e,function(e,n,i){return!t.call(r,e,n,i)})},n.every=r._isNative(i.every)?function(e,t,n){return i.every.call(e,t,n)}:function(e,t,n){for(var r=0,i=e.length;r<i;++r)if(r in e&&!t.call(n,e[r],r,e))return!1;return!0},n.map=r._isNative(i.map)?function(e,t,n){return i.map.call(e,t,n)}:function(e,t,n){var r=0,s=e.length,o=i.concat.call(e);for(;r<s;++r)r in e&&(o[r]=t.call(n,e[r],r,e));return o},n.reduce=r._isNative(i.reduce)?function(e,t,n,r){return i.reduce.call(e,function(e,t,i,s){return n.call(r,e,t,i,s)},t)}:function(e,t,n,r){var i=0,s=e.length,o=t;for(;i<s;++i)i in e&&(o=n.call(r,o,e[i],i,e));return o},n.find=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return e[r];return null},n.grep=function(e,t){return n.filter(e,function(e,n){return t.test(e)})},n.partition=function(e,t,r){var i={matches:[],rejects:[]};return n.each(e,function(n,s){var u=t.call(r,n,s,e)?i.matches:i.rejects;u.push(n)}),i},n.zip=function(e,t){var r=[];return n.each(e,function(e,n){r.push([e,t[n]])}),r},n.flatten=function(e){var t=[],i,s,o;if(!e)return t;for(i=0,s=e.length;i<s;++i)o=e[i],r.isArray(o)?t.push.apply(t,n.flatten(o)):t.push(o);return t}},"@VERSION@",{requires:["yui-base"]});
YUI.add("array-invoke",function(e,t){e.Array.invoke=function(t,n){var r=e.Array(arguments,2,!0),i=e.Lang.isFunction,s=[];return e.Array.each(e.Array(t),function(e,t){e&&i(e[n])&&(s[t]=e[n].apply(e,r))}),s}},"@VERSION@",{requires:["yui-base"]});
YUI.add("arraylist",function(e,t){function s(t){t!==undefined?this._items=e.Lang.isArray(t)?t:n(t):this._items=this._items||[]}var n=e.Array,r=n.each,i;i={item:function(e){return this._items[e]},each:function(e,t){return r(this._items,function(n,r){n=this.item(r),e.call(t||n,n,r,this)},this),this},some:function(e,t){return n.some(this._items,function(n,r){return n=this.item(r),e.call(t||n,n,r,this)},this)},indexOf:function(e){return n.indexOf(this._items,e)},size:function(){return this._items.length},isEmpty:function(){return!this.size()},toJSON:function(){return this._items}},i._item=i.item,e.mix(s.prototype,i),e.mix(s,{addMethod:function(e,t){t=n(t),r(t,function(t){e[t]=function(){var e=n(arguments,0,!0),i=[];return r(this._items,function(n,r){n=this._item(r);var s=n[t].apply(n,e);s!==undefined&&s!==n&&(i[r]=s)},this),i.length?i:this}})}}),e.ArrayList=s},"@VERSION@",{requires:["yui-base"]});
YUI.add("arraysort",function(e,t){var n=e.Lang,r=n.isValue,i=n.isString,s=e.ArraySort={compare:function(e,t,n){return r(e)?r(t)?(i(e)&&(e=e.toLowerCase()),i(t)&&(t=t.toLowerCase()),e<t?n?1:-1:e>t?n?-1:1:0):-1:r(t)?1:0},naturalCompare:function(e,t,n){e+="",t+="";if(!n||!n.caseSensitive)e=e.toLowerCase(),t=t.toLowerCase();var r=s._splitAlphaNum(e),i=s._splitAlphaNum(t),o=Math.min(r.length,i.length),u=0,a,f,l;for(l=0;l<o;l++){a=r[l],f=i[l];if(a!==f){u=a-f,u||(u=a>f?1:-1);break}}return u||(u=e.length-t.length),n&&n.descending?-u:u},_splitAlphaNum:function(e){var t=[],n=/(\d+|\D+)/g,r;while(r=n.exec(e))t.push(r[1]);return t}}},"@VERSION@",{requires:["yui-base"]});
YUI.add("async-queue",function(e,t){e.AsyncQueue=function(){this._init(),this.add.apply(this,arguments)};var n=e.AsyncQueue,r="execute",i="shift",s="promote",o="remove",u=e.Lang.isObject,a=e.Lang.isFunction;n.defaults=e.mix({autoContinue:!0,iterations:1,timeout:10,until:function(){return this.iterations|=0,this.iterations<=0}},e.config.queueDefaults||{}),e.extend(n,e.EventTarget,{_running:!1,_init:function(){e.EventTarget.call(this,{prefix:"queue",emitFacade:!0}),this._q=[],this.defaults={},this._initEvents()},_initEvents:function(){this.publish({execute:{defaultFn:this._defExecFn,emitFacade:!0},shift:{defaultFn:this._defShiftFn,emitFacade:!0},add:{defaultFn:this._defAddFn,emitFacade:!0},promote:{defaultFn:this._defPromoteFn,emitFacade:!0},remove:{defaultFn:this._defRemoveFn,emitFacade:!0}})},next:function(){var e;while(this._q.length){e=this._q[0]=this._prepare(this._q[0]);if(!e||!e.until())break;this.fire(i,{callback:e}),e=null}return e||null},_defShiftFn:function(e){this.indexOf(e.callback)===0&&this._q.shift()},_prepare:function(t){if(a(t)&&t._prepared)return t;var r=e.merge(n.defaults,{context:this,args:[],_prepared:!0},this.defaults,a(t)?{fn:t}:t),i=e.bind(function(){i._running||i.iterations--,a(i.fn)&&i.fn.apply(i.context||e,e.Array(i.args))},this);return e.mix(i,r)},run:function(){var e,t=!0;if(this._executing)return this._running=!0,this;for(e=this.next();e&&!this.isRunning();e=this.next()){t=e.timeout<0?this._execute(e):this._schedule(e);if(!t)break}return e||this.fire("complete"),this},_execute:function(e){this._running=e._running=!0,this._executing=e,e.iterations--,this.fire(r,{callback:e});var t=this._running&&e.autoContinue;return this._running=e._running=!1,this._executing=!1,t},_schedule:function(t){return this._running=e.later(t.timeout,this,function(){this._execute(t)&&this.run()}),!1},isRunning:function(){return!!this._running},_defExecFn:function(e){e.callback()},add:function(){return this.fire("add",{callbacks:e.Array(arguments,0,!0)}),this},_defAddFn:function(t){var n=this._q,r=[];e.Array.each(t.callbacks,function(e){u(e)&&(n.push(e),r.push(e))}),t.added=r},pause:function(){return this._running&&u(this._running)&&this._running.cancel(),this._running=!1,this},stop:function(){return this._q=[],this._running&&u(this._running)&&(this._running.cancel(),this._running=!1),this._executing||this.run(),this},indexOf:function(e){var t=0,n=this._q.length,r;for(;t<n;++t){r=this._q[t];if(r===e||r.id===e)return t}return-1},getCallback:function(e){var t=this.indexOf(e);return t>-1?this._q[t]:null},promote:function(e){var t={callback:e},n;return this.isRunning()?n=this.after(i,function(){this.fire(s,t),n.detach()},this):this.fire(s,t),this},_defPromoteFn:function(e){var t=this.indexOf(e.callback),n=t>-1?this._q.splice(t,1)[0]:null;e.promoted=n,n&&this._q.unshift(n)},remove:function(e){var t={callback:e},n;return this.isRunning()?n=this.after(i,function(){this.fire(o,t),n.detach()},this):this.fire(o,t),this},_defRemoveFn:function(e){var t=this.indexOf(e.callback);e.removed=t>-1?this._q.splice(t,1)[0]:null},size:function(){return this.isRunning()||this.next(),this._q.length}})},"@VERSION@",{requires:["event-custom"]});
YUI.add("attribute-base",function(e,t){function n(){e.AttributeCore.apply(this,arguments),e.AttributeObservable.apply(this,arguments),e.AttributeExtras.apply(this,arguments)}e.mix(n,e.AttributeCore,!1,null,1),e.mix(n,e.AttributeExtras,!1,null,1),e.mix(n,e.AttributeObservable,!0,null,1),n.INVALID_VALUE=e.AttributeCore.INVALID_VALUE,n._ATTR_CFG=e.AttributeCore._ATTR_CFG.concat(e.AttributeObservable._ATTR_CFG),n.protectAttrs=e.AttributeCore.protectAttrs,e.Attribute=n},"@VERSION@",{requires:["attribute-core","attribute-observable","attribute-extras"]});
YUI.add("attribute-complex",function(e,t){var n=e.Attribute;n.Complex=function(){},n.Complex.prototype={_normAttrVals:n.prototype._normAttrVals,_getAttrInitVal:n.prototype._getAttrInitVal},e.AttributeComplex=n.Complex},"@VERSION@",{requires:["attribute-base"]});
YUI.add("attribute-core",function(e,t){function b(e,t,n){this._yuievt=null,this._initAttrHost(e,t,n)}e.State=function(){this.data={}},e.State.prototype={add:function(e,t,n){var r=this.data[e];r||(r=this.data[e]={}),r[t]=n},addAll:function(e,t){var n=this.data[e],r;n||(n=this.data[e]={});for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},remove:function(e,t){var n=this.data[e];n&&delete n[t]},removeAll:function(t,n){var r;n?e.each(n,function(e,n){this.remove(t,typeof n=="string"?n:e)},this):(r=this.data,t in r&&delete r[t])},get:function(e,t){var n=this.data[e];if(n)return n[t]},getAll:function(e,t){var n=this.data[e],r,i;if(t)i=n;else if(n){i={};for(r in n)n.hasOwnProperty(r)&&(i[r]=n[r])}return i}};var n=e.Object,r=e.Lang,i=".",s="getter",o="setter",u="readOnly",a="writeOnce",f="initOnly",l="validator",c="value",h="valueFn",p="lazyAdd",d="added",v="_bypassProxy",m="initValue",g="lazy",y;b.INVALID_VALUE={},y=b.INVALID_VALUE,b._ATTR_CFG=[o,s,l,c,h,a,u,p,v],b.protectAttrs=function(t){if(t){t=e.merge(t);for(var n in t)t.hasOwnProperty(n)&&(t[n]=e.merge(t[n]))}return t},b.prototype={_initAttrHost:function(t,n,r){this._state=new e.State,this._initAttrs(t,n,r)},addAttr:function(e,t,n){var r=this,i=r._state,s=i.data,o,u,a;t=t||{},p in t&&(n=t[p]),u=i.get(e,d);if(n&&!u)i.data[e]={lazy:t,added:!0};else if(!u||t.isLazyAdd)a=c in t,a&&(o=t.value,t.value=undefined),t.added=!0,t.initializing=!0,s[e]=t,a&&r.set(e,o),t.initializing=!1;return r},attrAdded:function(e){return!!this._state.get(e,d)},get:function(e){return this._getAttr(e)},_isLazyAttr:function(e){return this._state.get(e,g)},_addLazyAttr:function(e,t){var n=this._state;t=t||n.get(e,g),t&&(n.data[e].lazy=undefined,t.isLazyAdd=!0,this.addAttr(e,t))},set:function(e,t,n){return this._setAttr(e,t,n)},_set:function(e,t,n){return this._setAttr(e,t,n,!0)},_setAttr:function(t,r,s,o){var u=!0,a=this._state,l=this._stateProxy,c=this._tCfgs,h,p,d,v,m,g,y;return t.indexOf(i)!==-1&&(d=t,v=t.split(i),t=v.shift()),c&&c[t]&&this._addOutOfOrder(t,c[t]),h=a.data[t]||{},h.lazy&&(h=h.lazy,this._addLazyAttr(t,h)),p=h.value===undefined,l&&t in l&&!h._bypassProxy&&(p=!1),g=h.writeOnce,y=h.initializing,!p&&!o&&(g&&(u=!1),h.readOnly&&(u=!1)),!y&&!o&&g===f&&(u=!1),u&&(p||(m=this.get(t)),v&&(r=n.setValue(e.clone(m),v,r),r===undefined&&(u=!1)),u&&(!this._fireAttrChange||y?this._setAttrVal(t,d,m,r,s,h):this._fireAttrChange(t,d,m,r,s,h))),this},_addOutOfOrder:function(e,t){var n={};n[e]=t,delete this._tCfgs[e],this._addAttrs(n,this._tVals)},_getAttr:function(e){var t=e,r=this._tCfgs,s,o,u,a;return e.indexOf(i)!==-1&&(s=e.split(i),e=s.shift()),r&&r[e]&&this._addOutOfOrder(e,r[e]),a=this._state.data[e]||{},a.lazy&&(a=a.lazy,this._addLazyAttr(e,a)),u=this._getStateVal(e,a),o=a.getter,o&&!o.call&&(o=this[o]),u=o?o.call(this,u,t):u,u=s?n.getValue(u,s):u,u},_getStateVal:function(e,t){var n=this._stateProxy;return t||(t=this._state.getAll(e)||{}),n&&e in n&&!t._bypassProxy?n[e]:t.value},_setStateVal:function(e,t){var n=this._stateProxy;n&&e in n&&!this._state.get(e,v)?n[e]=t:this._state.add(e,c,t)},_setAttrVal:function(e,t,n,i,s,o){var u=this,a=!0,f=o||this._state.data[e]||{},l=f.validator,c=f.setter,h=f.initializing,p=this._getStateVal(e,f),d=t||e,v,g;return l&&(l.call||(l=this[l]),l&&(g=l.call(u,i,d,s),!g&&h&&(i=f.defaultValue,g=!0))),!l||g?(c&&(c.call||(c=this[c]),c&&(v=c.call(u,i,d,s),v===y?h?i=f.defaultValue:a=!1:v!==undefined&&(i=v))),a&&(!t&&i===p&&!r.isObject(i)?a=!1:(m in f||(f.initValue=i),u._setStateVal(e,i)))):a=!1,a},setAttrs:function(e,t){return this._setAttrs(e,t)},_setAttrs:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&this.set(n,e[n],t);return this},getAttrs:function(e){return this._getAttrs(e)},_getAttrs:function(e){var t={},r,i,s,o=e===!0;if(!e||o)e=n.keys(this._state.data);for(i=0,s=e.length;i<s;i++){r=e[i];if(!o||this._getStateVal(r)!=this._state.get(r,m))t[r]=this.get(r)}return t},addAttrs:function(e,t,n){return e&&(this._tCfgs=e,this._tVals=t?this._normAttrVals(t):null,this._addAttrs(e,this._tVals,n),this._tCfgs=this._tVals=null),this},_addAttrs:function(e,t,n){var r=this._tCfgs,i=this._tVals,s,o,u;for(s in e)e.hasOwnProperty(s)&&(o=e[s],o.defaultValue=o.value,u=this._getAttrInitVal(s,o,i),u!==undefined&&(o.value=u),r[s]&&(r[s]=undefined),this.addAttr(s,o,n))},_protectAttrs:b.protectAttrs,_normAttrVals:function(e){var t,n,r,s,o,u;if(!e)return null;t={};for(u in e)e.hasOwnProperty(u)&&(u.indexOf(i)!==-1?(r=u.split(i),s=r.shift(),n=n||{},o=n[s]=n[s]||[],o[o.length]={path:r,value:e[u]}):t[u]=e[u]);return{simple:t,complex:n}},_getAttrInitVal:function(e,t,r){var i=t.value,s=t.valueFn,o,u=!1,a=t.readOnly,f,l,c,h,p,d,v;!a&&r&&(f=r.simple,f&&f.hasOwnProperty(e)&&(i=f[e],u=!0)),s&&!u&&(s.call||(s=this[s]),s&&(o=s.call(this,e),i=o));if(!a&&r){l=r.complex;if(l&&l.hasOwnProperty(e)&&i!==undefined&&i!==null){v=l[e];for(c=0,h=v.length;c<h;++c)p=v[c].path,d=v[c].value,n.setValue(i,p,d)}}return i},_initAttrs:function(t,n,r){t=t||this.constructor.ATTRS;var i=e.Base,s=e.BaseCore,o=i&&e.instanceOf(this,i),u=!o&&s&&e.instanceOf(this,s);t&&!o&&!u&&this.addAttrs(e.AttributeCore.protectAttrs(t),n,r)}},e.AttributeCore=b},"@VERSION@",{requires:["oop"]});
YUI.add("attribute-extras",function(e,t){function o(){}var n="broadcast",r="published",i="initValue",s={readOnly:1,writeOnce:1,getter:1,broadcast:1};o.prototype={modifyAttr:function(e,t){var i=this,o,u;if(i.attrAdded(e)){i._isLazyAttr(e)&&i._addLazyAttr(e),u=i._state;for(o in t)s[o]&&t.hasOwnProperty(o)&&(u.add(e,o,t[o]),o===n&&u.remove(e,r))}},removeAttr:function(e){this._state.removeAll(e)},reset:function(t){var n=this;return t?(n._isLazyAttr(t)&&n._addLazyAttr(t),n.set(t,n._state.get(t,i))):e.Object.each(n._state.data,function(e,t){n.reset(t)}),n},_getAttrCfg:function(t){var n,r=this._state;return t?n=r.getAll(t)||{}:(n={},e.each(r.data,function(e,t){n[t]=r.getAll(t)})),n}},e.AttributeExtras=o},"@VERSION@",{requires:["oop"]});
YUI.add("attribute-observable",function(e,t){function s(){this._ATTR_E_FACADE={},n.call(this,{emitFacade:!0})}var n=e.EventTarget,r="Change",i="broadcast";s._ATTR_CFG=[i],s.prototype={set:function(e,t,n){return this._setAttr(e,t,n)},_set:function(e,t,n){return this._setAttr(e,t,n,!0)},setAttrs:function(e,t){return this._setAttrs(e,t)},_setAttrs:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&this.set(n,e[n],t);return this},_fireAttrChange:function(t,n,i,s,o,u){var a=this,f=this._getFullType(t+r),l=a._state,c,h,p;u||(u=l.data[t]||{}),u.published||(p=a._publish(f),p.emitFacade=!0,p.defaultTargetOnly=!0,p.defaultFn=a._defAttrChangeFn,h=u.broadcast,h!==undefined&&(p.broadcast=h),u.published=!0),o?(c=e.merge(o),c._attrOpts=o):c=a._ATTR_E_FACADE,c.attrName=t,c.subAttrName=n,c.prevVal=i,c.newVal=s,a._hasPotentialSubscribers(f)?a.fire(f,c):this._setAttrVal(t,n,i,s,o,u)},_defAttrChangeFn:function(e,t){var n=e._attrOpts;n&&delete e._attrOpts,this._setAttrVal(e.attrName,e.subAttrName,e.prevVal,e.newVal,n)?t||(e.newVal=this.get(e.attrName)):t||e.stopImmediatePropagation()}},e.mix(s,n,!1,null,1),e.AttributeObservable=s,e.AttributeEvents=s},"@VERSION@",{requires:["event-custom"]});
YUI.add("autocomplete-base",function(e,t){function T(){}var n=e.Escape,r=e.Lang,i=e.Array,s=e.Object,o=r.isFunction,u=r.isString,a=r.trim,f=e.Attribute.INVALID_VALUE,l="_functionValidator",c="_sourceSuccess",h="allowBrowserAutocomplete",p="inputNode",d="query",v="queryDelimiter",m="requestTemplate",g="results",y="resultListLocator",b="value",w="valueChange",E="clear",S=d,x=g;T.prototype={initializer:function(){e.before(this._bindUIACBase,this,"bindUI"),e.before(this._syncUIACBase,this,"syncUI"),this.publish(E,{defaultFn:this._defClearFn}),this.publish(S,{defaultFn:this._defQueryFn}),this.publish(x,{defaultFn:this._defResultsFn})},destructor:function(){this._acBaseEvents&&this._acBaseEvents.detach(),delete this._acBaseEvents,delete this._cache,delete this._inputNode,delete this._rawSource},clearCache:function(){return this._cache&&(this._cache={}),this},sendRequest:function(t,n){var r,i=this.get("source");return t||t===""?this._set(d,t):t=this.get(d)||"",i&&(n||(n=this.get(m)),r=n?n.call(this,t):t,i.sendRequest({query:t,request:r,callback:{success:e.bind(this._onResponse,this,t)}})),this},_bindUIACBase:function(){var t=this.get(p),n=t&&t.tokenInput;n&&(t=n.get(p),this._set("tokenInput",n));if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._acBaseEvents=new e.EventHandle([t.on(w,this._onInputValueChange,this),t.on("blur",this._onInputBlur,this),this.after(h+"Change",this._syncBrowserAutocomplete),this.after("sourceTypeChange",this._afterSourceTypeChange),this.after(w,this._afterValueChange)])},_syncUIACBase:function(){this._syncBrowserAutocomplete(),this.set(b,this.get(p).get(b))},_createArraySource:function(e){var t=this;return{type:"array",sendRequest:function(n){t[c](e.concat(),n)}}},_createFunctionSource:function(e){var t=this;return{type:"function",sendRequest:function(n){function i(e){t[c](e||[],n)}var r;(r=e(n.query,i))&&i(r)}}},_createObjectSource:function(e){var t=this;return{type:"object",sendRequest:function(n){var r=n.query;t[c](s.owns(e,r)?e[r]:[],n)}}},_functionValidator:function(e){return e===null||o(e)},_getObjectValue:function(e,t){if(!e)return;for(var n=0,r=t.length;e&&n<r;n++)e=e[t[n]];return e},_parseResponse:function(e,t,r){var i={data:r,query:e,results:[]},s=this.get(y),o=[],u=t&&t.results,a,f,l,c,h,p,d,v,m,g,b;u&&s&&(u=s.call(this,u));if(u&&u.length){a=this.get("resultFilters"),b=this.get("resultTextLocator");for(p=0,d=u.length;p<d;++p)m=u[p],g=b?b.call(this,m):m.toString(),o.push({display:n.html(g),raw:m,text:g});for(p=0,d=a.length;p<d;++p){o=a[p].call(this,e,o.concat());if(!o)return;if(!o.length)break}if(o.length){l=this.get("resultFormatter"),h=this.get("resultHighlighter"),v=this.get("maxResults"),v&&v>0&&o.length>v&&(o.length=v);if(h){c=h.call(this,e,o.concat());if(!c)return;for(p=0,d=c.length;p<d;++p)m=o[p],m.highlighted=c[p],m.display=m.highlighted}if(l){f=l.call(this,e,o.concat());if(!f)return;for(p=0,d=f.length;p<d;++p)o[p].display=f[p]}}}i.results=o,this.fire(x,i)},_parseValue:function(e){var t=this.get(v);return t&&(e=e.split(t),e=e[e.length-1]),r.trimLeft(e)},_setEnableCache:function(e){this._cache=e?{}:null},_setLocator:function(e){if(this[l](e))return e;var t=this;return e=e.toString().split("."),function(n){return n&&t._getObjectValue(n,e)}},_setRequestTemplate:function(e){return this[l](e)?e:(e=e.toString(),function(t){return r.sub(e,{query:encodeURIComponent(t)})})},_setResultFilters:function(t){var n,s;return t===null?[]:(n=e.AutoCompleteFilters,s=function(e){return o(e)?e:u(e)&&n&&o(n[e])?n[e]:!1},r.isArray(t)?(t=i.map(t,s),i.every(t,function(e){return!!e})?t:f):(t=s(t),t?[t]:f))},_setResultHighlighter:function(t){var n;return this[l](t)?t:(n=e.AutoCompleteHighlighters,u(t)&&n&&o(n[t])?n[t]:f)},_setSource:function(t){var n=this.get("sourceType")||r.type(t),i;return t&&o(t.sendRequest)||t===null||n==="datasource"?(this._rawSource=t,t):(i=T.SOURCE_TYPES[n])?(this._rawSource=t,r.isString(i)?this[i](t):i(t)):(e.error("Unsupported source type '"+n+"'. Maybe autocomplete-sources isn't loaded?"),f)},_sourceSuccess:function(e,t){t.callback.success({data:e,response:{results:e}})},_syncBrowserAutocomplete:function(){var e=this.get(p);e.get("nodeName").toLowerCase()==="input"&&e.setAttribute("autocomplete",this.get(h)?"on":"off")},_updateValue:function(e){var t=this.get(v),n,s,o;e=r.trimLeft(e),t&&(n=a(t),o=i.map(a(this.get(b)).split(t),a),s=o.length,s>1&&(o[s-1]=e,e=o.join(n+" ")),e=e+n+" "),this.set(b,e)},_afterSourceTypeChange:function(e){this._rawSource&&this.set("source",this._rawSource)},_afterValueChange:function(e){var t=e.newVal,n=this,r=e.src===T.UI_SRC,i,s,o,u;r||n._inputNode.set(b,t),o=n.get("minQueryLength"),u=n._parseValue(t)||"",o>=0&&u.length>=o?r?(i=n.get("queryDelay"),s=function(){n.fire(S,{inputValue:t,query:u,src:e.src})},i?(clearTimeout(n._delay),n._delay=setTimeout(s,i)):s()):n._set(d,u):(clearTimeout(n._delay),n.fire(E,{prevVal:e.prevVal?n._parseValue(e.prevVal):null,src:e.src}))},_onInputBlur:function(e){var t=this.get(v),n,i,s;if(t&&!this.get("allowTrailingDelimiter")){t=r.trimRight(t),s=i=this._inputNode.get(b);if(t)while((i=r.trimRight(i))&&(n=i.length-t.length)&&i.lastIndexOf(t)===n)i=i.substring(0,n);else i=r.trimRight(i);i!==s&&this.set(b,i)}},_onInputValueChange:function(e){var t=e.newVal;t!==this.get(b)&&this.set(b,t,{src:T.UI_SRC})},_onResponse:function(e,t){e===(this.get(d)||"")&&this._parseResponse(e||"",t.response,t.data)},_defClearFn:function(){this._set(d,null),this._set(g,[])},_defQueryFn:function(e){this.sendRequest(e.query)},_defResultsFn:function(e){this._set(g,e[g])}},T.ATTRS={allowBrowserAutocomplete:{value:!1},allowTrailingDelimiter:{value:!1},enableCache:{lazyAdd:!1,setter:"_setEnableCache",value:!0},inputNode:{setter:e.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:!0,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter
:{validator:l,value:null},resultHighlighter:{setter:"_setResultHighlighter",value:null},resultListLocator:{setter:"_setLocator",value:null},results:{readOnly:!0,value:[]},resultTextLocator:{setter:"_setLocator",value:null},source:{setter:"_setSource",value:null},sourceType:{value:null},tokenInput:{readOnly:!0},value:{value:""}},T._buildCfg={aggregates:["SOURCE_TYPES"],statics:["UI_SRC"]},T.SOURCE_TYPES={array:"_createArraySource","function":"_createFunctionSource",object:"_createObjectSource"},T.UI_SRC=e.Widget&&e.Widget.UI_SRC||"ui",e.AutoCompleteBase=T},"@VERSION@",{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]});
YUI.add("autocomplete-filters",function(e,t){var n=e.Array,r=e.Object,i=e.Text.WordBreak,s=e.mix(e.namespace("AutoCompleteFilters"),{charMatch:function(e,t,r){if(!e)return t;var i=n.unique((r?e:e.toLowerCase()).split(""));return n.filter(t,function(e){return e=e.text,r||(e=e.toLowerCase()),n.every(i,function(t){return e.indexOf(t)!==-1})})},charMatchCase:function(e,t){return s.charMatch(e,t,!0)},phraseMatch:function(e,t,r){return e?(r||(e=e.toLowerCase()),n.filter(t,function(t){return(r?t.text:t.text.toLowerCase()).indexOf(e)!==-1})):t},phraseMatchCase:function(e,t){return s.phraseMatch(e,t,!0)},startsWith:function(e,t,r){return e?(r||(e=e.toLowerCase()),n.filter(t,function(t){return(r?t.text:t.text.toLowerCase()).indexOf(e)===0})):t},startsWithCase:function(e,t){return s.startsWith(e,t,!0)},subWordMatch:function(e,t,r){if(!e)return t;var s=i.getUniqueWords(e,{ignoreCase:!r});return n.filter(t,function(e){var t=r?e.text:e.text.toLowerCase();return n.every(s,function(e){return t.indexOf(e)!==-1})})},subWordMatchCase:function(e,t){return s.subWordMatch(e,t,!0)},wordMatch:function(e,t,s){if(!e)return t;var o={ignoreCase:!s},u=i.getUniqueWords(e,o);return n.filter(t,function(e){var t=n.hash(i.getUniqueWords(e.text,o));return n.every(u,function(e){return r.owns(t,e)})})},wordMatchCase:function(e,t){return s.wordMatch(e,t,!0)}})},"@VERSION@",{requires:["array-extras","text-wordbreak"]});
YUI.add("autocomplete-list-keys",function(e,t){function u(){e.before(this._bindKeys,this,"bindUI"),this._initKeys()}var n=40,r=13,i=27,s=9,o=38;u.prototype={_initKeys:function(){var e={},t={};e[n]=this._keyDown,t[r]=this._keyEnter,t[i]=this._keyEsc,t[s]=this._keyTab,t[o]=this._keyUp,this._keys=e,this._keysVisible=t},destructor:function(){this._unbindKeys()},_bindKeys:function(){this._keyEvents=this._inputNode.on("keydown",this._onInputKey,this)},_unbindKeys:function(){this._keyEvents&&this._keyEvents.detach(),this._keyEvents=null},_keyDown:function(){this.get("visible")?this._activateNextItem():this.show()},_keyEnter:function(e){var t=this.get("activeItem");if(!t)return!1;this.selectItem(t,e)},_keyEsc:function(){this.hide()},_keyTab:function(e){var t;if(this.get("tabSelect")){t=this.get("activeItem");if(t)return this.selectItem(t,e),!0}return!1},_keyUp:function(){this._activatePrevItem()},_onInputKey:function(e){var t,n=e.keyCode;this._lastInputKey=n,this.get("results").length&&(t=this._keys[n],!t&&this.get("visible")&&(t=this._keysVisible[n]),t&&t.call(this,e)!==!1&&e.preventDefault())}},e.Base.mix(e.AutoCompleteList,[u])},"@VERSION@",{requires:["autocomplete-list","base-build"]});
YUI.add("autocomplete-list",function(e,t){var n=e.Lang,r=e.Node,i=e.Array,s=e.UA.ie&&e.UA.ie<7,o=9,u="_CLASS_ITEM",a="_CLASS_ITEM_ACTIVE",f="_CLASS_ITEM_HOVER",l="_SELECTOR_ITEM",c="activeItem",h="alwaysShowList",p="circular",d="hoveredItem",v="id",m="item",g="list",y="result",b="results",w="visible",E="width",S="select",x=e.Base.create("autocompleteList",e.Widget,[e.AutoCompleteBase,e.WidgetPosition,e.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",UI_EVENTS:function(){var t=e.merge(e.Node.DOM_EVENTS);return delete t.valuechange,delete t.valueChange,t}(),initializer:function(){var t=this.get("inputNode");if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._listEvents=[],this.DEF_PARENT_NODE=t.get("parentNode"),this[u]=this.getClassName(m),this[a]=this.getClassName(m,"active"),this[f]=this.getClassName(m,"hover"),this[l]="."+this[u],this.publish(S,{defaultFn:this._defSelectFn})},destructor:function(){while(this._listEvents.length)this._listEvents.pop().detach();this._ariaNode&&this._ariaNode.remove().destroy(!0)},bindUI:function(){this._bindInput(),this._bindList()},renderUI:function(){var t=this._createAriaNode(),n=this.get("boundingBox"),r=this.get("contentBox"),i=this._inputNode,o=this._createListNode(),u=i.get("parentNode");i.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":g,"aria-expanded":!1,"aria-owns":o.get("id")}),u.append(t),s&&n.plug(e.Plugin.Shim),this._ariaNode=t,this._boundingBox=n,this._contentBox=r,this._listNode=o,this._parentNode=u},syncUI:function(){this._syncResults(),this._syncVisibility()},hide:function(){return this.get(h)?this:this.set(w,!1)},selectItem:function(e,t){if(e){if(!e.hasClass(this[u]))return this}else{e=this.get(c);if(!e)return this}return this.fire(S,{itemNode:e,originEvent:t||null,result:e.getData(y)}),this},_activateNextItem:function(){var e=this.get(c),t;return e?t=e.next(this[l])||(this.get(p)?null:e):t=this._getFirstItemNode(),this.set(c,t),this},_activatePrevItem:function(){var e=this.get(c),t=e?e.previous(this[l]):this.get(p)&&this._getLastItemNode();return this.set(c,t||null),this},_add:function(t){var r=[];return i.each(n.isArray(t)?t:[t],function(e){r.push(this._createItemNode(e).setData(y,e))},this),r=e.all(r),this._listNode.append(r.toFrag()),r},_ariaSay:function(e,t){var r=this.get("strings."+e);this._ariaNode.set("text",t?n.sub(r,t):r)},_bindInput:function(){var e=this._inputNode,t,n,r;this.get("align")===null&&(r=this.get("tokenInput"),t=r&&r.get("boundingBox")||e,this.set("align",{node:t,points:["tl","bl"]}),!this.get(E)&&(n=t.get("offsetWidth"))&&this.set(E,n)),this._listEvents=this._listEvents.concat([e.after("blur",this._afterListInputBlur,this),e.after("focus",this._afterListInputFocus,this)])},_bindList:function(){this._listEvents=this._listEvents.concat([e.one("doc").after("click",this._afterDocClick,this),e.one("win").after("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this[l],this)])},_clear:function(){this.set(c,null),this._set(d,null),this._listNode.get("children").remove(!0)},_createAriaNode:function(){var e=r.create(this.ARIA_TEMPLATE);return e.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"})},_createItemNode:function(t){var n=r.create(this.ITEM_TEMPLATE);return n.addClass(this[u]).setAttrs({id:e.stamp(n),role:"option"}).setAttribute("data-text",t.text).append(t.display)},_createListNode:function(){var t=this.get("listNode")||r.create(this.LIST_TEMPLATE);return t.addClass(this.getClassName(g)).setAttrs({id:e.stamp(t),role:"listbox"}),this._set("listNode",t),this.get("contentBox").append(t),t},_getFirstItemNode:function(){return this._listNode.one(this[l])},_getLastItemNode:function(){return this._listNode.one(this[l]+":last-child")},_syncPosition:function(){this._syncUIPosAlign(),this._syncShim()},_syncResults:function(e){e||(e=this.get(b)),this._clear(),e.length&&(this._add(e),this._ariaSay("items_available")),this._syncPosition(),this.get("activateFirstItem")&&!this.get(c)&&this.set(c,this._getFirstItemNode())},_syncShim:s?function(){var e=this._boundingBox.shim;e&&e.sync()}:function(){},_syncVisibility:function(t){this.get(h)&&(t=!0,this.set(w,t)),typeof t=="undefined"&&(t=this.get(w)),this._inputNode.set("aria-expanded",t),this._boundingBox.set("aria-hidden",!t),t?this._syncPosition():(this.set(c,null),this._set(d,null),this._boundingBox.get("offsetWidth")),e.UA.ie===7&&e.one("body").addClass("yui3-ie7-sucks").removeClass("yui3-ie7-sucks")},_afterActiveItemChange:function(t){var n=this._inputNode,r=t.newVal,i=t.prevVal,s;i&&i._node&&i.removeClass(this[a]),r?(r.addClass(this[a]),n.set("aria-activedescendant",r.get(v))):n.removeAttribute("aria-activedescendant"),this.get("scrollIntoView")&&(s=r||n,(!s.inRegion(e.DOM.viewportRegion(),!0)||!s.inRegion(this._contentBox,!0))&&s.scrollIntoView())},_afterAlwaysShowListChange:function(e){this.set(w,e.newVal||this.get(b).length>0)},_afterDocClick:function(e){var t=this._boundingBox,n=e.target;n!==this._inputNode&&n!==t&&!n.ancestor("#"+t.get("id"),!0)&&this.hide()},_afterHoveredItemChange:function(e){var t=e.newVal,n=e.prevVal;n&&n.removeClass(this[f]),t&&t.addClass(this[f])},_afterListInputBlur:function(){this._listInputFocused=!1,this.get(w)&&!this._mouseOverList&&(this._lastInputKey!==o||!this.get("tabSelect")||!this.get(c))&&this.hide()},_afterListInputFocus:function(){this._listInputFocused=!0},_afterMouseOver:function(e){var t=e.domEvent.target.ancestor(this[l],!0);this._mouseOverList=!0,t&&this._set(d,t)},_afterMouseOut:function(){this._mouseOverList=!1,this._set(d,null)},_afterResultsChange:function(e){this._syncResults(e.newVal
),this.get(h)||this.set(w,!!e.newVal.length)},_afterVisibleChange:function(e){this._syncVisibility(!!e.newVal)},_onItemClick:function(e){var t=e.currentTarget;this.set(c,t),this.selectItem(t,e)},_defSelectFn:function(e){var t=e.result.text;this._inputNode.focus(),this._updateValue(t),this._ariaSay("item_selected",{item:t}),this.hide()}},{ATTRS:{activateFirstItem:{value:!1},activeItem:{setter:e.one,value:null},alwaysShowList:{value:!1},circular:{value:!0},hoveredItem:{readOnly:!0,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:!1},strings:{valueFn:function(){return e.Intl.get("autocomplete-list")}},tabSelect:{value:!0},visible:{value:!1}},CSS_PREFIX:e.ClassNameManager.getClassName("aclist")});e.AutoCompleteList=x,e.AutoComplete=x},"@VERSION@",{lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:!0});
YUI.add("lang/autocomplete-list_en",function(e){e.Intl.add("autocomplete-list","en",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use up and down arrows to select."})},"@VERSION@");
YUI.add("autocomplete-plugin",function(e,t){function r(e){e.inputNode=e.host,!e.render&&e.render!==!1&&(e.render=!0),r.superclass.constructor.apply(this,arguments)}var n=e.Plugin;e.extend(r,e.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:e.ClassNameManager.getClassName("aclist")}),n.AutoComplete=r,n.AutoCompleteList=r},"@VERSION@",{requires:["autocomplete-list","node-pluginhost"]});
YUI.add("autocomplete-sources",function(e,t){var n=e.AutoCompleteBase,r=e.Lang,i="_sourceSuccess",s="maxResults",o="requestTemplate",u="resultListLocator";e.mix(n.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(t){return t instanceof e.Node&&t.get("nodeName").toLowerCase()==="select"?this._createSelectSource(t):e.JSONPRequest&&t instanceof e.JSONPRequest?this._createJSONPSource(t):this._createObjectSource(t)},_createIOSource:function(t){function a(n){var o=n.request;if(r._cache&&o in r._cache){r[i](r._cache[o],n);return}s&&s.isInProgress()&&s.abort(),s=e.io(r._getXHRUrl(t,n),{on:{success:function(t,s){var u;try{u=e.JSON.parse(s.responseText)}catch(a){e.error("JSON parse error",a)}u&&(r._cache&&(r._cache[o]=u),r[i](u,n))}}})}var n={type:"io"},r=this,s,o,u;return n.sendRequest=function(t){o=t;if(u)return;u=!0,e.use("io-base","json-parse",function(){n.sendRequest=a,a(o)})},n},_createJSONPSource:function(t){function u(e){var n=e.request,s=e.query;if(r._cache&&n in r._cache){r[i](r._cache[n],e);return}t._config.on.success=function(t){r._cache&&(r._cache[n]=t),r[i](t,e)},t.send(s)}var n={type:"jsonp"},r=this,s,o;return n.sendRequest=function(i){s=i;if(o)return;o=!0,e.use("jsonp",function(){t instanceof e.JSONPRequest||(t=new e.JSONPRequest(t,{format:e.bind(r._jsonpFormatter,r)})),n.sendRequest=u,u(s)})},n},_createSelectSource:function(e){var t=this;return{type:"select",sendRequest:function(n){var r=[];e.get("options").each(function(e){r.push({html:e.get("innerHTML"),index:e.get("index"),node:e,selected:e.get("selected"),text:e.get("text"),value:e.get("value")})}),t[i](r,n)}}},_createStringSource:function(e){return this._YQL_SOURCE_REGEX.test(e)?this._createYQLSource(e):e.indexOf("{callback}")!==-1?this._createJSONPSource(e):this._createIOSource(e)},_createYQLSource:function(t){function c(o){var u=o.query,a=n.get("yqlEnv"),f=n.get(s),c,h,p;p=r.sub(t,{maxResults:f>0?f:1e3,request:o.request,query:u});if(n._cache&&p in n._cache){n[i](n._cache[p],o);return}c=function(e){n._cache&&(n._cache[p]=e),n[i](e,o)},h={proto:n.get("yqlProtocol")},l?(l._callback=c,l._opts=h,l._params.q=p,a&&(l._params.env=a)):l=new e.YQLRequest(p,{on:{success:c},allowCache:!1},a?{env:a}:null,h),l.send()}var n=this,o={type:"yql"},a,f,l;return n.get(u)||n.set(u,n._defaultYQLLocator),o.sendRequest=function(t){a=t,f||(f=!0,e.use("yql",function(){o.sendRequest=c,c(a)}))},o},_defaultYQLLocator:function(t){var n=t&&t.query&&t.query.results,i;return n&&r.isObject(n)?(i=e.Object.values(n)||[],n=i.length===1?i[0]:i,r.isArray(n)||(n=[n])):n=[],n},_getXHRUrl:function(e,t){var n=this.get(s);return t.query!==t.request&&(e+=t.request),r.sub(e,{maxResults:n>0?n:1e3,query:encodeURIComponent(t.query)})},_jsonpFormatter:function(e,t,n){var i=this.get(s),u=this.get(o);return u&&(e+=u(n)),r.sub(e,{callback:t,maxResults:i>0?i:1e3,query:encodeURIComponent(n)})}}),e.mix(n.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}}),e.mix(n.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",string:"_createStringSource",yql:"_createYQLSource"},!0)},"@VERSION@",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]});
YUI.add("base-base",function(e,t){function o(){i.apply(this,arguments),s.apply(this,arguments),r.apply(this,arguments)}var n=e.AttributeCore,r=e.AttributeExtras,i=e.BaseCore,s=e.BaseObservable;o._ATTR_CFG=i._ATTR_CFG.concat(s._ATTR_CFG),o._NON_ATTRS_CFG=i._NON_ATTRS_CFG.concat(s._NON_ATTRS_CFG),o.NAME="base",o.ATTRS=n.protectAttrs(i.ATTRS),o.modifyAttrs=i.modifyAttrs,e.mix(o,i,!1,null,1),e.mix(o,r,!1,null,1),e.mix(o,s,!0,null,1),o.prototype.constructor=o,e.Base=o},"@VERSION@",{requires:["attribute-base","base-core","base-observable"]});
YUI.add("base-build",function(e,t){function f(e,t,n){n[e]&&(t[e]=(t[e]||[]).concat(n[e]))}function l(e,t,n){n._ATTR_CFG&&(t._ATTR_CFG_HASH=null,f.apply(null,arguments))}function c(e,t,r){n.modifyAttrs(t,r.ATTRS)}var n=e.BaseCore,r=e.Base,i=e.Lang,s="initializer",o="destructor",u=["_PLUG","_UNPLUG"],a;r._build=function(t,n,i,u,a,f){var l=r._build,c=l._ctor(n,f),h=l._cfg(n,f,i),p=l._mixCust,d=c._yuibuild.dynamic,v,m,g,y,b,w;for(v=0,m=i.length;v<m;v++)g=i[v],y=g.prototype,b=y[s],w=y[o],delete y[s],delete y[o],e.mix(c,g,!0,null,1),p(c,g,h),b&&(y[s]=b),w&&(y[o]=w),c._yuibuild.exts.push(g);return u&&e.mix(c.prototype,u,!0),a&&(e.mix(c,l._clean(a,h),!0),p(c,a,h)),c.prototype.hasImpl=l._impl,d&&(c.NAME=t,c.prototype.constructor=c,c.modifyAttrs=n.modifyAttrs),c},a=r._build,e.mix(a,{_mixCust:function(t,n,r){var s,o,u,a,f,l;r&&(s=r.aggregates,o=r.custom,u=r.statics),u&&e.mix(t,n,!0,u);if(s)for(l=0,f=s.length;l<f;l++)a=s[l],!t.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(t[a]=i.isArray(n[a])?[]:{}),e.aggregate(t,n,!0,[a]);if(o)for(l in o)o.hasOwnProperty(l)&&o[l](l,t,n)},_tmpl:function(t){function n(){n.superclass.constructor.apply(this,arguments)}return e.extend(n,t),n},_impl:function(e){var t=this._getClasses(),n,r,i,s,o,u;for(n=0,r=t.length;n<r;n++){i=t[n];if(i._yuibuild){s=i._yuibuild.exts,o=s.length;for(u=0;u<o;u++)if(s[u]===e)return!0}}return!1},_ctor:function(e,t){var n=t&&!1===t.dynamic?!1:!0,r=n?a._tmpl(e):e,i=r._yuibuild;return i||(i=r._yuibuild={}),i.id=i.id||null,i.exts=i.exts||[],i.dynamic=n,r},_cfg:function(t,n,r){var i=[],s={},o=[],u,a=n&&n.aggregates,f=n&&n.custom,l=n&&n.statics,c=t,h,p;while(c&&c.prototype)u=c._buildCfg,u&&(u.aggregates&&(i=i.concat(u.aggregates)),u.custom&&e.mix(s,u.custom,!0),u.statics&&(o=o.concat(u.statics))),c=c.superclass?c.superclass.constructor:null;if(r)for(h=0,p=r.length;h<p;h++)c=r[h],u=c._buildCfg,u&&(u.aggregates&&(i=i.concat(u.aggregates)),u.custom&&e.mix(s,u.custom,!0),u.statics&&(o=o.concat(u.statics)));return a&&(i=i.concat(a)),f&&e.mix(s,n.cfgBuild,!0),l&&(o=o.concat(l)),{aggregates:i,custom:s,statics:o}},_clean:function(t,n){var r,i,s,o=e.merge(t),u=n.aggregates,a=n.custom;for(r in a)o.hasOwnProperty(r)&&delete o[r];for(i=0,s=u.length;i<s;i++)r=u[i],o.hasOwnProperty(r)&&delete o[r];return o}}),r.build=function(e,t,n,r){return a(e,t,n,null,null,r)},r.create=function(e,t,n,r,i){return a(e,t,n,r,i)},r.mix=function(e,t){return e._CACHED_CLASS_DATA&&(e._CACHED_CLASS_DATA=null),a(null,e,t,null,null,{dynamic:!1})},n._buildCfg={aggregates:u.concat(),custom:{ATTRS:c,_ATTR_CFG:l,_NON_ATTRS_CFG:f}},r._buildCfg={aggregates:u.concat(),custom:{ATTRS:c,_ATTR_CFG:l,_NON_ATTRS_CFG:f}}},"@VERSION@",{requires:["base-base"]});
YUI.add("base-core",function(e,t){function v(e){this._BaseInvoked||(this._BaseInvoked=!0,this._initBase(e))}var n=e.Object,r=e.Lang,i=".",s="initialized",o="destroyed",u="initializer",a="value",f=Object.prototype.constructor,l="deep",c="shallow",h="destructor",p=e.AttributeCore,d=function(e,t,n){var r;for(r in t)n[r]&&(e[r]=t[r]);return e};v._ATTR_CFG=p._ATTR_CFG.concat("cloneDefaultValue"),v._NON_ATTRS_CFG=["plugins"],v.NAME="baseCore",v.ATTRS={initialized:{readOnly:!0,value:!1},destroyed:{readOnly:!0,value:!1}},v.modifyAttrs=function(t,n){typeof t!="function"&&(n=t,t=this);var r,i,s;r=t.ATTRS||(t.ATTRS={});if(n){t._CACHED_CLASS_DATA=null;for(s in n)n.hasOwnProperty(s)&&(i=r[s]||(r[s]={}),e.mix(i,n[s],!0))}},v.prototype={_initBase:function(t){e.stamp(this),this._initAttribute(t);var n=e.Plugin&&e.Plugin.Host;this._initPlugins&&n&&n.call(this),this._lazyAddAttrs!==!1&&(this._lazyAddAttrs=!0),this.name=this.constructor.NAME,this.init.apply(this,arguments)},_initAttribute:function(){p.call(this)},init:function(e){return this._baseInit(e),this},_baseInit:function(e){this._initHierarchy(e),this._initPlugins&&this._initPlugins(e),this._set(s,!0)},destroy:function(){return this._baseDestroy(),this},_baseDestroy:function(){this._destroyPlugins&&this._destroyPlugins(),this._destroyHierarchy(),this._set(o,!0)},_getClasses:function(){return this._classes||this._initHierarchyData(),this._classes},_getAttrCfgs:function(){return this._attrs||this._initHierarchyData(),this._attrs},_getInstanceAttrCfgs:function(e){var t={},r,i,s,o,u,a,f,l=e._subAttrs,c=this._attrCfgHash();for(a in e)if(e.hasOwnProperty(a)&&a!=="_subAttrs"){f=e[a],r=t[a]=d({},f,c),i=r.value,i&&typeof i=="object"&&this._cloneDefaultValue(a,r);if(l&&l.hasOwnProperty(a)){o=e._subAttrs[a];for(u in o)s=o[u],s.path&&n.setValue(r.value,s.path,s.value)}}return t},_filterAdHocAttrs:function(e,t){var n,r=this._nonAttrs,i;if(t){n={};for(i in t)!e[i]&&!r[i]&&t.hasOwnProperty(i)&&(n[i]={value:t[i]})}return n},_initHierarchyData:function(){var e=this.constructor,t=e._CACHED_CLASS_DATA,n,r,i,s,o,u=!e._ATTR_CFG_HASH,a,f={},l=[],c=[];n=e;if(!t){while(n){l[l.length]=n,n.ATTRS&&(c[c.length]=n.ATTRS);if(u){s=n._ATTR_CFG,o=o||{};if(s)for(r=0,i=s.length;r<i;r+=1)o[s[r]]=!0}a=n._NON_ATTRS_CFG;if(a)for(r=0,i=a.length;r<i;r++)f[a[r]]=!0;n=n.superclass?n.superclass.constructor:null}u&&(e._ATTR_CFG_HASH=o),t=e._CACHED_CLASS_DATA={classes:l,nonAttrs:f,attrs:this._aggregateAttrs(c)}}this._classes=t.classes,this._attrs=t.attrs,this._nonAttrs=t.nonAttrs},_attrCfgHash:function(){return this.constructor._ATTR_CFG_HASH},_cloneDefaultValue:function(t,n){var i=n.value,s=n.cloneDefaultValue;s===l||s===!0?n.value=e.clone(i):s===c?n.value=e.merge(i):s===undefined&&(f===i.constructor||r.isArray(i))&&(n.value=e.clone(i))},_aggregateAttrs:function(e){var t,n,r,s,o,u,f=this._attrCfgHash(),l,c={};if(e)for(u=e.length-1;u>=0;--u){n=e[u];for(t in n)n.hasOwnProperty(t)&&(s=d({},n[t],f),o=null,t.indexOf(i)!==-1&&(o=t.split(i),t=o.shift()),l=c[t],o&&l&&l.value?(r=c._subAttrs,r||(r=c._subAttrs={}),r[t]||(r[t]={}),r[t][o.join(i)]={value:s.value,path:o}):o||(l?(l.valueFn&&a in s&&(l.valueFn=null),d(l,s,f)):c[t]=s))}return c},_initHierarchy:function(e){var t=this._lazyAddAttrs,n,r,i,s,o,a,f,l,c,h,p,d=[],v=this._getClasses(),m=this._getAttrCfgs(),g=v.length-1;for(o=g;o>=0;o--){n=v[o],r=n.prototype,h=n._yuibuild&&n._yuibuild.exts,r.hasOwnProperty(u)&&(d[d.length]=r.initializer);if(h)for(a=0,f=h.length;a<f;a++)l=h[a],l.apply(this,arguments),c=l.prototype,c.hasOwnProperty(u)&&(d[d.length]=c.initializer)}p=this._getInstanceAttrCfgs(m),this._preAddAttrs&&this._preAddAttrs(p,e,t),this._allowAdHocAttrs&&this.addAttrs(this._filterAdHocAttrs(m,e),e,t),this.addAttrs(p,e,t);for(i=0,s=d.length;i<s;i++)d[i].apply(this,arguments)},_destroyHierarchy:function(){var e,t,n,r,i,s,o,u,a=this._getClasses();for(n=0,r=a.length;n<r;n++){e=a[n],t=e.prototype,o=e._yuibuild&&e._yuibuild.exts;if(o)for(i=0,s=o.length;i<s;i++)u=o[i].prototype,u.hasOwnProperty(h)&&u.destructor.apply(this,arguments);t.hasOwnProperty(h)&&t.destructor.apply(this,arguments)}},toString:function(){return this.name+"["+e.stamp(this,!0)+"]"}},e.mix(v,p,!1,null,1),v.prototype.constructor=v,e.BaseCore=v},"@VERSION@",{requires:["attribute-core"]});
YUI.add("base-observable",function(e,t){function f(){}var n=e.Lang,r="destroy",i="init",s="bubbleTargets",o="_bubbleTargets",u=e.AttributeObservable,a=e.BaseCore;f._ATTR_CFG=u._ATTR_CFG.concat(),f._NON_ATTRS_CFG=["on","after","bubbleTargets"],f.prototype={_initAttribute:function(){a.prototype._initAttribute.apply(this,arguments),u.call(this),this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME,this._yuievt.config.prefix=this._eventPrefix},init:function(e){var t=this._getFullType(i),n=this._publish(t);return n.emitFacade=!0,n.fireOnce=!0,n.defaultTargetOnly=!0,n.defaultFn=this._defInitFn,this._preInitEventCfg(e),n._hasPotentialSubscribers()?this.fire(t,{cfg:e}):(this._baseInit(e),n.fired=!0,n.firedWith=[{cfg:e}]),this},_preInitEventCfg:function(e){e&&(e.on&&this.on(e.on),e.after&&this.after(e.after));var t,r,i,u=e&&s in e;if(u||o in this){i=u?e&&e.bubbleTargets:this._bubbleTargets;if(n.isArray(i))for(t=0,r=i.length;t<r;t++)this.addTarget(i[t]);else i&&this.addTarget(i)}},destroy:function(){return this.publish(r,{fireOnce:!0,defaultTargetOnly:!0,defaultFn:this._defDestroyFn}),this.fire(r),this.detachAll(),this},_defInitFn:function(e){this._baseInit(e.cfg)},_defDestroyFn:function(e){this._baseDestroy(e.cfg)}},e.mix(f,u,!1,null,1),e.BaseObservable=f},"@VERSION@",{requires:["attribute-observable","base-core"]});
YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"@VERSION@",{requires:["base-base","pluginhost"]});
YUI.add("button-core",function(e,t){function i(e){this.initializer(e)}var n=e.ClassNameManager.getClassName,r=e.AttributeCore;i.prototype={TEMPLATE:"<button/>",constructor:i,initializer:function(e){this._initNode(e),this._initAttributes(e),this._renderUI(e)},_initNode:function(t){t.host?this._host=e.one(t.host):this._host=e.Node.create(this.TEMPLATE)},_initAttributes:function(e){r.call(this,i.ATTRS,e)},_renderUI:function(){var e=this.getNode(),t=e.get("nodeName").toLowerCase();e.addClass(i.CLASS_NAMES.BUTTON),t!=="button"&&t!=="input"&&e.set("role","button")},enable:function(){this.set("disabled",!1)},disable:function(){this.set("disabled",!0)},getNode:function(){return this._host||(this._host=this.get("boundingBox")),this._host},_getLabel:function(){var e=this.getNode(),t=i._getTextLabelFromNode(e);return t},_getLabelHTML:function(){var e=this.getNode(),t=i._getHTMLFromNode(e);return t},_setLabel:function(t,n,r){var i=e.Escape.html(t);return(!r||r.src!=="internal")&&this.set("labelHTML",i,{src:"internal"}),i},_setLabelHTML:function(e,t,n){var r=this.getNode(),s=i._getLabelNodeFromParent(r),o=r.get("nodeName").toLowerCase();return o==="input"?s.set("value",e):s.setHTML(e),(!n||n.src!=="internal")&&this.set("label",e,{src:"internal"}),e},_setDisabled:function(e){var t=this.getNode();return t.getDOMNode().disabled=e,t.toggleClass(i.CLASS_NAMES.DISABLED,e),e}},e.mix(i.prototype,r.prototype),i.ATTRS={label:{setter:"_setLabel",getter:"_getLabel",lazyAdd:!1},labelHTML:{setter:"_setLabelHTML",getter:"_getLabelHTML",lazyAdd:!1},disabled:{value:!1,setter:"_setDisabled",lazyAdd:!1}},i.NAME="button",i.CLASS_NAMES={BUTTON:n("button"),DISABLED:n("button","disabled"),SELECTED:n("button","selected"),LABEL:n("button","label")},i.ARIA_STATES={PRESSED:"aria-pressed",CHECKED:"aria-checked"},i.ARIA_ROLES={BUTTON:"button",CHECKBOX:"checkbox",TOGGLE:"toggle"},i._getLabelNodeFromParent=function(e){var t=e.one("."+i.CLASS_NAMES.LABEL)||e;return t},i._getTextLabelFromNode=function(e){var t=i._getLabelNodeFromParent(e),n=t.get("nodeName").toLowerCase(),r=t.get(n==="input"?"value":"text");return r},i._getHTMLFromNode=function(e){var t=i._getLabelNodeFromParent(e),n=t.getHTML();return n},i._getDisabledFromNode=function(e){return e.get("disabled")},e.ButtonCore=i},"@VERSION@",{requires:["attribute-core","classnamemanager","node-base","escape"]});
YUI.add("button-group",function(e,t){function s(){s.superclass.constructor.apply(this,arguments)}var n="contentBox",r="click",i=e.ButtonCore.CLASS_NAMES;e.ButtonGroup=e.extend(s,e.Widget,{renderUI:function(){this.getButtons().plug(e.Plugin.Button)},bindUI:function(){var t=this,i=t.get(n);i.delegate(r,t._handleClick,e.ButtonGroup.BUTTON_SELECTOR,t),t.after("disabledChange",t._afterDisabledChange)},_afterDisabledChange:function(t){this.getButtons().each(t.newVal?e.ButtonCore.prototype.disable:e.ButtonCore.prototype.enable)},getButtons:function(){var t=this.get(n);return t.all(e.ButtonGroup.BUTTON_SELECTOR)},getSelectedButtons:function(){var e=this,t=[],n=e.getButtons(),r=s.CLASS_NAMES.SELECTED;return n.each(function(e){e.hasClass(r)&&t.push(e)}),t},getSelectedValues:function(){var t=this.getSelectedButtons(),n=[],r;return e.Array.each(t,function(e){r=e.getContent(),n.push(r)}),n},_handleClick:function(e){var t=this,n=e.target.ancestor("."+s.CLASS_NAMES.BUTTON,!0),r=t.get("type"),i=s.CLASS_NAMES.SELECTED,o=n.hasClass(i),u;r==="checkbox"?(n.toggleClass(i,!o),t.fire("selectionChange",{originEvent:e})):r==="radio"&&!o&&(u=t.getButtons(),u.removeClass(i),n.addClass(i),t.fire("selectionChange",{originEvent:e}))}},{NAME:"buttongroup",ATTRS:{type:{writeOnce:"initOnly",value:"radio"}},CLASS_NAMES:i,BUTTON_SELECTOR:"button, input[type=button], input[type=reset], input[type=submit], input[type=radio], input[type=checkbox]"})},"@VERSION@",{requires:["button-plugin","cssbutton","widget"]});
YUI.add("button-plugin",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}e.extend(n,e.ButtonCore,{_afterNodeGet:function(t){var n=this.constructor.ATTRS,r=n[t]&&n[t].getter&&this[n[t].getter];if(r)return new e.Do.AlterReturn("get "+t,r.call(this))},_afterNodeSet:function(e,t){var n=this.constructor.ATTRS,r=n[e]&&n[e].setter&&this[n[e].setter];r&&r.call(this,t)},_initNode:function(t){var n=t.host;this._host=n,e.Do.after(this._afterNodeGet,n,"get",this),e.Do.after(this._afterNodeSet,n,"set",this)},destroy:function(){}},{ATTRS:e.merge(e.ButtonCore.ATTRS),NAME:"buttonPlugin",NS:"button"}),n.createNode=function(t,n){var r;return t&&!n&&!t.nodeType&&!t.getDOMNode&&typeof t!="string"&&(n=t,t=n.srcNode),n=n||{},r=n.template||e.Plugin.Button.prototype.TEMPLATE,t=t||n.srcNode||e.DOM.create(r),e.one(t).plug(e.Plugin.Button,n)},e.namespace("Plugin").Button=n},"@VERSION@",{requires:["button-core","cssbutton","node-pluginhost"]});
YUI.add("button",function(e,t){function o(){o.superclass.constructor.apply(this,arguments)}function u(){o.superclass.constructor.apply(this,arguments)}var n=e.ButtonCore,r=n.CLASS_NAMES,i=n.ARIA_STATES,s=n.ARIA_ROLES;e.extend(o,e.Widget,{BOUNDING_TEMPLATE:n.prototype.TEMPLATE,CONTENT_TEMPLATE:null},{NAME:n.NAME,ATTRS:n.ATTRS,HTML_PARSER:{labelHTML:n._getHTMLFromNode,disabled:n._getDisabledFromNode},CLASS_NAMES:r}),e.mix(o.prototype,n.prototype),e.extend(u,o,{trigger:"click",selectedAttrName:"",initializer:function(e){var t=this,n=t.get("type"),r=n==="checkbox"?"checked":"pressed",i=e[r]||!1;t.addAttr(r,{value:i}),t.selectedAttrName=r},destructor:function(){delete this.selectedAttrName},bindUI:function(){var e=this,t=e.get("contentBox");u.superclass.bindUI.call(e),t.on(e.trigger,e.toggle,e),e.after(e.selectedAttrName+"Change",e._afterSelectedChange)},syncUI:function(){var e=this,t=e.get("contentBox"),n=e.get("type"),r=u.ARIA_ROLES,i=n==="checkbox"?r.CHECKBOX:r.TOGGLE,s=e.selectedAttrName;u.superclass.syncUI.call(e),t.set("role",i),e._uiSetSelected(e.get(s))},_afterSelectedChange:function(e){this._uiSetSelected(e.newVal)},_uiSetSelected:function(e){var t=this,n=t.get("contentBox"),r=u.ARIA_STATES,i=t.get("type"),s=i==="checkbox"?r.CHECKED:r.PRESSED;n.toggleClass(o.CLASS_NAMES.SELECTED,e),n.set(s,e)},toggle:function(){var e=this;e._set(e.selectedAttrName,!e.get(e.selectedAttrName))}},{NAME:"toggleButton",ATTRS:{type:{value:"toggle",writeOnce:"initOnly"}},HTML_PARSER:{checked:function(e){return e.hasClass(r.SELECTED)},pressed:function(e){return e.hasClass(r.SELECTED)}},ARIA_STATES:i,ARIA_ROLES:s,CLASS_NAMES:r}),e.Button=o,e.ToggleButton=u},"@VERSION@",{requires:["button-core","cssbutton","widget"]});
YUI.add("classnamemanager",function(e,t){var n="classNamePrefix",r="classNameDelimiter",i=e.config;i[n]=i[n]||"yui3",i[r]=i[r]||"-",e.ClassNameManager=function(){var t=i[n],s=i[r];return{getClassName:e.cached(function(){var n=e.Array(arguments);return n[n.length-1]!==!0?n.unshift(t):n.pop(),n.join(s)})}}()},"@VERSION@",{requires:["yui-base"]});
YUI.add("clickable-rail",function(e,t){function n(){this._initClickableRail()}e.ClickableRail=e.mix(n,{prototype:{_initClickableRail:function(){this._evtGuid=this._evtGuid||e.guid()+"|",this.publish("railMouseDown",{defaultFn:this._defRailMouseDownFn}),this.after("render",this._bindClickableRail),this.on("destroy",this._unbindClickableRail)},_bindClickableRail:function(){this._dd.addHandle(this.rail),this.rail.on(this._evtGuid+e.DD.Drag.START_EVENT,e.bind(this._onRailMouseDown,this))},_unbindClickableRail:function(){if(this.get("rendered")){var e=this.get("contentBox"),t=e.one("."+this.getClassName("rail"));t.detach(this.evtGuid+"*")}},_onRailMouseDown:function(e){this.get("clickableRail")&&!this.get("disabled")&&(this.fire("railMouseDown",{ev:e}),this.thumb.focus())},_defRailMouseDownFn:function(e){e=e.ev;var t=this._resolveThumb(e),n=this._key.xyIndex,r=parseFloat(this.get("length"),10),i,s,o;t&&(i=t.get("dragNode"),s=parseFloat(i.getStyle(this._key.dim),10),o=this._getThumbDestination(e,i),o=o[n]-this.rail.getXY()[n],o=Math.min(Math.max(o,0),r-s),this._uiMoveThumb(o,{source:"rail"}),e.target=this.thumb.one("img")||this.thumb,t._handleMouseDownEvent(e))},_resolveThumb:function(e){return this._dd},_getThumbDestination:function(e,t){var n=t.get("offsetWidth"),r=t.get("offsetHeight");return[e.pageX-Math.round(n/2),e.pageY-Math.round(r/2)]}},ATTRS:{clickableRail:{value:!0,validator:e.Lang.isBoolean}}},!0)},"@VERSION@",{requires:["slider-base"]});
YUI.add("color-base",function(e,t){var n=/^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})(\ufffe)?/,r=/^#?([\da-fA-F]{1})([\da-fA-F]{1})([\da-fA-F]{1})(\ufffe)?/,i=/rgba?\(([\d]{1,3}), ?([\d]{1,3}), ?([\d]{1,3}),? ?([.\d]*)?\)/,s={HEX:"hex",RGB:"rgb",RGBA:"rgba"},o={hex:"toHex",rgb:"toRGB",rgba:"toRGBA"};e.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},REGEX_HEX:n,REGEX_HEX3:r,REGEX_RGB:i,re_RGB:i,re_hex:n,re_hex3:r,STR_HEX:"#{*}{*}{*}",STR_RGB:"rgb({*}, {*}, {*})",STR_RGBA:"rgba({*}, {*}, {*}, {*})",TYPES:s,CONVERTS:o,convert:function(t,n){var r=e.Color.CONVERTS[n.toLowerCase()],i=t;return r&&e.Color[r]&&(i=e.Color[r](t)),i},toHex:function(t){var n=e.Color._convertTo(t,"hex"),r=n.toLowerCase()==="transparent";return n.charAt(0)!=="#"&&!r&&(n="#"+n),r?n.toLowerCase():n.toUpperCase()},toRGB:function(t){var n=e.Color._convertTo(t,"rgb");return n.toLowerCase()},toRGBA:function(t){var n=e.Color._convertTo(t,"rgba");return n.toLowerCase()},toArray:function(t){var n=e.Color.findType(t).toUpperCase(),r,i,s,o;return n==="HEX"&&t.length<5&&(n="HEX3"),n.charAt(n.length-1)==="A"&&(n=n.slice(0,-1)),r=e.Color["REGEX_"+n],r&&(i=r.exec(t)||[],s=i.length,s&&(i.shift(),s--,n==="HEX3"&&(i[0]+=i[0],i[1]+=i[1],i[2]+=i[2]),o=i[s-1],o||(i[s-1]=1))),i},fromArray:function(t,n){t=t.concat();if(typeof n=="undefined")return t.join(", ");var r="{*}";n=e.Color["STR_"+n.toUpperCase()],t.length===3&&n.match(/\{\*\}/g).length===4&&t.push(1);while(n.indexOf(r)>=0&&t.length>0)n=n.replace(r,t.shift());return n},findType:function(t){if(e.Color.KEYWORDS[t])return"keyword";var n=t.indexOf("("),r;return n>0&&(r=t.substr(0,n)),r&&e.Color.TYPES[r.toUpperCase()]?e.Color.TYPES[r.toUpperCase()]:"hex"},_getAlpha:function(t){var n,r=e.Color.toArray(t);return r.length>3&&(n=r.pop()),+n||1},_keywordToHex:function(t){var n=e.Color.KEYWORDS[t];if(n)return n},_convertTo:function(t,n){if(t==="transparent")return t;var r=e.Color.findType(t),i=n,s,o,u,a;return r==="keyword"&&(t=e.Color._keywordToHex(t),r="hex"),r==="hex"&&t.length<5&&(t.charAt(0)==="#"&&(t=t.substr(1)),t="#"+t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),r===n?t:(r.charAt(r.length-1)==="a"&&(r=r.slice(0,-1)),s=n.charAt(n.length-1)==="a",s&&(n=n.slice(0,-1),o=e.Color._getAlpha(t)),a=n.charAt(0).toUpperCase()+n.substr(1).toLowerCase(),u=e.Color["_"+r+"To"+a],u||r!=="rgb"&&n!=="rgb"&&(t=e.Color["_"+r+"ToRgb"](t),r="rgb",u=e.Color["_"+r+"To"+a]),u&&(t=u(t,s)),s&&(e.Lang.isArray(t)||(t=e.Color.toArray(t)),t.push(o),t=e.Color.fromArray(t,i.toUpperCase())),t)},_hexToRgb:function(e,t){var n,r,i;return e.charAt(0)==="#"&&(e=e.substr(1)),e=parseInt(e,16),n=e>>16,r=e>>8&255,i=e&255,t?[n,r,i]:"rgb("+n+", "+r+", "+i+")"},_rgbToHex:function(t){var n=e.Color.toArray(t),r=n[2]|n[1]<<8|n[0]<<16;r=(+r).toString(16);while(r.length<6)r="0"+r;return"#"+r}}},"@VERSION@",{requires:["yui-base"]});
YUI.add("color-hsl",function(e,t){Color={REGEX_HSL:/hsla?\(([.\d]*), ?([.\d]*)%, ?([.\d]*)%,? ?([.\d]*)?\)/,STR_HSL:"hsl({*}, {*}%, {*}%)",STR_HSLA:"hsla({*}, {*}%, {*}%, {*})",toHSL:function(t){var n=e.Color._convertTo(t,"hsl");return n.toLowerCase()},toHSLA:function(t){var n=e.Color._convertTo(t,"hsla");return n.toLowerCase()},_rgbToHsl:function(t,n){var r,i,s,o=e.Color.REGEX_RGB.exec(t),u=o[1]/255,a=o[2]/255,f=o[3]/255,l=Math.max(u,a,f),c=Math.min(u,a,f),h=!1,p=l-c,d=l+c;return u===a&&a===f&&(h=!0),p===0?r=0:u===l?r=(60*(a-f)/p+360)%360:a===l?r=60*(f-u)/p+120:r=60*(u-a)/p+240,s=d/2,s===0||s===1?i=s:s<=.5?i=p/d:i=p/(2-d),h&&(i=0),r=Math.round(r),i=Math.round(i*100),s=Math.round(s*100),n?[r,i,s]:"hsl("+r+", "+i+"%, "+s+"%)"},_hslToRgb:function(t,n){var r=e.Color.REGEX_HSL.exec(t),i=parseInt(r[1],10)/360,s=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100,u,a,f,l,c;return o<=.5?c=o*(s+1):c=o+s-o*s,l=2*o-c,u=Math.round(Color._hueToRGB(l,c,i+1/3)*255),a=Math.round(Color._hueToRGB(l,c,i)*255),f=Math.round(Color._hueToRGB(l,c,i-1/3)*255),n?[u,a,f]:"rgb("+u+", "+a+", "+f+")"},_hueToRGB:function(e,t,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}},e.Color=e.mix(Color,e.Color),e.Color.TYPES=e.mix(e.Color.TYPES,{HSL:"hsl",HSLA:"hsla"}),e.Color.CONVERTS=e.mix(e.Color.CONVERTS,{hsl:"toHSL",hsla:"toHSLA"})},"@VERSION@",{requires:["color-base"]});
YUI.add("color-hsv",function(e,t){Color={REGEX_HSV:/hsva?\(([.\d]*), ?([.\d]*)%, ?([.\d]*)%,? ?([.\d]*)?\)/,STR_HSV:"hsv({*}, {*}%, {*}%)",STR_HSVA:"hsva({*}, {*}%, {*}%, {*})",toHSV:function(t){var n=e.Color._convertTo(t,"hsv");return n.toLowerCase()},toHSVA:function(t){var n=e.Color._convertTo(t,"hsva");return n.toLowerCase()},_rgbToHsv:function(t,n){var r,i,s,o=e.Color.REGEX_RGB.exec(t),u=o[1]/255,a=o[2]/255,f=o[3]/255,l=Math.max(u,a,f),c=Math.min(u,a,f),h=l-c;l===c?r=0:l===u?r=60*(a-f)/h:l===a?r=60*(f-u)/h+120:r=60*(u-a)/h+240,i=l===0?0:1-c/l;while(r<0)r+=360;return r%=360,r=Math.round(r),i=Math.round(i*100),s=Math.round(l*100),n?[r,i,s]:e.Color.fromArray([r,i,s],e.Color.TYPES.HSV)},_hsvToRgb:function(t,n){var r=e.Color.REGEX_HSV.exec(t),i=parseInt(r[1],10),s=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100,u,a,f,l=Math.floor(i/60)%6,c=i/60-l,h=o*(1-s),p=o*(1-s*c),d=o*(1-s*(1-c));if(s===0)u=o,a=o,f=o;else switch(l){case 0:u=o,a=d,f=h;break;case 1:u=p,a=o,f=h;break;case 2:u=h,a=o,f=d;break;case 3:u=h,a=p,f=o;break;case 4:u=d,a=h,f=o;break;case 5:u=o,a=h,f=p}return u=Math.min(255,Math.round(u*256)),a=Math.min(255,Math.round(a*256)),f=Math.min(255,Math.round(f*256)),n?[u,a,f]:e.Color.fromArray([u,a,f],e.Color.TYPES.RGB)}},e.Color=e.mix(Color,e.Color),e.Color.TYPES=e.mix(e.Color.TYPES,{HSV:"hsv",HSVA:"hsva"}),e.Color.CONVERTS=e.mix(e.Color.CONVERTS,{hsv:"toHSV",hsva:"toHSVA"})},"@VERSION@",{requires:["color-base"]});
YUI.add("cookie",function(e,t){function h(e){throw new TypeError(e)}function p(e){(!s(e)||e==="")&&h("Cookie name must be a non-empty string.")}function d(e){(!s(e)||e==="")&&h("Subcookie name must be a non-empty string.")}var n=e.Lang,r=e.Object,i=null,s=n.isString,o=n.isObject,u=n.isUndefined,a=n.isFunction,f=encodeURIComponent,l=decodeURIComponent,c=e.config.doc;e.Cookie={_createCookieString:function(e,t,n,r){r=r||{};var i=f(e)+"="+(n?f(t):t),u=r.expires,a=r.path,l=r.domain;return o(r)&&(u instanceof Date&&(i+="; expires="+u.toUTCString()),s(a)&&a!==""&&(i+="; path="+a),s(l)&&l!==""&&(i+="; domain="+l),r.secure===!0&&(i+="; secure")),i},_createCookieHashString:function(e){o(e)||h("Cookie._createCookieHashString(): Argument must be an object.");var t=[];return r.each(e,function(e,n){!a(e)&&!u(e)&&t.push(f(n)+"="+f(String(e)))}),t.join("&")},_parseCookieHash:function(e){var t=e.split("&"),n=i,r={};if(e.length)for(var s=0,o=t.length;s<o;s++)n=t[s].split("="),r[l(n[0])]=l(n[1]);return r},_parseCookieString:function(e,t,n){var r={};if(s(e)&&e.length>0){var o=t===!1?function(e){return e}:l,a=e.split(/;\s/g),f=i,c=i,h=i;for(var p=0,d=a.length;p<d;p++){h=a[p].match(/([^=]+)=/i);if(h instanceof Array)try{f=l(h[1]),c=o(a[p].substring(h[1].length+1))}catch(v){}else f=l(a[p]),c="";!u(n)&&n.reverseCookieLoading?u(r[f])&&(r[f]=c):r[f]=c}}return r},_setDoc:function(e){c=e},exists:function(e){p(e);var t=this._parseCookieString(c.cookie,!0);return t.hasOwnProperty(e)},get:function(e,t){p(e);var n,r,s;return a(t)?(s=t,t={}):o(t)?s=t.converter:t={},n=this._parseCookieString(c.cookie,!t.raw,t),r=n[e],u(r)?i:a(s)?s(r):r},getSub:function(e,t,n,r){var s=this.getSubs(e,r);return s!==i?(d(t),u(s[t])?i:a(n)?n(s[t]):s[t]):i},getSubs:function(e,t){p(e);var n=this._parseCookieString(c.cookie,!1,t);return s(n[e])?this._parseCookieHash(n[e]):i},remove:function(t,n){return p(t),n=e.merge(n||{},{expires:new Date(0)}),this.set(t,"",n)},removeSub:function(e,t,n){p(e),d(t),n=n||{};var r=this.getSubs(e);if(o(r)&&r.hasOwnProperty(t)){delete r[t];if(!n.removeIfEmpty)return this.setSubs(e,r,n);for(var i in r)if(r.hasOwnProperty(i)&&!a(r[i])&&!u(r[i]))return this.setSubs(e,r,n);return this.remove(e,n)}return""},set:function(e,t,n){p(e),u(t)&&h("Cookie.set(): Value cannot be undefined."),n=n||{};var r=this._createCookieString(e,t,!n.raw,n);return c.cookie=r,r},setSub:function(e,t,n,r){p(e),d(t),u(n)&&h("Cookie.setSub(): Subcookie value cannot be undefined.");var i=this.getSubs(e);return o(i)||(i={}),i[t]=n,this.setSubs(e,i,r)},setSubs:function(e,t,n){p(e),o(t)||h("Cookie.setSubs(): Cookie value must be an object.");var r=this._createCookieString(e,this._createCookieHashString(t),!1,n);return c.cookie=r,r}}},"@VERSION@",{requires:["yui-base"]});
YUI.add("datatype-date-format",function(e,t){var n=function(e,t,n){typeof n=="undefined"&&(n=10),t+="";for(;parseInt(e,10)<n&&n>1;n/=10)e=t+e;return e.toString()},r={formats:{a:function(e,t){return t.a[e.getDay()]},A:function(e,t){return t.A[e.getDay()]},b:function(e,t){return t.b[e.getMonth()]},B:function(e,t){return t.B[e.getMonth()]},C:function(e){return n(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return n(parseInt(r.formats.G(e)%100,10),0)},G:function(e){var t=e.getFullYear(),n=parseInt(r.formats.V(e),10),i=parseInt(r.formats.W(e),10);return i>n?t++:i===0&&n>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return n(t===0?12:t,0)},j:function(e){var t=new Date(""+e.getFullYear()+"/1/1 GMT"),r=new Date(""+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" GMT"),i=r-t,s=parseInt(i/6e4/60/24,10)+1;return n(s,0,100)},k:["getHours"," "],l:function(e){var t=e.getHours()%12;return n(t===0?12:t," ")},m:function(e){return n(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e,t){return t.p[e.getHours()>=12?1:0]},P:function(e,t){return t.P[e.getHours()>=12?1:0]},s:function(e,t){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(e){var t=e.getDay();return t===0?7:t},U:function(e){var t=parseInt(r.formats.j(e),10),i=6-e.getDay(),s=parseInt((t+i)/7,10);return n(s,0)},V:function(e){var t=parseInt(r.formats.W(e),10),i=(new Date(""+e.getFullYear()+"/1/1")).getDay(),s=t+(i>4||i<=1?0:1);return s===53&&(new Date(""+e.getFullYear()+"/12/31")).getDay()<4?s=1:s===0&&(s=r.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),n(s,0)},w:"getDay",W:function(e){var t=parseInt(r.formats.j(e),10),i=7-r.formats.u(e),s=parseInt((t+i)/7,10);return n(s,0,10)},y:function(e){return n(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),r=n(parseInt(Math.abs(t/60),10),0),i=n(Math.abs(t%60),0);return(t>0?"-":"+")+r+i},Z:function(e){var t=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return t.length>4&&(t=r.formats.z(e)),t},"%":function(e){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(t,i){i=i||{};if(!e.Lang.isDate(t))return e.Lang.isValue(t)?t:"";var s,o,u,a,f;s=i.format||"%Y-%m-%d",o=e.Intl.get("datatype-date-format");var l=function(e,t){if(u&&t==="r")return o[t];var n=r.aggregates[t];return n==="locale"?o[t]:n},c=function(i,s){var u=r.formats[s];switch(e.Lang.type(u)){case"string":return t[u]();case"function":return u.call(t,t,o);case"array":if(e.Lang.type(u[0])==="string")return n(t[u[0]](),u[1]);default:return s}};while(s.match(/%[cDFhnrRtTxX]/))s=s.replace(/%([cDFhnrRtTxX])/g,l);var h=s.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,c);return l=c=undefined,h}};e.mix(e.namespace("Date"),r),e.namespace("DataType"),e.DataType.Date=e.Date},"@VERSION@",{lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","hu","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]});
YUI.add("lang/datatype-date-format_en-US",function(e){e.Intl.add("datatype-date-format","en-US",{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"@VERSION@");
YUI.add("datatype-date-math",function(e,t){var n=e.Lang;e.mix(e.namespace("Date"),{isValidDate:function(e){return n.isDate(e)&&isFinite(e)&&e!="Invalid Date"&&!isNaN(e)&&e!=null?!0:!1},areEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()==t.getTime()},isGreater:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>t.getTime()},isGreaterOrEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>=t.getTime()},isInRange:function(e,t,n){return this.isGreaterOrEqual(e,t)&&this.isGreaterOrEqual(n,e)},addDays:function(e,t){return new Date(e.getTime()+864e5*t)},addMonths:function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12;var i=new Date(e.getTime());return i.setFullYear(n),i.setMonth(r),i},addYears:function(e,t){var n=e.getFullYear()+t,r=new Date(e.getTime());return r.setFullYear(n),r},listOfDatesInMonth:function(e){if(!this.isValidDate(e))return[];var t=this.daysInMonth(e),n=e.getFullYear(),r=e.getMonth(),i=[];for(var s=1;s<=t;s++)i.push(new Date(n,r,s,12,0,0));return i},daysInMonth:function(e){if(!this.isValidDate(e))return 0;var t=e.getMonth(),n=[31,28,31,30,31,30,31,31,30,31,30,31];if(t!=1)return n[t];var r=e.getFullYear();return r%400===0?29:r%100===0?28:r%4===0?29:28}}),e.namespace("DataType"),e.DataType.Date=e.Date},"@VERSION@",{requires:["yui-base"]});
YUI.add("datatype-date-parse",function(e,t){e.mix(e.namespace("Date"),{parse:function(t){var n=new Date(+t||t);return e.Lang.isDate(n)?n:null}}),e.namespace("Parsers").date=e.Date.parse,e.namespace("DataType"),e.DataType.Date=e.Date},"@VERSION@");
YUI.add("datatype-number-format",function(e,t){var n=e.Lang;e.mix(e.namespace("Number"),{format:function(e,t){if(n.isNumber(e)){t=t||{};var r=e<0,i=e+"",s=t.decimalPlaces,o=t.decimalSeparator||".",u=t.thousandsSeparator,a,f,l,c;n.isNumber(s)&&s>=0&&s<=20&&(i=e.toFixed(s)),o!=="."&&(i=i.replace(".",o));if(u){a=i.lastIndexOf(o),a=a>-1?a:i.length,f=i.substring(a);for(l=0,c=a;c>0;c--)l%3===0&&c!==a&&(!r||c>1)&&(f=u+f),f=i.charAt(c-1)+f,l++;i=f}return i=t.prefix?t.prefix+i:i,i=t.suffix?i+t.suffix:i,i}return n.isValue(e)&&e.toString?e.toString():""}}),e.namespace("DataType"),e.DataType.Number=e.Number},"@VERSION@");
YUI.add("datatype-xml-parse",function(e,t){e.mix(e.namespace("XML"),{parse:function(t){var n=null,r;return typeof t=="string"&&(r=e.config.win,r.ActiveXObject!==undefined?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)):r.DOMParser!==undefined?n=(new DOMParser).parseFromString(t,"text/xml"):r.Windows!==undefined&&(n=new Windows.Data.Xml.Dom.XmlDocument,n.loadXml(t))),n===null||n.documentElement===null||n.documentElement.nodeName==="parsererror",n}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"@VERSION@");
YUI.add("dd-constrain",function(e,t){var n="dragNode",r="offsetHeight",i="offsetWidth",s="host",o="tickXArray",u="tickYArray",a=e.DD.DDM,f="top",l="right",c="bottom",h="left",p="view",d=null,v="drag:tickAlignX",m="drag:tickAlignY",g=function(){this._lazyAddAttrs=!1,g.superclass.constructor.apply(this,arguments)};g.NAME="ddConstrained",g.NS="con",g.ATTRS={host:{},stickX:{value:!1},stickY:{value:!1},tickX:{value:!1},tickY:{value:!1},tickXArray:{value:!1},tickYArray:{value:!1},gutter:{value:"0",setter:function(t){return e.DD.DDM.cssSizestoObject(t)}},constrain:{value:p,setter:function(t){var n=e.one(t);return n&&(t=n),t}},constrain2region:{setter:function(e){return this.set("constrain",e)}},constrain2node:{setter:function(t){return this.set("constrain",e.one(t))}},constrain2view:{setter:function(){return this.set("constrain",p)}},cacheRegion:{value:!0}},d={_lastTickXFired:null,_lastTickYFired:null,initializer:function(){this._createEvents(),this._eventHandles=[this.get(s).on("drag:end",e.bind(this._handleEnd,this)),this.get(s).on("drag:start",e.bind(this._handleStart,this)),this.get(s).after("drag:align",e.bind(this.align,this)),this.get(s).after("drag:drag",e.bind(this.drag,this))]},destructor:function(){e.Array.each(this._eventHandles,function(e){e.detach()}),this._eventHandles.length=0},_createEvents:function(){var t=[v,m];e.Array.each(t,function(e){this.publish(e,{type:e,emitFacade:!0,bubbles:!0,queuable:!1,prefix:"drag"})},this)},_handleEnd:function(){this._lastTickYFired=null,this._lastTickXFired=null},_handleStart:function(){this.resetCache()},_regionCache:null,_cacheRegion:function(){this._regionCache=this.get("constrain").get("region")},resetCache:function(){this._regionCache=null},_getConstraint:function(){var t=this.get("constrain"),r=this.get("gutter"),i;t&&(t instanceof e.Node?(this._regionCache||(this._eventHandles.push(e.on("resize",e.bind(this._cacheRegion,this),e.config.win)),this._cacheRegion()),i=e.clone(this._regionCache),this.get("cacheRegion")||this.resetCache()):e.Lang.isObject(t)&&(i=e.clone(t)));if(!t||!i)t=p;return t===p&&(i=this.get(s).get(n).get("viewportRegion")),e.Object.each(r,function(e,t){t===l||t===c?i[t]-=e:i[t]+=e}),i},getRegion:function(e){var t={},o=null,u=null,a=this.get(s);return t=this._getConstraint(),e&&(o=a.get(n).get(r),u=a.get(n).get(i),t[l]=t[l]-u,t[c]=t[c]-o),t},_checkRegion:function(e){var t=e,o=this.getRegion(),u=this.get(s),a=u.get(n).get(r),p=u.get(n).get(i);return t[1]>o[c]-a&&(e[1]=o[c]-a),o[f]>t[1]&&(e[1]=o[f]),t[0]>o[l]-p&&(e[0]=o[l]-p),o[h]>t[0]&&(e[0]=o[h]),e},inRegion:function(e){e=e||this.get(s).get(n).getXY();var t=this._checkRegion([e[0],e[1]]),r=!1;return e[0]===t[0]&&e[1]===t[1]&&(r=!0),r},align:function(){var e=this.get(s),t=[e.actXY[0],e.actXY[1]],n=this.getRegion(!0);this.get("stickX")&&(t[1]=e.startXY[1]-e.deltaXY[1]),this.get("stickY")&&(t[0]=e.startXY[0]-e.deltaXY[0]),n&&(t=this._checkRegion(t)),t=this._checkTicks(t,n),e.actXY=t},drag:function(){var t=this.get(s),n=this.get("tickX"),r=this.get("tickY"),i=[t.actXY[0],t.actXY[1]];(e.Lang.isNumber(n)||this.get(o))&&this._lastTickXFired!==i[0]&&(this._tickAlignX(),this._lastTickXFired=i[0]),(e.Lang.isNumber(r)||this.get(u))&&this._lastTickYFired!==i[1]&&(this._tickAlignY(),this._lastTickYFired=i[1])},_checkTicks:function(e,t){var n=this.get(s),r=n.startXY[0]-n.deltaXY[0],i=n.startXY[1]-n.deltaXY[1],p=this.get("tickX"),d=this.get("tickY");return p&&!this.get(o)&&(e[0]=a._calcTicks(e[0],r,p,t[h],t[l])),d&&!this.get(u)&&(e[1]=a._calcTicks(e[1],i,d,t[f],t[c])),this.get(o)&&(e[0]=a._calcTickArray(e[0],this.get(o),t[h],t[l])),this.get(u)&&(e[1]=a._calcTickArray(e[1],this.get(u),t[f],t[c])),e},_tickAlignX:function(){this.fire(v)},_tickAlignY:function(){this.fire(m)}},e.namespace("Plugin"),e.extend(g,e.Base,d),e.Plugin.DDConstrained=g,e.mix(a,{_calcTicks:function(e,t,n,r,i){var s=(e-t)/n,o=Math.floor(s),u=Math.ceil(s);return(o!==0||u!==0)&&s>=o&&s<=u&&(e=t+n*o,r&&i&&(e<r&&(e=t+n*(o+1)),e>i&&(e=t+n*(o-1)))),e},_calcTickArray:function(e,t,n,r){var i=0,s=t.length,o=0,u,a,f;if(!t||t.length===0)return e;if(t[0]>=e)return t[0];for(i=0;i<s;i++){o=i+1;if(t[o]&&t[o]>=e)return u=e-t[i],a=t[o]-e,f=a>u?t[i]:t[o],n&&r&&f>r&&(t[i]?f=t[i]:f=t[s-1]),f}return t[t.length-1]}})},"@VERSION@",{requires:["dd-drag"]});
YUI.add("dd-ddm-base",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)};n.NAME="ddm",n.ATTRS={dragCursor:{value:"move"},clickPixelThresh:{value:3},clickTimeThresh:{value:1e3},throttleTime:{value:-1},dragMode:{value:"point",setter:function(e){return this._setDragMode(e),e}}},e.extend(n,e.Base,{_createPG:function(){},_active:null,_setDragMode:function(t){t===null&&(t=e.DD.DDM.get("dragMode"));switch(t){case 1:case"intersect":return 1;case 2:case"strict":return 2;case 0:case"point":return 0}return 0},CSS_PREFIX:e.ClassNameManager.getClassName("dd"),_activateTargets:function(){},_drags:[],activeDrag:!1,_regDrag:function(e){return this.getDrag(e.get("node"))?!1:(this._active||this._setupListeners(),this._drags.push(e),!0)},_unregDrag:function(t){var n=[];e.Array.each(this._drags,function(e){e!==t&&(n[n.length]=e)}),this._drags=n},_setupListeners:function(){this._createPG(),this._active=!0;var t=e.one(e.config.doc);t.on("mousemove",e.throttle(e.bind(this._docMove,this),this.get("throttleTime"))),t.on("mouseup",e.bind(this._end,this))},_start:function(){this.fire("ddm:start"),this._startDrag()},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){this.activeDrag&&(this._shimming=!1,this._endDrag(),this.fire("ddm:end"),this.activeDrag.end.call(this.activeDrag),this.activeDrag=null)},stopDrag:function(){return this.activeDrag&&this._end(),this},_shimming:!1,_docMove:function(e){this._shimming||this._move(e)},_move:function(e){this.activeDrag&&(this.activeDrag._move.call(this.activeDrag,e),this._dropMove())},cssSizestoObject:function(e){var t=e.split(" ");switch(t.length){case 1:t[1]=t[2]=t[3]=t[0];break;case 2:t[2]=t[0],t[3]=t[1];break;case 3:t[3]=t[1]}return{top:parseInt(t[0],10),right:parseInt(t[1],10),bottom:parseInt(t[2],10),left:parseInt(t[3],10)}},getDrag:function(t){var n=!1,r=e.one(t);return r instanceof e.Node&&e.Array.each(this._drags,function(e){r.compareTo(e.get("node"))&&(n=e)}),n},swapPosition:function(t,n){t=e.DD.DDM.getNode(t),n=e.DD.DDM.getNode(n);var r=t.getXY(),i=n.getXY();return t.setXY(i),n.setXY(r),t},getNode:function(t){return t instanceof e.Node?t:(t&&t.get?e.Widget&&t instanceof e.Widget?t=t.get("boundingBox"):t=t.get("node"):t=e.one(t),t)},swapNode:function(t,n){t=e.DD.DDM.getNode(t),n=e.DD.DDM.getNode(n);var r=n.get("parentNode"),i=n.get("nextSibling");return i===t?r.insertBefore(t,n):n===t.get("nextSibling")?r.insertBefore(n,t):(t.get("parentNode").replaceChild(n,t),r.insertBefore(t,i)),t}}),e.namespace("DD"),e.DD.DDM=new n},"@VERSION@",{requires:["node","base","yui-throttle","classnamemanager"]});
YUI.add("dd-ddm-drop",function(e,t){e.mix(e.DD.DDM,{_noShim:!1,_activeShims:[],_hasActiveShim:function(){return this._noShim?!0:this._activeShims.length},_addActiveShim:function(e){this._activeShims.push(e)},_removeActiveShim:function(t){var n=[];e.Array.each(this._activeShims,function(e){e._yuid!==t._yuid&&n.push(e)}),this._activeShims=n},syncActiveShims:function(t){e.later(0,this,function(t){var n=t?this.targets:this._lookup();e.Array.each(n,function(e){e.sizeShim.call(e)},this)},t)},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:!0,activeDrop:null,validDrops:[],otherDrops:{},targets:[],_addValid:function(e){return this.validDrops.push(e),this},_removeValid:function(t){var n=[];return e.Array.each(this.validDrops,function(e){e!==t&&n.push(e)}),this.validDrops=n,this},isOverTarget:function(e){if(this.activeDrag&&e){var t=this.activeDrag.mouseXY,n,r=this.activeDrag.get("dragMode"),i,s=e.shim;if(t&&this.activeDrag){i=this.activeDrag.region;if(r===this.STRICT)return this.activeDrag.get("dragNode").inRegion(e.region,!0,i);if(e&&e.shim)return r===this.INTERSECT&&this._noShim?(n=i||this.activeDrag.get("node"),e.get("node").intersect(n,e.region).inRegion):(this._noShim&&(s=e.get("node")),s.intersect({top:t[1],bottom:t[1],left:t[0],right:t[0]},e.region).inRegion)}}return!1},clearCache:function(){this.validDrops=[],this.otherDrops={},this._activeShims=[]},_activateTargets:function(){this._noShim=!0,this.clearCache(),e.Array.each(this.targets,function(e){e._activateShim([]),e.get("noShim")===!0&&(this._noShim=!1)},this),this._handleTargetOver()},getBestMatch:function(t,n){var r=null,i=0,s;return e.Object.each(t,function(e){var t=this.activeDrag.get("dragNode").intersect(e.get("node"));e.region.area=t.area,t.inRegion&&t.area>i&&(i=t.area,r=e)},this),n?(s=[],e.Object.each(t,function(e){e!==r&&s.push(e)},this),[r,s]):r},_deactivateTargets:function(){var t=[],n,r=this.activeDrag,i=this.activeDrop;r&&i&&this.otherDrops[i]?(r.get("dragMode")?(n=this.getBestMatch(this.otherDrops,!0),i=n[0],t=n[1]):(t=this.otherDrops,delete t[i]),r.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),i&&(i.fire("drop:hit",{drag:r,drop:i,others:t}),r.fire("drag:drophit",{drag:r,drop:i,others:t}))):r&&r.get("dragging")&&(r.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),r.fire("drag:dropmiss",{pageX:r.lastXY[0],pageY:r.lastXY[1]})),this.activeDrop=null,e.Array.each(this.targets,function(e){e._deactivateShim([])},this)},_dropMove:function(){this._hasActiveShim()?this._handleTargetOver():e.Object.each(this.otherDrops,function(e){e._handleOut.apply(e,[])})},_lookup:function(){if(!this.useHash||this._noShim)return this.validDrops;var t=[];return e.Array.each(this.validDrops,function(e){e.shim&&e.shim.inViewportRegion(!1,e.region)&&t.push(e)}),t},_handleTargetOver:function(){var t=this._lookup();e.Array.each(t,function(e){e._handleTargetOver.call(e)},this)},_regTarget:function(e){this.targets.push(e)},_unregTarget:function(t){var n=[],r;e.Array.each(this.targets,function(e){e!==t&&n.push(e)},this),this.targets=n,r=[],e.Array.each(this.validDrops,function(e){e!==t&&r.push(e)}),this.validDrops=r},getDrop:function(t){var n=!1,r=e.one(t);return r instanceof e.Node&&e.Array.each(this.targets,function(e){r.compareTo(e.get("node"))&&(n=e)}),n}},!0)},"@VERSION@",{requires:["dd-ddm"]});
YUI.add("dd-ddm",function(e,t){e.mix(e.DD.DDM,{_pg:null,_debugShim:!1,_activateTargets:function(){},_deactivateTargets:function(){},_startDrag:function(){this.activeDrag&&this.activeDrag.get("useShim")&&(this._shimming=!0,this._pg_activate(),this._activateTargets())},_endDrag:function(){this._pg_deactivate(),this._deactivateTargets()},_pg_deactivate:function(){this._pg.setStyle("display","none")},_pg_activate:function(){this._pg||this._createPG();var e=this.activeDrag.get("activeHandle"),t="auto";e&&(t=e.getStyle("cursor")),t==="auto"&&(t=this.get("dragCursor")),this._pg_size(),this._pg.setStyles({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:t})},_pg_size:function(){if(this.activeDrag){var t=e.one("body"),n=t.get("docHeight"),r=t.get("docWidth");this._pg.setStyles({height:n+"px",width:r+"px"})}},_createPG:function(){var t=e.Node.create("<div></div>"),n=e.one("body"),r;t.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"}),t.set("id",e.stamp(t)),t.addClass(e.DD.DDM.CSS_PREFIX+"-shim"),n.prepend(t),this._pg=t,this._pg.on("mousemove",e.throttle(e.bind(this._move,this),this.get("throttleTime"))),this._pg.on("mouseup",e.bind(this._end,this)),r=e.one("win"),e.on("window:resize",e.bind(this._pg_size,this)),r.on("scroll",e.bind(this._pg_size,this))}},!0)},"@VERSION@",{requires:["dd-ddm-base","event-resize"]});
YUI.add("dd-delegate",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r="container",i="nodes",s=e.Node.create("<div>Temp Node</div>");e.extend(n,e.Base,{_bubbleTargets:e.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(e){this.set("dragNode",e.newVal)},_afterDragEnd:function(){e.DD.DDM._noShim=this._shimState,this.set("lastNode",this.dd.get("node")),this.get("lastNode").removeClass(e.DD.DDM.CSS_PREFIX+"-dragging"),this.dd._unprep(),this.dd.set("node",s)},_delMouseDown:function(t){var n=t.currentTarget,r=this.dd,s=n,o=this.get("dragConfig");n.test(this.get(i))&&!n.test(this.get("invalid"))&&(this._shimState=e.DD.DDM._noShim,e.DD.DDM._noShim=!0,this.set("currentNode",n),r.set("node",n),o&&o.dragNode?s=o.dragNode:r.proxy&&(s=e.DD.DDM._proxy),r.set("dragNode",s),r._prep(),r.fire("drag:mouseDown",{ev:t}))},_onMouseEnter:function(){this._shimState=e.DD.DDM._noShim,e.DD.DDM._noShim=!0},_onMouseLeave:function(){e.DD.DDM._noShim=this._shimState},initializer:function(){this._handles=[];var t=this.get("dragConfig")||{},n=this.get(r);t.node=s.cloneNode(!0),t.bubbleTargets=this,this.get("handles")&&(t.handles=this.get("handles")),this.dd=new e.DD.Drag(t),this.dd.after("drag:end",e.bind(this._afterDragEnd,this)),this.dd.on("dragNodeChange",e.bind(this._onNodeChange,this)),this.dd.after("drag:mouseup",function(){this._unprep()}),this._handles.push(e.delegate(e.DD.Drag.START_EVENT,e.bind(this._delMouseDown,this),n,this.get(i))),this._handles.push(e.on("mouseenter",e.bind(this._onMouseEnter,this),n)),this._handles.push(e.on("mouseleave",e.bind(this._onMouseLeave,this),n)),e.later(50,this,this.syncTargets),e.DD.DDM.regDelegate(this)},syncTargets:function(){if(!e.Plugin.Drop||this.get("destroyed"))return;var t,n,s;return this.get("target")&&(t=e.one(this.get(r)).all(this.get(i)),n=this.dd.get("groups"),s=this.get("dragConfig"),s&&s.groups&&(n=s.groups),t.each(function(e){this.createDrop(e,n)},this)),this},createDrop:function(t,n){var r={useShim:!1,bubbleTargets:this};return t.drop||t.plug(e.Plugin.Drop,r),t.drop.set("groups",n),t},destructor:function(){this.dd&&this.dd.destroy();if(e.Plugin.Drop){var t=e.one(this.get(r)).all(this.get(i));t.unplug(e.Plugin.Drop)}e.Array.each(this._handles,function(e){e.detach()})}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:s},currentNode:{value:s},dragNode:{value:s},over:{value:!1},target:{value:!1},dragConfig:{value:null},handles:{value:null}}}),e.mix(e.DD.DDM,{_delegates:[],regDelegate:function(e){this._delegates.push(e)},getDelegate:function(t){var n=null;return t=e.one(t),e.Array.each(this._delegates,function(e){t.test(e.get(r))&&(n=e)},this),n}}),e.namespace("DD"),e.DD.Delegate=n},"@VERSION@",{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]});
YUI.add("dd-drag",function(e,t){var n=e.DD.DDM,r="node",i="dragging",s="dragNode",o="offsetHeight",u="offsetWidth",a="drag:mouseDown",f="drag:afterMouseDown",l="drag:removeHandle",c="drag:addHandle",h="drag:removeInvalid",p="drag:addInvalid",d="drag:start",v="drag:end",m="drag:drag",g="drag:align",y=function(t){this._lazyAddAttrs=!1,y.superclass.constructor.apply(this,arguments);var r=n._regDrag(this);r||e.error("Failed to register node, already in use: "+t.node)};y.NAME="drag",y.START_EVENT="mousedown",y.ATTRS={node:{setter:function(t){if(this._canDrag(t))return t;var n=e.one(t);return n||e.error("DD.Drag: Invalid Node Given: "+t),n}},dragNode:{setter:function(t){if(this._canDrag(t))return t;var n=e.one(t);return n||e.error("DD.Drag: Invalid dragNode Given: "+t),n}},offsetNode:{value:!0},startCentered:{value:!1},clickPixelThresh:{value:n.get("clickPixelThresh")},clickTimeThresh:{value:n.get("clickTimeThresh")},lock:{value:!1,setter:function(e){return e?this.get(r).addClass(n.CSS_PREFIX+"-locked"):this.get(r).removeClass(n.CSS_PREFIX+"-locked"),e}},data:{value:!1},move:{value:!0},useShim:{value:!0},activeHandle:{value:!1},primaryButtonOnly:{value:!0},dragging:{value:!1},parent:{value:!1},target:{value:!1,setter:function(e){return this._handleTarget(e),e}},dragMode:{value:null,setter:function(e){return n._setDragMode(e)}},groups:{value:["default"],getter:function(){return this._groups?e.Object.keys(this._groups):(this._groups={},[])},setter:function(t){return this._groups=e.Array.hash(t),t}},handles:{value:null,setter:function(t){return t?(this._handles={},e.Array.each(t,function(t){var n=t;if(t instanceof e.Node||t instanceof e.NodeList)n=t._yuid;this._handles[n]=t},this)):this._handles=null,t}},bubbles:{setter:function(e){return this.addTarget(e),e}},haltDown:{value:!0}},e.extend(y,e.Base,{_canDrag:function(e){return e&&e.setXY&&e.getXY&&e.test&&e.contains?!0:!1},_bubbleTargets:e.DD.DDM,addToGroup:function(e){return this._groups[e]=!0,n._activateTargets(),this},removeFromGroup:function(e){return delete this._groups[e],n._activateTargets(),this},target:null,_handleTarget:function(t){e.DD.Drop&&(t===!1?this.target&&(n._unregTarget(this.target),this.target=null):(e.Lang.isObject(t)||(t={}),t.bubbleTargets=t.bubbleTargets||this.getTargets(),t.node=this.get(r),t.groups=t.groups||this.get("groups"),this.target=new e.DD.Drop(t)))},_groups:null,_createEvents:function(){this.publish(a,{defaultFn:this._defMouseDownFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"}),this.publish(g,{defaultFn:this._defAlignFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"}),this.publish(m,{defaultFn:this._defDragFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"}),this.publish(v,{defaultFn:this._defEndFn,preventedFn:this._prevEndFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"});var t=[f,l,c,h,p,d,"drag:drophit","drag:dropmiss","drag:over","drag:enter","drag:exit"];e.Array.each(t,function(e){this.publish(e,{type:e,emitFacade:!0,bubbles:!0,preventable:!1,queuable:!1,prefix:"drag"})},this)},_ev_md:null,_startTime:null,_endTime:null,_handles:null,_invalids:null,_invalidsDefault:{textarea:!0,input:!0,a:!0,button:!0,select:!0},_dragThreshMet:null,_fromTimeout:null,_clickTimeout:null,deltaXY:null,startXY:null,nodeXY:null,lastXY:null,actXY:null,realXY:null,mouseXY:null,region:null,_handleMouseUp:function(){this.fire("drag:mouseup"),this._fixIEMouseUp(),n.activeDrag&&n._end()},_fixDragStart:function(e){this.validClick(e)&&e.preventDefault()},_ieSelectFix:function(){return!1},_ieSelectBack:null,_fixIEMouseDown:function(){e.UA.ie&&(this._ieSelectBack=e.config.doc.body.onselectstart,e.config.doc.body.onselectstart=this._ieSelectFix)},_fixIEMouseUp:function(){e.UA.ie&&(e.config.doc.body.onselectstart=this._ieSelectBack)},_handleMouseDownEvent:function(e){this.fire(a,{ev:e})},_defMouseDownFn:function(t){var r=t.ev;this._dragThreshMet=!1,this._ev_md=r;if(this.get("primaryButtonOnly")&&r.button>1)return!1;this.validClick(r)&&(this._fixIEMouseDown(r),y.START_EVENT.indexOf("gesture")!==0&&(this.get("haltDown")?r.halt():r.preventDefault()),this._setStartPosition([r.pageX,r.pageY]),n.activeDrag=this,this._clickTimeout=e.later(this.get("clickTimeThresh"),this,this._timeoutCheck)),this.fire(f,{ev:r})},validClick:function(t){var n=!1,i=!1,s=t.target,o=null,u=null,a=null,f=!1;if(this._handles)e.Object.each(this._handles,function(t,r){t instanceof e.Node||t instanceof e.NodeList?n||(a=t,a instanceof e.Node&&(a=new e.NodeList(t._node)),a.each(function(e){e.contains(s)&&(n=!0)})):e.Lang.isString(r)&&s.test(r+", "+r+" *")&&!o&&(o=r,n=!0)});else{i=this.get(r);if(i.contains(s)||i.compareTo(s))n=!0}return n&&this._invalids&&e.Object.each(this._invalids,function(t,r){e.Lang.isString(r)&&s.test(r+", "+r+" *")&&(n=!1)}),n&&(o?(u=t.currentTarget.all(o),f=!1,u.each(function(e){(e.contains(s)||e.compareTo(s))&&!f&&(f=!0,this.set("activeHandle",e))},this)):this.set("activeHandle",this.get(r))),n},_setStartPosition:function(e){this.startXY=e,this.nodeXY=this.lastXY=this.realXY=this.get(r).getXY(),this.get("offsetNode")?this.deltaXY=[this.startXY[0]-this.nodeXY[0],this.startXY[1]-this.nodeXY[1]]:this.deltaXY=[0,0]},_timeoutCheck:function(){!this.get("lock")&&!this._dragThreshMet&&this._ev_md&&(this._fromTimeout=this._dragThreshMet=!0,this.start(),this._alignNode([this._ev_md.pageX,this._ev_md.pageY],!0))},removeHandle:function(t){var n=t;if(t instanceof e.Node||t instanceof e.NodeList)n=t._yuid;return this._handles[n]&&(delete this._handles[n],this.fire(l,{handle:t})),this},addHandle:function(t){this._handles||(this._handles={});var n=t;if(t instanceof e.Node||t instanceof e.NodeList)n=t._yuid;return this._handles[n]=t,this.fire(c,{handle:t}),this},removeInvalid:function(e){return this._invalids[e]&&(this._invalids[e]=null,delete this._invalids[e],this.fire(h,{handle:e})),this},addInvalid:function(t){return e.Lang.isString(t)&&(this._invalids[t]=!0,this.fire(p,{handle:t})),this},initializer:function(){this.get(r).dd=this;if(!this.get(r).get
("id")){var t=e.stamp(this.get(r));this.get(r).set("id",t)}this.actXY=[],this._invalids=e.clone(this._invalidsDefault,!0),this._createEvents(),this.get(s)||this.set(s,this.get(r)),this.on("initializedChange",e.bind(this._prep,this)),this.set("groups",this.get("groups"))},_prep:function(){this._dragThreshMet=!1;var t=this.get(r);t.addClass(n.CSS_PREFIX+"-draggable"),t.on(y.START_EVENT,e.bind(this._handleMouseDownEvent,this)),t.on("mouseup",e.bind(this._handleMouseUp,this)),t.on("dragstart",e.bind(this._fixDragStart,this))},_unprep:function(){var e=this.get(r);e.removeClass(n.CSS_PREFIX+"-draggable"),e.detachAll("mouseup"),e.detachAll("dragstart"),e.detachAll(y.START_EVENT),this.mouseXY=[],this.deltaXY=[0,0],this.startXY=[],this.nodeXY=[],this.lastXY=[],this.actXY=[],this.realXY=[]},start:function(){if(!this.get("lock")&&!this.get(i)){var e=this.get(r),t,a,f;this._startTime=(new Date).getTime(),n._start(),e.addClass(n.CSS_PREFIX+"-dragging"),this.fire(d,{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime}),e=this.get(s),f=this.nodeXY,t=e.get(u),a=e.get(o),this.get("startCentered")&&this._setStartPosition([f[0]+t/2,f[1]+a/2]),this.region={0:f[0],1:f[1],area:0,top:f[1],right:f[0]+t,bottom:f[1]+a,left:f[0]},this.set(i,!0)}return this},end:function(){return this._endTime=(new Date).getTime(),this._clickTimeout&&this._clickTimeout.cancel(),this._dragThreshMet=this._fromTimeout=!1,!this.get("lock")&&this.get(i)&&this.fire(v,{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime}),this.get(r).removeClass(n.CSS_PREFIX+"-dragging"),this.set(i,!1),this.deltaXY=[0,0],this},_defEndFn:function(){this._fixIEMouseUp(),this._ev_md=null},_prevEndFn:function(){this._fixIEMouseUp(),this.get(s).setXY(this.nodeXY),this._ev_md=null,this.region=null},_align:function(e){this.fire(g,{pageX:e[0],pageY:e[1]})},_defAlignFn:function(e){this.actXY=[e.pageX-this.deltaXY[0],e.pageY-this.deltaXY[1]]},_alignNode:function(e,t){this._align(e),t||this._moveNode()},_moveNode:function(e){var t=[],n=[],r=this.nodeXY,i=this.actXY;t[0]=i[0]-this.lastXY[0],t[1]=i[1]-this.lastXY[1],n[0]=i[0]-this.nodeXY[0],n[1]=i[1]-this.nodeXY[1],this.region={0:i[0],1:i[1],area:0,top:i[1],right:i[0]+this.get(s).get(u),bottom:i[1]+this.get(s).get(o),left:i[0]},this.fire(m,{pageX:i[0],pageY:i[1],scroll:e,info:{start:r,xy:i,delta:t,offset:n}}),this.lastXY=i},_defDragFn:function(t){if(this.get("move")){if(t.scroll&&t.scroll.node){var n=t.scroll.node.getDOMNode();n===e.config.win?n.scrollTo(t.scroll.left,t.scroll.top):(t.scroll.node.set("scrollTop",t.scroll.top),t.scroll.node.set("scrollLeft",t.scroll.left))}this.get(s).setXY([t.pageX,t.pageY]),this.realXY=[t.pageX,t.pageY]}},_move:function(e){if(this.get("lock"))return!1;this.mouseXY=[e.pageX,e.pageY];if(!this._dragThreshMet){var t=Math.abs(this.startXY[0]-e.pageX),n=Math.abs(this.startXY[1]-e.pageY);if(t>this.get("clickPixelThresh")||n>this.get("clickPixelThresh"))this._dragThreshMet=!0,this.start(),e&&e.preventDefault&&e.preventDefault(),this._alignNode([e.pageX,e.pageY])}else this._clickTimeout&&this._clickTimeout.cancel(),this._alignNode([e.pageX,e.pageY])},stopDrag:function(){return this.get(i)&&n._end(),this},destructor:function(){this._unprep(),this.target&&this.target.destroy(),n._unregDrag(this)}}),e.namespace("DD"),e.DD.Drag=y},"@VERSION@",{requires:["dd-ddm-base"]});
YUI.add("dd-drop-plugin",function(e,t){var n=function(e){e.node=e.host,n.superclass.constructor.apply(this,arguments)};n.NAME="dd-drop-plugin",n.NS="drop",e.extend(n,e.DD.Drop),e.namespace("Plugin"),e.Plugin.Drop=n},"@VERSION@",{requires:["dd-drop"]});
YUI.add("dd-drop",function(e,t){var n="node",r=e.DD.DDM,i="offsetHeight",s="offsetWidth",o="drop:over",u="drop:enter",a="drop:exit",f=function(){this._lazyAddAttrs=!1,f.superclass.constructor.apply(this,arguments),e.on("domready",e.bind(function(){e.later(100,this,this._createShim)},this)),r._regTarget(this)};f.NAME="drop",f.ATTRS={node:{setter:function(t){var n=e.one(t);return n||e.error("DD.Drop: Invalid Node Given: "+t),n}},groups:{value:["default"],getter:function(){return this._groups?e.Object.keys(this._groups):(this._groups={},[])},setter:function(t){return this._groups=e.Array.hash(t),t}},padding:{value:"0",setter:function(e){return r.cssSizestoObject(e)}},lock:{value:!1,setter:function(e){return e?this.get(n).addClass(r.CSS_PREFIX+"-drop-locked"):this.get(n).removeClass(r.CSS_PREFIX+"-drop-locked"),e}},bubbles:{setter:function(e){return this.addTarget(e),e}},useShim:{value:!0,setter:function(t){return e.DD.DDM._noShim=!t,t}}},e.extend(f,e.Base,{_bubbleTargets:e.DD.DDM,addToGroup:function(e){return this._groups[e]=!0,this},removeFromGroup:function(e){return delete this._groups[e],this},_createEvents:function(){var t=[o,u,a,"drop:hit"];e.Array.each(t,function(e){this.publish(e,{type:e,emitFacade:!0,preventable:!1,bubbles:!0,queuable:!1,prefix:"drop"})},this)},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(t){this._valid=!1;var n=!1;return e.Array.each(t,function(e){this._groups[e]&&(n=!0,this._valid=!0)},this),n},initializer:function(){e.later(100,this,this._createEvents);var t=this.get(n),i;t.get("id")||(i=e.stamp(t),t.set("id",i)),t.addClass(r.CSS_PREFIX+"-drop"),this.set("groups",this.get("groups"))},destructor:function(){r._unregTarget(this),this.shim&&this.shim!==this.get(n)&&(this.shim.detachAll(),this.shim.remove(),this.shim=null),this.get(n).removeClass(r.CSS_PREFIX+"-drop"),this.detachAll()},_deactivateShim:function(){if(!this.shim)return!1;this.get(n).removeClass(r.CSS_PREFIX+"-drop-active-valid"),this.get(n).removeClass(r.CSS_PREFIX+"-drop-active-invalid"),this.get(n).removeClass(r.CSS_PREFIX+"-drop-over"),this.get("useShim")&&this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"}),this.overTarget=!1},_activateShim:function(){if(!r.activeDrag)return!1;if(this.get(n)===r.activeDrag.get(n))return!1;if(this.get("lock"))return!1;var e=this.get(n);this.inGroup(r.activeDrag.get("groups"))?(e.removeClass(r.CSS_PREFIX+"-drop-active-invalid"),e.addClass(r.CSS_PREFIX+"-drop-active-valid"),r._addValid(this),this.overTarget=!1,this.get("useShim")||(this.shim=this.get(n)),this.sizeShim()):(r._removeValid(this),e.removeClass(r.CSS_PREFIX+"-drop-active-valid"),e.addClass(r.CSS_PREFIX+"-drop-active-invalid"))},sizeShim:function(){if(!r.activeDrag)return!1;if(this.get(n)===r.activeDrag.get(n))return!1;if(this.get("lock"))return!1;if(!this.shim)return e.later(100,this,this.sizeShim),!1;var t=this.get(n),o=t.get(i),u=t.get(s),a=t.getXY(),f=this.get("padding"),l,c,h;u=u+f.left+f.right,o=o+f.top+f.bottom,a[0]=a[0]-f.left,a[1]=a[1]-f.top,r.activeDrag.get("dragMode")===r.INTERSECT&&(l=r.activeDrag,c=l.get(n).get(i),h=l.get(n).get(s),o+=c,u+=h,a[0]=a[0]-(h-l.deltaXY[0]),a[1]=a[1]-(c-l.deltaXY[1])),this.get("useShim")&&this.shim.setStyles({height:o+"px",width:u+"px",top:a[1]+"px",left:a[0]+"px"}),this.region={0:a[0],1:a[1],area:0,top:a[1],right:a[0]+u,bottom:a[1]+o,left:a[0]}},_createShim:function(){if(!r._pg){e.later(10,this,this._createShim);return}if(this.shim)return;var t=this.get("node");this.get("useShim")&&(t=e.Node.create('<div id="'+this.get(n).get("id")+'_shim"></div>'),t.setStyles({height:this.get(n).get(i)+"px",width:this.get(n).get(s)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"}),r._pg.appendChild(t),t.on("mouseover",e.bind(this._handleOverEvent,this)),t.on("mouseout",e.bind(this._handleOutEvent,this))),this.shim=t},_handleTargetOver:function(){r.isOverTarget(this)?(this.get(n).addClass(r.CSS_PREFIX+"-drop-over"),r.activeDrop=this,r.otherDrops[this]=this,this.overTarget?(r.activeDrag.fire("drag:over",{drop:this,drag:r.activeDrag}),this.fire(o,{drop:this,drag:r.activeDrag})):r.activeDrag.get("dragging")&&(this.overTarget=!0,this.fire(u,{drop:this,drag:r.activeDrag}),r.activeDrag.fire("drag:enter",{drop:this,drag:r.activeDrag}),r.activeDrag.get(n).addClass(r.CSS_PREFIX+"-drag-over"))):this._handleOut()},_handleOverEvent:function(){this.shim.setStyle("zIndex","999"),r._addActiveShim(this)},_handleOutEvent:function(){this.shim.setStyle("zIndex","1"),r._removeActiveShim(this)},_handleOut:function(e){(!r.isOverTarget(this)||e)&&this.overTarget&&(this.overTarget=!1,e||r._removeActiveShim(this),r.activeDrag&&(this.get(n).removeClass(r.CSS_PREFIX+"-drop-over"),r.activeDrag.get(n).removeClass(r.CSS_PREFIX+"-drag-over"),this.fire(a,{drop:this,drag:r.activeDrag}),r.activeDrag.fire("drag:exit",{drop:this,drag:r.activeDrag}),delete r.otherDrops[this]))}}),e.DD.Drop=f},"@VERSION@",{requires:["dd-drag","dd-ddm-drop"]});
YUI.add("dd-plugin",function(e,t){var n=function(t){e.Widget&&t.host instanceof e.Widget?(t.node=t.host.get("boundingBox"),t.widget=t.host):(t.node=t.host,t.widget=!1),n.superclass.constructor.call(this,t)},r="drag:start",i="drag:drag",s="drag:end";n.NAME="dd-plugin",n.NS="dd",e.extend(n,e.DD.Drag,{_widgetHandles:null,_widget:undefined,_stoppedPosition:undefined,_usesWidgetPosition:function(t){var n=!1;return t&&(n=t.hasImpl&&t.hasImpl(e.WidgetPosition)?!0:!1),n},_checkEvents:function(){this._widget&&(this.proxy?this._widgetHandles.length>0&&this._removeWidgetListeners():this._widgetHandles.length===0&&this._attachWidgetListeners())},_removeWidgetListeners:function(){e.Array.each(this._widgetHandles,function(e){e.detach()}),this._widgetHandles=[]},_attachWidgetListeners:function(){this._usesWidgetPosition(this._widget)&&(this._widgetHandles.push(this.on(i,this._setWidgetCoords)),this._widgetHandles.push(this.on(s,this._updateStopPosition)))},initializer:function(e){this._widgetHandles=[],this._widget=e.widget,this.on(r,this._checkEvents),this._attachWidgetListeners()},_setWidgetCoords:function(e){var t=this._stoppedPosition||e.target.nodeXY,n=e.target.realXY,r=[n[0]-t[0],n[1]-t[1]];r[0]!==0&&r[1]!==0?this._widget.set("xy",n):r[0]===0?this._widget.set("y",n[1]):r[1]===0&&this._widget.set("x",n[0])},_updateStopPosition:function(e){this._stoppedPosition=e.target.realXY}}),e.namespace("Plugin"),e.Plugin.Drag=n},"@VERSION@",{optional:["dd-constrain","dd-proxy"],requires:["dd-drag"]});
YUI.add("dom-base",function(e,t){var n=e.config.doc.documentElement,r=e.DOM,i="tagName",s="ownerDocument",o="",u=e.Features.add,a=e.Features.test;e.mix(r,{getText:n.textContent!==undefined?function(e){var t="";return e&&(t=e.textContent),t||""}:function(e){var t="";return e&&(t=e.innerText||e.nodeValue),t||""},setText:n.textContent!==undefined?function(e,t){e&&(e.textContent=t)}:function(e,t){"innerText"in e?e.innerText=t:"nodeValue"in e&&(e.nodeValue=t)},CUSTOM_ATTRIBUTES:n.hasAttribute?{htmlFor:"for",className:"class"}:{"for":"htmlFor","class":"className"},setAttribute:function(e,t,n,i){e&&t&&e.setAttribute&&(t=r.CUSTOM_ATTRIBUTES[t]||t,e.setAttribute(t,n,i))},getAttribute:function(e,t,n){n=n!==undefined?n:2;var i="";return e&&t&&e.getAttribute&&(t=r.CUSTOM_ATTRIBUTES[t]||t,i=e.tagName==="BUTTON"&&t==="value"?r.getValue(e):e.getAttribute(t,n),i===null&&(i="")),i},VALUE_SETTERS:{},VALUE_GETTERS:{},getValue:function(e){var t="",n;return e&&e[i]&&(n=r.VALUE_GETTERS[e[i].toLowerCase()],n?t=n(e):t=e.value),t===o&&(t=o),typeof t=="string"?t:""},setValue:function(e,t){var n;e&&e[i]&&(n=r.VALUE_SETTERS[e[i].toLowerCase()],t=t===null?"":t,n?n(e,t):e.value=t)},creators:{}}),u("value-set","select",{test:function(){var t=e.config.doc.createElement("select");return t.innerHTML="<option>1</option><option>2</option>",t.value="2",t.value&&t.value==="2"}}),a("value-set","select")||(r.VALUE_SETTERS.select=function(e,t){for(var n=0,i=e.getElementsByTagName("option"),s;s=i[n++];)if(r.getValue(s)===t){s.selected=!0;break}}),e.mix(r.VALUE_GETTERS,{button:function(e){return e.attributes&&e.attributes.value?e.attributes.value.value:""}}),e.mix(r.VALUE_SETTERS,{button:function(e,t){var n=e.attributes.value;n||(n=e[s].createAttribute("value"),e.setAttributeNode(n)),n.value=t}}),e.mix(r.VALUE_GETTERS,{option:function(e){var t=e.attributes;return t.value&&t.value.specified?e.value:e.text},select:function(e){var t=e.value,n=e.options;return n&&n.length&&(e.multiple||e.selectedIndex>-1&&(t=r.getValue(n[e.selectedIndex]))),t}});var f,l,c;e.mix(e.DOM,{hasClass:function(t,n){var r=e.DOM._getRegExp("(?:^|\\s+)"+n+"(?:\\s+|$)");return r.test(t.className)},addClass:function(t,n){e.DOM.hasClass(t,n)||(t.className=e.Lang.trim([t.className,n].join(" ")))},removeClass:function(t,n){n&&l(t,n)&&(t.className=e.Lang.trim(t.className.replace(e.DOM._getRegExp("(?:^|\\s+)"+n+"(?:\\s+|$)")," ")),l(t,n)&&c(t,n))},replaceClass:function(e,t,n){c(e,t),f(e,n)},toggleClass:function(e,t,n){var r=n!==undefined?n:!l(e,t);r?f(e,t):c(e,t)}}),l=e.DOM.hasClass,c=e.DOM.removeClass,f=e.DOM.addClass;var h=/<([a-z]+)/i,r=e.DOM,u=e.Features.add,a=e.Features.test,p={},d=function(t,n){var r=e.config.doc.createElement("div"),i=!0;r.innerHTML=t;if(!r.firstChild||r.firstChild.tagName!==n.toUpperCase())i=!1;return i},v=/(?:\/(?:thead|tfoot|tbody|caption|col|colgroup)>)+\s*<tbody/,m="<table>",g="</table>",y;e.mix(e.DOM,{_fragClones:{},_create:function(e,t,n){n=n||"div";var i=r._fragClones[n];return i?i=i.cloneNode(!1):i=r._fragClones[n]=t.createElement(n),i.innerHTML=e,i},_children:function(e,t){var n=0,r=e.children,i,s,o;r&&r.tags&&(t?r=e.children.tags(t):s=r.tags("!").length);if(!r||!r.tags&&t||s){i=r||e.childNodes,r=[];while(o=i[n++])o.nodeType===1&&(!t||t===o.tagName)&&r.push(o)}return r||[]},create:function(t,n){typeof t=="string"&&(t=e.Lang.trim(t)),n=n||e.config.doc;var i=h.exec(t),s=r._create,o=p,u=null,a,f,l,c;return t!=undefined&&(i&&i[1]&&(a=o[i[1].toLowerCase()],typeof a=="function"?s=a:f=a),l=s(t,n,f),c=l.childNodes,c.length===1?u=l.removeChild(c[0]):c[0]&&c[0].className==="yui3-big-dummy"?(y=l.selectedIndex,c.length===2?u=c[0].nextSibling:(l.removeChild(c[0]),u=r._nl2frag(c,n))):u=r._nl2frag(c,n)),u},_nl2frag:function(t,n){var r=null,i,s;if(t&&(t.push||t.item)&&t[0]){n=n||t[0].ownerDocument,r=n.createDocumentFragment(),t.item&&(t=e.Array(t,0,!0));for(i=0,s=t.length;i<s;i++)r.appendChild(t[i])}return r},addHTML:function(t,n,i){var s=t.parentNode,o=0,u,a=n,f;if(n!=undefined)if(n.nodeType)f=n;else if(typeof n=="string"||typeof n=="number")a=f=r.create(n);else if(n[0]&&n[0].nodeType){f=e.config.doc.createDocumentFragment();while(u=n[o++])f.appendChild(u)}if(i)if(f&&i.parentNode)i.parentNode.insertBefore(f,i);else switch(i){case"replace":while(t.firstChild)t.removeChild(t.firstChild);f&&t.appendChild(f);break;case"before":f&&s.insertBefore(f,t);break;case"after":f&&(t.nextSibling?s.insertBefore(f,t.nextSibling):s.appendChild(f));break;default:f&&t.appendChild(f)}else f&&t.appendChild(f);return t.nodeName=="SELECT"&&y>0&&(t.selectedIndex=y-1),a},wrap:function(t,n){var r=n&&n.nodeType?n:e.DOM.create(n),i=r.getElementsByTagName("*");i.length&&(r=i[i.length-1]),t.parentNode&&t.parentNode.replaceChild(r,t),r.appendChild(t)},unwrap:function(e){var t=e.parentNode,n=t.lastChild,r=e,i;if(t){i=t.parentNode;if(i){e=t.firstChild;while(e!==n)r=e.nextSibling,i.insertBefore(e,t),e=r;i.replaceChild(n,t)}else t.removeChild(e)}}}),u("innerhtml","table",{test:function(){var t=e.config.doc.createElement("table");try{t.innerHTML="<tbody></tbody>"}catch(n){return!1}return t.firstChild&&t.firstChild.nodeName==="TBODY"}}),u("innerhtml-div","tr",{test:function(){return d("<tr></tr>","tr")}}),u("innerhtml-div","script",{test:function(){return d("<script></script>","script")}}),a("innerhtml","table")||(p.tbody=function(t,n){var i=r.create(m+t+g,n),s=e.DOM._children(i,"tbody")[0];return i.children.length>1&&s&&!v.test(t)&&s.parentNode.removeChild(s),i}),a("innerhtml-div","script")||(p.script=function(e,t){var n=t.createElement("div");return n.innerHTML="-"+e,n.removeChild(n.firstChild),n},p.link=p.style=p.script),a("innerhtml-div","tr")||(e.mix(p,{option:function(e,t){return r.create('<select><option class="yui3-big-dummy" selected></option>'+e+"</select>",t)},tr:function(e,t){return r.create("<tbody>"+e+"</tbody>",t)},td:function(e,t){return r.create("<tr>"+e+"</tr>",t)},col:function(e,t){return r.create("<colgroup>"+e+"</colgroup>",t)},tbody:"table"}),e.mix(p,{legend:"fieldset"
,th:p.td,thead:p.tbody,tfoot:p.tbody,caption:p.tbody,colgroup:p.tbody,optgroup:p.option})),r.creators=p,e.mix(e.DOM,{setWidth:function(t,n){e.DOM._setSize(t,"width",n)},setHeight:function(t,n){e.DOM._setSize(t,"height",n)},_setSize:function(e,t,n){n=n>0?n:0;var r=0;e.style[t]=n+"px",r=t==="height"?e.offsetHeight:e.offsetWidth,r>n&&(n-=r-n,n<0&&(n=0),e.style[t]=n+"px")}})},"@VERSION@",{requires:["dom-core"]});
YUI.add("dom-core",function(e,t){var n="nodeType",r="ownerDocument",i="documentElement",s="defaultView",o="parentWindow",u="tagName",a="parentNode",f="previousSibling",l="nextSibling",c="contains",h="compareDocumentPosition",p=[],d=function(){var t=e.config.doc.createElement("div"),n=t.appendChild(e.config.doc.createTextNode("")),r=!1;try{r=t.contains(n)}catch(i){}return r}(),v={byId:function(e,t){return v.allById(e,t)[0]||null},getId:function(e){var t;return e.id&&!e.id.tagName&&!e.id.item?t=e.id:e.attributes&&e.attributes.id&&(t=e.attributes.id.value),t},setId:function(e,t){e.setAttribute?e.setAttribute("id",t):e.id=t},ancestor:function(e,t,n,r){var i=null;return n&&(i=!t||t(e)?e:null),i||v.elementByAxis(e,a,t,null,r)},ancestors:function(e,t,n,r){var i=e,s=[];while(i=v.ancestor(i,t,n,r)){n=!1;if(i){s.unshift(i);if(r&&r(i))return s}}return s},elementByAxis:function(e,t,n,r,i){while(e&&(e=e[t])){if((r||e[u])&&(!n||n(e)))return e;if(i&&i(e))return null}return null},contains:function(e,t){var r=!1;if(!t||!e||!t[n]||!e[n])r=!1;else if(e[c]&&(t[n]===1||d))r=e[c](t);else if(e[h]){if(e===t||!!(e[h](t)&16))r=!0}else r=v._bruteContains(e,t);return r},inDoc:function(e,t){var n=!1,s;return e&&e.nodeType&&(t||(t=e[r]),s=t[i],s&&s.contains&&e.tagName?n=s.contains(e):n=v.contains(s,e)),n},allById:function(t,n){n=n||e.config.doc;var r=[],i=[],s,o;if(n.querySelectorAll)i=n.querySelectorAll('[id="'+t+'"]');else if(n.all){r=n.all(t);if(r){r.nodeName&&(r.id===t?(i.push(r),r=p):r=[r]);if(r.length)for(s=0;o=r[s++];)(o.id===t||o.attributes&&o.attributes.id&&o.attributes.id.value===t)&&i.push(o)}}else i=[v._getDoc(n).getElementById(t)];return i},isWindow:function(e){return!!(e&&e.scrollTo&&e.document)},_removeChildNodes:function(e){while(e.firstChild)e.removeChild(e.firstChild)},siblings:function(e,t){var n=[],r=e;while(r=r[f])r[u]&&(!t||t(r))&&n.unshift(r);r=e;while(r=r[l])r[u]&&(!t||t(r))&&n.push(r);return n},_bruteContains:function(e,t){while(t){if(e===t)return!0;t=t.parentNode}return!1},_getRegExp:function(e,t){return t=t||"",v._regexCache=v._regexCache||{},v._regexCache[e+t]||(v._regexCache[e+t]=new RegExp(e,t)),v._regexCache[e+t]},_getDoc:function(t){var i=e.config.doc;return t&&(i=t[n]===9?t:t[r]||t.document||e.config.doc),i},_getWin:function(t){var n=v._getDoc(t);return n[s]||n[o]||e.config.win},_batch:function(e,t,n,r,i,s){t=typeof t=="string"?v[t]:t;var o,u=0,a,f;if(t&&e)while(a=e[u++])o=o=t.call(v,a,n,r,i,s),typeof o!="undefined"&&(f||(f=[]),f.push(o));return typeof f!="undefined"?f:e},generateID:function(t){var n=t.id;return n||(n=e.stamp(t),t.id=n),n}};e.DOM=v},"@VERSION@",{requires:["oop","features"]});
YUI.add("dom-screen",function(e,t){(function(e){var t="documentElement",n="compatMode",r="position",i="fixed",s="relative",o="left",u="top",a="BackCompat",f="medium",l="borderLeftWidth",c="borderTopWidth",h="getBoundingClientRect",p="getComputedStyle",d=e.DOM,v=/^t(?:able|d|h)$/i,m;e.UA.ie&&(e.config.doc[n]!=="BackCompat"?m=t:m="body"),e.mix(d,{winHeight:function(e){var t=d._getWinSize(e).height;return t},winWidth:function(e){var t=d._getWinSize(e).width;return t},docHeight:function(e){var t=d._getDocSize(e).height;return Math.max(t,d._getWinSize(e).height)},docWidth:function(e){var t=d._getDocSize(e).width;return Math.max(t,d._getWinSize(e).width)},docScrollX:function(n,r){r=r||n?d._getDoc(n):e.config.doc;var i=r.defaultView,s=i?i.pageXOffset:0;return Math.max(r[t].scrollLeft,r.body.scrollLeft,s)},docScrollY:function(n,r){r=r||n?d._getDoc(n):e.config.doc;var i=r.defaultView,s=i?i.pageYOffset:0;return Math.max(r[t].scrollTop,r.body.scrollTop,s)},getXY:function(){return e.config.doc[t][h]?function(r){var i=null,s,o,u,f,l,c,p,v,g,y;if(r&&r.tagName){p=r.ownerDocument,u=p[n],u!==a?y=p[t]:y=p.body,y.contains?g=y.contains(r):g=e.DOM.contains(y,r);if(g){v=p.defaultView,v&&"pageXOffset"in v?(s=v.pageXOffset,o=v.pageYOffset):(s=m?p[m].scrollLeft:d.docScrollX(r,p),o=m?p[m].scrollTop:d.docScrollY(r,p)),e.UA.ie&&(!p.documentMode||p.documentMode<8||u===a)&&(l=y.clientLeft,c=y.clientTop),f=r[h](),i=[f.left,f.top];if(l||c)i[0]-=l,i[1]-=c;if(o||s)if(!e.UA.ios||e.UA.ios>=4.2)i[0]+=s,i[1]+=o}else i=d._getOffset(r)}return i}:function(t){var n=null,s,o,u,a,f;if(t)if(d.inDoc(t)){n=[t.offsetLeft,t.offsetTop],s=t.ownerDocument,o=t,u=e.UA.gecko||e.UA.webkit>519?!0:!1;while(o=o.offsetParent)n[0]+=o.offsetLeft,n[1]+=o.offsetTop,u&&(n=d._calcBorders(o,n));if(d.getStyle(t,r)!=i){o=t;while(o=o.parentNode){a=o.scrollTop,f=o.scrollLeft,e.UA.gecko&&d.getStyle(o,"overflow")!=="visible"&&(n=d._calcBorders(o,n));if(a||f)n[0]-=f,n[1]-=a}n[0]+=d.docScrollX(t,s),n[1]+=d.docScrollY(t,s)}else n[0]+=d.docScrollX(t,s),n[1]+=d.docScrollY(t,s)}else n=d._getOffset(t);return n}}(),getScrollbarWidth:e.cached(function(){var t=e.config.doc,n=t.createElement("div"),r=t.getElementsByTagName("body")[0],i=.1;return r&&(n.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;",n.appendChild(t.createElement("p")).style.height="1px",r.insertBefore(n,r.firstChild),i=n.offsetWidth-n.clientWidth,r.removeChild(n)),i},null,.1),getX:function(e){return d.getXY(e)[0]},getY:function(e){return d.getXY(e)[1]},setXY:function(e,t,n){var i=d.setStyle,a,f,l,c;e&&t&&(a=d.getStyle(e,r),f=d._getOffset(e),a=="static"&&(a=s,i(e,r,a)),c=d.getXY(e),t[0]!==null&&i(e,o,t[0]-c[0]+f[0]+"px"),t[1]!==null&&i(e,u,t[1]-c[1]+f[1]+"px"),n||(l=d.getXY(e),(l[0]!==t[0]||l[1]!==t[1])&&d.setXY(e,t,!0)))},setX:function(e,t){return d.setXY(e,[t,null])},setY:function(e,t){return d.setXY(e,[null,t])},swapXY:function(e,t){var n=d.getXY(e);d.setXY(e,d.getXY(t)),d.setXY(t,n)},_calcBorders:function(t,n){var r=parseInt(d[p](t,c),10)||0,i=parseInt(d[p](t,l),10)||0;return e.UA.gecko&&v.test(t.tagName)&&(r=0,i=0),n[0]+=i,n[1]+=r,n},_getWinSize:function(r,i){i=i||r?d._getDoc(r):e.config.doc;var s=i.defaultView||i.parentWindow,o=i[n],u=s.innerHeight,a=s.innerWidth,f=i[t];return o&&!e.UA.opera&&(o!="CSS1Compat"&&(f=i.body),u=f.clientHeight,a=f.clientWidth),{height:u,width:a}},_getDocSize:function(r){var i=r?d._getDoc(r):e.config.doc,s=i[t];return i[n]!="CSS1Compat"&&(s=i.body),{height:s.scrollHeight,width:s.scrollWidth}}})})(e),function(e){var t="top",n="right",r="bottom",i="left",s=function(e,s){var o=Math.max(e[t],s[t]),u=Math.min(e[n],s[n]),a=Math.min(e[r],s[r]),f=Math.max(e[i],s[i]),l={};return l[t]=o,l[n]=u,l[r]=a,l[i]=f,l},o=e.DOM;e.mix(o,{region:function(e){var t=o.getXY(e),n=!1;return e&&t&&(n=o._getRegion(t[1],t[0]+e.offsetWidth,t[1]+e.offsetHeight,t[0])),n},intersect:function(u,a,f){var l=f||o.region(u),c={},h=a,p;if(h.tagName)c=o.region(h);else{if(!e.Lang.isObject(a))return!1;c=a}return p=s(c,l),{top:p[t],right:p[n],bottom:p[r],left:p[i],area:(p[r]-p[t])*(p[n]-p[i]),yoff:p[r]-p[t],xoff:p[n]-p[i],inRegion:o.inRegion(u,a,!1,f)}},inRegion:function(u,a,f,l){var c={},h=l||o.region(u),p=a,d;if(p.tagName)c=o.region(p);else{if(!e.Lang.isObject(a))return!1;c=a}return f?h[i]>=c[i]&&h[n]<=c[n]&&h[t]>=c[t]&&h[r]<=c[r]:(d=s(c,h),d[r]>=d[t]&&d[n]>=d[i]?!0:!1)},inViewportRegion:function(e,t,n){return o.inRegion(e,o.viewportRegion(e),t,n)},_getRegion:function(e,s,o,u){var a={};return a[t]=a[1]=e,a[i]=a[0]=u,a[r]=o,a[n]=s,a.width=a[n]-a[i],a.height=a[r]-a[t],a},viewportRegion:function(t){t=t||e.config.doc.documentElement;var n=!1,r,i;return t&&(r=o.docScrollX(t),i=o.docScrollY(t),n=o._getRegion(i,o.winWidth(t)+r,i+o.winHeight(t),r)),n}})}(e)},"@VERSION@",{requires:["dom-base","dom-style"]});
YUI.add("dom-style-ie",function(e,t){(function(e){var t="hasLayout",n="px",r="filter",i="filters",s="opacity",o="auto",u="borderWidth",a="borderTopWidth",f="borderRightWidth",l="borderBottomWidth",c="borderLeftWidth",h="width",p="height",d="transparent",v="visible",m="getComputedStyle",g=undefined,y=e.config.doc.documentElement,b=e.Features.test,w=e.Features.add,E=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,S=e.UA.ie>=8,x=function(e){return e.currentStyle||e.style},T={CUSTOM_STYLES:{},get:function(t,r){var i="",o;return t&&(o=x(t)[r],r===s&&e.DOM.CUSTOM_STYLES[s]?i=e.DOM.CUSTOM_STYLES[s].get(t):!o||o.indexOf&&o.indexOf(n)>-1?i=o:e.DOM.IE.COMPUTED[r]?i=e.DOM.IE.COMPUTED[r](t,r):E.test(o)?i=T.getPixel(t,r)+n:i=o),i},sizeOffsets:{width:["Left","Right"],height:["Top","Bottom"],top:["Top"],bottom:["Bottom"]},getOffset:function(e,t){var r=x(e)[t],i=t.charAt(0).toUpperCase()+t.substr(1),s="offset"+i,u="pixel"+i,a=T.sizeOffsets[t],f=e.ownerDocument.compatMode,l="";return r===o||r.indexOf("%")>-1?(l=e["offset"+i],f!=="BackCompat"&&(a[0]&&(l-=T.getPixel(e,"padding"+a[0]),l-=T.getBorderWidth(e,"border"+a[0]+"Width",1)),a[1]&&(l-=T.getPixel(e,"padding"+a[1]),l-=T.getBorderWidth(e,"border"+a[1]+"Width",1)))):(!e.style[u]&&!e.style[t]&&(e.style[t]=r),l=e.style[u]),l+n},borderMap:{thin:S?"1px":"2px",medium:S?"3px":"4px",thick:S?"5px":"6px"},getBorderWidth:function(e,t,r){var i=r?"":n,s=e.currentStyle[t];return s.indexOf(n)<0&&(T.borderMap[s]&&e.currentStyle.borderStyle!=="none"?s=T.borderMap[s]:s=0),r?parseFloat(s):s},getPixel:function(e,t){var n=null,r=x(e),i=r.right,s=r[t];return e.style.right=s,n=e.style.pixelRight,e.style.right=i,n},getMargin:function(e,t){var r,i=x(e);return i[t]==o?r=0:r=T.getPixel(e,t),r+n},getVisibility:function(e,t){var n;while((n=e.currentStyle)&&n[t]=="inherit")e=e.parentNode;return n?n[t]:v},getColor:function(t,n){var r=x(t)[n];return(!r||r===d)&&e.DOM.elementByAxis(t,"parentNode",null,function(e){r=x(e)[n];if(r&&r!==d)return t=e,!0}),e.Color.toRGB(r)},getBorderColor:function(t,n){var r=x(t),i=r[n]||r.color;return e.Color.toRGB(e.Color.toHex(i))}},N={};w("style","computedStyle",{test:function(){return"getComputedStyle"in e.config.win}}),w("style","opacity",{test:function(){return"opacity"in y.style}}),w("style","filter",{test:function(){return"filters"in y}}),!b("style","opacity")&&b("style","filter")&&(e.DOM.CUSTOM_STYLES[s]={get:function(e){var t=100;try{t=e[i]["DXImageTransform.Microsoft.Alpha"][s]}catch(n){try{t=e[i]("alpha")[s]}catch(r){}}return t/100},set:function(e,n,i){var o,u=x(e),a=u[r];i=i||e.style,n===""&&(o=s in u?u[s]:1,n=o),typeof a=="string"&&(i[r]=a.replace(/alpha([^)]*\))/gi,"")+(n<=1?"alpha("+s+"="+n*100+")":""),i[r]||i.removeAttribute(r),u[t]||(i.zoom=1))}});try{e.config.doc.createElement("div").style.height="-1px"}catch(C){e.DOM.CUSTOM_STYLES.height={set:function(e,t,n){var r=parseFloat(t);if(r>=0||t==="auto"||t==="")n.height=t}},e.DOM.CUSTOM_STYLES.width={set:function(e,t,n){var r=parseFloat(t);if(r>=0||t==="auto"||t==="")n.width=t}}}b("style","computedStyle")||(N[h]=N[p]=T.getOffset,N.color=N.backgroundColor=T.getColor,N[u]=N[a]=N[f]=N[l]=N[c]=T.getBorderWidth,N.marginTop=N.marginRight=N.marginBottom=N.marginLeft=T.getMargin,N.visibility=T.getVisibility,N.borderColor=N.borderTopColor=N.borderRightColor=N.borderBottomColor=N.borderLeftColor=T.getBorderColor,e.DOM[m]=T.get,e.namespace("DOM.IE"),e.DOM.IE.COMPUTED=N,e.DOM.IE.ComputedStyle=T)})(e)},"@VERSION@",{requires:["dom-style"]});
YUI.add("dom-style",function(e,t){(function(e){var t="documentElement",n="defaultView",r="ownerDocument",i="style",s="float",o="cssFloat",u="styleFloat",a="transparent",f="getComputedStyle",l="getBoundingClientRect",c=e.config.win,h=e.config.doc,p=undefined,d=e.DOM,v="transform",m="transformOrigin",g=["WebkitTransform","MozTransform","OTransform","msTransform"],y=/color$/i,b=/width|height|top|left|right|bottom|margin|padding/i;e.Array.each(g,function(e){e in h[t].style&&(v=e,m=e+"Origin")}),e.mix(d,{DEFAULT_UNIT:"px",CUSTOM_STYLES:{},setStyle:function(e,t,n,r){r=r||e.style;var i=d.CUSTOM_STYLES;if(r){n===null||n===""?n="":!isNaN(new Number(n))&&b.test(t)&&(n+=d.DEFAULT_UNIT);if(t in i){if(i[t].set){i[t].set(e,n,r);return}typeof i[t]=="string"&&(t=i[t])}else t===""&&(t="cssText",n="");r[t]=n}},getStyle:function(e,t,n){n=n||e.style;var r=d.CUSTOM_STYLES,i="";if(n){if(t in r){if(r[t].get)return r[t].get(e,t,n);typeof r[t]=="string"&&(t=r[t])}i=n[t],i===""&&(i=d[f](e,t))}return i},setStyles:function(t,n){var r=t.style;e.each(n,function(e,n){d.setStyle(t,n,e,r)},d)},getComputedStyle:function(e,t){var s="",o=e[r],u;return e[i]&&o[n]&&o[n][f]&&(u=o[n][f](e,null),u&&(s=u[t])),s}}),h[t][i][o]!==p?d.CUSTOM_STYLES[s]=o:h[t][i][u]!==p&&(d.CUSTOM_STYLES[s]=u),e.UA.opera&&(d[f]=function(t,i){var s=t[r][n],o=s[f](t,"")[i];return y.test(i)&&(o=e.Color.toRGB(o)),o}),e.UA.webkit&&(d[f]=function(e,t){var i=e[r][n],s=i[f](e,"")[t];return s==="rgba(0, 0, 0, 0)"&&(s=a),s}),e.DOM._getAttrOffset=function(t,n){var r=e.DOM[f](t,n),i=t.offsetParent,s,o,u;return r==="auto"&&(s=e.DOM.getStyle(t,"position"),s==="static"||s==="relative"?r=0:i&&i[l]&&(o=i[l]()[n],u=t[l]()[n],n==="left"||n==="top"?r=u-o:r=o-t[l]()[n])),r},e.DOM._getOffset=function(e){var t,n=null;return e&&(t=d.getStyle(e,"position"),n=[parseInt(d[f](e,"left"),10),parseInt(d[f](e,"top"),10)],isNaN(n[0])&&(n[0]=parseInt(d.getStyle(e,"left"),10),isNaN(n[0])&&(n[0]=t==="relative"?0:e.offsetLeft||0)),isNaN(n[1])&&(n[1]=parseInt(d.getStyle(e,"top"),10),isNaN(n[1])&&(n[1]=t==="relative"?0:e.offsetTop||0))),n},d.CUSTOM_STYLES.transform={set:function(e,t,n){n[v]=t},get:function(e,t){return d[f](e,v)}},d.CUSTOM_STYLES.transformOrigin={set:function(e,t,n){n[m]=t},get:function(e,t){return d[f](e,m)}}})(e)},"@VERSION@",{requires:["dom-base","color-base"]});
YUI.add("escape",function(e,t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},r={html:function(e){return(e+"").replace(/[&<>"'\/`]/g,r._htmlReplacer)},regex:function(e){return(e+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(e){return n[e]}};r.regexp=r.regex,e.Escape=r},"@VERSION@",{requires:["yui-base"]});
YUI.add("event-base",function(e,t){e.publish("domready",{fireOnce:!0,async:!0}),YUI.Env.DOMReady?e.fire("domready"):e.Do.before(function(){e.fire("domready")},YUI.Env,"_ready");var n=e.UA,r={},i={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9,63272:46,63273:36,63275:35},s=function(t){if(!t)return t;try{t&&3==t.nodeType&&(t=t.parentNode)}catch(n){return null}return e.one(t)},o=function(e,t,n){this._event=e,this._currentTarget=t,this._wrapper=n||r,this.init()};e.extend(o,Object,{init:function(){var e=this._event,t=this._wrapper.overrides,r=e.pageX,o=e.pageY,u,a=this._currentTarget;this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.shiftKey=e.shiftKey,this.type=t&&t.type||e.type,this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=r,this.pageY=o,u=e.keyCode||e.charCode,n.webkit&&u in i&&(u=i[u]),this.keyCode=u,this.charCode=u,this.which=e.which||e.charCode||u,this.button=this.which,this.target=s(e.target),this.currentTarget=s(a),this.relatedTarget=s(e.relatedTarget);if(e.type=="mousewheel"||e.type=="DOMMouseScroll")this.wheelDelta=e.detail?e.detail*-1:Math.round(e.wheelDelta/80)||(e.wheelDelta<0?-1:1);this._touch&&this._touch(e,a,this._wrapper)},stopPropagation:function(){this._event.stopPropagation(),this._wrapper.stopped=1,this.stopped=1},stopImmediatePropagation:function(){var e=this._event;e.stopImmediatePropagation?e.stopImmediatePropagation():this.stopPropagation(),this._wrapper.stopped=2,this.stopped=2},preventDefault:function(e){var t=this._event;t.preventDefault(),e&&(t.returnValue=e),this._wrapper.prevented=1,this.prevented=1},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}}),o.resolve=s,e.DOM2EventFacade=o,e.DOMEventFacade=o,function(){e.Env.evt.dom_wrappers={},e.Env.evt.dom_map={};var t=e.Env.evt,n=e.config,r=n.win,i=YUI.Env.add,s=YUI.Env.remove,o=function(){YUI.Env.windowLoaded=!0,e.Event._load(),s(r,"load",o)},u=function(){e.Event._unload()},a="domready",f="~yui|2|compat~",l=function(t){try{return t&&typeof t!="string"&&e.Lang.isNumber(t.length)&&!t.tagName&&!e.DOM.isWindow(t)}catch(n){return!1}},c=e.CustomEvent.prototype._delete,h=function(t){var n=c.apply(this,arguments);return this.hasSubs()||e.Event._clean(this),n},p=function(){var n=!1,o=0,c=[],d=t.dom_wrappers,v=null,m=t.dom_map;return{POLL_RETRYS:1e3,POLL_INTERVAL:40,lastError:null,_interval:null,_dri:null,DOMReady:!1,startInterval:function(){p._interval||(p._interval=setInterval(p._poll,p.POLL_INTERVAL))},onAvailable:function(t,n,r,i,s,u){var a=e.Array(t),f,l;for(f=0;f<a.length;f+=1)c.push({id:a[f],fn:n,obj:r,override:i,checkReady:s,compat:u});return o=this.POLL_RETRYS,setTimeout(p._poll,0),l=new e.EventHandle({_delete:function(){if(l.handle){l.handle.detach();return}var e,t;for(e=0;e<a.length;e++)for(t=0;t<c.length;t++)a[e]===c[t].id&&c.splice(t,1)}}),l},onContentReady:function(e,t,n,r,i){return p.onAvailable(e,t,n,r,!0,i)},attach:function(t,n,r,i){return p._attach(e.Array(arguments,0,!0))},_createWrapper:function(t,n,s,o,u){var a,f=e.stamp(t),l="event:"+f+n;return!1===u&&(l+="native"),s&&(l+="capture"),a=d[l],a||(a=e.publish(l,{silent:!0,bubbles:!1,emitFacade:!1,contextFn:function(){return o?a.el:(a.nodeRef=a.nodeRef||e.one(a.el),a.nodeRef)}}),a.overrides={},a.el=t,a.key=l,a.domkey=f,a.type=n,a.fn=function(e){a.fire(p.getEvent(e,t,o||!1===u))},a.capture=s,t==r&&n=="load"&&(a.fireOnce=!0,v=l),a._delete=h,d[l]=a,m[f]=m[f]||{},m[f][l]=a,i(t,n,a.fn,s)),a},_attach:function(t,n){var i,s,o,u,a,c=!1,h,d=t[0],v=t[1],m=t[2]||r,g=n&&n.facade,y=n&&n.capture,b=n&&n.overrides;t[t.length-1]===f&&(i=!0);if(!v||!v.call)return!1;if(l(m))return s=[],e.each(m,function(e,r){t[2]=e,s.push(p._attach(t.slice(),n))}),new e.EventHandle(s);if(e.Lang.isString(m)){if(i)o=e.DOM.byId(m);else{o=e.Selector.query(m);switch(o.length){case 0:o=null;break;case 1:o=o[0];break;default:return t[2]=o,p._attach(t,n)}}if(!o)return h=p.onAvailable(m,function(){h.handle=p._attach(t,n)},p,!0,!1,i),h;m=o}return m?(e.Node&&e.instanceOf(m,e.Node)&&(m=e.Node.getDOMNode(m)),u=p._createWrapper(m,d,y,i,g),b&&e.mix(u.overrides,b),m==r&&d=="load"&&YUI.Env.windowLoaded&&(c=!0),i&&t.pop(),a=t[3],h=u._on(v,a,t.length>4?t.slice(4):null),c&&u.fire(),h):!1},detach:function(t,n,r,i){var s=e.Array(arguments,0,!0),o,u,a,c,h,v;s[s.length-1]===f&&(o=!0);if(t&&t.detach)return t.detach();typeof r=="string"&&(o?r=e.DOM.byId(r):(r=e.Selector.query(r),u=r.length,u<1?r=null:u==1&&(r=r[0])));if(!r)return!1;if(r.detach)return s.splice(2,1),r.detach.apply(r,s);if(l(r)){a=!0;for(c=0,u=r.length;c<u;++c)s[2]=r[c],a=e.Event.detach.apply(e.Event,s)&&a;return a}return!t||!n||!n.call?p.purgeElement(r,!1,t):(h="event:"+e.stamp(r)+t,v=d[h],v?v.detach(n):!1)},getEvent:function(t,n,i){var s=t||r.event;return i?s:new e.DOMEventFacade(s,n,d["event:"+e.stamp(n)+t.type])},generateId:function(t){return e.DOM.generateID(t)},_isValidCollection:l,_load:function(t){n||(n=!0,e.fire&&e.fire(a),p._poll())},_poll:function(){if(p.locked)return;if(e.UA.ie&&!YUI.Env.DOMReady){p.startInterval();return}p.locked=!0;var t,r,i,s,u,a,f=!n;f||(f=o>0),u=[],a=function(t,n){var r,i=n.override;try{n.compat?(n.override?i===!0?r=n.obj:r=i:r=t,n.fn.call(r,n.obj)):(r=n.obj||e.one(t),n.fn.apply(r,e.Lang.isArray(i)?i:[]))}catch(s){}};for(t=0,r=c.length;t<r;++t)i=c[t],i&&!i.checkReady&&(s=i.compat?e.DOM.byId(i.id):e.Selector.query(i.id,null,!0),s?(a(s,i),c[t]=null):u.push(i));for(t=0,r=c.length;t<r;++t){i=c[t];if(i&&i.checkReady){s=i.compat?e.DOM.byId(i.id):e.Selector.query(i.id,null,!0);if(s){if(n||s.get&&s.get("nextSibling")||s.nextSibling)a(s,i),c[t]=null}else u.push(i)}}o=u.length===0?0:o-1,f?p.startInterval():(clearInterval(p._interval),p._interval=null),p.locked=!1;return},purgeElement:function(t,n,r){var i=e.Lang.isString(t)?e.Selector.query(t,null,!0):t,s=p.getListeners(i,r),o,u,a,f;if(n&&i){s=s||[],a=e.Selector.query("*",i),u=a.length;for(o=0;o<u;++o)f=p.getListeners(a[o],r),f&&(s=s.concat(f))}if(s)for(o=0,u=s.length;o<u;++o)s[o].detachAll()}
,_clean:function(t){var n=t.key,r=t.domkey;s(t.el,t.type,t.fn,t.capture),delete d[n],delete e._yuievt.events[n],m[r]&&(delete m[r][n],e.Object.size(m[r])||delete m[r])},getListeners:function(n,r){var i=e.stamp(n,!0),s=m[i],o=[],u=r?"event:"+i+r:null,a=t.plugins;return s?(u?(a[r]&&a[r].eventDef&&(u+="_synth"),s[u]&&o.push(s[u]),u+="native",s[u]&&o.push(s[u])):e.each(s,function(e,t){o.push(e)}),o.length?o:null):null},_unload:function(t){e.each(d,function(e,n){e.type=="unload"&&e.fire(t),e.detachAll()}),s(r,"unload",u)},nativeAdd:i,nativeRemove:s}}();e.Event=p,n.injected||YUI.Env.windowLoaded?o():i(r,"load",o);if(e.UA.ie){e.on(a,p._poll);if(e.UA.ie<7)try{i(r,"unload",u)}catch(d){}}p.Custom=e.CustomEvent,p.Subscriber=e.Subscriber,p.Target=e.EventTarget,p.Handle=e.EventHandle,p.Facade=e.EventFacade,p._poll()}(),e.Env.evt.plugins.available={on:function(t,n,r,i){var s=arguments.length>4?e.Array(arguments,4,!0):null;return e.Event.onAvailable.call(e.Event,r,n,i,s)}},e.Env.evt.plugins.contentready={on:function(t,n,r,i){var s=arguments.length>4?e.Array(arguments,4,!0):null;return e.Event.onContentReady.call(e.Event,r,n,i,s)}}},"@VERSION@",{requires:["event-custom-base"]});
YUI.add("event-custom-base",function(e,t){e.Env.evt={handles:{},plugins:{}};var n=0,r=1,i={objs:null,before:function(t,r,i,s){var o=t,u;return s&&(u=[t,s].concat(e.Array(arguments,4,!0)),o=e.rbind.apply(e,u)),this._inject(n,o,r,i)},after:function(t,n,i,s){var o=t,u;return s&&(u=[t,s].concat(e.Array(arguments,4,!0)),o=e.rbind.apply(e,u)),this._inject(r,o,n,i)},_inject:function(t,n,r,i){var s=e.stamp(r),o,u;return r._yuiaop||(r._yuiaop={}),o=r._yuiaop,o[i]||(o[i]=new e.Do.Method(r,i),r[i]=function(){return o[i].exec.apply(o[i],arguments)}),u=s+e.stamp(n)+i,o[i].register(u,n,t),new e.EventHandle(o[i],u)},detach:function(e){e.detach&&e.detach()}};e.Do=i,i.Method=function(e,t){this.obj=e,this.methodName=t,this.method=e[t],this.before={},this.after={}},i.Method.prototype.register=function(e,t,n){n?this.after[e]=t:this.before[e]=t},i.Method.prototype._delete=function(e){delete this.before[e],delete this.after[e]},i.Method.prototype.exec=function(){var t=e.Array(arguments,0,!0),n,r,s,o=this.before,u=this.after,a=!1;for(n in o)if(o.hasOwnProperty(n)){r=o[n].apply(this.obj,t);if(r)switch(r.constructor){case i.Halt:return r.retVal;case i.AlterArgs:t=r.newArgs;break;case i.Prevent:a=!0;break;default:}}a||(r=this.method.apply(this.obj,t)),i.originalRetVal=r,i.currentRetVal=r;for(n in u)if(u.hasOwnProperty(n)){s=u[n].apply(this.obj,t);if(s&&s.constructor===i.Halt)return s.retVal;s&&s.constructor===i.AlterReturn&&(r=s.newRetVal,i.currentRetVal=r)}return r},i.AlterArgs=function(e,t){this.msg=e,this.newArgs=t},i.AlterReturn=function(e,t){this.msg=e,this.newRetVal=t},i.Halt=function(e,t){this.msg=e,this.retVal=t},i.Prevent=function(e){this.msg=e},i.Error=i.Halt;var s=e.Array,o="after",u=["broadcast","monitored","bubbles","context","contextFn","currentTarget","defaultFn","defaultTargetOnly","details","emitFacade","fireOnce","async","host","preventable","preventedFn","queuable","silent","stoppedFn","target","type"],a=s.hash(u),f=Array.prototype.slice,l=9,c="yui:log",h=function(e,t,n){var r;for(r in t)a[r]&&(n||!(r in e))&&(e[r]=t[r]);return e};e.CustomEvent=function(t,n){this._kds=e.CustomEvent.keepDeprecatedSubs,this.id=e.guid(),this.type=t,this.silent=this.logSystem=t===c,this._kds&&(this.subscribers={},this.afters={}),n&&h(this,n,!0)},e.CustomEvent.keepDeprecatedSubs=!1,e.CustomEvent.mixConfigs=h,e.CustomEvent.prototype={constructor:e.CustomEvent,signature:l,context:e,preventable:!0,bubbles:!0,hasSubs:function(e){var t=0,n=0,r=this._subscribers,i=this._afters,s=this.sibling;return r&&(t=r.length),i&&(n=i.length),s&&(r=s._subscribers,i=s._afters,r&&(t+=r.length),i&&(n+=i.length)),e?e==="after"?n:t:t+n},monitor:function(e){this.monitored=!0;var t=this.id+"|"+this.type+"_"+e,n=f.call(arguments,0);return n[0]=t,this.host.on.apply(this.host,n)},getSubs:function(){var e=this.sibling,t=this._subscribers,n=this._afters,r,i;return e&&(r=e._subscribers,i=e._afters),r?t?t=t.concat(r):t=r.concat():t?t=t.concat():t=[],i?n?n=n.concat(i):n=i.concat():n?n=n.concat():n=[],[t,n]},applyConfig:function(e,t){h(this,e,t)},_on:function(t,n,r,i){var s=new e.Subscriber(t,n,r,i),u;return this.fireOnce&&this.fired&&(u=this.firedWith,this.emitFacade&&this._addFacadeToArgs&&this._addFacadeToArgs(u),this.async?setTimeout(e.bind(this._notify,this,s,u),0):this._notify(s,u)),i===o?(this._afters||(this._afters=[]),this._afters.push(s)):(this._subscribers||(this._subscribers=[]),this._subscribers.push(s)),this._kds&&(i===o?this.afters[s.id]=s:this.subscribers[s.id]=s),new e.EventHandle(this,s)},subscribe:function(e,t){var n=arguments.length>2?f.call(arguments,2):null;return this._on(e,t,n,!0)},on:function(e,t){var n=arguments.length>2?f.call(arguments,2):null;return this.monitored&&this.host&&this.host._monitor("attach",this,{args:arguments}),this._on(e,t,n,!0)},after:function(e,t){var n=arguments.length>2?f.call(arguments,2):null;return this._on(e,t,n,o)},detach:function(e,t){if(e&&e.detach)return e.detach();var n,r,i=0,s=this._subscribers,o=this._afters;if(s)for(n=s.length;n>=0;n--)r=s[n],r&&(!e||e===r.fn)&&(this._delete(r,s,n),i++);if(o)for(n=o.length;n>=0;n--)r=o[n],r&&(!e||e===r.fn)&&(this._delete(r,o,n),i++);return i},unsubscribe:function(){return this.detach.apply(this,arguments)},_notify:function(e,t,n){var r;return r=e.notify(t,this),!1===r||this.stopped>1?!1:!0},log:function(e,t){},fire:function(){var e=[];return e.push.apply(e,arguments),this._fire(e)},_fire:function(e){return this.fireOnce&&this.fired?!0:(this.fired=!0,this.fireOnce&&(this.firedWith=e),this.emitFacade?this.fireComplex(e):this.fireSimple(e))},fireSimple:function(e){this.stopped=0,this.prevented=0;if(this.hasSubs()){var t=this.getSubs();this._procSubs(t[0],e),this._procSubs(t[1],e)}return this.broadcast&&this._broadcast(e),this.stopped?!1:!0},fireComplex:function(e){return e[0]=e[0]||{},this.fireSimple(e)},_procSubs:function(e,t,n){var r,i,s;for(i=0,s=e.length;i<s;i++){r=e[i];if(r&&r.fn){!1===this._notify(r,t,n)&&(this.stopped=2);if(this.stopped===2)return!1}}return!0},_broadcast:function(t){if(!this.stopped&&this.broadcast){var n=t.concat();n.unshift(this.type),this.host!==e&&e.fire.apply(e,n),this.broadcast===2&&e.Global.fire.apply(e.Global,n)}},unsubscribeAll:function(){return this.detachAll.apply(this,arguments)},detachAll:function(){return this.detach()},_delete:function(e,t,n){var r=e._when;t||(t=r===o?this._afters:this._subscribers),t&&(n=s.indexOf(t,e,0),e&&t[n]===e&&t.splice(n,1)),this._kds&&(r===o?delete this.afters[e.id]:delete this.subscribers[e.id]),this.monitored&&this.host&&this.host._monitor("detach",this,{ce:this,sub:e}),e&&(e.deleted=!0)}},e.Subscriber=function(t,n,r,i){this.fn=t,this.context=n,this.id=e.guid(),this.args=r,this._when=i},e.Subscriber.prototype={constructor:e.Subscriber,_notify:function(e,t,n){if(this.deleted&&!this.postponed){if(!this.postponed)return delete this.postponed,null;delete this.fn,delete this.context}var r=this.args,i;switch(n.signature){case 0:i=this.fn.call(e,n.type,t,e);break;case 1:i=this.fn.call(e,t[0]||null,e);break;
default:r||t?(t=t||[],r=r?t.concat(r):t,i=this.fn.apply(e,r)):i=this.fn.call(e)}return this.once&&n._delete(this),i},notify:function(t,n){var r=this.context,i=!0;r||(r=n.contextFn?n.contextFn():n.context);if(e.config&&e.config.throwFail)i=this._notify(r,t,n);else try{i=this._notify(r,t,n)}catch(s){e.error(this+" failed: "+s.message,s)}return i},contains:function(e,t){return t?this.fn===e&&this.context===t:this.fn===e},valueOf:function(){return this.id}},e.EventHandle=function(e,t){this.evt=e,this.sub=t},e.EventHandle.prototype={batch:function(t,n){t.call(n||this,this),e.Lang.isArray(this.evt)&&e.Array.each(this.evt,function(e){e.batch.call(n||e,t)})},detach:function(){var t=this.evt,n=0,r;if(t)if(e.Lang.isArray(t))for(r=0;r<t.length;r++)n+=t[r].detach();else t._delete(this.sub),n=1;return n},monitor:function(e){return this.evt.monitor.apply(this.evt,arguments)}};var p=e.Lang,d=":",v="|",m="~AFTER~",g=/(.*?)(:)(.*?)/,y=e.cached(function(e){return e.replace(g,"*$2$3")}),b=function(e,t){return!t||!e||e.indexOf(d)>-1?e:t+d+e},w=e.cached(function(e,t){var n=e,r,i,s;return p.isString(n)?(s=n.indexOf(m),s>-1&&(i=!0,n=n.substr(m.length)),s=n.indexOf(v),s>-1&&(r=n.substr(0,s),n=n.substr(s+1),n==="*"&&(n=null)),[r,t?b(n,t):n,i,n]):n}),E=function(t){var n=this._yuievt,r;n||(n=this._yuievt={events:{},targets:null,config:{host:this,context:this},chain:e.config.chain}),r=n.config,t&&(h(r,t,!0),t.chain!==undefined&&(n.chain=t.chain),t.prefix&&(r.prefix=t.prefix))};E.prototype={constructor:E,once:function(){var e=this.on.apply(this,arguments);return e.batch(function(e){e.sub&&(e.sub.once=!0)}),e},onceAfter:function(){var e=this.after.apply(this,arguments);return e.batch(function(e){e.sub&&(e.sub.once=!0)}),e},parseType:function(e,t){return w(e,t||this._yuievt.config.prefix)},on:function(t,n,r){var i=this._yuievt,s=w(t,i.config.prefix),o,u,a,l,c,h,d,v=e.Env.evt.handles,g,y,b,E=e.Node,S,x,T;this._monitor("attach",s[1],{args:arguments,category:s[0],after:s[2]});if(p.isObject(t))return p.isFunction(t)?e.Do.before.apply(e.Do,arguments):(o=n,u=r,a=f.call(arguments,0),l=[],p.isArray(t)&&(T=!0),g=t._after,delete t._after,e.each(t,function(e,t){p.isObject(e)&&(o=e.fn||(p.isFunction(e)?e:o),u=e.context||u);var n=g?m:"";a[0]=n+(T?e:t),a[1]=o,a[2]=u,l.push(this.on.apply(this,a))},this),i.chain?this:new e.EventHandle(l));h=s[0],g=s[2],b=s[3];if(E&&e.instanceOf(this,E)&&b in E.DOM_EVENTS)return a=f.call(arguments,0),a.splice(2,0,E.getDOMNode(this)),e.on.apply(e,a);t=s[1];if(e.instanceOf(this,YUI)){y=e.Env.evt.plugins[t],a=f.call(arguments,0),a[0]=b,E&&(S=a[2],e.instanceOf(S,e.NodeList)?S=e.NodeList.getDOMNodes(S):e.instanceOf(S,E)&&(S=E.getDOMNode(S)),x=b in E.DOM_EVENTS,x&&(a[2]=S));if(y)d=y.on.apply(e,a);else if(!t||x)d=e.Event._attach(a)}return d||(c=i.events[t]||this.publish(t),d=c._on(n,r,arguments.length>3?f.call(arguments,3):null,g?"after":!0),t.indexOf("*:")!==-1&&(this._hasSiblings=!0)),h&&(v[h]=v[h]||{},v[h][t]=v[h][t]||[],v[h][t].push(d)),i.chain?this:d},subscribe:function(){return this.on.apply(this,arguments)},detach:function(t,n,r){var i=this._yuievt.events,s,o=e.Node,u=o&&e.instanceOf(this,o);if(!t&&this!==e){for(s in i)i.hasOwnProperty(s)&&i[s].detach(n,r);return u&&e.Event.purgeElement(o.getDOMNode(this)),this}var a=w(t,this._yuievt.config.prefix),l=p.isArray(a)?a[0]:null,c=a?a[3]:null,h,d=e.Env.evt.handles,v,m,g,y,b=function(e,t,n){var r=e[t],i,s;if(r)for(s=r.length-1;s>=0;--s)i=r[s].evt,(i.host===n||i.el===n)&&r[s].detach()};if(l){m=d[l],t=a[1],v=u?e.Node.getDOMNode(this):this;if(m){if(t)b(m,t,v);else for(s in m)m.hasOwnProperty(s)&&b(m,s,v);return this}}else{if(p.isObject(t)&&t.detach)return t.detach(),this;if(u&&(!c||c in o.DOM_EVENTS))return g=f.call(arguments,0),g[2]=o.getDOMNode(this),e.detach.apply(e,g),this}h=e.Env.evt.plugins[c];if(e.instanceOf(this,YUI)){g=f.call(arguments,0);if(h&&h.detach)return h.detach.apply(e,g),this;if(!t||!h&&o&&t in o.DOM_EVENTS)return g[0]=t,e.Event.detach.apply(e.Event,g),this}return y=i[a[1]],y&&y.detach(n,r),this},unsubscribe:function(){return this.detach.apply(this,arguments)},detachAll:function(e){return this.detach(e)},unsubscribeAll:function(){return this.detachAll.apply(this,arguments)},publish:function(t,n){var r,i=this._yuievt,s=i.config,o=s.prefix;return typeof t=="string"?(o&&(t=b(t,o)),r=this._publish(t,s,n)):(r={},e.each(t,function(e,t){o&&(t=b(t,o)),r[t]=this._publish(t,s,e||n)},this)),r},_getFullType:function(e){var t=this._yuievt.config.prefix;return t?t+d+e:e},_publish:function(t,n,r){var i,s=this._yuievt,o=s.config,u=o.host,a=o.context,f=s.events;return i=f[t],(o.monitored&&!i||i&&i.monitored)&&this._monitor("publish",t,{args:arguments}),i||(i=f[t]=new e.CustomEvent(t,n),n||(i.host=u,i.context=a)),r&&h(i,r,!0),i},_monitor:function(e,t,n){var r,i,s;if(t){typeof t=="string"?(s=t,i=this.getEvent(t,!0)):(i=t,s=t.type);if(this._yuievt.config.monitored&&(!i||i.monitored)||i&&i.monitored)r=s+"_"+e,n.monitored=e,this.fire.call(this,r,n)}},fire:function(e){var t=typeof e=="string",n=arguments.length,r=e,i=this._yuievt,s=i.config,o=s.prefix,u,a,l,c;t&&n<=3?n===2?c=[arguments[1]]:n===3?c=[arguments[1],arguments[2]]:c=[]:c=f.call(arguments,t?1:0),t||(r=e&&e.type),o&&(r=b(r,o)),a=i.events[r],this._hasSiblings&&(l=this.getSibling(r,a),l&&!a&&(a=this.publish(r))),(s.monitored&&(!a||a.monitored)||a&&a.monitored)&&this._monitor("fire",a||r,{args:c});if(!a){if(i.hasTargets)return this.bubble({type:r},c,this);u=!0}else l&&(a.sibling=l),u=a._fire(c);return i.chain?this:u},getSibling:function(e,t){var n;return e.indexOf(d)>-1&&(e=y(e),n=this.getEvent(e,!0),n&&(n.applyConfig(t),n.bubbles=!1,n.broadcast=0)),n},getEvent:function(e,t){var n,r;return t||(n=this._yuievt.config.prefix,e=n?b(e,n):e),r=this._yuievt.events,r[e]||null},after:function(t,n){var r=f.call(arguments,0);switch(p.type(t)){case"function":return e.Do.after.apply(e.Do,arguments);case"array":case"object":r[0]._after=!0;break;default:r[0]=m+t}return this.on.apply(this,r)},before:function(){return this.on.apply
(this,arguments)}},e.EventTarget=E,e.mix(e,E.prototype),E.call(e,{bubbles:!1}),YUI.Env.globalEvents=YUI.Env.globalEvents||new E,e.Global=YUI.Env.globalEvents},"@VERSION@",{requires:["oop"]});
YUI.add("event-custom-complex",function(e,t){var n,r,i=e.Object,s,o={},u=e.CustomEvent.prototype,a=e.EventTarget.prototype,f=function(e,t){var n;for(n in t)r.hasOwnProperty(n)||(e[n]=t[n])};e.EventFacade=function(e,t){e||(e=o),this._event=e,this.details=e.details,this.type=e.type,this._type=e.type,this.target=e.target,this.currentTarget=t,this.relatedTarget=e.relatedTarget},e.mix(e.EventFacade.prototype,{stopPropagation:function(){this._event.stopPropagation(),this.stopped=1},stopImmediatePropagation:function(){this._event.stopImmediatePropagation(),this.stopped=2},preventDefault:function(){this._event.preventDefault(),this.prevented=1},halt:function(e){this._event.halt(e),this.prevented=1,this.stopped=e?2:1}}),u.fireComplex=function(t){var n,r,i,s,o,u=!0,a,f,l,c,h,p,d,v,m,g=this,y=g.host||g,b,w,E=g.stack,S=y._yuievt,x;if(E&&g.queuable&&g.type!==E.next.type)return E.queue||(E.queue=[]),E.queue.push([g,t]),!0;x=g.hasSubs()||S.hasTargets||g.broadcast,g.target=g.target||y,g.currentTarget=y,g.details=t.concat();if(x){n=E||{id:g.id,next:g,silent:g.silent,stopped:0,prevented:0,bubbling:null,type:g.type,defaultTargetOnly:g.defaultTargetOnly},f=g.getSubs(),l=f[0],c=f[1],g.stopped=g.type!==n.type?0:n.stopped,g.prevented=g.type!==n.type?0:n.prevented,g.stoppedFn&&(a=new e.EventTarget({fireOnce:!0,context:y}),g.events=a,a.on("stopped",g.stoppedFn)),g._facade=null,r=g._createFacade(t),l&&g._procSubs(l,t,r),g.bubbles&&y.bubble&&!g.stopped&&(w=n.bubbling,n.bubbling=g.type,n.type!==g.type&&(n.stopped=0,n.prevented=0),u=y.bubble(g,t,null,n),g.stopped=Math.max(g.stopped,n.stopped),g.prevented=Math.max(g.prevented,n.prevented),n.bubbling=w),d=g.prevented,d?(v=g.preventedFn,v&&v.apply(y,t)):(m=g.defaultFn,m&&(!g.defaultTargetOnly&&!n.defaultTargetOnly||y===r.target)&&m.apply(y,t)),g.broadcast&&g._broadcast(t);if(c&&!g.prevented&&g.stopped<2){h=n.afterQueue;if(n.id===g.id||g.type!==S.bubbling){g._procSubs(c,t,r);if(h)while(b=h.last())b()}else p=c,n.execDefaultCnt&&(p=e.merge(p),e.each(p,function(e){e.postponed=!0})),h||(n.afterQueue=new e.Queue),n.afterQueue.add(function(){g._procSubs(p,t,r)})}g.target=null;if(n.id===g.id){s=n.queue;if(s)while(s.length)i=s.pop(),o=i[0],n.next=o,o._fire(i[1]);g.stack=null}u=!g.stopped,g.type!==S.bubbling&&(n.stopped=0,n.prevented=0,g.stopped=0,g.prevented=0)}else m=g.defaultFn,m&&(r=g._createFacade(t),(!g.defaultTargetOnly||y===r.target)&&m.apply(y,t));return g._facade=null,u},u._hasPotentialSubscribers=function(){return this.hasSubs()||this.host._yuievt.hasTargets||this.broadcast},u._createFacade=u._getFacade=function(t){var n=this.details,r=n&&n[0],i=r&&typeof r=="object",s=this._facade;return s||(s=new e.EventFacade(this,this.currentTarget)),i?(f(s,r),r.type&&(s.type=r.type),t&&(t[0]=s)):t&&t.unshift(s),s.details=this.details,s.target=this.originalTarget||this.target,s.currentTarget=this.currentTarget,s.stopped=0,s.prevented=0,this._facade=s,this._facade},u._addFacadeToArgs=function(e){var t=e[0];t&&t.halt&&t.stopImmediatePropagation&&t.stopPropagation&&t._event||this._createFacade(e)},u.stopPropagation=function(){this.stopped=1,this.stack&&(this.stack.stopped=1),this.events&&this.events.fire("stopped",this)},u.stopImmediatePropagation=function(){this.stopped=2,this.stack&&(this.stack.stopped=2),this.events&&this.events.fire("stopped",this)},u.preventDefault=function(){this.preventable&&(this.prevented=1,this.stack&&(this.stack.prevented=1))},u.halt=function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()},a.addTarget=function(t){var n=this._yuievt;return n.targets||(n.targets={}),n.targets[e.stamp(t)]=t,n.hasTargets=!0,this},a.getTargets=function(){var e=this._yuievt.targets;return e?i.values(e):[]},a.removeTarget=function(t){var n=this._yuievt.targets;return n&&(delete n[e.stamp(t,!0)],i.size(n)===0&&(this._yuievt.hasTargets=!1)),this},a.bubble=function(e,t,n,r){var i=this._yuievt.targets,s=!0,o,u,a,f,l,c=e&&e.type,h=n||e&&e.target||this,p;if(!e||!e.stopped&&i)for(a in i)if(i.hasOwnProperty(a)){o=i[a],u=o._yuievt.events[c],o._hasSiblings&&(l=o.getSibling(c,u)),l&&!u&&(u=o.publish(c)),p=o._yuievt.bubbling,o._yuievt.bubbling=c;if(!u)o._yuievt.hasTargets&&o.bubble(e,t,h,r);else{l&&(u.sibling=l),u.target=h,u.originalTarget=h,u.currentTarget=o,f=u.broadcast,u.broadcast=!1,u.emitFacade=!0,u.stack=r,s=s&&u.fire.apply(u,t||e.details||[]),u.broadcast=f,u.originalTarget=null;if(u.stopped)break}o._yuievt.bubbling=p}return s},a._hasPotentialSubscribers=function(e){var t=this._yuievt,n=t.events[e];return n?n.hasSubs()||t.hasTargets||n.broadcast:!1},n=new e.EventFacade,r={};for(s in n)r[s]=!0},"@VERSION@",{requires:["event-custom-base"]});
YUI.add("event-delegate",function(e,t){function f(t,r,u,l){var c=n(arguments,0,!0),h=i(u)?u:null,p,d,v,m,g,y,b,w,E;if(s(t)){w=[];if(o(t))for(y=0,b=t.length;y<b;++y)c[0]=t[y],w.push(e.delegate.apply(e,c));else{c.unshift(null);for(y in t)t.hasOwnProperty(y)&&(c[0]=y,c[1]=t[y],w.push(e.delegate.apply(e,c)))}return new e.EventHandle(w)}p=t.split(/\|/),p.length>1&&(g=p.shift(),c[0]=t=p.shift()),d=e.Node.DOM_EVENTS[t],s(d)&&d.delegate&&(E=d.delegate.apply(d,arguments));if(!E){if(!t||!r||!u||!l)return;v=h?e.Selector.query(h,null,!0):u,!v&&i(u)&&(E=e.on("available",function(){e.mix(E,e.delegate.apply(e,c),!0)},u)),!E&&v&&(c.splice(2,2,v),E=e.Event._attach(c,{facade:!1}),E.sub.filter=l,E.sub._notify=f.notifySub)}return E&&g&&(m=a[g]||(a[g]={}),m=m[t]||(m[t]=[]),m.push(E)),E}var n=e.Array,r=e.Lang,i=r.isString,s=r.isObject,o=r.isArray,u=e.Selector.test,a=e.Env.evt.handles;f.notifySub=function(t,r,i){r=r.slice(),this.args&&r.push.apply(r,this.args);var s=f._applyFilter(this.filter,r,i),o,u,a,l;if(s){s=n(s),o=r[0]=new e.DOMEventFacade(r[0],i.el,i),o.container=e.one(i.el);for(u=0,a=s.length;u<a&&!o.stopped;++u){o.currentTarget=e.one(s[u]),l=this.fn.apply(this.context||o.currentTarget,r);if(l===!1)break}return l}},f.compileFilter=e.cached(function(e){return function(t,n){return u(t._node,e,n.currentTarget===n.target?null:n.currentTarget._node)}}),f._disabledRE=/^(?:button|input|select|textarea)$/i,f._applyFilter=function(t,n,r){var s=n[0],o=r.el,a=s.target||s.srcElement,l=[],c=!1;a.nodeType===3&&(a=a.parentNode);if(a.disabled&&f._disabledRE.test(a.nodeName))return l;n.unshift(a);if(i(t))while(a){c=a===o,u(a,t,c?null:o)&&l.push(a);if(c)break;a=a.parentNode}else{n[0]=e.one(a),n[1]=new e.DOMEventFacade(s,o,r);while(a){t.apply(n[0],n)&&l.push(a);if(a===o)break;a=a.parentNode,n[0]=e.one(a)}n[1]=s}return l.length<=1&&(l=l[0]),n.shift(),l},e.delegate=e.Event.delegate=f},"@VERSION@",{requires:["node-base"]});
YUI.add("event-flick",function(e,t){var n=e.Event._GESTURE_MAP,r={start:n.start,end:n.end,move:n.move},i="start",s="end",o="move",u="ownerDocument",a="minVelocity",f="minDistance",l="preventDefault",c="_fs",h="_fsh",p="_feh",d="_fmh",v="nodeType";e.Event.define("flick",{on:function(e,t,n){var s=e.on(r[i],this._onStart,this,e,t,n);t[h]=s},detach:function(e,t,n){var r=t[h],i=t[p];r&&(r.detach(),t[h]=null),i&&(i.detach(),t[p]=null)},processArgs:function(t){var n=t.length>3?e.merge(t.splice(3,1)[0]):{};return a in n||(n[a]=this.MIN_VELOCITY),f in n||(n[f]=this.MIN_DISTANCE),l in n||(n[l]=this.PREVENT_DEFAULT),n},_onStart:function(t,n,i,a){var f=!0,l,h,m,g=i._extra.preventDefault,y=t;t.touches&&(f=t.touches.length===1,t=t.touches[0]),f&&(g&&(!g.call||g(t))&&y.preventDefault(),t.flick={time:(new Date).getTime()},i[c]=t,l=i[p],m=n.get(v)===9?n:n.get(u),l||(l=m.on(r[s],e.bind(this._onEnd,this),null,n,i,a),i[p]=l),i[d]=m.once(r[o],e.bind(this._onMove,this),null,n,i,a))},_onMove:function(e,t,n,r){var i=n[c];i&&i.flick&&(i.flick.time=(new Date).getTime())},_onEnd:function(e,t,n,r){var i=(new Date).getTime(),s=n[c],o=!!s,u=e,h,p,v,m,g,y,b,w,E=n[d];E&&(E.detach(),delete n[d]),o&&(e.changedTouches&&(e.changedTouches.length===1&&e.touches.length===0?u=e.changedTouches[0]:o=!1),o&&(m=n._extra,v=m[l],v&&(!v.call||v(e))&&e.preventDefault(),h=s.flick.time,i=(new Date).getTime(),p=i-h,g=[u.pageX-s.pageX,u.pageY-s.pageY],m.axis?w=m.axis:w=Math.abs(g[0])>=Math.abs(g[1])?"x":"y",y=g[w==="x"?0:1],b=p!==0?y/p:0,isFinite(b)&&Math.abs(y)>=m[f]&&Math.abs(b)>=m[a]&&(e.type="flick",e.flick={time:p,distance:y,velocity:b,axis:w,start:s},r.fire(e)),n[c]=null))},MIN_VELOCITY:0,MIN_DISTANCE:0,PREVENT_DEFAULT:!1})},"@VERSION@",{requires:["node-base","event-touch","event-synthetic"]});
YUI.add("event-focus",function(e,t){function u(t,r,u){var a="_"+t+"Notifiers";e.Event.define(t,{_useActivate:o,_attach:function(i,s,o){return e.DOM.isWindow(i)?n._attach([t,function(e){s.fire(e)},i]):n._attach([r,this._proxy,i,this,s,o],{capture:!0})},_proxy:function(t,r,i){var s=t.target,f=t.currentTarget,l=s.getData(a),c=e.stamp(f._node),h=o||s!==f,p;r.currentTarget=i?s:f,r.container=i?f:null,l?h=!0:(l={},s.setData(a,l),h&&(p=n._attach([u,this._notify,s._node]).sub,p.once=!0)),l[c]||(l[c]=[]),l[c].push(r),h||this._notify(t)},_notify:function(t,n){var r=t.currentTarget,i=r.getData(a),o=r.ancestors(),u=r.get("ownerDocument"),f=[],l=i?e.Object.keys(i).length:0,c,h,p,d,v,m,g,y,b,w;r.clearData(a),o.push(r),u&&o.unshift(u),o._nodes.reverse(),l&&(m=l,o.some(function(t){var n=e.stamp(t),r=i[n],s,o;if(r){l--;for(s=0,o=r.length;s<o;++s)r[s].handle.sub.filter&&f.push(r[s])}return!l}),l=m);while(l&&(c=o.shift())){d=e.stamp(c),h=i[d];if(h){for(g=0,y=h.length;g<y;++g){p=h[g],b=p.handle.sub,v=!0,t.currentTarget=c,b.filter&&(v=b.filter.apply(c,[c,t].concat(b.args||[])),f.splice(s(f,p),1)),v&&(t.container=p.container,w=p.fire(t));if(w===!1||t.stopped===2)break}delete h[d],l--}if(t.stopped!==2)for(g=0,y=f.length;g<y;++g){p=f[g],b=p.handle.sub,b.filter.apply(c,[c,t].concat(b.args||[]))&&(t.container=p.container,t.currentTarget=c,w=p.fire(t));if(w===!1||t.stopped===2||t.stopped&&f[g+1]&&f[g+1].container!==p.container)break}if(t.stopped)break}},on:function(e,t,n){t.handle=this._attach(e._node,n)},detach:function(e,t){t.handle.detach()},delegate:function(t,n,r,s){i(s)&&(n.filter=function(n){return e.Selector.test(n._node,s,t===n?null:t._node)}),n.handle=this._attach(t._node,r,!0)},detachDelegate:function(e,t){t.handle.detach()}},!0)}var n=e.Event,r=e.Lang,i=r.isString,s=e.Array.indexOf,o=function(){var t=!1,n=e.config.doc,r;return n&&(r=n.createElement("p"),r.setAttribute("onbeforeactivate",";"),t=r.onbeforeactivate!==undefined),t}();o?(u("focus","beforeactivate","focusin"),u("blur","beforedeactivate","focusout")):(u("focus","focus","focus"),u("blur","blur","blur"))},"@VERSION@",{requires:["event-synthetic"]});
YUI.add("event-hover",function(e,t){var n=e.Lang.isFunction,r=function(){},i={processArgs:function(e){var t=n(e[2])?2:3;return n(e[t])?e.splice(t,1)[0]:r},on:function(e,t,n,r){var i=t.args?t.args.slice():[];i.unshift(null),t._detach=e[r?"delegate":"on"]({mouseenter:function(e){e.phase="over",n.fire(e)},mouseleave:function(e){var n=t.context||this;i[0]=e,e.type="hover",e.phase="out",t._extra.apply(n,i)}},r)},detach:function(e,t,n){t._detach.detach()}};i.delegate=i.on,i.detachDelegate=i.detach,e.Event.define("hover",i)},"@VERSION@",{requires:["event-mouseenter"]});
YUI.add("event-key",function(e,t){var n="+alt",r="+ctrl",i="+meta",s="+shift",o=e.Lang.trim,u={KEY_MAP:{enter:13,esc:27,backspace:8,tab:9,pageup:33,pagedown:34},_typeRE:/^(up|down|press):/,_keysRE:/^(?:up|down|press):|\+(alt|ctrl|meta|shift)/g,processArgs:function(t){var n=t.splice(3,1)[0],r=e.Array.hash(n.match(/\+(?:alt|ctrl|meta|shift)\b/g)||[]),i={type:this._typeRE.test(n)?RegExp.$1:null,mods:r,keys:null},s=n.replace(this._keysRE,""),u,a,f,l;if(s){s=s.split(","),i.keys={};for(l=s.length-1;l>=0;--l){u=o(s[l]);if(!u)continue;+u==u?i.keys[u]=r:(f=u.toLowerCase(),this.KEY_MAP[f]?(i.keys[this.KEY_MAP[f]]=r,i.type||(i.type="down")):(u=u.charAt(0),a=u.toUpperCase(),r["+shift"]&&(u=a),i.keys[u.charCodeAt(0)]=u===a?e.merge(r,{"+shift":!0}):r))}}return i.type||(i.type="press"),i},on:function(e,t,o,u){var a=t._extra,f="key"+a.type,l=a.keys,c=u?"delegate":"on";t._detach=e[c](f,function(e){var t=l?l[e.which]:a.mods;t&&(!t[n]||t[n]&&e.altKey)&&(!t[r]||t[r]&&e.ctrlKey)&&(!t[i]||t[i]&&e.metaKey)&&(!t[s]||t[s]&&e.shiftKey)&&o.fire(e)},u)},detach:function(e,t,n){t._detach.detach()}};u.delegate=u.on,u.detachDelegate=u.detach,e.Event.define("key",u,!0)},"@VERSION@",{requires:["event-synthetic"]});
YUI.add("event-mouseenter",function(e,t){var n=e.Env.evt.dom_wrappers,r=e.DOM.contains,i=e.Array,s=function(){},o={proxyType:"mouseover",relProperty:"fromElement",_notify:function(t,i,s){var o=this._node,u=t.relatedTarget||t[i];o!==u&&!r(o,u)&&s.fire(new e.DOMEventFacade(t,o,n["event:"+e.stamp(o)+t.type]))},on:function(t,n,r){var i=e.Node.getDOMNode(t),s=[this.proxyType,this._notify,i,null,this.relProperty,r];n.handle=e.Event._attach(s,{facade:!1})},detach:function(e,t){t.handle.detach()},delegate:function(t,n,r,i){var o=e.Node.getDOMNode(t),u=[this.proxyType,s,o,null,r];n.handle=e.Event._attach(u,{facade:!1}),n.handle.sub.filter=i,n.handle.sub.relProperty=this.relProperty,n.handle.sub._notify=this._filterNotify},_filterNotify:function(t,n,s){n=n.slice(),this.args&&n.push.apply(n,this.args);var o=e.delegate._applyFilter(this.filter,n,s),u=n[0].relatedTarget||n[0][this.relProperty],a,f,l,c,h;if(o){o=i(o);for(f=0,l=o.length&&(!a||!a.stopped);f<l;++f){h=o[0];if(!r(h,u)){a||(a=new e.DOMEventFacade(n[0],h,s),a.container=e.one(s.el)),a.currentTarget=e.one(h),c=n[1].fire(a);if(c===!1)break}}}return c},detachDelegate:function(e,t){t.handle.detach()}};e.Event.define("mouseenter",o,!0),e.Event.define("mouseleave",e.merge(o,{proxyType:"mouseout",relProperty:"toElement"}),!0)},"@VERSION@",{requires:["event-synthetic"]});
YUI.add("event-mousewheel",function(e,t){var n="DOMMouseScroll",r=function(t){var r=e.Array(t,0,!0),i;return e.UA.gecko?(r[0]=n,i=e.config.win):i=e.config.doc,r.length<3?r[2]=i:r.splice(2,0,i),r};e.Env.evt.plugins.mousewheel={on:function(){return e.Event._attach(r(arguments))},detach:function(){return e.Event.detach.apply(e.Event,r(arguments))}}},"@VERSION@",{requires:["node-base"]});
YUI.add("event-move",function(e,t){var n=e.Event._GESTURE_MAP,r={start:n.start,end:n.end,move:n.move},i="start",s="move",o="end",u="gesture"+s,a=u+o,f=u+i,l="_msh",c="_mh",h="_meh",p="_dmsh",d="_dmh",v="_dmeh",m="_ms",g="_m",y="minTime",b="minDistance",w="preventDefault",E="button",S="ownerDocument",x="currentTarget",T="target",N="nodeType",C=e.config.win&&"msPointerEnabled"in e.config.win.navigator,k="msTouchActionCount",L="msInitTouchAction",A=function(t,n,r){var i=r?4:3,s=n.length>i?e.merge(n.splice(i,1)[0]):{};return w in s||(s[w]=t.PREVENT_DEFAULT),s},O=function(e,t){return t._extra.root||e.get(N)===9?e:e.get(S)},M=function(t){var n=t.getDOMNode();return t.compareTo(e.config.doc)&&n.documentElement?n.documentElement:!1},_=function(e,t,n){e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e[T]=e[T]||t[T],e[x]=e[x]||t[x],e[E]=n&&n[E]||1},D=function(t){var n=M(t)||t.getDOMNode(),r=t.getData(k);C&&(r||(r=0,t.setData(L,n.style.msTouchAction)),n.style.msTouchAction=e.Event._DEFAULT_TOUCH_ACTION,r++,t.setData(k,r))},P=function(e){var t=M(e)||e.getDOMNode(),n=e.getData(k),r=e.getData(L);C&&(n--,e.setData(k,n),n===0&&t.style.msTouchAction!==r&&(t.style.msTouchAction=r))},H=function(e,t){t&&(!t.call||t(e))&&e.preventDefault()},B=e.Event.define;e.Event._DEFAULT_TOUCH_ACTION="none",B(f,{on:function(e,t,n){D(e),t[l]=e.on(r[i],this._onStart,this,e,t,n)},delegate:function(e,t,n,s){var o=this;t[p]=e.delegate(r[i],function(r){o._onStart(r,e,t,n,!0)},s)},detachDelegate:function(e,t,n,r){var i=t[p];i&&(i.detach(),t[p]=null),P(e)},detach:function(e,t,n){var r=t[l];r&&(r.detach(),t[l]=null),P(e)},processArgs:function(e,t){var n=A(this,e,t);return y in n||(n[y]=this.MIN_TIME),b in n||(n[b]=this.MIN_DISTANCE),n},_onStart:function(t,n,i,u,a){a&&(n=t[x]);var f=i._extra,l=!0,c=f[y],h=f[b],p=f.button,d=f[w],v=O(n,i),m;t.touches?t.touches.length===1?_(t,t.touches[0],f):l=!1:l=p===undefined||p===t.button,l&&(H(t,d),c===0||h===0?this._start(t,n,u,f):(m=[t.pageX,t.pageY],c>0&&(f._ht=e.later(c,this,this._start,[t,n,u,f]),f._hme=v.on(r[o],e.bind(function(){this._cancel(f)},this))),h>0&&(f._hm=v.on(r[s],e.bind(function(e){(Math.abs(e.pageX-m[0])>h||Math.abs(e.pageY-m[1])>h)&&this._start(t,n,u,f)},this)))))},_cancel:function(e){e._ht&&(e._ht.cancel(),e._ht=null),e._hme&&(e._hme.detach(),e._hme=null),e._hm&&(e._hm.detach(),e._hm=null)},_start:function(e,t,n,r){r&&this._cancel(r),e.type=f,t.setData(m,e),n.fire(e)},MIN_TIME:0,MIN_DISTANCE:0,PREVENT_DEFAULT:!1}),B(u,{on:function(e,t,n){D(e);var i=O(e,t,r[s]),o=i.on(r[s],this._onMove,this,e,t,n);t[c]=o},delegate:function(e,t,n,i){var o=this;t[d]=e.delegate(r[s],function(r){o._onMove(r,e,t,n,!0)},i)},detach:function(e,t,n){var r=t[c];r&&(r.detach(),t[c]=null),P(e)},detachDelegate:function(e,t,n,r){var i=t[d];i&&(i.detach(),t[d]=null),P(e)},processArgs:function(e,t){return A(this,e,t)},_onMove:function(e,t,n,r,i){i&&(t=e[x]);var s=n._extra.standAlone||t.getData(m),o=n._extra.preventDefault;s&&(e.touches&&(e.touches.length===1?_(e,e.touches[0]):s=!1),s&&(H(e,o),e.type=u,r.fire(e)))},PREVENT_DEFAULT:!1}),B(a,{on:function(e,t,n){D(e);var i=O(e,t),s=i.on(r[o],this._onEnd,this,e,t,n);t[h]=s},delegate:function(e,t,n,i){var s=this;t[v]=e.delegate(r[o],function(r){s._onEnd(r,e,t,n,!0)},i)},detachDelegate:function(e,t,n,r){var i=t[v];i&&(i.detach(),t[v]=null),P(e)},detach:function(e,t,n){var r=t[h];r&&(r.detach(),t[h]=null),P(e)},processArgs:function(e,t){return A(this,e,t)},_onEnd:function(e,t,n,r,i){i&&(t=e[x]);var s=n._extra.standAlone||t.getData(g)||t.getData(m),o=n._extra.preventDefault;s&&(e.changedTouches&&(e.changedTouches.length===1?_(e,e.changedTouches[0]):s=!1),s&&(H(e,o),e.type=a,r.fire(e),t.clearData(m),t.clearData(g)))},PREVENT_DEFAULT:!1})},"@VERSION@",{requires:["node-base","event-touch","event-synthetic"]});
YUI.add("event-outside",function(e,t){var n=["blur","change","click","dblclick","focus","keydown","keypress","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","select","submit"];e.Event.defineOutside=function(t,n){n=n||t+"outside";var r={on:function(n,r,i){r.handle=e.one("doc").on(t,function(e){this.isOutside(n,e.target)&&(e.currentTarget=n,i.fire(e))},this)},detach:function(e,t,n){t.handle.detach()},delegate:function(n,r,i,s){r.handle=e.one("doc").delegate(t,function(e){this.isOutside(n,e.target)&&i.fire(e)},s,this)},isOutside:function(e,t){return t!==e&&!t.ancestor(function(t){return t===e})}};r.detachDelegate=r.detach,e.Event.define(n,r)},e.Array.each(n,function(t){e.Event.defineOutside(t)})},"@VERSION@",{requires:["event-synthetic"]});
YUI.add("event-resize",function(e,t){e.Event.define("windowresize",{on:e.UA.gecko&&e.UA.gecko<1.91?function(t,n,r){n._handle=e.Event.attach("resize",function(e){r.fire(e)})}:function(t,n,r){var i=e.config.windowResizeDelay||100;n._handle=e.Event.attach("resize",function(t){n._timer&&n._timer.cancel(),n._timer=e.later(i,e,function(){r.fire(t)})})},detach:function(e,t){t._timer&&t._timer.cancel(),t._handle.detach()}})},"@VERSION@",{requires:["node-base","event-synthetic"]});
YUI.add("event-simulate",function(e,t){(function(){function v(t,n,a,f,l,c,h,p,d,v,m){t||e.error("simulateKeyEvent(): Invalid target.");if(i(n)){n=n.toLowerCase();switch(n){case"textevent":n="keypress";break;case"keyup":case"keydown":case"keypress":break;default:e.error("simulateKeyEvent(): Event type '"+n+"' not supported.")}}else e.error("simulateKeyEvent(): Event type must be a string.");s(a)||(a=!0),s(f)||(f=!0),o(l)||(l=e.config.win),s(c)||(c=!1),s(h)||(h=!1),s(p)||(p=!1),s(d)||(d=!1),u(v)||(v=0),u(m)||(m=0);var g=null;if(r(e.config.doc.createEvent)){try{g=e.config.doc.createEvent("KeyEvents"),g.initKeyEvent(n,a,f,l,c,h,p,d,v,m)}catch(y){try{g=e.config.doc.createEvent("Events")}catch(b){g=e.config.doc.createEvent("UIEvents")}finally{g.initEvent(n,a,f),g.view=l,g.altKey=h,g.ctrlKey=c,g.shiftKey=p,g.metaKey=d,g.keyCode=v,g.charCode=m}}t.dispatchEvent(g)}else o(e.config.doc.createEventObject)?(g=e.config.doc.createEventObject(),g.bubbles=a,g.cancelable=f,g.view=l,g.ctrlKey=c,g.altKey=h,g.shiftKey=p,g.metaKey=d,g.keyCode=m>0?m:v,t.fireEvent("on"+n,g)):e.error("simulateKeyEvent(): No event simulation framework present.")}function m(t,n,l,c,h,p,d,v,m,g,y,b,w,E,S,x){t||e.error("simulateMouseEvent(): Invalid target."),i(n)?!a[n.toLowerCase()]&&!f[n]&&e.error("simulateMouseEvent(): Event type '"+n+"' not supported."):e.error("simulateMouseEvent(): Event type must be a string."),s(l)||(l=!0),s(c)||(c=n!=="mousemove"),o(h)||(h=e.config.win),u(p)||(p=1),u(d)||(d=0),u(v)||(v=0),u(m)||(m=0),u(g)||(g=0),s(y)||(y=!1),s(b)||(b=!1),s(w)||(w=!1),s(E)||(E=!1),u(S)||(S=0),x=x||null;var T=null;if(r(e.config.doc.createEvent))T=e.config.doc.createEvent("MouseEvents"),T.initMouseEvent?T.initMouseEvent(n,l,c,h,p,d,v,m,g,y,b,w,E,S,x):(T=e.config.doc.createEvent("UIEvents"),T.initEvent(n,l,c),T.view=h,T.detail=p,T.screenX=d,T.screenY=v,T.clientX=m,T.clientY=g,T.ctrlKey=y,T.altKey=b,T.metaKey=E,T.shiftKey=w,T.button=S,T.relatedTarget=x),x&&!T.relatedTarget&&(n==="mouseout"?T.toElement=x:n==="mouseover"&&(T.fromElement=x)),t.dispatchEvent(T);else if(o(e.config.doc.createEventObject)){T=e.config.doc.createEventObject(),T.bubbles=l,T.cancelable=c,T.view=h,T.detail=p,T.screenX=d,T.screenY=v,T.clientX=m,T.clientY=g,T.ctrlKey=y,T.altKey=b,T.metaKey=E,T.shiftKey=w;switch(S){case 0:T.button=1;break;case 1:T.button=4;break;case 2:break;default:T.button=0}T.relatedTarget=x,t.fireEvent("on"+n,T)}else e.error("simulateMouseEvent(): No event simulation framework present.")}function g(t,n,a,f,l,p){t||e.error("simulateUIEvent(): Invalid target."),i(n)?(n=n.toLowerCase(),c[n]||e.error("simulateUIEvent(): Event type '"+n+"' not supported.")):e.error("simulateUIEvent(): Event type must be a string.");var d=null;s(a)||(a=n in h),s(f)||(f=n==="submit"),o(l)||(l=e.config.win),u(p)||(p=1),r(e.config.doc.createEvent)?(d=e.config.doc.createEvent("UIEvents"),d.initUIEvent(n,a,f,l,p),t.dispatchEvent(d)):o(e.config.doc.createEventObject)?(d=e.config.doc.createEventObject(),d.bubbles=a,d.cancelable=f,d.view=l,d.detail=p,t.fireEvent("on"+n,d)):e.error("simulateUIEvent(): No event simulation framework present.")}function y(t,n,r,i,s,o,u,a,f,l,c,h,p,v,m,g){var y;(!e.UA.ios||e.UA.ios<2)&&e.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."),t||e.error("simulateGestureEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),d[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateGestureEvent(): Event type must be a string."),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=!0),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=2),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(h)||(h=!1),e.Lang.isBoolean(p)||(p=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(m)||(m=1),e.Lang.isNumber(g)||(g=0),y=e.config.doc.createEvent("GestureEvent"),y.initGestureEvent(n,r,i,s,o,u,a,f,l,c,h,p,v,t,m,g),t.dispatchEvent(y)}function b(t,n,r,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w){var E;t||e.error("simulateTouchEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),p[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateTouchEvent(): Event type must be a string."),n==="touchstart"||n==="touchmove"?m.length===0&&e.error("simulateTouchEvent(): No touch object in touches"):n==="touchend"&&y.length===0&&e.error("simulateTouchEvent(): No touch object in changedTouches"),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=n!=="touchcancel"),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=1),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(h)||(h=!1),e.Lang.isBoolean(d)||(d=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(b)||(b=1),e.Lang.isNumber(w)||(w=0),e.Lang.isFunction(e.config.doc.createEvent)?(e.UA.android?e.UA.android<4?(E=e.config.doc.createEvent("MouseEvents"),E.initMouseEvent(n,r,i,s,o,u,a,f,l,c,h,d,v,0,t),E.touches=m,E.targetTouches=g,E.changedTouches=y):(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(m,g,y,n,s,u,a,f,l,c,h,d,v)):e.UA.ios?e.UA.ios>=2?(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(n,r,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w)):e.error("simulateTouchEvent(): No touch event simulation framework present for iOS, "+e.UA.ios+"."):e.error("simulateTouchEvent(): Not supported agent yet, "+e.UA.userAgent),t.dispatchEvent(E)):e.error("simulateTouchEvent(): No event simulation framework present.")}var t=e.Lang,n=e.config.win,r=t.isFunction,i=t.isString,s=t.isBoolean,o=t.isObject,u=t.isNumber,a={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},f=n&&n.PointerEvent?{pointerover:1,pointerout:1,pointerdown:1,pointerup:1,pointermove:1}:{MSPointerOver:1,MSPointerOut:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1},l={keydown:1,keyup:1,keypress:1},c={submit:1,blur
:1,change:1,focus:1,resize:1,scroll:1,select:1},h={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},p={touchstart:1,touchmove:1,touchend:1,touchcancel:1},d={gesturestart:1,gesturechange:1,gestureend:1};e.mix(h,a),e.mix(h,l),e.mix(h,p),e.Event.simulate=function(t,n,r){r=r||{},a[n]||f[n]?m(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget):l[n]?v(t,n,r.bubbles,r.cancelable,r.view,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode):c[n]?g(t,n,r.bubbles,r.cancelable,r.view,r.detail):p[n]?e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6)?b(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.touches,r.targetTouches,r.changedTouches,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated. Use gesture-simulate module instead."):e.UA.ios&&e.UA.ios>=2&&d[n]?y(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated.")}})()},"@VERSION@",{requires:["event-base"]});
YUI.add("event-synthetic",function(e,t){function c(e,t){this.handle=e,this.emitFacade=t}function h(e,t,n){this.handles=[],this.el=e,this.key=n,this.domkey=t}function p(){this._init.apply(this,arguments)}var n=e.CustomEvent,r=e.Env.evt.dom_map,i=e.Array,s=e.Lang,o=s.isObject,u=s.isString,a=s.isArray,f=e.Selector.query,l=function(){};c.prototype.fire=function(t){var n=i(arguments,0,!0),r=this.handle,s=r.evt,u=r.sub,a=u.context,f=u.filter,l=t||{},c;if(this.emitFacade){if(!t||!t.preventDefault)l=s._getFacade(),o(t)&&!t.preventDefault?(e.mix(l,t,!0),n[0]=l):n.unshift(l);l.type=s.type,l.details=n.slice(),f&&(l.container=s.host)}else f&&o(t)&&t.currentTarget&&n.shift();return u.context=a||l.currentTarget||s.host,c=s.fire.apply(s,n),t.prevented&&s.preventedFn&&s.preventedFn.apply(s,n),t.stopped&&s.stoppedFn&&s.stoppedFn.apply(s,n),u.context=a,c},h.prototype={constructor:h,type:"_synth",fn:l,capture:!1,register:function(e){e.evt.registry=this,this.handles.push(e)},unregister:function(t){var n=this.handles,i=r[this.domkey],s;for(s=n.length-1;s>=0;--s)if(n[s].sub===t){n.splice(s,1);break}n.length||(delete i[this.key],e.Object.size(i)||delete r[this.domkey])},detachAll:function(){var e=this.handles,t=e.length;while(--t>=0)e[t].detach()}},e.mix(p,{Notifier:c,SynthRegistry:h,getRegistry:function(t,n,i){var s=t._node,o=e.stamp(s),u="event:"+o+n+"_synth",a=r[o];return i&&(a||(a=r[o]={}),a[u]||(a[u]=new h(s,o,u))),a&&a[u]||null},_deleteSub:function(e){if(e&&e.fn){var t=this.eventDef,r=e.filter?"detachDelegate":"detach";this._subscribers=[],n.keepDeprecatedSubs&&(this.subscribers={}),t[r](e.node,e,this.notifier,e.filter),this.registry.unregister(e),delete e.fn,delete e.node,delete e.context}},prototype:{constructor:p,_init:function(){var e=this.publishConfig||(this.publishConfig={});this.emitFacade="emitFacade"in e?e.emitFacade:!0,e.emitFacade=!1},processArgs:l,on:l,detach:l,delegate:l,detachDelegate:l,_on:function(t,n){var r=[],s=t.slice(),o=this.processArgs(t,n),a=t[2],l=n?"delegate":"on",c,h;return c=u(a)?f(a):i(a||e.one(e.config.win)),!c.length&&u(a)?(h=e.on("available",function(){e.mix(h,e[l].apply(e,s),!0)},a),h):(e.Array.each(c,function(i){var s=t.slice(),u;i=e.one(i),i&&(n&&(u=s.splice(3,1)[0]),s.splice(0,4,s[1],s[3]),(!this.preventDups||!this.getSubs(i,t,null,!0))&&r.push(this._subscribe(i,l,s,o,u)))},this),r.length===1?r[0]:new e.EventHandle(r))},_subscribe:function(t,n,r,i,s){var o=new e.CustomEvent(this.type,this.publishConfig),u=o.on.apply(o,r),a=new c(u,this.emitFacade),f=p.getRegistry(t,this.type,!0),l=u.sub;return l.node=t,l.filter=s,i&&this.applyArgExtras(i,l),e.mix(o,{eventDef:this,notifier:a,host:t,currentTarget:t,target:t,el:t._node,_delete:p._deleteSub},!0),u.notifier=a,f.register(u),this[n](t,l,a,s),u},applyArgExtras:function(e,t){t._extra=e},_detach:function(t){var n=t[2],r=u(n)?f(n):i(n),s,o,a,l,c;t.splice(2,1);for(o=0,a=r.length;o<a;++o){s=e.one(r[o]);if(s){l=this.getSubs(s,t);if(l)for(c=l.length-1;c>=0;--c)l[c].detach()}}},getSubs:function(e,t,n,r){var i=p.getRegistry(e,this.type),s=[],o,u,a,f;if(i){o=i.handles,n||(n=this.subMatch);for(u=0,a=o.length;u<a;++u){f=o[u];if(n.call(this,f.sub,t)){if(r)return f;s.push(o[u])}}}return s.length&&s},subMatch:function(e,t){return!t[1]||e.fn===t[1]}}},!0),e.SyntheticEvent=p,e.Event.define=function(t,n,r){var s,o,f;t&&t.type?(s=t,r=n):n&&(s=e.merge({type:t},n));if(s){if(r||!e.Node.DOM_EVENTS[s.type])o=function(){p.apply(this,arguments)},e.extend(o,p,s),f=new o,t=f.type,e.Node.DOM_EVENTS[t]=e.Env.evt.plugins[t]={eventDef:f,on:function(){return f._on(i(arguments))},delegate:function(){return f._on(i(arguments),!0)},detach:function(){return f._detach(i(arguments))}}}else(u(t)||a(t))&&e.Array.each(i(t),function(t){e.Node.DOM_EVENTS[t]=1});return f}},"@VERSION@",{requires:["node-base","event-custom-complex"]});
YUI.add("event-tap",function(e,t){function a(t,n){n=n||e.Object.values(u),e.Array.each(n,function(e){var n=t[e];n&&(n.detach(),t[e]=null)})}var n=e.config.doc,r=e.Event._GESTURE_MAP,i=r.start,s="tap",o=/pointer/i,u={START:"Y_TAP_ON_START_HANDLE",END:"Y_TAP_ON_END_HANDLE",CANCEL:"Y_TAP_ON_CANCEL_HANDLE"};e.Event.define(s,{publishConfig:{preventedFn:function(e){var t=e.target.once("click",function(e){e.preventDefault()});setTimeout(function(){t.detach()},100)}},processArgs:function(e,t){if(!t){var n=e[3];return e.splice(3,1),n}},on:function(e,t,n){t[u.START]=e.on(i,this._start,this,e,t,n)},detach:function(e,t,n){a(t)},delegate:function(t,n,r,s){n[u.START]=e.delegate(i,function(e){this._start(e,t,n,r,!0)},t,s,this)},detachDelegate:function(e,t,n){a(t)},_start:function(e,t,n,i,s){var a={canceled:!1,eventType:e.type},f=n.preventMouse||!1;if(e.button&&e.button===3)return;if(e.touches&&e.touches.length!==1)return;a.node=s?e.currentTarget:t,e.touches?a.startXY=[e.touches[0].pageX,e.touches[0].pageY]:a.startXY=[e.pageX,e.pageY],e.touches?(n[u.END]=t.once("touchend",this._end,this,t,n,i,s,a),n[u.CANCEL]=t.once("touchcancel",this.detach,this,t,n,i,s,a),n.preventMouse=!0):a.eventType.indexOf("mouse")!==-1&&!f?(n[u.END]=t.once("mouseup",this._end,this,t,n,i,s,a),n[u.CANCEL]=t.once("mousecancel",this.detach,this,t,n,i,s,a)):a.eventType.indexOf("mouse")!==-1&&f?n.preventMouse=!1:o.test(a.eventType)&&(n[u.END]=t.once(r.end,this._end,this,t,n,i,s,a),n[u.CANCEL]=t.once(r.cancel,this.detach,this,t,n,i,s,a))},_end:function(e,t,n,r,i,o){var f=o.startXY,l,c,h=15;n._extra&&n._extra.sensitivity>=0&&(h=n._extra.sensitivity),e.changedTouches?(l=[e.changedTouches[0].pageX,e.changedTouches[0].pageY],c=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]):(l=[e.pageX,e.pageY],c=[e.clientX,e.clientY]),Math.abs(l[0]-f[0])<=h&&Math.abs(l[1]-f[1])<=h&&(e.type=s,e.pageX=l[0],e.pageY=l[1],e.clientX=c[0],e.clientY=c[1],e.currentTarget=o.node,r.fire(e)),a(n,[u.END,u.CANCEL])}})},"@VERSION@",{requires:["node-base","event-base","event-touch","event-synthetic"]});
YUI.add("event-touch",function(e,t){var n="scale",r="rotation",i="identifier",s=e.config.win,o={};e.DOMEventFacade.prototype._touch=function(t,s,o){var u,a,f,l,c;if(t.touches){this.touches=[],c={};for(u=0,a=t.touches.length;u<a;++u)l=t.touches[u],c[e.stamp(l)]=this.touches[u]=new e.DOMEventFacade(l,s,o)}if(t.targetTouches){this.targetTouches=[];for(u=0,a=t.targetTouches.length;u<a;++u)l=t.targetTouches[u],f=c&&c[e.stamp(l,!0)],this.targetTouches[u]=f||new e.DOMEventFacade(l,s,o)}if(t.changedTouches){this.changedTouches=[];for(u=0,a=t.changedTouches.length;u<a;++u)l=t.changedTouches[u],f=c&&c[e.stamp(l,!0)],this.changedTouches[u]=f||new e.DOMEventFacade(l,s,o)}n in t&&(this[n]=t[n]),r in t&&(this[r]=t[r]),i in t&&(this[i]=t[i])},e.Node.DOM_EVENTS&&e.mix(e.Node.DOM_EVENTS,{touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1,MSPointerCancel:1,pointerdown:1,pointerup:1,pointermove:1,pointercancel:1}),s&&"ontouchstart"in s&&!(e.UA.chrome&&e.UA.chrome<6)?(o.start=["touchstart","mousedown"],o.end=["touchend","mouseup"],o.move=["touchmove","mousemove"],o.cancel=["touchcancel","mousecancel"]):s&&s.PointerEvent?(o.start="pointerdown",o.end="pointerup",o.move="pointermove",o.cancel="pointercancel"):s&&"msPointerEnabled"in s.navigator?(o.start="MSPointerDown",o.end="MSPointerUp",o.move="MSPointerMove",o.cancel="MSPointerCancel"):(o.start="mousedown",o.end="mouseup",o.move="mousemove",o.cancel="mousecancel"),e.Event._GESTURE_MAP=o},"@VERSION@",{requires:["node-base"]});
YUI.add("event-valuechange",function(e,t){var n="_valuechange",r="value",i="nodeName",s,o={POLL_INTERVAL:50,TIMEOUT:1e4,_poll:function(t,r){var i=t._node,s=r.e,u=t._data&&t._data[n],a=0,f,l,c,h,p,d;if(!i||!u){o._stopPolling(t);return}l=u.prevVal,h=u.nodeName,u.isEditable?c=i.innerHTML:h==="input"||h==="textarea"?c=i.value:h==="select"&&(p=i.options[i.selectedIndex],c=p.value||p.text),c!==l&&(u.prevVal=c,f={_event:s,currentTarget:s&&s.currentTarget||t,newVal:c,prevVal:l,target:s&&s.target||t},e.Object.some(u.notifiers,function(e){var t=e.handle.evt,n;a!==1?e.fire(f):t.el===d&&e.fire(f),n=t&&t._facade?t._facade.stopped:0,n>a&&(a=n,a===1&&(d=t.el));if(a===2)return!0}),o._refreshTimeout(t))},_refreshTimeout:function(e,t){if(!e._node)return;var r=e.getData(n);o._stopTimeout(e),r.timeout=setTimeout(function(){o._stopPolling(e,t)},o.TIMEOUT)},_startPolling:function(t,s,u){var a,f;if(!t.test("input,textarea,select")&&!(f=o._isEditable(t)))return;a=t.getData(n),a||(a={nodeName:t.get(i).toLowerCase(),isEditable:f,prevVal:f?t.getDOMNode().innerHTML:t.get(r)},t.setData(n,a)),a.notifiers||(a.notifiers={});if(a.interval){if(!u.force){a.notifiers[e.stamp(s)]=s;return}o._stopPolling(t,s)}a.notifiers[e.stamp(s)]=s,a.interval=setInterval(function(){o._poll(t,u)},o.POLL_INTERVAL),o._refreshTimeout(t,s)},_stopPolling:function(t,r){if(!t._node)return;var i=t.getData(n)||{};clearInterval(i.interval),delete i.interval,o._stopTimeout(t),r?i.notifiers&&delete i.notifiers[e.stamp(r)]:i.notifiers={}},_stopTimeout:function(e){var t=e.getData(n)||{};clearTimeout(t.timeout),delete t.timeout},_isEditable:function(e){var t=e._node;return t.contentEditable==="true"||t.contentEditable===""},_onBlur:function(e,t){o._stopPolling(e.currentTarget,t)},_onFocus:function(e,t){var s=e.currentTarget,u=s.getData(n);u||(u={isEditable:o._isEditable(s),nodeName:s.get(i).toLowerCase()},s.setData(n,u)),u.prevVal=u.isEditable?s.getDOMNode().innerHTML:s.get(r),o._startPolling(s,t,{e:e})},_onKeyDown:function(e,t){o._startPolling(e.currentTarget,t,{e:e})},_onKeyUp:function(e,t){(e.charCode===229||e.charCode===197)&&o._startPolling(e.currentTarget,t,{e:e,force:!0})},_onMouseDown:function(e,t){o._startPolling(e.currentTarget,t,{e:e})},_onSubscribe:function(t,s,u,a){var f,l,c,h,p;l={blur:o._onBlur,focus:o._onFocus,keydown:o._onKeyDown,keyup:o._onKeyUp,mousedown:o._onMouseDown},f=u._valuechange={};if(a)f.delegated=!0,f.getNodes=function(){return h=t.all("input,textarea,select").filter(a),p=t.all('[contenteditable="true"],[contenteditable=""]').filter(a),h.concat(p)},f.getNodes().each(function(e){e.getData(n)||e.setData(n,{nodeName:e.get(i).toLowerCase(),isEditable:o._isEditable(e),prevVal:c?e.getDOMNode().innerHTML:e.get(r)})}),u._handles=e.delegate(l,t,a,null,u);else{c=o._isEditable(t);if(!t.test("input,textarea,select")&&!c)return;t.getData(n)||t.setData(n,{nodeName:t.get(i).toLowerCase(),isEditable:c,prevVal:c?t.getDOMNode().innerHTML:t.get(r)}),u._handles=t.on(l,null,null,u)}},_onUnsubscribe:function(e,t,n){var r=n._valuechange;n._handles&&n._handles.detach(),r.delegated?r.getNodes().each(function(e){o._stopPolling(e,n)}):o._stopPolling(e,n)}};s={detach:o._onUnsubscribe,on:o._onSubscribe,delegate:o._onSubscribe,detachDelegate:o._onUnsubscribe,publishConfig:{emitFacade:!0}},e.Event.define("valuechange",s),e.Event.define("valueChange",s),e.ValueChange=o},"@VERSION@",{requires:["event-focus","event-synthetic"]});
YUI.add("gesture-simulate",function(e,t){function T(n){n||e.error(t+": invalid target node"),this.node=n,this.target=e.Node.getDOMNode(n);var r=this.node.getXY(),i=this._getDims();a=r[0]+i[0]/2,f=r[1]+i[1]/2}var t="gesture-simulate",n=e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6),r={tap:1,doubletap:1,press:1,move:1,flick:1,pinch:1,rotate:1},i={touchstart:1,touchmove:1,touchend:1,touchcancel:1},s=e.config.doc,o,u=20,a,f,l={HOLD_TAP:10,DELAY_TAP:10,HOLD_PRESS:3e3,MIN_HOLD_PRESS:1e3,MAX_HOLD_PRESS:6e4,DISTANCE_MOVE:200,DURATION_MOVE:1e3,MAX_DURATION_MOVE:5e3,MIN_VELOCITY_FLICK:1.3,DISTANCE_FLICK:200,DURATION_FLICK:1e3,MAX_DURATION_FLICK:5e3,DURATION_PINCH:1e3},c="touchstart",h="touchmove",p="touchend",d="gesturestart",v="gesturechange",m="gestureend",g="mouseup",y="mousemove",b="mousedown",w="click",E="dblclick",S="x",x="y";T.prototype={_toRadian:function(e){return e*(Math.PI/180)},_getDims:function(){var e,t,n;return this.target.getBoundingClientRect?(e=this.target.getBoundingClientRect(),"height"in e?n=e.height:n=Math.abs(e.bottom-e.top),"width"in e?t=e.width:t=Math.abs(e.right-e.left)):(e=this.node.get("region"),t=e.width,n=e.height),[t,n]},_calculateDefaultPoint:function(t){var n;return!e.Lang.isArray(t)||t.length===0?t=[a,f]:(t.length==1&&(n=this._getDims[1],t[1]=n/2),t[0]=this.node.getX()+t[0],t[1]=this.node.getY()+t[1]),t},rotate:function(n,r,i,s,o,u,a){var f,l=i,c=s;if(!e.Lang.isNumber(l)||!e.Lang.isNumber(c)||l<0||c<0)f=this.target.offsetWidth<this.target.offsetHeight?this.target.offsetWidth/4:this.target.offsetHeight/4,l=f,c=f;e.Lang.isNumber(a)||e.error(t+"Invalid rotation detected."),this.pinch(n,r,l,c,o,u,a)},pinch:function(n,r,i,s,o,a,f){var g,y,b=u,w,E=0,S=i,x=s,T,N,C,k,L,A,O,M,_,D={start:[],end:[]},P={start:[],end:[]},H,B;r=this._calculateDefaultPoint(r),(!e.Lang.isNumber(S)||!e.Lang.isNumber(x)||S<0||x<0)&&e.error(t+"Invalid startRadius and endRadius detected.");if(!e.Lang.isNumber(o)||o<=0)o=l.DURATION_PINCH;if(!e.Lang.isNumber(a))a=0;else{a%=360;while(a<0)a+=360}e.Lang.isNumber(f)||(f=0),e.AsyncQueue.defaults.timeout=b,g=new e.AsyncQueue,N=r[0],C=r[1],O=a,M=a+f,D.start=[N+S*Math.sin(this._toRadian(O)),C-S*Math.cos(this._toRadian(O))],D.end=[N+x*Math.sin(this._toRadian(M)),C-x*Math.cos(this._toRadian(M))],P.start=[N-S*Math.sin(this._toRadian(O)),C+S*Math.cos(this._toRadian(O))],P.end=[N-x*Math.sin(this._toRadian(M)),C+x*Math.cos(this._toRadian(M))],k=1,L=s/i,g.add({fn:function(){var t,n,r,i;t={pageX:D.start[0],pageY:D.start[1],clientX:D.start[0],clientY:D.start[1]},n={pageX:P.start[0],pageY:P.start[1],clientX:P.start[0],clientY:P.start[1]},i=this._createTouchList([e.merge({identifier:E++},t),e.merge({identifier:E++},n)]),r={pageX:(D.start[0]+P.start[0])/2,pageY:(D.start[0]+P.start[1])/2,clientX:(D.start[0]+P.start[0])/2,clientY:(D.start[0]+P.start[1])/2},this._simulateEvent(this.target,c,e.merge({touches:i,targetTouches:i,changedTouches:i,scale:k,rotation:O},r)),e.UA.ios>=2&&this._simulateEvent(this.target,d,e.merge({scale:k,rotation:O},r))},timeout:0,context:this}),H=Math.floor(o/b),T=(x-S)/H,A=(L-k)/H,_=(M-O)/H,B=function(t){var n=S+T*t,r=N+n*Math.sin(this._toRadian(O+_*t)),i=C-n*Math.cos(this._toRadian(O+_*t)),s=N-n*Math.sin(this._toRadian(O+_*t)),o=C+n*Math.cos(this._toRadian(O+_*t)),u=(r+s)/2,a=(i+o)/2,f,l,c,p;f={pageX:r,pageY:i,clientX:r,clientY:i},l={pageX:s,pageY:o,clientX:s,clientY:o},p=this._createTouchList([e.merge({identifier:E++},f),e.merge({identifier:E++},l)]),c={pageX:u,pageY:a,clientX:u,clientY:a},this._simulateEvent(this.target,h,e.merge({touches:p,targetTouches:p,changedTouches:p,scale:k+A*t,rotation:O+_*t},c)),e.UA.ios>=2&&this._simulateEvent(this.target,v,e.merge({scale:k+A*t,rotation:O+_*t},c))};for(y=0;y<H;y++)g.add({fn:B,args:[y],context:this});g.add({fn:function(){var t=this._getEmptyTouchList(),n,r,i,s;n={pageX:D.end[0],pageY:D.end[1],clientX:D.end[0],clientY:D.end[1]},r={pageX:P.end[0],pageY:P.end[1],clientX:P.end[0],clientY:P.end[1]},s=this._createTouchList([e.merge({identifier:E++},n),e.merge({identifier:E++},r)]),i={pageX:(D.end[0]+P.end[0])/2,pageY:(D.end[0]+P.end[1])/2,clientX:(D.end[0]+P.end[0])/2,clientY:(D.end[0]+P.end[1])/2},e.UA.ios>=2&&this._simulateEvent(this.target,m,e.merge({scale:L,rotation:M},i)),this._simulateEvent(this.target,p,e.merge({touches:t,targetTouches:t,changedTouches:s,scale:L,rotation:M},i))},context:this}),n&&e.Lang.isFunction(n)&&g.add({fn:n,context:this.node}),g.run()},tap:function(t,r,i,s,o){var u=new e.AsyncQueue,a=this._getEmptyTouchList(),f,h,d,v,m;r=this._calculateDefaultPoint(r);if(!e.Lang.isNumber(i)||i<1)i=1;e.Lang.isNumber(s)||(s=l.HOLD_TAP),e.Lang.isNumber(o)||(o=l.DELAY_TAP),h={pageX:r[0],pageY:r[1],clientX:r[0],clientY:r[1]},f=this._createTouchList([e.merge({identifier:0},h)]),v=function(){this._simulateEvent(this.target,c,e.merge({touches:f,targetTouches:f,changedTouches:f},h))},m=function(){this._simulateEvent(this.target,p,e.merge({touches:a,targetTouches:a,changedTouches:f},h))};for(d=0;d<i;d++)u.add({fn:v,context:this,timeout:d===0?0:o}),u.add({fn:m,context:this,timeout:s});i>1&&!n&&u.add({fn:function(){this._simulateEvent(this.target,E,h)},context:this}),t&&e.Lang.isFunction(t)&&u.add({fn:t,context:this.node}),u.run()},flick:function(n,r,i,s,o){var u;r=this._calculateDefaultPoint(r),e.Lang.isString(i)?(i=i.toLowerCase(),i!==S&&i!==x&&e.error(t+"(flick): Only x or y axis allowed")):i=S,e.Lang.isNumber(s)||(s=l.DISTANCE_FLICK),e.Lang.isNumber(o)?o>l.MAX_DURATION_FLICK&&(o=l.MAX_DURATION_FLICK):o=l.DURATION_FLICK,Math.abs(s)/o<l.MIN_VELOCITY_FLICK&&(o=Math.abs(s)/l.MIN_VELOCITY_FLICK),u={start:e.clone(r),end:[i===S?r[0]+s:r[0],i===x?r[1]+s:r[1]]},this._move(n,u,o)},move:function(t,n,r){var i;e.Lang.isObject(n)?(e.Lang.isArray(n.point)?n.point=this._calculateDefaultPoint(n.point):n.point=this._calculateDefaultPoint([]),e.Lang.isNumber(n.xdist)||(n.xdist=l.DISTANCE_MOVE),e.Lang.isNumber(n.ydist)||(n.ydist=0)):n={point:this._calculateDefaultPoint([]),xdist:l.
DISTANCE_MOVE,ydist:0},e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,i={start:e.clone(n.point),end:[n.point[0]+n.xdist,n.point[1]+n.ydist]},this._move(t,i,r)},_move:function(t,n,r){var i,s,o=u,d,v,m,g=0,y;e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,e.Lang.isObject(n)?(e.Lang.isArray(n.start)||(n.start=[a,f]),e.Lang.isArray(n.end)||(n.end=[a+l.DISTANCE_MOVE,f])):n={start:[a,f],end:[a+l.DISTANCE_MOVE,f]},e.AsyncQueue.defaults.timeout=o,i=new e.AsyncQueue,i.add({fn:function(){var t={pageX:n.start[0],pageY:n.start[1],clientX:n.start[0],clientY:n.start[1]},r=this._createTouchList([e.merge({identifier:g++},t)]);this._simulateEvent(this.target,c,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),d=Math.floor(r/o),v=(n.end[0]-n.start[0])/d,m=(n.end[1]-n.start[1])/d,y=function(t){var r=n.start[0]+v*t,i=n.start[1]+m*t,s={pageX:r,pageY:i,clientX:r,clientY:i},o=this._createTouchList([e.merge({identifier:g++},s)]);this._simulateEvent(this.target,h,e.merge({touches:o,targetTouches:o,changedTouches:o},s))};for(s=0;s<d;s++)i.add({fn:y,args:[s],context:this});i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,h,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._getEmptyTouchList(),i=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,p,e.merge({touches:r,targetTouches:r,changedTouches:i},t))},context:this}),t&&e.Lang.isFunction(t)&&i.add({fn:t,context:this.node}),i.run()},_getEmptyTouchList:function(){return o||(o=this._createTouchList([])),o},_createTouchList:function(n){var r=[],i,o=this;return!!n&&e.Lang.isArray(n)?e.UA.android&&e.UA.android>=4||e.UA.ios&&e.UA.ios>=2?(e.each(n,function(t){t.identifier||(t.identifier=0),t.pageX||(t.pageX=0),t.pageY||(t.pageY=0),t.screenX||(t.screenX=0),t.screenY||(t.screenY=0),r.push(s.createTouch(e.config.win,o.target,t.identifier,t.pageX,t.pageY,t.screenX,t.screenY))}),i=s.createTouchList.apply(s,r)):e.UA.ios&&e.UA.ios<2?e.error(t+": No touch event simulation framework present."):(i=[],e.each(n,function(e){e.identifier||(e.identifier=0),e.clientX||(e.clientX=0),e.clientY||(e.clientY=0),e.pageX||(e.pageX=0),e.pageY||(e.pageY=0),e.screenX||(e.screenX=0),e.screenY||(e.screenY=0),i.push({target:o.target,identifier:e.identifier,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}),i.item=function(e){return i[e]}):e.error(t+": Invalid touchPoints passed"),i},_simulateEvent:function(t,r,s){var o;i[r]?n?e.Event.simulate(t,r,s):this._isSingleTouch(s.touches,s.targetTouches,s.changedTouches)?(r={touchstart:b,touchmove:y,touchend:g}[r],s.button=0,s.relatedTarget=null,o=r===g?s.changedTouches:s.touches,s=e.mix(s,{screenX:o.item(0).screenX,screenY:o.item(0).screenY,clientX:o.item(0).clientX,clientY:o.item(0).clientY},!0),e.Event.simulate(t,r,s),r==g&&e.Event.simulate(t,w,s)):e.error("_simulateEvent(): Event '"+r+"' has multi touch objects that can't be simulated in your platform."):e.Event.simulate(t,r,s)},_isSingleTouch:function(e,t,n){return e&&e.length<=1&&t&&t.length<=1&&n&&n.length<=1}},e.GestureSimulation=T,e.GestureSimulation.defaults=l,e.GestureSimulation.GESTURES=r,e.Event.simulateGesture=function(n,i,s,o){n=e.one(n);var u=new e.GestureSimulation(n);i=i.toLowerCase(),!o&&e.Lang.isFunction(s)&&(o=s,s={}),s=s||{};if(r[i])switch(i){case"tap":u.tap(o,s.point,s.times,s.hold,s.delay);break;case"doubletap":u.tap(o,s.point,2);break;case"press":e.Lang.isNumber(s.hold)?s.hold<l.MIN_HOLD_PRESS?s.hold=l.MIN_HOLD_PRESS:s.hold>l.MAX_HOLD_PRESS&&(s.hold=l.MAX_HOLD_PRESS):s.hold=l.HOLD_PRESS,u.tap(o,s.point,1,s.hold);break;case"move":u.move(o,s.path,s.duration);break;case"flick":u.flick(o,s.point,s.axis,s.distance,s.duration);break;case"pinch":u.pinch(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation);break;case"rotate":u.rotate(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation)}else e.error(t+": Not a supported gesture simulation: "+i)}},"@VERSION@",{requires:["async-queue","event-simulate","node-screen"]});
YUI.add("history-base",function(e,t){function p(){this._init.apply(this,arguments)}function d(e){return n.type(e)==="object"}var n=e.Lang,r=e.Object,i=YUI.namespace("Env.History"),s=e.Array,o=e.config.doc,u=o.documentMode,a=e.config.win,f={merge:!0},l="change",c="add",h="replace";e.augment(p,e.EventTarget,null,null,{emitFacade:!0,prefix:"history",preventable:!1,queueable:!0}),i._state||(i._state={}),p.NAME="historyBase",p.SRC_ADD=c,p.SRC_REPLACE=h,p.html5=!!(a.history&&a.history.pushState&&a.history.replaceState&&("onpopstate"in a||e.UA.gecko>=2)&&(!e.UA.android||e.UA.android>=2.4)),p.nativeHashChange=("onhashchange"in a||"onhashchange"in o)&&(!u||u>7),e.mix(p.prototype,{_init:function(e){var t;e=this._config=e||{},this.force=!!e.force,t=this._initialState=this._initialState||e.initialState||null,this.publish(l,{broadcast:2,defaultFn:this._defChangeFn}),t&&this.replace(t)},add:function(){var e=s(arguments,0,!0);return e.unshift(c),this._change.apply(this,e)},addValue:function(e,t,n){var r={};return r[e]=t,this._change(c,r,n)},get:function(t){var n=i._state,s=d(n);return t?s&&r.owns(n,t)?n[t]:undefined:s?e.mix({},n,!0):n},replace:function(){var e=s(arguments,0,!0);return e.unshift(h),this._change.apply(this,e)},replaceValue:function(e,t,n){var r={};return r[e]=t,this._change(h,r,n)},_change:function(t,n,r){return r=r?e.merge(f,r):f,r.merge&&d(n)&&d(i._state)&&(n=e.merge(i._state,n)),this._resolveChanges(t,n,r),this},_fireEvents:function(e,t,n){this.fire(l,{_options:n,changed:t.changed,newVal:t.newState,prevVal:t.prevState,removed:t.removed,src:e}),r.each(t.changed,function(t,n){this._fireChangeEvent(e,n,t)},this),r.each(t.removed,function(t,n){this._fireRemoveEvent(e,n,t)},this)},_fireChangeEvent:function(e,t,n){this.fire(t+"Change",{newVal:n.newVal,prevVal:n.prevVal,src:e})},_fireRemoveEvent:function(e,t,n){this.fire(t+"Remove",{prevVal:n,src:e})},_resolveChanges:function(e,t,n){var s={},o,u=i._state,a={};t||(t={}),n||(n={}),d(t)&&d(u)?(r.each(t,function(e,t){var n=u[t];e!==n&&(s[t]={newVal:e,prevVal:n},o=!0)},this),r.each(u,function(e,n){if(!r.owns(t,n)||t[n]===null)delete t[n],a[n]=e,o=!0},this)):o=t!==u,(o||this.force)&&this._fireEvents(e,{changed:s,newState:t,prevState:u,removed:a},n)},_storeState:function(e,t){i._state=t||{}},_defChangeFn:function(e){this._storeState(e.src,e.newVal,e._options)}},!0),e.HistoryBase=p},"@VERSION@",{requires:["event-custom-complex"]});
YUI.add("history-hash",function(e,t){function p(){p.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.Array,s=e.Object,o=YUI.namespace("Env.HistoryHash"),u="hash",a,f,l,c=e.config.win,h=e.config.useHistoryHTML5;e.extend(p,n,{_init:function(t){var n=p.parseHash();t=t||{},this._initialState=t.initialState?e.merge(t.initialState,n):n,e.after("hashchange",e.bind(this._afterHashChange,this),c),p.superclass._init.apply(this,arguments)},_change:function(e,t,n){return s.each(t,function(e,n){r.isValue(e)&&(t[n]=e.toString())}),p.superclass._change.call(this,e,t,n)},_storeState:function(e,t){var r=p.decode,i=p.createHash(t);p.superclass._storeState.apply(this,arguments),e!==u&&r(p.getHash())!==r(i)&&p[e===n.SRC_REPLACE?"replaceHash":"setHash"](i)},_afterHashChange:function(e){this._resolveChanges(u,p.parseHash(e.newHash),{})}},{NAME:"historyHash",SRC_HASH:u,hashPrefix:"",_REGEX_HASH:/([^\?#&=]+)=?([^&=]*)/g,createHash:function(e){var t=p.encode,n=[];return s.each(e,function(e,i){r.isValue(e)&&n.push(t(i)+"="+t(e))}),n.join("&")},decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},encode:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},getHash:e.UA.gecko?function(){var t=e.getLocation(),n=/#(.*)$/.exec(t.href),r=n&&n[1]||"",i=p.hashPrefix;return i&&r.indexOf(i)===0?r.replace(i,""):r}:function(){var t=e.getLocation(),n=t.hash.substring(1),r=p.hashPrefix;return r&&n.indexOf(r)===0?n.replace(r,""):n},getUrl:function(){return location.href},parseHash:function(e){var t=p.decode,n,i,s,o,u,a={},f=p.hashPrefix,l;e=r.isValue(e)?e:p.getHash();if(f){l=e.indexOf(f);if(l===0||l===1&&e.charAt(0)==="#")e=e.replace(f,"")}o=e.match(p._REGEX_HASH)||[];for(n=0,i=o.length;n<i;++n)s=o[n],u=s.split("="),u.length>1?a[t(u[0])]=t(u[1]):a[t(s)]="";return a},replaceHash:function(t){var n=e.getLocation(),r=n.href.replace(/#.*$/,"");t.charAt(0)==="#"&&(t=t.substring(1)),n.replace(r+"#"+(p.hashPrefix||"")+t)},setHash:function(t){var n=e.getLocation();t.charAt(0)==="#"&&(t=t.substring(1)),n.hash=(p.hashPrefix||"")+t}}),a=o._notifiers,a||(a=o._notifiers=[]),e.Event.define("hashchange",{on:function(t,n,r){(t.compareTo(c)||t.compareTo(e.config.doc.body))&&a.push(r)},detach:function(e,t,n){var r=i.indexOf(a,n);r!==-1&&a.splice(r,1)}}),f=p.getHash(),l=p.getUrl(),n.nativeHashChange?o._hashHandle||(o._hashHandle=e.Event.attach("hashchange",function(e){var t=p.getHash(),n=p.getUrl();i.each(a.concat(),function(r){r.fire({_event:e,oldHash:f,oldUrl:l,newHash:t,newUrl:n})}),f=t,l=n},c)):o._hashPoll||(o._hashPoll=e.later(50,null,function(){var e=p.getHash(),t,n;f!==e&&(n=p.getUrl(),t={oldHash:f,oldUrl:l,newHash:e,newUrl:n},f=e,l=n,i.each(a.concat(),function(e){e.fire(t)}))},null,!0)),e.HistoryHash=p;if(h===!1||!e.History&&h!==!0&&(!n.html5||!e.HistoryHTML5))e.History=p},"@VERSION@",{requires:["event-synthetic","history-base","yui-later"]});
YUI.add("history-html5",function(e,t){function a(){a.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.config.win,s=e.config.useHistoryHTML5,o="popstate",u=n.SRC_REPLACE;e.extend(a,n,{_init:function(t){var n;try{n=i.history.state}catch(s){n=null}e.Object.isEmpty(n)&&(n=null),t||(t={}),t.initialState&&r.type(t.initialState)==="object"&&r.type(n)==="object"?this._initialState=e.merge(t.initialState,n):this._initialState=n,e.on("popstate",this._onPopState,i,this),a.superclass._init.apply(this,arguments)},_storeState:function(t,n,r){t!==o&&i.history[t===u?"replaceState":"pushState"](n,r.title||e.config.doc.title||"",r.url||e.config.doc.URL),a.superclass._storeState.apply(this,arguments)},_onPopState:function(e){this._resolveChanges(o,e._event.state||null)}},{NAME:"historyhtml5",SRC_POPSTATE:o}),e.Node.DOM_EVENTS.popstate||(e.Node.DOM_EVENTS.popstate=1),e.HistoryHTML5=a;if(s===!0||s!==!1&&n.html5)e.History=a},"@VERSION@",{optional:["json"],requires:["event-base","history-base","node-base"]});
YUI.add("intl",function(e,t){var n={},r="yuiRootLang",i="yuiActiveLang",s=[];e.mix(e.namespace("Intl"),{_mod:function(e){return n[e]||(n[e]={}),n[e]},setLang:function(e,t){var n=this._mod(e),s=n[i],o=!!n[t];return o&&t!==s&&(n[i]=t,this.fire("intl:langChange",{module:e,prevVal:s,newVal:t===r?"":t})),o},getLang:function(e){var t=this._mod(e)[i];return t===r?"":t},add:function(e,t,n){t=t||r,this._mod(e)[t]=n,this.setLang(e,t)},get:function(t,n,r){var s=this._mod(t),o;return r=r||s[i],o=s[r]||{},n?o[n]:e.merge(o)},getAvailableLangs:function(t){var n=e.Env._loader,r=n&&n.moduleInfo[t],i=r&&r.lang;return i?i.concat():s}}),e.augment(e.Intl,e.EventTarget),e.Intl.publish("intl:langChange",{emitFacade:!0})},"@VERSION@",{requires:["intl-base","event-custom"]});
YUI.add("io-base",function(e,t){function o(t){var n=this;n._uid="io:"+s++,n._init(t),e.io._map[n._uid]=n}var n=["start","complete","end","success","failure","progress"],r=["status","statusText","responseText","responseXML"],i=e.config.win,s=0;o.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(t){var r=this,i,s;r.cfg=t||{},e.augment(r,e.EventTarget);for(i=0,s=n.length;i<s;++i)r.publish("io:"+n[i],e.merge({broadcast:1},t)),r.publish("io-trn:"+n[i],t)},_create:function(t,n){var r=this,s={id:e.Lang.isNumber(n)?n:r._id++,uid:r._uid},o=t.xdr?t.xdr.use:null,u=t.form&&t.form.upload?"iframe":null,a;return o==="native"&&(o=e.UA.ie&&!l?"xdr":null,r.setHeader("X-Requested-With")),a=o||u,s=a?e.merge(e.IO.customTransport(a),s):e.merge(e.IO.defaultTransport(),s),s.notify&&(t.notify=function(e,t,n){r.notify(e,t,n)}),a||i&&i.FormData&&t.data instanceof i.FormData&&(s.c.upload.onprogress=function(e){r.progress(s,e,t)},s.c.onload=function(e){r.load(s,e,t)},s.c.onerror=function(e){r.error(s,e,t)},s.upload=!0),s},_destroy:function(t){i&&!t.notify&&!t.xdr&&(u&&!t.upload?t.c.onreadystatechange=null:t.upload?(t.c.upload.onprogress=null,t.c.onload=null,t.c.onerror=null):e.UA.ie&&!t.e&&t.c.abort()),t=t.c=null},_evt:function(t,r,i){var s=this,o,u=i.arguments,a=s.cfg.emitFacade,f="io:"+t,l="io-trn:"+t;this.detach(l),r.e&&(r.c={status:0,statusText:r.e}),o=[a?{id:r.id,data:r.c,cfg:i,arguments:u}:r.id],a||(t===n[0]||t===n[2]?u&&o.push(u):(r.evt?o.push(r.evt):o.push(r.c),u&&o.push(u))),o.unshift(f),s.fire.apply(s,o),i.on&&(o[0]=l,s.once(l,i.on[t],i.context||e),s.fire.apply(s,o))},start:function(e,t){this._evt(n[0],e,t)},complete:function(e,t){this._evt(n[1],e,t)},end:function(e,t){this._evt(n[2],e,t),this._destroy(e)},success:function(e,t){this._evt(n[3],e,t),this.end(e,t)},failure:function(e,t){this._evt(n[4],e,t),this.end(e,t)},progress:function(e,t,r){e.evt=t,this._evt(n[5],e,r)},load:function(e,t,r){e.evt=t.target,this._evt(n[1],e,r)},error:function(e,t,r){e.evt=t,this._evt(n[4],e,r)},_retry:function(e,t,n){return this._destroy(e),n.xdr.use="flash",this.send(t,n,e.id)},_concat:function(e,t){return e+=(e.indexOf("?")===-1?"?":"&")+t,e},setHeader:function(e,t){t?this._headers[e]=t:delete this._headers[e]},_setHeaders:function(t,n){n=e.merge(this._headers,n),e.Object.each(n,function(e,r){e!=="disable"&&t.setRequestHeader(r,n[r])})},_startTimeout:function(e,t){var n=this;n._timeout[e.id]=setTimeout(function(){n._abort(e,"timeout")},t)},_clearTimeout:function(e){clearTimeout(this._timeout[e]),delete this._timeout[e]},_result:function(e,t){var n;try{n=e.c.status}catch(r){n=0}n>=200&&n<300||n===304||n===1223?this.success(e,t):this.failure(e,t)},_rS:function(e,t){var n=this;e.c.readyState===4&&(t.timeout&&n._clearTimeout(e.id),setTimeout(function(){n.complete(e,t),n._result(e,t)},0))},_abort:function(e,t){e&&e.c&&(e.e=t,e.c.abort())},send:function(t,n,i){var s,o,u,a,f,c,h=this,p=t,d={};n=n?e.Object(n):{},s=h._create(n,i),o=n.method?n.method.toUpperCase():"GET",f=n.sync,c=n.data,e.Lang.isObject(c)&&!c.nodeType&&!s.upload&&e.QueryString&&e.QueryString.stringify&&(n.data=c=e.QueryString.stringify(c));if(n.form){if(n.form.upload)return h.upload(s,t,n);c=h._serialize(n.form,c)}c||(c="");if(c)switch(o){case"GET":case"HEAD":case"DELETE":p=h._concat(p,c),c="";break;case"POST":case"PUT":n.headers=e.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.headers)}if(s.xdr)return h.xdr(p,s,n);if(s.notify)return s.c.send(s,t,n);!f&&!s.upload&&(s.c.onreadystatechange=function(){h._rS(s,n)});try{s.c.open(o,p,!f,n.username||null,n.password||null),h._setHeaders(s.c,n.headers||{}),h.start(s,n),n.xdr&&n.xdr.credentials&&l&&(s.c.withCredentials=!0),s.c.send(c);if(f){for(u=0,a=r.length;u<a;++u)d[r[u]]=s.c[r[u]];return d.getAllResponseHeaders=function(){return s.c.getAllResponseHeaders()},d.getResponseHeader=function(e){return s.c.getResponseHeader(e)},h.complete(s,n),h._result(s,n),d}}catch(v){if(s.xdr)return h._retry(s,t,n);h.complete(s,n),h._result(s,n)}return n.timeout&&h._startTimeout(s,n.timeout),{id:s.id,abort:function(){return s.c?h._abort(s,"abort"):!1},isInProgress:function(){return s.c?s.c.readyState%4:!1},io:h}}},e.io=function(t,n){var r=e.io._map["io:0"]||new o;return r.send.apply(r,[t,n])},e.io.header=function(t,n){var r=e.io._map["io:0"]||new o;r.setHeader(t,n)},e.IO=o,e.io._map={};var u=i&&i.XMLHttpRequest,a=i&&i.XDomainRequest,f=i&&i.ActiveXObject,l=u&&"withCredentials"in new XMLHttpRequest;e.mix(e.IO,{_default:"xhr",defaultTransport:function(t){if(!t){var n={c:e.IO.transports[e.IO._default](),notify:e.IO._default==="xhr"?!1:!0};return n}e.IO._default=t},transports:{xhr:function(){return u?new XMLHttpRequest:f?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return a?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(t){var n={c:e.IO.transports[t]()};return n[t==="xdr"||t==="flash"?"xdr":"notify"]=!0,n}}),e.mix(e.IO.prototype,{notify:function(e,t,n){var r=this;switch(e){case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e},e="failure";default:r[e].apply(r,[t,n])}}})},"@VERSION@",{requires:["event-custom-base","querystring-stringify-simple"]});
YUI.add("io-form",function(e,t){var n=encodeURIComponent;e.IO.stringify=function(t,n){n=n||{};var r=e.IO.prototype._serialize({id:t,useDisabled:n.useDisabled},n.extra&&typeof n.extra=="object"?e.QueryString.stringify(n.extra):n.extra);return r},e.mix(e.IO.prototype,{_serialize:function(t,r){var i=[],s=t.useDisabled||!1,o=0,u=typeof t.id=="string"?t.id:t.id.getAttribute("id"),a,f,l,c,h,p,d,v,m,g;u||(u=e.guid("io:"),t.id.setAttribute("id",u)),f=e.config.doc.getElementById(u);if(!f||!f.elements)return r||"";for(p=0,d=f.elements.length;p<d;++p){a=f.elements[p],h=a.disabled,l=a.name;if(s?l:l&&!h){l=n(l)+"=",c=n(a.value);switch(a.type){case"select-one":a.selectedIndex>-1&&(g=a.options[a.selectedIndex],i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"select-multiple":if(a.selectedIndex>-1)for(v=a.selectedIndex,m=a.options.length;v<m;++v)g=a.options[v],g.selected&&(i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"radio":case"checkbox":a.checked&&(i[o++]=l+c);break;case"file":case undefined:case"reset":case"button":break;case"submit":default:i[o++]=l+c}}}return r&&(i[o++]=r),i.join("&")}},!0)},"@VERSION@",{requires:["io-base","node-base"]});
YUI.add("io-nodejs",function(e,t){e.IO.request||(e.IO.request=require("request").defaults({jar:!1}));var n=require("http").STATUS_CODES,r=function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+": "+e[n])}),t.join("\n")};e.IO.transports.nodejs=function(){return{send:function(t,i,s){s.notify("start",t,s),s.method=s.method||"GET",s.method=s.method.toUpperCase();var o={method:s.method,uri:i};s.data&&(e.Lang.isString(s.data)&&(o.body=s.data),o.body&&o.method==="GET"&&(o.uri+=(o.uri.indexOf("?")>-1?"&":"?")+o.body,o.body="")),s.headers&&(o.headers=s.headers),s.timeout&&(o.timeout=s.timeout),s.request&&e.mix(o,s.request),e.IO.request(o,function(e,i){if(e){t.c=e,s.notify(e.code==="ETIMEDOUT"?"timeout":"failure",t,s);return}i&&(t.c={status:i.statusCode,statusCode:i.statusCode,statusText:n[i.statusCode],headers:i.headers,responseText:i.body||"",responseXML:null,getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return r(this.headers)}}),s.notify("complete",t,s),s.notify(i&&i.statusCode>=200&&i.statusCode<=299?"success":"failure",t,s)});var u={io:t};return u}}},e.IO.defaultTransport("nodejs")},"@VERSION@",{requires:["io-base"]});
YUI.add("io-queue",function(e,t){function r(e,t){return n.queue.apply(n,[e,t])}var n=e.io._map["io:0"]||new e.IO;e.mix(e.IO.prototype,{_q:new e.Queue,_qActiveId:null,_qInit:!1,_qState:1,_qShift:function(){var e=this,t=e._q.next();e._qActiveId=t.id,e._qState=0,e.send(t.uri,t.cfg,t.id)},queue:function(t,n){var r=this,i={uri:t,cfg:n,id:this._id++};return r._qInit||(e.on("io:complete",function(e,t){r._qNext(e)},r),r._qInit=!0),r._q.add(i),r._qState===1&&r._qShift(),i},_qNext:function(e){var t=this;t._qState=1,t._qActiveId===e&&t._q.size()>0&&t._qShift()},qPromote:function(e){this._q.promote(e)},qRemove:function(e){this._q.remove(e)},qEmpty:function(){this._q=new e.Queue},qStart:function(){var e=this;e._qState=1,e._q.size()>0&&e._qShift()},qStop:function(){this._qState=0},qSize:function(){return this._q.size()}},!0),r.start=function(){n.qStart()},r.stop=function(){n.qStop()},r.promote=function(e){n.qPromote(e)},r.remove=function(e){n.qRemove(e)},r.size=function(){n.qSize()},r.empty=function(){n.qEmpty()},e.io.queue=r},"@VERSION@",{requires:["io-base","queue-promote"]});
YUI.add("io-upload-iframe",function(e,t){function u(t,n,r){var i=e.Node.create('<iframe src="#" id="io_iframe'+t.id+'" name="io_iframe'+t.id+'" />');i._node.style.position="absolute",i._node.style.top="-1000px",i._node.style.left="-1000px",e.one("body").appendChild(i),e.on("load",function(){r._uploadComplete(t,n)},"#io_iframe"+t.id)}function a(t){e.Event.purgeElement("#io_iframe"+t,!1),e.one("body").removeChild(e.one("#io_iframe"+t))}var n=e.config.win,r=e.config.doc,i=r.documentMode&&r.documentMode>=8,s=decodeURIComponent,o=e.IO.prototype.end;e.mix(e.IO.prototype,{_addData:function(t,n){e.Lang.isObject(n)&&(n=e.QueryString.stringify(n));var i=[],o=n.split("="),u,a;for(u=0,a=o.length-1;u<a;u++)i[u]=r.createElement("input"),i[u].type="hidden",i[u].name=s(o[u].substring(o[u].lastIndexOf("&")+1)),i[u].value=u+1===a?s(o[u+1]):s(o[u+1].substring(0,o[u+1].lastIndexOf("&"))),t.appendChild(i[u]);return i},_removeData:function(e,t){var n,r;for(n=0,r=t.length;n<r;n++)e.removeChild(t[n])},_setAttrs:function(t,n,r){this._originalFormAttrs={action:t.getAttribute("action"),target:t.getAttribute("target")},t.setAttribute("action",r),t.setAttribute("method","POST"),t.setAttribute("target","io_iframe"+n),t.setAttribute(e.UA.ie&&!i?"encoding":"enctype","multipart/form-data")},_resetAttrs:function(t,n){e.Object.each(n,function(e,n){e?t.setAttribute(n,e):t.removeAttribute(n)})},_startUploadTimeout:function(e,t){var r=this;r._timeout[e.id]=n.setTimeout(function(){e.status=0,e.statusText="timeout",r.complete(e,t),r.end(e,t)},t.timeout)},_clearUploadTimeout:function(e){var t=this;n.clearTimeout(t._timeout[e]),delete t._timeout[e]},_uploadComplete:function(t,r){var i=this,s=e.one("#io_iframe"+t.id).get("contentWindow.document"),o=s.one("body"),u;r.timeout&&i._clearUploadTimeout(t.id);try{o?(u=o.one("pre:first-child"),t.c.responseText=u?u.get("text"):o.get("text")):t.c.responseXML=s._node}catch(f){t.e="upload failure"}i.complete(t,r),i.end(t,r),n.setTimeout(function(){a(t.id)},0)},_upload:function(t,n,i){var s=this,o=typeof i.form.id=="string"?r.getElementById(i.form.id):i.form.id,u;return s._setAttrs(o,t.id,n),i.data&&(u=s._addData(o,i.data)),i.timeout&&s._startUploadTimeout(t,i),o.submit(),s.start(t,i),i.data&&s._removeData(o,u),{id:t.id,abort:function(){t.status=0,t.statusText="abort";if(!e.one("#io_iframe"+t.id))return!1;a(t.id),s.complete(t,i),s.end(t,i)},isInProgress:function(){return e.one("#io_iframe"+t.id)?!0:!1},io:s}},upload:function(e,t,n){return u(e,n,this),this._upload(e,t,n)},end:function(e,t){var n,i;return t&&(n=t.form,n&&n.upload&&(i=this,n=typeof n.id=="string"?r.getElementById(n.id):n.id,n&&i._resetAttrs(n,this._originalFormAttrs))),o.call(this,e,t)}},!0)},"@VERSION@",{requires:["io-base","node-base"]});
YUI.add("io-xdr",function(e,t){function a(e,t,n){}function f(t,n,r){return r==="xml"&&(t.c.responseXML=e.DataType.XML.parse(t.c.responseText)),t}function l(e,t){return e.c.abort(e.id,t)}function c(e){return u?i[e.id]!==4:e.c.isInProgress(e.id)}var n=e.publish("io:xdrReady",{fireOnce:!0}),r={},i={},s=e.config.doc,o=e.config.win,u=o&&o.XDomainRequest;e.mix(e.IO.prototype,{_transport:{},_ieEvt:function(e,t){var n=this,r=e.id,s="timeout";e.c.onprogress=function(){i[r]=3},e.c.onload=function(){i[r]=4,n.xdrResponse("success",e,t)},e.c.onerror=function(){i[r]=4,n.xdrResponse("failure",e,t)},e.c.ontimeout=function(){i[r]=4,n.xdrResponse(s,e,t)},e.c[s]=t[s]||0},xdr:function(e,t,n){var r=this;if(n.xdr.use==="flash")throw new Error("Y.io.xdr: Flash XDR is not supported in this build of YUI.");return u?(r._ieEvt(t,n),t.c.open(n.method||"GET",e),setTimeout(function(){t.c.send(n.data)},0)):t.c.send(e,t,n),{id:t.id,abort:function(){return t.c?l(t,n):!1},isInProgress:function(){return t.c?c(t.id):!1},io:r}},xdrResponse:function(e,t,n){n=r[t.id]?r[t.id]:n;var s=this,o=u?i:r,a=n.xdr.use,l=n.xdr.dataType;switch(e){case"start":s.start(t,n);break;case"success":s.success(f(t,a,l),n),delete o[t.id];break;case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e};case"failure":s.failure(f(t,a,l),n),delete o[t.id]}},_xdrReady:function(t,r){e.fire(n,t,r)},transport:function(e){if(e.id==="flash")throw new Error("Y.io.xdr: Flash XDR is not supported in this build of YUI.")}}),e.io.xdrReady=function(t,n){var r=e.io._map[n];e.io.xdr.delay=0,r._xdrReady.apply(r,[t,n])},e.io.xdrResponse=function(t,n,r){var i=e.io._map[n.uid];i.xdrResponse.apply(i,[t,n,r])},e.io.transport=function(t){var n=e.io._map["io:0"]||new e.IO;t.uid=n._uid,n.transport.apply(n,[t])},e.io.xdr={delay:100}},"@VERSION@",{requires:["io-base","datatype-xml-parse"]});
YUI.add("json-parse",function(e,t){var n=e.config.global.JSON;e.namespace("JSON").parse=function(e,t,r){return n.parse(typeof e=="string"?e:e+"",t,r)}},"@VERSION@",{requires:["yui-base"]});
YUI.add("json-stringify",function(e,t){var n=":",r=e.config.global.JSON;e.mix(e.namespace("JSON"),{dateToString:function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+n+t(e.getUTCMinutes())+n+t(e.getUTCSeconds())+"Z"},stringify:function(){return r.stringify.apply(r,arguments)},charCacheThreshold:100})},"@VERSION@",{requires:["yui-base"]});
YUI.add("jsonp",function(e,t){function r(){this._init.apply(this,arguments)}var n=e.Lang.isFunction;r.prototype={_init:function(t,r){this.url=t,this._requests={},this._timeouts={},r=n(r)?{on:{success:r}}:r||{};var i=r.on||{};i.success||(i.success=this._defaultCallback(t,r)),this._config=e.merge({context:this,args:[],format:this._format,allowCache:!1},r,{on:i})},_defaultCallback:function(){},send:function(){function u(e,r){return n(e)?function(n){var o=!0,u="_requests";r?(++t._timeouts[s],--t._requests[s]):(t._requests[s]||(o=!1,u="_timeouts"),--t[u][s]),!t._requests[s]&&!t._timeouts[s]&&delete YUI.Env.JSONP[s],o&&e.apply(i.context,[n].concat(i.args))}:null}var t=this,r=e.Array(arguments,0,!0),i=t._config,s=t._proxy||e.guid(),o;return i.allowCache&&(t._proxy=s),t._requests[s]===undefined&&(t._requests[s]=0),t._timeouts[s]===undefined&&(t._timeouts[s]=0),t._requests[s]++,r.unshift(t.url,"YUI.Env.JSONP."+s),o=i.format.apply(t,r),i.on.success?(YUI.Env.JSONP[s]=u(i.on.success),e.Get.js(o,{onFailure:u(i.on.failure),onTimeout:u(i.on.timeout,!0),timeout:i.timeout,charset:i.charset,attributes:i.attributes,async:i.async}).execute(),t):t},_format:function(e,t){return e.replace(/\{callback\}/,t)}},e.JSONPRequest=r,e.jsonp=function(t,n){var r=new e.JSONPRequest(t,n);return r.send.apply(r,e.Array(arguments,2,!0))},YUI.Env.JSONP||(YUI.Env.JSONP={})},"@VERSION@",{requires:["get","oop"]});
YUI.add("model-list",function(e,t){function c(){c.superclass.constructor.apply(this,arguments)}var n=e.Attribute.prototype,r=e.Lang,i=e.Array,s="add",o="create",u="error",a="load",f="remove",l="reset";e.ModelList=e.extend(c,e.Base,{model:e.Model,_isYUIModelList:!0,initializer:function(t){t||(t={});var n=this.model=t.model||this.model;typeof n=="string"&&(this.model=e.Object.getValue(e,n.split(".")),this.model||e.error("ModelList: Model class not found: "+n)),this.publish(s,{defaultFn:this._defAddFn}),this.publish(l,{defaultFn:this._defResetFn}),this.publish(f,{defaultFn:this._defRemoveFn}),this.after("*:idChange",this._afterIdChange),this._clear(),t.items&&this.add(t.items,{silent:!0})},destructor:function(){this._clear()},add:function(t,n){var s=t._isYUIModelList;return s||r.isArray(t)?i.map(s?t.toArray():t,function(t,r){var i=n||{};return"index"in i&&(i=e.merge(i,{index:i.index+r})),this._add(t,i)},this):this._add(t,n)},create:function(t,n,r){var i=this;return typeof n=="function"&&(r=n,n={}),n||(n={}),t._isYUIModel||(t=new this.model(t)),i.fire(o,e.merge(n,{model:t})),t.save(n,function(e){e||i.add(t,n),r&&r.apply(null,arguments)})},each:function(e,t){var n=this._items.concat(),r,i,s;for(r=0,s=n.length;r<s;r++)i=n[r],e.call(t||i,i,r,this);return this},filter:function(e,t){var n=[],r=this._items,i,s,o,u;typeof e=="function"&&(t=e,e={});for(i=0,o=r.length;i<o;++i)s=r[i],t.call(this,s,i,this)&&n.push(s);return e.asList?(u=new this.constructor({model:this.model}),n.length&&u.add(n,{silent:!0}),u):n},get:function(e){return this.attrAdded(e)?n.get.apply(this,arguments):this.invoke("get",e)},getAsHTML:function(t){return this.attrAdded(t)?e.Escape.html(n.get.apply(this,arguments)):this.invoke("getAsHTML",t)},getAsURL:function(e){return this.attrAdded(e)?encodeURIComponent(n.get.apply(this,arguments)):this.invoke("getAsURL",e)},getByClientId:function(e){return this._clientIdMap[e]||null},getById:function(e){return this._idMap[e]||null},invoke:function(e){var t=[this._items,e].concat(i(arguments,1,!0));return i.invoke.apply(i,t)},load:function(e,t){var n=this;return typeof e=="function"&&(t=e,e={}),e||(e={}),this.sync("read",e,function(r,i){var s={options:e,response:i},o;r?(s.error=r,s.src="load",n.fire(u,s)):(n._loadEvent||(n._loadEvent=n.publish(a,{preventable:!1})),o=s.parsed=n._parse(i),n.reset(o,e),n.fire(a,s)),t&&t.apply(null,arguments)}),this},map:function(e,t){return i.map(this._items,e,t)},parse:function(t){if(typeof t=="string")try{return e.JSON.parse(t)||[]}catch(n){return this.fire(u,{error:n,response:t,src:"parse"}),null}return t||[]},remove:function(e,t){var n=e._isYUIModelList;return n||r.isArray(e)?(e=i.map(n?e.toArray():e,function(e){return r.isNumber(e)?this.item(e):e},this),i.map(e,function(e){return this._remove(e,t)},this)):this._remove(e,t)},reset:function(t,n){t||(t=[]),n||(n={});var r=e.merge({src:"reset"},n);return t._isYUIModelList?t=t.toArray():t=i.map(t,function(e){return e._isYUIModel?e:new this.model(e)},this),r.models=t,n.silent?this._defResetFn(r):(this.comparator&&t.sort(e.bind(this._sort,this)),this.fire(l,r)),this},some:function(e,t){var n=this._items.concat(),r,i,s;for(r=0,s=n.length;r<s;r++){i=n[r];if(e.call(t||i,i,r,this))return!0}return!1},sort:function(t){if(!this.comparator)return this;var n=this._items.concat(),r;return t||(t={}),n.sort(e.rbind(this._sort,this,t)),r=e.merge(t,{models:n,src:"sort"}),t.silent?this._defResetFn(r):this.fire(l,r),this},sync:function(){var e=i(arguments,0,!0).pop();typeof e=="function"&&e()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(e){return e.toJSON()})},_add:function(t,n){var i,o;n||(n={}),t._isYUIModel||(t=new this.model(t)),o=t.get("id");if(this._clientIdMap[t.get("clientId")]||r.isValue(o)&&this._idMap[o]){this.fire(u,{error:"Model is already in the list.",model:t,src:"add"});return}return i=e.merge(n,{index:"index"in n?n.index:this._findIndex(t),model:t}),n.silent?this._defAddFn(i):this.fire(s,i),t},_attachList:function(e){e.lists.push(this),e.addTarget(this)},_clear:function(){i.each(this._items,this._detachList,this),this._clientIdMap={},this._idMap={},this._items=[]},_compare:function(e,t){return e<t?-1:e>t?1:0},_detachList:function(e){var t=i.indexOf(e.lists,this);t>-1&&(e.lists.splice(t,1),e.removeTarget(this))},_findIndex:function(e){var t=this._items,n=t.length,r=0,i,s,o;if(!this.comparator||!n)return n;o=this.comparator(e);while(r<n)s=r+n>>1,i=t[s],this._compare(this.comparator(i),o)<0?r=s+1:n=s;return r},_parse:function(e){return this.parse(e)},_remove:function(t,n){var i,s;n||(n={}),r.isNumber(t)?(i=t,t=this.item(i)):i=this.indexOf(t);if(i===-1||!t){this.fire(u,{error:"Model is not in the list.",index:i,model:t,src:"remove"});return}return s=e.merge(n,{index:i,model:t}),n.silent?this._defRemoveFn(s):this.fire(f,s),t},_sort:function(e,t,n){var r=this._compare(this.comparator(e),this.comparator(t));return r===0?r:n&&n.descending?-r:r},_afterIdChange:function(e){var t=e.newVal,n=e.prevVal,i=e.target;if(r.isValue(n)){if(this._idMap[n]!==i)return;delete this._idMap[n]}else if(this.indexOf(i)===-1)return;r.isValue(t)&&(this._idMap[t]=i)},_defAddFn:function(e){var t=e.model,n=t.get("id");this._clientIdMap[t.get("clientId")]=t,r.isValue(n)&&(this._idMap[n]=t),this._attachList(t),this._items.splice(e.index,0,t)},_defRemoveFn:function(e){var t=e.model,n=t.get("id");this._detachList(t),delete this._clientIdMap[t.get("clientId")],r.isValue(n)&&delete this._idMap[n],this._items.splice(e.index,1)},_defResetFn:function(e){if(e.src==="sort"){this._items=e.models.concat();return}this._clear(),e.models.length&&this.add(e.models,{silent:!0})}},{NAME:"modelList"}),e.augment(c,e.ArrayList)},"@VERSION@",{requires:["array-extras","array-invoke","arraylist","base-build","escape","json-parse","model"]});
YUI.add("model",function(e,t){function l(){l.superclass.constructor.apply(this,arguments)}var n=YUI.namespace("Env.Model"),r=e.Lang,i=e.Array,s=e.Object,o="change",u="error",a="load",f="save";e.Model=e.extend(l,e.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(e){this.changed={},this.lastChange={},this.lists=[]},destroy:function(e,t){var n=this;return typeof e=="function"&&(t=e,e=null),n.onceAfter("destroy",function(){function r(r){r||i.each(n.lists.concat(),function(t){t.remove(n,e)}),t&&t.apply(null,arguments)}e&&(e.remove||e["delete"])?n.sync("delete",e,r):r()}),l.superclass.destroy.call(n)},generateClientId:function(){return n.lastId||(n.lastId=0),this.constructor.NAME+"_"+(n.lastId+=1)},getAsHTML:function(t){var n=this.get(t);return e.Escape.html(r.isValue(n)?String(n):"")},getAsURL:function(e){var t=this.get(e);return encodeURIComponent(r.isValue(t)?String(t):"")},isModified:function(){return this.isNew()||!s.isEmpty(this.changed)},isNew:function(){return!r.isValue(this.get("id"))},load:function(e,t){var n=this;return typeof e=="function"&&(t=e,e={}),e||(e={}),n.sync("read",e,function(r,i){var s={options:e,response:i},o;r?(s.error=r,s.src="load",n.fire(u,s)):(n._loadEvent||(n._loadEvent=n.publish(a,{preventable:!1})),o=s.parsed=n._parse(i),n.setAttrs(o,e),n.changed={},n.fire(a,s)),t&&t.apply(null,arguments)}),n},parse:function(t){if(typeof t=="string")try{return e.JSON.parse(t)}catch(n){return this.fire(u,{error:n,response:t,src:"parse"}),null}return t},save:function(e,t){var n=this;return typeof e=="function"&&(t=e,e={}),e||(e={}),n._validate(n.toJSON(),function(r){if(r){t&&t.call(null,r);return}n.sync(n.isNew()?"create":"update",e,function(r,i){var s={options:e,response:i},o;r?(s.error=r,s.src="save",n.fire(u,s)):(n._saveEvent||(n._saveEvent=n.publish(f,{preventable:!1})),i&&(o=s.parsed=n._parse(i),n.setAttrs(o,e)),n.changed={},n.fire(f,s)),t&&t.apply(null,arguments)})}),n},set:function(e,t,n){var r={};return r[e]=t,this.setAttrs(r,n)},setAttrs:function(t,n){var r=this.idAttribute,i,u,a,f,l;n=e.merge(n),l=n._transaction={},r!=="id"&&(t=e.merge(t),s.owns(t,r)?t.id=t[r]:s.owns(t,"id")&&(t[r]=t.id));for(a in t)s.owns(t,a)&&this._setAttr(a,t[a],n);if(!s.isEmpty(l)){i=this.changed,f=this.lastChange={};for(a in l)s.owns(l,a)&&(u=l[a],i[a]=u.newVal,f[a]={newVal:u.newVal,prevVal:u.prevVal,src:u.src||null});n.silent||(this._changeEvent||(this._changeEvent=this.publish(o,{preventable:!1})),n.changed=f,this.fire(o,n))}return this},sync:function(){var e=i(arguments,0,!0).pop();typeof e=="function"&&e()},toJSON:function(){var e=this.getAttrs();return delete e.clientId,delete e.destroyed,delete e.initialized,this.idAttribute!=="id"&&delete e.id,e},undo:function(e,t){var n=this.lastChange,r=this.idAttribute,o={},u;return e||(e=s.keys(n)),i.each(e,function(e){s.owns(n,e)&&(e=e===r?"id":e,u=!0,o[e]=n[e].prevVal)}),u?this.setAttrs(o,t):this},validate:function(e,t){t&&t()},addAttr:function(e,t,n){var i=this.idAttribute,s,o;return i&&e===i&&(s=this._isLazyAttr("id")||this._getAttrCfg("id"),o=t.value===t.defaultValue?null:t.value,r.isValue(o)||(o=s.value===s.defaultValue?null:s.value,r.isValue(o)||(o=r.isValue(t.defaultValue)?t.defaultValue:s.defaultValue)),t.value=o,s.value!==o&&(s.value=o,this._isLazyAttr("id")?this._state.add("id","lazy",s):this._state.add("id","value",o))),l.superclass.addAttr.apply(this,arguments)},_parse:function(e){return this.parse(e)},_validate:function(e,t){function i(i){if(r.isValue(i)){n.fire(u,{attributes:e,error:i,src:"validate"}),t(i);return}t()}var n=this;n.validate.length===1?i(n.validate(e,i)):n.validate(e,i)},_setAttrVal:function(e,t,n,r,i,s){var o=l.superclass._setAttrVal.apply(this,arguments),u=i&&i._transaction,a=s&&s.initializing;return o&&u&&!a&&(u[e]={newVal:this.get(e),prevVal:n,src:i.src||null}),o}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"@VERSION@",{requires:["base-build","escape","json-parse"]});
YUI.add("node-base",function(e,t){var n=["hasClass","addClass","removeClass","replaceClass","toggleClass"];e.Node.importMethod(e.DOM,n),e.NodeList.importMethod(e.Node.prototype,n);var r=e.Node,i=e.DOM;r.create=function(t,n){return n&&n._node&&(n=n._node),e.one(i.create(t,n))},e.mix(r.prototype,{create:r.create,insert:function(e,t){return this._insert(e,t),this},_insert:function(e,t){var n=this._node,r=null;return typeof t=="number"?t=this._node.childNodes[t]:t&&t._node&&(t=t._node),e&&typeof e!="string"&&(e=e._node||e._nodes||e),r=i.addHTML(n,e,t),r},prepend:function(e){return this.insert(e,0)},append:function(e){return this.insert(e,null)},appendChild:function(e){return r.scrubVal(this._insert(e))},insertBefore:function(t,n){return e.Node.scrubVal(this._insert(t,n))},appendTo:function(t){return e.one(t).append(this),this},setContent:function(e){return this._insert(e,"replace"),this},getContent:function(){var e=this;return e._node.nodeType===11&&(e=e.create("<div/>").append(e.cloneNode(!0))),e.get("innerHTML")}}),e.Node.prototype.setHTML=e.Node.prototype.setContent,e.Node.prototype.getHTML=e.Node.prototype.getContent,e.NodeList.importMethod(e.Node.prototype,["append","insert","appendChild","insertBefore","prepend","setContent","getContent","setHTML","getHTML"]);var r=e.Node,i=e.DOM;r.ATTRS={text:{getter:function(){return i.getText(this._node)},setter:function(e){return i.setText(this._node,e),e}},"for":{getter:function(){return i.getAttribute(this._node,"for")},setter:function(e){return i.setAttribute(this._node,"for",e),e}},options:{getter:function(){return this._node.getElementsByTagName("option")}},children:{getter:function(){var t=this._node,n=t.children,r,i,s;if(!n){r=t.childNodes,n=[];for(i=0,s=r.length;i<s;++i)r[i].tagName&&(n[n.length]=r[i])}return e.all(n)}},value:{getter:function(){return i.getValue(this._node)},setter:function(e){return i.setValue(this._node,e),e}}},e.Node.importMethod(e.DOM,["setAttribute","getAttribute"]);var r=e.Node,s=e.NodeList;r.DOM_EVENTS={abort:1,beforeunload:1,blur:1,change:1,click:1,close:1,command:1,contextmenu:1,copy:1,cut:1,dblclick:1,DOMMouseScroll:1,drag:1,dragstart:1,dragenter:1,dragover:1,dragleave:1,dragend:1,drop:1,error:1,focus:1,key:1,keydown:1,keypress:1,keyup:1,load:1,message:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mousemultiwheel:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,orientationchange:1,paste:1,reset:1,resize:1,select:1,selectstart:1,submit:1,scroll:1,textInput:1,unload:1},e.mix(r.DOM_EVENTS,e.Env.evt.plugins),e.augment(r,e.EventTarget),e.mix(r.prototype,{purge:function(t,n){return e.Event.purgeElement(this._node,t,n),this}}),e.mix(e.NodeList.prototype,{_prepEvtArgs:function(t,n,r){var i=e.Array(arguments,0,!0);return i.length<2?i[2]=this._nodes:i.splice(2,0,this._nodes),i[3]=r||this,i},on:function(t,n,r){return e.on.apply(e,this._prepEvtArgs.apply(this,arguments))},once:function(t,n,r){return e.once.apply(e,this._prepEvtArgs.apply(this,arguments))},after:function(t,n,r){return e.after.apply(e,this._prepEvtArgs.apply(this,arguments))},onceAfter:function(t,n,r){return e.onceAfter.apply(e,this._prepEvtArgs.apply(this,arguments))}}),s.importMethod(e.Node.prototype,["detach","detachAll"]),e.mix(e.Node.ATTRS,{offsetHeight:{setter:function(t){return e.DOM.setHeight(this._node,t),t},getter:function(){return this._node.offsetHeight}},offsetWidth:{setter:function(t){return e.DOM.setWidth(this._node,t),t},getter:function(){return this._node.offsetWidth}}}),e.mix(e.Node.prototype,{sizeTo:function(t,n){var r;arguments.length<2&&(r=e.one(t),t=r.get("offsetWidth"),n=r.get("offsetHeight")),this.setAttrs({offsetWidth:t,offsetHeight:n})}}),e.config.doc.documentElement.hasAttribute||(e.Node.prototype.hasAttribute=function(e){return e==="value"&&this.get("value")!==""?!0:!!this._node.attributes[e]&&!!this._node.attributes[e].specified}),e.Node.prototype.focus=function(){try{this._node.focus()}catch(e){}return this},e.Node.ATTRS.type={setter:function(e){if(e==="hidden")try{this._node.type="hidden"}catch(t){this._node.style.display="none",this._inputType="hidden"}else try{this._node.type=e}catch(t){}return e},getter:function(){return this._inputType||this._node.type},_bypassProxy:!0},e.config.doc.createElement("form").elements.nodeType&&(e.Node.ATTRS.elements={getter:function(){return this.all("input, textarea, button, select")}}),e.mix(e.Node.prototype,{_initData:function(){"_data"in this||(this._data={})},getData:function(t){this._initData();var n=this._data,r=n;return arguments.length?t in n?r=n[t]:r=this._getDataAttribute(t):typeof n=="object"&&n!==null&&(r={},e.Object.each(n,function(e,t){r[t]=e}),r=this._getDataAttributes(r)),r},_getDataAttributes:function(e){e=e||{};var t=0,n=this._node.attributes,r=n.length,i=this.DATA_PREFIX,s=i.length,o;while(t<r)o=n[t].name,o.indexOf(i)===0&&(o=o.substr(s),o in e||(e[o]=this._getDataAttribute(o))),t+=1;return e},_getDataAttribute:function(e){e=this.DATA_PREFIX+e;var t=this._node,n=t.attributes,r=n&&n[e]&&n[e].value;return r},setData:function(e,t){return this._initData(),arguments.length>1?this._data[e]=t:this._data=e,this},clearData:function(e){return"_data"in this&&(typeof e!="undefined"?delete this._data[e]:delete this._data),this}}),e.mix(e.NodeList.prototype,{getData:function(e){var t=arguments.length?[e]:[];return this._invoke("getData",t,!0)},setData:function(e,t){var n=arguments.length>1?[e,t]:[e];return this._invoke("setData",n)},clearData:function(e){var t=arguments.length?[e]:[];return this._invoke("clearData",[e])}})},"@VERSION@",{requires:["event-base","node-core","dom-base","dom-style"]});
YUI.add("node-core",function(e,t){var n=".",r="nodeName",i="nodeType",s="ownerDocument",o="tagName",u="_yuid",a={},f=Array.prototype.slice,l=e.DOM,c=function(t){if(!this.getDOMNode)return new c(t);if(typeof t=="string"){t=c._fromString(t);if(!t)return null}var n=t.nodeType!==9?t.uniqueID:t[u];n&&c._instances[n]&&c._instances[n]._node!==t&&(t[u]=null),n=n||e.stamp(t),n||(n=e.guid()),this[u]=n,this._node=t,this._stateProxy=t,this._initPlugins&&this._initPlugins()},h=function(t){var n=null;return t&&(n=typeof t=="string"?function(n){return e.Selector.test(n,t)}:function(n){return t(e.one(n))}),n};c.ATTRS={},c.DOM_EVENTS={},c._fromString=function(t){return t&&(t.indexOf("doc")===0?t=e.config.doc:t.indexOf("win")===0?t=e.config.win:t=e.Selector.query(t,null,!0)),t||null},c.NAME="node",c.re_aria=/^(?:role$|aria-)/,c.SHOW_TRANSITION="fadeIn",c.HIDE_TRANSITION="fadeOut",c._instances={},c.getDOMNode=function(e){return e?e.nodeType?e:e._node||null:null},c.scrubVal=function(t,n){if(t){if(typeof t=="object"||typeof t=="function")if(i in t||l.isWindow(t))t=e.one(t);else if(t.item&&!t._nodes||t[0]&&t[0][i])t=e.all(t)}else typeof t=="undefined"?t=n:t===null&&(t=null);return t},c.addMethod=function(e,t,n){e&&t&&typeof t=="function"&&(c.prototype[e]=function(){var e=f.call(arguments),r=this,i;return e[0]&&e[0]._node&&(e[0]=e[0]._node),e[1]&&e[1]._node&&(e[1]=e[1]._node),e.unshift(r._node),i=t.apply(n||r,e),i&&(i=c.scrubVal(i,r)),typeof i!="undefined"||(i=r),i})},c.importMethod=function(t,n,r){typeof n=="string"?(r=r||n,c.addMethod(r,t[n],t)):e.Array.each(n,function(e){c.importMethod(t,e)})},c.one=function(t){var n=null,r,i;if(t){if(typeof t=="string"){t=c._fromString(t);if(!t)return null}else if(t.getDOMNode&&!t._reactInternalComponent)return t;if(t.nodeType||e.DOM.isWindow(t)){i=t.uniqueID&&t.nodeType!==9?t.uniqueID:t._yuid,n=c._instances[i],r=n?n._node:null;if(!n||r&&t!==r)n=new c(t),t.nodeType!=11&&(c._instances[n[u]]=n)}}return n},c.DEFAULT_SETTER=function(t,r){var i=this._stateProxy,s;return t.indexOf(n)>-1?(s=t,t=t.split(n),e.Object.setValue(i,t,r)):typeof i[t]!="undefined"&&(i[t]=r),r},c.DEFAULT_GETTER=function(t){var r=this._stateProxy,i;return t.indexOf&&t.indexOf(n)>-1?i=e.Object.getValue(r,t.split(n)):typeof r[t]!="undefined"&&(i=r[t]),i},e.mix(c.prototype,{DATA_PREFIX:"data-",toString:function(){var e=this[u]+": not bound to a node",t=this._node,n,i,s;return t&&(n=t.attributes,i=n&&n.id?t.getAttribute("id"):null,s=n&&n.className?t.getAttribute("className"):null,e=t[r],i&&(e+="#"+i),s&&(e+="."+s.replace(" ",".")),e+=" "+this[u]),e},get:function(e){var t;return this._getAttr?t=this._getAttr(e):t=this._get(e),t?t=c.scrubVal(t,this):t===null&&(t=null),t},_get:function(e){var t=c.ATTRS[e],n;return t&&t.getter?n=t.getter.call(this):c.re_aria.test(e)?n=this._node.getAttribute(e,2):n=c.DEFAULT_GETTER.apply(this,arguments),n},set:function(e,t){var n=c.ATTRS[e];return this._setAttr?this._setAttr.apply(this,arguments):n&&n.setter?n.setter.call(this,t,e):c.re_aria.test(e)?this._node.setAttribute(e,t):c.DEFAULT_SETTER.apply(this,arguments),this},setAttrs:function(t){return this._setAttrs?this._setAttrs(t):e.Object.each(t,function(e,t){this.set(t,e)},this),this},getAttrs:function(t){var n={};return this._getAttrs?this._getAttrs(t):e.Array.each(t,function(e,t){n[e]=this.get(e)},this),n},compareTo:function(e){var t=this._node;return e&&e._node&&(e=e._node),t===e},inDoc:function(e){var t=this._node;if(t){e=e?e._node||e:t[s];if(e.documentElement)return l.contains(e.documentElement,t)}return!1},getById:function(t){var n=this._node,r=l.byId(t,n[s]);return r&&l.contains(n,r)?r=e.one(r):r=null,r},ancestor:function(t,n,r){return arguments.length===2&&(typeof n=="string"||typeof n=="function")&&(r=n),e.one(l.ancestor(this._node,h(t),n,h(r)))},ancestors:function(t,n,r){return arguments.length===2&&(typeof n=="string"||typeof n=="function")&&(r=n),e.all(l.ancestors(this._node,h(t),n,h(r)))},previous:function(t,n){return e.one(l.elementByAxis(this._node,"previousSibling",h(t),n))},next:function(t,n){return e.one(l.elementByAxis(this._node,"nextSibling",h(t),n))},siblings:function(t){return e.all(l.siblings(this._node,h(t)))},one:function(t){return e.one(e.Selector.query(t,this._node,!0))},all:function(t){var n;return this._node&&(n=e.all(e.Selector.query(t,this._node)),n._query=t,n._queryRoot=this._node),n||e.all([])},test:function(t){return e.Selector.test(this._node,t)},remove:function(e){var t=this._node;return t&&t.parentNode&&t.parentNode.removeChild(t),e&&this.destroy(),this},replace:function(e){var t=this._node;return typeof e=="string"&&(e=c.create(e)),t.parentNode.replaceChild(c.getDOMNode(e),t),this},replaceChild:function(t,n){return typeof t=="string"&&(t=l.create(t)),e.one(this._node.replaceChild(c.getDOMNode(t),c.getDOMNode(n)))},destroy:function(t){var n=e.config.doc.uniqueID?"uniqueID":"_yuid",r;this.purge(),this.unplug&&this.unplug(),this.clearData(),t&&e.NodeList.each(this.all("*"),function(t){r=c._instances[t[n]],r?r.destroy():e.Event.purgeElement(t)}),this._node=null,this._stateProxy=null,delete c._instances[this._yuid]},invoke:function(e,t,n,r,i,s){var o=this._node,u;return t&&t._node&&(t=t._node),n&&n._node&&(n=n._node),u=o[e](t,n,r,i,s),c.scrubVal(u,this)},swap:e.config.doc.documentElement.swapNode?function(e){this._node.swapNode(c.getDOMNode(e))}:function(e){e=c.getDOMNode(e);var t=this._node,n=e.parentNode,r=e.nextSibling;return r===t?n.insertBefore(t,e):e===t.nextSibling?n.insertBefore(e,t):(t.parentNode.replaceChild(e,t),l.addHTML(n,t,r)),this},hasMethod:function(e){var t=this._node;return!(!(t&&e in t&&typeof t[e]!="unknown")||typeof t[e]!="function"&&String(t[e]).indexOf("function")!==1)},isFragment:function(){return this.get("nodeType")===11},empty:function(){return this.get("childNodes").remove().destroy(!0),this},getDOMNode:function(){return this._node}},!0),e.Node=c,e.one=c.one;var p=function(t){var n=[];t&&(typeof t=="string"?(this._query=t,t=e.Selector.query(t)):t.nodeType||l.isWindow(t
)?t=[t]:t._node?t=[t._node]:t[0]&&t[0]._node?(e.Array.each(t,function(e){e._node&&n.push(e._node)}),t=n):t=e.Array(t,0,!0)),this._nodes=t||[]};p.NAME="NodeList",p.getDOMNodes=function(e){return e&&e._nodes?e._nodes:e},p.each=function(t,n,r){var i=t._nodes;i&&i.length&&e.Array.each(i,n,r||t)},p.addMethod=function(t,n,r){t&&n&&(p.prototype[t]=function(){var t=[],i=arguments;return e.Array.each(this._nodes,function(s){var o=s.uniqueID&&s.nodeType!==9?"uniqueID":"_yuid",u=e.Node._instances[s[o]],a,f;u||(u=p._getTempNode(s)),a=r||u,f=n.apply(a,i),f!==undefined&&f!==u&&(t[t.length]=f)}),t.length?t:this})},p.importMethod=function(t,n,r){typeof n=="string"?(r=r||n,p.addMethod(n,t[n])):e.Array.each(n,function(e){p.importMethod(t,e)})},p._getTempNode=function(t){var n=p._tempNode;return n||(n=e.Node.create("<div></div>"),p._tempNode=n),n._node=t,n._stateProxy=t,n},e.mix(p.prototype,{_invoke:function(e,t,n){var r=n?[]:this;return this.each(function(i){var s=i[e].apply(i,t);n&&r.push(s)}),r},item:function(t){return e.one((this._nodes||[])[t])},each:function(t,n){var r=this;return e.Array.each(this._nodes,function(i,s){return i=e.one(i),t.call(n||i,i,s,r)}),r},batch:function(t,n){var r=this;return e.Array.each(this._nodes,function(i,s){var o=e.Node._instances[i[u]];return o||(o=p._getTempNode(i)),t.call(n||o,o,s,r)}),r},some:function(t,n){var r=this;return e.Array.some(this._nodes,function(i,s){return i=e.one(i),n=n||i,t.call(n,i,s,r)})},toFrag:function(){return e.one(e.DOM._nl2frag(this._nodes))},indexOf:function(t){return e.Array.indexOf(this._nodes,e.Node.getDOMNode(t))},filter:function(t){return e.all(e.Selector.filter(this._nodes,t))},modulus:function(t,n){n=n||0;var r=[];return p.each(this,function(e,i){i%t===n&&r.push(e)}),e.all(r)},odd:function(){return this.modulus(2,1)},even:function(){return this.modulus(2)},destructor:function(){},refresh:function(){var t,n=this._nodes,r=this._query,i=this._queryRoot;return r&&(i||n&&n[0]&&n[0].ownerDocument&&(i=n[0].ownerDocument),this._nodes=e.Selector.query(r,i)),this},size:function(){return this._nodes.length},isEmpty:function(){return this._nodes.length<1},toString:function(){var e="",t=this[u]+": not bound to any nodes",n=this._nodes,i;return n&&n[0]&&(i=n[0],e+=i[r],i.id&&(e+="#"+i.id),i.className&&(e+="."+i.className.replace(" ",".")),n.length>1&&(e+="...["+n.length+" items]")),e||t},getDOMNodes:function(){return this._nodes}},!0),p.importMethod(e.Node.prototype,["destroy","empty","remove","set"]),p.prototype.get=function(t){var n=[],r=this._nodes,i=!1,s=p._getTempNode,o,u;return r[0]&&(o=e.Node._instances[r[0]._yuid]||s(r[0]),u=o._get(t),u&&u.nodeType&&(i=!0)),e.Array.each(r,function(r){o=e.Node._instances[r._yuid],o||(o=s(r)),u=o._get(t),i||(u=e.Node.scrubVal(u,o)),n.push(u)}),i?e.all(n):n},e.NodeList=p,e.all=function(e){return new p(e)},e.Node.all=e.all;var d=e.NodeList,v=Array.prototype,m={concat:1,pop:0,push:0,shift:0,slice:1,splice:1,unshift:0};e.Object.each(m,function(t,n){d.prototype[n]=function(){var r=[],i=0,s,o;while(typeof (s=arguments[i++])!="undefined")r.push(s._node||s._nodes||s);return o=v[n].apply(this._nodes,r),t?o=e.all(o):o=e.Node.scrubVal(o),o}}),e.Array.each(["removeChild","hasChildNodes","cloneNode","hasAttribute","scrollIntoView","getElementsByTagName","focus","blur","submit","reset","select","createCaption"],function(t){e.Node.prototype[t]=function(e,n,r){var i=this.invoke(t,e,n,r);return i}}),e.Node.prototype.removeAttribute=function(e){var t=this._node;return t&&t.removeAttribute(e,0),this},e.Node.importMethod(e.DOM,["contains","setAttribute","getAttribute","wrap","unwrap","generateID"]),e.NodeList.importMethod(e.Node.prototype,["getAttribute","setAttribute","removeAttribute","unwrap","wrap","generateID"])},"@VERSION@",{requires:["dom-core","selector"]});
YUI.add("node-event-delegate",function(e,t){e.Node.prototype.delegate=function(t){var n=e.Array(arguments,0,!0),r=e.Lang.isObject(t)&&!e.Lang.isArray(t)?1:2;return n.splice(r,0,this._node),e.delegate.apply(e,n)}},"@VERSION@",{requires:["node-base","event-delegate"]});
YUI.add("node-event-simulate",function(e,t){e.Node.prototype.simulate=function(t,n){e.Event.simulate(e.Node.getDOMNode(this),t,n)},e.Node.prototype.simulateGesture=function(t,n,r){e.Event.simulateGesture(this,t,n,r)}},"@VERSION@",{requires:["node-base","event-simulate","gesture-simulate"]});
YUI.add("node-focusmanager",function(e,t){var n="activeDescendant",r="id",i="disabled",s="tabIndex",o="focused",u="focusClass",a="circular",f="UI",l="key",c=n+"Change",h="host",p={37:!0,38:!0,39:!0,40:!0},d={a:!0,button:!0,input:!0,object:!0},v=e.Lang,m=e.UA,g=function(){g.superclass.constructor.apply(this,arguments)};g.ATTRS={focused:{value:!1,readOnly:!0},descendants:{getter:function(e){return this.get(h).all(e)}},activeDescendant:{setter:function(t){var n=v.isNumber,i=e.Attribute.INVALID_VALUE,s=this._descendantsMap,o=this._descendants,u,a,f;return n(t)?(u=t,a=u):t instanceof e.Node&&s?(u=s[t.get(r)],n(u)?a=u:a=i):a=i,o&&(f=o.item(u),f&&f.get("disabled")&&(a=i)),a}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}},e.extend(g,e.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var t=this.get("descendants"),o={},u=-1,a,f=this.get(n),l,c,h=0;v.isUndefined(f)&&(f=-1);if(t){a=t.size();for(h=0;h<a;h++)l=t.item(h),u===-1&&!l.get(i)&&(u=h),f<0&&parseInt(l.getAttribute(s,2),10)===0&&(f=h),l&&l.set(s,-1),c=l.get(r),c||(c=e.guid(),l.set(r,c)),o[c]=h;f<0&&(f=0),l=t.item(f);if(!l||l.get(i))l=t.item(u),f=u;this._lastNodeIndex=a-1,this._descendants=t,this._descendantsMap=o,this.set(n,f),l&&l.set(s,0)}},_isDescendant:function(e){return e.get(r)in this._descendantsMap},_removeFocusClass:function(){var e=this._focusedNode,t=this.get(u),n;t&&(n=v.isString(t)?t:t.className),e&&n&&e.removeClass(n)},_detachKeyHandler:function(){var e=this._prevKeyHandler,t=this._nextKeyHandler;e&&e.detach(),t&&t.detach()},_preventScroll:function(e){p[e.keyCode]&&this._isDescendant(e.target)&&e.preventDefault()},_fireClick:function(e){var t=e.target,n=t.get("nodeName").toLowerCase();e.keyCode===13&&(!d[n]||n==="a"&&!t.getAttribute("href"))&&t.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var t=this.get("keys.next"),n=this.get("keys.previous"),r=this.get(h),i=this._eventHandlers;n&&(this._prevKeyHandler=e.on(l,e.bind(this._focusPrevious,this),r,n)),t&&(this._nextKeyHandler=e.on(l,e.bind(this._focusNext,this),r,t)),m.opera&&i.push(r.on("keypress",this._preventScroll,this)),m.opera||i.push(r.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var t=this._descendants,n,r,i;t&&t.size()&&(n=this._eventHandlers||[],r=this.get(h).get("ownerDocument"),n.length===0&&(n.push(r.on("focus",this._onDocFocus,this)),n.push(r.on("mousedown",this._onDocMouseDown,this)),n.push(this.after("keysChange",this._attachKeyHandler)),n.push(this.after("descendantsChange",this._initDescendants)),n.push(this.after(c,this._afterActiveDescendantChange)),i=this.after("focusedChange",e.bind(function(e){e.newVal&&(this._attachKeyHandler(),i.detach())},this)),n.push(i)),this._eventHandlers=n)},_onDocMouseDown:function(e){var t=this.get(h),n=e.target,r=t.contains(n),i,s=function(e){var n=!1;return e.compareTo(t)||(n=this._isDescendant(e)?e:s.call(this,e.get("parentNode"))),n};r&&(i=s.call(this,n),i?n=i:!i&&this.get(o)&&(this._set(o,!1),this._onDocFocus(e))),r&&this._isDescendant(n)?this.focus(n):m.webkit&&this.get(o)&&(!r||r&&!this._isDescendant(n))&&(this._set(o,!1),this._onDocFocus(e))},_onDocFocus:function(e){var t=this._focusTarget||e.target,n=this.get(o),r=this.get(u),i=this._focusedNode,s;this._focusTarget&&(this._focusTarget=null),this.get(h).contains(t)?(s=this._isDescendant(t),!n&&s?n=!0:n&&!s&&(n=!1)):n=!1,r&&(i&&(!i.compareTo(t)||!n)&&this._removeFocusClass(),s&&n&&(r.fn?(t=r.fn(t),t.addClass(r.className)):t.addClass(r),this._focusedNode=t)),this._set(o,n)},_focusNext:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r<=this._lastNodeIndex&&(r+=1,r===this._lastNodeIndex+1&&this.get(a)&&(r=0),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusNext(e,r):this.focus(r))),this._preventScroll(e)},_focusPrevious:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r>=0&&(r-=1,r===-1&&this.get(a)&&(r=this._lastNodeIndex),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusPrevious(e,r):this.focus(r))),this._preventScroll(e)},_afterActiveDescendantChange:function(e){var t=this._descendants.item(e.prevVal);t&&t.set(s,-1),t=this._descendants.item(e.newVal),t&&t.set(s,0)},initializer:function(e){this.start()},destructor:function(){this.stop(),this.get(h).focusManager=null},focus:function(e){v.isUndefined(e)&&(e=this.get(n)),this.set(n,e,{src:f});var t=this._descendants.item(this.get(n));t&&(t.focus(),m.opera&&t.get("nodeName").toLowerCase()==="button"&&(this._focusTarget=t))},blur:function(){var e;this.get(o)&&(e=this._descendants.item(this.get(n)),e&&(e.blur(),this._removeFocusClass()),this._set(o,!1,{src:f}))},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._descendants=null,this._focusedNode=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants(),this._eventHandlers||this._attachEventHandlers()}}),g.NAME="nodeFocusManager",g.NS="focusManager",e.namespace("Plugin"),e.Plugin.NodeFocusManager=g},"@VERSION@",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});
YUI.add("node-pluginhost",function(e,t){e.Node.plug=function(){var t=e.Array(arguments);return t.unshift(e.Node),e.Plugin.Host.plug.apply(e.Base,t),e.Node},e.Node.unplug=function(){var t=e.Array(arguments);return t.unshift(e.Node),e.Plugin.Host.unplug.apply(e.Base,t),e.Node},e.mix(e.Node,e.Plugin.Host,!1,null,1),e.Object.each(e.Node._instances,function(t){e.Plugin.Host.apply(t)}),e.NodeList.prototype.plug=function(){var t=arguments;return e.NodeList.each(this,function(n){e.Node.prototype.plug.apply(e.one(n),t)}),this},e.NodeList.prototype.unplug=function(){var t=arguments;return e.NodeList.each(this,function(n){e.Node.prototype.unplug.apply(e.one(n),t)}),this}},"@VERSION@",{requires:["node-base","pluginhost"]});
YUI.add("node-screen",function(e,t){e.each(["winWidth","winHeight","docWidth","docHeight","docScrollX","docScrollY"],function(t){e.Node.ATTRS[t]={getter:function(){var n=Array.prototype.slice.call(arguments);return n.unshift(e.Node.getDOMNode(this)),e.DOM[t].apply(this,n)}}}),e.Node.ATTRS.scrollLeft={getter:function(){var t=e.Node.getDOMNode(this);return"scrollLeft"in t?t.scrollLeft:e.DOM.docScrollX(t)},setter:function(t){var n=e.Node.getDOMNode(this);n&&("scrollLeft"in n?n.scrollLeft=t:(n.document||n.nodeType===9)&&e.DOM._getWin(n).scrollTo(t,e.DOM.docScrollY(n)))}},e.Node.ATTRS.scrollTop={getter:function(){var t=e.Node.getDOMNode(this);return"scrollTop"in t?t.scrollTop:e.DOM.docScrollY(t)},setter:function(t){var n=e.Node.getDOMNode(this);n&&("scrollTop"in n?n.scrollTop=t:(n.document||n.nodeType===9)&&e.DOM._getWin(n).scrollTo(e.DOM.docScrollX(n),t))}},e.Node.importMethod(e.DOM,["getXY","setXY","getX","setX","getY","setY","swapXY"]),e.Node.ATTRS.region={getter:function(){var t=this.getDOMNode(),n;return t&&!t.tagName&&t.nodeType===9&&(t=t.documentElement),e.DOM.isWindow(t)?n=e.DOM.viewportRegion(t):n=e.DOM.region(t),n}},e.Node.ATTRS.viewportRegion={getter:function(){return e.DOM.viewportRegion(e.Node.getDOMNode(this))}},e.Node.importMethod(e.DOM,"inViewportRegion"),e.Node.prototype.intersect=function(t,n){var r=e.Node.getDOMNode(this);return e.instanceOf(t,e.Node)&&(t=e.Node.getDOMNode(t)),e.DOM.intersect(r,t,n)},e.Node.prototype.inRegion=function(t,n,r){var i=e.Node.getDOMNode(this);return e.instanceOf(t,e.Node)&&(t=e.Node.getDOMNode(t)),e.DOM.inRegion(i,t,n,r)}},"@VERSION@",{requires:["dom-screen","node-base"]});
YUI.add("node-style",function(e,t){(function(e){e.mix(e.Node.prototype,{setStyle:function(t,n){return e.DOM.setStyle(this._node,t,n),this},setStyles:function(t){return e.DOM.setStyles(this._node,t),this},getStyle:function(t){return e.DOM.getStyle(this._node,t)},getComputedStyle:function(t){return e.DOM.getComputedStyle(this._node,t)}}),e.NodeList.importMethod(e.Node.prototype,["getStyle","getComputedStyle","setStyle","setStyles"])})(e);var n=e.Node;e.mix(n.prototype,{show:function(e){return e=arguments[arguments.length-1],this.toggleView(!0,e),this},_show:function(){this.removeAttribute("hidden"),this.setStyle("display","")},_isHidden:function(){return this.hasAttribute("hidden")||e.DOM.getComputedStyle(this._node,"display")==="none"},toggleView:function(e,t){return this._toggleView.apply(this,arguments),this},_toggleView:function(e,t){return t=arguments[arguments.length-1],typeof e!="boolean"&&(e=this._isHidden()?1:0),e?this._show():this._hide(),typeof t=="function"&&t.call(this),this},hide:function(e){return e=arguments[arguments.length-1],this.toggleView(!1,e),this},_hide:function(){this.setAttribute("hidden","hidden"),this.setStyle("display","none")}}),e.NodeList.importMethod(e.Node.prototype,["show","hide","toggleView"])},"@VERSION@",{requires:["dom-style","node-base"]});
YUI.add("oop",function(Y,NAME){function dispatch(o,f,c,proto,action){if(o&&o[action]&&o!==Y)return o[action].call(o,f,c);switch(A.test(o)){case 1:return A[action](o,f,c);case 2:return A[action](Y.Array(o,0,!0),f,c);default:return Y.Object[action](o,f,c,proto)}}var L=Y.Lang,A=Y.Array,OP=Object.prototype,CLONE_MARKER="_~yuim~_",hasOwn=OP.hasOwnProperty,toString=OP.toString;Y.augment=function(receiver,supplier,overwrite,whitelist,args){var copy,newPrototype,replacements,sequestered,unsequester,rProto=receiver.prototype,sequester=rProto&&supplier,sProto=supplier.prototype,to=rProto||receiver;return args=args?Y.Array(args):[],sequester&&(newPrototype={},replacements={},sequestered={},copy=function(value,key){!overwrite&&key in rProto||("[object Function]"===toString.call(value)?(sequestered[key]=value,newPrototype[key]=replacements[key]=function(){return unsequester(this,value,arguments)}):newPrototype[key]=value)},unsequester=function(instance,fn,fnArgs){for(var key in sequestered)hasOwn.call(sequestered,key)&&instance[key]===replacements[key]&&(instance[key]=sequestered[key]);return supplier.apply(instance,args),fn.apply(instance,fnArgs)},whitelist?Y.Array.each(whitelist,function(name){name in sProto&&copy(sProto[name],name)}):Y.Object.each(sProto,copy,null,!0)),Y.mix(to,newPrototype||sProto,overwrite,whitelist),sequester||supplier.apply(to,args),receiver},Y.aggregate=function(r,s,ov,wl){return Y.mix(r,s,ov,wl,0,!0)},Y.extend=function(r,s,px,sx){s&&r||Y.error("extend failed, verify dependencies");var sp=s.prototype,rp=Y.Object(sp);return r.prototype=rp,rp.constructor=r,r.superclass=sp,s!=Object&&sp.constructor==OP.constructor&&(sp.constructor=s),px&&Y.mix(rp,px,!0),sx&&Y.mix(r,sx,!0),r},Y.each=function(o,f,c,proto){return dispatch(o,f,c,proto,"each")},Y.some=function(o,f,c,proto){return dispatch(o,f,c,proto,"some")},Y.clone=function(o,safe,f,c,owner,cloned){var o2,marked,stamp;if(!L.isObject(o)||Y.instanceOf(o,YUI)||o.addEventListener||o.attachEvent)return o;switch(marked=cloned||{},L.type(o)){case"date":return new Date(o);case"regexp":return o;case"function":return o;case"array":o2=[];break;default:if(o[CLONE_MARKER])return marked[o[CLONE_MARKER]];stamp=Y.guid(),o2=safe?{}:Y.Object(o),o[CLONE_MARKER]=stamp,marked[stamp]=o}return Y.each(o,function(v,k){!k&&0!==k||f&&f.call(c||this,v,k,this,o)===!1||k!==CLONE_MARKER&&("prototype"==k||(this[k]=Y.clone(v,safe,f,c,owner||o,marked)))},o2),cloned||(Y.Object.each(marked,function(v,k){if(v[CLONE_MARKER])try{delete v[CLONE_MARKER]}catch(e){v[CLONE_MARKER]=null}},this),marked=null),o2},Y.bind=function(f,c){var xargs=arguments.length>2?Y.Array(arguments,2,!0):null;return function(){var fn=L.isString(f)?c[f]:f,args=xargs?xargs.concat(Y.Array(arguments,0,!0)):arguments;return fn.apply(c||fn,args)}},Y.rbind=function(f,c){var xargs=arguments.length>2?Y.Array(arguments,2,!0):null;return function(){var fn=L.isString(f)?c[f]:f,args=xargs?Y.Array(arguments,0,!0).concat(xargs):arguments;return fn.apply(c||fn,args)}}},"@VERSION@",{requires:["yui-base"]});
YUI.add("overlay",function(e,t){e.Overlay=e.Base.create("overlay",e.Widget,[e.WidgetStdMod,e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign,e.WidgetPositionConstrain])},"@VERSION@",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0});
YUI.add("panel",function(e,t){var n=e.ClassNameManager.getClassName;e.Panel=e.Base.create("panel",e.Widget,[e.WidgetPosition,e.WidgetStdMod,e.WidgetAutohide,e.WidgetButtons,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],{BUTTONS:{close:{label:"Close",action:"hide",section:"header",template:'<button type="button" />',classNames:n("button","close")}}},{ATTRS:{buttons:{value:["close"]}}})},"@VERSION@",{requires:["widget","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod"],skinnable:!0});
YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"@VERSION@",{requires:["base-base"]});
YUI.add("pluginhost-base",function(e,t){function r(){this._plugins={}}var n=e.Lang;r.prototype={plug:function(e,t){var r,i,s;if(n.isArray(e))for(r=0,i=e.length;r<i;r++)this.plug(e[r]);else e&&!n.isFunction(e)&&(t=e.cfg,e=e.fn),e&&e.NS&&(s=e.NS,t=t||{},t.host=this,this.hasPlugin(s)?this[s].setAttrs&&this[s].setAttrs(t):(this[s]=new e(t),this._plugins[s]=e));return this},unplug:function(e){var t=e,r=this._plugins;if(e)n.isFunction(e)&&(t=e.NS,t&&(!r[t]||r[t]!==e)&&(t=null)),t&&(this[t]&&(this[t].destroy&&this[t].destroy(),delete this[t]),r[t]&&delete r[t]);else for(t in this._plugins)this._plugins.hasOwnProperty(t)&&this.unplug(t);return this},hasPlugin:function(e){return this._plugins[e]&&this[e]},_initPlugins:function(e){this._plugins=this._plugins||{},this._initConfigPlugins&&this._initConfigPlugins(e)},_destroyPlugins:function(){this.unplug()}},e.namespace("Plugin").Host=r},"@VERSION@",{requires:["yui-base"]});
YUI.add("pluginhost-config",function(e,t){var n=e.Plugin.Host,r=e.Lang;n.prototype._initConfigPlugins=function(t){var n=this._getClasses?this._getClasses():[this.constructor],r=[],i={},s,o,u,a,f;for(o=n.length-1;o>=0;o--)s=n[o],a=s._UNPLUG,a&&e.mix(i,a,!0),u=s._PLUG,u&&e.mix(r,u,!0);for(f in r)r.hasOwnProperty(f)&&(i[f]||this.plug(r[f]));t&&t.plugins&&this.plug(t.plugins)},n.plug=function(t,n,i){var s,o,u,a;if(t!==e.Base){t._PLUG=t._PLUG||{},r.isArray(n)||(i&&(n={fn:n,cfg:i}),n=[n]);for(o=0,u=n.length;o<u;o++)s=n[o],a=s.NAME||s.fn.NAME,t._PLUG[a]=s}},n.unplug=function(t,n){var i,s,o,u;if(t!==e.Base){t._UNPLUG=t._UNPLUG||{},r.isArray(n)||(n=[n]);for(s=0,o=n.length;s<o;s++)i=n[s],u=i.NAME,t._PLUG[u]?delete t._PLUG[u]:t._UNPLUG[u]=i}}},"@VERSION@",{requires:["pluginhost-base"]});
YUI.add("promise",function(e,t){function i(e){if(!(this instanceof i))return new i(e);var t=new i.Resolver(this);this._resolver=t,e.call(this,function(e){t.resolve(e)},function(e){t.reject(e)})}function s(e){this._callbacks=[],this._errbacks=[],this.promise=e,this._status="pending",this._result=null}var n=e.Lang,r=[].slice;e.mix(i.prototype,{then:function(e,t){var n=this.constructor,r=this._resolver;return new n(function(n,s){r._addCallbacks(typeof e=="function"?i._wrap(n,s,e):n,typeof t=="function"?i._wrap(n,s,t):s)})},"catch":function(e){return this.then(undefined,e)},getStatus:function(){return this._resolver.getStatus()}}),i._wrap=function(e,t,n){return function(r){var i;try{i=n(r)}catch(s){t(s);return}e(i)}},i.isPromise=function(e){var t;try{t=e.then}catch(n){}return typeof t=="function"},i.resolve=function(e){return i.isPromise(e)&&e.constructor===this?e:new this(function(t){t(e)})},i.reject=function(e){return new this(function(t,n){n(e)})},i.all=function(e){var t=this;return new t(function(r,i){function f(e){return function(t){a[e]=t,s--,s||r(a)}}if(!n.isArray(e)){i(new TypeError("Promise.all expects an array of values or promises"));return}var s=e.length,o=0,u=e.length,a=[];if(u<1)return r(a);for(;o<u;o++)t.resolve(e[o]).then(f(o),i)})},i.race=function(e){var t=this;return new t(function(r,i){if(!n.isArray(e)){i(new TypeError("Promise.race expects an array of values or promises"));return}for(var s=0,o=e.length;s<o;s++)t.resolve(e[s]).then(r,i)})},e.Promise=i,e.mix(s.prototype,{fulfill:function(e){this._status==="pending"&&(this._result=e,this._status="fulfilled"),this._status==="fulfilled"&&(this._notify(this._callbacks,this._result),this._callbacks=[],this._errbacks=null)},reject:function(e){this._status==="pending"&&(this._result=e,this._status="rejected"),this._status==="rejected"&&(this._notify(this._errbacks,this._result),this._callbacks=null,this._errbacks=[])},resolve:function(e){var t=this;i.isPromise(e)?e.then(function(e){t.resolve(e)},function(e){t.reject(e)}):this.fulfill(e)},then:function(e,t){return this.promise.then(e,t)},_addCallbacks:function(e,t){var n=this._callbacks,r=this._errbacks,i=this._status,s=this._result;n&&typeof e=="function"&&n.push(e),r&&typeof t=="function"&&r.push(t),i==="fulfilled"?this.fulfill(s):i==="rejected"&&this.reject(s)},getStatus:function(){return this._status},_notify:function(t,n){t.length&&e.soon(function(){var e,r;for(e=0,r=t.length;e<r;++e)t[e](n)})}},!0),e.Promise.Resolver=s,e.when=function(e,t,n){return e=i.resolve(e),t||n?e.then(t,n):e},e.batch=function(){return i.all(r.call(arguments))}},"@VERSION@",{requires:["timers"]});
YUI.add("querystring-parse",function(e,t){var n=e.namespace("QueryString"),r=function(t){return function r(i,s){var o,u,a,f,l;return arguments.length!==2?(i=i.split(t),r(n.unescape(i.shift()),n.unescape(i.join(t)))):(i=i.replace(/^\s+|\s+$/g,""),e.Lang.isString(s)&&(s=s.replace(/^\s+|\s+$/g,""),isNaN(s)||(u=+s,s===u.toString(10)&&(s=u))),o=/(.*)\[([^\]]*)\]$/.exec(i),o?(f=o[2],a=o[1],f?(l={},l[f]=s,r(a,l)):r(a,[s])):(l={},i&&(l[i]=s),l))}},i=function(t,n){return t?e.Lang.isArray(t)?t.concat(n):!e.Lang.isObject(t)||!e.Lang.isObject(n)?[t].concat(n):s(t,n):n},s=function(e,t){for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=i(e[n],t[n]));return e};n.parse=function(t,n,s){return e.Array.reduce(e.Array.map(t.split(n||"&"),r(s||"=")),{},i)},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"@VERSION@",{requires:["yui-base","array-extras"]});
YUI.add("querystring-stringify-simple",function(e,t){var n=e.namespace("QueryString"),r=encodeURIComponent;n.stringify=function(t,n){var i=[],s=n&&n.arrayKey?!0:!1,o,u,a;for(o in t)if(t.hasOwnProperty(o))if(e.Lang.isArray(t[o]))for(u=0,a=t[o].length;u<a;u++)i.push(r(s?o+"[]":o)+"="+r(t[o][u]));else i.push(r(o)+"="+r(t[o]));return i.join("&")}},"@VERSION@",{requires:["yui-base"]});
YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"@VERSION@",{requires:["yui-base"]});
YUI.add("queue-promote",function(e,t){e.mix(e.Queue.prototype,{indexOf:function(t){return e.Array.indexOf(this._q,t)},promote:function(e){var t=this.indexOf(e);t>-1&&this._q.unshift(this._q.splice(t,1)[0])},remove:function(e){var t=this.indexOf(e);t>-1&&this._q.splice(t,1)}})},"@VERSION@",{requires:["yui-base"]});
YUI.add("range-slider",function(e,t){e.Slider=e.Base.build("slider",e.SliderBase,[e.SliderValueRange,e.ClickableRail])},"@VERSION@",{requires:["slider-base","slider-value-range","clickable-rail"]});
YUI.add("resize-base",function(e,t){function Lt(){Lt.superclass.constructor.apply(this,arguments)}var n=e.Lang,r=n.isArray,i=n.isBoolean,s=n.isNumber,o=n.isString,u=e.Array,a=n.trim,f=u.indexOf,l=",",c=".",h="",p="{handle}",d=" ",v="active",m="activeHandle",g="activeHandleNode",y="all",b="autoHide",w="border",E="bottom",S="className",x="color",T="defMinHeight",N="defMinWidth",C="handle",k="handles",L="handlesWrapper",A="hidden",O="inner",M="left",_="margin",D="node",P="nodeName",H="none",B="offsetHeight",j="offsetWidth",F="padding",I="parentNode",q="position",R="relative",U="resize",z="resizing",W="right",X="static",V="style",$="top",J="width",K="wrap",Q="wrapper",G="wrapTypes",Y="resize:mouseUp",Z="resize:resize",et="resize:align",tt="resize:end",nt="resize:start",rt="t",it="tr",st="r",ot="br",ut="b",at="bl",ft="l",lt="tl",ct=function(){return Array.prototype.slice.call(arguments).join(d)},ht=function(e){return Math.round(parseFloat(e))||0},pt=function(e,t){return e.getComputedStyle(t)},dt=function(e){return C+e.toUpperCase()},vt=function(t){return t instanceof e.Node},mt=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),gt=e.cached(function(){var e=[],t=u(arguments,0,!0);return u.each(t,function(t,n){n>0&&(t=mt(t)),e.push(t)}),e.join(h)}),yt=e.ClassNameManager.getClassName,bt=yt(U),wt=yt(U,C),Et=yt(U,C,v),St=yt(U,C,O),xt=yt(U,C,O,p),Tt=yt(U,C,p),Nt=yt(U,A,k),Ct=yt(U,k,Q),kt=yt(U,Q);e.mix(Lt,{NAME:U,ATTRS:{activeHandle:{value:null,validator:function(t){return e.Lang.isString(t)||e.Lang.isNull(t)}},activeHandleNode:{value:null,validator:vt},autoHide:{value:!1,validator:i},defMinHeight:{value:15,validator:s},defMinWidth:{value:15,validator:s},handles:{setter:"_setHandles",value:y},handlesWrapper:{readOnly:!0,setter:e.one,valueFn:"_valueHandlesWrapper"},node:{setter:e.one},resizing:{value:!1,validator:i},wrap:{setter:"_setWrap",value:!1,validator:i},wrapTypes:{readOnly:!0,value:/^canvas|textarea|input|select|button|img|iframe|table|embed$/i},wrapper:{readOnly:!0,valueFn:"_valueWrapper",writeOnce:!0}},RULES:{b:function(e,t,n){var r=e.info,i=e.originalInfo;r.offsetHeight=i.offsetHeight+n},l:function(e,t){var n=e.info,r=e.originalInfo;n.left=r.left+t,n.offsetWidth=r.offsetWidth-t},r:function(e,t){var n=e.info,r=e.originalInfo;n.offsetWidth=r.offsetWidth+t},t:function(e,t,n){var r=e.info,i=e.originalInfo;r.top=i.top+n,r.offsetHeight=i.offsetHeight-n},tr:function(){this.t.apply(this,arguments),this.r.apply(this,arguments)},bl:function(){this.b.apply(this,arguments),this.l.apply(this,arguments)},br:function(){this.b.apply(this,arguments),this.r.apply(this,arguments)},tl:function(){this.t.apply(this,arguments),this.l.apply(this,arguments)}},capitalize:gt}),e.Resize=e.extend(Lt,e.Base,{ALL_HANDLES:[rt,it,st,ot,ut,at,ft,lt],REGEX_CHANGE_HEIGHT:/^(t|tr|b|bl|br|tl)$/i,REGEX_CHANGE_LEFT:/^(tl|l|bl)$/i,REGEX_CHANGE_TOP:/^(tl|t|tr)$/i,REGEX_CHANGE_WIDTH:/^(bl|br|l|r|tl|tr)$/i,HANDLES_WRAP_TEMPLATE:'<div class="'+Ct+'"></div>',WRAP_TEMPLATE:'<div class="'+kt+'"></div>',HANDLE_TEMPLATE:'<div class="'+ct(wt,Tt)+'">'+'<div class="'+ct(St,xt)+'">&nbsp;</div>'+"</div>",totalHSurrounding:0,totalVSurrounding:0,nodeSurrounding:null,wrapperSurrounding:null,changeHeightHandles:!1,changeLeftHandles:!1,changeTopHandles:!1,changeWidthHandles:!1,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){this._eventHandles=[],this.renderer()},renderUI:function(){var e=this;e._renderHandles()},bindUI:function(){var e=this;e._createEvents(),e._bindDD(),e._bindHandle()},syncUI:function(){var e=this;this.get(D).addClass(bt),e._setHideHandlesUI(e.get(b))},destructor:function(){var t=this,n=t.get(D),r=t.get(Q),i=r.get(I);e.each(t._eventHandles,function(e){e.detach()}),t._eventHandles.length=0,t.eachHandle(function(e){t.delegate.dd.destroy(),e.remove(!0)}),t.delegate.destroy(),t.get(K)&&(t._copyStyles(r,n),i&&i.insertBefore(n,r),r.remove(!0)),n.removeClass(bt),n.removeClass(Nt)},renderer:function(){this.renderUI(),this.bindUI(),this.syncUI()},eachHandle:function(t){var n=this;e.each(n.get(k),function(e,r){var i=n.get(dt(e));t.apply(n,[i,e,r])})},_bindDD:function(){var t=this;t.delegate=new e.DD.Delegate({bubbleTargets:t,container:t.get(L),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:!0,move:!1},nodes:c+wt,target:!1}),t._eventHandles.push(t.on("drag:drag",t._handleResizeEvent),t.on("drag:dropmiss",t._handleMouseUpEvent),t.on("drag:end",t._handleResizeEndEvent),t.on("drag:start",t._handleResizeStartEvent))},_bindHandle:function(){var t=this,n=t.get(Q);t._eventHandles.push(n.on("mouseenter",e.bind(t._onWrapperMouseEnter,t)),n.on("mouseleave",e.bind(t._onWrapperMouseLeave,t)),n.delegate("mouseenter",e.bind(t._onHandleMouseEnter,t),c+wt),n.delegate("mouseleave",e.bind(t._onHandleMouseLeave,t),c+wt))},_createEvents:function(){var e=this,t=function(t,n){e.publish(t,{defaultFn:n,queuable:!1,emitFacade:!0,bubbles:!0,prefix:U})};t(nt,this._defResizeStartFn),t(Z,this._defResizeFn),t(et,this._defResizeAlignFn),t(tt,this._defResizeEndFn),t(Y,this._defMouseUpFn)},_renderHandles:function(){var e=this,t=e.get(Q),n=e.get(L);e.eachHandle(function(e){n.append(e)}),t.append(n)},_buildHandle:function(t){var n=this;return e.Node.create(e.Lang.sub(n.HANDLE_TEMPLATE,{handle:t}))},_calcResize:function(){var t=this,n=t.handle,r=t.info,i=t.originalInfo,s=r.actXY[0]-i.actXY[0],o=r.actXY[1]-i.actXY[1];n&&e.Resize.RULES[n]&&e.Resize.RULES[n](t,s,o)},_checkSize:function(e,t){var n=this,r=n.info,i=n.originalInfo,s=e===B?$:M;r[e]=t;if(s===M&&n.changeLeftHandles||s===$&&n.changeTopHandles)r[s]=i[s]+i[e]-t},_copyStyles:function(t,n){var r=t.getStyle(q).toLowerCase(),i=this._getBoxSurroundingInfo(t),s;r===X&&(r=R),s={position:r,left:pt(t,M),top:pt(t,$)},e.mix(s,i.margin),e.mix(s,i.border),n.setStyles(s),t.setStyles({border:0,margin:0}),n.sizeTo(t.get(j)+i.totalHBorder,t.get(B)+i.totalVBorder)},_extractHandleName:e.cached(function(e){var t=e.get(S),n=t.match(new RegExp(yt(U,C,"(\\w{1,2})\\b")));return n?n[1
]:null}),_getInfo:function(e,t){var n=[0,0],r=t.dragEvent.target,i=e.getXY(),s=i[0],o=i[1],u=e.get(B),a=e.get(j);return t&&(n=r.actXY.length?r.actXY:r.lastXY),{actXY:n,bottom:o+u,left:s,offsetHeight:u,offsetWidth:a,right:s+a,top:o}},_getBoxSurroundingInfo:function(t){var n={padding:{},margin:{},border:{}};return vt(t)&&e.each([$,W,E,M],function(e){var r=gt(F,e),i=gt(_,e),s=gt(w,e,J),o=gt(w,e,x),u=gt(w,e,V);n.border[o]=pt(t,o),n.border[u]=pt(t,u),n.border[s]=pt(t,s),n.margin[i]=pt(t,i),n.padding[r]=pt(t,r)}),n.totalHBorder=ht(n.border.borderLeftWidth)+ht(n.border.borderRightWidth),n.totalHPadding=ht(n.padding.paddingLeft)+ht(n.padding.paddingRight),n.totalVBorder=ht(n.border.borderBottomWidth)+ht(n.border.borderTopWidth),n.totalVPadding=ht(n.padding.paddingBottom)+ht(n.padding.paddingTop),n},_syncUI:function(){var t=this,n=t.info,r=t.wrapperSurrounding,i=t.get(Q),s=t.get(D);i.sizeTo(n.offsetWidth,n.offsetHeight),(t.changeLeftHandles||t.changeTopHandles)&&i.setXY([n.left,n.top]),i.compareTo(s)||s.sizeTo(n.offsetWidth-r.totalHBorder,n.offsetHeight-r.totalVBorder),e.UA.webkit&&s.setStyle(U,H)},_updateChangeHandleInfo:function(e){var t=this;t.changeHeightHandles=t.REGEX_CHANGE_HEIGHT.test(e),t.changeLeftHandles=t.REGEX_CHANGE_LEFT.test(e),t.changeTopHandles=t.REGEX_CHANGE_TOP.test(e),t.changeWidthHandles=t.REGEX_CHANGE_WIDTH.test(e)},_updateInfo:function(e){var t=this;t.info=t._getInfo(t.get(Q),e)},_updateSurroundingInfo:function(){var e=this,t=e.get(D),n=e.get(Q),r=e._getBoxSurroundingInfo(t),i=e._getBoxSurroundingInfo(n);e.nodeSurrounding=r,e.wrapperSurrounding=i,e.totalVSurrounding=r.totalVPadding+i.totalVBorder,e.totalHSurrounding=r.totalHPadding+i.totalHBorder},_setActiveHandlesUI:function(e){var t=this,n=t.get(g);n&&(e?(t.eachHandle(function(e){e.removeClass(Et)}),n.addClass(Et)):n.removeClass(Et))},_setHandles:function(t){var n=this,i=[];return r(t)?i=t:o(t)&&(t.toLowerCase()===y?i=n.ALL_HANDLES:e.each(t.split(l),function(e){var t=a(e);f(n.ALL_HANDLES,t)>-1&&i.push(t)})),i},_setHideHandlesUI:function(e){var t=this,n=t.get(Q);t.get(z)||(e?n.addClass(Nt):n.removeClass(Nt))},_setWrap:function(e){var t=this,n=t.get(D),r=n.get(P),i=t.get(G);return i.test(r)&&(e=!0),e},_defMouseUpFn:function(){var e=this;e.set(z,!1)},_defResizeFn:function(e){var t=this;t._resize(e)},_resize:function(e){var t=this;t._handleResizeAlignEvent(e.dragEvent),t._syncUI()},_defResizeAlignFn:function(e){var t=this;t._resizeAlign(e)},_resizeAlign:function(e){var t=this,n,r,i;t.lastInfo=t.info,t._updateInfo(e),n=t.info,t._calcResize(),t.con||(r=t.get(T)+t.totalVSurrounding,i=t.get(N)+t.totalHSurrounding,n.offsetHeight<=r&&t._checkSize(B,r),n.offsetWidth<=i&&t._checkSize(j,i))},_defResizeEndFn:function(e){var t=this;t._resizeEnd(e)},_resizeEnd:function(e){var t=this,n=e.dragEvent.target;n.actXY=[],t._syncUI(),t._setActiveHandlesUI(!1),t.set(m,null),t.set(g,null),t.handle=null},_defResizeStartFn:function(e){var t=this;t._resizeStart(e)},_resizeStart:function(e){var t=this,n=t.get(Q);t.handle=t.get(m),t.set(z,!0),t._updateSurroundingInfo(),t.originalInfo=t._getInfo(n,e),t._updateInfo(e)},_handleMouseUpEvent:function(e){this.fire(Y,{dragEvent:e,info:this.info})},_handleResizeEvent:function(e){this.fire(Z,{dragEvent:e,info:this.info})},_handleResizeAlignEvent:function(e){this.fire(et,{dragEvent:e,info:this.info})},_handleResizeEndEvent:function(e){this.fire(tt,{dragEvent:e,info:this.info})},_handleResizeStartEvent:function(e){this.get(m)||this._setHandleFromNode(e.target.get("node")),this.fire(nt,{dragEvent:e,info:this.info})},_onWrapperMouseEnter:function(){var e=this;e.get(b)&&e._setHideHandlesUI(!1)},_onWrapperMouseLeave:function(){var e=this;e.get(b)&&e._setHideHandlesUI(!0)},_setHandleFromNode:function(e){var t=this,n=t._extractHandleName(e);t.get(z)||(t.set(m,n),t.set(g,e),t._setActiveHandlesUI(!0),t._updateChangeHandleInfo(n))},_onHandleMouseEnter:function(e){this._setHandleFromNode(e.currentTarget)},_onHandleMouseLeave:function(){var e=this;e.get(z)||e._setActiveHandlesUI(!1)},_valueHandlesWrapper:function(){return e.Node.create(this.HANDLES_WRAP_TEMPLATE)},_valueWrapper:function(){var t=this,n=t.get(D),r=n.get(I),i=n;return t.get(K)&&(i=e.Node.create(t.WRAP_TEMPLATE),r&&r.insertBefore(i,n),i.append(n),t._copyStyles(n,i),n.setStyles({position:X,left:0,top:0})),i}}),e.each(e.Resize.prototype.ALL_HANDLES,function(t){e.Resize.ATTRS[dt(t)]={setter:function(){return this._buildHandle(t)},value:null,writeOnce:!0}})},"@VERSION@",{requires:["base","widget","event","oop","dd-drag","dd-delegate","dd-drop"],skinnable:!0});
YUI.add("resize-constrain",function(e,t){function B(){B.superclass.constructor.apply(this,arguments)}var n=e.Lang,r=n.isBoolean,i=n.isNumber,s=n.isString,o=e.Resize.capitalize,u=function(t){return t instanceof e.Node},a=function(e){return parseFloat(e)||0},f="borderBottomWidth",l="borderLeftWidth",c="borderRightWidth",h="borderTopWidth",p="border",d="bottom",v="con",m="constrain",g="host",y="left",b="maxHeight",w="maxWidth",E="minHeight",S="minWidth",x="node",T="offsetHeight",N="offsetWidth",C="preserveRatio",k="region",L="resizeConstrained",A="right",O="tickX",M="tickY",_="top",D="width",P="view",H="viewportRegion";e.mix(B,{NAME:L,NS:v,ATTRS:{constrain:{setter:function(t){return t&&(u(t)||s(t)||t.nodeType)&&(t=e.one(t)),t}},minHeight:{value:15,validator:i},minWidth:{value:15,validator:i},maxHeight:{value:Infinity,validator:i},maxWidth:{value:Infinity,validator:i},preserveRatio:{value:!1,validator:r},tickX:{value:!1},tickY:{value:!1}}}),e.extend(B,e.Plugin.Base,{constrainSurrounding:null,initializer:function(){var t=this,n=t.get(g);n.delegate.dd.plug(e.Plugin.DDConstrained,{tickX:t.get(O),tickY:t.get(M)}),n.after("resize:align",e.bind(t._handleResizeAlignEvent,t)),n.on("resize:start",e.bind(t._handleResizeStartEvent,t))},_checkConstrain:function(e,t,n){var r=this,i,s,u,f,l=r.get(g),c=l.info,h=r.constrainSurrounding.border,d=r._getConstrainRegion();d&&(i=c[e]+c[n],s=d[t]-a(h[o(p,t,D)]),i>=s&&(c[n]-=i-s),u=c[e],f=d[e]+a(h[o(p,e,D)]),u<=f&&(c[e]+=f-u,c[n]-=f-u))},_checkHeight:function(){var e=this,t=e.get(g),n=t.info,r=e.get(b)+t.totalVSurrounding,i=e.get(E)+t.totalVSurrounding;e._checkConstrain(_,d,T),n.offsetHeight>r&&t._checkSize(T,r),n.offsetHeight<i&&t._checkSize(T,i)},_checkRatio:function(){var t=this,n=t.get(g),r=n.info,s=n.originalInfo,o=s.offsetWidth,u=s.offsetHeight,p=s.top,d=s.left,v=s.bottom,y=s.right,b=function(){return r.offsetWidth/o},w=function(){return r.offsetHeight/u},E=n.changeHeightHandles,S,x,T,N,C,k;t.get(m)&&n.changeHeightHandles&&n.changeWidthHandles&&(T=t._getConstrainRegion(),x=t.constrainSurrounding.border,S=T.bottom-a(x[f])-v,N=d-(T.left+a(x[l])),C=T.right-a(x[c])-y,k=p-(T.top+a(x[h])),n.changeLeftHandles&&n.changeTopHandles?E=k<N:n.changeLeftHandles?E=S<N:n.changeTopHandles?E=k<C:E=S<C),E?(r.offsetWidth=o*w(),t._checkWidth(),r.offsetHeight=u*b()):(r.offsetHeight=u*b(),t._checkHeight(),r.offsetWidth=o*w()),n.changeTopHandles&&(r.top=p+(u-r.offsetHeight)),n.changeLeftHandles&&(r.left=d+(o-r.offsetWidth)),e.each(r,function(e,t){i(e)&&(r[t]=Math.round(e))})},_checkRegion:function(){var t=this,n=t.get(g),r=t._getConstrainRegion();return e.DOM.inRegion(null,r,!0,n.info)},_checkWidth:function(){var e=this,t=e.get(g),n=t.info,r=e.get(w)+t.totalHSurrounding,i=e.get(S)+t.totalHSurrounding;e._checkConstrain(y,A,N),n.offsetWidth<i&&t._checkSize(N,i),n.offsetWidth>r&&t._checkSize(N,r)},_getConstrainRegion:function(){var e=this,t=e.get(g),n=t.get(x),r=e.get(m),i=null;return r&&(r===P?i=n.get(H):u(r)?i=r.get(k):i=r),i},_handleResizeAlignEvent:function(){var e=this,t=e.get(g);e._checkHeight(),e._checkWidth(),e.get(C)&&e._checkRatio(),e.get(m)&&!e._checkRegion()&&(t.info=t.lastInfo)},_handleResizeStartEvent:function(){var e=this,t=e.get(m),n=e.get(g);e.constrainSurrounding=n._getBoxSurroundingInfo(t)}}),e.namespace("Plugin"),e.Plugin.ResizeConstrained=B},"@VERSION@",{requires:["plugin","resize-base"]});
YUI.add("resize-proxy",function(e,t){function d(){d.superclass.constructor.apply(this,arguments)}var n="activeHandleNode",r="cursor",i="dragCursor",s="host",o="parentNode",u="proxy",a="proxyNode",f="resize",l="resize-proxy",c="wrapper",h=e.ClassNameManager.getClassName,p=h(f,u);e.mix(d,{NAME:l,NS:u,ATTRS:{proxyNode:{setter:e.one,valueFn:function(){return e.Node.create(this.PROXY_TEMPLATE)}}}}),e.extend(d,e.Plugin.Base,{PROXY_TEMPLATE:'<div class="'+p+'"></div>',initializer:function(){var e=this;e.afterHostEvent("resize:start",e._afterResizeStart),e.beforeHostMethod("_resize",e._beforeHostResize),e.afterHostMethod("_resizeEnd",e._afterHostResizeEnd)},destructor:function(){var e=this;e.get(a).remove(!0)},_afterHostResizeEnd:function(e){var t=this,n=e.dragEvent.target;n.actXY=[],t._syncProxyUI(),t.get(a).hide()},_afterResizeStart:function(){var e=this;e._renderProxy()},_beforeHostResize:function(t){var n=this,r=this.get(s);return r._handleResizeAlignEvent(t.dragEvent),n._syncProxyUI(),new e.Do.Prevent},_renderProxy:function(){var e=this,t=this.get(s),n=e.get(a);n.inDoc()||t.get(c).get(o).append(n.hide())},_syncProxyUI:function(){var e=this,t=this.get(s),o=t.info,u=t.get(n),f=e.get(a),l=u.getStyle(r);f.show().setStyle(r,l),t.delegate.dd.set(i,l),f.sizeTo(o.offsetWidth,o.offsetHeight),f.setXY([o.left,o.top])}}),e.namespace("Plugin"),e.Plugin.ResizeProxy=d},"@VERSION@",{requires:["plugin","resize-base"]});
YUI.add("selector-css2",function(e,t){var n="parentNode",r="tagName",i="attributes",s="combinator",o="pseudos",u=e.Selector,a={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:!0,_isXML:function(){var t=e.config.doc.createElement("div").tagName!=="DIV";return t}(),shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(t,n){return e.DOM.getAttribute(t,n)!==""},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(t){return e.DOM._children(t[n])[0]===t}},_bruteQuery:function(t,n,r){var i=[],s=[],o,a=u._tokenize(t),f=a[a.length-1],l=e.DOM._getDoc(n),c,h,p,d,v;if(f){h=f.id,p=f.className,d=f.tagName||"*";if(n.getElementsByTagName)h&&(n.all||n.nodeType===9||e.DOM.inDoc(n))?s=e.DOM.allById(h,n):p?s=n.getElementsByClassName(p):s=n.getElementsByTagName(d);else{o=[],c=n.firstChild,v=d==="*";while(c){while(c)c.tagName>"@"&&(v||c.tagName===d)&&s.push(c),o.push(c),c=c.firstChild;while(o.length>0&&!c)c=o.pop().nextSibling}}s.length&&(i=u._filterNodes(s,a,r))}return i},_filterNodes:function(t,n,r){var i=0,s,o=n.length,a=o-1,f=[],l=t[0],c=l,h=e.Selector.getters,p,d,v,m,g,y,b,w;for(i=0;c=l=t[i++];){a=o-1,m=null;e:while(c&&c.tagName){v=n[a],b=v.tests,s=b.length;if(s&&!g)while(w=b[--s]){p=w[1],h[w[0]]?y=h[w[0]](c,w[0]):(y=c[w[0]],w[0]==="tagName"&&!u._isXML&&(y=y.toUpperCase()),typeof y!="string"&&y!==undefined&&y.toString?y=y.toString():y===undefined&&c.getAttribute&&(y=c.getAttribute(w[0],2)));if(p==="="&&y!==w[2]||typeof p!="string"&&p.test&&!p.test(y)||!p.test&&typeof p=="function"&&!p(c,w[0],w[2])){if(c=c[m])while(c&&(!c.tagName||v.tagName&&v.tagName!==c.tagName))c=c[m];continue e}}a--;if(!!g||!(d=v.combinator)){f.push(l);if(r)return f;break}m=d.axis,c=c[m];while(c&&!c.tagName)c=c[m];d.direct&&(m=null)}}return l=c=null,f},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:!0},"+":{axis:"previousSibling",direct:!0}},_parsers:[{name:i,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(t,n){var r=t[2]||"",i=u.operators,s=t[3]?t[3].replace(/\\/g,""):"",o;if(t[1]==="id"&&r==="="||t[1]==="className"&&e.config.doc.documentElement.getElementsByClassName&&(r==="~="||r==="="))n.prefilter=t[1],t[3]=s,n[t[1]]=t[1]==="id"?t[3]:s;r in i&&(o=i[r],typeof o=="string"&&(t[3]=s.replace(u._reRegExpTokens,"\\$1"),o=new RegExp(o.replace("{val}",t[3]))),t[2]=o);if(!n.last||n.prefilter!==t[1])return t.slice(1)}},{name:r,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(e,t){var n=e[1];u._isXML||(n=n.toUpperCase()),t.tagName=n;if(n!=="*"&&(!t.last||t.prefilter))return[r,"=",n];t.prefilter||(t.prefilter="tagName")}},{name:s,re:/^\s*([>+~]|\s)\s*/,fn:function(e,t){}},{name:o,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(e,t){var n=u[o][e[1]];return n?(e[2]&&(e[2]=e[2].replace(/\\/g,"")),[e[2],n]):!1}}],_getToken:function(e){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]}},_tokenize:function(t){t=t||"",t=u._parseSelector(e.Lang.trim(t));var n=u._getToken(),r=t,i=[],o=!1,a,f,l,c;e:do{o=!1;for(l=0;c=u._parsers[l++];)if(a=c.re.exec(t)){c.name!==s&&(n.selector=t),t=t.replace(a[0],""),t.length||(n.last=!0),u._attrFilters[a[1]]&&(a[1]=u._attrFilters[a[1]]),f=c.fn(a,n);if(f===!1){o=!1;break e}f&&n.tests.push(f);if(!t.length||c.name===s)i.push(n),n=u._getToken(n),c.name===s&&(n.combinator=e.Selector.combinators[a[1]]);o=!0}}while(o&&t.length);if(!o||t.length)i=[];return i},_replaceMarkers:function(e){return e=e.replace(/\[/g,"\ue003"),e=e.replace(/\]/g,"\ue004"),e=e.replace(/\(/g,"\ue005"),e=e.replace(/\)/g,"\ue006"),e},_replaceShorthand:function(t){var n=e.Selector.shorthand,r;for(r in n)n.hasOwnProperty(r)&&(t=t.replace(new RegExp(r,"gi"),n[r]));return t},_parseSelector:function(t){var n=e.Selector._replaceSelector(t),t=n.selector;return t=e.Selector._replaceShorthand(t),t=e.Selector._restore("attr",t,n.attrs),t=e.Selector._restore("pseudo",t,n.pseudos),t=e.Selector._replaceMarkers(t),t=e.Selector._restore("esc",t,n.esc),t},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(t,n){return e.DOM.getAttribute(t,n)},id:function(t,n){return e.DOM.getId(t)}}};e.mix(e.Selector,a,!0),e.Selector.getters.src=e.Selector.getters.rel=e.Selector.getters.href,e.Selector.useNative&&e.config.doc.querySelector&&(e.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]")},"@VERSION@",{requires:["selector-native"]});
YUI.add("selector-css3",function(e,t){e.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,e.Selector._getNth=function(t,n,r,i){e.Selector._reNth.test(n);var s=parseInt(RegExp.$1,10),o=RegExp.$2,u=RegExp.$3,a=parseInt(RegExp.$4,10)||0,f=[],l=e.DOM._children(t.parentNode,r),c;u?(s=2,c="+",o="n",a=u==="odd"?1:0):isNaN(s)&&(s=o?1:0);if(s===0)return i&&(a=l.length-a+1),l[a-1]===t?!0:!1;s<0&&(i=!!i,s=Math.abs(s));if(!i){for(var h=a-1,p=l.length;h<p;h+=s)if(h>=0&&l[h]===t)return!0}else for(var h=l.length-a,p=l.length;h>=0;h-=s)if(h<p&&l[h]===t)return!0;return!1},e.mix(e.Selector.pseudos,{root:function(e){return e===e.ownerDocument.documentElement},"nth-child":function(t,n){return e.Selector._getNth(t,n)},"nth-last-child":function(t,n){return e.Selector._getNth(t,n,null,!0)},"nth-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName)},"nth-last-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName,!0)},"last-child":function(t){var n=e.DOM._children(t.parentNode);return n[n.length-1]===t},"first-of-type":function(t){return e.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n[n.length-1]===t},"only-child":function(t){var n=e.DOM._children(t.parentNode);return n.length===1&&n[0]===t},"only-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n.length===1&&n[0]===t},empty:function(e){return e.childNodes.length===0},not:function(t,n){return!e.Selector.test(t,n)},contains:function(e,t){var n=e.innerText||e.textContent||"";return n.indexOf(t)>-1},checked:function(e){return e.checked===!0||e.selected===!0},enabled:function(e){return e.disabled!==undefined&&!e.disabled},disabled:function(e){return e.disabled}}),e.mix(e.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),e.Selector.combinators["~"]={axis:"previousSibling"}},"@VERSION@",{requires:["selector-native","selector-css2"]});
YUI.add("selector-native",function(e,t){(function(e){e.namespace("Selector");var t="compareDocumentPosition",n="ownerDocument",r={_types:{esc:{token:"\ue000",re:/\\[:\[\]\(\)#\.\'\>+~"]/gi},attr:{token:"\ue001",re:/(\[[^\]]*\])/g},pseudo:{token:"\ue002",re:/(\([^\)]*\))/g}},useNative:!0,_escapeId:function(e){return e&&(e=e.replace(/([:\[\]\(\)#\.'<>+~"])/g,"\\$1")),e},_compare:"sourceIndex"in e.config.doc.documentElement?function(e,t){var n=e.sourceIndex,r=t.sourceIndex;return n===r?0:n>r?1:-1}:e.config.doc.documentElement[t]?function(e,n){return e[t](n)&4?-1:1}:function(e,t){var r,i,s;return e&&t&&(r=e[n].createRange(),r.setStart(e,0),i=t[n].createRange(),i.setStart(t,0),s=r.compareBoundaryPoints(1,i)),s},_sort:function(t){return t&&(t=e.Array(t,0,!0),t.sort&&t.sort(r._compare)),t},_deDupe:function(e){var t=[],n,r;for(n=0;r=e[n++];)r._found||(t[t.length]=r,r._found=!0);for(n=0;r=t[n++];)r._found=null,r.removeAttribute("_found");return t},query:function(t,n,i,s){n=n||e.config.doc;var o=[],u=e.Selector.useNative&&e.config.doc.querySelector&&!s,a=[[t,n]],f,l,c,h=u?e.Selector._nativeQuery:e.Selector._bruteQuery;if(t&&h){!s&&(!u||n.tagName)&&(a=r._splitQueries(t,n));for(c=0;f=a[c++];)l=h(f[0],f[1],i),i||(l=e.Array(l,0,!0)),l&&(o=o.concat(l));a.length>1&&(o=r._sort(r._deDupe(o)))}return i?o[0]||null:o},_replaceSelector:function(t){var n=e.Selector._parse("esc",t),i,s;return t=e.Selector._replace("esc",t),s=e.Selector._parse("pseudo",t),t=r._replace("pseudo",t),i=e.Selector._parse("attr",t),t=e.Selector._replace("attr",t),{esc:n,attrs:i,pseudos:s,selector:t}},_restoreSelector:function(t){var n=t.selector;return n=e.Selector._restore("attr",n,t.attrs),n=e.Selector._restore("pseudo",n,t.pseudos),n=e.Selector._restore("esc",n,t.esc),n},_replaceCommas:function(t){var n=e.Selector._replaceSelector(t),t=n.selector;return t&&(t=t.replace(/,/g,"\ue007"),n.selector=t,t=e.Selector._restoreSelector(n)),t},_splitQueries:function(t,n){t.indexOf(",")>-1&&(t=e.Selector._replaceCommas(t));var r=t.split("\ue007"),i=[],s="",o,u,a;if(n){n.nodeType===1&&(o=e.Selector._escapeId(e.DOM.getId(n)),o||(o=e.guid(),e.DOM.setId(n,o)),s='[id="'+o+'"] ');for(u=0,a=r.length;u<a;++u)t=s+r[u],i.push([t,n])}return i},_nativeQuery:function(t,n,r){if((e.UA.webkit||e.UA.opera)&&t.indexOf(":checked")>-1&&e.Selector.pseudos&&e.Selector.pseudos.checked)return e.Selector.query(t,n,r,!0);try{return n["querySelector"+(r?"":"All")](t)}catch(i){return e.Selector.query(t,n,r,!0)}},filter:function(t,n){var r=[],i,s;if(t&&n)for(i=0;s=t[i++];)e.Selector.test(s,n)&&(r[r.length]=s);return r},test:function(t,r,i){var s=!1,o=!1,u,a,f,l,c,h,p,d,v;if(t&&t.tagName)if(typeof r=="function")s=r.call(t,t);else{u=r.split(","),!i&&!e.DOM.inDoc(t)&&(a=t.parentNode,a?i=a:(c=t[n].createDocumentFragment(),c.appendChild(t),i=c,o=!0)),i=i||t[n],h=e.Selector._escapeId(e.DOM.getId(t)),h||(h=e.guid(),e.DOM.setId(t,h));for(p=0;v=u[p++];){v+='[id="'+h+'"]',l=e.Selector.query(v,i);for(d=0;f=l[d++];)if(f===t){s=!0;break}if(s)break}o&&c.removeChild(t)}return s},ancestor:function(t,n,r){return e.DOM.ancestor(t,function(t){return e.Selector.test(t,n)},r)},_parse:function(t,n){return n.match(e.Selector._types[t].re)},_replace:function(t,n){var r=e.Selector._types[t];return n.replace(r.re,r.token)},_restore:function(t,n,r){if(r){var i=e.Selector._types[t].token,s,o;for(s=0,o=r.length;s<o;++s)n=n.replace(i,r[s])}return n}};e.mix(e.Selector,r,!0)})(e)},"@VERSION@",{requires:["dom-base"]});
YUI.add("selector",function(e,t){},"@VERSION@",{requires:["selector-native"]});
YUI.add("shim-plugin",function(e,t){function n(e){this.init(e)}n.CLASS_NAME="yui-node-shim",n.TEMPLATE='<iframe class="'+n.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>',n.prototype={init:function(e){this._host=e.host,this.initEvents(),this.insert(),this.sync()},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this)},getShim:function(){return this._shim||(this._shim=e.Node.create(n.TEMPLATE,this._host.get("ownerDocument")))},insert:function(){var e=this._host;this._shim=e.insertBefore(this.getShim(),e.get("firstChild"))},sync:function(){var e=this._shim,t=this._host;e&&e.setAttrs({width:t.getStyle("width"),height:t.getStyle("height")})},destroy:function(){var e=this._shim;e&&e.remove(!0),this._resizeHandle.detach()}},n.NAME="Shim",n.NS="shim",e.namespace("Plugin"),e.Plugin.Shim=n},"@VERSION@",{requires:["node-style","node-pluginhost"]});
YUI.add("slider-base",function(e,t){function r(){r.superclass.constructor.apply(this,arguments)}var n=e.Attribute.INVALID_VALUE;e.SliderBase=e.extend(r,e.Widget,{initializer:function(){this.axis=this.get("axis"),this._key={dim:this.axis==="y"?"height":"width",minEdge:this.axis==="y"?"top":"left",maxEdge:this.axis==="y"?"bottom":"right",xyIndex:this.axis==="y"?1:0},this.publish("thumbMove",{defaultFn:this._defThumbMoveFn,queuable:!0})},renderUI:function(){var e=this.get("contentBox");this.rail=this.renderRail(),this._uiSetRailLength(this.get("length")),this.thumb=this.renderThumb(),this.rail.appendChild(this.thumb),e.appendChild(this.rail),e.addClass(this.getClassName(this.axis))},renderRail:function(){var t=this.getClassName("rail","cap",this._key.minEdge),n=this.getClassName("rail","cap",this._key.maxEdge);return e.Node.create(e.Lang.sub(this.RAIL_TEMPLATE,{railClass:this.getClassName("rail"),railMinCapClass:t,railMaxCapClass:n}))},_uiSetRailLength:function(e){this.rail.setStyle(this._key.dim,e)},renderThumb:function(){this._initThumbUrl();var t=this.get("thumbUrl");return e.Node.create(e.Lang.sub(this.THUMB_TEMPLATE,{thumbClass:this.getClassName("thumb"),thumbShadowClass:this.getClassName("thumb","shadow"),thumbImageClass:this.getClassName("thumb","image"),thumbShadowUrl:t,thumbImageUrl:t,thumbAriaLabelId:this.getClassName("label",e.guid())}))},_onThumbClick:function(e){this.thumb.focus()},bindUI:function(){var t=this.get("boundingBox"),n=e.UA.opera?"press:":"down:",r=n+"38,40,33,34,35,36",i=n+"37,39",s=n+"37+meta,39+meta";t.on("key",this._onDirectionKey,r,this),t.on("key",this._onLeftRightKey,i,this),t.on("key",this._onLeftRightKeyMeta,s,this),this.thumb.on("click",this._onThumbClick,this),this._bindThumbDD(),this._bindValueLogic(),this.after("disabledChange",this._afterDisabledChange),this.after("lengthChange",this._afterLengthChange)},_incrMinor:function(){this.set("value",this.get("value")+this.get("minorStep"))},_decrMinor:function(){this.set("value",this.get("value")-this.get("minorStep"))},_incrMajor:function(){this.set("value",this.get("value")+this.get("majorStep"))},_decrMajor:function(){this.set("value",this.get("value")-this.get("majorStep"))},_setToMin:function(e){this.set("value",this.get("min"))},_setToMax:function(e){this.set("value",this.get("max"))},_onDirectionKey:function(e){e.preventDefault();if(this.get("disabled")===!1)switch(e.charCode){case 38:this._incrMinor();break;case 40:this._decrMinor();break;case 36:this._setToMin();break;case 35:this._setToMax();break;case 33:this._incrMajor();break;case 34:this._decrMajor()}},_onLeftRightKey:function(e){e.preventDefault();if(this.get("disabled")===!1)switch(e.charCode){case 37:this._decrMinor();break;case 39:this._incrMinor()}},_onLeftRightKeyMeta:function(e){e.preventDefault();if(this.get("disabled")===!1)switch(e.charCode){case 37:this._setToMin();break;case 39:this._setToMax()}},_bindThumbDD:function(){var t={constrain:this.rail};t["stick"+this.axis.toUpperCase()]=!0,this._dd=new e.DD.Drag({node:this.thumb,bubble:!1,on:{"drag:start":e.bind(this._onDragStart,this)},after:{"drag:drag":e.bind(this._afterDrag,this),"drag:end":e.bind(this._afterDragEnd,this)}}),this._dd.plug(e.Plugin.DDConstrained,t)},_bindValueLogic:function(){},_uiMoveThumb:function(e,t){this.thumb&&(this.thumb.setStyle(this._key.minEdge,e+"px"),t||(t={}),t.offset=e,this.fire("thumbMove",t))},_onDragStart:function(e){this.fire("slideStart",{ddEvent:e,originEvent:e})},_afterDrag:function(e){var t=e.info.xy[this._key.xyIndex],n=e.target.con._regionCache[this._key.minEdge];this.fire("thumbMove",{offset:t-n,ddEvent:e,originEvent:e})},_afterDragEnd:function(e){this.fire("slideEnd",{ddEvent:e,originEvent:e})},_afterDisabledChange:function(e){this._dd.set("lock",e.newVal)},_afterLengthChange:function(e){this.get("rendered")&&(this._uiSetRailLength(e.newVal),this.syncUI())},syncUI:function(){this._dd.con.resetCache(),this._syncThumbPosition(),this.thumb.set("aria-valuemin",this.get("min")),this.thumb.set("aria-valuemax",this.get("max")),this._dd.set("lock",this.get("disabled"))},_syncThumbPosition:function(){},_setAxis:function(e){return e=(e+"").toLowerCase(),e==="x"||e==="y"?e:n},_setLength:function(e){e=(e+"").toLowerCase();var t=parseFloat(e,10),r=e.replace(/[\d\.\-]/g,"")||this.DEF_UNIT;return t>0?t+r:n},_initThumbUrl:function(){if(!this.get("thumbUrl")){var t=this.getSkinName()||"sam",n=e.config.base;n.indexOf("http://yui.yahooapis.com/combo")===0&&(n="http://yui.yahooapis.com/"+e.version+"/build/"),this.set("thumbUrl",n+"slider-base/assets/skins/"+t+"/thumb-"+this.axis+".png")}},BOUNDING_TEMPLATE:"<span></span>",CONTENT_TEMPLATE:"<span></span>",RAIL_TEMPLATE:'<span class="{railClass}"><span class="{railMinCapClass}"></span><span class="{railMaxCapClass}"></span></span>',THUMB_TEMPLATE:'<span class="{thumbClass}" aria-labelledby="{thumbAriaLabelId}" aria-valuetext="" aria-valuemax="" aria-valuemin="" aria-valuenow="" role="slider" tabindex="0"><img src="{thumbShadowUrl}" alt="Slider thumb shadow" class="{thumbShadowClass}"><img src="{thumbImageUrl}" alt="Slider thumb" class="{thumbImageClass}"></span>'},{NAME:"sliderBase",ATTRS:{axis:{value:"x",writeOnce:!0,setter:"_setAxis",lazyAdd:!1},length:{value:"150px",setter:"_setLength"},thumbUrl:{value:null,validator:e.Lang.isString}}})},"@VERSION@",{requires:["widget","dd-constrain","event-key"],skinnable:!0});
YUI.add("slider-value-range",function(e,t){function o(){this._initSliderValueRange()}var n="min",r="max",i="value",s=Math.round;e.SliderValueRange=e.mix(o,{prototype:{_factor:1,_initSliderValueRange:function(){},_bindValueLogic:function(){this.after({minChange:this._afterMinChange,maxChange:this._afterMaxChange,valueChange:this._afterValueChange})},_syncThumbPosition:function(){this._calculateFactor(),this._setPosition(this.get(i))},_calculateFactor:function(){var e=this.get("length"),t=this.thumb.getStyle(this._key.dim),i=this.get(n),s=this.get(r);e=parseFloat(e)||150,t=parseFloat(t)||15,this._factor=(s-i)/(e-t)},_defThumbMoveFn:function(e){e.source!=="set"&&this.set(i,this._offsetToValue(e.offset))},_offsetToValue:function(e){var t=s(e*this._factor)+this.get(n);return s(this._nearestValue(t))},_valueToOffset:function(e){var t=s((e-this.get(n))/this._factor);return t},getValue:function(){return this.get(i)},setValue:function(e){return this.set(i,e)},_afterMinChange:function(e){this._verifyValue(),this._syncThumbPosition()},_afterMaxChange:function(e){this._verifyValue(),this._syncThumbPosition()},_verifyValue:function(){var e=this.get(i),t=this._nearestValue(e);e!==t&&this.set(i,t)},_afterValueChange:function(e){var t=e.newVal;this._setPosition(t,{source:"set"})},_setPosition:function(e,t){this._uiMoveThumb(this._valueToOffset(e),t),this.thumb.set("aria-valuenow",e),this.thumb.set("aria-valuetext",e)},_validateNewMin:function(t){return e.Lang.isNumber(t)},_validateNewMax:function(t){return e.Lang.isNumber(t)},_setNewValue:function(t){return e.Lang.isNumber(t)?s(this._nearestValue(t)):e.Attribute.INVALID_VALUE},_nearestValue:function(e){var t=this.get(n),i=this.get(r),s;return s=i>t?i:t,t=i>t?t:i,i=s,e<t?t:e>i?i:e}},ATTRS:{min:{value:0,validator:"_validateNewMin"},max:{value:100,validator:"_validateNewMax"},minorStep:{value:1},majorStep:{value:10},value:{value:0,setter:"_setNewValue"}}},!0)},"@VERSION@",{requires:["slider-base"]});
YUI.add("stylesheet",function(e,t){function v(t,r){var o,a,f,l={},h,p,m,g,y,b;if(!e.instanceOf(this,v))return new v(t,r);if(t){if(e.Node&&t instanceof e.Node)a=t._node;else if(t.nodeName)a=t;else if(s(t)){if(t&&u[t])return u[t];a=n.getElementById(t.replace(/^#/,d))}if(a&&u[e.stamp(a)])return u[e.stamp(a)]}if(!a||!/^(?:style|link)$/i.test(a.nodeName))a=n.createElement("style"),a.type="text/css";s(t)&&(t.indexOf("{")!=-1?a.styleSheet?a.styleSheet.cssText=t:a.appendChild(n.createTextNode(t)):r||(r=t));if(!a.parentNode||a.parentNode.nodeName.toLowerCase()!=="head")o=(a.ownerDocument||n).getElementsByTagName("head")[0],o.appendChild(a);f=a.sheet||a.styleSheet,h=f&&"cssRules"in f?"cssRules":"rules",m="deleteRule"in f?function(e){f.deleteRule(e)}:function(e){f.removeRule(e)},p="insertRule"in f?function(e,t,n){f.insertRule(e+" {"+t+"}",n)}:function(e,t,n){f.addRule(e,t,n)};for(g=f[h].length-1;g>=0;--g)y=f[h][g],b=y.selectorText,l[b]?(l[b].style.cssText+=";"+y.style.cssText,m(g)):l[b]=y;v.register(e.stamp(a),this),r&&v.register(r,this),e.mix(this,{getId:function(){return e.stamp(a)},enable:function(){return f.disabled=!1,this},disable:function(){return f.disabled=!0,this},isEnabled:function(){return!f.disabled},set:function(e,t){var n=l[e],r=e.split(/\s*,\s*/),i,s;if(r.length>1){for(i=r.length-1;i>=0;--i)this.set(r[i],t);return this}return v.isValidSelector(e)?(n?n.style.cssText=v.toCssText(t,n.style.cssText):(s=f[h].length,t=v.toCssText(t),t&&(p(e,t,s),l[e]=f[h][s])),this):this},unset:function(t,n){var r=l[t],s=t.split(/\s*,\s*/),o=!n,u,a;if(s.length>1){for(a=s.length-1;a>=0;--a)this.unset(s[a],n);return this}if(r){if(!o){n=e.Array(n),i.cssText=r.style.cssText;for(a=n.length-1;a>=0;--a)c(i,n[a]);i.cssText?r.style.cssText=i.cssText:o=!0}if(o){u=f[h];for(a=u.length-1;a>=0;--a)if(u[a]===r){delete l[t],m(a);break}}}return this},getCssText:function(e){var t,n,r;if(s(e))return t=l[e.split(/\s*,\s*/)[0]],t?t.style.cssText:null;n=[];for(r in l)l.hasOwnProperty(r)&&(t=l[r],n.push(t.selectorText+" {"+t.style.cssText+"}"));return n.join("\n")}})}var n=e.config.doc,r=n.createElement("p"),i=r.style,s=e.Lang.isString,o={},u={},a="cssFloat"in i?"cssFloat":"styleFloat",f,l,c,h="opacity",p="float",d="";l=h in i?function(e){e.opacity=d}:function(e){e.filter=d},i.border="1px solid red",i.border=d,c=i.borderLeft?function(e,t){var n;t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a);if(s(e[t]))switch(t){case h:case"filter":l(e);break;case"font":e.font=e.fontStyle=e.fontVariant=e.fontWeight=e.fontSize=e.lineHeight=e.fontFamily=d;break;default:for(n in e)n.indexOf(t)===0&&(e[n]=d)}}:function(e,t){t!==a&&t.toLowerCase().indexOf(p)!=-1&&(t=a),s(e[t])&&(t===h?l(e):e[t]=d)},f=function(t,s){var o=t.styleFloat||t.cssFloat||t[p],u=e.Lang.trim,f;try{i.cssText=s||d}catch(l){r=n.createElement("p"),i=r.style,i.cssText=s||d}o&&!t[a]&&(t=e.merge(t),delete t.styleFloat,delete t.cssFloat,delete t[p],t[a]=o);for(f in t)if(t.hasOwnProperty(f))try{i[f]=u(t[f])}catch(c){}return i.cssText},e.mix(v,{toCssText:h in i?f:function(t,n){return h in t&&(t=e.merge(t,{filter:"alpha(opacity="+t.opacity*100+")"}),delete t.opacity),f(t,n)},register:function(e,t){return!!(e&&t instanceof v&&!u[e]&&(u[e]=t))},isValidSelector:function(e){var t=!1;return e&&s(e)&&(o.hasOwnProperty(e)||(o[e]=!/\S/.test(e.replace(/\s+|\s*[+~>]\s*/g," ").replace(/([^ ])\[.*?\]/g,"$1").replace(/([^ ])::?[a-z][a-z\-]+[a-z](?:\(.*?\))?/ig,"$1").replace(/(?:^| )[a-z0-6]+/ig," ").replace(/\\./g,d).replace(/[.#]\w[\w\-]*/g,d))),t=o[e]),t}},!0),e.StyleSheet=v},"@VERSION@",{requires:["yui-base"]});
YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"@VERSION@",{requires:["yui-base"],optional:["dump"]});
YUI.add("tabview-base",function(e,t){var n=e.ClassNameManager.getClassName,r="tabview",i="tab",s="panel",o="selected",u={},a=".",f=function(){this.init.apply(this,arguments)};f.NAME="tabviewBase",f._classNames={tabview:n(r),tabviewPanel:n(r,s),tabviewList:n(r,"list"),tab:n(i),tabLabel:n(i,"label"),tabPanel:n(i,s),selectedTab:n(i,o),selectedPanel:n(i,s,o)},f._queries={tabview:a+f._classNames.tabview,tabviewList:"> ul",tab:"> ul > li",tabLabel:"> ul > li > a",tabviewPanel:"> div",tabPanel:"> div > div",selectedTab:"> ul > "+a+f._classNames.selectedTab,selectedPanel:"> div "+a+f._classNames.selectedPanel},e.mix(f.prototype,{init:function(t){t=t||u,this._node=t.host||e.one(t.node),this.refresh()},initClassNames:function(t){var n=e.TabviewBase._classNames;e.Object.each(e.TabviewBase._queries,function(e,r){if(n[r]){var i=this.all(e);t!==undefined&&(i=i.item(t)),i&&i.addClass(n[r])}},this._node),this._node.addClass(n.tabview)},_select:function(t){var n=e.TabviewBase._classNames,r=e.TabviewBase._queries,i=this._node,s=i.one(r.selectedTab),o=i.one(r.selectedPanel),u=i.all(r.tab).item(t),a=i.all(r.tabPanel).item(t);s&&s.removeClass(n.selectedTab),o&&o.removeClass(n.selectedPanel),u&&u.addClass(n.selectedTab),a&&a.addClass(n.selectedPanel)},initState:function(){var t=e.TabviewBase._queries,n=this._node,r=n.one(t.selectedTab),i=r?n.all(t.tab).indexOf(r):0;this._select(i)},_scrubTextNodes:function(){this._node.one(e.TabviewBase._queries.tabviewList).get("childNodes").each(function(e){e.get("nodeType")===3&&e.remove()})},refresh:function(){this._scrubTextNodes(),this.initClassNames(),this.initState(),this.initEvents()},tabEventName:"click",initEvents:function(){this._node.delegate(this.tabEventName,this.onTabEvent,e.TabviewBase._queries.tab,this)},onTabEvent:function(t){t.preventDefault(),this._select(this._node.all(e.TabviewBase._queries.tab).indexOf(t.currentTarget))},destroy:function(){this._node.detach(this.tabEventName)}}),e.TabviewBase=f},"@VERSION@",{requires:["node-event-delegate","classnamemanager"]});
YUI.add("tabview",function(e,t){var n=".",r=e.Base.create("tabView",e.Widget,[e.WidgetParent],{_afterChildAdded:function(){this.get("contentBox").focusManager.refresh()},_defListNodeValueFn:function(){var t=e.Node.create(this.LIST_TEMPLATE);return t.addClass(e.TabviewBase._classNames.tabviewList),t},_defPanelNodeValueFn:function(){var t=e.Node.create(this.PANEL_TEMPLATE);return t.addClass(e.TabviewBase._classNames.tabviewPanel),t},_afterChildRemoved:function(e){var t=e.index,n=this.get("selection");n||(n=this.item(t-1)||this.item(0),n&&n.set("selected",1)),this.get("contentBox").focusManager.refresh()},_initAria:function(t){var n=t.one(e.TabviewBase._queries.tabviewList);n&&n.setAttrs({role:"tablist"})},bindUI:function(){this.get("contentBox").plug(e.Plugin.NodeFocusManager,{descendants:n+e.TabviewBase._classNames.tabLabel,keys:{next:"down:39",previous:"down:37"},circular:!0}),this.after("render",this._setDefSelection),this.after("addChild",this._afterChildAdded),this.after("removeChild",this._afterChildRemoved)},renderUI:function(){var e=this.get("contentBox");this._renderListBox(e),this._renderPanelBox(e),this._childrenContainer=this.get("listNode"),this._renderTabs(e),this._initAria(e)},_setDefSelection:function(){var e=this.get("selection")||this.item(0);this.some(function(t){if(t.get("selected"))return e=t,!0}),e&&(this.set("selection",e),e.set("selected",1))},_renderListBox:function(e){var t=this.get("listNode");t.inDoc()||e.append(t)},_renderPanelBox:function(e){var t=this.get("panelNode");t.inDoc()||e.append(t)},_renderTabs:function(t){var r=e.TabviewBase._classNames,i=e.TabviewBase._queries,s=t.all(i.tab),o=this.get("panelNode"),u=o?this.get("panelNode").get("children"):null,a=this;s&&(s.addClass(r.tab),t.all(i.tabLabel).addClass(r.tabLabel),t.all(i.tabPanel).addClass(r.tabPanel),s.each(function(e,t){var i=u?u.item(t):null;a.add({boundingBox:e,contentBox:e.one(n+r.tabLabel),panelNode:i})}))}},{ATTRS:{defaultChildType:{value:"Tab"},listNode:{setter:function(t){return t=e.one(t),t&&t.addClass(e.TabviewBase._classNames.tabviewList),t},valueFn:"_defListNodeValueFn"},panelNode:{setter:function(t){return t=e.one(t),t&&t.addClass(e.TabviewBase._classNames.tabviewPanel),t},valueFn:"_defPanelNodeValueFn"},tabIndex:{value:null}},HTML_PARSER:{listNode:function(t){return t.one(e.TabviewBase._queries.tabviewList)},panelNode:function(t){return t.one(e.TabviewBase._queries.tabviewPanel)}},LIST_TEMPLATE:"<ul></ul>",PANEL_TEMPLATE:"<div></div>"});r.prototype.LIST_TEMPLATE=r.LIST_TEMPLATE,r.prototype.PANEL_TEMPLATE=r.PANEL_TEMPLATE,e.TabView=r,e.Tab=e.Base.create("tab",e.Widget,[e.WidgetChild],{BOUNDING_TEMPLATE:"<li></li>",CONTENT_TEMPLATE:"<a></a>",PANEL_TEMPLATE:"<div></div>",_uiSetSelectedPanel:function(t){this.get("panelNode").toggleClass(e.TabviewBase._classNames.selectedPanel,t)},_afterTabSelectedChange:function(e){this._uiSetSelectedPanel(e.newVal)},_afterParentChange:function(e){e.newVal?this._add():this._remove()},_initAria:function(){var t=this.get("contentBox"),n=t.get("id"),r=this.get("panelNode");n||(n=e.guid(),t.set("id",n)),t.set("role","tab"),t.get("parentNode").set("role","presentation"),r.setAttrs({role:"tabpanel","aria-labelledby":n})},syncUI:function(){var t=e.TabviewBase._classNames;this.get("boundingBox").addClass(t.tab),this.get("contentBox").addClass(t.tabLabel),this.set("label",this.get("label")),this.set("content",this.get("content")),this._uiSetSelectedPanel(this.get("selected"))},bindUI:function(){this.after("selectedChange",this._afterTabSelectedChange),this.after("parentChange",this._afterParentChange)},renderUI:function(){this._renderPanel(),this._initAria()},_renderPanel:function(){this.get("parent").get("panelNode").appendChild(this.get("panelNode"))},_add:function(){var e=this.get("parent").get("contentBox"),t=e.get("listNode"),n=e.get("panelNode");t&&t.appendChild(this.get("boundingBox")),n&&n.appendChild(this.get("panelNode"))},_remove:function(){this.get("boundingBox").remove(),this.get("panelNode").remove()},_onActivate:function(e){e.target===this&&(e.domEvent.preventDefault(),e.target.set("selected",1))},initializer:function(){this.publish(this.get("triggerEvent"),{defaultFn:this._onActivate})},_defLabelGetter:function(){return this.get("contentBox").getHTML()},_defLabelSetter:function(e){var t=this.get("contentBox");return t.getHTML()!==e&&t.setHTML(e),e},_defContentSetter:function(e){var t=this.get("panelNode");return t.getHTML()!==e&&t.setHTML(e),e},_defContentGetter:function(){return this.get("panelNode").getHTML()},_defPanelNodeValueFn:function(){var t=e.TabviewBase._classNames,n=this.get("contentBox").get("href")||"",r=this.get("parent"),i=n.indexOf("#"),s;return n=n.substr(i),n.charAt(0)==="#"&&(s=e.one(n),s&&s.addClass(t.tabPanel)),!s&&r&&(s=r.get("panelNode").get("children").item(this.get("index"))),s||(s=e.Node.create(this.PANEL_TEMPLATE),s.addClass(t.tabPanel)),s}},{ATTRS:{triggerEvent:{value:"click"},label:{setter:"_defLabelSetter",getter:"_defLabelGetter"},content:{setter:"_defContentSetter",getter:"_defContentGetter"},panelNode:{setter:function(t){return t=e.one(t),t&&t.addClass(e.TabviewBase._classNames.tabPanel),t},valueFn:"_defPanelNodeValueFn"},tabIndex:{value:null,validator:"_validTabIndex"}},HTML_PARSER:{selected:function(){var t=this.get("boundingBox").hasClass(e.TabviewBase._classNames.selectedTab)?1:0;return t}}})},"@VERSION@",{requires:["widget","widget-parent","widget-child","tabview-base","node-pluginhost","node-focusmanager"],skinnable:!0});
YUI.add("template-base",function(e,t){function n(t,n){this.defaults=n,this.engine=t||e.Template.Micro,this.engine||e.error("No template engine loaded.")}n._registry={},n.register=function(e,t){return n._registry[e]=t,t},n.get=function(e){return n._registry[e]},n.render=function(t,r,i){var s=n._registry[t],o="";return s?o=s(r,i):e.error('Unregistered template: "'+t+'"'),o},n.prototype={compile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.compile(t,n)},precompile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.precompile(t,n)},render:function(t,n,r){return r=r?e.merge(this.defaults,r):this.defaults,this.engine.render?this.engine.render(t,n,r):this.engine.compile(t,r)(n,r)},revive:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.revive?this.engine.revive(t,n):t}},e.Template=e.Template?e.mix(n,e.Template):n},"@VERSION@",{requires:["yui-base"]});
YUI.add("template-micro",function(e,t){var n=e.namespace("Template.Micro");n.options={code:/<%([\s\S]+?)%>/g,escapedOutput:/<%=([\s\S]+?)%>/g,rawOutput:/<%==([\s\S]+?)%>/g,stringEscape:/\\|'|\r|\n|\t|\u2028|\u2029/g,stringReplace:{"\\":"\\\\","'":"\\'","\r":"\\r","\n":"\\n","	":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"}},n.compile=function(t,r){var i=[],s="\uffff",o="\ufffe",u;return r=e.merge(n.options,r),u="var $b='', $v=function (v){return v || v === 0 ? v : $b;}, $t='"+t.replace(/\ufffe|\uffff/g,"").replace(r.rawOutput,function(e,t){return o+(i.push("'+\n$v("+t+")+\n'")-1)+s}).replace(r.escapedOutput,function(e,t){return o+(i.push("'+\n$e($v("+t+"))+\n'")-1)+s}).replace(r.code,function(e,t){return o+(i.push("';\n"+t+"\n$t+='")-1)+s}).replace(r.stringEscape,function(e){return r.stringReplace[e]||""}).replace(/\ufffe(\d+)\uffff/g,function(e,t){return i[parseInt(t,10)]}).replace(/\n\$t\+='';\n/g,"\n")+"';\nreturn $t;",r.precompile?"function (Y, $e, data) {\n"+u+"\n}":this.revive(new Function("Y","$e","data",u))},n.precompile=function(e,t){return t||(t={}),t.precompile=!0,this.compile(e,t)},n.render=function(e,t,n){return this.compile(e,n)(t)},n.revive=function(t){return function(n){return n||(n={}),t.call(n,e,e.Escape.html,n)}}},"@VERSION@",{requires:["escape"]});
YUI.add("text-data-wordbreak",function(e,t){e.namespace("Text.Data").WordBreak={aletter:"[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f3\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u24b6-\u24e9\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u303b\u303c\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790\ua791\ua7a0-\ua7a9\ua7fa-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]",midnumlet:"['\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]",midletter:"[:\u00b7\u00b7\u05f4\u2027\ufe13\ufe55\uff1a]",midnum:"[,;;\u0589\u060c\u060d\u066c\u07f8\u2044\ufe10\ufe14\ufe50\ufe54\uff0c\uff1b]",numeric:"[0-9\u0660-\u0669\u066b\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9]",cr:"\\r",lf:"\\n",newline:"[\f\u0085\u2028\u2029]",extend:"[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1baa\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]"
,format:"[\u00ad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200e\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb]",katakana:"[\u3031-\u3035\u309b\u309c\u30a0-\u30fa\u30fc-\u30ff\u31f0-\u31ff\u32d0-\u32fe\u3300-\u3357\uff66-\uff9d]",extendnumlet:"[_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\u00a1\u00ab\u00b7\u00bb\u00bf;\u00b7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]"}},"@VERSION@",{requires:["yui-base"]});
YUI.add("text-wordbreak",function(e,t){var n=e.Text,r=n.Data.WordBreak,i=0,s=1,o=2,u=3,a=4,f=5,l=6,c=7,h=8,p=9,d=10,v=11,m=12,g=[new RegExp(r.aletter),new RegExp(r.midnumlet),new RegExp(r.midletter),new RegExp(r.midnum),new RegExp(r.numeric),new RegExp(r.cr),new RegExp(r.lf),new RegExp(r.newline),new RegExp(r.extend),new RegExp(r.format),new RegExp(r.katakana),new RegExp(r.extendnumlet)],y="",b=new RegExp("^"+r.punctuation+"$"),w=/\s/,E={getWords:function(e,t){var n=0,r=E._classify(e),i=r.length,s=[],o=[],u,a,f;t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),a=t.includePunctuation,f=t.includeWhitespace;for(;n<i;++n)u=e.charAt(n),s.push(u),E._isWordBoundary(r,n)&&(s=s.join(y),s&&(f||!w.test(s))&&(a||!b.test(s))&&o.push(s),s=[]);return o},getUniqueWords:function(t,n){return e.Array.unique(E.getWords(t,n))},isWordBoundary:function(e,t){return E._isWordBoundary(E._classify(e),t)},_classify:function(e){var t,n=[],r=0,i,s,o=e.length,u=g.length,a;for(;r<o;++r){t=e.charAt(r),a=m;for(i=0;i<u;++i){s=g[i];if(s&&s.test(t)){a=i;break}}n.push(a)}return n},_isWordBoundary:function(e,t){var n,r=e[t],m=e[t+1],g;return t<0||t>e.length-1&&t!==0?!1:r===i&&m===i?!1:(g=e[t+2],r!==i||m!==o&&m!==s||g!==i?(n=e[t-1],r!==o&&r!==s||m!==i||n!==i?r!==a&&r!==i||m!==a&&m!==i?r!==u&&r!==s||m!==a||n!==a?r!==a||m!==u&&m!==s||g!==a?r===h||r===p||n===h||n===p||m===h||m===p?!1:r===f&&m===l?!1:r===c||r===f||r===l?!0:m===c||m===f||m===l?!0:r===d&&m===d?!1:m!==v||r!==i&&r!==a&&r!==d&&r!==v?r!==v||m!==i&&m!==a&&m!==d?!0:!1:!1:!1:!1:!1:!1):!1)}};n.WordBreak=E},"@VERSION@",{requires:["array-extras","text-data-wordbreak"]});
YUI.add("timers",function(e,t){function i(e){return s}function s(e){this.capacity=this.snap(e),this.length=0,this.front=0,this.initialize()}function o(e,t,n,r,i){for(var s=0;s<i;++s)n[s+r]=e[s+t]}function u(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}function v(){while(a.length>0){var e=a.shift();try{e.call()}catch(t){if(d)throw l(),t;setTimeout(function(){throw t},0)}}f=!1}function y(e){d&&p.domain&&(e=p.domain.bind(e)),a.push(e),f||(l(),f=!0)}function b(e){var t;return b._asynchronizer(function(){t||e()}),{cancel:function(){t=1}}}var n={},r=e.config.global;"use strict",n.exports=s,s.prototype.push=function(e){var t=this.length;this.capacity<=t&&this.grow(this.snap(this.capacity*this.growFactor));var n=this.front+t&this.capacity-1;this[n]=e,this.length=t+1},s.prototype.shift=function(){var e=this.front,t=this[e];return this[e]=void 0,this.front=e+1&this.capacity-1,this.length--,t},s.prototype.grow=function(e){var t=this.front,n=this.capacity,r=new Array(n),i=this.length;o(this,0,r,0,n),this.capacity=e,this.initialize(),this.front=0;if(t+i<=n)o(r,t,this,0,i);else{var s=i-(t+i&n-1);o(r,t,this,0,s),o(r,0,this,s,i-s)}},s.prototype.initialize=function(){var e=this.capacity;for(var t=0;t<e;++t)this[t]=void 0},s.prototype.snap=function(e){return typeof e!="number"?this.minCapacity:u(Math.min(this.maxCapacity,Math.max(this.minCapacity,e)))},s.prototype.maxCapacity=1<<30|0,s.prototype.minCapacity=16,s.prototype.growFactor=8,"use strict";var s=i("./queue"),a=new s(1024),f=!1,l=void 0,c=typeof setImmediate=="function",h,p=r.process,d=!!p&&{}.toString.call(p)==="[object process]";if(d)l=function(){var e=p.domain;e&&(h=h||(1,i)("domain"),h.active=p.domain=null),f&&c?setImmediate(v):p.nextTick(v),e&&(h.active=p.domain=e)};else if(c)l=function(){setImmediate(v)};else if(typeof MessageChannel!="undefined"){var m=new MessageChannel;m.port1.onmessage=function(){l=g,m.port1.onmessage=v,v()};var g=function(){m.port2.postMessage(0)};l=function(){setTimeout(v,0),g()}}else l=function(){setTimeout(v,0)};n.exports=y,b._asynchronizer=y,b._impl="asap",e.soon=b},"@VERSION@",{requires:["yui-base"]});
YUI.add("transition-timer",function(e,t){var n=e.Transition;e.mix(n.prototype,{_start:function(){n.useNative?this._runNative():this._runTimer()},_runTimer:function(){var t=this;t._initAttrs(),n._running[e.stamp(t)]=t,t._startTime=new Date,n._startTimer()},_endTimer:function(){var t=this;delete n._running[e.stamp(t)],t._startTime=null},_runFrame:function(){var e=new Date-this._startTime;this._runAttrs(e)},_runAttrs:function(t){var r=this,i=r._node,s=r._config,o=e.stamp(i),u=n._nodeAttrs[o],a=n.behaviors,f=!1,l=!1,c,h,p,d,v,m,g,y,b;for(h in u)if((p=u[h])&&p.transition===r){g=p.duration,m=p.delay,v=(t-m)/1e3,y=t,c={type:"propertyEnd",propertyName:h,config:s,elapsedTime:v},d=b in a&&"set"in a[b]?a[b].set:n.DEFAULT_SETTER,f=y>=g,y>g&&(y=g);if(!m||t>=m)d(r,h,p.from,p.to,y-m,g-m,p.easing,p.unit),f&&(delete u[h],r._count--,s[h]&&s[h].on&&s[h].on.end&&s[h].on.end.call(e.one(i),c),!l&&r._count<=0&&(l=!0,r._end(v),r._endTimer()))}},_initAttrs:function(){var t=this,r=n.behaviors,i=e.stamp(t._node),s=n._nodeAttrs[i],o,u,a,f,l,c,h,p,d,v,m;for(c in s)(o=s[c])&&o.transition===t&&(u=o.duration*1e3,a=o.delay*1e3,f=o.easing,l=o.value,c in t._node.style||c in e.DOM.CUSTOM_STYLES?(v=c in r&&"get"in r[c]?r[c].get(t,c):n.DEFAULT_GETTER(t,c),p=n.RE_UNITS.exec(v),h=n.RE_UNITS.exec(l),v=p?p[1]:v,m=h?h[1]:l,d=h?h[2]:p?p[2]:"",!d&&n.RE_DEFAULT_UNIT.test(c)&&(d=n.DEFAULT_UNIT),typeof f=="string"&&(f.indexOf("cubic-bezier")>-1?f=f.substring(13,f.length-1).split(","):n.easings[f]&&(f=n.easings[f])),o.from=Number(v),o.to=Number(m),o.unit=d,o.easing=f,o.duration=u+a,o.delay=a):(delete s[c],t._count--))},destroy:function(){this.detachAll(),this._node=null}},!0),e.mix(e.Transition,{_runtimeAttrs:{},RE_DEFAULT_UNIT:/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,DEFAULT_UNIT:"px",intervalTime:20,behaviors:{left:{get:function(t,n){return e.DOM._getAttrOffset(t._node,n)}}},DEFAULT_SETTER:function(t,r,i,s,o,u,a,f){i=Number(i),s=Number(s);var l=t._node,c=n.cubicBezier(a,o/u);c=i+c[0]*(s-i);if(l){if(r in l.style||r in e.DOM.CUSTOM_STYLES)f=f||"",e.DOM.setStyle(l,r,c+f)}else t._end()},DEFAULT_GETTER:function(t,n){var r=t._node,i="";if(n in r.style||n in e.DOM.CUSTOM_STYLES)i=e.DOM.getComputedStyle(r,n);return i},_startTimer:function(){n._timer||(n._timer=setInterval(n._runFrame,n.intervalTime))},_stopTimer:function(){clearInterval(n._timer),n._timer=null},_runFrame:function(){var e=!0,t;for(t in n._running)n._running[t]._runFrame&&(e=!1,n._running[t]._runFrame());e&&n._stopTimer()},cubicBezier:function(e,t){var n=0,r=0,i=e[0],s=e[1],o=e[2],u=e[3],a=1,f=0,l=a-3*o+3*i-n,c=3*o-6*i+3*n,h=3*i-3*n,p=n,d=f-3*u+3*s-r,v=3*u-6*s+3*r,m=3*s-3*r,g=r,y=((l*t+c)*t+h)*t+p,b=((d*t+v)*t+m)*t+g;return[y,b]},easings:{ease:[.25,0,1,.25],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},_running:{},_timer:null,RE_UNITS:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/},!0),n.behaviors.top=n.behaviors.bottom=n.behaviors.right=n.behaviors.left,e.Transition=n},"@VERSION@",{requires:["transition"]});
YUI.add("transition",function(e,t){var n="",r="",i=e.config.doc,s="documentElement",o=i[s].style,u="transition",a="transitionProperty",f,l,c,h,p,d,v={},m=["Webkit","Moz"],g={Webkit:"webkitTransitionEnd"},y=function(){this.init.apply(this,arguments)};y._TRANSFORM="transform",y._toCamel=function(e){return e=e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}),e},y._toHyphen=function(e){return e=e.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(e,t,n,r){var i=(t?"-"+t.toLowerCase():"")+n;return r&&(i+="-"+r.toLowerCase()),i}),e},y.SHOW_TRANSITION="fadeIn",y.HIDE_TRANSITION="fadeOut",y.useNative=!1,"transition"in o&&"transitionProperty"in o&&"transitionDuration"in o&&"transitionTimingFunction"in o&&"transitionDelay"in o?(y.useNative=!0,y.supported=!0):e.Array.each(m,function(e){var t=e+"Transition";t in i[s].style&&(n=e,r=y._toHyphen(e)+"-",y.useNative=!0,y.supported=!0,y._VENDOR_PREFIX=e)}),typeof o.transform=="undefined"&&e.Array.each(m,function(e){var t=e+"Transform";typeof o[t]!="undefined"&&(y._TRANSFORM=t)}),n&&(u=n+"Transition",a=n+"TransitionProperty"),f=r+"transition-property",l=r+"transition-duration",c=r+"transition-timing-function",h=r+"transition-delay",p="transitionend",d="on"+n.toLowerCase()+"transitionend",p=g[n]||p,y.fx={},y.toggles={},y._hasEnd={},y._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i,e.Node.DOM_EVENTS[p]=1,y.NAME="transition",y.DEFAULT_EASING="ease",y.DEFAULT_DURATION=.5,y.DEFAULT_DELAY=0,y._nodeAttrs={},y.prototype={constructor:y,init:function(e,t){var n=this;return n._node=e,!n._running&&t&&(n._config=t,e._transition=n,n._duration="duration"in t?t.duration:n.constructor.DEFAULT_DURATION,n._delay="delay"in t?t.delay:n.constructor.DEFAULT_DELAY,n._easing=t.easing||n.constructor.DEFAULT_EASING,n._count=0,n._running=!1),n},addProperty:function(t,n){var r=this,i=this._node,s=e.stamp(i),o=e.one(i),u=y._nodeAttrs[s],a,f,l,c,h;u||(u=y._nodeAttrs[s]={}),c=u[t],n&&n.value!==undefined?h=n.value:n!==undefined&&(h=n,n=v),typeof h=="function"&&(h=h.call(o,o)),c&&c.transition&&c.transition!==r&&c.transition._count--,r._count++,l=(typeof n.duration!="undefined"?n.duration:r._duration)||1e-4,u[t]={value:h,duration:l,delay:typeof n.delay!="undefined"?n.delay:r._delay,easing:n.easing||r._easing,transition:r},a=e.DOM.getComputedStyle(i,t),f=typeof h=="string"?a:parseFloat(a),y.useNative&&f===h&&setTimeout(function(){r._onNativeEnd.call(i,{propertyName:t,elapsedTime:l})},l*1e3)},removeProperty:function(t){var n=this,r=y._nodeAttrs[e.stamp(n._node)];r&&r[t]&&(delete r[t],n._count--)},initAttrs:function(t){var n,r=this._node;t.transform&&!t[y._TRANSFORM]&&(t[y._TRANSFORM]=t.transform,delete t.transform);for(n in t)t.hasOwnProperty(n)&&!y._reKeywords.test(n)&&(this.addProperty(n,t[n]),r.style[n]===""&&e.DOM.setStyle(r,n,e.DOM.getComputedStyle(r,n)))},run:function(t){var n=this,r=n._node,i=n._config,s={type:"transition:start",config:i};return n._running||(n._running=!0,i.on&&i.on.start&&i.on.start.call(e.one(r),s),n.initAttrs(n._config),n._callback=t,n._start()),n},_start:function(){this._runNative()},_prepDur:function(e){return e=parseFloat(e)*1e3,e+"ms"},_runNative:function(){var t=this,n=t._node,r=e.stamp(n),i=n.style,s=n.ownerDocument.defaultView.getComputedStyle(n),o=y._nodeAttrs[r],u="",a=s[y._toCamel(f)],d=f+": ",v=l+": ",m=c+": ",g=h+": ",b,w,E;a!=="all"&&(d+=a+",",v+=s[y._toCamel(l)]+",",m+=s[y._toCamel(c)]+",",g+=s[y._toCamel(h)]+",");for(E in o)b=y._toHyphen(E),w=o[E],(w=o[E])&&w.transition===t&&(E in n.style?(v+=t._prepDur(w.duration)+",",g+=t._prepDur(w.delay)+",",m+=w.easing+",",d+=b+",",u+=b+": "+w.value+"; "):this.removeProperty(E));d=d.replace(/,$/,";"),v=v.replace(/,$/,";"),m=m.replace(/,$/,";"),g=g.replace(/,$/,";"),y._hasEnd[r]||(n.addEventListener(p,t._onNativeEnd,""),y._hasEnd[r]=!0),i.cssText+=d+v+m+g+u},_end:function(t){var n=this,r=n._node,i=n._callback,s=n._config,o={type:"transition:end",config:s,elapsedTime:t},u=e.one(r);n._running=!1,n._callback=null,r&&(s.on&&s.on.end?setTimeout(function(){s.on.end.call(u,o),i&&i.call(u,o)},1):i&&setTimeout(function(){i.call(u,o)},1))},_endNative:function(e){var t=this._node,n=t.ownerDocument.defaultView.getComputedStyle(t,"")[y._toCamel(f)];e=y._toHyphen(e),typeof n=="string"&&(n=n.replace(new RegExp("(?:^|,\\s)"+e+",?"),","),n=n.replace(/^,|,$/,""),t.style[u]=n)},_onNativeEnd:function(t){var n=this,r=e.stamp(n),i=t,s=y._toCamel(i.propertyName),o=i.elapsedTime,u=y._nodeAttrs[r],f=u[s],l=f?f.transition:null,c,h;l&&(l.removeProperty(s),l._endNative(s),h=l._config[s],c={type:"propertyEnd",propertyName:s,elapsedTime:o,config:h},h&&h.on&&h.on.end&&h.on.end.call(e.one(n),c),l._count<=0&&(l._end(o),n.style[a]=""))},destroy:function(){var e=this,t=e._node;t&&(t.removeEventListener(p,e._onNativeEnd,!1),e._node=null)}},e.Transition=y,e.TransitionNative=y,e.Node.prototype.transition=function(t,n,r){var i=y._nodeAttrs[e.stamp(this._node)],s=i?i.transition||null:null,o,u;if(typeof t=="string"){typeof n=="function"&&(r=n,n=null),o=y.fx[t];if(n&&typeof n=="object"){n=e.clone(n);for(u in o)o.hasOwnProperty(u)&&(u in n||(n[u]=o[u]))}else n=o}else r=n,n=t;return s&&!s._running?s.init(this,n):s=new y(this._node,n),s.run(r),this},e.Node.prototype.show=function(t,n,r){return this._show(),t&&e.Transition&&(typeof t!="string"&&!t.push&&(typeof n=="function"&&(r=n,n=t),t=y.SHOW_TRANSITION),this.transition(t,n,r)),this},e.NodeList.prototype.show=function(t,n,r){var i=this._nodes,s=0,o;while(o=i[s++])e.one(o).show(t,n,r);return this};var b=function(e,t,n){return function(){t&&t.call(e),n&&typeof n=="function"&&n.apply(e._node,arguments)}};e.Node.prototype.hide=function(t,n,r){return t&&e.Transition?(typeof n=="function"&&(r=n,n=null),r=b(this,this._hide,r),typeof t!="string"&&!t.push&&(typeof n=="function"&&(r=n,n=t),t=y.HIDE_TRANSITION),this.transition(t,n,r)):this._hide(),this},e.NodeList.prototype.hide=function(t,n,r){var i=this._nodes,s=0,o;while(o=i[s++])e.one(o).hide(t,n,r);return this},e.NodeList.prototype
.transition=function(t,n,r){var i=this._nodes,s=this.size(),o=0,r=r===!0,u;while(u=i[o++])o<s&&r?e.one(u).transition(t):e.one(u).transition(t,n);return this},e.Node.prototype.toggleView=function(t,n,r){this._toggles=this._toggles||[],r=arguments[arguments.length-1];if(typeof t!="string"){n=t,this._toggleView(n,r);return}return typeof n=="function"&&(n=undefined),typeof n=="undefined"&&t in this._toggles&&(n=!this._toggles[t]),n=n?1:0,n?this._show():r=b(this,this._hide,r),this._toggles[t]=n,this.transition(e.Transition.toggles[t][n],r),this},e.NodeList.prototype.toggleView=function(t,n,r){var i=this._nodes,s=0,o;while(o=i[s++])o=e.one(o),o.toggleView.apply(o,arguments);return this},e.mix(y.fx,{fadeOut:{opacity:0,duration:.5,easing:"ease-out"},fadeIn:{opacity:1,duration:.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:.75,easing:"ease-out"},sizeIn:{height:function(e){return e.get("scrollHeight")+"px"},width:function(e){return e.get("scrollWidth")+"px"},duration:.5,easing:"ease-in",on:{start:function(){var e=this.getStyle("overflow");e!=="hidden"&&(this.setStyle("overflow","hidden"),this._transitionOverflow=e)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}}}),e.mix(y.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]})},"@VERSION@",{requires:["node-style"]});
YUI.add("tree-labelable",function(e,t){function n(){}function r(e,t){this._serializable=this._serializable.concat("label"),"label"in t&&(this.label=t.label)}n.prototype={initializer:function(){this.nodeExtensions=this.nodeExtensions.concat(e.Tree.Node.Labelable)}},e.Tree.Labelable=n,r.prototype={label:""},e.Tree.Node.Labelable=r},"@VERSION@",{requires:["tree"]});
YUI.add("tree-node",function(e,t){function n(t,n){n||(n={}),this.id=this._yuid=n.id||this.id||e.guid("treeNode-"),this.tree=t,this.children=n.children||[],this.data=n.data||{},this.state=n.state||{},n.canHaveChildren?this.canHaveChildren=n.canHaveChildren:this.children.length&&(this.canHaveChildren=!0),e.mix(this,n);for(var r=0,i=this.children.length;r<i;r++)this.children[r].parent=this}n.prototype={_isIndexStale:!0,_isYUITreeNode:!0,_serializable:["canHaveChildren","data","id","state"],append:function(e,t){return this.tree.appendNode(this,e,t)},depth:function(){if(this.isRoot())return 0;var e=0,t=this.parent;while(t)e+=1,t=t.parent;return e},empty:function(e){return this.tree.emptyNode(this,e)},find:function(e,t,n){return this.tree.findNode(this,e,t,n)},hasChildren:function(){return!!this.children.length},index:function(){return this.parent?this.parent.indexOf(this):-1},indexOf:function(e){var t;return this._isIndexStale&&this._reindex(),t=this._indexMap[e.id],typeof t=="undefined"?-1:t},insert:function(e,t){return this.tree.insertNode(this,e,t)},isInTree:function(){return this.tree&&this.tree.rootNode===this?!0:!!this.parent&&!!this.parent.isInTree()},isRoot:function(){return!!this.tree&&this.tree.rootNode===this},next:function(){if(this.parent)return this.parent.children[this.index()+1]},prepend:function(e,t){return this.tree.prependNode(this,e,t)},previous:function(){if(this.parent)return this.parent.children[this.index()-1]},remove:function(e){return this.tree.removeNode(this,e)},size:function(){var e=this.children,t=e.length,n=t;for(var r=0;r<t;r++)n+=e[r].size();return n},toJSON:function(){var e={},t=this.state,n,r,i;if(t.destroyed)return null;for(n=0,i=this._serializable.length;n<i;n++)r=this._serializable[n],r in this&&(e[r]=this[r]);if(this.canHaveChildren){e.children=[];for(n=0,i=this.children.length;n<i;n++)e.children.push(this.children[n].toJSON())}return e},traverse:function(e,t,n){return this.tree.traverseNode(this,e,t,n)},_reindex:function(){var e=this.children,t={},n,r;for(n=0,r=e.length;n<r;n++)t[e[n].id]=n;this._indexMap=t,this._isIndexStale=!1}},e.namespace("Tree").Node=n},"@VERSION@");
YUI.add("tree-openable",function(e,t){function i(){}function s(){}var n="close",r="open";i.prototype={initializer:function(){this.nodeExtensions=this.nodeExtensions.concat(e.Tree.Node.Openable)},closeNode:function(e,t){return e.canHaveChildren&&e.isOpen()&&this._fireTreeEvent(n,{node:e,src:t&&t.src},{defaultFn:this._defCloseFn,silent:t&&t.silent}),this},openNode:function(e,t){return e.canHaveChildren&&!e.isOpen()&&this._fireTreeEvent(r,{node:e,src:t&&t.src},{defaultFn:this._defOpenFn,silent:t&&t.silent}),this},toggleOpenNode:function(e,t){return e.isOpen()?this.closeNode(e,t):this.openNode(e,t)},_defCloseFn:function(e){delete e.node.state.open},_defOpenFn:function(e){e.node.state.open=!0}},e.Tree.Openable=i,s.prototype={close:function(e){return this.tree.closeNode(this,e),this},isOpen:function(){return!!this.state.open||this.isRoot()},open:function(e){return this.tree.openNode(this,e),this},toggleOpen:function(e){return this.tree.toggleOpenNode(this,e),this}},e.Tree.Node.Openable=s},"@VERSION@",{requires:["tree"]});
YUI.add("tree",function(e,t){var n=e.Lang,r="add",i="clear",s="remove",o=e.Base.create("tree",e.Base,[],{nodeClass:e.Tree.Node,nodeExtensions:[],_isYUITree:!0,_rootNodeConfig:{canHaveChildren:!0},initializer:function(e){e||(e={}),e.nodeClass&&(this.nodeClass=e.nodeClass),e.nodeExtensions&&(this.nodeExtensions=this.nodeExtensions.concat(e.nodeExtensions)),this._published||(this._published={}),this._nodeMap={},this.onceAfter("initializedChange",function(){this._composeNodeClass(),this.clear(e.rootNode,{silent:!0}),e.nodes&&this.insertNode(this.rootNode,e.nodes,{silent:!0})})},destructor:function(){this.destroyNode(this.rootNode,{silent:!0}),this.children=null,this.rootNode=null,this._nodeClass=null,this._nodeMap=null,this._published=null},appendNode:function(t,n,r){return this.insertNode(t,n,e.merge(r,{index:t.children.length,src:"append"}))},clear:function(e,t){return this._fireTreeEvent(i,{rootNode:this.createNode(e||this._rootNodeConfig),src:t&&t.src},{defaultFn:this._defClearFn,silent:t&&t.silent})},createNode:function(t){t||(t={});if(t._isYUITreeNode)return t.state.destroyed?(e.error("Cannot insert a node that has already been destroyed.",null,"tree"),null):(this._adoptNode(t),t);if(t.children){var n=[];for(var r=0,i=t.children.length;r<i;r++)n.push(this.createNode(t.children[r]));t=e.merge(t,{children:n})}var s=new this._nodeClass(this,t);return this._nodeMap[s.id]=s},destroyNode:function(e,t){var n,r,i;t||(t={});for(r=0,i=e.children.length;r<i;r++)n=e.children[r],n.parent=null,this.destroyNode(n,t);return e.parent&&this.removeNode(e,t),e.children=[],e.data={},e.state={destroyed:!0},e.tree=null,e._indexMap={},delete this._nodeMap[e.id],this},emptyNode:function(e,t){var n=e.children,r=[];for(var i=n.length-1;i>-1;--i)r[i]=this.removeNode(n[i],t);return r},findNode:function(e,t,n,r){var i=null;return typeof t=="function"&&(r=n,n=t,t={}),this.traverseNode(e,t,function(e){if(n.call(r,e))return i=e,o.STOP_TRAVERSAL}),i},getNodeById:function(e){return this._nodeMap[e]},insertNode:function(e,t,i){i||(i={}),e||(e=this.rootNode);if("length"in t&&n.isArray(t)){var s="index"in i,o=[],u;for(var a=0,f=t.length;a<f;a++)u=this.insertNode(e,t[a],i),u&&(o.push(u),s&&(i.index+=1));return o}t=this.createNode(t);if(t){var l=i.index;typeof l=="undefined"&&(l=this._getDefaultNodeIndex(e,t,i)),this._fireTreeEvent(r,{index:l,node:t,parent:e,src:i.src||"insert"},{defaultFn:this._defAddFn,silent:i.silent})}return t},prependNode:function(t,n,r){return this.insertNode(t,n,e.merge(r,{index:0,src:"prepend"}))},removeNode:function(e,t){return t||(t={}),this._fireTreeEvent(s,{destroy:!!t.destroy,node:e,parent:e.parent,src:t.src||"remove"},{defaultFn:this._defRemoveFn,silent:t.silent}),e},size:function(){return this.rootNode.size()+1},toJSON:function(){return this.rootNode.toJSON()},traverseNode:function(t,n,r,i){if(t.state.destroyed){e.error("Cannot traverse a node that has been destroyed.",null,"tree");return}typeof n=="function"&&(i=r,r=n,n={}),n||(n={});var s=o.STOP_TRAVERSAL,u=typeof n.depth=="undefined";if(r.call(i,t)===s)return s;var a=t.children;if(u||n.depth>0){var f=u?n:{depth:n.depth-1};for(var l=0,c=a.length;l<c;l++)if(this.traverseNode(a[l],f,r,i)===s)return s}},_adoptNode:function(e,t){var n=e.tree;if(n===this)return;for(var r=0,i=e.children.length;r<i;r++)this._adoptNode(e.children[r],{silent:!0});n.removeNode(e,t),delete n._nodeMap[e.id];if(!(e instanceof this._nodeClass)||n._nodeClass!==this._nodeClass)e=this.createNode(e.toJSON());e.tree=this,this._nodeMap[e.id]=e},_composeNodeClass:function(){var t=this.nodeClass,n=this.nodeExtensions,r;if(typeof t=="string"){t=e.Object.getValue(e,t.split("."));if(!t){e.error("Node class not found: "+t,null,"tree");return}this.nodeClass=t}if(!n.length){this._nodeClass=t;return}r=function(){var e=r._nodeExtensions;t.apply(this,arguments);for(var n=0,i=e.length;n<i;n++)e[n].apply(this,arguments)},e.extend(r,t);for(var i=0,s=n.length;i<s;i++)e.mix(r.prototype,n[i].prototype,!0);r._nodeExtensions=n,this._nodeClass=r},_fireTreeEvent:function(e,t,n){return n&&n.silent?n.defaultFn&&(t.silent=!0,n.defaultFn.call(this,t)):(n&&n.defaultFn&&!this._published[e]&&(this._published[e]=this.publish(e,{defaultFn:n.defaultFn})),this.fire(e,t)),this},_getDefaultNodeIndex:function(e){return e.children.length},_removeNodeFromParent:function(e){var t=e.parent,n;if(t){n=t.indexOf(e);if(n>-1){var r=t.children;n===r.length-1?r.pop():(r.splice(n,1),t._isIndexStale=!0),e.parent=null}}},_defAddFn:function(e){var t=e.index,n=e.node,r=e.parent,i;if(n.parent){if(n.parent===r){i=r.indexOf(n);if(i===t)return;i<t&&(t-=1)}this.removeNode(n,{silent:e.silent,src:"add"})}n.parent=r,r.children.splice(t,0,n),r.canHaveChildren=!0,r._isIndexStale=!0},_defClearFn:function(e){var t=e.rootNode;this.rootNode&&this.destroyNode(this.rootNode,{silent:!0}),this._nodeMap={},this._nodeMap[t.id]=t,this.rootNode=t,this.children=t.children},_defRemoveFn:function(e){var t=e.node;e.destroy?this.destroyNode(t,{silent:!0}):e.parent?this._removeNodeFromParent(t):this.rootNode===t&&(this.rootNode=this.createNode(this._rootNodeConfig),this.children=this.rootNode.children)}},{STOP_TRAVERSAL:{}});e.Tree=e.mix(o,e.Tree)},"@VERSION@",{requires:["base-build","tree-node"]});
YUI.add("view",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}e.View=e.extend(n,e.Base,{containerTemplate:"<div/>",events:{},template:"",_allowAdHocAttrs:!0,initializer:function(t){t||(t={}),t.containerTemplate&&(this.containerTemplate=t.containerTemplate),t.template&&(this.template=t.template),this.events=t.events?e.merge(this.events,t.events):this.events,this.after("containerChange",this._afterContainerChange)},destroy:function(e){return e&&(e.remove||e["delete"])&&this.onceAfter("destroy",function(){this._destroyContainer()}),n.superclass.destroy.call(this)},destructor:function(){this.detachEvents(),delete this._container},attachEvents:function(t){var n=this.get("container"),r=e.Object.owns,i,s,o,u;this.detachEvents(),t||(t=this.events);for(u in t){if(!r(t,u))continue;s=t[u];for(o in s){if(!r(s,o))continue;i=s[o],typeof i=="string"&&(i=this[i]);if(!i)continue;this._attachedViewEvents.push(n.delegate(o,i,u,this))}}return this},create:function(t){return t?e.one(t):e.Node.create(this.containerTemplate)},detachEvents:function(){return e.Array.each(this._attachedViewEvents,function(e){e&&e.detach()}),this._attachedViewEvents=[],this},remove:function(){var e=this.get("container");return e&&e.remove(),this},render:function(){return this},_destroyContainer:function(){var e=this.get("container");e&&e.remove(!0)},_getContainer:function(e){return this._container||(e?(this._container=e,this.attachEvents()):(e=this._container=this.create(),this._set("container",e))),e},_afterContainerChange:function(){this.attachEvents(this.events)}},{NAME:"view",ATTRS:{container:{getter:"_getContainer",setter:e.one,writeOnce:!0}},_NON_ATTRS_CFG:["containerTemplate","events","template"]})},"@VERSION@",{requires:["base-build","node-event-delegate"]});
YUI.add("widget-autohide",function(e,t){function m(t){e.after(this._bindUIAutohide,this,f),e.after(this._syncUIAutohide,this,l),this.get(c)&&(this._bindUIAutohide(),this._syncUIAutohide())}var n="widgetAutohide",r="autohide",i="clickoutside",s="focusoutside",o="document",u="key",a="esc",f="bindUI",l="syncUI",c="rendered",h="boundingBox",p="visible",d="Change",v=e.ClassNameManager.getClassName;m.ATTRS={hideOn:{validator:e.Lang.isArray,valueFn:function(){return[{node:e.one(o),eventName:u,keyCode:a}]}}},m.prototype={_uiHandlesAutohide:null,destructor:function(){this._detachUIHandlesAutohide()},_bindUIAutohide:function(){this.after(p+d,this._afterHostVisibleChangeAutohide),this.after("hideOnChange",this._afterHideOnChange)},_syncUIAutohide:function(){this._uiSetHostVisibleAutohide(this.get(p))},_uiSetHostVisibleAutohide:function(t){t?e.later(1,this,"_attachUIHandlesAutohide"):this._detachUIHandlesAutohide()},_attachUIHandlesAutohide:function(){if(this._uiHandlesAutohide)return;var t=this.get(h),n=e.bind(this.hide,this),r=[],i=this,s=this.get("hideOn"),o=0,u={node:undefined,ev:undefined,keyCode:undefined};for(;o<s.length;o++)u.node=s[o].node,u.ev=s[o].eventName,u.keyCode=s[o].keyCode,!u.node&&!u.keyCode&&u.ev?r.push(t.on(u.ev,n)):u.node&&!u.keyCode&&u.ev?r.push(u.node.on(u.ev,n)):u.node&&u.keyCode&&u.ev&&r.push(u.node.on(u.ev,n,u.keyCode));this._uiHandlesAutohide=r},_detachUIHandlesAutohide:function(){e.each(this._uiHandlesAutohide,function(e){e.detach()}),this._uiHandlesAutohide=null},_afterHostVisibleChangeAutohide:function(e){this._uiSetHostVisibleAutohide(e.newVal)},_afterHideOnChange:function(e){this._detachUIHandlesAutohide(),this.get(p)&&this._attachUIHandlesAutohide()}},e.WidgetAutohide=m},"@VERSION@",{requires:["base-build","event-key","event-outside","widget"]});
YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={valueFn:"_defaultBB",setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n))},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),t&&(n&&t.empty(),t.remove(P)),r||(n&&e.empty(),e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultBB:function(){var e=this.get(w),t=this.CONTENT_TEMPLATE===null;return e&&t?e:null},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName
)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"@VERSION@",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
YUI.add("widget-buttons",function(e,t){function p(e){return!!e.getDOMNode}function d(){this._buttonsHandles={}}var n=e.Array,r=e.Lang,i=e.Object,s=e.Plugin.Button,o=e.Widget,u=e.WidgetStdMod,a=e.ClassNameManager.getClassName,f=r.isArray,l=r.isNumber,c=r.isString,h=r.isValue;d.ATTRS={buttons:{getter:"_getButtons",setter:"_setButtons",value:{}},defaultButton:{readOnly:!0,value:null}},d.CLASS_NAMES={button:a("button"),buttons:o.getClassName("buttons"),primary:a("button","primary")},d.HTML_PARSER={buttons:function(e){return this._parseButtons(e)}},d.NON_BUTTON_NODE_CFG=["action","classNames","context","events","isDefault","section"],d.prototype={BUTTONS:{},BUTTONS_TEMPLATE:"<span />",DEFAULT_BUTTONS_SECTION:u.FOOTER,initializer:function(){this._stdModNode||e.error("WidgetStdMod must be added to a Widget before WidgetButtons."),this._mapButtons(this.get("buttons")),this._updateDefaultButton(),this.after({buttonsChange:e.bind("_afterButtonsChange",this),defaultButtonChange:e.bind("_afterDefaultButtonChange",this)}),e.after(this._bindUIButtons,this,"bindUI"),e.after(this._syncUIButtons,this,"syncUI")},destructor:function(){i.each(this._buttonsHandles,function(e){e.detach()}),delete this._buttonsHandles,delete this._buttonsMap,delete this._defaultButton},addButton:function(e,t,r){var i=this.get("buttons"),s,o;return p(e)||(e=this._mergeButtonConfig(e),t||(t=e.section)),t||(t=this.DEFAULT_BUTTONS_SECTION),s=i[t]||(i[t]=[]),l(r)||(r=s.length),s.splice(r,0,e),o=n.indexOf(s,e),this.set("buttons",i,{button:e,section:t,index:o,src:"add"}),this},getButton:function(e,t){if(!h(e))return;var n=this._buttonsMap,r;return t||(t=this.DEFAULT_BUTTONS_SECTION),l(e)?(r=this.get("buttons"),r[t]&&r[t][e]):arguments.length>1?n[t+":"+e]:n[e]},removeButton:function(e,t){if(!h(e))return this;var r=this.get("buttons"),s;return l(e)?(t||(t=this.DEFAULT_BUTTONS_SECTION),s=e,e=r[t][s]):(c(e)&&(e=this.getButton.apply(this,arguments)),i.some(r,function(r,i){s=n.indexOf(r,e);if(s>-1)return t=i,!0})),e&&s>-1&&(r[t].splice(s,1),this.set("buttons",r,{button:e,section:t,index:s,src:"remove"})),this},_bindUIButtons:function(){var t=e.bind("_afterContentChangeButtons",this);this.after({visibleChange:e.bind("_afterVisibleChangeButtons",this),headerContentChange:t,bodyContentChange:t,footerContentChange:t})},_createButton:function(t){var r,i,o,u,a,f,l,h;if(p(t))return e.one(t.getDOMNode()).plug(s);r=e.merge({context:this,events:"click",label:t.value},t),i=e.merge(r),o=d.NON_BUTTON_NODE_CFG;for(u=0,a=o.length;u<a;u+=1)delete i[o[u]];return t=s.createNode(i),l=r.context,f=r.action,c(f)&&(f=e.bind(f,l)),h=t.on(r.events,f,l),this._buttonsHandles[e.stamp(t,!0)]=h,t.setData("name",this._getButtonName(r)),t.setData("default",this._getButtonDefault(r)),n.each(n(r.classNames),t.addClass,t),t},_getButtonContainer:function(t,n){var r=u.SECTION_CLASS_NAMES[t],i=d.CLASS_NAMES.buttons,s=this.get("contentBox"),o,a;return o="."+r+" ."+i,a=s.one(o),!a&&n&&(a=e.Node.create(this.BUTTONS_TEMPLATE),a.addClass(i)),a},_getButtonDefault:function(e){var t=p(e)?e.getData("default"):e.isDefault;return c(t)?t.toLowerCase()==="true":!!t},_getButtonName:function(e){var t;return p(e)?t=e.getData("name")||e.get("name"):t=e&&(e.name||e.type),t},_getButtons:function(e){var t={};return i.each(e,function(e,n){t[n]=e.concat()}),t},_mapButton:function(e,t){var n=this._buttonsMap,r=this._getButtonName(e),i=this._getButtonDefault(e);r&&(n[r]=e,n[t+":"+r]=e),i&&(this._defaultButton=e)},_mapButtons:function(e){this._buttonsMap={},this._defaultButton=null,i.each(e,function(e,t){var n,r;for(n=0,r=e.length;n<r;n+=1)this._mapButton(e[n],t)},this)},_mergeButtonConfig:function(t){var n,r,i,s,o,u;return t=c(t)?{name:t}:e.merge(t),t.srcNode&&(s=t.srcNode,o=s.get("tagName").toLowerCase(),u=s.get(o==="input"?"value":"text"),n={disabled:!!s.get("disabled"),isDefault:this._getButtonDefault(s),name:this._getButtonName(s)},u&&(n.label=u),e.mix(t,n,!1,null,0,!0)),i=this._getButtonName(t),r=this.BUTTONS&&this.BUTTONS[i],r&&e.mix(t,r,!1,null,0,!0),t},_parseButtons:function(e){var t="."+d.CLASS_NAMES.button,r=["header","body","footer"],i=null;return n.each(r,function(e){var n=this._getButtonContainer(e),r=n&&n.all(t),s;if(!r||r.isEmpty())return;s=[],r.each(function(e){s.push({srcNode:e})}),i||(i={}),i[e]=s},this),i},_setButtons:function(e){function r(e,r){if(!f(e))return;var i,s,o,u;for(i=0,s=e.length;i<s;i+=1)o=e[i],u=r,p(o)||(o=this._mergeButtonConfig(o),u||(u=o.section)),o=this._createButton(o),u||(u=t),(n[u]||(n[u]=[])).push(o)}var t=this.DEFAULT_BUTTONS_SECTION,n={};return f(e)?r.call(this,e):i.each(e,r,this),n},_syncUIButtons:function(){this._uiSetButtons(this.get("buttons")),this._uiSetDefaultButton(this.get("defaultButton")),this._uiSetVisibleButtons(this.get("visible"))},_uiInsertButton:function(e,t,n){var r=d.CLASS_NAMES.button,i=this._getButtonContainer(t,!0),s=i.all("."+r);i.insertBefore(e,s.item(n)),this.setStdModContent(t,i,"after")},_uiRemoveButton:function(t,n,r){var i=e.stamp(t,this),s=this._buttonsHandles,o=s[i],u,a;o&&o.detach(),delete s[i],t.remove(),r||(r={}),r.preserveContent||(u=this._getButtonContainer(n),a=d.CLASS_NAMES.button,u&&u.all("."+a).isEmpty()&&(u.remove(),this._updateContentButtons(n)))},_uiSetButtons:function(e){var t=d.CLASS_NAMES.button,r=["header","body","footer"];n.each(r,function(n){var r=e[n]||[],i=r.length,s=this._getButtonContainer(n,i),o=!1,u,a,f,l;if(!s)return;u=s.all("."+t);for(a=0;a<i;a+=1)f=r[a],l=u.indexOf(f),l>-1?(u.splice(l,1),l!==a&&(s.insertBefore(f,a+1),o=!0)):(s.appendChild(f),o=!0);u.each(function(e){this._uiRemoveButton(e,n,{preserveContent:!0}),o=!0},this);if(i===0){s.remove(),this._updateContentButtons(n);return}o&&this.setStdModContent(n,s,"after")},this)},_uiSetDefaultButton:function(e,t){var n=d.CLASS_NAMES.primary;e&&e.addClass(n),t&&t.removeClass(n)},_uiSetVisibleButtons:function(e){if(!e)return;var t=this.get("defaultButton");t&&t.focus()},_unMapButton:function(e,t){var n=this._buttonsMap,r=this._getButtonName(e),i;r&&(n[r]===e&&delete 
n[r],i=t+":"+r,n[i]===e&&delete n[i]),this._defaultButton===e&&(this._defaultButton=null)},_updateDefaultButton:function(){var e=this._defaultButton;this.get("defaultButton")!==e&&this._set("defaultButton",e)},_updateContentButtons:function(e){var t=this.getStdModNode(e).get("childNodes");this.set(e+"Content",t.isEmpty()?null:t,{src:"buttons"})},_afterButtonsChange:function(e){var t=e.newVal,n=e.section,r=e.index,i=e.src,s;if(i==="add"){s=t[n][r],this._mapButton(s,n),this._updateDefaultButton(),this._uiInsertButton(s,n,r);return}if(i==="remove"){s=e.button,this._unMapButton(s,n),this._updateDefaultButton(),this._uiRemoveButton(s,n);return}this._mapButtons(t),this._updateDefaultButton(),this._uiSetButtons(t)},_afterContentChangeButtons:function(e){var t=e.src,n=e.stdModPosition,r=!n||n===u.REPLACE;r&&t!=="buttons"&&t!==o.UI_SRC&&this._uiSetButtons(this.get("buttons"))},_afterDefaultButtonChange:function(e){this._uiSetDefaultButton(e.newVal,e.prevVal)},_afterVisibleChangeButtons:function(e){this._uiSetVisibleButtons(e.newVal)}},e.WidgetButtons=d},"@VERSION@",{requires:["button-plugin","cssbutton","widget-stdmod"]});
YUI.add("widget-child",function(e,t){function r(){e.after(this._syncUIChild,this,"syncUI"),e.after(this._bindUIChild,this,"bindUI")}var n=e.Lang;r.ATTRS={selected:{value:0,validator:n.isNumber},index:{readOnly:!0,getter:function(){var e=this.get("parent"),t=-1;return e&&(t=e.indexOf(this)),t}},parent:{readOnly:!0},depth:{readOnly:!0,getter:function(){var e=this.get("parent"),t=this.get("root"),n=-1;while(e){n+=1;if(e==t)break;e=e.get("parent")}return n}},root:{readOnly:!0,getter:function(){var t=function(n){var r=n.get("parent"),i=n.ROOT_TYPE,s=r;return i&&(s=r&&e.instanceOf(r,i)),s?t(r):n};return t(this)}}},r.prototype={ROOT_TYPE:null,_getUIEventNode:function(){var e=this.get("root"),t;return e&&(t=e.get("boundingBox")),t},next:function(e){var t=this.get("parent"),n;return t&&(n=t.item(this.get("index")+1)),!n&&e&&(n=t.item(0)),n},previous:function(e){var t=this.get("parent"),n=this.get("index"),r;return t&&n>0&&(r=t.item([n-1])),!r&&e&&(r=t.item(t.size()-1)),r},remove:function(t){var r,i;return n.isNumber(t)?i=e.WidgetParent.prototype.remove.apply(this,arguments):(r=this.get("parent"),r&&(i=r.remove(this.get("index")))),i},isRoot:function(){return this==this.get("root")},ancestor:function(e){var t=this.get("root"),n;if(this.get("depth")>e){n=this.get("parent");while(n!=t&&n.get("depth")>e)n=n.get("parent")}return n},_uiSetChildSelected:function(e){var t=this.get("boundingBox"),n=this.getClassName("selected");e===0?t.removeClass(n):t.addClass(n)},_afterChildSelectedChange:function(e){this._uiSetChildSelected(e.newVal)},_syncUIChild:function(){this._uiSetChildSelected(this.get("selected"))},_bindUIChild:function(){this.after("selectedChange",this._afterChildSelectedChange)}},e.WidgetChild=r},"@VERSION@",{requires:["base-build","widget"]});
YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"@VERSION@",{requires:["widget-base"]});
YUI.add("widget-modality",function(e,t){function b(e){}var n="widget",r="renderUI",i="bindUI",s="syncUI",o="boundingBox",u="contentBox",a="rendered",f="visible",l="zIndex",c="Change",h=e.Lang.isBoolean,p=e.ClassNameManager.getClassName,d="maskShow",v="maskHide",m="clickoutside",g="focusoutside",y=function(){
/*! IS_POSITION_FIXED_SUPPORTED - Juriy Zaytsev (kangax) - http://yura.thinkweb2.com/cft/ */
;var t=e.config.doc,n=null,r,i;return t.createElement&&(r=t.createElement("div"),r&&r.style&&(r.style.position="fixed",r.style.top="10px",i=t.body,i&&i.appendChild&&i.removeChild&&(i.appendChild(r),n=r.offsetTop===10,i.removeChild(r)))),n}(),w="modal",E="mask",S={modal:p(n,w),mask:p(n,E)};b.ATTRS={maskNode:{getter:"_getMaskNode",readOnly:!0},modal:{value:!1,validator:h},focusOn:{valueFn:function(){return[{eventName:m},{eventName:g}]},validator:e.Lang.isArray}},b.CLASSES=S,b._GET_MASK=function(){var t=e.one("."+S.mask),n=e.one("win");return t?t:(t=e.Node.create("<div></div>").addClass(S.mask),y?t.setStyles({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",display:"block"}):t.setStyles({position:"absolute",width:n.get("winWidth")+"px",height:n.get("winHeight")+"px",top:"0",left:"0",display:"block"}),t)},b.STACK=[],b.prototype={initializer:function(){e.after(this._renderUIModal,this,r),e.after(this._syncUIModal,this,s),e.after(this._bindUIModal,this,i)},destructor:function(){this._uiSetHostVisibleModal(!1)},_uiHandlesModal:null,_renderUIModal:function(){var e=this.get(o);this._repositionMask(this),e.addClass(S.modal)},_bindUIModal:function(){this.after(f+c,this._afterHostVisibleChangeModal),this.after(l+c,this._afterHostZIndexChangeModal),this.after("focusOnChange",this._afterFocusOnChange),(!y||e.UA.ios&&e.UA.ios<5||e.UA.android&&e.UA.android<3)&&e.one("win").on("scroll",this._resyncMask,this)},_syncUIModal:function(){this._uiSetHostVisibleModal(this.get(f))},_focus:function(e){var t=this.get(o),n=t.get("tabIndex");t.set("tabIndex",n>=0?n:0),this.focus()},_blur:function(){this.blur()},_getMaskNode:function(){return b._GET_MASK()},_uiSetHostVisibleModal:function(t){var n=b.STACK,r=this.get("maskNode"),i=this.get("modal"),s,o;t?(e.Array.each(n,function(e){e._detachUIHandlesModal(),e._blur()}),n.unshift(this),this._repositionMask(this),this._uiSetHostZIndexModal(this.get(l)),i&&(r.show(),e.later(1,this,"_attachUIHandlesModal"),this.get(a)&&this._focus())):(o=e.Array.indexOf(n,this),o>=0&&n.splice(o,1),this._detachUIHandlesModal(),this._blur(),n.length?(s=n[0],this._repositionMask(s),s._uiSetHostZIndexModal(s.get(l)),s.get("modal")&&(e.later(1,s,"_attachUIHandlesModal"),s._focus())):r.getStyle("display")==="block"&&r.hide())},_uiSetHostZIndexModal:function(e){this.get("modal")&&this.get("maskNode").setStyle(l,e||0)},_attachUIHandlesModal:function(){if(this._uiHandlesModal||b.STACK[0]!==this)return;var t=this.get(o),n=this.get("maskNode"),r=this.get("focusOn"),i=e.bind(this._focus,this),s=[],u,a,f;for(u=0,a=r.length;u<a;u++)f={},f.node=r[u].node,f.ev=r[u].eventName,f.keyCode=r[u].keyCode,!f.node&&!f.keyCode&&f.ev?s.push(t.on(f.ev,i)):f.node&&!f.keyCode&&f.ev?s.push(f.node.on(f.ev,i)):f.node&&f.keyCode&&f.ev&&s.push(f.node.on(f.ev,i,f.keyCode));y||s.push(e.one("win").on("scroll",e.bind(function(e){n.setStyle("top",n.get("docScrollY"))},this))),this._uiHandlesModal=s},_detachUIHandlesModal:function(){e.each(this._uiHandlesModal,function(e){e.detach()}),this._uiHandlesModal=null},_afterHostVisibleChangeModal:function(e){this._uiSetHostVisibleModal(e.newVal)},_afterHostZIndexChangeModal:function(e){this._uiSetHostZIndexModal(e.newVal)},isNested:function(){var e=b.STACK.length,t=e>1?!0:!1;return t},_repositionMask:function(t){var n=this.get("modal"),r=t.get("modal"),i=this.get("maskNode"),s,u;if(n&&!r)i.remove(),this.fire(v);else if(!n&&r||n&&r)i.remove(),this.fire(v),s=t.get(o),u=s.get("parentNode")||e.one("body"),u.insert(i,s),this.fire(d)},_resyncMask:function(e){var t=e.currentTarget,n=t.get("docScrollX"),r=t.get("docScrollY"),i=t.get("innerWidth")||t.get("winWidth"),s=t.get("innerHeight")||t.get("winHeight"),o=this.get("maskNode");o.setStyles({top:r+"px",left:n+"px",width:i+"px",height:s+"px"})},_afterFocusOnChange:function(e){this._detachUIHandlesModal(),this.get(f)&&this._attachUIHandlesModal()}},e.WidgetModality=b},"@VERSION@",{requires:["base-build","event-outside","widget"],skinnable:!0});
YUI.add("widget-parent",function(e,t){function s(t){this.publish("addChild",{defaultTargetOnly:!0,defaultFn:this._defAddChildFn}),this.publish("removeChild",{defaultTargetOnly:!0,defaultFn:this._defRemoveChildFn}),this._items=[];var n,r;t&&t.children&&(n=t.children,r=this.after("initializedChange",function(e){this._add(n),r.detach()})),e.after(this._renderChildren,this,"renderUI"),e.after(this._bindUIParent,this,"bindUI"),this.after("selectionChange",this._afterSelectionChange),this.after("selectedChange",this._afterParentSelectedChange),this.after("activeDescendantChange",this._afterActiveDescendantChange),this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild),this.after("*:focusedChange",this._updateActiveDescendant)}var n=e.Lang,r="rendered",i="boundingBox";s.ATTRS={defaultChildType:{setter:function(t){var r=e.Attribute.INVALID_VALUE,i=n.isString(t)?e[t]:t;return n.isFunction(i)&&(r=i),r}},activeDescendant:{readOnly:!0},multiple:{value:!1,validator:n.isBoolean,writeOnce:!0,getter:function(e){var t=this.get("root");return t&&t!=this?t.get("multiple"):e}},selection:{readOnly:!0,setter:"_setSelection",getter:function(t){var r=n.isArray(t)?new e.ArrayList(t):t;return r}},selected:{setter:function(t){var n=t;return t===1&&!this.get("multiple")&&(n=e.Attribute.INVALID_VALUE),n}}},s.prototype={destructor:function(){this._destroyChildren()},_afterDestroyChild:function(e){var t=e.target;t.get("parent")==this&&t.remove()},_afterSelectionChange:function(t){if(t.target==this&&t.src!=this){var n=t.newVal,r=0;n&&(r=2,e.instanceOf(n,e.ArrayList)&&n.size()===this.size()&&(r=1)),this.set("selected",r,{src:this})}},_afterActiveDescendantChange:function(e){var t=this.get("parent");t&&t._set("activeDescendant",e.newVal)},_afterParentSelectedChange:function(e){var t=e.newVal;this==e.target&&e.src!=this&&(t===0||t===1)&&this.each(function(e){e.set("selected",t,{src:this})},this)},_setSelection:function(e){var t=null,n;return this.get("multiple")&&!this.isEmpty()?(n=[],this.each(function(e){e.get("selected")>0&&n.push(e)}),n.length>0&&(t=n)):e.get("selected")>0&&(t=e),t},_updateSelection:function(e){var t=e.target,n;t.get("parent")==this&&(e.src!="_updateSelection"&&(n=this.get("selection"),!this.get("multiple")&&n&&e.newVal>0&&n.set("selected",0,{src:"_updateSelection"}),this._set("selection",t)),e.src==this&&this._set("selection",t,{src:this}))},_updateActiveDescendant:function(e){var t=e.newVal===!0?e.target:null;this._set("activeDescendant",t)},_createChild:function(t){var r=this.get("defaultChildType"),i=t.childType||t.type,s,o,u;return i&&(o=n.isString(i)?e[i]:i),n.isFunction(o)?u=o:r&&(u=r),u?s=new u(t):e.error("Could not create a child instance because its constructor is either undefined or invalid."),s},_defAddChildFn:function(t){var r=t.child,i=t.index,s=this._items;r.get("parent")&&r.remove(),n.isNumber(i)?s.splice(i,0,r):s.push(r),r._set("parent",this),r.addTarget(this),t.index=r.get("index"),r.after("selectedChange",e.bind(this._updateSelection,this))},_defRemoveChildFn:function(e){var t=e.child,n=e.index,r=this._items;t.get("focused")&&t.blur(),t.get("selected")&&t.set("selected",0),r.splice(n,1),t.removeTarget(this),t._oldParent=t.get("parent"),t._set("parent",null)},_add:function(t,r){var i,s,o;return n.isArray(t)?(i=[],e.each(t,function(e,t){s=this._add(e,r+t),s&&i.push(s)},this),i.length>0&&(o=i)):(e.instanceOf(t,e.Widget)?s=t:s=this._createChild(t),s&&this.fire("addChild",{child:s,index:r})&&(o=s)),o},add:function(){var t=this._add.apply(this,arguments),r=t?n.isArray(t)?t:[t]:[];return new e.ArrayList(r)},remove:function(e){var t=this._items[e],n;return t&&this.fire("removeChild",{child:t,index:e})&&(n=t),n},removeAll:function(){var t=[],n;return e.each(this._items.concat(),function(){n=this.remove(0),n&&t.push(n)},this),new e.ArrayList(t)},selectChild:function(e){this.item(e).set("selected",1)},selectAll:function(){this.set("selected",1)},deselectAll:function(){this.set("selected",0)},_uiAddChild:function(e,t){e.render(t);var n=e.get("boundingBox"),s,o=e.next(!1),u;o&&o.get(r)?(s=o.get(i),s.insert(n,"before")):(u=e.previous(!1),u&&u.get(r)?(s=u.get(i),s.insert(n,"after")):t.contains(n)||t.appendChild(n))},_uiRemoveChild:function(e){e.get("boundingBox").remove()},_afterAddChild:function(e){var t=e.child;t.get("parent")==this&&this._uiAddChild(t,this._childrenContainer)},_afterRemoveChild:function(e){var t=e.child;t._oldParent==this&&this._uiRemoveChild(t)},_bindUIParent:function(){this.after("addChild",this._afterAddChild),this.after("removeChild",this._afterRemoveChild)},_renderChildren:function(){var e=this._childrenContainer||this.get("contentBox");this._childrenContainer=e,this.each(function(t){t.render(e)})},_destroyChildren:function(){this._hDestroyChild.detach(),this.each(function(e){e.destroy()})}},e.augment(s,e.ArrayList),e.WidgetParent=s},"@VERSION@",{requires:["arraylist","base-build","widget"]});
YUI.add("widget-position-align",function(e,t){function c(e){}var n=e.Lang,r="align",i="alignOn",s="visible",o="boundingBox",u="offsetWidth",a="offsetHeight",f="region",l="viewportRegion";c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:e.Lang.isArray}},c.TL="tl",c.TR="tr",c.BL="bl",c.BR="br",c.TC="tc",c.RC="rc",c.BC="bc",c.LC="lc",c.CC="cc",c.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),e.after(this._bindUIPosAlign,this,"bindUI"),e.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var e=this.get(r);this._uiSetVisiblePosAlign(this.get(s)),e&&this._uiSetAlign(e.node,e.points)},align:function(e,t){return arguments.length?this.set(r,{node:e,points:t}):this._syncUIPosAlign(),this},centered:function(e){return this.align(e,[c.CC,c.CC])},_setAlignCenter:function(e){return e&&this.set(r,{node:e===!0?null:e,points:[c.CC,c.CC]}),e},_uiSetAlign:function(t,r){if(!n.isArray(r)||r.length!==2){e.error("align: Invalid Points Arguments");return}var i=this._getRegion(t),s,o,u;if(!i)return;s=r[0],o=r[1];switch(o){case c.TL:u=[i.left,i.top];break;case c.TR:u=[i.right,i.top];break;case c.BL:u=[i.left,i.bottom];break;case c.BR:u=[i.right,i.bottom];break;case c.TC:u=[i.left+Math.floor(i.width/2),i.top];break;case c.BC:u=[i.left+Math.floor(i.width/2),i.bottom];break;case c.LC:u=[i.left,i.top+Math.floor(i.height/2)];break;case c.RC:u=[i.right,i.top+Math.floor(i.height/2)];break;case c.CC:u=[i.left+Math.floor(i.width/2),i.top+Math.floor(i.height/2)];break;default:}u&&this._doAlign(s,u[0],u[1])},_uiSetVisiblePosAlign:function(e){e?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles)return;var t=this.get(o),n=e.bind(this._syncUIPosAlign,this),r=[];e.Array.each(this.get(i),function(i){var s=i.eventName,o=e.one(i.node)||t;s&&r.push(o.on(s,n))}),this._posAlignUIHandles=r},_detachPosAlignUIHandles:function(){var t=this._posAlignUIHandles;t&&((new e.EventHandle(t)).detach(),this._posAlignUIHandles=null)},_doAlign:function(e,t,n){var r=this._posNode,i;switch(e){case c.TL:i=[t,n];break;case c.TR:i=[t-r.get(u),n];break;case c.BL:i=[t,n-r.get(a)];break;case c.BR:i=[t-r.get(u),n-r.get(a)];break;case c.TC:i=[t-r.get(u)/2,n];break;case c.BC:i=[t-r.get(u)/2,n-r.get(a)];break;case c.LC:i=[t,n-r.get(a)/2];break;case c.RC:i=[t-r.get(u),n-r.get(a)/2];break;case c.CC:i=[t-r.get(u)/2,n-r.get(a)/2];break;default:}i&&this.move(i)},_getRegion:function(t){var n;return t?(t=e.Node.one(t),t&&(n=t.get(f))):n=this._posNode.get(l),n},_afterAlignChange:function(e){var t=e.newVal;t&&this._uiSetAlign(t.node,t.points)},_afterAlignOnChange:function(e){this._detachPosAlignUIHandles(),this.get(s)&&this._attachPosAlignUIHandles()}},e.WidgetPositionAlign=c},"@VERSION@",{requires:["widget-position"]});
YUI.add("widget-position-constrain",function(e,t){function m(e){}var n="constrain",r="constrain|xyChange",i="constrainChange",s="preventOverlap",o="align",u="",a="bindUI",f="xy",l="x",c="y",h=e.Node,p="viewportRegion",d="region",v;m.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}},v=m._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}},m.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"),e.after(this._bindUIPosConstrained,this,a)},getConstrainedXY:function(e,t){t=t||this.get(n);var r=this._getRegion(t===!0?null:t),i=this._posNode.get(d);return[this._constrain(e[0],l,i,r),this._constrain(e[1],c,i,r)]},constrain:function(e,t){var r,i,s=t||this.get(n);s&&(r=e||this.get(f),i=this.getConstrainedXY(r,s),(i[0]!==r[0]||i[1]!==r[1])&&this.set(f,i,{constrained:!0}))},_setConstrain:function(e){return e===!0?e:h.one(e)},_constrain:function(e,t,n,r){if(r){this.get(s)&&(e=this._preventOverlap(e,t,n,r));var i=t==l,o=i?r.width:r.height,u=i?n.width:n.height,a=i?r.left:r.top,f=i?r.right-u:r.bottom-u;if(e<a||e>f)u<o?e<a?e=a:e>f&&(e=f):e=a}return e},_preventOverlap:function(e,t,n,r){var i=this.get(o),s=t===l,a,f,c,h,p,d;return i&&i.points&&v[t][i.points.join(u)]&&(f=this._getRegion(i.node),f&&(a=s?n.width:n.height,c=s?f.left:f.top,h=s?f.right:f.bottom,p=s?f.left-r.left:f.top-r.top,d=s?r.right-f.right:r.bottom-f.bottom),e>c?d<a&&p>a&&(e=c-a):p<a&&d>a&&(e=h)),e},_bindUIPosConstrained:function(){this.after(i,this._afterConstrainChange),this._enableConstraints(this.get(n))},_afterConstrainChange:function(e){this._enableConstraints(e.newVal)},_enableConstraints:function(e){e?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on(r,this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(e){e.constrained||(e.newVal=this.getConstrainedXY(e.newVal))},_getRegion:function(e){var t;return e?(e=h.one(e),e&&(t=e.get(d))):t=this._posNode.get(p),t}},e.WidgetPositionConstrain=m},"@VERSION@",{requires:["widget-position"]});
YUI.add("widget-position",function(e,t){function d(e){}var n=e.Lang,r=e.Widget,i="xy",s="position",o="positioned",u="boundingBox",a="relative",f="renderUI",l="bindUI",c="syncUI",h=r.UI_SRC,p="xyChange";d.ATTRS={x:{setter:function(e){this._setX(e)},getter:function(){return this._getX()},lazyAdd:!1},y:{setter:function(e){this._setY(e)},getter:function(){return this._getY()},lazyAdd:!1},xy:{value:[0,0],validator:function(e){return this._validateXY(e)}}},d.POSITIONED_CLASS_NAME=r.getClassName(o),d.prototype={initializer:function(){this._posNode=this.get(u),e.after(this._renderUIPosition,this,f),e.after(this._syncUIPosition,this,c),e.after(this._bindUIPosition,this,l)},_renderUIPosition:function(){this._posNode.addClass(d.POSITIONED_CLASS_NAME)},_syncUIPosition:function(){var e=this._posNode;e.getStyle(s)===a&&this.syncXY(),this._uiSetXY(this.get(i))},_bindUIPosition:function(){this.after(p,this._afterXYChange)},move:function(){var e=arguments,t=n.isArray(e[0])?e[0]:[e[0],e[1]];this.set(i,t)},syncXY:function(){this.set(i,this._posNode.getXY(),{src:h})},_validateXY:function(e){return n.isArray(e)&&n.isNumber(e[0])&&n.isNumber(e[1])},_setX:function(e){this.set(i,[e,this.get(i)[1]])},_setY:function(e){this.set(i,[this.get(i)[0],e])},_getX:function(){return this.get(i)[0]},_getY:function(){return this.get(i)[1]},_afterXYChange:function(e){e.src!=h&&this._uiSetXY(e.newVal)},_uiSetXY:function(e){this._posNode.setXY(e)}},e.WidgetPosition=d},"@VERSION@",{requires:["base-build","node-screen","widget"]});
YUI.add("widget-skin",function(e,t){var n="boundingBox",r="contentBox",i="skin",s=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(e){var t=this.get(r)||this.get(n),o,u;return e=e||s(i,""),u=new RegExp("\\b"+e+"(\\S+)"),t&&t.ancestor(function(e){return o=e.get("className").match(u),o}),o?o[1]:null}},"@VERSION@",{requires:["widget-base"]});
YUI.add("widget-stack",function(e,t){function O(e){}var n=e.Lang,r=e.UA,i=e.Node,s=e.Widget,o="zIndex",u="shim",a="visible",f="boundingBox",l="renderUI",c="bindUI",h="syncUI",p="offsetWidth",d="offsetHeight",v="parentNode",m="firstChild",g="ownerDocument",y="width",b="height",w="px",E="shimdeferred",S="shimresize",x="visibleChange",T="widthChange",N="heightChange",C="shimChange",k="zIndexChange",L="contentUpdate",A="stacked";O.ATTRS={shim:{value:r.ie==6},zIndex:{value:0,setter:"_setZIndex"}},O.HTML_PARSER={zIndex:function(e){return this._parseZIndex(e)}},O.SHIM_CLASS_NAME=s.getClassName(u),O.STACKED_CLASS_NAME=s.getClassName(A),O.SHIM_TEMPLATE='<iframe class="'+O.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>',O.prototype={initializer:function(){this._stackNode=this.get(f),this._stackHandles={},e.after(this._renderUIStack,this,l),e.after(this._syncUIStack,this,h),e.after(this._bindUIStack,this,c)},_syncUIStack:function(){this._uiSetShim(this.get(u)),this._uiSetZIndex(this.get(o))},_bindUIStack:function(){this.after(C,this._afterShimChange),this.after(k,this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(O.STACKED_CLASS_NAME)},_parseZIndex:function(e){var t;return!e.inDoc()||e.getStyle("position")==="static"?t="auto":t=e.getComputedStyle("zIndex"),t==="auto"?null:t},_setZIndex:function(e){return n.isString(e)&&(e=parseInt(e,10)),n.isNumber(e)||(e=0),e},_afterShimChange:function(e){this._uiSetShim(e.newVal)},_afterZIndexChange:function(e){this._uiSetZIndex(e.newVal)},_uiSetZIndex:function(e){this._stackNode.setStyle(o,e)},_uiSetShim:function(e){e?(this.get(a)?this._renderShim():this._renderShimDeferred(),r.ie==6&&this._addShimResizeHandlers()):this._destroyShim()},_renderShimDeferred:function(){this._stackHandles[E]=this._stackHandles[E]||[];var e=this._stackHandles[E],t=function(e){e.newVal&&this._renderShim()};e.push(this.on(x,t))},_addShimResizeHandlers:function(){this._stackHandles[S]=this._stackHandles[S]||[];var e=this.sizeShim,t=this._stackHandles[S];t.push(this.after(x,e)),t.push(this.after(T,e)),t.push(this.after(N,e)),t.push(this.after(L,e))},_detachStackHandles:function(e){var t=this._stackHandles[e],n;if(t&&t.length>0)while(n=t.pop())n.detach()},_renderShim:function(){var e=this._shimNode,t=this._stackNode;e||(e=this._shimNode=this._getShimTemplate(),t.insertBefore(e,t.get(m)),this._detachStackHandles(E),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get(v).removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles(E),this._detachStackHandles(S))},sizeShim:function(){var e=this._shimNode,t=this._stackNode;e&&r.ie===6&&this.get(a)&&(e.setStyle(y,t.get(p)+w),e.setStyle(b,t.get(d)+w))},_getShimTemplate:function(){return i.create(O.SHIM_TEMPLATE,this._stackNode.get(g))}},e.WidgetStack=O},"@VERSION@",{requires:["base-build","widget"],skinnable:!0});
YUI.add("widget-stdmod",function(e,t){function H(e){}var n=e.Lang,r=e.Node,i=e.UA,s=e.Widget,o="",u="hd",a="bd",f="ft",l="header",c="body",h="footer",p="fillHeight",d="stdmod",v="Node",m="Content",g="firstChild",y="childNodes",b="ownerDocument",w="contentBox",E="height",S="offsetHeight",x="auto",T="headerContentChange",N="bodyContentChange",C="footerContentChange",k="fillHeightChange",L="heightChange",A="contentUpdate",O="renderUI",M="bindUI",_="syncUI",D="_applyParsedConfig",P=e.Widget.UI_SRC;H.HEADER=l,H.BODY=c,H.FOOTER=h,H.AFTER="after",H.BEFORE="before",H.REPLACE="replace";var B=H.HEADER,j=H.BODY,F=H.FOOTER,I=B+m,q=F+m,R=j+m;H.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:H.BODY,validator:function(e){return this._validateFillHeight(e)}}},H.HTML_PARSER={headerContent:function(e){return this._parseStdModHTML(B)},bodyContent:function(e){return this._parseStdModHTML(j)},footerContent:function(e){return this._parseStdModHTML(F)}},H.SECTION_CLASS_NAMES={header:s.getClassName(u),body:s.getClassName(a),footer:s.getClassName(f)},H.TEMPLATES={header:'<div class="'+H.SECTION_CLASS_NAMES[B]+'"></div>',body:'<div class="'+H.SECTION_CLASS_NAMES[j]+'"></div>',footer:'<div class="'+H.SECTION_CLASS_NAMES[F]+'"></div>'},H.prototype={initializer:function(){this._stdModNode=this.get(w),e.before(this._renderUIStdMod,this,O),e.before(this._bindUIStdMod,this,M),e.before(this._syncUIStdMod,this,_)},_syncUIStdMod:function(){var e=this._stdModParsed;(!e||!e[I])&&this._uiSetStdMod(B,this.get(I)),(!e||!e[R])&&this._uiSetStdMod(j,this.get(R)),(!e||!e[q])&&this._uiSetStdMod(F,this.get(q)),this._uiSetFillHeight(this.get(p))},_renderUIStdMod:function(){this._stdModNode.addClass(s.getClassName(d)),this._renderStdModSections(),this.after(T,this._afterHeaderChange),this.after(N,this._afterBodyChange),this.after(C,this._afterFooterChange)},_renderStdModSections:function(){n.isValue(this.get(I))&&this._renderStdMod(B),n.isValue(this.get(R))&&this._renderStdMod(j),n.isValue(this.get(q))&&this._renderStdMod(F)},_bindUIStdMod:function(){this.after(k,this._afterFillHeightChange),this.after(L,this._fillHeight),this.after(A,this._fillHeight)},_afterHeaderChange:function(e){e.src!==P&&this._uiSetStdMod(B,e.newVal,e.stdModPosition)},_afterBodyChange:function(e){e.src!==P&&this._uiSetStdMod(j,e.newVal,e.stdModPosition)},_afterFooterChange:function(e){e.src!==P&&this._uiSetStdMod(F,e.newVal,e.stdModPosition)},_afterFillHeightChange:function(e){this._uiSetFillHeight(e.newVal)},_validateFillHeight:function(e){return!e||e==H.BODY||e==H.HEADER||e==H.FOOTER},_uiSetFillHeight:function(e){var t=this.getStdModNode(e),n=this._currFillNode;n&&t!==n&&n.setStyle(E,o),t&&(this._currFillNode=t),this._fillHeight()},_fillHeight:function(){if(this.get(p)){var e=this.get(E);e!=o&&e!=x&&this.fillHeight(this.getStdModNode(this.get(p)))}},_uiSetStdMod:function(e,t,r){if(n.isValue(t)){var i=this.getStdModNode(e,!0);this._addStdModContent(i,t,r),this.set(e+m,this._getStdModContent(e),{src:P})}else this._eraseStdMod(e);this.fire(A)},_renderStdMod:function(e){var t=this.get(w),n=this._findStdModSection(e);return n||(n=this._getStdModTemplate(e)),this._insertStdModSection(t,e,n),this[e+v]=n,this[e+v]},_eraseStdMod:function(e){var t=this.getStdModNode(e);t&&(t.remove(!0),delete this[e+v])},_insertStdModSection:function(e,t,n){var r=e.get(g);if(t===F||!r)e.appendChild(n);else if(t===B)e.insertBefore(n,r);else{var i=this[F+v];i?e.insertBefore(n,i):e.appendChild(n)}},_getStdModTemplate:function(e){return r.create(H.TEMPLATES[e],this._stdModNode.get(b))},_addStdModContent:function(e,t,n){switch(n){case H.BEFORE:n=0;break;case H.AFTER:n=undefined;break;default:n=H.REPLACE}e.insert(t,n)},_getPreciseHeight:function(e){var t=e?e.get(S):0,n="getBoundingClientRect";if(e&&e.hasMethod(n)){var r=e.invoke(n);r&&(t=r.bottom-r.top)}return t},_findStdModSection:function(e){return this.get(w).one("> ."+H.SECTION_CLASS_NAMES[e])},_parseStdModHTML:function(t){var n=this._findStdModSection(t);return n?(this._stdModParsed||(this._stdModParsed={},e.before(this._applyStdModParsedConfig,this,D)),this._stdModParsed[t+m]=1,n.get("innerHTML")):null},_applyStdModParsedConfig:function(e,t,n){var r=this._stdModParsed;r&&(r[I]=!(I in t)&&I in r,r[R]=!(R in t)&&R in r,r[q]=!(q in t)&&q in r)},_getStdModContent:function(e){return this[e+v]?this[e+v].get(y):null},setStdModContent:function(e,t,n){this.set(e+m,t,{stdModPosition:n})},getStdModNode:function(e,t){var n=this[e+v]||null;return!n&&t&&(n=this._renderStdMod(e)),n},fillHeight:function(e){if(e){var t=this.get(w),r=[this.headerNode,this.bodyNode,this.footerNode],s,o,u=0,a=0,f=!1;for(var l=0,c=r.length;l<c;l++)s=r[l],s&&(s!==e?u+=this._getPreciseHeight(s):f=!0);f&&((i.ie||i.opera)&&e.set(S,0),o=t.get(S)-parseInt(t.getComputedStyle("paddingTop"),10)-parseInt(t.getComputedStyle("paddingBottom"),10)-parseInt(t.getComputedStyle("borderBottomWidth"),10)-parseInt(t.getComputedStyle("borderTopWidth"),10),n.isNumber(o)&&(a=o-u,a>=0&&e.set(S,a)))}}},e.WidgetStdMod=H},"@VERSION@",{requires:["base-build","widget"]});
YUI.add("widget-uievents",function(e,t){var n="boundingBox",r=e.Widget,i="render",s=e.Lang,o=":",u=e.Widget._uievts=e.Widget._uievts||{};e.mix(r.prototype,{_destroyUIEvents:function(){var t=e.stamp(this,!0);e.each(u,function(n,r){n.instances[t]&&(delete n.instances[t],e.Object.isEmpty(n.instances)&&(n.handle.detach(),u[r]&&delete u[r]))})},UI_EVENTS:e.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(n)},_createUIEvent:function(t){var n=this._getUIEventNode(),i=e.stamp(n)+t,s=u[i],o;s||(o=n.delegate(t,function(e){var t=r.getByNode(this);t&&t._filterUIEvent(e)&&t.fire(e.type,{domEvent:e})},"."+e.Widget.getClassName()),u[i]=s={instances:{},handle:o}),s.instances[e.stamp(this)]=1},_filterUIEvent:function(e){return e.currentTarget.compareTo(e.container)||e.container.compareTo(this._getUIEventNode())},_getUIEvent:function(e){if(s.isString(e)){var t=this.parseType(e)[1],n,r;return t&&(n=t.indexOf(o),n>-1&&(t=t.substring(n+o.length)),this.UI_EVENTS[t]&&(r=t)),r}},_initUIEvent:function(e){var t=this._getUIEvent(e),n=this._uiEvtsInitQueue||{};t&&!n[t]&&(this._uiEvtsInitQueue=n[t]=1,this.after(i,function(){this._createUIEvent(t),delete this._uiEvtsInitQueue[t]}))},on:function(e){return this._initUIEvent(e),r.superclass.on.apply(this,arguments)},publish:function(e,t){var n=this._getUIEvent(e);return n&&t&&t.defaultFn&&this._initUIEvent(n),r.superclass.publish.apply(this,arguments)}},!0)},"@VERSION@",{requires:["node-event-delegate","widget-base"]});
YUI.add("yui-throttle",function(e,t){
/*! Based on work by Simon Willison: http://gist.github.com/292562 */
;e.throttle=function(t,n){n=n?n:e.config.throttleTime||150;if(n===-1)return function(){t.apply(this,arguments)};var r=e.Lang.now();return function(){var i=e.Lang.now();i-r>n&&(r=i,t.apply(this,arguments))}}},"@VERSION@",{requires:["yui-base"]});
YUI.add("gallery-sm-dragdrop",function(e,t){var n=e.DOM,r=e.config.doc,i=r.body,s=e.ClassNameManager.getClassName,o=e.config.win,u=!!e.UA.webkit,a=typeof navigator!="undefined"&&/^mac/i.test(navigator.platform),f=o&&o.pageXOffset!==undefined&&o.pageYOffset!==undefined,l="drag",c="dragend",h="dragenter",p="dragleave",d="dragover",v="dragstart",m="drop",g=e.Base.create("dragdrop",e.Base,[],{classNames:{dragging:s("dragging"),dragover:s("dragover"),droppable:s("droppable")},initializer:function(){this._dragState={},this._publishedEvents={},this._container=this.get("container"),this._distanceThreshold=this.get("distanceThreshold"),this._dragHandleSelector=this.get("dragHandleSelector"),this._dragSelector=this.get("dragSelector"),this._scrollContainer=this.get("scrollContainer"),this._scrollMargin=this.get("scrollMargin"),this._scrollSelector=this.get("scrollSelector"),this._touchCancelDistance=this.get("touchCancelDistance"),this._touchDelay=this.get("touchDelay"),this._attachEvents()},destructor:function(){this._endDrag(),this._detachEvents(),clearTimeout(this._scrollEventThrottle),this._dragState=null,this._publishedEvents=null},_attachEvents:function(){this._events&&this._detachEvents();var t=this._container,n=e.one(r),s=this._dragSelector;this._containerIsBody=this._container._node===i,this._events=[this.after(["containerChange","distanceThresholdChange","dragHandleSelectorChange","dragSelectorChange","scrollContainerChange","scrollMarginChange","scrollSelectorChange","touchCancelDistanceChange","touchDelayChange"],this._cacheAttrValue),this.after(["containerChange","dragSelectorChange"],this._reinitialize),this.after(["dropSelectorChange","scrollContainerChange","scrollSelectorChange"],this.sync),t.delegate("dragstart",this._onNativeDragStart,s,this),t.delegate("gesturemovestart",this._onDraggableMoveStart,s,{},this),n.on("gesturemove",this._onDocMove,{standAlone:!0},this),n.on("gesturemoveend",this._onDocMoveEnd,{standAlone:!0},this)],this._containerIsBody||this._events.push(t.on("scroll",this._onContainerScroll,this))},_detachEvents:function(){this._events&&((new e.EventHandle(this._events)).detach(),this._events=null)},sync:function(){return this._dragState.dragging&&(this._viewportScrollOffsets=this._getViewportScrollOffsets(),this._cacheBoundingRects(),(this._scrollContainer||this._scrollSelector)&&this._cacheScrollRects()),this},_cacheAttrValue:function(e){this["_"+e.attrName]=e.newVal},_cacheBoundingRects:function(){var t=this._proxyOrDragNode()._node,n=e.Selector.query(this.get("dropSelector"),this._container._node),r=this._dropRects=[],i,s;for(var o=0,u=n.length;o<u;o++)i=n[o],i!==t&&(s=this._getAbsoluteBoundingRect(i),s.el=i,r.push(s));r.sort(function(e,t){return e.top-t.top||e.left-t.left})},_cacheScrollRects:function(){var t=this._scrollRects=[],n=[];this._scrollContainer&&n.push(this._container._node),this._scrollSelector&&Array.prototype.push.apply(n,e.Selector.query(this._scrollSelector,this._container._node));if(!n.length)return t;var s=r.documentElement,o=this._viewportScrollOffsets,u,a,f,l,c,h;for(var p=0,d=n.length;p<d;p++){f=n[p],f===i?(u=s.clientHeight,a=s.clientWidth):(u=f.clientHeight,a=f.clientWidth),c=f.scrollHeight>u,l=f.scrollWidth>a;if(c||l)h=this._getAbsoluteBoundingRect(f),h.el=f,h.isVertical=c,h.isHorizontal=l,f===i&&(h.bottom=o[1]+u,h.left=o[0],h.right=o[0]+a,h.top=o[1]),t.push(h)}return t.sort(function(e,t){return e.top-t.top||e.left-t.left}),t},_endDrag:function(){var t=this._dragState;t.pending?this._endPendingDrag():t.dragging&&(t.dropNode&&this._fireDragLeave(),this._proxyOrDragNode().removeClass(this.classNames.dragging),this._publishAndFire(c,e.merge(t,{deltaXY:this._getDelta(),dropped:!!t.dropped,state:t}))),this._dragState={},this._dropRects=null,this._scrollIntersections=null,this._scrollRects=null,this._scrollTimeout=clearTimeout(this._scrollTimeout)},_endPendingDrag:function(){this._pendingDragTimeout=clearTimeout(this._pendingDragTimeout),this._restoreTouchCallout()},_findDropIntersection:function(){var e=this._dropRects,t=this._dragState,n=t.dragNode._node,r=t.pageXY[0],i=t.pageXY[1],s;for(var o=0,u=e.length;o<u;o++){s=e[o];if(i<s.top)return null;if(n!==s.el&&i<=s.bottom&&i>=s.top&&r<=s.right&&r>=s.left)return s.el}},_findScrollIntersections:function(){var e=[],t=this._scrollRects;if(!t.length)return e;var n=this._scrollMargin,r=this._dragState,i=r.pageXY[0],s=r.pageXY[1],o,u;for(var a=0,f=t.length;a<f;a++){u=t[a];if(s<u.top)break;s<=u.bottom&&s>=u.top&&i<=u.right&&i>=u.left&&(o={el:u.el},u.isVertical&&(u.bottom-s<=n?o.down=!0:s-u.top<=n&&(o.up=!0)),u.isHorizontal&&(u.right-i<=n?o.right=!0:i-u.left<=n&&(o.left=!0)),(o.down||o.up||o.right||o.left)&&e.push(o))}return e},_fireDrag:function(){var t=this._getDelta(),n=this._dragState;this._publishAndFire(l,e.merge(n,{deltaXY:t,state:n}),{defaultFn:this._defDragFn}),n.dropNode&&this._publishAndFire(d,e.merge(n,{deltaXY:t,state:n}))},_fireDragEnter:function(t){var n=this._dragState;n.preventedDropNode=null,this._publishAndFire(h,e.merge(n,{deltaXY:this._getDelta(),dropNode:t,state:n}),{defaultFn:this._defDragEnterFn,preventedFn:this._preventedDragEnterFn})},_fireDragLeave:function(){var t=this._dragState;this._proxyOrDragNode().removeClass(this.classNames.droppable),t.dropNode.removeClass(this.classNames.dragover),this._publishAndFire(p,e.merge(t,{deltaXY:this._getDelta(),state:t})),t.dropNode=null,t.preventedDropNode=null},_fireDragStart:function(){var t=this._dragState;if(!t.pending)return;this._endPendingDrag(),this._publishAndFire(v,e.merge(t,{state:t}),{defaultFn:this._defDragStartFn,preventedFn:this._preventedDragStartFn})},_getAbsoluteBoundingRect:function(e){var t=this._viewportScrollOffsets[0],n=this._viewportScrollOffsets[1],r=e.getBoundingClientRect();return{bottom:r.bottom+n,height:r.height||r.bottom-r.top,left:r.left+t,right:r.right+t,top:r.top+n,width:r.width||r.right-r.left}},_getBoundingRect:function(e){var t=e.getBoundingClientRect();return"width"in t?t:{bottom:t.bottom,height:t.height||
t.bottom-t.top,left:t.left,right:t.right,top:t.top,width:t.width||t.right-t.left}},_getDelta:function(){var e=this._dragState;return[Math.abs(e.startXY[0]-e.pageXY[0]),Math.abs(e.startXY[1]-e.pageXY[1])]},_getViewportScrollOffsets:f?function(){return[o.pageXOffset,o.pageYOffset]}:function(){var e=r.documentElement||i.parentNode||i;return[e.scrollLeft,e.scrollTop]},_moveDragNode:function(){var e=this._proxyOrDragNode()._node,t=this._dragState;if(this._containerIsBody)n.setXY(e,[t.pageXY[0]+t.offsetXY[0],t.pageXY[1]+t.offsetXY[1]]);else{var r=this._getAbsoluteBoundingRect(this._container._node),i=this._getBoundingRect(e);n.setXY(e,[Math.max(r.left,Math.min(r.right-i.width,t.pageXY[0]+t.offsetXY[0])),Math.max(r.top,Math.min(r.bottom-i.height,t.pageXY[1]+t.offsetXY[1]))])}},_preventTouchCallout:function(){var e=this._dragState.dragNode,t=e&&e._node;t&&(e.setData("originalTouchCalloutValue",t.style.webkitTouchCallout),t.style.webkitTouchCallout="none")},_proxyOrDragNode:function(){return this._dragState.proxyNode||this._dragState.dragNode},_publishAndFire:function(e,t,n){return n&&n.silent?n.defaultFn&&n.defaultFn.call(this,t):(n&&!this._publishedEvents[e]&&(this._publishedEvents[e]=this.publish(e,n)),this.fire(e,t)),this},_reinitialize:function(){this._endDrag(),this._detachEvents(),this._attachEvents()},_restoreTouchCallout:function(){var e=this._dragState.dragNode,t=e&&e._node;t&&(t.style.webkitTouchCallout=e.getData("originalTouchCalloutValue")||"default",e.clearData("originalTouchCalloutValue"))},_scroll:function(e){var t=this._scrollIntersections,n=t&&t.length;if(!n)return;var s,o;e||(e=1);for(var a=0;a<n;a++)s=t[a],o=s.el,!u&&o===i&&(o=r.documentElement),s.down?o.scrollTop=Math.min(o.scrollHeight,o.scrollTop+e):s.up&&(o.scrollTop=Math.max(0,o.scrollTop-e)),s.right?o.scrollLeft=Math.min(o.scrollWidth,o.scrollLeft+e):s.left&&(o.scrollLeft=Math.max(0,o.scrollLeft-e));this.sync();if(!this._scrollTimeout){var f=this;this._scrollTimeout=setTimeout(function(){f._scrollTimeout=null,f._scroll(e+=2),f._moveDragNode()},20)}},_defDragFn:function(){var t=this._dragState;if(this._scrollContainer||this._scrollSelector)this._scrollIntersections=this._findScrollIntersections(),this._scroll();this._moveDragNode();var n=this._findDropIntersection();if(n){if(t.dropNode){if(n===t.dropNode._node)return;this._fireDragLeave()}else if(t.preventedDropNode&&n===t.preventedDropNode._node)return;this._fireDragEnter(e.one(n))}else t.dropNode&&this._fireDragLeave()},_defDragEnterFn:function(e){this._dragState.dropNode=e.dropNode,this._proxyOrDragNode().addClass(this.classNames.droppable),e.dropNode.addClass(this.classNames.dragover)},_defDragStartFn:function(e){var t=this._dragState,n=t.dragNode.getXY(),r=e.pointerOffset||this.get("pointerOffset");t.dragging=!0,t.pending=!1,r==="auto"?t.offsetXY=[n[0]-t.startXY[0],n[1]-t.startXY[1]]:t.offsetXY=r,t.dragNode.addClass(this.classNames.dragging),this._proxyOrDragNode().addClass(this.classNames.dragging),this.sync(),this._fireDrag()},_onContainerScroll:function(){if(!this._dragState.dragging||this._scrollEventThrottle)return;var e=this;this._scrollEventThrottle=setTimeout(function(){e._scrollEventThrottle=null,e.sync()},100)},_onDocMove:function(e){var t=this._dragState;if(!t.dragging&&!t.pending)return;t.pageXY=[e.pageX,e.pageY];if(t.dragging)e.preventDefault(),this._fireDrag();else if(t.pending){var n=this._getDelta(),r=t.isTouch,i=r?this._touchCancelDistance:this._distanceThreshold;if(n[0]>i||n[1]>i)r?this._endDrag():this._fireDragStart()}},_onDocMoveEnd:function(t){var n=this._dragState;if(!n.dragging&&!n.pending)return;n.dragging&&(t._event.preventDefault?t._event.preventDefault():t._event.returnValue=!1,t.touches&&(n.dragNode.once("mousedown",function(e){e.preventDefault()}),n.dragNode.once("click",function(e){e.preventDefault()})),n.dropNode&&(n.dropped=!0,this._publishAndFire(m,e.merge(n,{deltaXY:this._getDelta(),state:n})))),this._endDrag()},_onDraggableMoveStart:function(e){if(e.button>1||a&&e.ctrlKey)return;if(e.touches&&!this.get("enableTouchDrag"))return;var t=this._dragHandleSelector;if(t&&!e.target.ancestor(t,!0))return;var n=this,r=this._dragState;r.dragging=!1,r.dragNode=e.currentTarget,r.isTouch=!!e.touches,r.pageXY=[e.pageX,e.pageY],r.pending=!0,r.startXY=[e.pageX,e.pageY],this._preventTouchCallout(),this._pendingDragTimeout=setTimeout(function(){r.pending&&n._fireDragStart()},r.isTouch?this._touchDelay:this.get("timeThreshold"))},_onNativeDragStart:function(e){e.preventDefault()},_preventedDragEnterFn:function(e){e.state.preventedDropNode=e.dropNode},_preventedDragStartFn:function(){this._endDrag()}},{ATTRS:{container:{setter:e.one,valueFn:function(){return e.one("body")}},distanceThreshold:{value:10},dragHandleSelector:{},dragSelector:{},dropSelector:{},enableTouchDrag:{value:!0},pointerOffset:{value:"auto"},scrollContainer:{value:!1},scrollMargin:{value:50},scrollSelector:{},timeThreshold:{value:800},touchCancelDistance:{value:10},touchDelay:{value:1e3}}});e.DragDrop=g},"@VERSION@",{requires:["base","classnamemanager","event-move","node-event-delegate","node-screen"]});
YUI.add("gallery-sm-editor-base",function(e,t){e.Node.DOM_EVENTS.paste=1;var n=e.config.doc,r=e.config.win,i=e.ClassNameManager.getClassName,s=e.Editor.DOM,o="blur",u="focus",a="render",f="selectionChange",l=e.Base.create("editorBase",e.View,[],{classNames:{cursor:i("sm-editor-cursor",!0),editor:i("sm-editor",!0),input:i("sm-editor-input",!0)},commands:{insertHTML:{commandFn:"_insertHTML"},insertText:{commandFn:"_insertText"}},supportedTags:"a, br, div, p, span",initializer:function(){this.selection=new e.Selection,this.selectors={},this._cursorHTML='<span class="'+this.classNames.cursor+'"></span>',e.Object.each(this.classNames,function(e,t){this.selectors[t]="."+e},this),this._attachEvents()},destructor:function(){this._detachEvents(),this.selection=null},blur:function(){return this._rendered&&this._inputNode.blur(),this},command:function(t){var n,r,i=t,s=e.Array(arguments,1,!0);return"string"==typeof i&&(n=this.commands[i],n&&(i=n.commandFn,n.style&&s.unshift(t)),"string"==typeof i&&(i=this[i])),this.focus(),"function"==typeof i&&(r=i.apply(this,s),this._updateSelection({force:!0})),r||this.query(t)},focus:function(){return this._rendered&&this._inputNode.focus(),this},query:function(t){var n,r,i=t,s=e.Array(arguments,0,!0);return"string"==typeof i&&(n=this.commands[i],n&&(i=n.queryFn),i=this[i]),this.focus(),"function"==typeof i&&(r=i.apply(this,s)),r},render:function(){var e=this.get("container"),t=e.one(this.selectors.input);e.addClass(this.classNames.editor),t||(t=e.appendChild("<div/>").addClass(this.classNames.input));var n=this.get("html"),r=this.get("text");return n?t.setHTML(n):r?t.set("text",r):t.setHTML("<p><br></p>"),t.set("contentEditable",!0),this._inputNode=t,this._rendered=!0,this.fire(a),this},_attachEvents:function(){if(this._events)return;var e=this.get("container"),t=this.selectors;this._events=[e.delegate("blur",this._onBlur,t.input,this),e.delegate("copy",this._onCopy,t.input,this),e.delegate("cut",this._onCut,t.input,this),e.delegate("dblclick",this._onDblClick,t.input,this),e.delegate("focus",this._onFocus,t.input,this),e.delegate("paste",this._onPaste,t.input,this)]},_detachEvents:function(){this._events&&((new e.EventHandle(this._events)).detach(),this._events=null)},_execCommand:function(e,t){if(!n.queryCommandSupported(e)||!n.queryCommandEnabled(e))return;n.execCommand(e,!1,t)},_getHTML:function(e){return this._rendered?this._inputNode.getHTML():e},_getNodes:function(t,n){var r,i,o,u=[];t=t.clone().shrink(),r=t.startNode(),i=t.startOffset();if(t.isCollapsed()){var a=r.get("childNodes");!s.isTextNode(r)&&a.item(i-1)?o=a.item(i-1):o=r}else o=r.get("parentNode");while(o&&o!==this._inputNode&&this._inputNode.contains(o))o.test(n)&&u.push(o),o=o.get("parentNode");return t.traverse(function(e){e.test(n)&&u.push(e)}),e.all(u)},_getText:function(e){return this._rendered?this._inputNode.get("text"):e},_insertHTML:function(t){var n=typeof t=="string"?e.Node.create(t):t,r=this.selection,i=r.range();if(!i)return;return i.expand({stopAt:this._inputNode}),n=i.deleteContents().insertNode(n),i.collapse(),r.select(i),n},_insertTab:function(){this._insertHTML('<span style="white-space:pre;">	</span>')},_insertText:function(e){return e=e.replace(/\n+/g," "),this._insertHTML(n.createTextNode(e))},_noCommand:function(){},_queryCommandValue:function(e){return n.queryCommandSupported(e)?n.queryCommandValue(e):null},_setHTML:function(e){return this._rendered&&this._inputNode.setHTML(e),e},_setText:function(e){return this._rendered&&this._inputNode.set("text",e),e},_updateSelection:function(e){var t=this._selectedRange||null,n=this.selection.range()||null,r=e&&e.force,i=e&&e.silent;if(!r&&(n===t||t&&t.isEquivalent(n)&&t.toHTML()===n.toHTML()))return;this._selectedRange=n,!i&&(!n||n.isInsideNode(this._inputNode))&&this.fire(f,{prevRange:t,range:n,selection:this.selection})},_onBlur:function(){if(!this._rendered)return;clearInterval(this._selectionMonitor),this.fire(o)},_onCopy:function(e){var t=e._event.clipboardData||r.clipboardData,n=this.selection.range(),i=n.cloneContents().getHTML();e.preventDefault();try{t.setData("text/html",i),t.setData("text/plain",i)}catch(s){t.setData("text",i)}},_onCut:function(e){var t=e._event.clipboardData||r.clipboardData,n=this.selection.range(),i;n.expand({stopAt:this._inputNode}),i=n.extractContents().getHTML(),e.preventDefault(),this.selection.select(n);try{t.setData("text/html",i),t.setData("text/plain",i)}catch(s){t.setData("text",i)}},_onDblClick:function(){var e=this.selection.range();this.selection.select(e.shrink({trim:!0}))},_onFocus:function(){var t=this,n=this.selection,r;if(!this._rendered)return;if(!(r=this._selectedRange)){var i=this._inputNode.get("firstChild")||this._inputNode;r=new e.Range,r.selectNodeContents(i),r.collapse({toStart:!0})}n.select(r),this._updateSelection(),clearInterval(this._selectionMonitor),this._selectionMonitor=setInterval(function(){t._updateSelection()},200),this.fire(u)},_onPaste:function(t){var n=t._event.clipboardData||r.clipboardData,i=n.getData("text");t.preventDefault(),i=e.Node.create(i).get("text"),this.command("insertText",i)}},{ATTRS:{html:{getter:"_getHTML",setter:"_setHTML",value:""},outputName:{value:"editor",writeOnce:"initOnly"},text:{getter:"_getText",setter:"_setText",value:""}}});e.namespace("Editor").Base=l},"@VERSION@",{requires:["base-build","classnamemanager","event-custom","event-focus","gallery-sm-editor-dom","gallery-sm-selection","node-base","node-event-delegate","view"]});
YUI.add("gallery-sm-editor-block",function(e,t){(function(){var t=e.Editor.DOM,n=e.Base.create("editorBlock",e.Base,[],{blockCommands:{formatBlock:{commandFn:"_formatBlock",queryFn:"_queryBlockCommand"},heading:{commandFn:"_formatBlock",queryFn:"_queryBlockCommand"},insertBreak:{commandFn:"_noCommand"},insertParagraph:{commandFn:"_insertReturn",queryFn:"_queryBlockCommand"}},blockKeyCommands:{"alt+c":"justifyCenter","alt+f":"justifyFull","alt+l":"justifyLeft","alt+r":"justifyRight",enter:"insertParagraph","ctrl+enter":{fn:"insertBreak",allowDefault:!0,async:!0},"shift+enter":{fn:"insertBreak",allowDefault:!0,async:!0}},blockTags:"div, p, h1, h2, h3, h4, h5",initializer:function(){this.commands=e.merge(this.commands,this.blockCommands),this.supportedTags?this.supportedTags+=","+this.blockTags:this.supportedTags=this.blockTags,this.keyCommands&&(this.keyCommands=e.merge(this.keyCommands,this.blockKeyCommands)),this._attachBlockEvents()},destructor:function(){this._detachBlockEvents()},_attachBlockEvents:function(){if(this._blockEvents)return;this._blockEvents=[this.on("selectionChange",this._blockOnSelectionChange,this)]},_detachBlockEvents:function(){this._blockEvents&&((new e.EventHandle(this._blockEvents)).detach(),this._blockEvents=null)},_formatBlock:function(n){n=n.replace(/[<>]/g,"");if(-1<this.blockTags.indexOf(n)){n="<"+n+">";var r=this.selection,i=r.range(),s=[];this._getNodes(i,this.blockTags).each(function(r){var i=e.Node.create(n);i.insert(r.get("childNodes")),t.copyStyles(r,i,this.supportedStyles,{explicit:!0,overwrite:!1}),r.replace(i).remove(!0),s.push(i)},this),i.startNode(s[0]),i.endNode(s[s.length]),i.shrink().collapse({toStart:!0}),r.select(i)}},_insertReturn:function(){var e=this.selection,n=e.range().shrink(),r,i,s;n.deleteContents(),r=this._getNodes(n,this.blockTags).item(0),""===r.get("text")&&n.selectNodeContents(r).collapse(),n.expand({stopAt:r}),i=n.clone().selectNodeContents(r).collapse({toStart:!0}),s=n.clone().selectNodeContents(r).collapse(),0===n.compare(i,{myPoint:"start",otherPoint:"start"})?r=r.insert(r.cloneNode(),"before").previous():0===n.compare(s,{myPoint:"end",otherPoint:"end"})?r=r.insert("<p></p>","after").next():r=this._splitRange(n,this.blockTags),t.isEmptyNode(r)&&r.setHTML("<br>"),n.selectNodeContents(r).collapse({toStart:!0}),e.select(n)},_queryBlockCommand:function(){return this._getNodes(this.selection.range(),this.blockTags)},_splitRange:function(e,n){var r,i;r=e.endNode(),i=e.endOffset();while(!r.test(n))i=t.split(r,i),r=i.get("parentNode");return this._inputNode!==r&&(i=t.split(r,i),r=i.get("parentNode")),i._node||(i=r.get("childNodes").item(i)),i},_blockOnSelectionChange:function(t){var n=t.range,r;if(!n||!n.isCollapsed())return;r=n.startNode(),this._inputNode===r.ancestor(this.blockTags,!0)&&e.Editor.Base.prototype._execCommand.call(this,"formatBlock","<p>")}});e.namespace("Editor").Block=n})()},"@VERSION@",{requires:["base-build","event-custom","gallery-sm-editor-base","gallery-sm-editor-dom","gallery-sm-editor-keys","node-base"]});
YUI.add("gallery-sm-editor-delete",function(e,t){(function(){var t=!!e.UA.ie,n=e.Base.create("editorDelete",e.Base,[],{deleteCommands:{"delete":{commandFn:"_delete"},forwardDelete:{commandFn:"_forwardDelete"}},deleteKeyCommands:t?{backspace:{fn:"delete",allowDefault:!0,async:!0},"delete":{fn:"forwardDelete",allowDefault:!0,async:!0}}:{backspace:{fn:"delete",allowDefault:!1,async:!1},"delete":{fn:"forwardDelete",allowDefault:!1,async:!1}},initializer:function(){this.commands=e.merge(this.commands,this.deleteCommands),this.keyCommands&&(this.keyCommands=e.merge(this.keyCommands,this.deleteKeyCommands))},_delete:t?function(e){}:function(e){var t=this.selection,n=t.range(),r=n.startNode().ancestor(this.blockTags,!0),i=n.endNode().ancestor(this.blockTags,!0);"forward"!==e&&(e="back");if(n.isCollapsed()){n.expand({stopAt:r});var s=n.clone().selectNodeContents(r),o="forward"===e?"end":"start",u=n.compare(s,{myPoint:o,otherPoint:o});0===u&&("forward"===e?i=r.next():(i=r,r=i.previous())),n.collapse()}r&&i&&r!==i?(n.deleteContents(),n.endNode(r.get("lastChild"),"after"),n.collapse(),i.get("text").length&&r.append(i.get("childNodes")),i.remove(!0)):("forward"===e?this._execCommand("forwardDelete"):this._execCommand("delete"),this._inputNode===n.parentNode()&&(r=this._inputNode.get("childNodes").item(n.startOffset()-1),r&&n.selectNodeContents(r))),n.collapse({toStart:"back"===e}),t.select(n)},_forwardDelete:t?function(){}:function(){return this._delete("forward")}});e.namespace("Editor").Delete=n})()},"@VERSION@",{requires:["base-build","gallery-sm-editor-base","gallery-sm-editor-block","gallery-sm-editor-keys","node-base"]});
YUI.add("gallery-sm-editor-dom",function(e,t){var n={};n.copyStyles=function(t,r,i,s){var o={},u=s&&s.explicit,a=s&&s.overwrite;t=e.one(t),r=e.one(r);if(!n.isElementNode(t)||!n.isElementNode(r))return;e.Array.each(i,function(e){var n=u?t._node.style[e]:t.getStyle(e);""!==n&&(a||""===r._node.style[e])&&(o[e]=n)}),r.setStyles(o)},n.isElementNode=function(t){return t=e.one(t),t._node&&1===t._node.nodeType},n.isEmptyNode=function(t){return t=e.one(t),t&&t.test("br")?!1:/^[^\S ]*$/.test(t?t.get("text"):"")&&!t.one("br")},n.isTextNode=function(t){return t=e.one(t),t._node&&3===t._node.nodeType},n.maxOffset=function(t){return t=e.one(t),t.get("childNodes").size()||t.get("length")},n.split=function(t,r){var i=t.get("childNodes"),s;return t=e.one(t),r&&r._node?r=i.indexOf(r):r=parseInt(r,10),isNaN(r)||r<0||r>n.maxOffset(t)?t:n.isTextNode(t)?e.one(t._node.splitText(r)):(s=t.cloneNode(!1).append(i.splice(r)),t.insert(s,"after"),s)},e.namespace("Editor").DOM=n},"@VERSION@",{requires:["node-base","node-style"]});
YUI.add("gallery-sm-editor-format",function(e,t){(function(){var t=e.config.doc,n=e.Editor.DOM,r="<span></span>",i=e.Base.create("editorFormat",e.Base,[],{initializer:function(){this.supportedStyles=[],e.Object.each(this.styleCommands,function(e){this.supportedStyles.push(e.style.property)},this)},_formatHTML:function(i){function s(t){var i=t.get("childNodes")._nodes;e.Array.each(i.reverse(),function(t){var i;t=e.one(t),i=t.get("parentNode"),n.isTextNode(t)?this._isBlockNode(i)?t.wrap(r):t.get("previousSibling")&&n.split(i,t):(t.test(this.supportedTags)?!this._isBlockNode(i)&&!i.test("a")&&(i.insert(t,"after"),this._isBlockNode(t)||(t.addClass(i.get("className")),n.copyStyles(i,t,this.supportedStyles,{explicit:!0,overwrite:!1}))):t.replace(t.get("text")),s.call(this,t),n.isEmptyNode(t)&&t.remove(!0),t.removeAttribute("id"))},this)}var o=e.one(t.createDocumentFragment()).setHTML(i);return s.call(this,o),o},_getHTML:function(t){return t=e.Editor.Base.prototype._getHTML.call(this,t),this.get("formatFn")(t).getHTML()},_isBlockNode:function(t){return t=e.one(t),!n.isTextNode(t)&&(t.get("nodeName")==="#document-fragment"||t.test(this.blockTags))},_isStyleNode:function(t){return t=e.one(t),t&&!n.isTextNode(t)&&t.test(this.styleTags)},_setHTML:function(t){return t=this.get("formatFn")(t).getHTML(),e.Editor.Base.prototype._setHTML.call(this,t)}},{ATTRS:{formatFn:{readOnly:!0,setter:function(t){return e.bind(t,this)},validator:e.Lang.isFunction,valueFn:function(){return this._formatHTML}}}});e.namespace("Editor").Format=i})()},"@VERSION@",{requires:["base-build","gallery-sm-editor-base","gallery-sm-editor-dom","node-base"]});
YUI.add("gallery-sm-editor-keys",function(e,t){var n=e.Base.create("editorKeys",e.Base,[],{ignoreKeyCodes:{16:"shift",17:"ctrl",18:"alt",91:"leftmeta",93:"rightmeta",224:"meta"},keyCodeMap:{8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pgup",34:"pgdown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",49:"!",61:"=",173:"-",187:"=",189:"-",190:".",191:"?",219:"[",221:"]"},keyCommands:{"ctrl+-":"decreaseFontSize","ctrl+=":"increaseFontSize",tab:"_insertTab"},initializer:function(){this._attachKeyEvents()},destructor:function(){this._detachKeyEvents()},_attachKeyEvents:function(){if(this._keyEvents)return;var e=this.get("container");this._keyEvents=[e.delegate("keydown",this._onKeyDown,this.selectors.input,this)]},_detachKeyEvents:function(){this._keyEvents&&((new e.EventHandle(this._keyEvents)).detach(),this._keyEvents=null)},_onKeyDown:function(t){var n=t.keyCode;if(this.ignoreKeyCodes[n])return;var r=[];t.altKey&&r.push("alt"),(t.ctrlKey||t.metaKey)&&r.push("ctrl"),t.shiftKey&&r.push("shift"),r.push(this.keyCodeMap[n]||String.fromCharCode(n).toLowerCase());var i=this.keyCommands[r.join("+")];if(i){var s=i.fn||i,o=[t,r];typeof s=="string"&&(this.commands[s]&&(o.unshift(s),s="command"),s=this[s]),i.allowDefault||t.preventDefault(),i.async?e.later(0,this,s,o):s.apply(this,o)}}});e.namespace("Editor").Keys=n},"@VERSION@",{requires:["base-build","event-custom","gallery-sm-editor-base","node-event-delegate"]});
YUI.add("gallery-sm-editor-link",function(e,t){(function(){var t=e.Base.create("editorLink",e.Base,[],{linkCommands:{createLink:{commandFn:"_createLink",queryFn:"isLink"},unlink:{commandFn:"_unlink",queryFn:"isLink"}},linkTags:"a",linkTemplate:'<a href="{href}" target="{target}"></a>',initializer:function(){this.commands=e.merge(this.commands,this.linkCommands),this.supportedTags?this.supportedTags+=","+this.linkTags:this.supportedTags=this.linkTags},isLink:function(){return!!this._getAnchorNode()},_getAnchorNode:function(){this.focus();var e=this.selection.range().shrink().parentNode();return e.ancestor(this.linkTags,!0)},_createLink:function(t){var n=this.selection.range(),r,i;if(!n)return;this.isLink()&&(this._unlink(),n=this.selection.range()),t||(t={}),t.href=encodeURI(t.href||""),t.target=encodeURIComponent(t.target||"_self"),r=e.Node.create(e.Lang.sub(this.linkTemplate,t)),i=this._getStyleNodes(n),r.append(i),n.insertNode(r);if(t.text&&t.text!==n.toString()){var s=r.get("firstChild");this._isStyleNode(s)?(s.set("text",t.text),r.setHTML(s)):r.set("text",t.text)}n.selectNode(r).collapse(),this.selection.select(n)},_unlink:function(){var e=this.selection,t;if(t=this._getAnchorNode()){var n=t.get("firstChild"),r=t.get("lastChild"),i=e.range();n.unwrap(),t.destroy(),i.startNode(n,0),i.endNode(r,"after"),e.select(i.shrink({trim:!0}))}}});e.namespace("Editor").Link=t})()},"@VERSION@",{requires:["base-build","gallery-sm-editor-base","node-base"]});
YUI.add("gallery-sm-editor-queue",function(e,t){(function(){var t=e.Base.create("editorStyle",e.Base,[],{queueKeyCommands:{down:{fn:"_clearCommandQueue",allowDefault:!0},end:{fn:"_clearCommandQueue",allowDefault:!0},esc:{fn:"_clearCommandQueue",allowDefault:!0},home:{fn:"_clearCommandQueue",allowDefault:!0},left:{fn:"_clearCommandQueue",allowDefault:!0},pgdown:{fn:"_clearCommandQueue",allowDefault:!0},pgup:{fn:"_clearCommandQueue",allowDefault:!0},right:{fn:"_clearCommandQueue",allowDefault:!0},tab:{fn:"_clearCommandQueue",allowDefault:!0},up:{fn:"_clearCommandQueue",allowDefault:!0}},initializer:function(){this.keyCommands&&(this.keyCommands=e.merge(this.keyCommands,this.queueKeyCommands)),this._attachQueueEvents()},destructor:function(){this._detachQueueEvents()},_attachQueueEvents:function(){if(this._queueEvents)return;var t=this.get("container");this._queueEvents=[t.delegate("keypress",this._onKeyPress,this.selectors.input,this),e.Do.before(this._queueDoBeforeCommand,this,"command",this),e.Do.before(this._queueDoBeforeQuery,this,"query",this)]},_clearCommandQueue:function(){this._commandQueue=null},_detachQueueEvents:function(){this._queueEvents&&((new e.EventHandle(this._queueEvents)).detach(),this._queueEvents=null)},_flushCommandQueue:function(){if(!this._commandQueue)return;var t=e.merge(this._commandQueue);e.Object.each(t,function(e,t){this.command(t,e)},this),this._clearCommandQueue()},_queueCommand:function(t,n){var r=this.commands[t];return this._commandQueue||(this._commandQueue={}),r.style&&e.Lang.isValue(r.style.value)&&(n=this._commandQueue[t]?"":r.style.value),this._commandQueue[t]=n,n},_onKeyPress:function(t){if(t.metaKey)return;var n=this.selection,r=n.range(),i;r.shrink().isCollapsed()&&this._commandQueue?(t.preventDefault(),i=r.insertNode(e.Node.create(String.fromCharCode(t.charCode))),n.select(r.selectNode(i)),this._flushCommandQueue(),n.select(r.selectNode(i).shrink().collapse())):this._clearCommandQueue()},_queueDoBeforeCommand:function(t,n){var r=this.styleCommands[t],i,s;if(r&&"block"!==r.type){i=this.selection.range();if(i&&i.isCollapsed())return s=this._queueCommand(t,n),this._updateSelection({force:!0}),new e.Do.Halt("Editor.Queue prevented command",s)}else this._clearCommandQueue()},_queueDoBeforeQuery:function(t){var n=this._commandQueue&&this._commandQueue[t],r=this.styleCommands[t];if(r&&e.Lang.isValue(n))return e.Lang.isValue(r.style.value)&&(n=n===r.style.value),new e.Do.Halt("Editor.Queue prevented query",n)}});e.namespace("Editor").Queue=t})()},"@VERSION@",{requires:["base-build","event-custom","gallery-sm-editor-base","gallery-sm-editor-keys","node-event-delegate"]});
YUI.add("gallery-sm-editor-style",function(e,t){(function(){var t=e.Editor.DOM,n="<span></span>",r=e.Base.create("editorStyle",e.Base,[],{styleCommands:{bold:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"fontWeight",value:"bold"}},fontName:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"fontFamily"}},fontSize:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"fontSize"}},italic:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"fontStyle",value:"italic"}},justifyCenter:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"textAlign",value:"center"},type:"block"},justifyFull:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"textAlign",value:"justify"},type:"block"},justifyLeft:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"textAlign",value:""},type:"block"},justifyRight:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"textAlign",value:"right"},type:"block"},strikeThrough:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"textDecoration",value:"line-through"}},underline:{commandFn:"_execStyleCommand",queryFn:"_queryStyleCommand",style:{property:"textDecoration",value:"underline"}}},styleKeyCommands:{"ctrl+b":"bold","ctrl+i":"italic","ctrl+u":"underline"},styleTags:"span",initializer:function(){this.commands=e.merge(this.commands,this.styleCommands),this.supportedTags?this.supportedTags+=","+this.styleTags:this.supportedTags=this.styleTags,this.keyCommands&&(this.keyCommands=e.merge(this.keyCommands,this.styleKeyCommands))},styles:function(e){var t={},n;if(e)for(n in e)e.hasOwnProperty(n)&&(t[n]=this.command(n,e[n]));else{var r=this.styleCommands;for(n in r)r.hasOwnProperty(n)&&(t[n]=this.query(n))}return t},_execStyleCommand:function(t,n){var r=this.commands[t],i=this.selection.range(),s,o;if(!i||!r||!r.style)return;"block"===r.type?s=this._getNodes(i,this.blockTags):s=this._getStyleNodes(i),o=s.item(0)._node.style[r.style.property],e.Lang.isValue(r.style.value)?o&&o===r.style.value?o="":o=r.style.value:n?o=r.style.value||n:o="",s.setStyle(r.style.property,o),"block"!==r.type&&(i.startNode(s.item(0)),i.endNode(s.item(s.size()-1),"after"),this.selection.select(i.shrink()))},_getStyleNodes:function(r){var i,s=[];r.shrink(),i=r.parentNode().ancestor(this.styleTags,!0,this.selectors.input);if(i){if(r.toString()===i.get("text"))return new e.NodeList([i])}else i=e.Node.create(n);var o=r.startNode(),u=r.startOffset(),a=r.endNode(),f=r.endOffset();return r.traverse(function(e){if(!t.isTextNode(e))return;a===e&&f!==t.maxOffset(a)&&(e=t.split(e,f).get("previousSibling")),o===e&&u&&(e=t.split(e,u)),this._isStyleNode(e.get("parentNode"))?(e.get("nextSibling")&&t.split(e.get("parentNode"),e.get("nextSibling")),e.get("previousSibling")&&t.split(e.get("parentNode"),e),s.push(e.get("parentNode"))):s.push(e.wrap(i).get("parentNode"))},this),new e.NodeList(s)},_queryStyleCommand:function(t){var n=this.commands[t],r=this.selection.range().clone(),i="span",s=[],o;return r&&n.style&&("block"===n.type&&(i=this.blockTags),this._getNodes(r,i).each(function(e){var t;n.style.computed?t=e.getStyle(n.style.property):t=e._node.style[n.style.property],s.push(t||"")}),s=e.Array.dedupe(s),1===s.length&&(o=s[0]),e.Lang.isValue(n.style.value)?o=o==n.style.value:""===o&&(o=null)),o}});e.namespace("Editor").Style=r})()},"@VERSION@",{requires:["base-build","gallery-sm-editor-base","gallery-sm-editor-dom","gallery-sm-editor-keys","node-base","node-style"]});
YUI.add("gallery-sm-editor-undo",function(e,t){var n=e.Base.create("editorUndo",e.Base,[],{undoKeyCommands:{"ctrl+z":"undo","ctrl+shift+z":"redo",backspace:{fn:"_addUndo",allowDefault:!0},"ctrl+x":{fn:"_addUndo",allowDefault:!0},"ctrl+v":{fn:"_addUndo",allowDefault:!0},"delete":{fn:"_addUndo",allowDefault:!0},enter:{fn:"_addUndo",allowDefault:!0,async:!0},".":{fn:"_addUndo",allowDefault:!0,async:!0},"shift+!":{fn:"_addUndo",allowDefault:!0,async:!0},"shift+?":{fn:"_addUndo",allowDefault:!0,async:!0}},initializer:function(){this.keyCommands&&(this.keyCommands=e.merge(this.keyCommands,this.undoKeyCommands)),this._redoStack=[],this._undoStack=[],e.Do.before(this._addUndo,this,"insertHTML",this),e.Do.before(this._beforeExecCommand,this,"_execCommand",this),this._attachUndoEvents()},destructor:function(){this._detachUndoEvents(),this._redoStack=null,this._undoStack=null},redo:function(){var t=this._redoStack.pop();if(typeof t!="string")return this;if(t.replace(this._cursorHTML,"")===this._inputNode.getHTML())return this.redo();this._addUndo(),this._inputNode.setHTML(t);var n=this._inputNode.one(this.selectors.cursor);if(n){var r=new e.Range;r.startNode(n,"after"),this.selection.select(r),n.remove(!0)}return this},undo:function(){var t=this._undoStack.pop();if(typeof t!="string")return this;if(t.replace(this._cursorHTML,"")===this._inputNode.getHTML())return this.undo();this._addRedo(),this._inputNode.setHTML(t);var n=this._inputNode.one(this.selectors.cursor);if(n){var r=new e.Range;r.startNode(n,"after"),this.selection.select(r),n.remove(!0)}return this},_addUndo:function(){var t=this.selection.range(),n=this._undoStack,r;t&&(r=t.insertNode(e.Node.create(this._cursorHTML)),this.selection.select(t));var i=this._inputNode.getHTML();r&&r.remove(!0),n.push(i)>this.get("undoLevels")&&n.shift()},_addRedo:function(){var t=this.selection.range(),n=this._redoStack,r;t&&(r=t.insertNode(e.Node.create(this._cursorHTML)),this.selection.select(t));var i=this._inputNode.getHTML();r&&r.remove(!0),n.push(i)>this.get("undoLevels")&&n.shift()},_attachUndoEvents:function(){if(this._undoEvents)return;this._undoEvents=[this.after("render",this._afterRender)]},_beforeExecCommand:function(e){/^(?:redo|undo)$/i.test(e)||this._addUndo()},_detachUndoEvents:function(){this._undoEvents&&((new e.EventHandle(this._undoEvents)).detach(),this._undoEvents=null)},_afterRender:function(){this._addUndo()}},{ATTRS:{undoLevels:{value:20}}});e.namespace("Editor").Undo=n},"@VERSION@",{requires:["base-build","event-custom","gallery-sm-editor-base","gallery-sm-editor-keys","gallery-sm-range"]});
YUI.add("gallery-sm-editor",function(e,t){e.Editor=e.mix(e.Base.create("editor",e.Editor.Base,[e.Editor.Delete,e.Editor.Keys,e.Editor.Link,e.Editor.Queue,e.Editor.Block,e.Editor.Style,e.Editor.Format],{}),e.Editor)},"@VERSION@",{use:["gallery-sm-editor-base","gallery-sm-editor-block","gallery-sm-editor-delete","gallery-sm-editor-format","gallery-sm-editor-keys","gallery-sm-editor-link","gallery-sm-editor-queue","gallery-sm-editor-style","gallery-sm-editor-undo"],skinnable:!0});
YUI.add("gallery-sm-map",function(e,t){"use strict";function u(t,n){arguments.length===1&&!("length"in t)&&typeof t.entries!="function"&&(n=t,t=null),n&&(this._mapOptions=e.merge(u.prototype._mapOptions,n)),this.clear();if(t){e.Lang.isArray(t)||(typeof t.entries=="function"?t=t.entries():t=s.call(t));var r;for(var i=0,o=t.length;i<o;++i){r=t[i];if(r.length!==2)throw new TypeError("Invalid map entry: "+r.toString());this.set(r[0],r[1])}}}var n={},r=e.Lang._isNative,i=r(Object.create),s=Array.prototype.slice,o=r(Object.defineProperty)&&e.UA.ie!==8;o&&Object.defineProperty(u.prototype,"size",{configurable:!0,get:function(){return this._mapKeys.length}}),e.mix(u.prototype,{_mapOptions:{objectIdName:"_yuid"},clear:function(){return this._mapKeys=[],this._mapValues=[],this._reindexMap(),this._updateMapSize(),this},concat:function(){var e=new this.constructor(this,this._mapOptions);return arguments.length?e.merge.apply(e,arguments):e},each:function(e,t){var n=this.entries(),r;for(var i=0,s=n.length;i<s;++i){r=n[i];if(e.call(t,r[1],r[0],this)===!1)break}return this},entries:function(){var e=[],t=this._mapKeys,n=this._mapValues;for(var r=0,i=t.length;r<i;++r)e.push([t[r],n[r]]);return e},get:function(e,t){var n=this._indexOfKey(e);return n<0?t:this._mapValues[n]},has:function(e){return this._indexOfKey(e)>=0},keys:function(){return s.call(this._mapKeys)},merge:function(){var e=s.call(arguments),t,n,r,i,o;while(o=e.shift()){t=typeof o.entries=="function"?o.entries():o;for(r=0,i=t.length;r<i;++r){n=t[r];if(n.length!==2)throw new TypeError("Invalid map entry: "+n.toString());this.set(n[0],n[1])}}return this},remove:function(e){var t=this._indexOfKey(e);return t<0?!1:(this._removeMapEntry(t),this._updateMapSize(),!0)},set:function(e,t){var n=this._indexOfKey(e);return n<0&&(n=this._mapKeys.length),this._mapKeys[n]=e,this._mapValues[n]=t,this._indexMapKey(n,e),this._updateMapSize(),this},values:function(){return s.call(this._mapValues)},_indexMapKey:function(t,n){var r=this._mapOptions.objectIdName;if(typeof n=="string"){if(i||this._isSafeKey(n))this._mapKeyIndices[n]=t}else if(r&&n&&typeof n=="object"){if(!n[r]&&this._mapOptions.autoStamp)try{n[r]=e.guid()}catch(s){}n[r]&&(i||this._isSafeKey(n[r]))&&(this._mapObjectIndices[n[r]]=t)}},_indexOfKey:function(e){var t=this._mapOptions.objectIdName,n;this._isIndexStale&&this._reindexMap();if(typeof e=="string"){if(i||this._isSafeKey(e))return n=this._mapKeyIndices[e],n>=0?n:-1}else if(t&&e!==null&&e[t])if(i||this._isSafeKey(e[t])){n=this._mapObjectIndices[e[t]];if(n>=0)return n}var r=this._mapKeys,s=this._sameValueZero,o;for(n=0,o=r.length;n<o;++n)if(s(r[n],e))return n;return-1},_isSafeKey:function(e){return!(e==="prototype"||e in n)},_reindexMap:function(){var e=this._mapKeys;this._mapKeyIndices=i?Object.create(null):{},this._mapObjectIndices=i?Object.create(null):{};for(var t=0,n=e.length;t<n;++t)this._indexMapKey(t,e[t]);this._isIndexStale=!1},_removeMapEntry:function(e){e===this._mapKeys.length-1?(this._mapKeys.pop(),this._mapValues.pop()):(this._mapKeys.splice(e,1),this._mapValues.splice(e,1),this._isIndexStale=!0)},_sameValueZero:function(e,t){return e===t||e!==e&&t!==t},_updateMapSize:o?function(){}:function(){this.size=this._mapKeys.length}},!0),u.prototype["delete"]=u.prototype.remove,u.prototype.forEach=u.prototype.each,u.prototype.toJSON=u.prototype.entries,e.Map=u},"@VERSION@",{requires:[]});
YUI.add("gallery-sm-menu-base",function(e,t){var n="disable",r="enable",i="hide",s="show",o=e.Base.create("menuBase",e.Tree,[e.Tree.Labelable,e.Tree.Openable],{nodeClass:e.Menu.Item,initializer:function(e){e&&(e.nodes=e.items)},closeSubMenus:function(){return e.Object.each(this._openMenus,function(e){e.close()},this),this},disableItem:function(e,t){return e.isDisabled()||this._fireTreeEvent(n,{item:e},{defaultFn:this._defDisableFn,silent:t&&t.silent}),this},enableItem:function(e,t){return e.isDisabled()&&this._fireTreeEvent(r,{item:e},{defaultFn:this._defEnableFn,silent:t&&t.silent}),this},hideItem:function(e,t){return e.isHidden()||this._fireTreeEvent(i,{item:e},{defaultFn:this._defHideFn,silent:t&&t.silent}),this},showItem:function(e,t){return e.isHidden()&&this._fireTreeEvent(s,{item:e},{defaultFn:this._defShowFn,silent:t&&t.silent}),this},_defDisableFn:function(e){e.item.state.disabled=!0},_defEnableFn:function(e){delete e.item.state.disabled},_defHideFn:function(e){e.item.state.hidden=!0},_defShowFn:function(e){delete e.item.state.hidden}});e.namespace("Menu").Base=o},"@VERSION@",{requires:["gallery-sm-menu-item","tree-labelable","tree-openable"]});
YUI.add("gallery-sm-menu-item",function(e,t){function n(t,r){r||(r={}),this.id=this._yuid=r.id||e.guid("menuItem-"),this.type=r.type||"item",this.url=r.url||"#",n.superclass.constructor.call(this,t,r)}e.extend(n,e.Tree.Node,{_serializable:e.Tree.Node.prototype._serializable.concat("type","url"),disable:function(e){return this.tree.disableItem(this,e),this},enable:function(e){return this.tree.enableItem(this,e),this},hide:function(e){return this.tree.hideItem(this,e),this},isDisabled:function(){return!!this.state.disabled||(this.parent?this.parent.isDisabled():!1)},isHidden:function(){return!!this.state.hidden||(this.parent?this.parent.isHidden():!1)},show:function(e){return this.tree.showItem(this,e),this}}),e.namespace("Menu").Item=n},"@VERSION@",{requires:["tree-node","oop"]});
YUI.add("gallery-sm-menu-plugin",function(e,t){e.namespace("Plugin").Menu=e.Base.create("menuPlugin",e.Menu,[e.Plugin.Base],{initializer:function(t){this._host=t.host,this._hostIsBody=this._host===e.one("body"),this._attachMenuPluginEvents()},destructor:function(){clearTimeout(this._pluginHideTimeout)},reposition:function(t){return e.Menu.prototype.reposition.call(this,t||this._host)},_attachMenuPluginEvents:function(){this.get("showOnClick")&&this.afterHostEvent("click",this._afterHostClick),this.get("showOnContext")&&(this._hostIsBody?this._menuEvents.push(e.one("doc").on("contextmenu",this._onHostContext,this)):this.onHostEvent("contextmenu",this._onHostContext)),this.get("showOnHover")&&this.afterHostEvent({blur:this._afterHostBlur,focus:this._afterHostFocus,mouseenter:this._afterHostMouseEnter,mouseleave:this._afterHostMouseLeave})},_getAncestorTestFn:function(){var e=this.get("container"),t=this._host;return function(n){return n===e||n===t}},_afterHostBlur:function(){this.hide()},_afterHostClick:function(){this.rendered||this.render(),this.toggleVisible({anchorPoint:this._host})},_afterHostFocus:function(){clearTimeout(this._timeouts.menu),this.rendered||this.render(),this.show({anchorPoint:this._host})},_afterHostMouseEnter:function(){clearTimeout(this._timeouts.menu),this.rendered||this.render(),this.show({anchorPoint:this._host})},_afterHostMouseLeave:function(){var e=this;this._timeouts.menu=setTimeout(function(){e.hide()},300)},_onHostContext:function(e){e.preventDefault(),this.rendered||this.render(),this.show({anchorPoint:[e.clientX,e.clientY]})}},{NS:"menu",ATTRS:{showOnClick:{value:!0,writeOnce:"initOnly"},showOnContext:{value:!1,writeOnce:"initOnly"},showOnHover:{value:!1,writeOnce:"initOnly"}}})},"@VERSION@",{requires:["event-focus","gallery-sm-menu","node-pluginhost","plugin"]});
YUI.add("gallery-sm-menu-templates",function(e,t){var n=e.Template.Micro;e.namespace("Menu").Templates={children:n.compile('<ul class="<%= data.classNames.children %>"></ul>'),item:n.compile('<% switch (data.item.type) { %><% case "item": %><li id="<%= data.item.id %>" class="<%= data.classNames.item %>"><a href="<%= data.item.url %>" class="<%= data.classNames.label %>" data-item-id="<%= data.item.id %>"<% if (data.item.title) { %> title="<%= data.item.title %>"<% } %>></a></li><% break; %><% case "heading": %><li class="<%= data.classNames.heading %>"><span class="<%= data.classNames.label %>"></span></li><% break; %><% case "separator": %><li class="<%= data.classNames.separator %>"></li><% break; %><% } %>')}},"@VERSION@",{requires:["template-micro"]});
YUI.add("gallery-sm-menu",function(e,t){var n=e.config.doc,r=e.ClassNameManager.getClassName,i="itemClick",s=e.Base.create("menu",e.Menu.Base,[e.View],{classNames:{canHaveChildren:r("menu-can-have-children"),children:r("menu-children"),disabled:r("menu-disabled"),hasChildren:r("menu-has-children"),heading:r("menu-heading"),hidden:r("menu-hidden"),horizontal:r("menu-horizontal"),item:r("menu-item"),label:r("menu-label"),menu:r("menu"),noTouch:r("menu-notouch"),open:r("menu-open"),selected:r("menu-selected"),separator:r("menu-separator"),touch:r("menu-touch"),vertical:r("menu-vertical")},rendered:!1,sourceSelectors:{item:"> li",label:"> a, > span",subtree:"> ul, > ol"},initializer:function(t){this._openMenus={},this._published={},this._timeouts={},t&&t.sourceNode&&(t.nodes=(t.nodes||[]).concat(this.parseHTML(t.sourceNode)),e.one(t.sourceNode).remove(!0)),this._attachMenuEvents()},destructor:function(){this._detachMenuEvents(),delete this._openMenus,delete this._published,e.Object.each(this._timeouts,function(e){clearTimeout(e)},this),delete this._timeouts},getHTMLNode:function(e){return e._htmlNode||(e._htmlNode=this.get("container").one("#"+e.id)),e._htmlNode},hide:function(){return this.set("visible",!1),this},parseHTML:function(t){t=e.one(t);var r=this.classNames,i=[],s=this.sourceSelectors,o=this;return t.all(s.item).each(function(t){var u={},a=t._node,f=t.one(s.label),l=t.one(s.subtree);t.hasClass(r.heading)?u.type="heading":t.hasClass(r.separator)&&(u.type="separator"),t.hasClass(r.disabled)&&(u.state||(u.state={}),u.state.disabled=!0),t.hasClass(r.hidden)&&(u.state||(u.state={}),u.state.hidden=!0);if(f){var c=f.getAttribute("href");u.label=f.getHTML(),c&&c!=="#"&&(u.url=c)}else{var h;for(var p=0,d=a.childNodes.length;p<d;p++){h=a.childNodes[p];if(h.nodeType===n.TEXT_NODE){u.label=e.Escape.html(h.nodeValue);break}}}l&&(u.children=o.parseHTML(l)),i.push(u)}),i},render:function(){var t=this.classNames,n=this.get("container");return n.addClass(t.menu),n.addClass(t[this.get("orientation")]),"ontouchstart"in e.config.win?n.addClass(t.touch):n.addClass(t.noTouch),this._childrenNode=this.renderChildren(this.rootNode,{container:n}),n.inDoc()||e.one("body").append(n),this.rendered=!0,this},renderChildren:function(t,n){n||(n={});var r=n.container,i=r&&r.one("."+this.classNames.children);i||(i=e.Node.create(s.Templates.children({classNames:this.classNames,menu:this,item:t}))),t.isRoot()&&(i.set("tabIndex",0),i.set("role","menu")),t.hasChildren()&&i.set("aria-expanded",t.isOpen());for(var o=0,u=t.children.length;o<u;o++)this.renderNode(t.children[o],{container:i,renderChildren:!0});return r&&r.append(i),i},renderNode:function(t,n){n||(n={});var r=this.classNames,i=t._htmlNode,o=t.isHidden();i||(i=t._htmlNode=e.Node.create(s.Templates.item({classNames:r,item:t,menu:this}))),i.set("aria-hidden",o),i.toggleClass(r.hidden,o);switch(t.type){case"separator":i.set("role","separator");break;case"item":case"heading":var u=i.one("."+r.label),a=u.get("id");u.setHTML(t.label),a||(a=e.guid(),u.set("id",a)),i.set("aria-labelledby",a),t.type==="heading"?i.set("role","heading"):(i.set("role","menuitem"),i.toggleClass(r.disabled,t.isDisabled()),t.canHaveChildren&&(i.addClass(r.canHaveChildren),i.toggleClass(r.open,t.isOpen()),t.hasChildren()&&(i.addClass(r.hasChildren),n.renderChildren&&this.renderChildren(t,{container:i}))))}return n.container&&n.container.append(i),i},reposition:function(t){var n=this.get("container"),r,i;return e.Lang.isArray(t)?r={bottom:t[1],left:t[0],right:t[0],top:t[1]}:t._node?r=t.get("region"):r=t,i=this._getSortedAnchorRegions(this.get("alignments"),n.get("region"),r)[0].region,n.setXY([i.left,i.top]),this},show:function(e){return this.rendered||this.render(),e&&e.anchorPoint&&this.reposition(e.anchorPoint),this.set("visible",!0),this},toggleVisible:function(e){return this[this.get("visible")?"hide":"show"](e)},_attachMenuEvents:function(){this._menuEvents||(this._menuEvents=[]);var t=this.classNames,n=this.get("container");this._menuEvents.push(this.after({add:this._afterAdd,clear:this._afterClear,close:this._afterClose,disable:this._afterDisable,enable:this._afterEnable,hide:this._afterHide,open:this._afterOpen,orientationChange:this._afterOrientationChange,remove:this._afterRemove,show:this._afterShow,visibleChange:this._afterVisibleChange}),n.on("hover",this._onMenuMouseEnter,this._onMenuMouseLeave,this),n.delegate("click",this._onItemClick,"."+t.item+">."+t.label,this),n.delegate("hover",this._onItemMouseEnter,this._onItemMouseLeave,"."+t.canHaveChildren,this),e.one("doc").after("mousedown",this._afterDocMouseDown,this))},_detachMenuEvents:function(){(new e.EventHandle(this._menuEvents)).detach()},_getAncestorTestFn:function(){var e=this.get("container");return function(t){return t===e}},_getAnchorRegion:function(e,t,n){var r={};return e.replace(/^([bt])([lr])-([bt])([lr])/i,function(e,t,i,s,o){var u={b:"bottom",l:"left",r:"right",t:"top"};r[u[t]]=n[u[s]],r[u[i]]=n[u[o]]}),"bottom"in r||(r.bottom=r.top+t.height),"left"in r||(r.left=r.right-t.width),"right"in r||(r.right=r.left+t.width),"top"in r||(r.top=r.bottom-t.height),r},_getSortedAnchorRegions:function(t,n,r,i){i||(i=e.DOM.viewportRegion());var s=[],o,u,a,f;for(o=0,u=t.length;o<u;o++)a=t[o],a.point&&(a=a.point),f=this._getAnchorRegion(a,n,r),s.push({point:a,region:f,score:this._inRegion(f,i)});return s.sort(function(e,t){return e.score===t.score?0:e.score===!0?-1:t.score===!0?1:t.score-e.score}),s},_hideMenu:function(e,t){t||(t=this.getHTMLNode(e));var n=t.one("."+this.classNames.children);n.setXY([-1e4,-1e4]),delete e.data.menuAnchor},_inRegion:function(e,t){return e.bottom<=t.bottom&&e.left>=t.left&&e.right<=t.right&&e.top>=t.top?!0:Math.min(t.bottom-e.bottom,0)+Math.min(e.left-t.left,0)+Math.min(t.right-e.right,0)+Math.min(e.top-t.top,0)},_positionMenu:function(e,t){t||(t=this.getHTMLNode(e));var n=t.one("."+this.classNames.children),r=this.get("orientation"),i,s;e.parent.isRoot()&&r==="horizontal"?i=this.get("alignments"):
i=e.parent&&e.parent.data.menuAnchors||this.get("subMenuAlignments"),s=this._getSortedAnchorRegions(i,n.get("region"),t.get("region"));if(r==="vertical"||!e.parent.isRoot())e.data.menuAnchors=s;var o=s[0].region;n.setXY([o.left,o.top])},_afterAdd:function(e){if(!this.rendered)return;var t=e.parent,n,r;if(t===this.rootNode)n=this._childrenNode;else{r=this.getHTMLNode(t),n=r&&r.one("."+this.classNames.children);if(!n){r||(r=this.renderNode(t)),this.renderChildren(t,{container:r});return}}n.insert(this.renderNode(e.node,{renderChildren:!0}),e.index)},_afterClear:function(){this._openMenus={};if(!this.rendered)return;delete this._childrenNode,this.rendered=!1,this.get("container").empty(),this.render()},_afterDocMouseDown:function(e){if(!this.get("visible"))return;e.target.ancestor(this._getAncestorTestFn(),!0)||(this.closeSubMenus(),this.get("hideOnOutsideClick")&&this.hide())},_afterClose:function(e){var t=e.node,n=this.getHTMLNode(t);for(var r=0,i=t.children.length;r<i;r++)t.children[r].close();t.close(),delete this._openMenus[t.id],n&&(this._hideMenu(t,n),n.removeClass(this.classNames.open))},_afterDisable:function(e){var t=this.getHTMLNode(e.item);t&&t.addClass(this.classNames.disabled)},_afterEnable:function(e){var t=this.getHTMLNode(e.item);t&&t.removeClass(this.classNames.disabled)},_afterHide:function(e){var t=this.getHTMLNode(e.item);t&&(t.addClass(this.classNames.hidden),t.set("aria-hidden",!0))},_afterOpen:function(e){var t=e.node,n=this.getHTMLNode(t),r=t.parent,i;if(r)if(r.isOpen())for(var s=0,o=r.children.length;s<o;s++)i=r.children[s],i!==t&&i.close();else r.open();this._openMenus[t.id]=t,n&&(this._positionMenu(t,n),n.addClass(this.classNames.open))},_afterOrientationChange:function(e){this.rendered&&this.get("container").removeClass(this.classNames.horizontal).removeClass(this.classNames.vertical).addClass(this.classNames[e.newVal])},_afterRemove:function(e){delete this._openMenus[e.node.id];if(!this.rendered)return;var t=this.getHTMLNode(e.node);t&&(t.remove(!0),delete e.node._htmlNode)},_afterShow:function(e){var t=this.getHTMLNode(e.item);t&&(t.removeClass(this.classNames.hidden),t.set("aria-hidden",!1))},_afterVisibleChange:function(e){var t=this.get("container");t.toggleClass(this.classNames.open,e.newVal),e.newVal||t.removeAttribute("style")},_onItemClick:function(e){var t=this.getNodeById(e.currentTarget.getData("item-id")),n=i+"#"+t.id,r=t.isDisabled()||t.isHidden();(r||t.url==="#")&&e.preventDefault();if(r)return;this._published[n]||(this._published[n]=this.publish(n,{defaultFn:this._defSpecificItemClickFn})),this._published[i]||(this._published[i]=this.publish(i,{defaultFn:this._defItemClickFn})),this.fire(n,{originEvent:e,item:t})},_onItemMouseEnter:function(e){var t=this.getNodeById(e.currentTarget.get("id"));clearTimeout(this._timeouts.item);if(t.isOpen()||t.isDisabled())return;this._timeouts.item=setTimeout(function(){t.open()},200)},_onItemMouseLeave:function(e){var t=this.getNodeById(e.currentTarget.get("id"));clearTimeout(this._timeouts.item);if(!t.isOpen())return;this._timeouts.item=setTimeout(function(){t.close()},300)},_onMenuMouseEnter:function(){clearTimeout(this._timeouts.menu)},_onMenuMouseLeave:function(){var e=this;clearTimeout(this._timeouts.menu),this._timeouts.menu=setTimeout(function(){e.closeSubMenus(),e.get("hideOnMouseLeave")&&e.hide()},500)},_defItemClickFn:function(e){var t=e.item;t.canHaveChildren?(clearTimeout(this._timeouts.item),clearTimeout(this._timeouts.menu),e.item.toggleOpen()):this.get("hideOnClick")&&(this.closeSubMenus(),this.hide())},_defSpecificItemClickFn:function(e){this.fire(i,{originEvent:e.originEvent,item:e.item})}},{ATTRS:{alignments:{valueFn:function(){return["tl-bl","tr-br","bl-tl","br-tr"]}},hideOnClick:{value:!0},hideOnMouseLeave:{value:!1},hideOnOutsideClick:{value:!0},orientation:{value:"vertical"},subMenuAlignments:{valueFn:function(){return["tl-tr","bl-br","tr-tl","br-bl"]}},visible:{value:!1}}});e.Menu=e.mix(s,e.Menu)},"@VERSION@",{requires:["classnamemanager","escape","event-hover","gallery-sm-menu-base","gallery-sm-menu-templates","node-screen","view"],skinnable:!0});
YUI.add("gallery-sm-promise-events",function(e,t){"use strict";var n=e.Array,r;r=e.Promise.EventNotifier=function(){this._targets=[]},r.decorate=function(e){return e._evts?e:(e._evts={subs:{},targets:[]},e.on=function(t,n){return t&&n&&(e._evts.subs[t]||(e._evts.subs[t]=[]),e._evts.subs[t].push(n)),e},e.then=function(e){return function(t,n){var i=r.decorate(e.call(this,t,n));return this._evts.targets.push(i),i}}(e.then),e)},e.mix(r.prototype,{addEvents:function(e){return this._targets.push(e),r.decorate(e)},fire:function(t){var r=this._targets.slice(),i={},s=arguments.length>1&&n(arguments,1,!0),o,u,a,f,l,c,h;s&&s.unshift(null,null);for(a=0;a<r.length;++a){o=r[a];if(r[a]._evts){c=e.stamp(r[a]);if(i[c])continue;i[c]=1,r.push.apply(r,r[a]._evts.targets),u=o._evts.subs[t];if(u)for(f=0,l=u.length;f<l;++f)h=u[f],s&&(s[0]=h,h=e.bind.apply(e,s)),e.soon(h)}}return this}})},"@VERSION@",{requires:["promise"]});
YUI.add("gallery-sm-range",function(e,t){var n=e.config.doc,r=e.config.win,i=!!(r&&r.Range&&n.createRange),s=1,o=3,u=i?function(e){this._range=e||n.createRange()}:function(e){this._range=e||n.body.createTextRange()};u.prototype={clone:i?function(){return new e.Range(this._range.cloneRange())}:function(){throw new Error("Not yet implemented.")},cloneContents:i?function(){return e.one(this._range.cloneContents())}:function(){throw new Error("Not yet implemented.")},collapse:function(e){return this._range.collapse(e&&e.toStart),this},compare:i?function(e,t){e._range&&(e=e._range);var n=t&&t.myPoint||"start",i=t&&t.otherPoint||"start",s=r.Range[i.toUpperCase()+"_TO_"+n.toUpperCase()];return this._range.compareBoundaryPoints(s,e)}:function(){throw new Error("Not yet implemented.")},deleteContents:i?function(){return this._range.deleteContents(),this}:function(){throw new Error("Not yet implemented.")},endNode:i?function(t,n){if(t){var r=e.one(t)._node;n||(n=0),typeof n=="number"?this._range.setEnd(r,n):n==="before"?this._range.setEndBefore(r):n==="after"&&this._range.setEndAfter(r)}return e.one(this._range.endContainer)}:function(e,t){throw new Error("Not yet implemented.")},endOffset:i?function(e){return(e||e===0)&&this.endNode(this._range.endContainer,e),this._range.endOffset}:function(e){throw new Error("Not yet implemented.")},expand:function(e){return this.expandStart(e).expandEnd(e)},expandEnd:function(t){function u(e){var t;return e=e._node,o===e.nodeType?t=e.length:t=e.childNodes.length,t}var n=this.endNode(),r=this.endOffset(),i,s;t||(t={}),t.stopAt&&(i=t.stopAt),"string"==typeof i||"function"==typeof i?i=n.ancestor(i,!0):i=e.one(i);while(n!==i&&u(n)===r)s=n.get("parentNode"),r=s.get("childNodes").indexOf(n)+1,n=s;return this.endNode(n,r),this},expandStart:function(t){var n=this.startNode(),r=this.startOffset(),i,s;t||(t={}),t.stopAt&&(i=t.stopAt),"string"==typeof i||"function"==typeof i?i=n.ancestor(i,!0):i=e.one(i);while(n!==i&&0===r)s=n.get("parentNode"),r=s.get("childNodes").indexOf(n),n=s;return this.startNode(n,r),this},extractContents:i?function(){return e.one(this._range.extractContents())}:function(){throw new Error("Not yet implemented.")},insertNode:i?function(t){return t=e.one(t),this._range.insertNode(t._node),t}:function(){throw new Error("Not yet implemented.")},isCollapsed:i?function(){return this._range.collapsed}:function(){throw new Error("Not yet implemented.")},isEquivalent:function(e){return e&&this.compare(e)===0&&this.compare(e,{myPoint:"end",otherPoint:"end"})===0},isInsideNode:function(t){var n=e.one(t)._node,r=this.parentNode()._node;if(n===r)return!0;while(r=r.parentNode)if(n===r)return!0;return!1},parentNode:i?function(){return e.one(this._range.commonAncestorContainer)}:function(){return e.one(this._range.parentElement())},selectNode:i?function(t){return this._range.selectNode(e.one(t)._node),this}:function(e){throw new Error("Not yet implemented.")},selectNodeContents:i?function(t){return this._range.selectNodeContents(e.one(t)._node),this}:function(e){throw new Error("Not yet implemented.")},shrink:function(e){return this.shrinkStart(e).shrinkEnd(e)},shrinkEnd:function(t){var n=t&&t.trim;if(!this.isCollapsed()){var r=this.endNode(),i=r,u=this.endOffset(),a=i.get("nodeType"),f,l;if(o===a){f=i.get("text"),l=n&&""===e.Lang.trim(f.substring(0,u));if(!u||l){var c;while(!(c=i.get("previousSibling")))i=i.get("parentNode");i=c}else if(!n)return this}else{var h=i.get("childNodes"),p=h.item(u-1);p&&(i=p)}s===i.get("nodeType")&&(this.endNode(i,i.get("childNodes").size()),this.traverse(function(e){o===e.get("nodeType")&&(i=e)})),r!==i&&(u=i.get("text").length),f=i.get("text").substring(0,u),u=(n?e.Lang.trimRight(f):f).length,this.endNode(i,u)}return this},shrinkStart:function(t){var n=t&&t.trim;if(!this.isCollapsed()){var r=this.startNode(),i=r,u=this.startOffset(),a=i.get("nodeType"),f,l;if(o===a){f=i.get("text"),l=n&&""===e.Lang.trim(f.substring(u));if(f.length===u||l){var c;while(!(c=i.get("nextSibling")))i=i.get("parentNode");i=c}else if(!n)return this}else{var h=i.get("childNodes"),p=h.item(u);p&&(i=p)}s===i.get("nodeType")&&(this.startNode(i),this.traverse(function(e){if(o===e.get("nodeType"))return i=e,!0})),r!==i&&(u=0),f=i.get("text").substring(u),u+=n?f.indexOf(e.Lang.trimLeft(f)):0,this.startNode(i,u)}return this},startNode:i?function(t,n){if(t){var r=e.one(t)._node;n||(n=0),typeof n=="number"?this._range.setStart(r,n):n==="before"?this._range.setStartBefore(r):n==="after"&&this._range.setStartAfter(r)}return e.one(this._range.startContainer)}:function(e,t){throw new Error("Not yet implemented.")},startOffset:i?function(e){return(e||e===0)&&this.startNode(this._range.startContainer,e),this._range.startOffset}:function(e){throw new Error("Not yet implemented.")},toHTML:i?function(){var e=n.createElement("div");return e.appendChild(this._range.cloneContents()),e.innerHTML}:function(){return this._range.htmlText},toString:i?function(){return this._range.toString()}:function(){return this._range.text},traverse:function(t,n){function o(s){var u=t.call(n,e.one(s));if(u||s===i)return;if(s.firstChild)o(s.firstChild);else if(s.nextSibling)o(s.nextSibling);else{var a=s;while(a=a.parentNode)if(a!==r&&a.nextSibling){o(a.nextSibling);break}}}if(this.isCollapsed())return this;var r=this.parentNode()._node,i=this.endNode()._node,s=this.endOffset();if(s&&i.childNodes.length){i=i.childNodes[s-1];while(i.lastChild)i=i.lastChild}return o(this.startNode()._node),this},wrap:i?function(t,n){var r=this._range.extractContents(),i=e.DOM.create(t);return i.appendChild(r),this._range.insertNode(i),n&&n.includeWrapper?this._range.selectNode(i):this._range.selectNodeContents(i),e.one(i)}:function(e){throw new Error("Not yet implemented.")}},e.Range=u},"@VERSION@",{requires:["node-base"]});
YUI.add("gallery-sm-selection",function(e,t){var n=e.config.doc,r=e.config.win,i=!!r&&!!r.getSelection,s=i?function(){this._selection=r.getSelection()}:function(){this._selection=n.selection};s.prototype={anchorNode:i?function(){return this._selection.anchorNode}:function(){throw new Error("Not yet implemented.")},rangeCount:i?function(){return this._selection.rangeCount}:function(){throw new Error("Not yet implemented.")},range:i?function(t){return this.rangeCount()?new e.Range(this._selection.getRangeAt(t||0)):null}:function(){throw new Error("Not yet implemented.")},ranges:function(){var e=[];for(var t=0,n=this.rangeCount();t<n;t++)e.push(this.range(t));return e},select:i?function(e,t){return(!t||!t.multi)&&this.unselect(),this._selection.addRange(e._range),this}:function(){throw new Error("Not yet implemented.")},unselect:i?function(e){return e?this._selection.removeRange(e._range):this._selection.removeAllRanges(),this}:function(){throw new Error("Not yet implemented.")},toString:function(){var e=this.ranges(),t="";for(var n=0,r=e.length;n<r;n++)t+=e[n].toString();return t}},e.Selection=s},"@VERSION@",{requires:["gallery-sm-range"]});
