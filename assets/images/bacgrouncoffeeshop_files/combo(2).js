YUI.add("sm-content-wizard-header",(function(e){SM.currentModule="sm-content-wizard-header";var exports={},r=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(r("react")),a=babelHelpers.interopRequireDefault(r("prop-types")),t=babelHelpers.interopRequireDefault(r("sm-header")),l=babelHelpers.interopRequireDefault(r("sm-header-logo")),s=babelHelpers.interopRequireDefault(r("sm-header-subscribe-cta-container"));const u=({showSubscribe:r})=>e.default.createElement(t.default,{className:"sm-flex sm-flex-items-center",skinnable:!1},e.default.createElement(l.default,{linkHeaderLogo:!1}),e.default.createElement("nav",{className:"sm-page-header-nav-right sm-cw-header-nav-right sm-flex sm-flex-items-center sm-flex-justify-end sm-mr-4"},!!r&&e.default.createElement(s.default,null)));u.displayName="ContentWizard.Header",u.propTypes={showSubscribe:a.default.bool.isRequired};var n=u;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-header","sm-header-logo","sm-header-subscribe-cta-container"]});
YUI.add("sm-content-wizard-upload-helpers",(function(e){SM.currentModule="sm-content-wizard-upload-helpers";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildUploadConfig=function(n,a,s){let r,o,u;switch(n){case e.UPLOAD_TYPES.PROFILE_IMAGE:u=t.SYSTEM_GALLERY_TYPE_PROFILE;break;case e.UPLOAD_TYPES.COVER_IMAGE:u=t.SYSTEM_GALLERY_TYPE_COVER;break;case e.UPLOAD_TYPES.LOGO_IMAGE:u=t.SYSTEM_GALLERY_TYPE_LOGO;break;case e.UPLOAD_TYPES.BACKGROUND_IMAGE:case e.UPLOAD_TYPES.GALLERY:default:r=s,o=a}return{albumKey:r,nodeId:o,systemAlbumType:u}};var e=n("sm-content-wizard-constants"),t=n("sm-page-nodepage-constants")}(),SM.currentModule=null}),"",{requires:["sm-content-wizard-constants","sm-page-nodepage-constants"]});
YUI.add("sm-uploader-transaction",(function(e){SM.currentModule="sm-uploader-transaction";var exports={};SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim;!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const t="https://".concat(SM.env.host.upload);class a extends(SM.import("sm-io-xhr-transaction")){constructor(e={}){super(Object.assign({},e,{lazy:!0}))}_getHeaders(){let{requestData:e,uploadData:t}=this.request,{file:a}=t,r={"Content-Type":"","X-Smug-ResponseType":"JSON","X-Smug-Uploader":"HTML5","X-Smug-FileName":encodeURIComponent(a.name)};e.nodeId?r["X-Smug-NodeUri"]="/api/v2/node/".concat(e.nodeId):e.systemAlbumType?r["X-Smug-SystemAlbumType"]=e.systemAlbumType:r["X-Smug-AlbumID"]=t.duplicateAlbumId||e.albumId,a.hasRelativePath()&&(r["X-Smug-RelativePath"]=encodeURIComponent(a.augmentedPath)),"replace"===e.duplicateAction&&t.duplicateImageId&&(r["X-Smug-ImageID"]=t.duplicateImageId),"replace"===e.duplicateAction&&t.duplicateImageUri&&(r["X-Smug-ImageUri"]=t.duplicateImageUri);let o=a.name.match(/^smuploadfail_(\d{1,3})/);return o&&(r["X-Smug-ErrorCode"]=o[1]),t.attempts&&t.attempts>1&&(r["X-Smug-RetryCount"]=t.attempts-1),r}_init(){this.request={data:this.request.uploadData.file.nativeObject,headers:this._getHeaders(),method:"PUT",url:t,withCredentials:!0,on:{upload:{load:(...e)=>{this._notifier&&this._notifier.fire("load",...e)},progress:(...e)=>{this._notifier&&this._notifier.fire("progress",...e)}}}}}}exports.default=a,e.SM.io.Transaction.uploader=a}(),SM.currentModule=null}),"",{requires:["sm-io-xhr-transaction"]});
YUI.add("sm-uploader-file",(function(e){SM.currentModule="sm-uploader-file";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t("sm-dom-core"),i=babelHelpers.interopRequireDefault(t("sm-pretty-size")),s=babelHelpers.interopRequireDefault(t("sm-smuglog")),a=t("sm-form-field-file-picker-constants");exports.default=class{constructor(t){let i=t instanceof e.win.Blob||t instanceof e.win.File,a=t.isSmugMugResource&&"ExternalResource"===t.resourceType;if(!i&&!a)throw s.default.add("sm-uploader-file",{fileData:t,toString:t.toString&&t.toString()||"",message:"Unexpected file data"},s.default.LEVEL_ERROR),s.default.error("sm-uploader-file","Oops! There was an error reading the file. Please try again.");if(i)this.name=t.name,this.size=t.size,this.type=t.type,this.nativeObject=t;else{let e=t.get();this.external=!0,this.name=e.Name,this.size=e.ResourceDetails.OriginalSize,this.type=e.FileType.toLowerCase(),this.uri=e.Uri,e.ExternalFileId&&(this.externalFileId=e.ExternalFileId)}t.fullPath&&(this.path=t.fullPath),this.id="sm-uploader-file-".concat(++r)}get augmentedPath(){let e=this._pathInfo;if(e)return e.augmented||e.original}set augmentedPath(e){this._pathInfo=Object.assign({},this._pathInfo,{augmented:e})}get displayName(){let e=this._pathInfo;return e?e.original:this.name}get formattedSize(){return this.size&&(0,i.default)(this.size)||""}get path(){return this._pathInfo&&this._pathInfo.original}set path(e){this._pathInfo=Object.assign({},this._pathInfo,{original:e.replace(/^\//,"")})}get uploadWeight(){let e=this.extension.toLowerCase();return a.DEFAULT_IMAGE_EXTENSIONS.includes(e)||a.DEFAULT_IMAGE_MIMES.includes(this.type)?2:a.DEFAULT_SIDECAR_EXTENSIONS.includes(e)||"text/xml"===this.type?1:0}get extension(){let e=this.name.lastIndexOf(".");return e>0?this.name.substr(e+1).toLowerCase():""}hasRelativePath(){let e=this.path;return!(!e||e===this.name)}};let r=0}(),SM.currentModule=null}),"",{requires:["sm-dom-core","sm-form-field-file-picker-constants","sm-pretty-size","sm-smuglog"]});
YUI.add("sm-uploader-queue",(function(e){SM.currentModule="sm-uploader-queue";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("sm-event-emitter")),s=babelHelpers.interopRequireDefault(t("sm-io-core")),i=babelHelpers.interopRequireDefault(t("sm-page")),r=babelHelpers.interopRequireDefault(t("sm-pretty-size")),l=babelHelpers.interopRequireDefault(t("sm-resource-core")),o=babelHelpers.interopRequireDefault(t("sm-smuglog")),n=babelHelpers.interopRequireDefault(t("sm-uploader-file")),d=babelHelpers.interopRequireDefault(t("sm-uploader-tracking"));const u=e.default.win,{FIELD_NICKNAME:p,FIELD_MESSAGE:c,LEVEL_NOTICE:h,LEVEL_ERROR:m}=o.default,_="sm-uploader-queue",{nodeMaxChildren:f}=SM.env.limits,g={60:!0,61:!0,62:!0,98:!0,99:!0},U={10:{full:"You already have a %type% named %name% here. Try uploading with a different name – or changing the name of the existing %type% by accessing the %type%’s settings, and then re-uploading your new %type%.",type:"Node Name Conflict"},40:{full:"We only support ".concat(f," folders or galleries in a single folder."),type:"Node Children Count Conflict"},20:{full:"Your folders are nested too deeply for us to upload here.",type:"Node Depth Conflict"}},y={Album:"gallery",Folder:"folder",Page:"page"};class E extends a.default{constructor(e={}){super(),this.config=Object.assign({},{checkDuplicates:!0,duplicateAction:"skip"},e),this._initProperties()}get activeUploads(){return this._active}get completedUploads(){return this._completed}get failedUploads(){return this._failed}get percentComplete(){let e=this.completedUploads+this.failedUploads,t=this._uploadsQueue.length-this.removedUploads;return Object.values(this._activeProgress).forEach(t=>{e+=t}),Math.min(e,t)/t}get removedUploads(){return this._removed}get totalUploads(){return this._uploadsQueue.length-this.removedUploads}static getErrorType(e){let t;switch(e){case 60:case 61:case 16:case 62:case 404:t="Network Error";break;case 400:case 1:case 63:case 99:case 98:case 5:case 66:case 67:case 64:case 70:case 68:case 65:case 71:case 72:t="SmugMug Error";break;default:t="Unknown Error"}return t}static getConflictMessage(e){let t=U[e];return t&&t.full||"Unknown conflict."}add(e){if(!e)return Promise.reject(o.default.error(_,"No files passed to Uploader queue"));Array.isArray(e)||(e=[e]);let t=e.map(e=>{let t=e instanceof n.default?e:new n.default(e),a=this._createUploadData(t.id,t);return a.valid&&(this._uploadsQueue.push(a),this._uploadsMap[t.id]=a),a});return this._batchTotal+=t.length,t}clearAll(){let e=this._uploadsQueue;for(let t=0,a=e.length;t<a;t++){let a=e[t];this._releaseUploadIO(a),this._releaseFile(a)}return this._initProperties(),this}destroy(){this.clearAll(),this._detachBeforeUnload()}pause(){return this._stopped=!0,this}precheckFiles(e){Array.isArray(e)||(e=[e]);let t={},a={};return e.forEach((e,s)=>{e.hasRelativePath()&&(t[e.id]=e.path,a[e.id]=s)}),Object.keys(t).length?new Promise((s,i)=>{l.default.postUri("/api/v2/node/".concat(encodeURIComponent(this.config.nodeId),"!uploadconflicts"),{data:{RelativePaths:t},io:{apiRoot:"https://".concat(SM.env.host.upload)}}).then(t=>{let i=t.get("FolderUploadPathAugmentations");Object.keys(i).forEach(t=>{e[a[t]].augmentedPath=i[t]}),s(e)},e=>{let{response:t}=e.error;409!==(t&&t.Code)&&i();let a,s,r,n=l.default._makeResources(t).get("PathsConflictsDetails");for(let e in n){let t=n[e][0];a=t.Code,s=t.Uri,r=E.getConflictMessage(t.Code);break}10===a?l.default.loadUri(s).then(e=>{r=r.replace("%name%",e.get("Name"));let t=y[e.get("Type")]||"folder";r=r.replace(new RegExp("%type%","g"),t),i(o.default.error(_,{message:r,type:U[a].type}))},i):i(o.default.error(_,{message:r,type:U[a].type}))})}):Promise.resolve(e)}removeById(e){let t=this._getUploadById(e)||null;if(t){switch(t=this._releaseUploadIO(t),this._removed++,t.status){case"processing":this._active--,t.file&&delete this._fileNames[t.file.name],delete this._activeProgress[e];break;case"complete":this._completed--;break;case"error":this._failed--,t.file&&delete this._fileNames[t.file.name];break;case"verifying":this._inVerification--}t=this._releaseFile(t)}return delete this._uploadsMap[e],t}restart(){return this._currentIndex=0,this.run()}run(){let e=this._uploadsQueue,t=e.length;for(this._stopped=!1,this._currentIndex;this._currentIndex<t&&2!==this.activeUploads;this._currentIndex++)this._processUpload(e[this._currentIndex]);return this._checkCompleted(),this._active>0}_attachBeforeUnload(){this._detachBeforeUnload(),this._beforeUnload=e.default.addEventListener(u,"beforeunload",e=>{let t="Navigating away from this page will cancel uploads currently in progress.";return d.default.trackScreenView("Browser Confirm Navigation"),e.returnValue=t,t})}_checkCompleted(){let e=this._uploadsQueue.length;this._currentIndex===e&&0===this.activeUploads&&0===this._inVerification&&(this.emit(E.EVENT_QUEUE_COMPLETE,{completed:this.completedUploads,failed:this._batchFailed,total:this._batchTotal}),this._batchFailed=0,this._batchTotal=0,this._detachBeforeUnload())}_createUploadData(e,t){let a,s,i,r=t.name,l=this._getReplaceImageData(r),o=this._validateFile(t);return o.valid?!1===l&&(i="Photo to replace not found"):i=o.message,l&&(a=l.ImageID,s=l.AlbumID),{attempts:0,duplicateAlbumId:s||null,duplicateImageId:a||null,extension:t.extension,file:t,io:null,message:i||"",link:null==o?void 0:o.errorLink,status:"",type:o.type,uploadId:e,valid:o.valid}}_detachBeforeUnload(){this._beforeUnload&&(e.default.removeEventListener(this._beforeUnload),this._beforeUnload=null)}_getDuplicate(e){let t=this.config.albumKey,a=i.default.owner&&i.default.isOwnerOrAdmin()?i.default.owner.nickName:"";if(!this.config.checkDuplicates||!t||!a)return Promise.resolve(!1);let s="/api/v2/user/".concat(encodeURIComponent(a),"!duplicatecomponentsearch");return l.default.loadUri(s,{data:{AlbumUri:"/api/v2/album/".concat(t),FileName:e}}).then(t=>t.length?t[0]:this._getLocalDuplicate(e)).catch(()=>!1)}_getLocalDuplicate(e){return!!this._fileNames[e]}_getReplaceImageData(e){var t=this.config.replaceImagesData;if(t&&e){let a;for(let s=0,i=t.length;s<i;s++)if(a=t[s],e.toLowerCase()===a.FileName.toLowerCase())return a;return!1}return null}_getUploadById(e){return this._uploadsMap[e]||null}_initProperties(){this._active=0,this._activeProgress={},this._completed=0,this._currentIndex=0,this._failed=0,this._fileNames={},this._inVerification=0,this._removed=0,this._stopped=!0,this._uploadsMap={},this._uploadsQueue=[],this._batchFailed=0,this._batchTotal=0}_isExternalVideo(e){return e.external&&"video"===e.type}_isRetryableBackendError(e){return!!g[e]}_processUpload(e,t={isRetry:!1}){let a=this.config.duplicateAction;if(this._stopped||!e.file||e.status)return e;if(null!==e.duplicateImageId&&"skip"===a)return e;let s=e.file.name;return t.isRetry||this._active++,this._getDuplicate(s).then(t=>{if("allow"!==a&&(!0===t||t.isSmugMugResource&&"skip"===a))return e.errorLabel=e.message="Duplicate File",this.emit(E.EVENT_UPLOAD_ERROR,{type:"warning",upload:e}),this._active--,void(!this._stopped&&this.run());t&&"replace"===a?e.duplicateImageUri=t.getExpansionUri("Image"):this._fileNames[s]=!0,this._sendFile(e)}),e}_releaseFile(e){return e.file=null,e}_releaseUploadIO(e){return e.io&&e.io.abort(),e.io=null,e}_retryFile(e){return!this._stopped&&(delete e.status,delete this._fileNames[e.file.name],this._processUpload(e,{isRetry:!0}),!0)}_sendFile(e){let t;e.attempts++,e.status="processing",this._attachBeforeUnload(),this.emit(E.EVENT_UPLOAD_START,{upload:e}),t=e.file.external?this._sendThirdPartyFile(e):this._sendLocalFile(e),t.then(t=>{this._onUploadComplete(t,e.uploadId)}).catch(t=>{this._onSendError(e,t)})}_sendLocalFile(e){let t=e.io=(0,s.default)({type:"uploader",uploadData:e,requestData:this.config});return t.on("load",t=>{this._onUploadProgress(t,e.uploadId)}),t.on("progress",t=>{this._onUploadProgress(t,e.uploadId)}),t}_sendThirdPartyFile(e){let t={data:{Uri:e.file.uri},io:{apiRoot:"https://".concat(SM.env.host.upload)}},a="/api/v2/album/".concat(encodeURIComponent(this.config.albumKey),"!uploadfromexternalresource");return"replace"===this.config.duplicateAction&&e.duplicateImageUri&&(a="".concat(e.duplicateImageUri,"!replacefromexternalresource")),e.file.externalFileId&&(t.data.Id=e.file.externalFileId),l.default.postUri(a,t).catch(e=>{let t=l.default.getProblems(e),a=Object.keys(t);if(0===a.length)return e.error&&e.error.message||o.default.add(_,{details:e,[c]:"Error, but not field or standard error",url:document.URL},h),Promise.reject(e);let s=a[0],i=t[s][0];throw"Uri"!==s&&o.default.add(_,{details:t,field:s,[c]:"Problem field not Uri",url:document.URL},h),e.error.message=i,e})}_validateFile(e){let t,{uploadLimits:{additionalKnownExtensionsAndMimes:a,allowedExtensions:s,allowedMimeTypes:i,errorMessages:l,fileTypeMap:o,maxFileSizes:n}}=this.config,{extension:d,size:u,type:p}=e,c={message:"",type:"",valid:!1};if(o.has("SmugVault")){c.valid=!0,t=n.get("SmugVault"),c.type="Vault";let e=this._getFileType({extension:d,type:p});"Image"!==e&&"Video"!==e||(c.type=e)}else s.has(d)||i.has(p)?(c.valid=!0,c.type=this._getFileType({extension:d,type:p}),t=n.get(c.type)):(c.message="Unsupported file type.",(a.has(d)||a.has(p))&&(c.type="RAW",c.message="Error uploading file. ".concat(l.RAW.message),c.errorLink=l.RAW.link));if(c.valid&&u>t){let e=(0,r.default)(t);c.message="Exceeds maximum size of ".concat(e),c.valid=!1}return c}_getFileType({extension:e,type:t}){let a;for(let[s,i]of this.config.uploadLimits.fileTypeMap)if(i.has(e||t)){a=s;break}return a}_onSendError(e,t={}){let a=e.uploadId,s=this._activeProgress[a];delete this._activeProgress[a],"verifying"===e.status&&this._inVerification--,e=this._releaseUploadIO(e);let{error:r}=t;if(e.file&&e.file.external)o.default.add(_,{response:t,[c]:"Error uploading from third party",url:document.URL},m);else if(s<1&&e.attempts<2){if(this._retryFile(e))return}else 1===s&&o.default.add(_,{[c]:"XHR error all bytes sent",url:document.URL},h);r&&r.message?e.message=r.message:(o.default.add(_,{attempts:e.attempts,filePath:e.file.hasRelativePath()?e.file.augmentedPath:"",fileSize:e.file.size,[c]:"No error message on response",[p]:i.default.user.nickName,percentComplete:s,url:document.URL},m),e.message="Connection error"),e.status="error",r&&r.response&&(e.errorLabel=E.getErrorType(r.response.Code)),this._active--,this._failed++,this._batchFailed++,this._checkCompleted(),!this._stopped&&this.run(),this.emit(E.EVENT_UPLOAD_ERROR,{upload:e})}_onUploadComplete(e,t){let a,s=this._getUploadById(t),i=!1,r="verifying"===s.status,l={upload:s};"ok"===e.stat||e.isSmugMugResource&&"Image"===e.resourceType?i=!0:(a=this._isRetryableBackendError(e.code)&&s.attempts<2,s.errorLabel=E.getErrorType(e.code),s.message=e.message||"Unknown error"),delete this._activeProgress[t],r&&this._inVerification--,a||this._active--,s=this._releaseUploadIO(s);let o=a&&this._retryFile(s);i?(s=this._releaseFile(s),s.status="complete",s.imageData=e.Image||e.get(),this._completed++,this.emit(E.EVENT_UPLOAD_COMPLETE,l),!this._stopped&&this.run()):o||(s.status="error",this._failed++,this._batchFailed++,this.emit(E.EVENT_UPLOAD_ERROR,l),!this._stopped&&this.run()),this._stopped&&0===this.activeUploads&&this._detachBeforeUnload()}_onUploadProgress(e,t){let a=e.loaded||0,s=e.total||0;this._progressTimers||(this._progressTimers={}),clearTimeout(this._progressTimers[t]);let i=this._getUploadById(t);a&&s&&a===s&&"verifying"!==i.status&&(i.status="verifying",this._inVerification++,this.emit(E.EVENT_UPLOAD_VERIFYING,{upload:i})),this._progressTimers[t]=setTimeout(()=>{let e=0;i&&"complete"!==i.status&&(a&&s&&(e=this._activeProgress[t]=a/s),this.emit(E.EVENT_UPLOAD_PROGRESS,{percentComplete:e,uploadId:t}))},17)}}exports.default=E,E.EVENT_QUEUE_COMPLETE="queuecomplete",E.EVENT_UPLOAD_COMPLETE="uploadcomplete",E.EVENT_UPLOAD_ERROR="uploaderror",E.EVENT_UPLOAD_PROGRESS="uploadprogress",E.EVENT_UPLOAD_START="uploadstart",E.EVENT_UPLOAD_VERIFYING="uploadverifying"}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-event-emitter","sm-io-core","sm-page","sm-pretty-size","sm-resource-core","sm-smuglog","sm-uploader-transaction","sm-uploader-file","sm-uploader-tracking"]});
YUI.add("sm-content-wizard-add-info",(function(e){SM.currentModule="sm-content-wizard-add-info";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),l=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-dom")),r=babelHelpers.interopRequireDefault(t("react-dom")),o=babelHelpers.interopRequireDefault(t("classnames")),s=babelHelpers.interopRequireDefault(t("sm-ua")),i=babelHelpers.interopRequireDefault(t("sm-analytics")),n=babelHelpers.interopRequireDefault(t("sm-component-busy")),d=babelHelpers.interopRequireDefault(t("sm-panel-progress")),u=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-bg-img-ui")),p=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-display-name-ui")),c=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-gallery-ui")),f=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-footer")),m=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-template-preview")),E=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-logo-ui")),g=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-profile-ui")),h=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info-social-ui")),b=babelHelpers.interopRequireDefault(t("sm-content-wizard-header")),y=t("sm-content-wizard-constants"),U=t("sm-content-wizard-helpers"),_=t("sm-content-wizard-upload-helpers"),P=babelHelpers.interopRequireDefault(t("sm-uploader-queue")),S=babelHelpers.interopRequireDefault(t("sm-uploader-tracking"));const T=(new s.default).isIOS;class I extends e.default.PureComponent{constructor(...t){super(...t),babelHelpers.defineProperty(this,"_galleryRef",e.default.createRef()),babelHelpers.defineProperty(this,"_queue",null),babelHelpers.defineProperty(this,"state",{uploadTypeInProgress:null,files:{[y.UPLOAD_TYPES.GALLERY]:[],[y.UPLOAD_TYPES.PROFILE_IMAGE]:[],[y.UPLOAD_TYPES.COVER_IMAGE]:[],[y.UPLOAD_TYPES.LOGO_IMAGE]:[],[y.UPLOAD_TYPES.BACKGROUND_IMAGE]:[]},currentUploadPercent:null,galleryErrorMessage:null,backgroundErrorMessage:null,coverErrorMessage:null,logoErrorMessage:null,profileErrorMessage:null,galleryUploadsCompleted:this.props.previousGalleryUploadCount||0,galleryUploadsTotal:this.props.previousGalleryUploadCount||0}),babelHelpers.defineProperty(this,"_onFieldChange",e=>{let t=e.target.name,l=e.target.value;this.props.onSetInfoField(t,l)}),babelHelpers.defineProperty(this,"_onSubmitClick",()=>{let{displayNameValue:e,galleryNameValue:t,onSetSubmittedFlag:l,onSubmit:o,onTrackEvent:s}=this.props,{galleryUploadsCompleted:n,uploadTypeInProgress:d}=this.state;if(e&&t){if((n>0||d===y.UPLOAD_TYPES.GALLERY)&&l(!0),!n){let e=r.default.findDOMNode(this._galleryRef.current);return a.default.scrollIntoViewIfNeeded(e),this.setState({galleryErrorMessage:"No one likes an empty gallery. Add photos to start your site."}),void s("Gallery Upload Required Error")}d||(i.default.Tracker.createEvent(i.default.CATEGORY.FUNNEL_ONBOARDING,i.default.ACTION.UPLOAD_FINISH,{}).log(),o())}}),babelHelpers.defineProperty(this,"_onUploadFiles",(e,t)=>{this.props.onTrackUploadEvent({action:S.default.ACTIONS.queue,label:"Browse Files",property:"File Upload",value:e.length});let{galleryUploadsTotal:l,uploadTypeInProgress:a}=this.state;t===y.UPLOAD_TYPES.GALLERY&&(l+=e.length),this.setState({["".concat(t,"ErrorMessage")]:null}),a?(t===a&&this._addToUploadQueue(e),this.setState(a=>{let r;return r=t===y.UPLOAD_TYPES.GALLERY?[...a.files[t],...e]:e,{files:{...a.files,[t]:r},galleryUploadsTotal:l}})):this.setState({uploadTypeInProgress:t,galleryUploadsTotal:l},()=>{let{firstGalleryAlbumKey:l,firstGalleryNodeId:a}=this.props,{albumKey:r,nodeId:o,systemAlbumType:s}=(0,_.buildUploadConfig)(t,a,l);this._uploadToQueue(e,o,r,s)})}),babelHelpers.defineProperty(this,"_uploadNextFileList",()=>{let{files:e}=this.state,{firstGalleryAlbumKey:t,firstGalleryNodeId:l,onSetUploadingFlag:a,onSubmit:r,submitted:o}=this.props,s=Object.keys(e).find(t=>e[t].length>0);s?this.setState({uploadTypeInProgress:s},()=>{let{albumKey:a,nodeId:r,systemAlbumType:o}=(0,_.buildUploadConfig)(s,l,t);this._uploadToQueue(e[s],r,a,o)}):(this.setState({uploadTypeInProgress:null}),a(!1),o&&r())}),babelHelpers.defineProperty(this,"_onUploadProgress",()=>{this.setState({currentUploadPercent:100*this._queue.percentComplete})}),babelHelpers.defineProperty(this,"_onUploadComplete",e=>{let{uploadTypeInProgress:t,galleryUploadsCompleted:l}=this.state;y.UPLOAD_TYPES.GALLERY===t?this.setState({galleryUploadsCompleted:l+1}):this.props.onSaveImageUri(t,e.upload.imageData.Key),this.props.onTrackUploadEvent({action:S.default.ACTIONS.complete,label:e.upload.type})}),babelHelpers.defineProperty(this,"_onUploadQueueComplete",e=>{let{uploadTypeInProgress:t}=this.state,{galleryErrorCount:l,onSaveGalleryTotal:a,onShowGalleryUploadErrorAlert:r,onTrackUploadEvent:o}=this.props;t===y.UPLOAD_TYPES.GALLERY&&(a(e.completed),l&&r()),this.setState(e=>({currentUploadPercent:0,files:{...e.files,[t]:[]}}),()=>{this._uploadNextFileList()}),o({action:S.default.ACTIONS.failures,property:"File Upload",value:e.failed})}),babelHelpers.defineProperty(this,"_onUploadQueueError",e=>{let t=e.upload,{uploadTypeInProgress:l}=this.state,{onSetSubmittedFlag:a,onTrackUploadEvent:r,onGalleryUploadError:o}=this.props;a(!1);let s=t.message,i=t.file.name;if(l===y.UPLOAD_TYPES.GALLERY)o(s,i);else{let e="".concat(l,"ErrorMessage");this.setState({[e]:s})}r({action:S.default.ACTIONS.error,label:t.errorLabel||"Unknown Error",property:s})}),babelHelpers.defineProperty(this,"_uploadToQueue",(e,t,l,a)=>{let{uploadLimits:r}=this.props;this.props.isUploading||this.props.onSetUploadingFlag(!0);let o=!0;(T||this.state.uploadTypeInProgress===y.UPLOAD_TYPES.BACKGROUND_IMAGE)&&(o=!1),this._queue=new P.default({albumKey:l,nodeId:t,systemAlbumType:a,checkDuplicates:o,uploadLimits:r}),this._addToUploadQueue(e),this._queueListeners=[this._queue.on(P.default.EVENT_UPLOAD_PROGRESS,this._onUploadProgress),this._queue.on(P.default.EVENT_UPLOAD_COMPLETE,this._onUploadComplete),this._queue.on(P.default.EVENT_QUEUE_COMPLETE,this._onUploadQueueComplete),this._queue.on(P.default.EVENT_UPLOAD_ERROR,this._onUploadQueueError)],this._queue.run()}),babelHelpers.defineProperty(this,"_addToUploadQueue",e=>{this._queue.add(e)}),babelHelpers.defineProperty(this,"_onTemplatePreviewClick",()=>{this.props.onTrackEvent("Confusion Click","Your Template")})}componentDidMount(){this.props.loading||a.default.doc.documentElement.classList.add("sm-content-wizard-add-info")}componentDidUpdate(e){y.LOADING_FETCH_SITE_DESIGN===e.loading&&y.LOADING_FETCH_SITE_DESIGN!==this.props.loading&&a.default.doc.documentElement.classList.add("sm-content-wizard-add-info")}componentWillUnmount(){a.default.doc.documentElement.classList.remove("sm-content-wizard-add-info"),this._queueListeners&&this._queueListeners.forEach(e=>{this._queue.removeListener(e)}),this._queue&&this._queue.destroy()}render(){let t,l,{isExperimentDesign:a,experimentHeaderText:r,headerText:o,subHeaderText:s,loading:i,showDisplayNameUI:n,showSubscribe:u,submitted:p,mode:c}=this.props,{uploadTypeInProgress:f}=this.state,m="contentwiz_addcontent_header";if(n||(m="contentwiz_welcome_header"),t=y.LOADING_FETCH_SITE_DESIGN===i?this._renderFetchSiteDesignDataLoadingIndicator():this._renderAddInfoInterface(),y.LOADING_BUILDING_SITE===i){let t=c===y.CW_MODES.LITE?"gallery":"site";l=e.default.createElement(d.default,{title:"Building your awesome ".concat(t,"...")})}else p&&f&&(l=this._renderUploadPanelProgress());return e.default.createElement("div",{className:"sm-cw-add-info-step"},e.default.createElement(b.default,{showSubscribe:u}),e.default.createElement("div",{className:"sm-cw-header sm-text-center"},e.default.createElement("h1",{className:"sm-title-l","data-testid":m},a?r:o),e.default.createElement("p",{className:"sm-h4"},s)),t,l)}_renderUploadPanelProgress(){let{currentUploadPercent:t,galleryUploadsCompleted:l,galleryUploadsTotal:a,uploadTypeInProgress:r}=this.state,o=y.UPLOAD_PANEL_LABELS[r];return e.default.createElement(d.default,{title:o,percentComplete:t},r===y.UPLOAD_TYPES.GALLERY&&e.default.createElement("p",{className:"sm-cw-panel-progress-footer"},l,"/",a," Photo",a>1?"s":""))}_renderFetchSiteDesignDataLoadingIndicator(){return e.default.createElement(n.default,{className:"sm-cw-busy",size:n.default.SIZE_LARGE})}_renderAddInfoInterface(){let{isExperimentDesign:t}=this.props,{displayNameValue:l,firstGalleryType:a,galleryNameValue:r,hasEnteredSocialInfo:s,previewDesignName:i,previewImageUrl:n,showBackgroundImageUI:d,showDisplayNameUI:b,showFooterBackButton:_,showLogoUI:P,showProfileUI:S,showSocialUI:T,stackFooterButtons:I,showAddInfoTemplatePreviewUI:w,uploadLimits:D,onCancelClick:C,onGalleryFilePickerError:L,onImageExtracted:A,onTrackEvent:R,previousGalleryUploadCount:q,backgroundUploadComplete:N,coverUploadComplete:G,logoUploadComplete:O,profileUploadComplete:v}=this.props,{currentUploadPercent:k,files:H,galleryErrorMessage:M,galleryUploadsCompleted:F,galleryUploadsTotal:z,uploadTypeInProgress:x}=this.state,{backgroundPercentComplete:Y,coverPercentComplete:B,galleryPercentComplete:V,logoPercentComplete:Q,profilePercentComplete:K}=(0,U.mapCurrentUploadProgressToType)(x,k),j=(0,U.calcUploadStatus)(y.UPLOAD_TYPES.BACKGROUND_IMAGE,N,x,H),W=(0,U.calcUploadStatus)(y.UPLOAD_TYPES.COVER_IMAGE,G,x,H),Z=(0,U.calcUploadStatus)(y.UPLOAD_TYPES.LOGO_IMAGE,O,x,H),J=(0,U.calcUploadStatus)(y.UPLOAD_TYPES.PROFILE_IMAGE,v,x,H),X=q>0,$=F!==z,ee=(0,U.calcUploadStatus)(y.UPLOAD_TYPES.GALLERY,X,x,H,$),te=S||d||P||b||T,le=(0,o.default)(["sm-cw-add-info-container","sm-flex-large-and-up","sm-flex-row-reverse",{"sm-flex-justify-between":w},{"sm-flex-justify-center":!w}]),ae=[[...D.allowedExtensions].map(e=>".".concat(e)).join(","),...D.allowedMimeTypes];return e.default.createElement(e.default.Fragment,null,e.default.createElement("section",{className:le},w&&e.default.createElement("aside",null,e.default.createElement(m.default,{onClick:this._onTemplatePreviewClick,previewDesignName:i,previewImageUrl:n,showHeading:!!te})),e.default.createElement("form",{className:"sm-cw-add-info-form"},e.default.createElement(c.default,{acceptTypes:ae,isExperimentDesign:t,firstGalleryType:a,galleryNameValue:r,onFilesSelected:this._onUploadFiles,onGalleryFilePickerError:L,onGalleryNameChange:this._onFieldChange,onImageExtracted:A,percentComplete:V,uploadStatus:ee,uploadsCompleted:F,uploadsTotal:z,galleryUploadError:M,ref:this._galleryRef,onTrackEvent:R}),e.default.createElement("div",{className:"sm-cw-add-info-additional"},!!te&&e.default.createElement("h2",{className:"sm-h3"},"Additional Site Content"),!!S&&e.default.createElement(g.default,{isExperimentDesign:t,coverErrorMessage:this.state.coverErrorMessage,coverPercentComplete:B,coverUploadStatus:W,profileErrorMessage:this.state.profileErrorMessage,profilePercentComplete:K,profileUploadStatus:J,onImageExtracted:A,onImageSelected:this._onUploadFiles}),!!d&&e.default.createElement(u.default,{isExperimentDesign:t,errorMessage:this.state.backgroundErrorMessage,onImageExtracted:A,onImageSelected:this._onUploadFiles,percentComplete:Y,uploadStatus:j}),!!P&&e.default.createElement(E.default,{isExperimentDesign:t,errorMessage:this.state.logoErrorMessage,onImageExtracted:A,onImageSelected:this._onUploadFiles,percentComplete:Q,uploadStatus:Z}),!!b&&e.default.createElement(p.default,{onDisplayNameChange:this._onFieldChange,displayNameValue:l,onTrackEvent:R}),!!T&&e.default.createElement(h.default,{isExperimentDesign:t,hasEnteredSocialInfo:s,onTrackEvent:R})))),e.default.createElement(f.default,{onCancelClick:C,onSubmitClick:this._onSubmitClick,showBackButton:_,stackButtons:I}))}}babelHelpers.defineProperty(I,"displayName","ContentWizard.AddInfo"),babelHelpers.defineProperty(I,"propTypes",{firstGalleryAlbumKey:l.default.string.isRequired,firstGalleryNodeId:l.default.string.isRequired,firstGalleryType:l.default.oneOf(y.FIRST_GALLERY_TYPE_VALUES).isRequired,uploadLimits:l.default.object.isRequired,displayNameValue:l.default.string.isRequired,galleryNameValue:l.default.string.isRequired,onCancelClick:l.default.func.isRequired,onGalleryFilePickerError:l.default.func.isRequired,onGalleryUploadError:l.default.func.isRequired,onImageExtracted:l.default.func.isRequired,onSaveGalleryTotal:l.default.func.isRequired,onSaveImageUri:l.default.func.isRequired,onSetInfoField:l.default.func.isRequired,onSetSubmittedFlag:l.default.func.isRequired,onSetUploadingFlag:l.default.func.isRequired,onShowGalleryUploadErrorAlert:l.default.func.isRequired,onSubmit:l.default.func.isRequired,onTrackEvent:l.default.func.isRequired,onTrackUploadEvent:l.default.func.isRequired,isExperimentDesign:l.default.bool,experimentHeaderText:l.default.string,hasEnteredSocialInfo:l.default.bool,headerText:l.default.string,isUploading:l.default.bool,loading:l.default.string,previewDesignName:l.default.string.isRequired,previewImageUrl:l.default.string.isRequired,showBackgroundImageUI:l.default.bool,showDisplayNameUI:l.default.bool,showLogoUI:l.default.bool,showProfileUI:l.default.bool,showSocialUI:l.default.bool,showSubscribe:l.default.bool.isRequired,showFooterBackButton:l.default.bool,showAddInfoTemplatePreviewUI:l.default.bool,stackFooterButtons:l.default.bool,subHeaderText:l.default.string,submitted:l.default.bool,mode:l.default.oneOf([y.CW_MODES.DEFAULT,y.CW_MODES.LITE]),previousGalleryUploadCount:l.default.number,galleryErrorCount:l.default.number,backgroundUploadComplete:l.default.bool,coverUploadComplete:l.default.bool,logoUploadComplete:l.default.bool,profileUploadComplete:l.default.bool});var w=I;exports.default=w}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-dom","react-dom","classnames","sm-ua","sm-analytics","sm-component-busy","sm-panel-progress","sm-content-wizard-add-info-bg-img-ui","sm-content-wizard-add-info-display-name-ui","sm-content-wizard-add-info-gallery-ui","sm-content-wizard-add-info-footer","sm-content-wizard-add-info-template-preview","sm-content-wizard-add-info-logo-ui","sm-content-wizard-add-info-profile-ui","sm-content-wizard-add-info-social-ui","sm-content-wizard-header","sm-content-wizard-constants","sm-content-wizard-helpers","sm-content-wizard-upload-helpers","sm-uploader-queue","sm-uploader-tracking"]});
YUI.add("sm-content-wizard-add-info-container",(function(e){SM.currentModule="sm-content-wizard-add-info-container";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("sm-smuglog")),n=t("react-redux"),a=babelHelpers.interopRequireDefault(t("sm-analytics")),s=t("sm-content-wizard-actions"),i=t("sm-content-wizard-publish-actions"),r=t("sm-content-wizard-selectors"),l=t("sm-page-selectors"),d=t("sm-page-feature-flag-constants"),c=t("sm-content-wizard-helpers"),u=t("sm-content-wizard-constants"),m=t("sm-page-widget-constants"),g=t("sm-content-wizard-add-info-container-hoc"),p=babelHelpers.interopRequireDefault(t("sm-content-wizard-add-info"));const w=(0,g.withCommonAddInfoStateProps)(t=>{if(!(0,r.getSelectedSiteDesignUri)(t))throw o.default.add("sm-content-wizard-selectors",{[o.default.FIELD_MESSAGE]:"Add Info step missing design selection",location:e.default.win.location.href},o.default.LEVEL_ERROR),new Error("Content Wizard Add Info step missing design selection");let{highlightImageSizes:n}=(0,r.getSelectedSiteDesignData)(t),a=(0,c.extractPreviewImageUrl)(n,288,200),s=(0,r.getWidgetTypesForSelectedSiteDesign)(t),i=(0,r.getSelectedSiteDesignHomepageBackgroundType)(t),g=(0,c.calcFirstGalleryType)(s,i),p=i===u.PAGE_DESIGN_BG_TYPE_PHOTO,w=s.has(m.WIDGET_LOGO),f=s.has(m.WIDGET_PROFILE),I=s.has(m.WIDGET_PROFILE)||s.has(m.WIDGET_SOCIALLINKS),S=null!==(0,r.getSocialLinks)(t),{background:h,cover:D,logo:E,profile:b}=(0,r.getCompletedUploadData)(t),z={showSocialUI:I};return{firstGalleryType:g,isExperimentDesign:(0,l.getFeatureFlagValue)(t,d.EXPERIMENT_ADD_INFO_DESIGN),experimentHeaderText:"Add photos to your site.",headerText:"Add photos and make it your own.",subHeaderText:"We’ll automagically build your site using the content you provide below.",hasEnteredSocialInfo:S,previewImageUrl:a,showBackgroundImageUI:p,showFooterBackButton:!0,showDisplayNameUI:!0,showLogoUI:w,showProfileUI:f,showSocialUI:I,showAddInfoTemplatePreviewUI:!0,backgroundUploadComplete:!!h,coverUploadComplete:!!D,logoUploadComplete:!!E,profileUploadComplete:!!b,_dataForPublishTracking:z}}),f=(0,g.withCommonAddInfoDispatchProps)(e=>({onSubmit:(t,o)=>{let{selectedSiteDesignName:n,numberOfDesignsPreviewed:r,numberOfSocialLinks:l,showSocialUI:d}=o;e((0,i.createNewSiteDesign)(t)),e((0,s.trackEvent)(a.default.ACTION.NAVIGATION_CLICK,"Show Me My Site",n)),e((0,s.trackEvent)("Selected Design",n,null,r)),d&&e((0,s.trackEvent)("Selected Social Media",null,null,l))}})),I=(0,g.withCommonAddInfoMergeProps)();var S=(0,n.connect)(w,f,I)(p.default);exports.default=S}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-smuglog","react-redux","sm-analytics","sm-content-wizard-actions","sm-content-wizard-publish-actions","sm-content-wizard-selectors","sm-page-selectors","sm-page-feature-flag-constants","sm-content-wizard-helpers","sm-content-wizard-constants","sm-page-widget-constants","sm-content-wizard-add-info-container-hoc","sm-content-wizard-add-info"]});
YUI.add("sm-content-wizard-add-info-lite-container",(function(e){SM.currentModule="sm-content-wizard-add-info-lite-container";var exports={},n=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n("react-redux"),o=n("sm-content-wizard-add-info-container-hoc"),t=babelHelpers.interopRequireDefault(n("sm-content-wizard-add-info"));const r=(0,o.withCommonAddInfoStateProps)(),d=(0,o.withCommonAddInfoDispatchProps)(),i=(0,o.withCommonAddInfoMergeProps)();var a=(0,e.connect)(r,d,i)(t.default);exports.default=a}(),SM.currentModule=null}),"",{requires:["react-redux","sm-content-wizard-add-info-container-hoc","sm-content-wizard-add-info"]});
YUI.add("sm-content-wizard-preview-template",(function(e){SM.currentModule="sm-content-wizard-preview-template";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("sm-dom")),a=babelHelpers.interopRequireDefault(t("react")),i=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-analytics")),r=babelHelpers.interopRequireDefault(t("sm-component-button")),n=babelHelpers.interopRequireDefault(t("sm-icon")),s=babelHelpers.interopRequireDefault(t("sm-site-preview-iframe")),o=t("sm-site-preview-iframe-constants");class d extends a.default.PureComponent{constructor(...e){super(...e),babelHelpers.defineProperty(this,"state",{previewMode:o.PREVIEW_TYPE_DESKTOP}),babelHelpers.defineProperty(this,"_onMobilePreviewClick",()=>{this.setState({previewMode:o.PREVIEW_TYPE_MOBILE})}),babelHelpers.defineProperty(this,"_onDesktopPreviewClick",()=>{this.setState({previewMode:o.PREVIEW_TYPE_DESKTOP})})}componentDidMount(){e.default.fixVhElements()}render(){let{onCancelClick:e,onChooseDesignClick:t,sitePreviewName:i,sitePreviewUrl:d}=this.props,{previewMode:u}=this.state;return a.default.createElement("div",{className:"sm-cw-preview-design sm-vh","data-vh-height":"100vh"},a.default.createElement("header",{className:"sm-flex-medium-and-up sm-flex-justify-between"},a.default.createElement("div",{className:"sm-flex sm-flex-items-center"},a.default.createElement("h2",{id:"sm-cw-preview-label"},a.default.createElement("span",{"data-content-default":"Previewing","data-content-viewport-medium":"Preview"}),'  "',i,'"'),a.default.createElement("div",{className:"sm-cw-preview-viewport-controls sm-button-group sm-hide-small-and-down",role:"radiogroup","aria-labelledby":"sm-cw-preview-label"},a.default.createElement(r.default,{size:"small",onClick:this._onDesktopPreviewClick,skin:u===o.PREVIEW_TYPE_DESKTOP?"submit":"default","aria-checked":u===o.PREVIEW_TYPE_DESKTOP?"true":"false",role:"radio","data-testid":"contentwiz_previewdesktop_button","data-link-tracking-category":l.default.CATEGORY.CONTENT_WIZARD,"data-link-tracking-action":"Toggle Preview","data-link-tracking-label":"Desktop View","data-link-tracking-property":i},a.default.createElement(n.default,{name:"Desktop",size:n.default.SIZE_SMALL})),a.default.createElement(r.default,{size:"small",onClick:this._onMobilePreviewClick,skin:u===o.PREVIEW_TYPE_MOBILE?"submit":"default","aria-checked":u===o.PREVIEW_TYPE_MOBILE?"true":"false",role:"radio","data-testid":"contentwiz_previewmobile_button","data-link-tracking-category":l.default.CATEGORY.CONTENT_WIZARD,"data-link-tracking-action":"Toggle Preview","data-link-tracking-label":"Mobile View","data-link-tracking-property":i},a.default.createElement(n.default,{name:"Mobile",size:n.default.SIZE_SMALL})))),a.default.createElement("div",{className:"sm-button-equal-width-set sm-cw-preview-cta-buttons"},a.default.createElement(r.default,{onClick:e,size:"small",skin:"submit","data-testid":"contentwiz_previewcancel_button"},"Back"),a.default.createElement(r.default,{onClick:t,size:"small",skin:"accent","data-testid":"contentwiz_previewchoose_button"},a.default.createElement("span",{className:"sm-button-label","data-content-default":"Use This Design","data-content-viewport-extra-small":"Use This","data-content-viewport-small":"Use Design"})))),a.default.createElement(s.default,{previewType:u,previewUrl:d,"data-testid":"contentwiz_preview_iframe"}))}}babelHelpers.defineProperty(d,"displayName","ContentWizard.PreviewTemplate"),babelHelpers.defineProperty(d,"propTypes",{onCancelClick:i.default.func.isRequired,onChooseDesignClick:i.default.func.isRequired,sitePreviewName:i.default.string.isRequired,sitePreviewUrl:i.default.string.isRequired});var u=d;exports.default=u}(),SM.currentModule=null}),"",{requires:["sm-dom","react","prop-types","sm-analytics","sm-component-button","sm-icon","sm-site-preview-iframe","sm-site-preview-iframe-constants"]});
YUI.add("sm-content-wizard-sample-photos-option",(function(e){SM.currentModule="sm-content-wizard-sample-photos-option";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),a=babelHelpers.interopRequireDefault(t("prop-types")),l=babelHelpers.interopRequireDefault(t("sm-component-button")),o=babelHelpers.interopRequireDefault(t("sm-icon"));const s=({title:t,subText:a,iconName:s,onClick:n,buttonDataTestId:u})=>e.default.createElement("section",{className:"sm-cw-sample-photo-option sm-flex-medium-and-up"},e.default.createElement(o.default,{className:"sm-emphasized sm-flex-no-shrink",name:s,size:o.default.SIZE_LARGE}),e.default.createElement("div",{className:"sm-cw-sample-photo-option-copy"},e.default.createElement("h3",null,t),e.default.createElement("p",{className:"sm-h4"},a)),e.default.createElement(l.default,{skin:l.default.SKIN_ACCENT,onClick:n,"data-testid":u},"Go"));s.displayName="ContentWizard.SamplePhotos.PhotoOption",s.propTypes={buttonDataTestId:a.default.string.isRequired,iconName:a.default.string.isRequired,onClick:a.default.func.isRequired,subText:a.default.string.isRequired,title:a.default.string.isRequired};var n=s;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-component-button","sm-icon"]});
YUI.add("sm-content-wizard-sample-photos",(function(e){SM.currentModule="sm-content-wizard-sample-photos";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=babelHelpers.interopRequireDefault(t("react")),o=babelHelpers.interopRequireDefault(t("prop-types")),a=babelHelpers.interopRequireDefault(t("sm-panel-progress")),l=babelHelpers.interopRequireDefault(t("sm-content-wizard-header")),s=babelHelpers.interopRequireDefault(t("sm-content-wizard-sample-photos-option"));const r=t=>{let{isLoading:o,onUploadPhotosClick:r,onUseSamplePhotosClick:n,percentComplete:u,showSubscribe:p}=t;return e.default.createElement(e.default.Fragment,null,e.default.createElement(l.default,{showSubscribe:p}),e.default.createElement("div",{className:"sm-cw-header sm-text-center"},e.default.createElement("h1",{className:"sm-title-l","data-testid":"contentwiz_samplephotos_header"},"Let’s add some photos to get started"),e.default.createElement("p",{className:"sm-h4"},"How do you want to explore SmugMug?")),e.default.createElement("div",{className:"sm-cw-sample-photos"},e.default.createElement(s.default,{iconName:"Upload",title:"My own photos",subText:"Quickly upload your high-resolution photos.",buttonDataTestId:"contentwiz_myphotos_button",onClick:r}),e.default.createElement(s.default,{iconName:"Gallery",title:"Sample photos from SmugMug",subText:"Not ready to upload just yet? Use royalty-free photos to see how SmugMug works.",buttonDataTestId:"contentwiz_usesamples_button",onClick:n}),o&&e.default.createElement(a.default,{title:"Adding Sample Photos",progressBarMessage:"".concat(u,"% complete"),percentComplete:u})))};r.displayName="ContentWizard.SamplePhotos",r.propTypes={isLoading:o.default.bool,onUploadPhotosClick:o.default.func.isRequired,onUseSamplePhotosClick:o.default.func.isRequired,percentComplete:o.default.number,showSubscribe:o.default.bool};var n=r;exports.default=n}(),SM.currentModule=null}),"",{requires:["react","prop-types","sm-panel-progress","sm-content-wizard-header","sm-content-wizard-sample-photos-option"]});
YUI.add("sm-content-wizard-sample-photos-actions",(function(e){SM.currentModule="sm-content-wizard-sample-photos-actions";var exports={},t=(SM.modules[SM.currentModule]={exports,name:SM.currentModule},SM._requireShim);!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pollSamplePhotoTask=d,exports.skipWithSamples=function({addSamplePhotosUri:t,homepageUrl:a,showSuccessModal:u,mode:c,webUri:m}){return async p=>{p((0,i.showLoadingIndicator)(l.LOADING_SAMPLE_PHOTOS,0));try{let o=await p((0,r.postToAPI)({uri:t}));await p(d(o,1e3,60)),e.default.win.location=(0,n.getRedirectUrl)({homepageUrl:a,showSuccessModal:u,mode:c,webUri:m})}catch(e){let t=(0,s.getSmugLogDataForRequestFailure)(e,"skipWithSamples");return o.default.add("sm-content-wizard-sample-photos-actions",t,o.default.LEVEL_ERROR),p((0,i.hideLoadingIndicator)()),p((0,i.showAlert)(l.ALERTS.ERROR_ON_SAVE))}}};var e=babelHelpers.interopRequireDefault(t("sm-dom")),o=babelHelpers.interopRequireDefault(t("sm-smuglog")),r=t("sm-api-redux-actions"),s=t("sm-api-redux-utils"),a=t("sm-api-redux-selectors"),i=t("sm-content-wizard-actions"),n=t("sm-content-wizard-publish-helpers"),l=t("sm-content-wizard-constants");const u=e=>new Promise(t=>setTimeout(t,e));function d(e,t,o){return async(s,n)=>{for(let d=0;d<o;d++){await s((0,r.fetchFromAPI)({uri:e}));let{Status:o,PercentComplete:d}=(0,a.getEntity)(n(),e)||{};if(!o||"Error"===o)throw new Error("Polling request failed");if(s((0,i.showLoadingIndicator)(l.LOADING_SAMPLE_PHOTOS,d)),"Done"===o)return;await u(t)}throw new Error("Aborted after maximum sample photo task poll tries")}}}(),SM.currentModule=null}),"",{requires:["sm-dom","sm-smuglog","sm-api-redux-actions","sm-api-redux-utils","sm-api-redux-selectors","sm-content-wizard-actions","sm-content-wizard-publish-helpers","sm-content-wizard-constants"]});
